var yFe=Object.defineProperty;var Hee=n=>{throw TypeError(n)};var bFe=(n,e,r)=>e in n?yFe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var Gi=(n,e,r)=>bFe(n,typeof e!="symbol"?e+"":e,r),Ok=(n,e,r)=>e.has(n)||Hee("Cannot "+r);var ud=(n,e,r)=>(Ok(n,e,"read from private field"),r?r.call(n):e.get(n)),Ik=(n,e,r)=>e.has(n)?Hee("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,r),KT=(n,e,r,i)=>(Ok(n,e,"write to private field"),i?i.call(n,r):e.set(n,r),r),Dk=(n,e,r)=>(Ok(n,e,"access private method"),r);function C0e(n,e){for(var r=0;r<e.length;r++){const i=e[r];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in n)){const o=Object.getOwnPropertyDescriptor(i,a);o&&Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var Qo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function zW(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var a=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:function(){return n[i]}})}),r}var M0e={exports:{}},_I={},T0e={exports:{}},kr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JC=Symbol.for("react.element"),xFe=Symbol.for("react.portal"),_Fe=Symbol.for("react.fragment"),wFe=Symbol.for("react.strict_mode"),SFe=Symbol.for("react.profiler"),EFe=Symbol.for("react.provider"),CFe=Symbol.for("react.context"),MFe=Symbol.for("react.forward_ref"),TFe=Symbol.for("react.suspense"),AFe=Symbol.for("react.memo"),RFe=Symbol.for("react.lazy"),Wee=Symbol.iterator;function PFe(n){return n===null||typeof n!="object"?null:(n=Wee&&n[Wee]||n["@@iterator"],typeof n=="function"?n:null)}var A0e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R0e=Object.assign,P0e={};function M_(n,e,r){this.props=n,this.context=e,this.refs=P0e,this.updater=r||A0e}M_.prototype.isReactComponent={};M_.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};M_.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function N0e(){}N0e.prototype=M_.prototype;function UW(n,e,r){this.props=n,this.context=e,this.refs=P0e,this.updater=r||A0e}var VW=UW.prototype=new N0e;VW.constructor=UW;R0e(VW,M_.prototype);VW.isPureReactComponent=!0;var qee=Array.isArray,O0e=Object.prototype.hasOwnProperty,GW={current:null},I0e={key:!0,ref:!0,__self:!0,__source:!0};function D0e(n,e,r){var i,a={},o=null,s=null;if(e!=null)for(i in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)O0e.call(e,i)&&!I0e.hasOwnProperty(i)&&(a[i]=e[i]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)a[i]===void 0&&(a[i]=l[i]);return{$$typeof:JC,type:n,key:o,ref:s,props:a,_owner:GW.current}}function NFe(n,e){return{$$typeof:JC,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function jW(n){return typeof n=="object"&&n!==null&&n.$$typeof===JC}function OFe(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(r){return e[r]})}var Yee=/\/+/g;function Lk(n,e){return typeof n=="object"&&n!==null&&n.key!=null?OFe(""+n.key):e.toString(36)}function GR(n,e,r,i,a){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var s=!1;if(n===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(n.$$typeof){case JC:case xFe:s=!0}}if(s)return s=n,a=a(s),n=i===""?"."+Lk(s,0):i,qee(a)?(r="",n!=null&&(r=n.replace(Yee,"$&/")+"/"),GR(a,e,r,"",function(u){return u})):a!=null&&(jW(a)&&(a=NFe(a,r+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(Yee,"$&/")+"/")+n)),e.push(a)),1;if(s=0,i=i===""?".":i+":",qee(n))for(var l=0;l<n.length;l++){o=n[l];var c=i+Lk(o,l);s+=GR(o,e,r,c,a)}else if(c=PFe(n),typeof c=="function")for(n=c.call(n),l=0;!(o=n.next()).done;)o=o.value,c=i+Lk(o,l++),s+=GR(o,e,r,c,a);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function ZT(n,e,r){if(n==null)return n;var i=[],a=0;return GR(n,i,"","",function(o){return e.call(r,o,a++)}),i}function IFe(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(r){(n._status===0||n._status===-1)&&(n._status=1,n._result=r)},function(r){(n._status===0||n._status===-1)&&(n._status=2,n._result=r)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var El={current:null},jR={transition:null},DFe={ReactCurrentDispatcher:El,ReactCurrentBatchConfig:jR,ReactCurrentOwner:GW};function L0e(){throw Error("act(...) is not supported in production builds of React.")}kr.Children={map:ZT,forEach:function(n,e,r){ZT(n,function(){e.apply(this,arguments)},r)},count:function(n){var e=0;return ZT(n,function(){e++}),e},toArray:function(n){return ZT(n,function(e){return e})||[]},only:function(n){if(!jW(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};kr.Component=M_;kr.Fragment=_Fe;kr.Profiler=SFe;kr.PureComponent=UW;kr.StrictMode=wFe;kr.Suspense=TFe;kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DFe;kr.act=L0e;kr.cloneElement=function(n,e,r){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=R0e({},n.props),a=n.key,o=n.ref,s=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=GW.current),e.key!==void 0&&(a=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)O0e.call(e,c)&&!I0e.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:JC,type:n.type,key:a,ref:o,props:i,_owner:s}};kr.createContext=function(n){return n={$$typeof:CFe,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:EFe,_context:n},n.Consumer=n};kr.createElement=D0e;kr.createFactory=function(n){var e=D0e.bind(null,n);return e.type=n,e};kr.createRef=function(){return{current:null}};kr.forwardRef=function(n){return{$$typeof:MFe,render:n}};kr.isValidElement=jW;kr.lazy=function(n){return{$$typeof:RFe,_payload:{_status:-1,_result:n},_init:IFe}};kr.memo=function(n,e){return{$$typeof:AFe,type:n,compare:e===void 0?null:e}};kr.startTransition=function(n){var e=jR.transition;jR.transition={};try{n()}finally{jR.transition=e}};kr.unstable_act=L0e;kr.useCallback=function(n,e){return El.current.useCallback(n,e)};kr.useContext=function(n){return El.current.useContext(n)};kr.useDebugValue=function(){};kr.useDeferredValue=function(n){return El.current.useDeferredValue(n)};kr.useEffect=function(n,e){return El.current.useEffect(n,e)};kr.useId=function(){return El.current.useId()};kr.useImperativeHandle=function(n,e,r){return El.current.useImperativeHandle(n,e,r)};kr.useInsertionEffect=function(n,e){return El.current.useInsertionEffect(n,e)};kr.useLayoutEffect=function(n,e){return El.current.useLayoutEffect(n,e)};kr.useMemo=function(n,e){return El.current.useMemo(n,e)};kr.useReducer=function(n,e,r){return El.current.useReducer(n,e,r)};kr.useRef=function(n){return El.current.useRef(n)};kr.useState=function(n){return El.current.useState(n)};kr.useSyncExternalStore=function(n,e,r){return El.current.useSyncExternalStore(n,e,r)};kr.useTransition=function(){return El.current.useTransition()};kr.version="18.3.1";T0e.exports=kr;var C=T0e.exports;const Je=Sl(C),ny=C0e({__proto__:null,default:Je},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LFe=C,kFe=Symbol.for("react.element"),FFe=Symbol.for("react.fragment"),$Fe=Object.prototype.hasOwnProperty,BFe=LFe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zFe={key:!0,ref:!0,__self:!0,__source:!0};function k0e(n,e,r){var i,a={},o=null,s=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(i in e)$Fe.call(e,i)&&!zFe.hasOwnProperty(i)&&(a[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)a[i]===void 0&&(a[i]=e[i]);return{$$typeof:kFe,type:n,key:o,ref:s,props:a,_owner:BFe.current}}_I.Fragment=FFe;_I.jsx=k0e;_I.jsxs=k0e;M0e.exports=_I;var tn=M0e.exports,HP={},F0e={exports:{}},Yc={},$0e={exports:{}},B0e={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(F,G){var z=F.length;F.push(G);e:for(;0<z;){var U=z-1>>>1,H=F[U];if(0<a(H,G))F[U]=G,F[z]=H,z=U;else break e}}function r(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var G=F[0],z=F.pop();if(z!==G){F[0]=z;e:for(var U=0,H=F.length,X=H>>>1;U<X;){var V=2*(U+1)-1,W=F[V],K=V+1,q=F[K];if(0>a(W,z))K<H&&0>a(q,W)?(F[U]=q,F[K]=z,U=K):(F[U]=W,F[V]=z,U=V);else if(K<H&&0>a(q,z))F[U]=q,F[K]=z,U=K;else break e}}return G}function a(F,G){var z=F.sortIndex-G.sortIndex;return z!==0?z:F.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();n.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(F){for(var G=r(u);G!==null;){if(G.callback===null)i(u);else if(G.startTime<=F)i(u),G.sortIndex=G.expirationTime,e(c,G);else break;G=r(u)}}function _(F){if(m=!1,x(F),!g)if(r(c)!==null)g=!0,$(S);else{var G=r(u);G!==null&&B(_,G.startTime-F)}}function S(F,G){g=!1,m&&(m=!1,y(T),T=-1),p=!0;var z=h;try{for(x(G),f=r(c);f!==null&&(!(f.expirationTime>G)||F&&!N());){var U=f.callback;if(typeof U=="function"){f.callback=null,h=f.priorityLevel;var H=U(f.expirationTime<=G);G=n.unstable_now(),typeof H=="function"?f.callback=H:f===r(c)&&i(c),x(G)}else i(c);f=r(c)}if(f!==null)var X=!0;else{var V=r(u);V!==null&&B(_,V.startTime-G),X=!1}return X}finally{f=null,h=z,p=!1}}var M=!1,E=null,T=-1,P=5,A=-1;function N(){return!(n.unstable_now()-A<P)}function O(){if(E!==null){var F=n.unstable_now();A=F;var G=!0;try{G=E(!0,F)}finally{G?I():(M=!1,E=null)}}else M=!1}var I;if(typeof b=="function")I=function(){b(O)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,k=D.port2;D.port1.onmessage=O,I=function(){k.postMessage(null)}}else I=function(){v(O,0)};function $(F){E=F,M||(M=!0,I())}function B(F,G){T=v(function(){F(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){g||p||(g=!0,$(S))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return r(c)},n.unstable_next=function(F){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var z=h;h=G;try{return F()}finally{h=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,G){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var z=h;h=F;try{return G()}finally{h=z}},n.unstable_scheduleCallback=function(F,G,z){var U=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?U+z:U):z=U,F){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=z+H,F={id:d++,callback:G,priorityLevel:F,startTime:z,expirationTime:H,sortIndex:-1},z>U?(F.sortIndex=z,e(u,F),r(c)===null&&F===r(u)&&(m?(y(T),T=-1):m=!0,B(_,z-U))):(F.sortIndex=H,e(c,F),g||p||(g=!0,$(S))),F},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(F){var G=h;return function(){var z=h;h=G;try{return F.apply(this,arguments)}finally{h=z}}}})(B0e);$0e.exports=B0e;var UFe=$0e.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VFe=C,Gc=UFe;function Vt(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var z0e=new Set,hE={};function Dy(n,e){Cx(n,e),Cx(n+"Capture",e)}function Cx(n,e){for(hE[n]=e,n=0;n<e.length;n++)z0e.add(e[n])}var Ap=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sV=Object.prototype.hasOwnProperty,GFe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xee={},Kee={};function jFe(n){return sV.call(Kee,n)?!0:sV.call(Xee,n)?!1:GFe.test(n)?Kee[n]=!0:(Xee[n]=!0,!1)}function HFe(n,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function WFe(n,e,r,i){if(e===null||typeof e>"u"||HFe(n,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Cl(n,e,r,i,a,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var _s={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){_s[n]=new Cl(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];_s[e]=new Cl(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){_s[n]=new Cl(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){_s[n]=new Cl(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){_s[n]=new Cl(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){_s[n]=new Cl(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){_s[n]=new Cl(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){_s[n]=new Cl(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){_s[n]=new Cl(n,5,!1,n.toLowerCase(),null,!1,!1)});var HW=/[\-:]([a-z])/g;function WW(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(HW,WW);_s[e]=new Cl(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(HW,WW);_s[e]=new Cl(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(HW,WW);_s[e]=new Cl(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){_s[n]=new Cl(n,1,!1,n.toLowerCase(),null,!1,!1)});_s.xlinkHref=new Cl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){_s[n]=new Cl(n,1,!1,n.toLowerCase(),null,!0,!0)});function qW(n,e,r,i){var a=_s.hasOwnProperty(e)?_s[e]:null;(a!==null?a.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(WFe(e,r,a,i)&&(r=null),i||a===null?jFe(e)&&(r===null?n.removeAttribute(e):n.setAttribute(e,""+r)):a.mustUseProperty?n[a.propertyName]=r===null?a.type===3?!1:"":r:(e=a.attributeName,i=a.attributeNamespace,r===null?n.removeAttribute(e):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,i?n.setAttributeNS(i,e,r):n.setAttribute(e,r))))}var jp=VFe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,QT=Symbol.for("react.element"),Cb=Symbol.for("react.portal"),Mb=Symbol.for("react.fragment"),YW=Symbol.for("react.strict_mode"),lV=Symbol.for("react.profiler"),U0e=Symbol.for("react.provider"),V0e=Symbol.for("react.context"),XW=Symbol.for("react.forward_ref"),cV=Symbol.for("react.suspense"),uV=Symbol.for("react.suspense_list"),KW=Symbol.for("react.memo"),$g=Symbol.for("react.lazy"),G0e=Symbol.for("react.offscreen"),Zee=Symbol.iterator;function Vw(n){return n===null||typeof n!="object"?null:(n=Zee&&n[Zee]||n["@@iterator"],typeof n=="function"?n:null)}var Pa=Object.assign,kk;function qS(n){if(kk===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);kk=e&&e[1]||""}return`
`+kk+n}var Fk=!1;function $k(n,e){if(!n||Fk)return"";Fk=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),o=i.stack.split(`
`),s=a.length-1,l=o.length-1;1<=s&&0<=l&&a[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(a[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||a[s]!==o[l]){var c=`
`+a[s].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=s&&0<=l);break}}}finally{Fk=!1,Error.prepareStackTrace=r}return(n=n?n.displayName||n.name:"")?qS(n):""}function qFe(n){switch(n.tag){case 5:return qS(n.type);case 16:return qS("Lazy");case 13:return qS("Suspense");case 19:return qS("SuspenseList");case 0:case 2:case 15:return n=$k(n.type,!1),n;case 11:return n=$k(n.type.render,!1),n;case 1:return n=$k(n.type,!0),n;default:return""}}function dV(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Mb:return"Fragment";case Cb:return"Portal";case lV:return"Profiler";case YW:return"StrictMode";case cV:return"Suspense";case uV:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case V0e:return(n.displayName||"Context")+".Consumer";case U0e:return(n._context.displayName||"Context")+".Provider";case XW:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case KW:return e=n.displayName||null,e!==null?e:dV(n.type)||"Memo";case $g:e=n._payload,n=n._init;try{return dV(n(e))}catch{}}return null}function YFe(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dV(e);case 8:return e===YW?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function km(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function j0e(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XFe(n){var e=j0e(n)?"checked":"value",r=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,o=r.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return a.call(this)},set:function(s){i=""+s,o.call(this,s)}}),Object.defineProperty(n,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function JT(n){n._valueTracker||(n._valueTracker=XFe(n))}function H0e(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return n&&(i=j0e(n)?n.checked?"true":"false":n.value),n=i,n!==r?(e.setValue(n),!0):!1}function WP(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function fV(n,e){var r=e.checked;return Pa({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??n._wrapperState.initialChecked})}function Qee(n,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=km(e.value!=null?e.value:r),n._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function W0e(n,e){e=e.checked,e!=null&&qW(n,"checked",e,!1)}function hV(n,e){W0e(n,e);var r=km(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+r):n.value!==""+r&&(n.value=""+r);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?pV(n,e.type,r):e.hasOwnProperty("defaultValue")&&pV(n,e.type,km(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Jee(n,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,r||e===n.value||(n.value=e),n.defaultValue=e}r=n.name,r!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,r!==""&&(n.name=r)}function pV(n,e,r){(e!=="number"||WP(n.ownerDocument)!==n)&&(r==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+r&&(n.defaultValue=""+r))}var YS=Array.isArray;function Qb(n,e,r,i){if(n=n.options,e){e={};for(var a=0;a<r.length;a++)e["$"+r[a]]=!0;for(r=0;r<n.length;r++)a=e.hasOwnProperty("$"+n[r].value),n[r].selected!==a&&(n[r].selected=a),a&&i&&(n[r].defaultSelected=!0)}else{for(r=""+km(r),e=null,a=0;a<n.length;a++){if(n[a].value===r){n[a].selected=!0,i&&(n[a].defaultSelected=!0);return}e!==null||n[a].disabled||(e=n[a])}e!==null&&(e.selected=!0)}}function gV(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Vt(91));return Pa({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ete(n,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Vt(92));if(YS(r)){if(1<r.length)throw Error(Vt(93));r=r[0]}e=r}e==null&&(e=""),r=e}n._wrapperState={initialValue:km(r)}}function q0e(n,e){var r=km(e.value),i=km(e.defaultValue);r!=null&&(r=""+r,r!==n.value&&(n.value=r),e.defaultValue==null&&n.defaultValue!==r&&(n.defaultValue=r)),i!=null&&(n.defaultValue=""+i)}function tte(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Y0e(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mV(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Y0e(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var e3,X0e=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,a){MSApp.execUnsafeLocalFunction(function(){return n(e,r,i,a)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(e3=e3||document.createElement("div"),e3.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=e3.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function pE(n,e){if(e){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=e;return}}n.textContent=e}var M2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},KFe=["Webkit","ms","Moz","O"];Object.keys(M2).forEach(function(n){KFe.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),M2[e]=M2[n]})});function K0e(n,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||M2.hasOwnProperty(n)&&M2[n]?(""+e).trim():e+"px"}function Z0e(n,e){n=n.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,a=K0e(r,e[r],i);r==="float"&&(r="cssFloat"),i?n.setProperty(r,a):n[r]=a}}var ZFe=Pa({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vV(n,e){if(e){if(ZFe[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Vt(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Vt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Vt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Vt(62))}}function yV(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bV=null;function ZW(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var xV=null,Jb=null,ex=null;function nte(n){if(n=nM(n)){if(typeof xV!="function")throw Error(Vt(280));var e=n.stateNode;e&&(e=MI(e),xV(n.stateNode,n.type,e))}}function Q0e(n){Jb?ex?ex.push(n):ex=[n]:Jb=n}function J0e(){if(Jb){var n=Jb,e=ex;if(ex=Jb=null,nte(n),e)for(n=0;n<e.length;n++)nte(e[n])}}function eye(n,e){return n(e)}function tye(){}var Bk=!1;function nye(n,e,r){if(Bk)return n(e,r);Bk=!0;try{return eye(n,e,r)}finally{Bk=!1,(Jb!==null||ex!==null)&&(tye(),J0e())}}function gE(n,e){var r=n.stateNode;if(r===null)return null;var i=MI(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(Vt(231,e,typeof r));return r}var _V=!1;if(Ap)try{var Gw={};Object.defineProperty(Gw,"passive",{get:function(){_V=!0}}),window.addEventListener("test",Gw,Gw),window.removeEventListener("test",Gw,Gw)}catch{_V=!1}function QFe(n,e,r,i,a,o,s,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(d){this.onError(d)}}var T2=!1,qP=null,YP=!1,wV=null,JFe={onError:function(n){T2=!0,qP=n}};function e8e(n,e,r,i,a,o,s,l,c){T2=!1,qP=null,QFe.apply(JFe,arguments)}function t8e(n,e,r,i,a,o,s,l,c){if(e8e.apply(this,arguments),T2){if(T2){var u=qP;T2=!1,qP=null}else throw Error(Vt(198));YP||(YP=!0,wV=u)}}function Ly(n){var e=n,r=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(r=e.return),n=e.return;while(n)}return e.tag===3?r:null}function rye(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function rte(n){if(Ly(n)!==n)throw Error(Vt(188))}function n8e(n){var e=n.alternate;if(!e){if(e=Ly(n),e===null)throw Error(Vt(188));return e!==n?null:n}for(var r=n,i=e;;){var a=r.return;if(a===null)break;var o=a.alternate;if(o===null){if(i=a.return,i!==null){r=i;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===r)return rte(a),n;if(o===i)return rte(a),e;o=o.sibling}throw Error(Vt(188))}if(r.return!==i.return)r=a,i=o;else{for(var s=!1,l=a.child;l;){if(l===r){s=!0,r=a,i=o;break}if(l===i){s=!0,i=a,r=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===r){s=!0,r=o,i=a;break}if(l===i){s=!0,i=o,r=a;break}l=l.sibling}if(!s)throw Error(Vt(189))}}if(r.alternate!==i)throw Error(Vt(190))}if(r.tag!==3)throw Error(Vt(188));return r.stateNode.current===r?n:e}function iye(n){return n=n8e(n),n!==null?aye(n):null}function aye(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=aye(n);if(e!==null)return e;n=n.sibling}return null}var oye=Gc.unstable_scheduleCallback,ite=Gc.unstable_cancelCallback,r8e=Gc.unstable_shouldYield,i8e=Gc.unstable_requestPaint,Ya=Gc.unstable_now,a8e=Gc.unstable_getCurrentPriorityLevel,QW=Gc.unstable_ImmediatePriority,sye=Gc.unstable_UserBlockingPriority,XP=Gc.unstable_NormalPriority,o8e=Gc.unstable_LowPriority,lye=Gc.unstable_IdlePriority,wI=null,Yf=null;function s8e(n){if(Yf&&typeof Yf.onCommitFiberRoot=="function")try{Yf.onCommitFiberRoot(wI,n,void 0,(n.current.flags&128)===128)}catch{}}var Vd=Math.clz32?Math.clz32:u8e,l8e=Math.log,c8e=Math.LN2;function u8e(n){return n>>>=0,n===0?32:31-(l8e(n)/c8e|0)|0}var t3=64,n3=4194304;function XS(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function KP(n,e){var r=n.pendingLanes;if(r===0)return 0;var i=0,a=n.suspendedLanes,o=n.pingedLanes,s=r&268435455;if(s!==0){var l=s&~a;l!==0?i=XS(l):(o&=s,o!==0&&(i=XS(o)))}else s=r&~a,s!==0?i=XS(s):o!==0&&(i=XS(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&a)&&(a=i&-i,o=e&-e,a>=o||a===16&&(o&4194240)!==0))return e;if(i&4&&(i|=r&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)r=31-Vd(e),a=1<<r,i|=n[r],e&=~a;return i}function d8e(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f8e(n,e){for(var r=n.suspendedLanes,i=n.pingedLanes,a=n.expirationTimes,o=n.pendingLanes;0<o;){var s=31-Vd(o),l=1<<s,c=a[s];c===-1?(!(l&r)||l&i)&&(a[s]=d8e(l,e)):c<=e&&(n.expiredLanes|=l),o&=~l}}function SV(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function cye(){var n=t3;return t3<<=1,!(t3&4194240)&&(t3=64),n}function zk(n){for(var e=[],r=0;31>r;r++)e.push(n);return e}function eM(n,e,r){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Vd(e),n[e]=r}function h8e(n,e){var r=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<r;){var a=31-Vd(r),o=1<<a;e[a]=0,i[a]=-1,n[a]=-1,r&=~o}}function JW(n,e){var r=n.entangledLanes|=e;for(n=n.entanglements;r;){var i=31-Vd(r),a=1<<i;a&e|n[i]&e&&(n[i]|=e),r&=~a}}var Mi=0;function uye(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var dye,eq,fye,hye,pye,EV=!1,r3=[],hm=null,pm=null,gm=null,mE=new Map,vE=new Map,Vg=[],p8e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ate(n,e){switch(n){case"focusin":case"focusout":hm=null;break;case"dragenter":case"dragleave":pm=null;break;case"mouseover":case"mouseout":gm=null;break;case"pointerover":case"pointerout":mE.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vE.delete(e.pointerId)}}function jw(n,e,r,i,a,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:o,targetContainers:[a]},e!==null&&(e=nM(e),e!==null&&eq(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),n)}function g8e(n,e,r,i,a){switch(e){case"focusin":return hm=jw(hm,n,e,r,i,a),!0;case"dragenter":return pm=jw(pm,n,e,r,i,a),!0;case"mouseover":return gm=jw(gm,n,e,r,i,a),!0;case"pointerover":var o=a.pointerId;return mE.set(o,jw(mE.get(o)||null,n,e,r,i,a)),!0;case"gotpointercapture":return o=a.pointerId,vE.set(o,jw(vE.get(o)||null,n,e,r,i,a)),!0}return!1}function gye(n){var e=w0(n.target);if(e!==null){var r=Ly(e);if(r!==null){if(e=r.tag,e===13){if(e=rye(r),e!==null){n.blockedOn=e,pye(n.priority,function(){fye(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function HR(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var r=CV(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(r===null){r=n.nativeEvent;var i=new r.constructor(r.type,r);bV=i,r.target.dispatchEvent(i),bV=null}else return e=nM(r),e!==null&&eq(e),n.blockedOn=r,!1;e.shift()}return!0}function ote(n,e,r){HR(n)&&r.delete(e)}function m8e(){EV=!1,hm!==null&&HR(hm)&&(hm=null),pm!==null&&HR(pm)&&(pm=null),gm!==null&&HR(gm)&&(gm=null),mE.forEach(ote),vE.forEach(ote)}function Hw(n,e){n.blockedOn===e&&(n.blockedOn=null,EV||(EV=!0,Gc.unstable_scheduleCallback(Gc.unstable_NormalPriority,m8e)))}function yE(n){function e(a){return Hw(a,n)}if(0<r3.length){Hw(r3[0],n);for(var r=1;r<r3.length;r++){var i=r3[r];i.blockedOn===n&&(i.blockedOn=null)}}for(hm!==null&&Hw(hm,n),pm!==null&&Hw(pm,n),gm!==null&&Hw(gm,n),mE.forEach(e),vE.forEach(e),r=0;r<Vg.length;r++)i=Vg[r],i.blockedOn===n&&(i.blockedOn=null);for(;0<Vg.length&&(r=Vg[0],r.blockedOn===null);)gye(r),r.blockedOn===null&&Vg.shift()}var tx=jp.ReactCurrentBatchConfig,ZP=!0;function v8e(n,e,r,i){var a=Mi,o=tx.transition;tx.transition=null;try{Mi=1,tq(n,e,r,i)}finally{Mi=a,tx.transition=o}}function y8e(n,e,r,i){var a=Mi,o=tx.transition;tx.transition=null;try{Mi=4,tq(n,e,r,i)}finally{Mi=a,tx.transition=o}}function tq(n,e,r,i){if(ZP){var a=CV(n,e,r,i);if(a===null)Kk(n,e,i,QP,r),ate(n,i);else if(g8e(a,n,e,r,i))i.stopPropagation();else if(ate(n,i),e&4&&-1<p8e.indexOf(n)){for(;a!==null;){var o=nM(a);if(o!==null&&dye(o),o=CV(n,e,r,i),o===null&&Kk(n,e,i,QP,r),o===a)break;a=o}a!==null&&i.stopPropagation()}else Kk(n,e,i,null,r)}}var QP=null;function CV(n,e,r,i){if(QP=null,n=ZW(i),n=w0(n),n!==null)if(e=Ly(n),e===null)n=null;else if(r=e.tag,r===13){if(n=rye(e),n!==null)return n;n=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return QP=n,null}function mye(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(a8e()){case QW:return 1;case sye:return 4;case XP:case o8e:return 16;case lye:return 536870912;default:return 16}default:return 16}}var Kg=null,nq=null,WR=null;function vye(){if(WR)return WR;var n,e=nq,r=e.length,i,a="value"in Kg?Kg.value:Kg.textContent,o=a.length;for(n=0;n<r&&e[n]===a[n];n++);var s=r-n;for(i=1;i<=s&&e[r-i]===a[o-i];i++);return WR=a.slice(n,1<i?1-i:void 0)}function qR(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function i3(){return!0}function ste(){return!1}function Xc(n){function e(r,i,a,o,s){this._reactName=r,this._targetInst=a,this.type=i,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(r=n[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?i3:ste,this.isPropagationStopped=ste,this}return Pa(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=i3)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=i3)},persist:function(){},isPersistent:i3}),e}var T_={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rq=Xc(T_),tM=Pa({},T_,{view:0,detail:0}),b8e=Xc(tM),Uk,Vk,Ww,SI=Pa({},tM,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iq,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ww&&(Ww&&n.type==="mousemove"?(Uk=n.screenX-Ww.screenX,Vk=n.screenY-Ww.screenY):Vk=Uk=0,Ww=n),Uk)},movementY:function(n){return"movementY"in n?n.movementY:Vk}}),lte=Xc(SI),x8e=Pa({},SI,{dataTransfer:0}),_8e=Xc(x8e),w8e=Pa({},tM,{relatedTarget:0}),Gk=Xc(w8e),S8e=Pa({},T_,{animationName:0,elapsedTime:0,pseudoElement:0}),E8e=Xc(S8e),C8e=Pa({},T_,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),M8e=Xc(C8e),T8e=Pa({},T_,{data:0}),cte=Xc(T8e),A8e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R8e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P8e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function N8e(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=P8e[n])?!!e[n]:!1}function iq(){return N8e}var O8e=Pa({},tM,{key:function(n){if(n.key){var e=A8e[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=qR(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?R8e[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iq,charCode:function(n){return n.type==="keypress"?qR(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?qR(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),I8e=Xc(O8e),D8e=Pa({},SI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ute=Xc(D8e),L8e=Pa({},tM,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iq}),k8e=Xc(L8e),F8e=Pa({},T_,{propertyName:0,elapsedTime:0,pseudoElement:0}),$8e=Xc(F8e),B8e=Pa({},SI,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),z8e=Xc(B8e),U8e=[9,13,27,32],aq=Ap&&"CompositionEvent"in window,A2=null;Ap&&"documentMode"in document&&(A2=document.documentMode);var V8e=Ap&&"TextEvent"in window&&!A2,yye=Ap&&(!aq||A2&&8<A2&&11>=A2),dte=" ",fte=!1;function bye(n,e){switch(n){case"keyup":return U8e.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xye(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Tb=!1;function G8e(n,e){switch(n){case"compositionend":return xye(e);case"keypress":return e.which!==32?null:(fte=!0,dte);case"textInput":return n=e.data,n===dte&&fte?null:n;default:return null}}function j8e(n,e){if(Tb)return n==="compositionend"||!aq&&bye(n,e)?(n=vye(),WR=nq=Kg=null,Tb=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yye&&e.locale!=="ko"?null:e.data;default:return null}}var H8e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hte(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!H8e[n.type]:e==="textarea"}function _ye(n,e,r,i){Q0e(i),e=JP(e,"onChange"),0<e.length&&(r=new rq("onChange","change",null,r,i),n.push({event:r,listeners:e}))}var R2=null,bE=null;function W8e(n){Oye(n,0)}function EI(n){var e=Pb(n);if(H0e(e))return n}function q8e(n,e){if(n==="change")return e}var wye=!1;if(Ap){var jk;if(Ap){var Hk="oninput"in document;if(!Hk){var pte=document.createElement("div");pte.setAttribute("oninput","return;"),Hk=typeof pte.oninput=="function"}jk=Hk}else jk=!1;wye=jk&&(!document.documentMode||9<document.documentMode)}function gte(){R2&&(R2.detachEvent("onpropertychange",Sye),bE=R2=null)}function Sye(n){if(n.propertyName==="value"&&EI(bE)){var e=[];_ye(e,bE,n,ZW(n)),nye(W8e,e)}}function Y8e(n,e,r){n==="focusin"?(gte(),R2=e,bE=r,R2.attachEvent("onpropertychange",Sye)):n==="focusout"&&gte()}function X8e(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return EI(bE)}function K8e(n,e){if(n==="click")return EI(e)}function Z8e(n,e){if(n==="input"||n==="change")return EI(e)}function Q8e(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var qd=typeof Object.is=="function"?Object.is:Q8e;function xE(n,e){if(qd(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var r=Object.keys(n),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var a=r[i];if(!sV.call(e,a)||!qd(n[a],e[a]))return!1}return!0}function mte(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function vte(n,e){var r=mte(n);n=0;for(var i;r;){if(r.nodeType===3){if(i=n+r.textContent.length,n<=e&&i>=e)return{node:r,offset:e-n};n=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=mte(r)}}function Eye(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Eye(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function Cye(){for(var n=window,e=WP();e instanceof n.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)n=e.contentWindow;else break;e=WP(n.document)}return e}function oq(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function J8e(n){var e=Cye(),r=n.focusedElem,i=n.selectionRange;if(e!==r&&r&&r.ownerDocument&&Eye(r.ownerDocument.documentElement,r)){if(i!==null&&oq(r)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(n,r.value.length);else if(n=(e=r.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var a=r.textContent.length,o=Math.min(i.start,a);i=i.end===void 0?o:Math.min(i.end,a),!n.extend&&o>i&&(a=i,i=o,o=a),a=vte(r,o);var s=vte(r,i);a&&s&&(n.rangeCount!==1||n.anchorNode!==a.node||n.anchorOffset!==a.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}}for(e=[],n=r;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)n=e[r],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var e$e=Ap&&"documentMode"in document&&11>=document.documentMode,Ab=null,MV=null,P2=null,TV=!1;function yte(n,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;TV||Ab==null||Ab!==WP(i)||(i=Ab,"selectionStart"in i&&oq(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),P2&&xE(P2,i)||(P2=i,i=JP(MV,"onSelect"),0<i.length&&(e=new rq("onSelect","select",null,e,r),n.push({event:e,listeners:i}),e.target=Ab)))}function a3(n,e){var r={};return r[n.toLowerCase()]=e.toLowerCase(),r["Webkit"+n]="webkit"+e,r["Moz"+n]="moz"+e,r}var Rb={animationend:a3("Animation","AnimationEnd"),animationiteration:a3("Animation","AnimationIteration"),animationstart:a3("Animation","AnimationStart"),transitionend:a3("Transition","TransitionEnd")},Wk={},Mye={};Ap&&(Mye=document.createElement("div").style,"AnimationEvent"in window||(delete Rb.animationend.animation,delete Rb.animationiteration.animation,delete Rb.animationstart.animation),"TransitionEvent"in window||delete Rb.transitionend.transition);function CI(n){if(Wk[n])return Wk[n];if(!Rb[n])return n;var e=Rb[n],r;for(r in e)if(e.hasOwnProperty(r)&&r in Mye)return Wk[n]=e[r];return n}var Tye=CI("animationend"),Aye=CI("animationiteration"),Rye=CI("animationstart"),Pye=CI("transitionend"),Nye=new Map,bte="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ev(n,e){Nye.set(n,e),Dy(e,[n])}for(var qk=0;qk<bte.length;qk++){var Yk=bte[qk],t$e=Yk.toLowerCase(),n$e=Yk[0].toUpperCase()+Yk.slice(1);ev(t$e,"on"+n$e)}ev(Tye,"onAnimationEnd");ev(Aye,"onAnimationIteration");ev(Rye,"onAnimationStart");ev("dblclick","onDoubleClick");ev("focusin","onFocus");ev("focusout","onBlur");ev(Pye,"onTransitionEnd");Cx("onMouseEnter",["mouseout","mouseover"]);Cx("onMouseLeave",["mouseout","mouseover"]);Cx("onPointerEnter",["pointerout","pointerover"]);Cx("onPointerLeave",["pointerout","pointerover"]);Dy("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dy("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dy("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dy("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dy("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dy("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var KS="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r$e=new Set("cancel close invalid load scroll toggle".split(" ").concat(KS));function xte(n,e,r){var i=n.type||"unknown-event";n.currentTarget=r,t8e(i,e,void 0,n),n.currentTarget=null}function Oye(n,e){e=(e&4)!==0;for(var r=0;r<n.length;r++){var i=n[r],a=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var s=i.length-1;0<=s;s--){var l=i[s],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&a.isPropagationStopped())break e;xte(a,l,u),o=c}else for(s=0;s<i.length;s++){if(l=i[s],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&a.isPropagationStopped())break e;xte(a,l,u),o=c}}}if(YP)throw n=wV,YP=!1,wV=null,n}function Ki(n,e){var r=e[OV];r===void 0&&(r=e[OV]=new Set);var i=n+"__bubble";r.has(i)||(Iye(e,n,2,!1),r.add(i))}function Xk(n,e,r){var i=0;e&&(i|=4),Iye(r,n,i,e)}var o3="_reactListening"+Math.random().toString(36).slice(2);function _E(n){if(!n[o3]){n[o3]=!0,z0e.forEach(function(r){r!=="selectionchange"&&(r$e.has(r)||Xk(r,!1,n),Xk(r,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[o3]||(e[o3]=!0,Xk("selectionchange",!1,e))}}function Iye(n,e,r,i){switch(mye(e)){case 1:var a=v8e;break;case 4:a=y8e;break;default:a=tq}r=a.bind(null,e,r,n),a=void 0,!_V||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),i?a!==void 0?n.addEventListener(e,r,{capture:!0,passive:a}):n.addEventListener(e,r,!0):a!==void 0?n.addEventListener(e,r,{passive:a}):n.addEventListener(e,r,!1)}function Kk(n,e,r,i,a){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var l=i.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(s===4)for(s=i.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;s=s.return}for(;l!==null;){if(s=w0(l),s===null)return;if(c=s.tag,c===5||c===6){i=o=s;continue e}l=l.parentNode}}i=i.return}nye(function(){var u=o,d=ZW(r),f=[];e:{var h=Nye.get(n);if(h!==void 0){var p=rq,g=n;switch(n){case"keypress":if(qR(r)===0)break e;case"keydown":case"keyup":p=I8e;break;case"focusin":g="focus",p=Gk;break;case"focusout":g="blur",p=Gk;break;case"beforeblur":case"afterblur":p=Gk;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=lte;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=_8e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=k8e;break;case Tye:case Aye:case Rye:p=E8e;break;case Pye:p=$8e;break;case"scroll":p=b8e;break;case"wheel":p=z8e;break;case"copy":case"cut":case"paste":p=M8e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=ute}var m=(e&4)!==0,v=!m&&n==="scroll",y=m?h!==null?h+"Capture":null:h;m=[];for(var b=u,x;b!==null;){x=b;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,y!==null&&(_=gE(b,y),_!=null&&m.push(wE(b,_,x)))),v)break;b=b.return}0<m.length&&(h=new p(h,g,null,r,d),f.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",h&&r!==bV&&(g=r.relatedTarget||r.fromElement)&&(w0(g)||g[Rp]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?w0(g):null,g!==null&&(v=Ly(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(m=lte,_="onMouseLeave",y="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(m=ute,_="onPointerLeave",y="onPointerEnter",b="pointer"),v=p==null?h:Pb(p),x=g==null?h:Pb(g),h=new m(_,b+"leave",p,r,d),h.target=v,h.relatedTarget=x,_=null,w0(d)===u&&(m=new m(y,b+"enter",g,r,d),m.target=x,m.relatedTarget=v,_=m),v=_,p&&g)t:{for(m=p,y=g,b=0,x=m;x;x=m1(x))b++;for(x=0,_=y;_;_=m1(_))x++;for(;0<b-x;)m=m1(m),b--;for(;0<x-b;)y=m1(y),x--;for(;b--;){if(m===y||y!==null&&m===y.alternate)break t;m=m1(m),y=m1(y)}m=null}else m=null;p!==null&&_te(f,h,p,m,!1),g!==null&&v!==null&&_te(f,v,g,m,!0)}}e:{if(h=u?Pb(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var S=q8e;else if(hte(h))if(wye)S=Z8e;else{S=X8e;var M=Y8e}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=K8e);if(S&&(S=S(n,u))){_ye(f,S,r,d);break e}M&&M(n,h,u),n==="focusout"&&(M=h._wrapperState)&&M.controlled&&h.type==="number"&&pV(h,"number",h.value)}switch(M=u?Pb(u):window,n){case"focusin":(hte(M)||M.contentEditable==="true")&&(Ab=M,MV=u,P2=null);break;case"focusout":P2=MV=Ab=null;break;case"mousedown":TV=!0;break;case"contextmenu":case"mouseup":case"dragend":TV=!1,yte(f,r,d);break;case"selectionchange":if(e$e)break;case"keydown":case"keyup":yte(f,r,d)}var E;if(aq)e:{switch(n){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Tb?bye(n,r)&&(T="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(yye&&r.locale!=="ko"&&(Tb||T!=="onCompositionStart"?T==="onCompositionEnd"&&Tb&&(E=vye()):(Kg=d,nq="value"in Kg?Kg.value:Kg.textContent,Tb=!0)),M=JP(u,T),0<M.length&&(T=new cte(T,n,null,r,d),f.push({event:T,listeners:M}),E?T.data=E:(E=xye(r),E!==null&&(T.data=E)))),(E=V8e?G8e(n,r):j8e(n,r))&&(u=JP(u,"onBeforeInput"),0<u.length&&(d=new cte("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=E))}Oye(f,e)})}function wE(n,e,r){return{instance:n,listener:e,currentTarget:r}}function JP(n,e){for(var r=e+"Capture",i=[];n!==null;){var a=n,o=a.stateNode;a.tag===5&&o!==null&&(a=o,o=gE(n,r),o!=null&&i.unshift(wE(n,o,a)),o=gE(n,e),o!=null&&i.push(wE(n,o,a))),n=n.return}return i}function m1(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function _te(n,e,r,i,a){for(var o=e._reactName,s=[];r!==null&&r!==i;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&u!==null&&(l=u,a?(c=gE(r,o),c!=null&&s.unshift(wE(r,c,l))):a||(c=gE(r,o),c!=null&&s.push(wE(r,c,l)))),r=r.return}s.length!==0&&n.push({event:e,listeners:s})}var i$e=/\r\n?/g,a$e=/\u0000|\uFFFD/g;function wte(n){return(typeof n=="string"?n:""+n).replace(i$e,`
`).replace(a$e,"")}function s3(n,e,r){if(e=wte(e),wte(n)!==e&&r)throw Error(Vt(425))}function eN(){}var AV=null,RV=null;function PV(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var NV=typeof setTimeout=="function"?setTimeout:void 0,o$e=typeof clearTimeout=="function"?clearTimeout:void 0,Ste=typeof Promise=="function"?Promise:void 0,s$e=typeof queueMicrotask=="function"?queueMicrotask:typeof Ste<"u"?function(n){return Ste.resolve(null).then(n).catch(l$e)}:NV;function l$e(n){setTimeout(function(){throw n})}function Zk(n,e){var r=e,i=0;do{var a=r.nextSibling;if(n.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(i===0){n.removeChild(a),yE(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=a}while(r);yE(e)}function mm(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Ete(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return n;e--}else r==="/$"&&e++}n=n.previousSibling}return null}var A_=Math.random().toString(36).slice(2),If="__reactFiber$"+A_,SE="__reactProps$"+A_,Rp="__reactContainer$"+A_,OV="__reactEvents$"+A_,c$e="__reactListeners$"+A_,u$e="__reactHandles$"+A_;function w0(n){var e=n[If];if(e)return e;for(var r=n.parentNode;r;){if(e=r[Rp]||r[If]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(n=Ete(n);n!==null;){if(r=n[If])return r;n=Ete(n)}return e}n=r,r=n.parentNode}return null}function nM(n){return n=n[If]||n[Rp],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Pb(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Vt(33))}function MI(n){return n[SE]||null}var IV=[],Nb=-1;function tv(n){return{current:n}}function ra(n){0>Nb||(n.current=IV[Nb],IV[Nb]=null,Nb--)}function Hi(n,e){Nb++,IV[Nb]=n.current,n.current=e}var Fm={},Ys=tv(Fm),Ql=tv(!1),ry=Fm;function Mx(n,e){var r=n.type.contextTypes;if(!r)return Fm;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var a={},o;for(o in r)a[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=a),a}function Jl(n){return n=n.childContextTypes,n!=null}function tN(){ra(Ql),ra(Ys)}function Cte(n,e,r){if(Ys.current!==Fm)throw Error(Vt(168));Hi(Ys,e),Hi(Ql,r)}function Dye(n,e,r){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var a in i)if(!(a in e))throw Error(Vt(108,YFe(n)||"Unknown",a));return Pa({},r,i)}function nN(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Fm,ry=Ys.current,Hi(Ys,n),Hi(Ql,Ql.current),!0}function Mte(n,e,r){var i=n.stateNode;if(!i)throw Error(Vt(169));r?(n=Dye(n,e,ry),i.__reactInternalMemoizedMergedChildContext=n,ra(Ql),ra(Ys),Hi(Ys,n)):ra(Ql),Hi(Ql,r)}var Wh=null,TI=!1,Qk=!1;function Lye(n){Wh===null?Wh=[n]:Wh.push(n)}function d$e(n){TI=!0,Lye(n)}function nv(){if(!Qk&&Wh!==null){Qk=!0;var n=0,e=Mi;try{var r=Wh;for(Mi=1;n<r.length;n++){var i=r[n];do i=i(!0);while(i!==null)}Wh=null,TI=!1}catch(a){throw Wh!==null&&(Wh=Wh.slice(n+1)),oye(QW,nv),a}finally{Mi=e,Qk=!1}}return null}var Ob=[],Ib=0,rN=null,iN=0,Tu=[],Au=0,iy=null,ap=1,op="";function Zv(n,e){Ob[Ib++]=iN,Ob[Ib++]=rN,rN=n,iN=e}function kye(n,e,r){Tu[Au++]=ap,Tu[Au++]=op,Tu[Au++]=iy,iy=n;var i=ap;n=op;var a=32-Vd(i)-1;i&=~(1<<a),r+=1;var o=32-Vd(e)+a;if(30<o){var s=a-a%5;o=(i&(1<<s)-1).toString(32),i>>=s,a-=s,ap=1<<32-Vd(e)+a|r<<a|i,op=o+n}else ap=1<<o|r<<a|i,op=n}function sq(n){n.return!==null&&(Zv(n,1),kye(n,1,0))}function lq(n){for(;n===rN;)rN=Ob[--Ib],Ob[Ib]=null,iN=Ob[--Ib],Ob[Ib]=null;for(;n===iy;)iy=Tu[--Au],Tu[Au]=null,op=Tu[--Au],Tu[Au]=null,ap=Tu[--Au],Tu[Au]=null}var Bc=null,Ic=null,ga=!1,Td=null;function Fye(n,e){var r=Du(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=n,e=n.deletions,e===null?(n.deletions=[r],n.flags|=16):e.push(r)}function Tte(n,e){switch(n.tag){case 5:var r=n.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Bc=n,Ic=mm(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Bc=n,Ic=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=iy!==null?{id:ap,overflow:op}:null,n.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Du(18,null,null,0),r.stateNode=e,r.return=n,n.child=r,Bc=n,Ic=null,!0):!1;default:return!1}}function DV(n){return(n.mode&1)!==0&&(n.flags&128)===0}function LV(n){if(ga){var e=Ic;if(e){var r=e;if(!Tte(n,e)){if(DV(n))throw Error(Vt(418));e=mm(r.nextSibling);var i=Bc;e&&Tte(n,e)?Fye(i,r):(n.flags=n.flags&-4097|2,ga=!1,Bc=n)}}else{if(DV(n))throw Error(Vt(418));n.flags=n.flags&-4097|2,ga=!1,Bc=n}}}function Ate(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Bc=n}function l3(n){if(n!==Bc)return!1;if(!ga)return Ate(n),ga=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!PV(n.type,n.memoizedProps)),e&&(e=Ic)){if(DV(n))throw $ye(),Error(Vt(418));for(;e;)Fye(n,e),e=mm(e.nextSibling)}if(Ate(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Vt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"){if(e===0){Ic=mm(n.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}n=n.nextSibling}Ic=null}}else Ic=Bc?mm(n.stateNode.nextSibling):null;return!0}function $ye(){for(var n=Ic;n;)n=mm(n.nextSibling)}function Tx(){Ic=Bc=null,ga=!1}function cq(n){Td===null?Td=[n]:Td.push(n)}var f$e=jp.ReactCurrentBatchConfig;function qw(n,e,r){if(n=r.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Vt(309));var i=r.stateNode}if(!i)throw Error(Vt(147,n));var a=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=a.refs;s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof n!="string")throw Error(Vt(284));if(!r._owner)throw Error(Vt(290,n))}return n}function c3(n,e){throw n=Object.prototype.toString.call(e),Error(Vt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Rte(n){var e=n._init;return e(n._payload)}function Bye(n){function e(y,b){if(n){var x=y.deletions;x===null?(y.deletions=[b],y.flags|=16):x.push(b)}}function r(y,b){if(!n)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function i(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function a(y,b){return y=xm(y,b),y.index=0,y.sibling=null,y}function o(y,b,x){return y.index=x,n?(x=y.alternate,x!==null?(x=x.index,x<b?(y.flags|=2,b):x):(y.flags|=2,b)):(y.flags|=1048576,b)}function s(y){return n&&y.alternate===null&&(y.flags|=2),y}function l(y,b,x,_){return b===null||b.tag!==6?(b=a5(x,y.mode,_),b.return=y,b):(b=a(b,x),b.return=y,b)}function c(y,b,x,_){var S=x.type;return S===Mb?d(y,b,x.props.children,_,x.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===$g&&Rte(S)===b.type)?(_=a(b,x.props),_.ref=qw(y,b,x),_.return=y,_):(_=eP(x.type,x.key,x.props,null,y.mode,_),_.ref=qw(y,b,x),_.return=y,_)}function u(y,b,x,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=o5(x,y.mode,_),b.return=y,b):(b=a(b,x.children||[]),b.return=y,b)}function d(y,b,x,_,S){return b===null||b.tag!==7?(b=F0(x,y.mode,_,S),b.return=y,b):(b=a(b,x),b.return=y,b)}function f(y,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return b=a5(""+b,y.mode,x),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case QT:return x=eP(b.type,b.key,b.props,null,y.mode,x),x.ref=qw(y,null,b),x.return=y,x;case Cb:return b=o5(b,y.mode,x),b.return=y,b;case $g:var _=b._init;return f(y,_(b._payload),x)}if(YS(b)||Vw(b))return b=F0(b,y.mode,x,null),b.return=y,b;c3(y,b)}return null}function h(y,b,x,_){var S=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:l(y,b,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case QT:return x.key===S?c(y,b,x,_):null;case Cb:return x.key===S?u(y,b,x,_):null;case $g:return S=x._init,h(y,b,S(x._payload),_)}if(YS(x)||Vw(x))return S!==null?null:d(y,b,x,_,null);c3(y,x)}return null}function p(y,b,x,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(x)||null,l(b,y,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case QT:return y=y.get(_.key===null?x:_.key)||null,c(b,y,_,S);case Cb:return y=y.get(_.key===null?x:_.key)||null,u(b,y,_,S);case $g:var M=_._init;return p(y,b,x,M(_._payload),S)}if(YS(_)||Vw(_))return y=y.get(x)||null,d(b,y,_,S,null);c3(b,_)}return null}function g(y,b,x,_){for(var S=null,M=null,E=b,T=b=0,P=null;E!==null&&T<x.length;T++){E.index>T?(P=E,E=null):P=E.sibling;var A=h(y,E,x[T],_);if(A===null){E===null&&(E=P);break}n&&E&&A.alternate===null&&e(y,E),b=o(A,b,T),M===null?S=A:M.sibling=A,M=A,E=P}if(T===x.length)return r(y,E),ga&&Zv(y,T),S;if(E===null){for(;T<x.length;T++)E=f(y,x[T],_),E!==null&&(b=o(E,b,T),M===null?S=E:M.sibling=E,M=E);return ga&&Zv(y,T),S}for(E=i(y,E);T<x.length;T++)P=p(E,y,T,x[T],_),P!==null&&(n&&P.alternate!==null&&E.delete(P.key===null?T:P.key),b=o(P,b,T),M===null?S=P:M.sibling=P,M=P);return n&&E.forEach(function(N){return e(y,N)}),ga&&Zv(y,T),S}function m(y,b,x,_){var S=Vw(x);if(typeof S!="function")throw Error(Vt(150));if(x=S.call(x),x==null)throw Error(Vt(151));for(var M=S=null,E=b,T=b=0,P=null,A=x.next();E!==null&&!A.done;T++,A=x.next()){E.index>T?(P=E,E=null):P=E.sibling;var N=h(y,E,A.value,_);if(N===null){E===null&&(E=P);break}n&&E&&N.alternate===null&&e(y,E),b=o(N,b,T),M===null?S=N:M.sibling=N,M=N,E=P}if(A.done)return r(y,E),ga&&Zv(y,T),S;if(E===null){for(;!A.done;T++,A=x.next())A=f(y,A.value,_),A!==null&&(b=o(A,b,T),M===null?S=A:M.sibling=A,M=A);return ga&&Zv(y,T),S}for(E=i(y,E);!A.done;T++,A=x.next())A=p(E,y,T,A.value,_),A!==null&&(n&&A.alternate!==null&&E.delete(A.key===null?T:A.key),b=o(A,b,T),M===null?S=A:M.sibling=A,M=A);return n&&E.forEach(function(O){return e(y,O)}),ga&&Zv(y,T),S}function v(y,b,x,_){if(typeof x=="object"&&x!==null&&x.type===Mb&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case QT:e:{for(var S=x.key,M=b;M!==null;){if(M.key===S){if(S=x.type,S===Mb){if(M.tag===7){r(y,M.sibling),b=a(M,x.props.children),b.return=y,y=b;break e}}else if(M.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===$g&&Rte(S)===M.type){r(y,M.sibling),b=a(M,x.props),b.ref=qw(y,M,x),b.return=y,y=b;break e}r(y,M);break}else e(y,M);M=M.sibling}x.type===Mb?(b=F0(x.props.children,y.mode,_,x.key),b.return=y,y=b):(_=eP(x.type,x.key,x.props,null,y.mode,_),_.ref=qw(y,b,x),_.return=y,y=_)}return s(y);case Cb:e:{for(M=x.key;b!==null;){if(b.key===M)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){r(y,b.sibling),b=a(b,x.children||[]),b.return=y,y=b;break e}else{r(y,b);break}else e(y,b);b=b.sibling}b=o5(x,y.mode,_),b.return=y,y=b}return s(y);case $g:return M=x._init,v(y,b,M(x._payload),_)}if(YS(x))return g(y,b,x,_);if(Vw(x))return m(y,b,x,_);c3(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,b!==null&&b.tag===6?(r(y,b.sibling),b=a(b,x),b.return=y,y=b):(r(y,b),b=a5(x,y.mode,_),b.return=y,y=b),s(y)):r(y,b)}return v}var Ax=Bye(!0),zye=Bye(!1),aN=tv(null),oN=null,Db=null,uq=null;function dq(){uq=Db=oN=null}function fq(n){var e=aN.current;ra(aN),n._currentValue=e}function kV(n,e,r){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===r)break;n=n.return}}function nx(n,e){oN=n,uq=Db=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Wl=!0),n.firstContext=null)}function Uu(n){var e=n._currentValue;if(uq!==n)if(n={context:n,memoizedValue:e,next:null},Db===null){if(oN===null)throw Error(Vt(308));Db=n,oN.dependencies={lanes:0,firstContext:n}}else Db=Db.next=n;return e}var S0=null;function hq(n){S0===null?S0=[n]:S0.push(n)}function Uye(n,e,r,i){var a=e.interleaved;return a===null?(r.next=r,hq(e)):(r.next=a.next,a.next=r),e.interleaved=r,Pp(n,i)}function Pp(n,e){n.lanes|=e;var r=n.alternate;for(r!==null&&(r.lanes|=e),r=n,n=n.return;n!==null;)n.childLanes|=e,r=n.alternate,r!==null&&(r.childLanes|=e),r=n,n=n.return;return r.tag===3?r.stateNode:null}var Bg=!1;function pq(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vye(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function yp(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function vm(n,e,r){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,ri&2){var a=i.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),i.pending=e,Pp(n,r)}return a=i.interleaved,a===null?(e.next=e,hq(i)):(e.next=a.next,a.next=e),i.interleaved=e,Pp(n,r)}function YR(n,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,JW(n,r)}}function Pte(n,e){var r=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var a=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?a=o=s:o=o.next=s,r=r.next}while(r!==null);o===null?a=o=e:o=o.next=e}else a=o=e;r={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=e:n.next=e,r.lastBaseUpdate=e}function sN(n,e,r,i){var a=n.updateQueue;Bg=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,s===null?o=u:s.next=u,s=c;var d=n.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==s&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(o!==null){var f=a.baseState;s=0,d=u=c=null,l=o;do{var h=l.lane,p=l.eventTime;if((i&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=n,m=l;switch(h=e,p=r,m.tag){case 1:if(g=m.payload,typeof g=="function"){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,h=typeof g=="function"?g.call(p,f,h):g,h==null)break e;f=Pa({},f,h);break e;case 2:Bg=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,s|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do s|=a.lane,a=a.next;while(a!==e)}else o===null&&(a.shared.lanes=0);oy|=s,n.lanes=s,n.memoizedState=f}}function Nte(n,e,r){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],a=i.callback;if(a!==null){if(i.callback=null,i=r,typeof a!="function")throw Error(Vt(191,a));a.call(i)}}}var rM={},Xf=tv(rM),EE=tv(rM),CE=tv(rM);function E0(n){if(n===rM)throw Error(Vt(174));return n}function gq(n,e){switch(Hi(CE,e),Hi(EE,n),Hi(Xf,rM),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mV(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=mV(e,n)}ra(Xf),Hi(Xf,e)}function Rx(){ra(Xf),ra(EE),ra(CE)}function Gye(n){E0(CE.current);var e=E0(Xf.current),r=mV(e,n.type);e!==r&&(Hi(EE,n),Hi(Xf,r))}function mq(n){EE.current===n&&(ra(Xf),ra(EE))}var Ea=tv(0);function lN(n){for(var e=n;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jk=[];function vq(){for(var n=0;n<Jk.length;n++)Jk[n]._workInProgressVersionPrimary=null;Jk.length=0}var XR=jp.ReactCurrentDispatcher,e5=jp.ReactCurrentBatchConfig,ay=0,Aa=null,To=null,Ko=null,cN=!1,N2=!1,ME=0,h$e=0;function Rs(){throw Error(Vt(321))}function yq(n,e){if(e===null)return!1;for(var r=0;r<e.length&&r<n.length;r++)if(!qd(n[r],e[r]))return!1;return!0}function bq(n,e,r,i,a,o){if(ay=o,Aa=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,XR.current=n===null||n.memoizedState===null?v$e:y$e,n=r(i,a),N2){o=0;do{if(N2=!1,ME=0,25<=o)throw Error(Vt(301));o+=1,Ko=To=null,e.updateQueue=null,XR.current=b$e,n=r(i,a)}while(N2)}if(XR.current=uN,e=To!==null&&To.next!==null,ay=0,Ko=To=Aa=null,cN=!1,e)throw Error(Vt(300));return n}function xq(){var n=ME!==0;return ME=0,n}function Mf(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ko===null?Aa.memoizedState=Ko=n:Ko=Ko.next=n,Ko}function Vu(){if(To===null){var n=Aa.alternate;n=n!==null?n.memoizedState:null}else n=To.next;var e=Ko===null?Aa.memoizedState:Ko.next;if(e!==null)Ko=e,To=n;else{if(n===null)throw Error(Vt(310));To=n,n={memoizedState:To.memoizedState,baseState:To.baseState,baseQueue:To.baseQueue,queue:To.queue,next:null},Ko===null?Aa.memoizedState=Ko=n:Ko=Ko.next=n}return Ko}function TE(n,e){return typeof e=="function"?e(n):e}function t5(n){var e=Vu(),r=e.queue;if(r===null)throw Error(Vt(311));r.lastRenderedReducer=n;var i=To,a=i.baseQueue,o=r.pending;if(o!==null){if(a!==null){var s=a.next;a.next=o.next,o.next=s}i.baseQueue=a=o,r.pending=null}if(a!==null){o=a.next,i=i.baseState;var l=s=null,c=null,u=o;do{var d=u.lane;if((ay&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,s=i):c=c.next=f,Aa.lanes|=d,oy|=d}u=u.next}while(u!==null&&u!==o);c===null?s=i:c.next=l,qd(i,e.memoizedState)||(Wl=!0),e.memoizedState=i,e.baseState=s,e.baseQueue=c,r.lastRenderedState=i}if(n=r.interleaved,n!==null){a=n;do o=a.lane,Aa.lanes|=o,oy|=o,a=a.next;while(a!==n)}else a===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function n5(n){var e=Vu(),r=e.queue;if(r===null)throw Error(Vt(311));r.lastRenderedReducer=n;var i=r.dispatch,a=r.pending,o=e.memoizedState;if(a!==null){r.pending=null;var s=a=a.next;do o=n(o,s.action),s=s.next;while(s!==a);qd(o,e.memoizedState)||(Wl=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,i]}function jye(){}function Hye(n,e){var r=Aa,i=Vu(),a=e(),o=!qd(i.memoizedState,a);if(o&&(i.memoizedState=a,Wl=!0),i=i.queue,_q(Yye.bind(null,r,i,n),[n]),i.getSnapshot!==e||o||Ko!==null&&Ko.memoizedState.tag&1){if(r.flags|=2048,AE(9,qye.bind(null,r,i,a,e),void 0,null),Jo===null)throw Error(Vt(349));ay&30||Wye(r,e,a)}return a}function Wye(n,e,r){n.flags|=16384,n={getSnapshot:e,value:r},e=Aa.updateQueue,e===null?(e={lastEffect:null,stores:null},Aa.updateQueue=e,e.stores=[n]):(r=e.stores,r===null?e.stores=[n]:r.push(n))}function qye(n,e,r,i){e.value=r,e.getSnapshot=i,Xye(e)&&Kye(n)}function Yye(n,e,r){return r(function(){Xye(e)&&Kye(n)})}function Xye(n){var e=n.getSnapshot;n=n.value;try{var r=e();return!qd(n,r)}catch{return!0}}function Kye(n){var e=Pp(n,1);e!==null&&Gd(e,n,1,-1)}function Ote(n){var e=Mf();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:TE,lastRenderedState:n},e.queue=n,n=n.dispatch=m$e.bind(null,Aa,n),[e.memoizedState,n]}function AE(n,e,r,i){return n={tag:n,create:e,destroy:r,deps:i,next:null},e=Aa.updateQueue,e===null?(e={lastEffect:null,stores:null},Aa.updateQueue=e,e.lastEffect=n.next=n):(r=e.lastEffect,r===null?e.lastEffect=n.next=n:(i=r.next,r.next=n,n.next=i,e.lastEffect=n)),n}function Zye(){return Vu().memoizedState}function KR(n,e,r,i){var a=Mf();Aa.flags|=n,a.memoizedState=AE(1|e,r,void 0,i===void 0?null:i)}function AI(n,e,r,i){var a=Vu();i=i===void 0?null:i;var o=void 0;if(To!==null){var s=To.memoizedState;if(o=s.destroy,i!==null&&yq(i,s.deps)){a.memoizedState=AE(e,r,o,i);return}}Aa.flags|=n,a.memoizedState=AE(1|e,r,o,i)}function Ite(n,e){return KR(8390656,8,n,e)}function _q(n,e){return AI(2048,8,n,e)}function Qye(n,e){return AI(4,2,n,e)}function Jye(n,e){return AI(4,4,n,e)}function e1e(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function t1e(n,e,r){return r=r!=null?r.concat([n]):null,AI(4,4,e1e.bind(null,e,n),r)}function wq(){}function n1e(n,e){var r=Vu();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&yq(e,i[1])?i[0]:(r.memoizedState=[n,e],n)}function r1e(n,e){var r=Vu();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&yq(e,i[1])?i[0]:(n=n(),r.memoizedState=[n,e],n)}function i1e(n,e,r){return ay&21?(qd(r,e)||(r=cye(),Aa.lanes|=r,oy|=r,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Wl=!0),n.memoizedState=r)}function p$e(n,e){var r=Mi;Mi=r!==0&&4>r?r:4,n(!0);var i=e5.transition;e5.transition={};try{n(!1),e()}finally{Mi=r,e5.transition=i}}function a1e(){return Vu().memoizedState}function g$e(n,e,r){var i=bm(n);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},o1e(n))s1e(e,r);else if(r=Uye(n,e,r,i),r!==null){var a=gl();Gd(r,n,i,a),l1e(r,e,i)}}function m$e(n,e,r){var i=bm(n),a={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(o1e(n))s1e(e,a);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,r);if(a.hasEagerState=!0,a.eagerState=l,qd(l,s)){var c=e.interleaved;c===null?(a.next=a,hq(e)):(a.next=c.next,c.next=a),e.interleaved=a;return}}catch{}finally{}r=Uye(n,e,a,i),r!==null&&(a=gl(),Gd(r,n,i,a),l1e(r,e,i))}}function o1e(n){var e=n.alternate;return n===Aa||e!==null&&e===Aa}function s1e(n,e){N2=cN=!0;var r=n.pending;r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e}function l1e(n,e,r){if(r&4194240){var i=e.lanes;i&=n.pendingLanes,r|=i,e.lanes=r,JW(n,r)}}var uN={readContext:Uu,useCallback:Rs,useContext:Rs,useEffect:Rs,useImperativeHandle:Rs,useInsertionEffect:Rs,useLayoutEffect:Rs,useMemo:Rs,useReducer:Rs,useRef:Rs,useState:Rs,useDebugValue:Rs,useDeferredValue:Rs,useTransition:Rs,useMutableSource:Rs,useSyncExternalStore:Rs,useId:Rs,unstable_isNewReconciler:!1},v$e={readContext:Uu,useCallback:function(n,e){return Mf().memoizedState=[n,e===void 0?null:e],n},useContext:Uu,useEffect:Ite,useImperativeHandle:function(n,e,r){return r=r!=null?r.concat([n]):null,KR(4194308,4,e1e.bind(null,e,n),r)},useLayoutEffect:function(n,e){return KR(4194308,4,n,e)},useInsertionEffect:function(n,e){return KR(4,2,n,e)},useMemo:function(n,e){var r=Mf();return e=e===void 0?null:e,n=n(),r.memoizedState=[n,e],n},useReducer:function(n,e,r){var i=Mf();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=g$e.bind(null,Aa,n),[i.memoizedState,n]},useRef:function(n){var e=Mf();return n={current:n},e.memoizedState=n},useState:Ote,useDebugValue:wq,useDeferredValue:function(n){return Mf().memoizedState=n},useTransition:function(){var n=Ote(!1),e=n[0];return n=p$e.bind(null,n[1]),Mf().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,r){var i=Aa,a=Mf();if(ga){if(r===void 0)throw Error(Vt(407));r=r()}else{if(r=e(),Jo===null)throw Error(Vt(349));ay&30||Wye(i,e,r)}a.memoizedState=r;var o={value:r,getSnapshot:e};return a.queue=o,Ite(Yye.bind(null,i,o,n),[n]),i.flags|=2048,AE(9,qye.bind(null,i,o,r,e),void 0,null),r},useId:function(){var n=Mf(),e=Jo.identifierPrefix;if(ga){var r=op,i=ap;r=(i&~(1<<32-Vd(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=ME++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=h$e++,e=":"+e+"r"+r.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},y$e={readContext:Uu,useCallback:n1e,useContext:Uu,useEffect:_q,useImperativeHandle:t1e,useInsertionEffect:Qye,useLayoutEffect:Jye,useMemo:r1e,useReducer:t5,useRef:Zye,useState:function(){return t5(TE)},useDebugValue:wq,useDeferredValue:function(n){var e=Vu();return i1e(e,To.memoizedState,n)},useTransition:function(){var n=t5(TE)[0],e=Vu().memoizedState;return[n,e]},useMutableSource:jye,useSyncExternalStore:Hye,useId:a1e,unstable_isNewReconciler:!1},b$e={readContext:Uu,useCallback:n1e,useContext:Uu,useEffect:_q,useImperativeHandle:t1e,useInsertionEffect:Qye,useLayoutEffect:Jye,useMemo:r1e,useReducer:n5,useRef:Zye,useState:function(){return n5(TE)},useDebugValue:wq,useDeferredValue:function(n){var e=Vu();return To===null?e.memoizedState=n:i1e(e,To.memoizedState,n)},useTransition:function(){var n=n5(TE)[0],e=Vu().memoizedState;return[n,e]},useMutableSource:jye,useSyncExternalStore:Hye,useId:a1e,unstable_isNewReconciler:!1};function _d(n,e){if(n&&n.defaultProps){e=Pa({},e),n=n.defaultProps;for(var r in n)e[r]===void 0&&(e[r]=n[r]);return e}return e}function FV(n,e,r,i){e=n.memoizedState,r=r(i,e),r=r==null?e:Pa({},e,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var RI={isMounted:function(n){return(n=n._reactInternals)?Ly(n)===n:!1},enqueueSetState:function(n,e,r){n=n._reactInternals;var i=gl(),a=bm(n),o=yp(i,a);o.payload=e,r!=null&&(o.callback=r),e=vm(n,o,a),e!==null&&(Gd(e,n,a,i),YR(e,n,a))},enqueueReplaceState:function(n,e,r){n=n._reactInternals;var i=gl(),a=bm(n),o=yp(i,a);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=vm(n,o,a),e!==null&&(Gd(e,n,a,i),YR(e,n,a))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var r=gl(),i=bm(n),a=yp(r,i);a.tag=2,e!=null&&(a.callback=e),e=vm(n,a,i),e!==null&&(Gd(e,n,i,r),YR(e,n,i))}};function Dte(n,e,r,i,a,o,s){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,s):e.prototype&&e.prototype.isPureReactComponent?!xE(r,i)||!xE(a,o):!0}function c1e(n,e,r){var i=!1,a=Fm,o=e.contextType;return typeof o=="object"&&o!==null?o=Uu(o):(a=Jl(e)?ry:Ys.current,i=e.contextTypes,o=(i=i!=null)?Mx(n,a):Fm),e=new e(r,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=RI,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=a,n.__reactInternalMemoizedMaskedChildContext=o),e}function Lte(n,e,r,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==n&&RI.enqueueReplaceState(e,e.state,null)}function $V(n,e,r,i){var a=n.stateNode;a.props=r,a.state=n.memoizedState,a.refs={},pq(n);var o=e.contextType;typeof o=="object"&&o!==null?a.context=Uu(o):(o=Jl(e)?ry:Ys.current,a.context=Mx(n,o)),a.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(FV(n,e,o,r),a.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&RI.enqueueReplaceState(a,a.state,null),sN(n,r,a,i),a.state=n.memoizedState),typeof a.componentDidMount=="function"&&(n.flags|=4194308)}function Px(n,e){try{var r="",i=e;do r+=qFe(i),i=i.return;while(i);var a=r}catch(o){a=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:a,digest:null}}function r5(n,e,r){return{value:n,source:null,stack:r??null,digest:e??null}}function BV(n,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var x$e=typeof WeakMap=="function"?WeakMap:Map;function u1e(n,e,r){r=yp(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){fN||(fN=!0,XV=i),BV(n,e)},r}function d1e(n,e,r){r=yp(-1,r),r.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var a=e.value;r.payload=function(){return i(a)},r.callback=function(){BV(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){BV(n,e),typeof i!="function"&&(ym===null?ym=new Set([this]):ym.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),r}function kte(n,e,r){var i=n.pingCache;if(i===null){i=n.pingCache=new x$e;var a=new Set;i.set(e,a)}else a=i.get(e),a===void 0&&(a=new Set,i.set(e,a));a.has(r)||(a.add(r),n=D$e.bind(null,n,e,r),e.then(n,n))}function Fte(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function $te(n,e,r,i,a){return n.mode&1?(n.flags|=65536,n.lanes=a,n):(n===e?n.flags|=65536:(n.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=yp(-1,1),e.tag=2,vm(r,e,1))),r.lanes|=1),n)}var _$e=jp.ReactCurrentOwner,Wl=!1;function ol(n,e,r,i){e.child=n===null?zye(e,null,r,i):Ax(e,n.child,r,i)}function Bte(n,e,r,i,a){r=r.render;var o=e.ref;return nx(e,a),i=bq(n,e,r,i,o,a),r=xq(),n!==null&&!Wl?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~a,Np(n,e,a)):(ga&&r&&sq(e),e.flags|=1,ol(n,e,i,a),e.child)}function zte(n,e,r,i,a){if(n===null){var o=r.type;return typeof o=="function"&&!Pq(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,f1e(n,e,o,i,a)):(n=eP(r.type,null,i,e,e.mode,a),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&a)){var s=o.memoizedProps;if(r=r.compare,r=r!==null?r:xE,r(s,i)&&n.ref===e.ref)return Np(n,e,a)}return e.flags|=1,n=xm(o,i),n.ref=e.ref,n.return=e,e.child=n}function f1e(n,e,r,i,a){if(n!==null){var o=n.memoizedProps;if(xE(o,i)&&n.ref===e.ref)if(Wl=!1,e.pendingProps=i=o,(n.lanes&a)!==0)n.flags&131072&&(Wl=!0);else return e.lanes=n.lanes,Np(n,e,a)}return zV(n,e,r,i,a)}function h1e(n,e,r){var i=e.pendingProps,a=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hi(kb,Cc),Cc|=r;else{if(!(r&1073741824))return n=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Hi(kb,Cc),Cc|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:r,Hi(kb,Cc),Cc|=i}else o!==null?(i=o.baseLanes|r,e.memoizedState=null):i=r,Hi(kb,Cc),Cc|=i;return ol(n,e,a,r),e.child}function p1e(n,e){var r=e.ref;(n===null&&r!==null||n!==null&&n.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function zV(n,e,r,i,a){var o=Jl(r)?ry:Ys.current;return o=Mx(e,o),nx(e,a),r=bq(n,e,r,i,o,a),i=xq(),n!==null&&!Wl?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~a,Np(n,e,a)):(ga&&i&&sq(e),e.flags|=1,ol(n,e,r,a),e.child)}function Ute(n,e,r,i,a){if(Jl(r)){var o=!0;nN(e)}else o=!1;if(nx(e,a),e.stateNode===null)ZR(n,e),c1e(e,r,i),$V(e,r,i,a),i=!0;else if(n===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var c=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=Uu(u):(u=Jl(r)?ry:Ys.current,u=Mx(e,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==i||c!==u)&&Lte(e,s,i,u),Bg=!1;var h=e.memoizedState;s.state=h,sN(e,i,s,a),c=e.memoizedState,l!==i||h!==c||Ql.current||Bg?(typeof d=="function"&&(FV(e,r,d,i),c=e.memoizedState),(l=Bg||Dte(e,r,l,i,h,c,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),s.props=i,s.state=c,s.context=u,i=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Vye(n,e),l=e.memoizedProps,u=e.type===e.elementType?l:_d(e.type,l),s.props=u,f=e.pendingProps,h=s.context,c=r.contextType,typeof c=="object"&&c!==null?c=Uu(c):(c=Jl(r)?ry:Ys.current,c=Mx(e,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==f||h!==c)&&Lte(e,s,i,c),Bg=!1,h=e.memoizedState,s.state=h,sN(e,i,s,a);var g=e.memoizedState;l!==f||h!==g||Ql.current||Bg?(typeof p=="function"&&(FV(e,r,p,i),g=e.memoizedState),(u=Bg||Dte(e,r,u,i,h,g,c)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,g,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,g,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),s.props=i,s.state=g,s.context=c,i=u):(typeof s.componentDidUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),i=!1)}return UV(n,e,r,i,o,a)}function UV(n,e,r,i,a,o){p1e(n,e);var s=(e.flags&128)!==0;if(!i&&!s)return a&&Mte(e,r,!1),Np(n,e,o);i=e.stateNode,_$e.current=e;var l=s&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&s?(e.child=Ax(e,n.child,null,o),e.child=Ax(e,null,l,o)):ol(n,e,l,o),e.memoizedState=i.state,a&&Mte(e,r,!0),e.child}function g1e(n){var e=n.stateNode;e.pendingContext?Cte(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Cte(n,e.context,!1),gq(n,e.containerInfo)}function Vte(n,e,r,i,a){return Tx(),cq(a),e.flags|=256,ol(n,e,r,i),e.child}var VV={dehydrated:null,treeContext:null,retryLane:0};function GV(n){return{baseLanes:n,cachePool:null,transitions:null}}function m1e(n,e,r){var i=e.pendingProps,a=Ea.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=n!==null&&n.memoizedState===null?!1:(a&2)!==0),l?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(a|=1),Hi(Ea,a&1),n===null)return LV(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=i.children,n=i.fallback,o?(i=e.mode,o=e.child,s={mode:"hidden",children:s},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=OI(s,i,0,null),n=F0(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=GV(r),e.memoizedState=VV,n):Sq(e,s));if(a=n.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return w$e(n,e,s,i,l,a,r);if(o){o=i.fallback,s=e.mode,a=n.child,l=a.sibling;var c={mode:"hidden",children:i.children};return!(s&1)&&e.child!==a?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=xm(a,c),i.subtreeFlags=a.subtreeFlags&14680064),l!==null?o=xm(l,o):(o=F0(o,s,r,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,s=n.child.memoizedState,s=s===null?GV(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=n.childLanes&~r,e.memoizedState=VV,i}return o=n.child,n=o.sibling,i=xm(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,n!==null&&(r=e.deletions,r===null?(e.deletions=[n],e.flags|=16):r.push(n)),e.child=i,e.memoizedState=null,i}function Sq(n,e){return e=OI({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function u3(n,e,r,i){return i!==null&&cq(i),Ax(e,n.child,null,r),n=Sq(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function w$e(n,e,r,i,a,o,s){if(r)return e.flags&256?(e.flags&=-257,i=r5(Error(Vt(422))),u3(n,e,s,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,a=e.mode,i=OI({mode:"visible",children:i.children},a,0,null),o=F0(o,a,s,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Ax(e,n.child,null,s),e.child.memoizedState=GV(s),e.memoizedState=VV,o);if(!(e.mode&1))return u3(n,e,s,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var l=i.dgst;return i=l,o=Error(Vt(419)),i=r5(o,i,void 0),u3(n,e,s,i)}if(l=(s&n.childLanes)!==0,Wl||l){if(i=Jo,i!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|s)?0:a,a!==0&&a!==o.retryLane&&(o.retryLane=a,Pp(n,a),Gd(i,n,a,-1))}return Rq(),i=r5(Error(Vt(421))),u3(n,e,s,i)}return a.data==="$?"?(e.flags|=128,e.child=n.child,e=L$e.bind(null,n),a._reactRetry=e,null):(n=o.treeContext,Ic=mm(a.nextSibling),Bc=e,ga=!0,Td=null,n!==null&&(Tu[Au++]=ap,Tu[Au++]=op,Tu[Au++]=iy,ap=n.id,op=n.overflow,iy=e),e=Sq(e,i.children),e.flags|=4096,e)}function Gte(n,e,r){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),kV(n.return,e,r)}function i5(n,e,r,i,a){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:a}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=r,o.tailMode=a)}function v1e(n,e,r){var i=e.pendingProps,a=i.revealOrder,o=i.tail;if(ol(n,e,i.children,r),i=Ea.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Gte(n,r,e);else if(n.tag===19)Gte(n,r,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Hi(Ea,i),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(r=e.child,a=null;r!==null;)n=r.alternate,n!==null&&lN(n)===null&&(a=r),r=r.sibling;r=a,r===null?(a=e.child,e.child=null):(a=r.sibling,r.sibling=null),i5(e,!1,a,r,o);break;case"backwards":for(r=null,a=e.child,e.child=null;a!==null;){if(n=a.alternate,n!==null&&lN(n)===null){e.child=a;break}n=a.sibling,a.sibling=r,r=a,a=n}i5(e,!0,r,null,o);break;case"together":i5(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ZR(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Np(n,e,r){if(n!==null&&(e.dependencies=n.dependencies),oy|=e.lanes,!(r&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Vt(153));if(e.child!==null){for(n=e.child,r=xm(n,n.pendingProps),e.child=r,r.return=e;n.sibling!==null;)n=n.sibling,r=r.sibling=xm(n,n.pendingProps),r.return=e;r.sibling=null}return e.child}function S$e(n,e,r){switch(e.tag){case 3:g1e(e),Tx();break;case 5:Gye(e);break;case 1:Jl(e.type)&&nN(e);break;case 4:gq(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,a=e.memoizedProps.value;Hi(aN,i._currentValue),i._currentValue=a;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Hi(Ea,Ea.current&1),e.flags|=128,null):r&e.child.childLanes?m1e(n,e,r):(Hi(Ea,Ea.current&1),n=Np(n,e,r),n!==null?n.sibling:null);Hi(Ea,Ea.current&1);break;case 19:if(i=(r&e.childLanes)!==0,n.flags&128){if(i)return v1e(n,e,r);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Hi(Ea,Ea.current),i)break;return null;case 22:case 23:return e.lanes=0,h1e(n,e,r)}return Np(n,e,r)}var y1e,jV,b1e,x1e;y1e=function(n,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)n.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};jV=function(){};b1e=function(n,e,r,i){var a=n.memoizedProps;if(a!==i){n=e.stateNode,E0(Xf.current);var o=null;switch(r){case"input":a=fV(n,a),i=fV(n,i),o=[];break;case"select":a=Pa({},a,{value:void 0}),i=Pa({},i,{value:void 0}),o=[];break;case"textarea":a=gV(n,a),i=gV(n,i),o=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=eN)}vV(r,i);var s;r=null;for(u in a)if(!i.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(hE.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var c=i[u];if(l=a!=null?a[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(o||(o=[]),o.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(hE.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ki("scroll",n),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};x1e=function(n,e,r,i){r!==i&&(e.flags|=4)};function Yw(n,e){if(!ga)switch(n.tailMode){case"hidden":e=n.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Ps(n){var e=n.alternate!==null&&n.alternate.child===n.child,r=0,i=0;if(e)for(var a=n.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=n,a=a.sibling;else for(a=n.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=n,a=a.sibling;return n.subtreeFlags|=i,n.childLanes=r,e}function E$e(n,e,r){var i=e.pendingProps;switch(lq(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ps(e),null;case 1:return Jl(e.type)&&tN(),Ps(e),null;case 3:return i=e.stateNode,Rx(),ra(Ql),ra(Ys),vq(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(l3(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Td!==null&&(QV(Td),Td=null))),jV(n,e),Ps(e),null;case 5:mq(e);var a=E0(CE.current);if(r=e.type,n!==null&&e.stateNode!=null)b1e(n,e,r,i,a),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Vt(166));return Ps(e),null}if(n=E0(Xf.current),l3(e)){i=e.stateNode,r=e.type;var o=e.memoizedProps;switch(i[If]=e,i[SE]=o,n=(e.mode&1)!==0,r){case"dialog":Ki("cancel",i),Ki("close",i);break;case"iframe":case"object":case"embed":Ki("load",i);break;case"video":case"audio":for(a=0;a<KS.length;a++)Ki(KS[a],i);break;case"source":Ki("error",i);break;case"img":case"image":case"link":Ki("error",i),Ki("load",i);break;case"details":Ki("toggle",i);break;case"input":Qee(i,o),Ki("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ki("invalid",i);break;case"textarea":ete(i,o),Ki("invalid",i)}vV(r,o),a=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?i.textContent!==l&&(o.suppressHydrationWarning!==!0&&s3(i.textContent,l,n),a=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&s3(i.textContent,l,n),a=["children",""+l]):hE.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Ki("scroll",i)}switch(r){case"input":JT(i),Jee(i,o,!0);break;case"textarea":JT(i),tte(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=eN)}i=a,e.updateQueue=i,i!==null&&(e.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Y0e(r)),n==="http://www.w3.org/1999/xhtml"?r==="script"?(n=s.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=s.createElement(r,{is:i.is}):(n=s.createElement(r),r==="select"&&(s=n,i.multiple?s.multiple=!0:i.size&&(s.size=i.size))):n=s.createElementNS(n,r),n[If]=e,n[SE]=i,y1e(n,e,!1,!1),e.stateNode=n;e:{switch(s=yV(r,i),r){case"dialog":Ki("cancel",n),Ki("close",n),a=i;break;case"iframe":case"object":case"embed":Ki("load",n),a=i;break;case"video":case"audio":for(a=0;a<KS.length;a++)Ki(KS[a],n);a=i;break;case"source":Ki("error",n),a=i;break;case"img":case"image":case"link":Ki("error",n),Ki("load",n),a=i;break;case"details":Ki("toggle",n),a=i;break;case"input":Qee(n,i),a=fV(n,i),Ki("invalid",n);break;case"option":a=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},a=Pa({},i,{value:void 0}),Ki("invalid",n);break;case"textarea":ete(n,i),a=gV(n,i),Ki("invalid",n);break;default:a=i}vV(r,a),l=a;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?Z0e(n,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&X0e(n,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&pE(n,c):typeof c=="number"&&pE(n,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(hE.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ki("scroll",n):c!=null&&qW(n,o,c,s))}switch(r){case"input":JT(n),Jee(n,i,!1);break;case"textarea":JT(n),tte(n);break;case"option":i.value!=null&&n.setAttribute("value",""+km(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?Qb(n,!!i.multiple,o,!1):i.defaultValue!=null&&Qb(n,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(n.onclick=eN)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ps(e),null;case 6:if(n&&e.stateNode!=null)x1e(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Vt(166));if(r=E0(CE.current),E0(Xf.current),l3(e)){if(i=e.stateNode,r=e.memoizedProps,i[If]=e,(o=i.nodeValue!==r)&&(n=Bc,n!==null))switch(n.tag){case 3:s3(i.nodeValue,r,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&s3(i.nodeValue,r,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[If]=e,e.stateNode=i}return Ps(e),null;case 13:if(ra(Ea),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ga&&Ic!==null&&e.mode&1&&!(e.flags&128))$ye(),Tx(),e.flags|=98560,o=!1;else if(o=l3(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error(Vt(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Vt(317));o[If]=e}else Tx(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ps(e),o=!1}else Td!==null&&(QV(Td),Td=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Ea.current&1?Oo===0&&(Oo=3):Rq())),e.updateQueue!==null&&(e.flags|=4),Ps(e),null);case 4:return Rx(),jV(n,e),n===null&&_E(e.stateNode.containerInfo),Ps(e),null;case 10:return fq(e.type._context),Ps(e),null;case 17:return Jl(e.type)&&tN(),Ps(e),null;case 19:if(ra(Ea),o=e.memoizedState,o===null)return Ps(e),null;if(i=(e.flags&128)!==0,s=o.rendering,s===null)if(i)Yw(o,!1);else{if(Oo!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(s=lN(n),s!==null){for(e.flags|=128,Yw(o,!1),i=s.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)o=r,n=i,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,n=s.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),r=r.sibling;return Hi(Ea,Ea.current&1|2),e.child}n=n.sibling}o.tail!==null&&Ya()>Nx&&(e.flags|=128,i=!0,Yw(o,!1),e.lanes=4194304)}else{if(!i)if(n=lN(s),n!==null){if(e.flags|=128,i=!0,r=n.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Yw(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!ga)return Ps(e),null}else 2*Ya()-o.renderingStartTime>Nx&&r!==1073741824&&(e.flags|=128,i=!0,Yw(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(r=o.last,r!==null?r.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ya(),e.sibling=null,r=Ea.current,Hi(Ea,i?r&1|2:r&1),e):(Ps(e),null);case 22:case 23:return Aq(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Cc&1073741824&&(Ps(e),e.subtreeFlags&6&&(e.flags|=8192)):Ps(e),null;case 24:return null;case 25:return null}throw Error(Vt(156,e.tag))}function C$e(n,e){switch(lq(e),e.tag){case 1:return Jl(e.type)&&tN(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Rx(),ra(Ql),ra(Ys),vq(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return mq(e),null;case 13:if(ra(Ea),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Vt(340));Tx()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ra(Ea),null;case 4:return Rx(),null;case 10:return fq(e.type._context),null;case 22:case 23:return Aq(),null;case 24:return null;default:return null}}var d3=!1,Bs=!1,M$e=typeof WeakSet=="function"?WeakSet:Set,mn=null;function Lb(n,e){var r=n.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){La(n,e,i)}else r.current=null}function HV(n,e,r){try{r()}catch(i){La(n,e,i)}}var jte=!1;function T$e(n,e){if(AV=ZP,n=Cye(),oq(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var a=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var s=0,l=-1,c=-1,u=0,d=0,f=n,h=null;t:for(;;){for(var p;f!==r||a!==0&&f.nodeType!==3||(l=s+a),f!==o||i!==0&&f.nodeType!==3||(c=s+i),f.nodeType===3&&(s+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===n)break t;if(h===r&&++u===a&&(l=s),h===o&&++d===i&&(c=s),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(RV={focusedElem:n,selectionRange:r},ZP=!1,mn=e;mn!==null;)if(e=mn,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,mn=n;else for(;mn!==null;){e=mn;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,v=g.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:_d(e.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Vt(163))}}catch(_){La(e,e.return,_)}if(n=e.sibling,n!==null){n.return=e.return,mn=n;break}mn=e.return}return g=jte,jte=!1,g}function O2(n,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var o=a.destroy;a.destroy=void 0,o!==void 0&&HV(e,r,o)}a=a.next}while(a!==i)}}function PI(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&n)===n){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function WV(n){var e=n.ref;if(e!==null){var r=n.stateNode;switch(n.tag){case 5:n=r;break;default:n=r}typeof e=="function"?e(n):e.current=n}}function _1e(n){var e=n.alternate;e!==null&&(n.alternate=null,_1e(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[If],delete e[SE],delete e[OV],delete e[c$e],delete e[u$e])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function w1e(n){return n.tag===5||n.tag===3||n.tag===4}function Hte(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||w1e(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function qV(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(n,e):r.insertBefore(n,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(n,r)):(e=r,e.appendChild(n)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=eN));else if(i!==4&&(n=n.child,n!==null))for(qV(n,e,r),n=n.sibling;n!==null;)qV(n,e,r),n=n.sibling}function YV(n,e,r){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?r.insertBefore(n,e):r.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(YV(n,e,r),n=n.sibling;n!==null;)YV(n,e,r),n=n.sibling}var us=null,wd=!1;function fg(n,e,r){for(r=r.child;r!==null;)S1e(n,e,r),r=r.sibling}function S1e(n,e,r){if(Yf&&typeof Yf.onCommitFiberUnmount=="function")try{Yf.onCommitFiberUnmount(wI,r)}catch{}switch(r.tag){case 5:Bs||Lb(r,e);case 6:var i=us,a=wd;us=null,fg(n,e,r),us=i,wd=a,us!==null&&(wd?(n=us,r=r.stateNode,n.nodeType===8?n.parentNode.removeChild(r):n.removeChild(r)):us.removeChild(r.stateNode));break;case 18:us!==null&&(wd?(n=us,r=r.stateNode,n.nodeType===8?Zk(n.parentNode,r):n.nodeType===1&&Zk(n,r),yE(n)):Zk(us,r.stateNode));break;case 4:i=us,a=wd,us=r.stateNode.containerInfo,wd=!0,fg(n,e,r),us=i,wd=a;break;case 0:case 11:case 14:case 15:if(!Bs&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var o=a,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&HV(r,e,s),a=a.next}while(a!==i)}fg(n,e,r);break;case 1:if(!Bs&&(Lb(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){La(r,e,l)}fg(n,e,r);break;case 21:fg(n,e,r);break;case 22:r.mode&1?(Bs=(i=Bs)||r.memoizedState!==null,fg(n,e,r),Bs=i):fg(n,e,r);break;default:fg(n,e,r)}}function Wte(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var r=n.stateNode;r===null&&(r=n.stateNode=new M$e),e.forEach(function(i){var a=k$e.bind(null,n,i);r.has(i)||(r.add(i),i.then(a,a))})}}function dd(n,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var a=r[i];try{var o=n,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:us=l.stateNode,wd=!1;break e;case 3:us=l.stateNode.containerInfo,wd=!0;break e;case 4:us=l.stateNode.containerInfo,wd=!0;break e}l=l.return}if(us===null)throw Error(Vt(160));S1e(o,s,a),us=null,wd=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){La(a,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)E1e(e,n),e=e.sibling}function E1e(n,e){var r=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(dd(e,n),yf(n),i&4){try{O2(3,n,n.return),PI(3,n)}catch(m){La(n,n.return,m)}try{O2(5,n,n.return)}catch(m){La(n,n.return,m)}}break;case 1:dd(e,n),yf(n),i&512&&r!==null&&Lb(r,r.return);break;case 5:if(dd(e,n),yf(n),i&512&&r!==null&&Lb(r,r.return),n.flags&32){var a=n.stateNode;try{pE(a,"")}catch(m){La(n,n.return,m)}}if(i&4&&(a=n.stateNode,a!=null)){var o=n.memoizedProps,s=r!==null?r.memoizedProps:o,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&W0e(a,o),yV(l,s);var u=yV(l,o);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];d==="style"?Z0e(a,f):d==="dangerouslySetInnerHTML"?X0e(a,f):d==="children"?pE(a,f):qW(a,d,f,u)}switch(l){case"input":hV(a,o);break;case"textarea":q0e(a,o);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?Qb(a,!!o.multiple,p,!1):h!==!!o.multiple&&(o.defaultValue!=null?Qb(a,!!o.multiple,o.defaultValue,!0):Qb(a,!!o.multiple,o.multiple?[]:"",!1))}a[SE]=o}catch(m){La(n,n.return,m)}}break;case 6:if(dd(e,n),yf(n),i&4){if(n.stateNode===null)throw Error(Vt(162));a=n.stateNode,o=n.memoizedProps;try{a.nodeValue=o}catch(m){La(n,n.return,m)}}break;case 3:if(dd(e,n),yf(n),i&4&&r!==null&&r.memoizedState.isDehydrated)try{yE(e.containerInfo)}catch(m){La(n,n.return,m)}break;case 4:dd(e,n),yf(n);break;case 13:dd(e,n),yf(n),a=n.child,a.flags&8192&&(o=a.memoizedState!==null,a.stateNode.isHidden=o,!o||a.alternate!==null&&a.alternate.memoizedState!==null||(Mq=Ya())),i&4&&Wte(n);break;case 22:if(d=r!==null&&r.memoizedState!==null,n.mode&1?(Bs=(u=Bs)||d,dd(e,n),Bs=u):dd(e,n),yf(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(mn=n,d=n.child;d!==null;){for(f=mn=d;mn!==null;){switch(h=mn,p=h.child,h.tag){case 0:case 11:case 14:case 15:O2(4,h,h.return);break;case 1:Lb(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){i=h,r=h.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){La(i,r,m)}}break;case 5:Lb(h,h.return);break;case 22:if(h.memoizedState!==null){Yte(f);continue}}p!==null?(p.return=h,mn=p):Yte(f)}d=d.sibling}e:for(d=null,f=n;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(o=a.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,c=f.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=K0e("display",s))}catch(m){La(n,n.return,m)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(m){La(n,n.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:dd(e,n),yf(n),i&4&&Wte(n);break;case 21:break;default:dd(e,n),yf(n)}}function yf(n){var e=n.flags;if(e&2){try{e:{for(var r=n.return;r!==null;){if(w1e(r)){var i=r;break e}r=r.return}throw Error(Vt(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(pE(a,""),i.flags&=-33);var o=Hte(n);YV(n,o,a);break;case 3:case 4:var s=i.stateNode.containerInfo,l=Hte(n);qV(n,l,s);break;default:throw Error(Vt(161))}}catch(c){La(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function A$e(n,e,r){mn=n,C1e(n)}function C1e(n,e,r){for(var i=(n.mode&1)!==0;mn!==null;){var a=mn,o=a.child;if(a.tag===22&&i){var s=a.memoizedState!==null||d3;if(!s){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Bs;l=d3;var u=Bs;if(d3=s,(Bs=c)&&!u)for(mn=a;mn!==null;)s=mn,c=s.child,s.tag===22&&s.memoizedState!==null?Xte(a):c!==null?(c.return=s,mn=c):Xte(a);for(;o!==null;)mn=o,C1e(o),o=o.sibling;mn=a,d3=l,Bs=u}qte(n)}else a.subtreeFlags&8772&&o!==null?(o.return=a,mn=o):qte(n)}}function qte(n){for(;mn!==null;){var e=mn;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bs||PI(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Bs)if(r===null)i.componentDidMount();else{var a=e.elementType===e.type?r.memoizedProps:_d(e.type,r.memoizedProps);i.componentDidUpdate(a,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Nte(e,o,i);break;case 3:var s=e.updateQueue;if(s!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}Nte(e,s,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&yE(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Vt(163))}Bs||e.flags&512&&WV(e)}catch(h){La(e,e.return,h)}}if(e===n){mn=null;break}if(r=e.sibling,r!==null){r.return=e.return,mn=r;break}mn=e.return}}function Yte(n){for(;mn!==null;){var e=mn;if(e===n){mn=null;break}var r=e.sibling;if(r!==null){r.return=e.return,mn=r;break}mn=e.return}}function Xte(n){for(;mn!==null;){var e=mn;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{PI(4,e)}catch(c){La(e,r,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var a=e.return;try{i.componentDidMount()}catch(c){La(e,a,c)}}var o=e.return;try{WV(e)}catch(c){La(e,o,c)}break;case 5:var s=e.return;try{WV(e)}catch(c){La(e,s,c)}}}catch(c){La(e,e.return,c)}if(e===n){mn=null;break}var l=e.sibling;if(l!==null){l.return=e.return,mn=l;break}mn=e.return}}var R$e=Math.ceil,dN=jp.ReactCurrentDispatcher,Eq=jp.ReactCurrentOwner,Fu=jp.ReactCurrentBatchConfig,ri=0,Jo=null,uo=null,ys=0,Cc=0,kb=tv(0),Oo=0,RE=null,oy=0,NI=0,Cq=0,I2=null,Ul=null,Mq=0,Nx=1/0,Gh=null,fN=!1,XV=null,ym=null,f3=!1,Zg=null,hN=0,D2=0,KV=null,QR=-1,JR=0;function gl(){return ri&6?Ya():QR!==-1?QR:QR=Ya()}function bm(n){return n.mode&1?ri&2&&ys!==0?ys&-ys:f$e.transition!==null?(JR===0&&(JR=cye()),JR):(n=Mi,n!==0||(n=window.event,n=n===void 0?16:mye(n.type)),n):1}function Gd(n,e,r,i){if(50<D2)throw D2=0,KV=null,Error(Vt(185));eM(n,r,i),(!(ri&2)||n!==Jo)&&(n===Jo&&(!(ri&2)&&(NI|=r),Oo===4&&Gg(n,ys)),ec(n,i),r===1&&ri===0&&!(e.mode&1)&&(Nx=Ya()+500,TI&&nv()))}function ec(n,e){var r=n.callbackNode;f8e(n,e);var i=KP(n,n===Jo?ys:0);if(i===0)r!==null&&ite(r),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(r!=null&&ite(r),e===1)n.tag===0?d$e(Kte.bind(null,n)):Lye(Kte.bind(null,n)),s$e(function(){!(ri&6)&&nv()}),r=null;else{switch(uye(i)){case 1:r=QW;break;case 4:r=sye;break;case 16:r=XP;break;case 536870912:r=lye;break;default:r=XP}r=I1e(r,M1e.bind(null,n))}n.callbackPriority=e,n.callbackNode=r}}function M1e(n,e){if(QR=-1,JR=0,ri&6)throw Error(Vt(327));var r=n.callbackNode;if(rx()&&n.callbackNode!==r)return null;var i=KP(n,n===Jo?ys:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=pN(n,i);else{e=i;var a=ri;ri|=2;var o=A1e();(Jo!==n||ys!==e)&&(Gh=null,Nx=Ya()+500,k0(n,e));do try{O$e();break}catch(l){T1e(n,l)}while(!0);dq(),dN.current=o,ri=a,uo!==null?e=0:(Jo=null,ys=0,e=Oo)}if(e!==0){if(e===2&&(a=SV(n),a!==0&&(i=a,e=ZV(n,a))),e===1)throw r=RE,k0(n,0),Gg(n,i),ec(n,Ya()),r;if(e===6)Gg(n,i);else{if(a=n.current.alternate,!(i&30)&&!P$e(a)&&(e=pN(n,i),e===2&&(o=SV(n),o!==0&&(i=o,e=ZV(n,o))),e===1))throw r=RE,k0(n,0),Gg(n,i),ec(n,Ya()),r;switch(n.finishedWork=a,n.finishedLanes=i,e){case 0:case 1:throw Error(Vt(345));case 2:Qv(n,Ul,Gh);break;case 3:if(Gg(n,i),(i&130023424)===i&&(e=Mq+500-Ya(),10<e)){if(KP(n,0)!==0)break;if(a=n.suspendedLanes,(a&i)!==i){gl(),n.pingedLanes|=n.suspendedLanes&a;break}n.timeoutHandle=NV(Qv.bind(null,n,Ul,Gh),e);break}Qv(n,Ul,Gh);break;case 4:if(Gg(n,i),(i&4194240)===i)break;for(e=n.eventTimes,a=-1;0<i;){var s=31-Vd(i);o=1<<s,s=e[s],s>a&&(a=s),i&=~o}if(i=a,i=Ya()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*R$e(i/1960))-i,10<i){n.timeoutHandle=NV(Qv.bind(null,n,Ul,Gh),i);break}Qv(n,Ul,Gh);break;case 5:Qv(n,Ul,Gh);break;default:throw Error(Vt(329))}}}return ec(n,Ya()),n.callbackNode===r?M1e.bind(null,n):null}function ZV(n,e){var r=I2;return n.current.memoizedState.isDehydrated&&(k0(n,e).flags|=256),n=pN(n,e),n!==2&&(e=Ul,Ul=r,e!==null&&QV(e)),n}function QV(n){Ul===null?Ul=n:Ul.push.apply(Ul,n)}function P$e(n){for(var e=n;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var a=r[i],o=a.getSnapshot;a=a.value;try{if(!qd(o(),a))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gg(n,e){for(e&=~Cq,e&=~NI,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var r=31-Vd(e),i=1<<r;n[r]=-1,e&=~i}}function Kte(n){if(ri&6)throw Error(Vt(327));rx();var e=KP(n,0);if(!(e&1))return ec(n,Ya()),null;var r=pN(n,e);if(n.tag!==0&&r===2){var i=SV(n);i!==0&&(e=i,r=ZV(n,i))}if(r===1)throw r=RE,k0(n,0),Gg(n,e),ec(n,Ya()),r;if(r===6)throw Error(Vt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Qv(n,Ul,Gh),ec(n,Ya()),null}function Tq(n,e){var r=ri;ri|=1;try{return n(e)}finally{ri=r,ri===0&&(Nx=Ya()+500,TI&&nv())}}function sy(n){Zg!==null&&Zg.tag===0&&!(ri&6)&&rx();var e=ri;ri|=1;var r=Fu.transition,i=Mi;try{if(Fu.transition=null,Mi=1,n)return n()}finally{Mi=i,Fu.transition=r,ri=e,!(ri&6)&&nv()}}function Aq(){Cc=kb.current,ra(kb)}function k0(n,e){n.finishedWork=null,n.finishedLanes=0;var r=n.timeoutHandle;if(r!==-1&&(n.timeoutHandle=-1,o$e(r)),uo!==null)for(r=uo.return;r!==null;){var i=r;switch(lq(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&tN();break;case 3:Rx(),ra(Ql),ra(Ys),vq();break;case 5:mq(i);break;case 4:Rx();break;case 13:ra(Ea);break;case 19:ra(Ea);break;case 10:fq(i.type._context);break;case 22:case 23:Aq()}r=r.return}if(Jo=n,uo=n=xm(n.current,null),ys=Cc=e,Oo=0,RE=null,Cq=NI=oy=0,Ul=I2=null,S0!==null){for(e=0;e<S0.length;e++)if(r=S0[e],i=r.interleaved,i!==null){r.interleaved=null;var a=i.next,o=r.pending;if(o!==null){var s=o.next;o.next=a,i.next=s}r.pending=i}S0=null}return n}function T1e(n,e){do{var r=uo;try{if(dq(),XR.current=uN,cN){for(var i=Aa.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}cN=!1}if(ay=0,Ko=To=Aa=null,N2=!1,ME=0,Eq.current=null,r===null||r.return===null){Oo=1,RE=e,uo=null;break}e:{var o=n,s=r.return,l=r,c=e;if(e=ys,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Fte(s);if(p!==null){p.flags&=-257,$te(p,s,l,o,e),p.mode&1&&kte(o,u,e),e=p,c=u;var g=e.updateQueue;if(g===null){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break e}else{if(!(e&1)){kte(o,u,e),Rq();break e}c=Error(Vt(426))}}else if(ga&&l.mode&1){var v=Fte(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),$te(v,s,l,o,e),cq(Px(c,l));break e}}o=c=Px(c,l),Oo!==4&&(Oo=2),I2===null?I2=[o]:I2.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=u1e(o,c,e);Pte(o,y);break e;case 1:l=c;var b=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ym===null||!ym.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var _=d1e(o,l,e);Pte(o,_);break e}}o=o.return}while(o!==null)}P1e(r)}catch(S){e=S,uo===r&&r!==null&&(uo=r=r.return);continue}break}while(!0)}function A1e(){var n=dN.current;return dN.current=uN,n===null?uN:n}function Rq(){(Oo===0||Oo===3||Oo===2)&&(Oo=4),Jo===null||!(oy&268435455)&&!(NI&268435455)||Gg(Jo,ys)}function pN(n,e){var r=ri;ri|=2;var i=A1e();(Jo!==n||ys!==e)&&(Gh=null,k0(n,e));do try{N$e();break}catch(a){T1e(n,a)}while(!0);if(dq(),ri=r,dN.current=i,uo!==null)throw Error(Vt(261));return Jo=null,ys=0,Oo}function N$e(){for(;uo!==null;)R1e(uo)}function O$e(){for(;uo!==null&&!r8e();)R1e(uo)}function R1e(n){var e=O1e(n.alternate,n,Cc);n.memoizedProps=n.pendingProps,e===null?P1e(n):uo=e,Eq.current=null}function P1e(n){var e=n;do{var r=e.alternate;if(n=e.return,e.flags&32768){if(r=C$e(r,e),r!==null){r.flags&=32767,uo=r;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Oo=6,uo=null;return}}else if(r=E$e(r,e,Cc),r!==null){uo=r;return}if(e=e.sibling,e!==null){uo=e;return}uo=e=n}while(e!==null);Oo===0&&(Oo=5)}function Qv(n,e,r){var i=Mi,a=Fu.transition;try{Fu.transition=null,Mi=1,I$e(n,e,r,i)}finally{Fu.transition=a,Mi=i}return null}function I$e(n,e,r,i){do rx();while(Zg!==null);if(ri&6)throw Error(Vt(327));r=n.finishedWork;var a=n.finishedLanes;if(r===null)return null;if(n.finishedWork=null,n.finishedLanes=0,r===n.current)throw Error(Vt(177));n.callbackNode=null,n.callbackPriority=0;var o=r.lanes|r.childLanes;if(h8e(n,o),n===Jo&&(uo=Jo=null,ys=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||f3||(f3=!0,I1e(XP,function(){return rx(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Fu.transition,Fu.transition=null;var s=Mi;Mi=1;var l=ri;ri|=4,Eq.current=null,T$e(n,r),E1e(r,n),J8e(RV),ZP=!!AV,RV=AV=null,n.current=r,A$e(r),i8e(),ri=l,Mi=s,Fu.transition=o}else n.current=r;if(f3&&(f3=!1,Zg=n,hN=a),o=n.pendingLanes,o===0&&(ym=null),s8e(r.stateNode),ec(n,Ya()),e!==null)for(i=n.onRecoverableError,r=0;r<e.length;r++)a=e[r],i(a.value,{componentStack:a.stack,digest:a.digest});if(fN)throw fN=!1,n=XV,XV=null,n;return hN&1&&n.tag!==0&&rx(),o=n.pendingLanes,o&1?n===KV?D2++:(D2=0,KV=n):D2=0,nv(),null}function rx(){if(Zg!==null){var n=uye(hN),e=Fu.transition,r=Mi;try{if(Fu.transition=null,Mi=16>n?16:n,Zg===null)var i=!1;else{if(n=Zg,Zg=null,hN=0,ri&6)throw Error(Vt(331));var a=ri;for(ri|=4,mn=n.current;mn!==null;){var o=mn,s=o.child;if(mn.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(mn=u;mn!==null;){var d=mn;switch(d.tag){case 0:case 11:case 15:O2(8,d,o)}var f=d.child;if(f!==null)f.return=d,mn=f;else for(;mn!==null;){d=mn;var h=d.sibling,p=d.return;if(_1e(d),d===u){mn=null;break}if(h!==null){h.return=p,mn=h;break}mn=p}}}var g=o.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}mn=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,mn=s;else e:for(;mn!==null;){if(o=mn,o.flags&2048)switch(o.tag){case 0:case 11:case 15:O2(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,mn=y;break e}mn=o.return}}var b=n.current;for(mn=b;mn!==null;){s=mn;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,mn=x;else e:for(s=b;mn!==null;){if(l=mn,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:PI(9,l)}}catch(S){La(l,l.return,S)}if(l===s){mn=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,mn=_;break e}mn=l.return}}if(ri=a,nv(),Yf&&typeof Yf.onPostCommitFiberRoot=="function")try{Yf.onPostCommitFiberRoot(wI,n)}catch{}i=!0}return i}finally{Mi=r,Fu.transition=e}}return!1}function Zte(n,e,r){e=Px(r,e),e=u1e(n,e,1),n=vm(n,e,1),e=gl(),n!==null&&(eM(n,1,e),ec(n,e))}function La(n,e,r){if(n.tag===3)Zte(n,n,r);else for(;e!==null;){if(e.tag===3){Zte(e,n,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ym===null||!ym.has(i))){n=Px(r,n),n=d1e(e,n,1),e=vm(e,n,1),n=gl(),e!==null&&(eM(e,1,n),ec(e,n));break}}e=e.return}}function D$e(n,e,r){var i=n.pingCache;i!==null&&i.delete(e),e=gl(),n.pingedLanes|=n.suspendedLanes&r,Jo===n&&(ys&r)===r&&(Oo===4||Oo===3&&(ys&130023424)===ys&&500>Ya()-Mq?k0(n,0):Cq|=r),ec(n,e)}function N1e(n,e){e===0&&(n.mode&1?(e=n3,n3<<=1,!(n3&130023424)&&(n3=4194304)):e=1);var r=gl();n=Pp(n,e),n!==null&&(eM(n,e,r),ec(n,r))}function L$e(n){var e=n.memoizedState,r=0;e!==null&&(r=e.retryLane),N1e(n,r)}function k$e(n,e){var r=0;switch(n.tag){case 13:var i=n.stateNode,a=n.memoizedState;a!==null&&(r=a.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Vt(314))}i!==null&&i.delete(e),N1e(n,r)}var O1e;O1e=function(n,e,r){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ql.current)Wl=!0;else{if(!(n.lanes&r)&&!(e.flags&128))return Wl=!1,S$e(n,e,r);Wl=!!(n.flags&131072)}else Wl=!1,ga&&e.flags&1048576&&kye(e,iN,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ZR(n,e),n=e.pendingProps;var a=Mx(e,Ys.current);nx(e,r),a=bq(null,e,i,n,a,r);var o=xq();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jl(i)?(o=!0,nN(e)):o=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,pq(e),a.updater=RI,e.stateNode=a,a._reactInternals=e,$V(e,i,n,r),e=UV(null,e,i,!0,o,r)):(e.tag=0,ga&&o&&sq(e),ol(null,e,a,r),e=e.child),e;case 16:i=e.elementType;e:{switch(ZR(n,e),n=e.pendingProps,a=i._init,i=a(i._payload),e.type=i,a=e.tag=$$e(i),n=_d(i,n),a){case 0:e=zV(null,e,i,n,r);break e;case 1:e=Ute(null,e,i,n,r);break e;case 11:e=Bte(null,e,i,n,r);break e;case 14:e=zte(null,e,i,_d(i.type,n),r);break e}throw Error(Vt(306,i,""))}return e;case 0:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:_d(i,a),zV(n,e,i,a,r);case 1:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:_d(i,a),Ute(n,e,i,a,r);case 3:e:{if(g1e(e),n===null)throw Error(Vt(387));i=e.pendingProps,o=e.memoizedState,a=o.element,Vye(n,e),sN(e,i,null,r);var s=e.memoizedState;if(i=s.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){a=Px(Error(Vt(423)),e),e=Vte(n,e,i,r,a);break e}else if(i!==a){a=Px(Error(Vt(424)),e),e=Vte(n,e,i,r,a);break e}else for(Ic=mm(e.stateNode.containerInfo.firstChild),Bc=e,ga=!0,Td=null,r=zye(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Tx(),i===a){e=Np(n,e,r);break e}ol(n,e,i,r)}e=e.child}return e;case 5:return Gye(e),n===null&&LV(e),i=e.type,a=e.pendingProps,o=n!==null?n.memoizedProps:null,s=a.children,PV(i,a)?s=null:o!==null&&PV(i,o)&&(e.flags|=32),p1e(n,e),ol(n,e,s,r),e.child;case 6:return n===null&&LV(e),null;case 13:return m1e(n,e,r);case 4:return gq(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Ax(e,null,i,r):ol(n,e,i,r),e.child;case 11:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:_d(i,a),Bte(n,e,i,a,r);case 7:return ol(n,e,e.pendingProps,r),e.child;case 8:return ol(n,e,e.pendingProps.children,r),e.child;case 12:return ol(n,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,a=e.pendingProps,o=e.memoizedProps,s=a.value,Hi(aN,i._currentValue),i._currentValue=s,o!==null)if(qd(o.value,s)){if(o.children===a.children&&!Ql.current){e=Np(n,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(o.tag===1){c=yp(-1,r&-r),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),kV(o.return,r,e),l.lanes|=r;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Vt(341));s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),kV(s,r,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}ol(n,e,a.children,r),e=e.child}return e;case 9:return a=e.type,i=e.pendingProps.children,nx(e,r),a=Uu(a),i=i(a),e.flags|=1,ol(n,e,i,r),e.child;case 14:return i=e.type,a=_d(i,e.pendingProps),a=_d(i.type,a),zte(n,e,i,a,r);case 15:return f1e(n,e,e.type,e.pendingProps,r);case 17:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:_d(i,a),ZR(n,e),e.tag=1,Jl(i)?(n=!0,nN(e)):n=!1,nx(e,r),c1e(e,i,a),$V(e,i,a,r),UV(null,e,i,!0,n,r);case 19:return v1e(n,e,r);case 22:return h1e(n,e,r)}throw Error(Vt(156,e.tag))};function I1e(n,e){return oye(n,e)}function F$e(n,e,r,i){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Du(n,e,r,i){return new F$e(n,e,r,i)}function Pq(n){return n=n.prototype,!(!n||!n.isReactComponent)}function $$e(n){if(typeof n=="function")return Pq(n)?1:0;if(n!=null){if(n=n.$$typeof,n===XW)return 11;if(n===KW)return 14}return 2}function xm(n,e){var r=n.alternate;return r===null?(r=Du(n.tag,e,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=e,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&14680064,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,e=n.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r}function eP(n,e,r,i,a,o){var s=2;if(i=n,typeof n=="function")Pq(n)&&(s=1);else if(typeof n=="string")s=5;else e:switch(n){case Mb:return F0(r.children,a,o,e);case YW:s=8,a|=8;break;case lV:return n=Du(12,r,e,a|2),n.elementType=lV,n.lanes=o,n;case cV:return n=Du(13,r,e,a),n.elementType=cV,n.lanes=o,n;case uV:return n=Du(19,r,e,a),n.elementType=uV,n.lanes=o,n;case G0e:return OI(r,a,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case U0e:s=10;break e;case V0e:s=9;break e;case XW:s=11;break e;case KW:s=14;break e;case $g:s=16,i=null;break e}throw Error(Vt(130,n==null?n:typeof n,""))}return e=Du(s,r,e,a),e.elementType=n,e.type=i,e.lanes=o,e}function F0(n,e,r,i){return n=Du(7,n,i,e),n.lanes=r,n}function OI(n,e,r,i){return n=Du(22,n,i,e),n.elementType=G0e,n.lanes=r,n.stateNode={isHidden:!1},n}function a5(n,e,r){return n=Du(6,n,null,e),n.lanes=r,n}function o5(n,e,r){return e=Du(4,n.children!==null?n.children:[],n.key,e),e.lanes=r,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function B$e(n,e,r,i,a){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zk(0),this.expirationTimes=zk(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zk(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Nq(n,e,r,i,a,o,s,l,c){return n=new B$e(n,e,r,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Du(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},pq(o),n}function z$e(n,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cb,key:i==null?null:""+i,children:n,containerInfo:e,implementation:r}}function D1e(n){if(!n)return Fm;n=n._reactInternals;e:{if(Ly(n)!==n||n.tag!==1)throw Error(Vt(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jl(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Vt(171))}if(n.tag===1){var r=n.type;if(Jl(r))return Dye(n,r,e)}return e}function L1e(n,e,r,i,a,o,s,l,c){return n=Nq(r,i,!0,n,a,o,s,l,c),n.context=D1e(null),r=n.current,i=gl(),a=bm(r),o=yp(i,a),o.callback=e??null,vm(r,o,a),n.current.lanes=a,eM(n,a,i),ec(n,i),n}function II(n,e,r,i){var a=e.current,o=gl(),s=bm(a);return r=D1e(r),e.context===null?e.context=r:e.pendingContext=r,e=yp(o,s),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=vm(a,e,s),n!==null&&(Gd(n,a,s,o),YR(n,a,s)),s}function gN(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Qte(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<e?r:e}}function Oq(n,e){Qte(n,e),(n=n.alternate)&&Qte(n,e)}function U$e(){return null}var k1e=typeof reportError=="function"?reportError:function(n){console.error(n)};function Iq(n){this._internalRoot=n}DI.prototype.render=Iq.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Vt(409));II(n,e,null,null)};DI.prototype.unmount=Iq.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;sy(function(){II(null,n,null,null)}),e[Rp]=null}};function DI(n){this._internalRoot=n}DI.prototype.unstable_scheduleHydration=function(n){if(n){var e=hye();n={blockedOn:null,target:n,priority:e};for(var r=0;r<Vg.length&&e!==0&&e<Vg[r].priority;r++);Vg.splice(r,0,n),r===0&&gye(n)}};function Dq(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function LI(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Jte(){}function V$e(n,e,r,i,a){if(a){if(typeof i=="function"){var o=i;i=function(){var u=gN(s);o.call(u)}}var s=L1e(e,i,n,0,null,!1,!1,"",Jte);return n._reactRootContainer=s,n[Rp]=s.current,_E(n.nodeType===8?n.parentNode:n),sy(),s}for(;a=n.lastChild;)n.removeChild(a);if(typeof i=="function"){var l=i;i=function(){var u=gN(c);l.call(u)}}var c=Nq(n,0,!1,null,null,!1,!1,"",Jte);return n._reactRootContainer=c,n[Rp]=c.current,_E(n.nodeType===8?n.parentNode:n),sy(function(){II(e,c,r,i)}),c}function kI(n,e,r,i,a){var o=r._reactRootContainer;if(o){var s=o;if(typeof a=="function"){var l=a;a=function(){var c=gN(s);l.call(c)}}II(e,s,n,a)}else s=V$e(r,e,n,a,i);return gN(s)}dye=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var r=XS(e.pendingLanes);r!==0&&(JW(e,r|1),ec(e,Ya()),!(ri&6)&&(Nx=Ya()+500,nv()))}break;case 13:sy(function(){var i=Pp(n,1);if(i!==null){var a=gl();Gd(i,n,1,a)}}),Oq(n,1)}};eq=function(n){if(n.tag===13){var e=Pp(n,134217728);if(e!==null){var r=gl();Gd(e,n,134217728,r)}Oq(n,134217728)}};fye=function(n){if(n.tag===13){var e=bm(n),r=Pp(n,e);if(r!==null){var i=gl();Gd(r,n,e,i)}Oq(n,e)}};hye=function(){return Mi};pye=function(n,e){var r=Mi;try{return Mi=n,e()}finally{Mi=r}};xV=function(n,e,r){switch(e){case"input":if(hV(n,r),e=r.name,r.type==="radio"&&e!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==n&&i.form===n.form){var a=MI(i);if(!a)throw Error(Vt(90));H0e(i),hV(i,a)}}}break;case"textarea":q0e(n,r);break;case"select":e=r.value,e!=null&&Qb(n,!!r.multiple,e,!1)}};eye=Tq;tye=sy;var G$e={usingClientEntryPoint:!1,Events:[nM,Pb,MI,Q0e,J0e,Tq]},Xw={findFiberByHostInstance:w0,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},j$e={bundleType:Xw.bundleType,version:Xw.version,rendererPackageName:Xw.rendererPackageName,rendererConfig:Xw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jp.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=iye(n),n===null?null:n.stateNode},findFiberByHostInstance:Xw.findFiberByHostInstance||U$e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var h3=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!h3.isDisabled&&h3.supportsFiber)try{wI=h3.inject(j$e),Yf=h3}catch{}}Yc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G$e;Yc.createPortal=function(n,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dq(e))throw Error(Vt(200));return z$e(n,e,null,r)};Yc.createRoot=function(n,e){if(!Dq(n))throw Error(Vt(299));var r=!1,i="",a=k1e;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=Nq(n,1,!1,null,null,r,!1,i,a),n[Rp]=e.current,_E(n.nodeType===8?n.parentNode:n),new Iq(e)};Yc.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Vt(188)):(n=Object.keys(n).join(","),Error(Vt(268,n)));return n=iye(e),n=n===null?null:n.stateNode,n};Yc.flushSync=function(n){return sy(n)};Yc.hydrate=function(n,e,r){if(!LI(e))throw Error(Vt(200));return kI(null,n,e,!0,r)};Yc.hydrateRoot=function(n,e,r){if(!Dq(n))throw Error(Vt(405));var i=r!=null&&r.hydratedSources||null,a=!1,o="",s=k1e;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),e=L1e(e,null,n,1,r??null,a,!1,o,s),n[Rp]=e.current,_E(n),i)for(n=0;n<i.length;n++)r=i[n],a=r._getVersion,a=a(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,a]:e.mutableSourceEagerHydrationData.push(r,a);return new DI(e)};Yc.render=function(n,e,r){if(!LI(e))throw Error(Vt(200));return kI(null,n,e,!1,r)};Yc.unmountComponentAtNode=function(n){if(!LI(n))throw Error(Vt(40));return n._reactRootContainer?(sy(function(){kI(null,null,n,!1,function(){n._reactRootContainer=null,n[Rp]=null})}),!0):!1};Yc.unstable_batchedUpdates=Tq;Yc.unstable_renderSubtreeIntoContainer=function(n,e,r,i){if(!LI(r))throw Error(Vt(200));if(n==null||n._reactInternals===void 0)throw Error(Vt(38));return kI(n,e,r,!1,i)};Yc.version="18.3.1-next-f1338f8080-20240426";function F1e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(F1e)}catch(n){console.error(n)}}F1e(),F0e.exports=Yc;var $m=F0e.exports;const JV=Sl($m),$1e=C0e({__proto__:null,default:JV},[$m]);var B1e,ene=$m;B1e=HP.createRoot=ene.createRoot,HP.hydrateRoot=ene.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ha(){return ha=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},ha.apply(this,arguments)}var ro;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ro||(ro={}));const tne="popstate";function H$e(n){n===void 0&&(n={});function e(i,a){let{pathname:o,search:s,hash:l}=i.location;return PE("",{pathname:o,search:s,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(i,a){return typeof a=="string"?a:iM(a)}return q$e(e,r,null,n)}function Wr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ox(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function W$e(){return Math.random().toString(36).substr(2,8)}function nne(n,e){return{usr:n.state,key:n.key,idx:e}}function PE(n,e,r,i){return r===void 0&&(r=null),ha({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?rv(e):e,{state:r,key:e&&e.key||i||W$e()})}function iM(n){let{pathname:e="/",search:r="",hash:i=""}=n;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function rv(n){let e={};if(n){let r=n.indexOf("#");r>=0&&(e.hash=n.substr(r),n=n.substr(0,r));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function q$e(n,e,r,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:o=!1}=i,s=a.history,l=ro.Pop,c=null,u=d();u==null&&(u=0,s.replaceState(ha({},s.state,{idx:u}),""));function d(){return(s.state||{idx:null}).idx}function f(){l=ro.Pop;let v=d(),y=v==null?null:v-u;u=v,c&&c({action:l,location:m.location,delta:y})}function h(v,y){l=ro.Push;let b=PE(m.location,v,y);u=d()+1;let x=nne(b,u),_=m.createHref(b);try{s.pushState(x,"",_)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(_)}o&&c&&c({action:l,location:m.location,delta:1})}function p(v,y){l=ro.Replace;let b=PE(m.location,v,y);u=d();let x=nne(b,u),_=m.createHref(b);s.replaceState(x,"",_),o&&c&&c({action:l,location:m.location,delta:0})}function g(v){let y=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof v=="string"?v:iM(v);return b=b.replace(/ $/,"%20"),Wr(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let m={get action(){return l},get location(){return n(a,s)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(tne,f),c=v,()=>{a.removeEventListener(tne,f),c=null}},createHref(v){return e(a,v)},createURL:g,encodeLocation(v){let y=g(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:p,go(v){return s.go(v)}};return m}var xi;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(xi||(xi={}));const Y$e=new Set(["lazy","caseSensitive","path","id","index","children"]);function X$e(n){return n.index===!0}function mN(n,e,r,i){return r===void 0&&(r=[]),i===void 0&&(i={}),n.map((a,o)=>{let s=[...r,String(o)],l=typeof a.id=="string"?a.id:s.join("-");if(Wr(a.index!==!0||!a.children,"Cannot specify children on an index route"),Wr(!i[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),X$e(a)){let c=ha({},a,e(a),{id:l});return i[l]=c,c}else{let c=ha({},a,e(a),{id:l,children:void 0});return i[l]=c,a.children&&(c.children=mN(a.children,e,s,i)),c}})}function a0(n,e,r){return r===void 0&&(r="/"),tP(n,e,r,!1)}function tP(n,e,r,i){let a=typeof e=="string"?rv(e):e,o=aM(a.pathname||"/",r);if(o==null)return null;let s=z1e(n);Z$e(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let u=lBe(o);l=oBe(s[c],u,i)}return l}function K$e(n,e){let{route:r,pathname:i,params:a}=n;return{id:r.id,pathname:i,params:a,data:e[r.id],handle:r.handle}}function z1e(n,e,r,i){e===void 0&&(e=[]),r===void 0&&(r=[]),i===void 0&&(i="");let a=(o,s,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};c.relativePath.startsWith("/")&&(Wr(c.relativePath.startsWith(i),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(i.length));let u=_m([i,c.relativePath]),d=r.concat(c);o.children&&o.children.length>0&&(Wr(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),z1e(o.children,e,d,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:iBe(u,o.index),routesMeta:d})};return n.forEach((o,s)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))a(o,s);else for(let c of U1e(o.path))a(o,s,c)}),e}function U1e(n){let e=n.split("/");if(e.length===0)return[];let[r,...i]=e,a=r.endsWith("?"),o=r.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let s=U1e(i.join("/")),l=[];return l.push(...s.map(c=>c===""?o:[o,c].join("/"))),a&&l.push(...s),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function Z$e(n){n.sort((e,r)=>e.score!==r.score?r.score-e.score:aBe(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const Q$e=/^:[\w-]+$/,J$e=3,eBe=2,tBe=1,nBe=10,rBe=-2,rne=n=>n==="*";function iBe(n,e){let r=n.split("/"),i=r.length;return r.some(rne)&&(i+=rBe),e&&(i+=eBe),r.filter(a=>!rne(a)).reduce((a,o)=>a+(Q$e.test(o)?J$e:o===""?tBe:nBe),i)}function aBe(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function oBe(n,e,r){r===void 0&&(r=!1);let{routesMeta:i}=n,a={},o="/",s=[];for(let l=0;l<i.length;++l){let c=i[l],u=l===i.length-1,d=o==="/"?e:e.slice(o.length)||"/",f=ine({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!i[i.length-1].route.index&&(f=ine({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),s.push({params:a,pathname:_m([o,f.pathname]),pathnameBase:dBe(_m([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=_m([o,f.pathnameBase]))}return s}function ine(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[r,i]=sBe(n.path,n.caseSensitive,n.end),a=e.match(r);if(!a)return null;let o=a[0],s=o.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:i.reduce((u,d,f)=>{let{paramName:h,isOptional:p}=d;if(h==="*"){let m=l[f]||"";s=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const g=l[f];return p&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:n}}function sBe(n,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Ox(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function lBe(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ox(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function aM(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=n.charAt(r);return i&&i!=="/"?null:n.slice(r)||"/"}function cBe(n,e){e===void 0&&(e="/");let{pathname:r,search:i="",hash:a=""}=typeof n=="string"?rv(n):n;return{pathname:r?r.startsWith("/")?r:uBe(r,e):e,search:fBe(i),hash:hBe(a)}}function uBe(n,e){let r=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function s5(n,e,r,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function V1e(n){return n.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function G1e(n,e){let r=V1e(n);return e?r.map((i,a)=>a===r.length-1?i.pathname:i.pathnameBase):r.map(i=>i.pathnameBase)}function j1e(n,e,r,i){i===void 0&&(i=!1);let a;typeof n=="string"?a=rv(n):(a=ha({},n),Wr(!a.pathname||!a.pathname.includes("?"),s5("?","pathname","search",a)),Wr(!a.pathname||!a.pathname.includes("#"),s5("#","pathname","hash",a)),Wr(!a.search||!a.search.includes("#"),s5("#","search","hash",a)));let o=n===""||a.pathname==="",s=o?"/":a.pathname,l;if(s==null)l=r;else{let f=e.length-1;if(!i&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?e[f]:"/"}let c=cBe(a,l),u=s&&s!=="/"&&s.endsWith("/"),d=(o||s===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const _m=n=>n.join("/").replace(/\/\/+/g,"/"),dBe=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),fBe=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,hBe=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class vN{constructor(e,r,i,a){a===void 0&&(a=!1),this.status=e,this.statusText=r||"",this.internal=a,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function NE(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const H1e=["post","put","patch","delete"],pBe=new Set(H1e),gBe=["get",...H1e],mBe=new Set(gBe),vBe=new Set([301,302,303,307,308]),yBe=new Set([307,308]),l5={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},bBe={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Kw={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Lq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xBe=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),W1e="remix-router-transitions";function _Be(n){const e=n.window?n.window:typeof window<"u"?window:void 0,r=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!r;Wr(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let a;if(n.mapRouteProperties)a=n.mapRouteProperties;else if(n.detectErrorBoundary){let ye=n.detectErrorBoundary;a=be=>({hasErrorBoundary:ye(be)})}else a=xBe;let o={},s=mN(n.routes,a,void 0,o),l,c=n.basename||"/",u=n.dataStrategy||CBe,d=n.patchRoutesOnNavigation,f=ha({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),h=null,p=new Set,g=null,m=null,v=null,y=n.hydrationData!=null,b=a0(s,n.history.location,c),x=!1,_=null;if(b==null&&!d){let ye=Ll(404,{pathname:n.history.location.pathname}),{matches:be,route:Se}=gne(s);b=be,_={[Se.id]:ye}}b&&!n.hydrationData&&Ot(b,s,n.history.location.pathname).active&&(b=null);let S;if(b)if(b.some(ye=>ye.route.lazy))S=!1;else if(!b.some(ye=>ye.route.loader))S=!0;else if(f.v7_partialHydration){let ye=n.hydrationData?n.hydrationData.loaderData:null,be=n.hydrationData?n.hydrationData.errors:null;if(be){let Se=b.findIndex(je=>be[je.route.id]!==void 0);S=b.slice(0,Se+1).every(je=>!tG(je.route,ye,be))}else S=b.every(Se=>!tG(Se.route,ye,be))}else S=n.hydrationData!=null;else if(S=!1,b=[],f.v7_partialHydration){let ye=Ot(null,s,n.history.location.pathname);ye.active&&ye.matches&&(x=!0,b=ye.matches)}let M,E={historyAction:n.history.action,location:n.history.location,matches:b,initialized:S,navigation:l5,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||_,fetchers:new Map,blockers:new Map},T=ro.Pop,P=!1,A,N=!1,O=new Map,I=null,D=!1,k=!1,$=[],B=new Set,F=new Map,G=0,z=-1,U=new Map,H=new Set,X=new Map,V=new Map,W=new Set,K=new Map,q=new Map,Q;function ie(){if(h=n.history.listen(ye=>{let{action:be,location:Se,delta:je}=ye;if(Q){Q(),Q=void 0;return}Ox(q.size===0||je!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let tt=vt({currentLocation:E.location,nextLocation:Se,historyAction:be});if(tt&&je!=null){let ft=new Promise(Tt=>{Q=Tt});n.history.go(je*-1),xe(tt,{state:"blocked",location:Se,proceed(){xe(tt,{state:"proceeding",proceed:void 0,reset:void 0,location:Se}),ft.then(()=>n.history.go(je))},reset(){let Tt=new Map(E.blockers);Tt.set(tt,Kw),le({blockers:Tt})}});return}return ve(be,Se)}),r){BBe(e,O);let ye=()=>zBe(e,O);e.addEventListener("pagehide",ye),I=()=>e.removeEventListener("pagehide",ye)}return E.initialized||ve(ro.Pop,E.location,{initialHydration:!0}),M}function oe(){h&&h(),I&&I(),p.clear(),A&&A.abort(),E.fetchers.forEach((ye,be)=>Ge(be)),E.blockers.forEach((ye,be)=>mt(be))}function ue(ye){return p.add(ye),()=>p.delete(ye)}function le(ye,be){be===void 0&&(be={}),E=ha({},E,ye);let Se=[],je=[];f.v7_fetcherPersist&&E.fetchers.forEach((tt,ft)=>{tt.state==="idle"&&(W.has(ft)?je.push(ft):Se.push(ft))}),W.forEach(tt=>{!E.fetchers.has(tt)&&!F.has(tt)&&je.push(tt)}),[...p].forEach(tt=>tt(E,{deletedFetchers:je,viewTransitionOpts:be.viewTransitionOpts,flushSync:be.flushSync===!0})),f.v7_fetcherPersist?(Se.forEach(tt=>E.fetchers.delete(tt)),je.forEach(tt=>Ge(tt))):je.forEach(tt=>W.delete(tt))}function me(ye,be,Se){var je,tt;let{flushSync:ft}=Se===void 0?{}:Se,Tt=E.actionData!=null&&E.navigation.formMethod!=null&&Sd(E.navigation.formMethod)&&E.navigation.state==="loading"&&((je=ye.state)==null?void 0:je._isRedirect)!==!0,It;be.actionData?Object.keys(be.actionData).length>0?It=be.actionData:It=null:Tt?It=E.actionData:It=null;let Rt=be.loaderData?hne(E.loaderData,be.loaderData,be.matches||[],be.errors):E.loaderData,Lt=E.blockers;Lt.size>0&&(Lt=new Map(Lt),Lt.forEach((yn,kn)=>Lt.set(kn,Kw)));let $t=P===!0||E.navigation.formMethod!=null&&Sd(E.navigation.formMethod)&&((tt=ye.state)==null?void 0:tt._isRedirect)!==!0;l&&(s=l,l=void 0),D||T===ro.Pop||(T===ro.Push?n.history.push(ye,ye.state):T===ro.Replace&&n.history.replace(ye,ye.state));let en;if(T===ro.Pop){let yn=O.get(E.location.pathname);yn&&yn.has(ye.pathname)?en={currentLocation:E.location,nextLocation:ye}:O.has(ye.pathname)&&(en={currentLocation:ye,nextLocation:E.location})}else if(N){let yn=O.get(E.location.pathname);yn?yn.add(ye.pathname):(yn=new Set([ye.pathname]),O.set(E.location.pathname,yn)),en={currentLocation:E.location,nextLocation:ye}}le(ha({},be,{actionData:It,loaderData:Rt,historyAction:T,location:ye,initialized:!0,navigation:l5,revalidation:"idle",restoreScrollPosition:Gt(ye,be.matches||E.matches),preventScrollReset:$t,blockers:Lt}),{viewTransitionOpts:en,flushSync:ft===!0}),T=ro.Pop,P=!1,N=!1,D=!1,k=!1,$=[]}async function J(ye,be){if(typeof ye=="number"){n.history.go(ye);return}let Se=eG(E.location,E.matches,c,f.v7_prependBasename,ye,f.v7_relativeSplatPath,be==null?void 0:be.fromRouteId,be==null?void 0:be.relative),{path:je,submission:tt,error:ft}=ane(f.v7_normalizeFormMethod,!1,Se,be),Tt=E.location,It=PE(E.location,je,be&&be.state);It=ha({},It,n.history.encodeLocation(It));let Rt=be&&be.replace!=null?be.replace:void 0,Lt=ro.Push;Rt===!0?Lt=ro.Replace:Rt===!1||tt!=null&&Sd(tt.formMethod)&&tt.formAction===E.location.pathname+E.location.search&&(Lt=ro.Replace);let $t=be&&"preventScrollReset"in be?be.preventScrollReset===!0:void 0,en=(be&&be.flushSync)===!0,yn=vt({currentLocation:Tt,nextLocation:It,historyAction:Lt});if(yn){xe(yn,{state:"blocked",location:It,proceed(){xe(yn,{state:"proceeding",proceed:void 0,reset:void 0,location:It}),J(ye,be)},reset(){let kn=new Map(E.blockers);kn.set(yn,Kw),le({blockers:kn})}});return}return await ve(Lt,It,{submission:tt,pendingError:ft,preventScrollReset:$t,replace:be&&be.replace,enableViewTransition:be&&be.viewTransition,flushSync:en})}function pe(){if(et(),le({revalidation:"loading"}),E.navigation.state!=="submitting"){if(E.navigation.state==="idle"){ve(E.historyAction,E.location,{startUninterruptedRevalidation:!0});return}ve(T||E.historyAction,E.navigation.location,{overrideNavigation:E.navigation,enableViewTransition:N===!0})}}async function ve(ye,be,Se){A&&A.abort(),A=null,T=ye,D=(Se&&Se.startUninterruptedRevalidation)===!0,_t(E.location,E.matches),P=(Se&&Se.preventScrollReset)===!0,N=(Se&&Se.enableViewTransition)===!0;let je=l||s,tt=Se&&Se.overrideNavigation,ft=Se!=null&&Se.initialHydration&&E.matches&&E.matches.length>0&&!x?E.matches:a0(je,be,c),Tt=(Se&&Se.flushSync)===!0;if(ft&&E.initialized&&!k&&NBe(E.location,be)&&!(Se&&Se.submission&&Sd(Se.submission.formMethod))){me(be,{matches:ft},{flushSync:Tt});return}let It=Ot(ft,je,be.pathname);if(It.active&&It.matches&&(ft=It.matches),!ft){let{error:qn,notFoundMatches:_n,route:te}=Ue(be.pathname);me(be,{matches:_n,loaderData:{},errors:{[te.id]:qn}},{flushSync:Tt});return}A=new AbortController;let Rt=v1(n.history,be,A.signal,Se&&Se.submission),Lt;if(Se&&Se.pendingError)Lt=[o0(ft).route.id,{type:xi.error,error:Se.pendingError}];else if(Se&&Se.submission&&Sd(Se.submission.formMethod)){let qn=await Me(Rt,be,Se.submission,ft,It.active,{replace:Se.replace,flushSync:Tt});if(qn.shortCircuited)return;if(qn.pendingActionResult){let[_n,te]=qn.pendingActionResult;if(Tc(te)&&NE(te.error)&&te.error.status===404){A=null,me(be,{matches:qn.matches,loaderData:{},errors:{[_n]:te.error}});return}}ft=qn.matches||ft,Lt=qn.pendingActionResult,tt=c5(be,Se.submission),Tt=!1,It.active=!1,Rt=v1(n.history,Rt.url,Rt.signal)}let{shortCircuited:$t,matches:en,loaderData:yn,errors:kn}=await Re(Rt,be,ft,It.active,tt,Se&&Se.submission,Se&&Se.fetcherSubmission,Se&&Se.replace,Se&&Se.initialHydration===!0,Tt,Lt);$t||(A=null,me(be,ha({matches:en||ft},pne(Lt),{loaderData:yn,errors:kn})))}async function Me(ye,be,Se,je,tt,ft){ft===void 0&&(ft={}),et();let Tt=FBe(be,Se);if(le({navigation:Tt},{flushSync:ft.flushSync===!0}),tt){let Lt=await wt(je,be.pathname,ye.signal);if(Lt.type==="aborted")return{shortCircuited:!0};if(Lt.type==="error"){let $t=o0(Lt.partialMatches).route.id;return{matches:Lt.partialMatches,pendingActionResult:[$t,{type:xi.error,error:Lt.error}]}}else if(Lt.matches)je=Lt.matches;else{let{notFoundMatches:$t,error:en,route:yn}=Ue(be.pathname);return{matches:$t,pendingActionResult:[yn.id,{type:xi.error,error:en}]}}}let It,Rt=ZS(je,be);if(!Rt.route.action&&!Rt.route.lazy)It={type:xi.error,error:Ll(405,{method:ye.method,pathname:be.pathname,routeId:Rt.route.id})};else if(It=(await Ae("action",E,ye,[Rt],je,null))[Rt.route.id],ye.signal.aborted)return{shortCircuited:!0};if(C0(It)){let Lt;return ft&&ft.replace!=null?Lt=ft.replace:Lt=une(It.response.headers.get("Location"),new URL(ye.url),c)===E.location.pathname+E.location.search,await _e(ye,It,!0,{submission:Se,replace:Lt}),{shortCircuited:!0}}if(Qg(It))throw Ll(400,{type:"defer-action"});if(Tc(It)){let Lt=o0(je,Rt.route.id);return(ft&&ft.replace)!==!0&&(T=ro.Push),{matches:je,pendingActionResult:[Lt.route.id,It]}}return{matches:je,pendingActionResult:[Rt.route.id,It]}}async function Re(ye,be,Se,je,tt,ft,Tt,It,Rt,Lt,$t){let en=tt||c5(be,ft),yn=ft||Tt||vne(en),kn=!D&&(!f.v7_partialHydration||!Rt);if(je){if(kn){let zt=Xe($t);le(ha({navigation:en},zt!==void 0?{actionData:zt}:{}),{flushSync:Lt})}let kt=await wt(Se,be.pathname,ye.signal);if(kt.type==="aborted")return{shortCircuited:!0};if(kt.type==="error"){let zt=o0(kt.partialMatches).route.id;return{matches:kt.partialMatches,loaderData:{},errors:{[zt]:kt.error}}}else if(kt.matches)Se=kt.matches;else{let{error:zt,notFoundMatches:En,route:Bn}=Ue(be.pathname);return{matches:En,loaderData:{},errors:{[Bn.id]:zt}}}}let qn=l||s,[_n,te]=sne(n.history,E,Se,yn,be,f.v7_partialHydration&&Rt===!0,f.v7_skipActionErrorRevalidation,k,$,B,W,X,H,qn,c,$t);if(Le(kt=>!(Se&&Se.some(zt=>zt.route.id===kt))||_n&&_n.some(zt=>zt.route.id===kt)),z=++G,_n.length===0&&te.length===0){let kt=De();return me(be,ha({matches:Se,loaderData:{},errors:$t&&Tc($t[1])?{[$t[0]]:$t[1].error}:null},pne($t),kt?{fetchers:new Map(E.fetchers)}:{}),{flushSync:Lt}),{shortCircuited:!0}}if(kn){let kt={};if(!je){kt.navigation=en;let zt=Xe($t);zt!==void 0&&(kt.actionData=zt)}te.length>0&&(kt.fetchers=He(te)),le(kt,{flushSync:Lt})}te.forEach(kt=>{Ze(kt.key),kt.controller&&F.set(kt.key,kt.controller)});let de=()=>te.forEach(kt=>Ze(kt.key));A&&A.signal.addEventListener("abort",de);let{loaderResults:Te,fetcherResults:Oe}=await Ce(E,Se,_n,te,ye);if(ye.signal.aborted)return{shortCircuited:!0};A&&A.signal.removeEventListener("abort",de),te.forEach(kt=>F.delete(kt.key));let Ee=p3(Te);if(Ee)return await _e(ye,Ee.result,!0,{replace:It}),{shortCircuited:!0};if(Ee=p3(Oe),Ee)return H.add(Ee.key),await _e(ye,Ee.result,!0,{replace:It}),{shortCircuited:!0};let{loaderData:ut,errors:Dt}=fne(E,Se,Te,$t,te,Oe,K);K.forEach((kt,zt)=>{kt.subscribe(En=>{(En||kt.done)&&K.delete(zt)})}),f.v7_partialHydration&&Rt&&E.errors&&(Dt=ha({},E.errors,Dt));let Bt=De(),Zt=bt(z),dn=Bt||Zt||te.length>0;return ha({matches:Se,loaderData:ut,errors:Dt},dn?{fetchers:new Map(E.fetchers)}:{})}function Xe(ye){if(ye&&!Tc(ye[1]))return{[ye[0]]:ye[1].data};if(E.actionData)return Object.keys(E.actionData).length===0?null:E.actionData}function He(ye){return ye.forEach(be=>{let Se=E.fetchers.get(be.key),je=Zw(void 0,Se?Se.data:void 0);E.fetchers.set(be.key,je)}),new Map(E.fetchers)}function ee(ye,be,Se,je){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Ze(ye);let tt=(je&&je.flushSync)===!0,ft=l||s,Tt=eG(E.location,E.matches,c,f.v7_prependBasename,Se,f.v7_relativeSplatPath,be,je==null?void 0:je.relative),It=a0(ft,Tt,c),Rt=Ot(It,ft,Tt);if(Rt.active&&Rt.matches&&(It=Rt.matches),!It){qe(ye,be,Ll(404,{pathname:Tt}),{flushSync:tt});return}let{path:Lt,submission:$t,error:en}=ane(f.v7_normalizeFormMethod,!0,Tt,je);if(en){qe(ye,be,en,{flushSync:tt});return}let yn=ZS(It,Lt),kn=(je&&je.preventScrollReset)===!0;if($t&&Sd($t.formMethod)){Y(ye,be,Lt,yn,It,Rt.active,tt,kn,$t);return}X.set(ye,{routeId:be,path:Lt}),ce(ye,be,Lt,yn,It,Rt.active,tt,kn,$t)}async function Y(ye,be,Se,je,tt,ft,Tt,It,Rt){et(),X.delete(ye);function Lt(In){if(!In.route.action&&!In.route.lazy){let zn=Ll(405,{method:Rt.formMethod,pathname:Se,routeId:be});return qe(ye,be,zn,{flushSync:Tt}),!0}return!1}if(!ft&&Lt(je))return;let $t=E.fetchers.get(ye);Ve(ye,$Be(Rt,$t),{flushSync:Tt});let en=new AbortController,yn=v1(n.history,Se,en.signal,Rt);if(ft){let In=await wt(tt,new URL(yn.url).pathname,yn.signal,ye);if(In.type==="aborted")return;if(In.type==="error"){qe(ye,be,In.error,{flushSync:Tt});return}else if(In.matches){if(tt=In.matches,je=ZS(tt,Se),Lt(je))return}else{qe(ye,be,Ll(404,{pathname:Se}),{flushSync:Tt});return}}F.set(ye,en);let kn=G,_n=(await Ae("action",E,yn,[je],tt,ye))[je.route.id];if(yn.signal.aborted){F.get(ye)===en&&F.delete(ye);return}if(f.v7_fetcherPersist&&W.has(ye)){if(C0(_n)||Tc(_n)){Ve(ye,Dg(void 0));return}}else{if(C0(_n))if(F.delete(ye),z>kn){Ve(ye,Dg(void 0));return}else return H.add(ye),Ve(ye,Zw(Rt)),_e(yn,_n,!1,{fetcherSubmission:Rt,preventScrollReset:It});if(Tc(_n)){qe(ye,be,_n.error);return}}if(Qg(_n))throw Ll(400,{type:"defer-action"});let te=E.navigation.location||E.location,de=v1(n.history,te,en.signal),Te=l||s,Oe=E.navigation.state!=="idle"?a0(Te,E.navigation.location,c):E.matches;Wr(Oe,"Didn't find any matches after fetcher action");let Ee=++G;U.set(ye,Ee);let ut=Zw(Rt,_n.data);E.fetchers.set(ye,ut);let[Dt,Bt]=sne(n.history,E,Oe,Rt,te,!1,f.v7_skipActionErrorRevalidation,k,$,B,W,X,H,Te,c,[je.route.id,_n]);Bt.filter(In=>In.key!==ye).forEach(In=>{let zn=In.key,Rn=E.fetchers.get(zn),fn=Zw(void 0,Rn?Rn.data:void 0);E.fetchers.set(zn,fn),Ze(zn),In.controller&&F.set(zn,In.controller)}),le({fetchers:new Map(E.fetchers)});let Zt=()=>Bt.forEach(In=>Ze(In.key));en.signal.addEventListener("abort",Zt);let{loaderResults:dn,fetcherResults:kt}=await Ce(E,Oe,Dt,Bt,de);if(en.signal.aborted)return;en.signal.removeEventListener("abort",Zt),U.delete(ye),F.delete(ye),Bt.forEach(In=>F.delete(In.key));let zt=p3(dn);if(zt)return _e(de,zt.result,!1,{preventScrollReset:It});if(zt=p3(kt),zt)return H.add(zt.key),_e(de,zt.result,!1,{preventScrollReset:It});let{loaderData:En,errors:Bn}=fne(E,Oe,dn,void 0,Bt,kt,K);if(E.fetchers.has(ye)){let In=Dg(_n.data);E.fetchers.set(ye,In)}bt(Ee),E.navigation.state==="loading"&&Ee>z?(Wr(T,"Expected pending action"),A&&A.abort(),me(E.navigation.location,{matches:Oe,loaderData:En,errors:Bn,fetchers:new Map(E.fetchers)})):(le({errors:Bn,loaderData:hne(E.loaderData,En,Oe,Bn),fetchers:new Map(E.fetchers)}),k=!1)}async function ce(ye,be,Se,je,tt,ft,Tt,It,Rt){let Lt=E.fetchers.get(ye);Ve(ye,Zw(Rt,Lt?Lt.data:void 0),{flushSync:Tt});let $t=new AbortController,en=v1(n.history,Se,$t.signal);if(ft){let _n=await wt(tt,new URL(en.url).pathname,en.signal,ye);if(_n.type==="aborted")return;if(_n.type==="error"){qe(ye,be,_n.error,{flushSync:Tt});return}else if(_n.matches)tt=_n.matches,je=ZS(tt,Se);else{qe(ye,be,Ll(404,{pathname:Se}),{flushSync:Tt});return}}F.set(ye,$t);let yn=G,qn=(await Ae("loader",E,en,[je],tt,ye))[je.route.id];if(Qg(qn)&&(qn=await kq(qn,en.signal,!0)||qn),F.get(ye)===$t&&F.delete(ye),!en.signal.aborted){if(W.has(ye)){Ve(ye,Dg(void 0));return}if(C0(qn))if(z>yn){Ve(ye,Dg(void 0));return}else{H.add(ye),await _e(en,qn,!1,{preventScrollReset:It});return}if(Tc(qn)){qe(ye,be,qn.error);return}Wr(!Qg(qn),"Unhandled fetcher deferred data"),Ve(ye,Dg(qn.data))}}async function _e(ye,be,Se,je){let{submission:tt,fetcherSubmission:ft,preventScrollReset:Tt,replace:It}=je===void 0?{}:je;be.response.headers.has("X-Remix-Revalidate")&&(k=!0);let Rt=be.response.headers.get("Location");Wr(Rt,"Expected a Location header on the redirect Response"),Rt=une(Rt,new URL(ye.url),c);let Lt=PE(E.location,Rt,{_isRedirect:!0});if(r){let _n=!1;if(be.response.headers.has("X-Remix-Reload-Document"))_n=!0;else if(Lq.test(Rt)){const te=n.history.createURL(Rt);_n=te.origin!==e.location.origin||aM(te.pathname,c)==null}if(_n){It?e.location.replace(Rt):e.location.assign(Rt);return}}A=null;let $t=It===!0||be.response.headers.has("X-Remix-Replace")?ro.Replace:ro.Push,{formMethod:en,formAction:yn,formEncType:kn}=E.navigation;!tt&&!ft&&en&&yn&&kn&&(tt=vne(E.navigation));let qn=tt||ft;if(yBe.has(be.response.status)&&qn&&Sd(qn.formMethod))await ve($t,Lt,{submission:ha({},qn,{formAction:Rt}),preventScrollReset:Tt||P,enableViewTransition:Se?N:void 0});else{let _n=c5(Lt,tt);await ve($t,Lt,{overrideNavigation:_n,fetcherSubmission:ft,preventScrollReset:Tt||P,enableViewTransition:Se?N:void 0})}}async function Ae(ye,be,Se,je,tt,ft){let Tt,It={};try{Tt=await MBe(u,ye,be,Se,je,tt,ft,o,a)}catch(Rt){return je.forEach(Lt=>{It[Lt.route.id]={type:xi.error,error:Rt}}),It}for(let[Rt,Lt]of Object.entries(Tt))if(OBe(Lt)){let $t=Lt.result;It[Rt]={type:xi.redirect,response:RBe($t,Se,Rt,tt,c,f.v7_relativeSplatPath)}}else It[Rt]=await ABe(Lt);return It}async function Ce(ye,be,Se,je,tt){let ft=ye.matches,Tt=Ae("loader",ye,tt,Se,be,null),It=Promise.all(je.map(async $t=>{if($t.matches&&$t.match&&$t.controller){let yn=(await Ae("loader",ye,v1(n.history,$t.path,$t.controller.signal),[$t.match],$t.matches,$t.key))[$t.match.route.id];return{[$t.key]:yn}}else return Promise.resolve({[$t.key]:{type:xi.error,error:Ll(404,{pathname:$t.path})}})})),Rt=await Tt,Lt=(await It).reduce(($t,en)=>Object.assign($t,en),{});return await Promise.all([LBe(be,Rt,tt.signal,ft,ye.loaderData),kBe(be,Lt,je)]),{loaderResults:Rt,fetcherResults:Lt}}function et(){k=!0,$.push(...Le()),X.forEach((ye,be)=>{F.has(be)&&B.add(be),Ze(be)})}function Ve(ye,be,Se){Se===void 0&&(Se={}),E.fetchers.set(ye,be),le({fetchers:new Map(E.fetchers)},{flushSync:(Se&&Se.flushSync)===!0})}function qe(ye,be,Se,je){je===void 0&&(je={});let tt=o0(E.matches,be);Ge(ye),le({errors:{[tt.route.id]:Se},fetchers:new Map(E.fetchers)},{flushSync:(je&&je.flushSync)===!0})}function dt(ye){return V.set(ye,(V.get(ye)||0)+1),W.has(ye)&&W.delete(ye),E.fetchers.get(ye)||bBe}function Ge(ye){let be=E.fetchers.get(ye);F.has(ye)&&!(be&&be.state==="loading"&&U.has(ye))&&Ze(ye),X.delete(ye),U.delete(ye),H.delete(ye),f.v7_fetcherPersist&&W.delete(ye),B.delete(ye),E.fetchers.delete(ye)}function We(ye){let be=(V.get(ye)||0)-1;be<=0?(V.delete(ye),W.add(ye),f.v7_fetcherPersist||Ge(ye)):V.set(ye,be),le({fetchers:new Map(E.fetchers)})}function Ze(ye){let be=F.get(ye);be&&(be.abort(),F.delete(ye))}function Ie(ye){for(let be of ye){let Se=dt(be),je=Dg(Se.data);E.fetchers.set(be,je)}}function De(){let ye=[],be=!1;for(let Se of H){let je=E.fetchers.get(Se);Wr(je,"Expected fetcher: "+Se),je.state==="loading"&&(H.delete(Se),ye.push(Se),be=!0)}return Ie(ye),be}function bt(ye){let be=[];for(let[Se,je]of U)if(je<ye){let tt=E.fetchers.get(Se);Wr(tt,"Expected fetcher: "+Se),tt.state==="loading"&&(Ze(Se),U.delete(Se),be.push(Se))}return Ie(be),be.length>0}function Ke(ye,be){let Se=E.blockers.get(ye)||Kw;return q.get(ye)!==be&&q.set(ye,be),Se}function mt(ye){E.blockers.delete(ye),q.delete(ye)}function xe(ye,be){let Se=E.blockers.get(ye)||Kw;Wr(Se.state==="unblocked"&&be.state==="blocked"||Se.state==="blocked"&&be.state==="blocked"||Se.state==="blocked"&&be.state==="proceeding"||Se.state==="blocked"&&be.state==="unblocked"||Se.state==="proceeding"&&be.state==="unblocked","Invalid blocker state transition: "+Se.state+" -> "+be.state);let je=new Map(E.blockers);je.set(ye,be),le({blockers:je})}function vt(ye){let{currentLocation:be,nextLocation:Se,historyAction:je}=ye;if(q.size===0)return;q.size>1&&Ox(!1,"A router only supports one blocker at a time");let tt=Array.from(q.entries()),[ft,Tt]=tt[tt.length-1],It=E.blockers.get(ft);if(!(It&&It.state==="proceeding")&&Tt({currentLocation:be,nextLocation:Se,historyAction:je}))return ft}function Ue(ye){let be=Ll(404,{pathname:ye}),Se=l||s,{matches:je,route:tt}=gne(Se);return Le(),{notFoundMatches:je,route:tt,error:be}}function Le(ye){let be=[];return K.forEach((Se,je)=>{(!ye||ye(je))&&(Se.cancel(),be.push(je),K.delete(je))}),be}function Ye(ye,be,Se){if(g=ye,v=be,m=Se||null,!y&&E.navigation===l5){y=!0;let je=Gt(E.location,E.matches);je!=null&&le({restoreScrollPosition:je})}return()=>{g=null,v=null,m=null}}function nt(ye,be){return m&&m(ye,be.map(je=>K$e(je,E.loaderData)))||ye.key}function _t(ye,be){if(g&&v){let Se=nt(ye,be);g[Se]=v()}}function Gt(ye,be){if(g){let Se=nt(ye,be),je=g[Se];if(typeof je=="number")return je}return null}function Ot(ye,be,Se){if(d)if(ye){if(Object.keys(ye[0].params).length>0)return{active:!0,matches:tP(be,Se,c,!0)}}else return{active:!0,matches:tP(be,Se,c,!0)||[]};return{active:!1,matches:null}}async function wt(ye,be,Se,je){if(!d)return{type:"success",matches:ye};let tt=ye;for(;;){let ft=l==null,Tt=l||s,It=o;try{await d({signal:Se,path:be,matches:tt,fetcherKey:je,patch:($t,en)=>{Se.aborted||cne($t,en,Tt,It,a)}})}catch($t){return{type:"error",error:$t,partialMatches:tt}}finally{ft&&!Se.aborted&&(s=[...s])}if(Se.aborted)return{type:"aborted"};let Rt=a0(Tt,be,c);if(Rt)return{type:"success",matches:Rt};let Lt=tP(Tt,be,c,!0);if(!Lt||tt.length===Lt.length&&tt.every(($t,en)=>$t.route.id===Lt[en].route.id))return{type:"success",matches:null};tt=Lt}}function Ft(ye){o={},l=mN(ye,a,void 0,o)}function wn(ye,be){let Se=l==null;cne(ye,be,l||s,o,a),Se&&(s=[...s],le({}))}return M={get basename(){return c},get future(){return f},get state(){return E},get routes(){return s},get window(){return e},initialize:ie,subscribe:ue,enableScrollRestoration:Ye,navigate:J,fetch:ee,revalidate:pe,createHref:ye=>n.history.createHref(ye),encodeLocation:ye=>n.history.encodeLocation(ye),getFetcher:dt,deleteFetcher:We,dispose:oe,getBlocker:Ke,deleteBlocker:mt,patchRoutes:wn,_internalFetchControllers:F,_internalActiveDeferreds:K,_internalSetRoutes:Ft},M}function wBe(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function eG(n,e,r,i,a,o,s,l){let c,u;if(s){c=[];for(let f of e)if(c.push(f),f.route.id===s){u=f;break}}else c=e,u=e[e.length-1];let d=j1e(a||".",G1e(c,o),aM(n.pathname,r)||n.pathname,l==="path");if(a==null&&(d.search=n.search,d.hash=n.hash),(a==null||a===""||a===".")&&u){let f=Fq(d.search);if(u.route.index&&!f)d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index";else if(!u.route.index&&f){let h=new URLSearchParams(d.search),p=h.getAll("index");h.delete("index"),p.filter(m=>m).forEach(m=>h.append("index",m));let g=h.toString();d.search=g?"?"+g:""}}return i&&r!=="/"&&(d.pathname=d.pathname==="/"?r:_m([r,d.pathname])),iM(d)}function ane(n,e,r,i){if(!i||!wBe(i))return{path:r};if(i.formMethod&&!DBe(i.formMethod))return{path:r,error:Ll(405,{method:i.formMethod})};let a=()=>({path:r,error:Ll(400,{type:"invalid-body"})}),o=i.formMethod||"get",s=n?o.toUpperCase():o.toLowerCase(),l=X1e(r);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!Sd(s))return a();let h=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((p,g)=>{let[m,v]=g;return""+p+m+"="+v+`
`},""):String(i.body);return{path:r,submission:{formMethod:s,formAction:l,formEncType:i.formEncType,formData:void 0,json:void 0,text:h}}}else if(i.formEncType==="application/json"){if(!Sd(s))return a();try{let h=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:r,submission:{formMethod:s,formAction:l,formEncType:i.formEncType,formData:void 0,json:h,text:void 0}}}catch{return a()}}}Wr(typeof FormData=="function","FormData is not available in this environment");let c,u;if(i.formData)c=nG(i.formData),u=i.formData;else if(i.body instanceof FormData)c=nG(i.body),u=i.body;else if(i.body instanceof URLSearchParams)c=i.body,u=dne(c);else if(i.body==null)c=new URLSearchParams,u=new FormData;else try{c=new URLSearchParams(i.body),u=dne(c)}catch{return a()}let d={formMethod:s,formAction:l,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(Sd(d.formMethod))return{path:r,submission:d};let f=rv(r);return e&&f.search&&Fq(f.search)&&c.append("index",""),f.search="?"+c,{path:iM(f),submission:d}}function one(n,e,r){r===void 0&&(r=!1);let i=n.findIndex(a=>a.route.id===e);return i>=0?n.slice(0,r?i+1:i):n}function sne(n,e,r,i,a,o,s,l,c,u,d,f,h,p,g,m){let v=m?Tc(m[1])?m[1].error:m[1].data:void 0,y=n.createURL(e.location),b=n.createURL(a),x=r;o&&e.errors?x=one(r,Object.keys(e.errors)[0],!0):m&&Tc(m[1])&&(x=one(r,m[0]));let _=m?m[1].statusCode:void 0,S=s&&_&&_>=400,M=x.filter((T,P)=>{let{route:A}=T;if(A.lazy)return!0;if(A.loader==null)return!1;if(o)return tG(A,e.loaderData,e.errors);if(SBe(e.loaderData,e.matches[P],T)||c.some(I=>I===T.route.id))return!0;let N=e.matches[P],O=T;return lne(T,ha({currentUrl:y,currentParams:N.params,nextUrl:b,nextParams:O.params},i,{actionResult:v,actionStatus:_,defaultShouldRevalidate:S?!1:l||y.pathname+y.search===b.pathname+b.search||y.search!==b.search||q1e(N,O)}))}),E=[];return f.forEach((T,P)=>{if(o||!r.some(D=>D.route.id===T.routeId)||d.has(P))return;let A=a0(p,T.path,g);if(!A){E.push({key:P,routeId:T.routeId,path:T.path,matches:null,match:null,controller:null});return}let N=e.fetchers.get(P),O=ZS(A,T.path),I=!1;h.has(P)?I=!1:u.has(P)?(u.delete(P),I=!0):N&&N.state!=="idle"&&N.data===void 0?I=l:I=lne(O,ha({currentUrl:y,currentParams:e.matches[e.matches.length-1].params,nextUrl:b,nextParams:r[r.length-1].params},i,{actionResult:v,actionStatus:_,defaultShouldRevalidate:S?!1:l})),I&&E.push({key:P,routeId:T.routeId,path:T.path,matches:A,match:O,controller:new AbortController})}),[M,E]}function tG(n,e,r){if(n.lazy)return!0;if(!n.loader)return!1;let i=e!=null&&e[n.id]!==void 0,a=r!=null&&r[n.id]!==void 0;return!i&&a?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!a}function SBe(n,e,r){let i=!e||r.route.id!==e.route.id,a=n[r.route.id]===void 0;return i||a}function q1e(n,e){let r=n.route.path;return n.pathname!==e.pathname||r!=null&&r.endsWith("*")&&n.params["*"]!==e.params["*"]}function lne(n,e){if(n.route.shouldRevalidate){let r=n.route.shouldRevalidate(e);if(typeof r=="boolean")return r}return e.defaultShouldRevalidate}function cne(n,e,r,i,a){var o;let s;if(n){let u=i[n];Wr(u,"No route found to patch children into: routeId = "+n),u.children||(u.children=[]),s=u.children}else s=r;let l=e.filter(u=>!s.some(d=>Y1e(u,d))),c=mN(l,a,[n||"_","patch",String(((o=s)==null?void 0:o.length)||"0")],i);s.push(...c)}function Y1e(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((r,i)=>{var a;return(a=e.children)==null?void 0:a.some(o=>Y1e(r,o))}):!1}async function EBe(n,e,r){if(!n.lazy)return;let i=await n.lazy();if(!n.lazy)return;let a=r[n.id];Wr(a,"No route found in manifest");let o={};for(let s in i){let c=a[s]!==void 0&&s!=="hasErrorBoundary";Ox(!c,'Route "'+a.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!c&&!Y$e.has(s)&&(o[s]=i[s])}Object.assign(a,o),Object.assign(a,ha({},e(a),{lazy:void 0}))}async function CBe(n){let{matches:e}=n,r=e.filter(a=>a.shouldLoad);return(await Promise.all(r.map(a=>a.resolve()))).reduce((a,o,s)=>Object.assign(a,{[r[s].route.id]:o}),{})}async function MBe(n,e,r,i,a,o,s,l,c,u){let d=o.map(p=>p.route.lazy?EBe(p.route,c,l):void 0),f=o.map((p,g)=>{let m=d[g],v=a.some(b=>b.route.id===p.route.id);return ha({},p,{shouldLoad:v,resolve:async b=>(b&&i.method==="GET"&&(p.route.lazy||p.route.loader)&&(v=!0),v?TBe(e,i,p,m,b,u):Promise.resolve({type:xi.data,result:void 0}))})}),h=await n({matches:f,request:i,params:o[0].params,fetcherKey:s,context:u});try{await Promise.all(d)}catch{}return h}async function TBe(n,e,r,i,a,o){let s,l,c=u=>{let d,f=new Promise((g,m)=>d=m);l=()=>d(),e.signal.addEventListener("abort",l);let h=g=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+r.route.id+"]"))):u({request:e,params:r.params,context:o},...g!==void 0?[g]:[]),p=(async()=>{try{return{type:"data",result:await(a?a(m=>h(m)):h())}}catch(g){return{type:"error",result:g}}})();return Promise.race([p,f])};try{let u=r.route[n];if(i)if(u){let d,[f]=await Promise.all([c(u).catch(h=>{d=h}),i]);if(d!==void 0)throw d;s=f}else if(await i,u=r.route[n],u)s=await c(u);else if(n==="action"){let d=new URL(e.url),f=d.pathname+d.search;throw Ll(405,{method:e.method,pathname:f,routeId:r.route.id})}else return{type:xi.data,result:void 0};else if(u)s=await c(u);else{let d=new URL(e.url),f=d.pathname+d.search;throw Ll(404,{pathname:f})}Wr(s.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:xi.error,result:u}}finally{l&&e.signal.removeEventListener("abort",l)}return s}async function ABe(n){let{result:e,type:r}=n;if(K1e(e)){let f;try{let h=e.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?e.body==null?f=null:f=await e.json():f=await e.text()}catch(h){return{type:xi.error,error:h}}return r===xi.error?{type:xi.error,error:new vN(e.status,e.statusText,f),statusCode:e.status,headers:e.headers}:{type:xi.data,data:f,statusCode:e.status,headers:e.headers}}if(r===xi.error){if(mne(e)){var i,a;if(e.data instanceof Error){var o,s;return{type:xi.error,error:e.data,statusCode:(o=e.init)==null?void 0:o.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}}return{type:xi.error,error:new vN(((i=e.init)==null?void 0:i.status)||500,void 0,e.data),statusCode:NE(e)?e.status:void 0,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}}return{type:xi.error,error:e,statusCode:NE(e)?e.status:void 0}}if(IBe(e)){var l,c;return{type:xi.deferred,deferredData:e,statusCode:(l=e.init)==null?void 0:l.status,headers:((c=e.init)==null?void 0:c.headers)&&new Headers(e.init.headers)}}if(mne(e)){var u,d;return{type:xi.data,data:e.data,statusCode:(u=e.init)==null?void 0:u.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}}return{type:xi.data,data:e}}function RBe(n,e,r,i,a,o){let s=n.headers.get("Location");if(Wr(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!Lq.test(s)){let l=i.slice(0,i.findIndex(c=>c.route.id===r)+1);s=eG(new URL(e.url),l,a,!0,s,o),n.headers.set("Location",s)}return n}function une(n,e,r){if(Lq.test(n)){let i=n,a=i.startsWith("//")?new URL(e.protocol+i):new URL(i),o=aM(a.pathname,r)!=null;if(a.origin===e.origin&&o)return a.pathname+a.search+a.hash}return n}function v1(n,e,r,i){let a=n.createURL(X1e(e)).toString(),o={signal:r};if(i&&Sd(i.formMethod)){let{formMethod:s,formEncType:l}=i;o.method=s.toUpperCase(),l==="application/json"?(o.headers=new Headers({"Content-Type":l}),o.body=JSON.stringify(i.json)):l==="text/plain"?o.body=i.text:l==="application/x-www-form-urlencoded"&&i.formData?o.body=nG(i.formData):o.body=i.formData}return new Request(a,o)}function nG(n){let e=new URLSearchParams;for(let[r,i]of n.entries())e.append(r,typeof i=="string"?i:i.name);return e}function dne(n){let e=new FormData;for(let[r,i]of n.entries())e.append(r,i);return e}function PBe(n,e,r,i,a){let o={},s=null,l,c=!1,u={},d=r&&Tc(r[1])?r[1].error:void 0;return n.forEach(f=>{if(!(f.route.id in e))return;let h=f.route.id,p=e[h];if(Wr(!C0(p),"Cannot handle redirect results in processLoaderData"),Tc(p)){let g=p.error;d!==void 0&&(g=d,d=void 0),s=s||{};{let m=o0(n,h);s[m.route.id]==null&&(s[m.route.id]=g)}o[h]=void 0,c||(c=!0,l=NE(p.error)?p.error.status:500),p.headers&&(u[h]=p.headers)}else Qg(p)?(i.set(h,p.deferredData),o[h]=p.deferredData.data,p.statusCode!=null&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(u[h]=p.headers)):(o[h]=p.data,p.statusCode&&p.statusCode!==200&&!c&&(l=p.statusCode),p.headers&&(u[h]=p.headers))}),d!==void 0&&r&&(s={[r[0]]:d},o[r[0]]=void 0),{loaderData:o,errors:s,statusCode:l||200,loaderHeaders:u}}function fne(n,e,r,i,a,o,s){let{loaderData:l,errors:c}=PBe(e,r,i,s);return a.forEach(u=>{let{key:d,match:f,controller:h}=u,p=o[d];if(Wr(p,"Did not find corresponding fetcher result"),!(h&&h.signal.aborted))if(Tc(p)){let g=o0(n.matches,f==null?void 0:f.route.id);c&&c[g.route.id]||(c=ha({},c,{[g.route.id]:p.error})),n.fetchers.delete(d)}else if(C0(p))Wr(!1,"Unhandled fetcher revalidation redirect");else if(Qg(p))Wr(!1,"Unhandled fetcher deferred data");else{let g=Dg(p.data);n.fetchers.set(d,g)}}),{loaderData:l,errors:c}}function hne(n,e,r,i){let a=ha({},e);for(let o of r){let s=o.route.id;if(e.hasOwnProperty(s)?e[s]!==void 0&&(a[s]=e[s]):n[s]!==void 0&&o.route.loader&&(a[s]=n[s]),i&&i.hasOwnProperty(s))break}return a}function pne(n){return n?Tc(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function o0(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function gne(n){let e=n.length===1?n[0]:n.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Ll(n,e){let{pathname:r,routeId:i,method:a,type:o,message:s}=e===void 0?{}:e,l="Unknown Server Error",c="Unknown @remix-run/router error";return n===400?(l="Bad Request",a&&r&&i?c="You made a "+a+' request to "'+r+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":o==="defer-action"?c="defer() is not supported in actions":o==="invalid-body"&&(c="Unable to encode submission body")):n===403?(l="Forbidden",c='Route "'+i+'" does not match URL "'+r+'"'):n===404?(l="Not Found",c='No route matches URL "'+r+'"'):n===405&&(l="Method Not Allowed",a&&r&&i?c="You made a "+a.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":a&&(c='Invalid request method "'+a.toUpperCase()+'"')),new vN(n||500,l,new Error(c),!0)}function p3(n){let e=Object.entries(n);for(let r=e.length-1;r>=0;r--){let[i,a]=e[r];if(C0(a))return{key:i,result:a}}}function X1e(n){let e=typeof n=="string"?rv(n):n;return iM(ha({},e,{hash:""}))}function NBe(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function OBe(n){return K1e(n.result)&&vBe.has(n.result.status)}function Qg(n){return n.type===xi.deferred}function Tc(n){return n.type===xi.error}function C0(n){return(n&&n.type)===xi.redirect}function mne(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function IBe(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function K1e(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function DBe(n){return mBe.has(n.toLowerCase())}function Sd(n){return pBe.has(n.toLowerCase())}async function LBe(n,e,r,i,a){let o=Object.entries(e);for(let s=0;s<o.length;s++){let[l,c]=o[s],u=n.find(h=>(h==null?void 0:h.route.id)===l);if(!u)continue;let d=i.find(h=>h.route.id===u.route.id),f=d!=null&&!q1e(d,u)&&(a&&a[u.route.id])!==void 0;Qg(c)&&f&&await kq(c,r,!1).then(h=>{h&&(e[l]=h)})}}async function kBe(n,e,r){for(let i=0;i<r.length;i++){let{key:a,routeId:o,controller:s}=r[i],l=e[a];n.find(u=>(u==null?void 0:u.route.id)===o)&&Qg(l)&&(Wr(s,"Expected an AbortController for revalidating fetcher deferred result"),await kq(l,s.signal,!0).then(u=>{u&&(e[a]=u)}))}}async function kq(n,e,r){if(r===void 0&&(r=!1),!await n.deferredData.resolveData(e)){if(r)try{return{type:xi.data,data:n.deferredData.unwrappedData}}catch(a){return{type:xi.error,error:a}}return{type:xi.data,data:n.deferredData.data}}}function Fq(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function ZS(n,e){let r=typeof e=="string"?rv(e).search:e.search;if(n[n.length-1].route.index&&Fq(r||""))return n[n.length-1];let i=V1e(n);return i[i.length-1]}function vne(n){let{formMethod:e,formAction:r,formEncType:i,text:a,formData:o,json:s}=n;if(!(!e||!r||!i)){if(a!=null)return{formMethod:e,formAction:r,formEncType:i,formData:void 0,json:void 0,text:a};if(o!=null)return{formMethod:e,formAction:r,formEncType:i,formData:o,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:r,formEncType:i,formData:void 0,json:s,text:void 0}}}function c5(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function FBe(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Zw(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function $Be(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Dg(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function BBe(n,e){try{let r=n.sessionStorage.getItem(W1e);if(r){let i=JSON.parse(r);for(let[a,o]of Object.entries(i||{}))o&&Array.isArray(o)&&e.set(a,new Set(o||[]))}}catch{}}function zBe(n,e){if(e.size>0){let r={};for(let[i,a]of e)r[i]=[...a];try{n.sessionStorage.setItem(W1e,JSON.stringify(r))}catch(i){Ox(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yN(){return yN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},yN.apply(this,arguments)}const FI=C.createContext(null),Z1e=C.createContext(null),$I=C.createContext(null),$q=C.createContext(null),R_=C.createContext({outlet:null,matches:[],isDataRoute:!1}),Q1e=C.createContext(null);function BI(){return C.useContext($q)!=null}function Bq(){return BI()||Wr(!1),C.useContext($q).location}function J1e(n){C.useContext($I).static||C.useLayoutEffect(n)}function zq(){let{isDataRoute:n}=C.useContext(R_);return n?QBe():UBe()}function UBe(){BI()||Wr(!1);let n=C.useContext(FI),{basename:e,future:r,navigator:i}=C.useContext($I),{matches:a}=C.useContext(R_),{pathname:o}=Bq(),s=JSON.stringify(G1e(a,r.v7_relativeSplatPath)),l=C.useRef(!1);return J1e(()=>{l.current=!0}),C.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){i.go(u);return}let f=j1e(u,JSON.parse(s),o,d.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:_m([e,f.pathname])),(d.replace?i.replace:i.push)(f,d.state,d)},[e,i,s,o,n])}function VBe(n,e,r,i){BI()||Wr(!1);let{navigator:a,static:o}=C.useContext($I),{matches:s}=C.useContext(R_),l=s[s.length-1],c=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let d=Bq(),f;f=d;let h=f.pathname||"/",p=h;if(u!=="/"){let v=u.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=!o&&r&&r.matches&&r.matches.length>0?r.matches:a0(n,{pathname:p});return qBe(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:_m([u,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?u:_m([u,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,r,i)}function GBe(){let n=ZBe(),e=NE(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),r=n instanceof Error?n.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),r?C.createElement("pre",{style:a},r):null,null)}const jBe=C.createElement(GBe,null);class HBe extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?C.createElement(R_.Provider,{value:this.props.routeContext},C.createElement(Q1e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WBe(n){let{routeContext:e,match:r,children:i}=n,a=C.useContext(FI);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),C.createElement(R_.Provider,{value:e},i)}function qBe(n,e,r,i){var a;if(e===void 0&&(e=[]),r===void 0&&(r=null),i===void 0&&(i=null),n==null){var o;if(!r)return null;if(r.errors)n=r.matches;else if((o=i)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)n=r.matches;else return null}let s=n,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=s.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Wr(!1),s=s.slice(0,Math.min(s.length,d+1))}let c=!1,u=-1;if(r&&i&&i.v7_partialHydration)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:p}=r,g=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((d,f,h)=>{let p,g=!1,m=null,v=null;r&&(p=l&&f.route.id?l[f.route.id]:void 0,m=f.route.errorElement||jBe,c&&(u<0&&h===0?(JBe("route-fallback"),g=!0,v=null):u===h&&(g=!0,v=f.route.hydrateFallbackElement||null)));let y=e.concat(s.slice(0,h+1)),b=()=>{let x;return p?x=m:g?x=v:f.route.Component?x=C.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=d,C.createElement(WBe,{match:f,routeContext:{outlet:d,matches:y,isDataRoute:r!=null},children:x})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?C.createElement(HBe,{location:r.location,revalidation:r.revalidation,component:m,error:p,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var ebe=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(ebe||{}),tbe=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(tbe||{});function YBe(n){let e=C.useContext(FI);return e||Wr(!1),e}function XBe(n){let e=C.useContext(Z1e);return e||Wr(!1),e}function KBe(n){let e=C.useContext(R_);return e||Wr(!1),e}function nbe(n){let e=KBe(),r=e.matches[e.matches.length-1];return r.route.id||Wr(!1),r.route.id}function ZBe(){var n;let e=C.useContext(Q1e),r=XBe(tbe.UseRouteError),i=nbe();return e!==void 0?e:(n=r.errors)==null?void 0:n[i]}function QBe(){let{router:n}=YBe(ebe.UseNavigateStable),e=nbe(),r=C.useRef(!1);return J1e(()=>{r.current=!0}),C.useCallback(function(a,o){o===void 0&&(o={}),r.current&&(typeof a=="number"?n.navigate(a):n.navigate(a,yN({fromRouteId:e},o)))},[n,e])}const yne={};function JBe(n,e,r){yne[n]||(yne[n]=!0)}function e9e(n,e){n==null||n.v7_startTransition,(n==null?void 0:n.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function t9e(n){let{basename:e="/",children:r=null,location:i,navigationType:a=ro.Pop,navigator:o,static:s=!1,future:l}=n;BI()&&Wr(!1);let c=e.replace(/^\/*/,"/"),u=C.useMemo(()=>({basename:c,navigator:o,static:s,future:yN({v7_relativeSplatPath:!1},l)}),[c,l,o,s]);typeof i=="string"&&(i=rv(i));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:g="default"}=i,m=C.useMemo(()=>{let v=aM(d,c);return v==null?null:{location:{pathname:v,search:f,hash:h,state:p,key:g},navigationType:a}},[c,d,f,h,p,g,a]);return m==null?null:C.createElement($I.Provider,{value:u},C.createElement($q.Provider,{children:r,value:m}))}new Promise(()=>{});function n9e(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:C.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:C.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:C.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bN(){return bN=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},bN.apply(this,arguments)}const r9e="6";try{window.__reactRouterVersion=r9e}catch{}function i9e(n,e){return _Be({basename:void 0,future:bN({},void 0,{v7_prependBasename:!0}),history:H$e({window:void 0}),hydrationData:a9e(),routes:n,mapRouteProperties:n9e,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function a9e(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=bN({},e,{errors:o9e(e.errors)})),e}function o9e(n){if(!n)return null;let e=Object.entries(n),r={};for(let[i,a]of e)if(a&&a.__type==="RouteErrorResponse")r[i]=new vN(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let o=window[a.__subType];if(typeof o=="function")try{let s=new o(a.message);s.stack="",r[i]=s}catch{}}if(r[i]==null){let o=new Error(a.message);o.stack="",r[i]=o}}else r[i]=a;return r}const s9e=C.createContext({isTransitioning:!1}),l9e=C.createContext(new Map),c9e="startTransition",bne=ny[c9e],u9e="flushSync",xne=$1e[u9e];function d9e(n){bne?bne(n):n()}function Qw(n){xne?xne(n):n()}class f9e{constructor(){this.status="pending",this.promise=new Promise((e,r)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",r(i))}})}}function h9e(n){let{fallbackElement:e,router:r,future:i}=n,[a,o]=C.useState(r.state),[s,l]=C.useState(),[c,u]=C.useState({isTransitioning:!1}),[d,f]=C.useState(),[h,p]=C.useState(),[g,m]=C.useState(),v=C.useRef(new Map),{v7_startTransition:y}=i||{},b=C.useCallback(T=>{y?d9e(T):T()},[y]),x=C.useCallback((T,P)=>{let{deletedFetchers:A,flushSync:N,viewTransitionOpts:O}=P;T.fetchers.forEach((D,k)=>{D.data!==void 0&&v.current.set(k,D.data)}),A.forEach(D=>v.current.delete(D));let I=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!O||I){N?Qw(()=>o(T)):b(()=>o(T));return}if(N){Qw(()=>{h&&(d&&d.resolve(),h.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:O.currentLocation,nextLocation:O.nextLocation})});let D=r.window.document.startViewTransition(()=>{Qw(()=>o(T))});D.finished.finally(()=>{Qw(()=>{f(void 0),p(void 0),l(void 0),u({isTransitioning:!1})})}),Qw(()=>p(D));return}h?(d&&d.resolve(),h.skipTransition(),m({state:T,currentLocation:O.currentLocation,nextLocation:O.nextLocation})):(l(T),u({isTransitioning:!0,flushSync:!1,currentLocation:O.currentLocation,nextLocation:O.nextLocation}))},[r.window,h,d,v,b]);C.useLayoutEffect(()=>r.subscribe(x),[r,x]),C.useEffect(()=>{c.isTransitioning&&!c.flushSync&&f(new f9e)},[c]),C.useEffect(()=>{if(d&&s&&r.window){let T=s,P=d.promise,A=r.window.document.startViewTransition(async()=>{b(()=>o(T)),await P});A.finished.finally(()=>{f(void 0),p(void 0),l(void 0),u({isTransitioning:!1})}),p(A)}},[b,s,d,r.window]),C.useEffect(()=>{d&&s&&a.location.key===s.location.key&&d.resolve()},[d,h,a.location,s]),C.useEffect(()=>{!c.isTransitioning&&g&&(l(g.state),u({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),m(void 0))},[c.isTransitioning,g]),C.useEffect(()=>{},[]);let _=C.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:T=>r.navigate(T),push:(T,P,A)=>r.navigate(T,{state:P,preventScrollReset:A==null?void 0:A.preventScrollReset}),replace:(T,P,A)=>r.navigate(T,{replace:!0,state:P,preventScrollReset:A==null?void 0:A.preventScrollReset})}),[r]),S=r.basename||"/",M=C.useMemo(()=>({router:r,navigator:_,static:!1,basename:S}),[r,_,S]),E=C.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return C.useEffect(()=>e9e(i,r.future),[i,r.future]),C.createElement(C.Fragment,null,C.createElement(FI.Provider,{value:M},C.createElement(Z1e.Provider,{value:a},C.createElement(l9e.Provider,{value:v.current},C.createElement(s9e.Provider,{value:c},C.createElement(t9e,{basename:S,location:a.location,navigationType:a.historyAction,navigator:_,future:E},a.initialized||r.future.v7_partialHydration?C.createElement(p9e,{routes:r.routes,future:r.future,state:a}):e))))),null)}const p9e=C.memo(g9e);function g9e(n){let{routes:e,future:r,state:i}=n;return VBe(e,void 0,i,r)}var _ne;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(_ne||(_ne={}));var wne;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(wne||(wne={}));const nr=n=>typeof n=="string",Jw=()=>{let n,e;const r=new Promise((i,a)=>{n=i,e=a});return r.resolve=n,r.reject=e,r},Sne=n=>n==null?"":""+n,m9e=(n,e,r)=>{n.forEach(i=>{e[i]&&(r[i]=e[i])})},v9e=/###/g,Ene=n=>n&&n.indexOf("###")>-1?n.replace(v9e,"."):n,Cne=n=>!n||nr(n),L2=(n,e,r)=>{const i=nr(e)?e.split("."):e;let a=0;for(;a<i.length-1;){if(Cne(n))return{};const o=Ene(i[a]);!n[o]&&r&&(n[o]=new r),Object.prototype.hasOwnProperty.call(n,o)?n=n[o]:n={},++a}return Cne(n)?{}:{obj:n,k:Ene(i[a])}},Mne=(n,e,r)=>{const{obj:i,k:a}=L2(n,e,Object);if(i!==void 0||e.length===1){i[a]=r;return}let o=e[e.length-1],s=e.slice(0,e.length-1),l=L2(n,s,Object);for(;l.obj===void 0&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),l=L2(n,s,Object),l&&l.obj&&typeof l.obj[`${l.k}.${o}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${o}`]=r},y9e=(n,e,r,i)=>{const{obj:a,k:o}=L2(n,e,Object);a[o]=a[o]||[],a[o].push(r)},xN=(n,e)=>{const{obj:r,k:i}=L2(n,e);if(r)return r[i]},b9e=(n,e,r)=>{const i=xN(n,r);return i!==void 0?i:xN(e,r)},rbe=(n,e,r)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?nr(n[i])||n[i]instanceof String||nr(e[i])||e[i]instanceof String?r&&(n[i]=e[i]):rbe(n[i],e[i],r):n[i]=e[i]);return n},y1=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var x9e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const _9e=n=>nr(n)?n.replace(/[&<>"'\/]/g,e=>x9e[e]):n;class w9e{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const r=this.regExpMap.get(e);if(r!==void 0)return r;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const S9e=[" ",",","?","!",";"],E9e=new w9e(20),C9e=(n,e,r)=>{e=e||"",r=r||"";const i=S9e.filter(s=>e.indexOf(s)<0&&r.indexOf(s)<0);if(i.length===0)return!0;const a=E9e.getRegExp(`(${i.map(s=>s==="?"?"\\?":s).join("|")})`);let o=!a.test(n);if(!o){const s=n.indexOf(r);s>0&&!a.test(n.substring(0,s))&&(o=!0)}return o},rG=function(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return n[e];const i=e.split(r);let a=n;for(let o=0;o<i.length;){if(!a||typeof a!="object")return;let s,l="";for(let c=o;c<i.length;++c)if(c!==o&&(l+=r),l+=i[c],s=a[l],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&c<i.length-1)continue;o+=c-o+1;break}a=s}return a},_N=n=>n&&n.replace("_","-"),M9e={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console&&console[n]&&console[n].apply(console,e)}};class wN{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,r)}init(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=e||M9e,this.options=r,this.debug=r.debug}log(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return this.forward(r,"log","",!0)}warn(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return this.forward(r,"warn","",!0)}error(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return this.forward(r,"error","")}deprecate(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}forward(e,r,i,a){return a&&!this.debug?null:(nr(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[r](e))}create(e){return new wN(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new wN(this.logger,e)}}var Ff=new wN;let zI=class{constructor(){this.observers={}}on(e,r){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const a=this.observers[i].get(r)||0;this.observers[i].set(r,a+1)}),this}off(e,r){if(this.observers[e]){if(!r){delete this.observers[e];return}this.observers[e].delete(r)}}emit(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(s=>{let[l,c]=s;for(let u=0;u<c;u++)l(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(s=>{let[l,c]=s;for(let u=0;u<c;u++)l.apply(l,[e,...i])})}};class Tne extends zI{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const r=this.options.ns.indexOf(e);r>-1&&this.options.ns.splice(r,1)}getResource(e,r,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,s=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,r],i&&(Array.isArray(i)?l.push(...i):nr(i)&&o?l.push(...i.split(o)):l.push(i)));const c=xN(this.data,l);return!c&&!r&&!i&&e.indexOf(".")>-1&&(e=l[0],r=l[1],i=l.slice(2).join(".")),c||!s||!nr(i)?c:rG(this.data&&this.data[e]&&this.data[e][r],i,o)}addResource(e,r,i,a){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let l=[e,r];i&&(l=l.concat(s?i.split(s):i)),e.indexOf(".")>-1&&(l=e.split("."),a=r,r=l[1]),this.addNamespaces(r),Mne(this.data,l,a),o.silent||this.emit("added",e,r,i,a)}addResources(e,r,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const o in i)(nr(i[o])||Array.isArray(i[o]))&&this.addResource(e,r,o,i[o],{silent:!0});a.silent||this.emit("added",e,r,i)}addResourceBundle(e,r,i,a,o){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[e,r];e.indexOf(".")>-1&&(l=e.split("."),a=i,i=r,r=l[1]),this.addNamespaces(r);let c=xN(this.data,l)||{};s.skipCopy||(i=JSON.parse(JSON.stringify(i))),a?rbe(c,i,o):c={...c,...i},Mne(this.data,l,c),s.silent||this.emit("added",e,r,i)}removeResourceBundle(e,r){this.hasResourceBundle(e,r)&&delete this.data[e][r],this.removeNamespaces(r),this.emit("removed",e,r)}hasResourceBundle(e,r){return this.getResource(e,r)!==void 0}getResourceBundle(e,r){return r||(r=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,r)}:this.getResource(e,r)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const r=this.getDataByLanguage(e);return!!(r&&Object.keys(r)||[]).find(a=>r[a]&&Object.keys(r[a]).length>0)}toJSON(){return this.data}}var ibe={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,r,i,a){return n.forEach(o=>{this.processors[o]&&(e=this.processors[o].process(e,r,i,a))}),e}};const Ane={};class SN extends zI{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),m9e(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ff.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const i=this.resolve(e,r);return i&&i.res!==void 0}extractFromKey(e,r){let i=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let o=r.ns||this.options.defaultNS||[];const s=i&&e.indexOf(i)>-1,l=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!C9e(e,i,a);if(s&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:nr(o)?[o]:o};const u=e.split(i);(i!==a||i===a&&this.options.ns.indexOf(u[0])>-1)&&(o=u.shift()),e=u.join(a)}return{key:e,namespaces:nr(o)?[o]:o}}translate(e,r,i){if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const a=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:s,namespaces:l}=this.extractFromKey(e[e.length-1],r),c=l[l.length-1],u=r.lng||this.language,d=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(d){const _=r.nsSeparator||this.options.nsSeparator;return a?{res:`${c}${_}${s}`,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(r)}:`${c}${_}${s}`}return a?{res:s,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(r)}:s}const f=this.resolve(e,r);let h=f&&f.res;const p=f&&f.usedKey||s,g=f&&f.exactUsedKey||s,m=Object.prototype.toString.apply(h),v=["[object Number]","[object Function]","[object RegExp]"],y=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,x=!nr(h)&&typeof h!="boolean"&&typeof h!="number";if(b&&h&&x&&v.indexOf(m)<0&&!(nr(y)&&Array.isArray(h))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const _=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,h,{...r,ns:l}):`key '${s} (${this.language})' returned an object instead of string.`;return a?(f.res=_,f.usedParams=this.getUsedParamsDetails(r),f):_}if(o){const _=Array.isArray(h),S=_?[]:{},M=_?g:p;for(const E in h)if(Object.prototype.hasOwnProperty.call(h,E)){const T=`${M}${o}${E}`;S[E]=this.translate(T,{...r,joinArrays:!1,ns:l}),S[E]===T&&(S[E]=h[E])}h=S}}else if(b&&nr(y)&&Array.isArray(h))h=h.join(y),h&&(h=this.extendTranslation(h,e,r,i));else{let _=!1,S=!1;const M=r.count!==void 0&&!nr(r.count),E=SN.hasDefaultValue(r),T=M?this.pluralResolver.getSuffix(u,r.count,r):"",P=r.ordinal&&M?this.pluralResolver.getSuffix(u,r.count,{ordinal:!1}):"",A=M&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),N=A&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${T}`]||r[`defaultValue${P}`]||r.defaultValue;!this.isValidLookup(h)&&E&&(_=!0,h=N),this.isValidLookup(h)||(S=!0,h=s);const I=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&S?void 0:h,D=E&&N!==h&&this.options.updateMissing;if(S||_||D){if(this.logger.log(D?"updateKey":"missingKey",u,c,s,D?N:h),o){const F=this.resolve(s,{...r,keySeparator:!1});F&&F.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let k=[];const $=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&$&&$[0])for(let F=0;F<$.length;F++)k.push($[F]);else this.options.saveMissingTo==="all"?k=this.languageUtils.toResolveHierarchy(r.lng||this.language):k.push(r.lng||this.language);const B=(F,G,z)=>{const U=E&&z!==h?z:I;this.options.missingKeyHandler?this.options.missingKeyHandler(F,c,G,U,D,r):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(F,c,G,U,D,r),this.emit("missingKey",F,c,G,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&M?k.forEach(F=>{const G=this.pluralResolver.getSuffixes(F,r);A&&r[`defaultValue${this.options.pluralSeparator}zero`]&&G.indexOf(`${this.options.pluralSeparator}zero`)<0&&G.push(`${this.options.pluralSeparator}zero`),G.forEach(z=>{B([F],s+z,r[`defaultValue${z}`]||N)})}):B(k,s,N))}h=this.extendTranslation(h,e,r,f,i),S&&h===s&&this.options.appendNamespaceToMissingKey&&(h=`${c}:${s}`),(S||_)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${s}`:s,_?h:void 0):h=this.options.parseMissingKeyHandler(h))}return a?(f.res=h,f.usedParams=this.getUsedParamsDetails(r),f):h}extendTranslation(e,r,i,a,o){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const u=nr(e)&&(i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(u){const h=e.match(this.interpolator.nestingRegexp);d=h&&h.length}let f=i.replace&&!nr(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,i.lng||this.language||a.usedLng,i),u){const h=e.match(this.interpolator.nestingRegexp),p=h&&h.length;d<p&&(i.nest=!1)}!i.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(i.lng=this.language||a.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];return o&&o[0]===p[0]&&!i.context?(s.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${r[0]}`),null):s.translate(...p,r)},i)),i.interpolation&&this.interpolator.reset()}const l=i.postProcess||this.options.postProcess,c=nr(l)?[l]:l;return e!=null&&c&&c.length&&i.applyPostProcessor!==!1&&(e=ibe.handle(c,e,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,a,o,s,l;return nr(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(i))return;const u=this.extractFromKey(c,r),d=u.key;a=d;let f=u.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const h=r.count!==void 0&&!nr(r.count),p=h&&!r.ordinal&&r.count===0&&this.pluralResolver.shouldUseIntlApi(),g=r.context!==void 0&&(nr(r.context)||typeof r.context=="number")&&r.context!=="",m=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);f.forEach(v=>{this.isValidLookup(i)||(l=v,!Ane[`${m[0]}-${v}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(l)&&(Ane[`${m[0]}-${v}`]=!0,this.logger.warn(`key "${a}" for languages "${m.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(y=>{if(this.isValidLookup(i))return;s=y;const b=[d];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(b,d,y,v,r);else{let _;h&&(_=this.pluralResolver.getSuffix(y,r.count,r));const S=`${this.options.pluralSeparator}zero`,M=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(b.push(d+_),r.ordinal&&_.indexOf(M)===0&&b.push(d+_.replace(M,this.options.pluralSeparator)),p&&b.push(d+S)),g){const E=`${d}${this.options.contextSeparator}${r.context}`;b.push(E),h&&(b.push(E+_),r.ordinal&&_.indexOf(M)===0&&b.push(E+_.replace(M,this.options.pluralSeparator)),p&&b.push(E+S))}}let x;for(;x=b.pop();)this.isValidLookup(i)||(o=x,i=this.getResource(y,v,x,r))}))})}),{res:i,usedKey:a,exactUsedKey:o,usedLng:s,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,r,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,r,i,a):this.resourceStore.getResource(e,r,i,a)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!nr(e.replace);let a=i?e.replace:e;if(i&&typeof e.count<"u"&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!i){a={...a};for(const o of r)delete a[o]}return a}static hasDefaultValue(e){const r="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&r===i.substring(0,r.length)&&e[i]!==void 0)return!0;return!1}}const u5=n=>n.charAt(0).toUpperCase()+n.slice(1);class Rne{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ff.create("languageUtils")}getScriptPartFromCode(e){if(e=_N(e),!e||e.indexOf("-")<0)return null;const r=e.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(e){if(e=_N(e),!e||e.indexOf("-")<0)return e;const r=e.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(e){if(nr(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let a=Intl.getCanonicalLocales(e)[0];if(a&&this.options.lowerCaseLng&&(a=a.toLowerCase()),a)return a}catch{}const r=["hans","hant","latn","cyrl","cans","mong","arab"];let i=e.split("-");return this.options.lowerCaseLng?i=i.map(a=>a.toLowerCase()):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=u5(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=u5(i[1].toLowerCase())),r.indexOf(i[2].toLowerCase())>-1&&(i[2]=u5(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let r;return e.forEach(i=>{if(r)return;const a=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(a))&&(r=a)}),!r&&this.options.supportedLngs&&e.forEach(i=>{if(r)return;const a=this.getLanguagePartFromCode(i);if(this.isSupportedCode(a))return r=a;r=this.options.supportedLngs.find(o=>{if(o===a)return o;if(!(o.indexOf("-")<0&&a.indexOf("-")<0)&&(o.indexOf("-")>0&&a.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===a||o.indexOf(a)===0&&a.length>1))return o})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(e,r){if(!e)return[];if(typeof e=="function"&&(e=e(r)),nr(e)&&(e=[e]),Array.isArray(e))return e;if(!r)return e.default||[];let i=e[r];return i||(i=e[this.getScriptPartFromCode(r)]),i||(i=e[this.formatLanguageCode(r)]),i||(i=e[this.getLanguagePartFromCode(r)]),i||(i=e.default),i||[]}toResolveHierarchy(e,r){const i=this.getFallbackCodes(r||this.options.fallbackLng||[],e),a=[],o=s=>{s&&(this.isSupportedCode(s)?a.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return nr(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(e))):nr(e)&&o(this.formatLanguageCode(e)),i.forEach(s=>{a.indexOf(s)<0&&o(this.formatLanguageCode(s))}),a}}let T9e=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],A9e={1:n=>+(n>1),2:n=>+(n!=1),3:n=>0,4:n=>n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2,5:n=>n==0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5,6:n=>n==1?0:n>=2&&n<=4?1:2,7:n=>n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2,8:n=>n==1?0:n==2?1:n!=8&&n!=11?2:3,9:n=>+(n>=2),10:n=>n==1?0:n==2?1:n<7?2:n<11?3:4,11:n=>n==1||n==11?0:n==2||n==12?1:n>2&&n<20?2:3,12:n=>+(n%10!=1||n%100==11),13:n=>+(n!==0),14:n=>n==1?0:n==2?1:n==3?2:3,15:n=>n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2,16:n=>n%10==1&&n%100!=11?0:n!==0?1:2,17:n=>n==1||n%10==1&&n%100!=11?0:1,18:n=>n==0?0:n==1?1:2,19:n=>n==1?0:n==0||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3,20:n=>n==1?0:n==0||n%100>0&&n%100<20?1:2,21:n=>n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0,22:n=>n==1?0:n==2?1:(n<0||n>10)&&n%10==0?2:3};const R9e=["v1","v2","v3"],P9e=["v4"],Pne={zero:0,one:1,two:2,few:3,many:4,other:5},N9e=()=>{const n={};return T9e.forEach(e=>{e.lngs.forEach(r=>{n[r]={numbers:e.nr,plurals:A9e[e.fc]}})}),n};class O9e{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=r,this.logger=Ff.create("pluralResolver"),(!this.options.compatibilityJSON||P9e.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=N9e(),this.pluralRulesCache={}}addRule(e,r){this.rules[e]=r}clearCache(){this.pluralRulesCache={}}getRule(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const i=_N(e==="dev"?"en":e),a=r.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:i,type:a});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let s;try{s=new Intl.PluralRules(i,{type:a})}catch{if(!e.match(/-|_/))return;const c=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(c,r)}return this.pluralRulesCache[o]=s,s}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(e,r);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}getPluralFormsOfKey(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,i).map(a=>`${r}${a}`)}getSuffixes(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(e,r);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((a,o)=>Pne[a]-Pne[o]).map(a=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a}`):i.numbers.map(a=>this.getSuffix(e,a,r)):[]}getSuffix(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=this.getRule(e,i);return a?this.shouldUseIntlApi()?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${a.select(r)}`:this.getSuffixRetroCompatible(a,r):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,r){const i=e.noAbs?e.plurals(r):e.plurals(Math.abs(r));let a=e.numbers[i];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));const o=()=>this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString();return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?`_plural_${a.toString()}`:o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?o():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}shouldUseIntlApi(){return!R9e.includes(this.options.compatibilityJSON)}}const Nne=function(n,e,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=b9e(n,e,r);return!o&&a&&nr(r)&&(o=rG(n,r,i),o===void 0&&(o=rG(e,r,i))),o},d5=n=>n.replace(/\$/g,"$$$$");class I9e{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ff.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(r=>r),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:r,escapeValue:i,useRawValueToEscape:a,prefix:o,prefixEscaped:s,suffix:l,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:f,nestingPrefix:h,nestingPrefixEscaped:p,nestingSuffix:g,nestingSuffixEscaped:m,nestingOptionsSeparator:v,maxReplaces:y,alwaysFormat:b}=e.interpolation;this.escape=r!==void 0?r:_9e,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=o?y1(o):s||"{{",this.suffix=l?y1(l):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=h?y1(h):p||y1("$t("),this.nestingSuffix=g?y1(g):m||y1(")"),this.nestingOptionsSeparator=v||",",this.maxReplaces=y||1e3,this.alwaysFormat=b!==void 0?b:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(r,i)=>r&&r.source===i?(r.lastIndex=0,r):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,r,i,a){let o,s,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=p=>{if(p.indexOf(this.formatSeparator)<0){const y=Nne(r,c,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,i,{...a,...r,interpolationkey:p}):y}const g=p.split(this.formatSeparator),m=g.shift().trim(),v=g.join(this.formatSeparator).trim();return this.format(Nne(r,c,m,this.options.keySeparator,this.options.ignoreJSONStructure),v,i,{...a,...r,interpolationkey:m})};this.resetRegExp();const d=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,f=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>d5(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?d5(this.escape(p)):d5(p)}].forEach(p=>{for(l=0;o=p.regex.exec(e);){const g=o[1].trim();if(s=u(g),s===void 0)if(typeof d=="function"){const v=d(e,o,a);s=nr(v)?v:""}else if(a&&Object.prototype.hasOwnProperty.call(a,g))s="";else if(f){s=o[0];continue}else this.logger.warn(`missed to pass in variable ${g} for interpolating ${e}`),s="";else!nr(s)&&!this.useRawValueToEscape&&(s=Sne(s));const m=p.safeValue(s);if(e=e.replace(o[0],m),f?(p.regex.lastIndex+=s.length,p.regex.lastIndex-=o[0].length):p.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,o,s;const l=(c,u)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const f=c.split(new RegExp(`${d}[ ]*{`));let h=`{${f[1]}`;c=f[0],h=this.interpolate(h,s);const p=h.match(/'/g),g=h.match(/"/g);(p&&p.length%2===0&&!g||g.length%2!==0)&&(h=h.replace(/'/g,'"'));try{s=JSON.parse(h),u&&(s={...u,...s})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,m),`${c}${d}${h}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,c};for(;a=this.nestingRegexp.exec(e);){let c=[];s={...i},s=s.replace&&!nr(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let u=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const d=a[1].split(this.formatSeparator).map(f=>f.trim());a[1]=d.shift(),c=d,u=!0}if(o=r(l.call(this,a[1].trim(),s),s),o&&a[0]===e&&!nr(o))return o;nr(o)||(o=Sne(o)),o||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),o=""),u&&(o=c.reduce((d,f)=>this.format(d,f,i.lng,{...i,interpolationkey:a[1].trim()}),o.trim())),e=e.replace(a[0],o),this.regexp.lastIndex=0}return e}}const D9e=n=>{let e=n.toLowerCase().trim();const r={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const a=i[1].substring(0,i[1].length-1);e==="currency"&&a.indexOf(":")<0?r.currency||(r.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?r.range||(r.range=a.trim()):a.split(";").forEach(s=>{if(s){const[l,...c]=s.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=l.trim();r[d]||(r[d]=u),u==="false"&&(r[d]=!1),u==="true"&&(r[d]=!0),isNaN(u)||(r[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:r}},b1=n=>{const e={};return(r,i,a)=>{let o=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(o={...o,[a.interpolationkey]:void 0});const s=i+JSON.stringify(o);let l=e[s];return l||(l=n(_N(i),a),e[s]=l),l(r)}};class L9e{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Ff.create("formatter"),this.options=e,this.formats={number:b1((r,i)=>{const a=new Intl.NumberFormat(r,{...i});return o=>a.format(o)}),currency:b1((r,i)=>{const a=new Intl.NumberFormat(r,{...i,style:"currency"});return o=>a.format(o)}),datetime:b1((r,i)=>{const a=new Intl.DateTimeFormat(r,{...i});return o=>a.format(o)}),relativetime:b1((r,i)=>{const a=new Intl.RelativeTimeFormat(r,{...i});return o=>a.format(o,i.range||"day")}),list:b1((r,i)=>{const a=new Intl.ListFormat(r,{...i});return o=>a.format(o)})},this.init(e)}init(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=r.interpolation.formatSeparator||","}add(e,r){this.formats[e.toLowerCase().trim()]=r}addCached(e,r){this.formats[e.toLowerCase().trim()]=b1(r)}format(e,r,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=r.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(l=>l.indexOf(")")>-1)){const l=o.findIndex(c=>c.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,l)].join(this.formatSeparator)}return o.reduce((l,c)=>{const{formatName:u,formatOptions:d}=D9e(c);if(this.formats[u]){let f=l;try{const h=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},p=h.locale||h.lng||a.locale||a.lng||i;f=this.formats[u](l,p,{...d,...a,...h})}catch(h){this.logger.warn(h)}return f}else this.logger.warn(`there was no format function for ${u}`);return l},e)}}const k9e=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class F9e extends zI{constructor(e,r,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=r,this.services=i,this.languageUtils=i.languageUtils,this.options=a,this.logger=Ff.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(i,a.backend,a)}queueLoad(e,r,i,a){const o={},s={},l={},c={};return e.forEach(u=>{let d=!0;r.forEach(f=>{const h=`${u}|${f}`;!i.reload&&this.store.hasResourceBundle(u,f)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?s[h]===void 0&&(s[h]=!0):(this.state[h]=1,d=!1,s[h]===void 0&&(s[h]=!0),o[h]===void 0&&(o[h]=!0),c[f]===void 0&&(c[f]=!0)))}),d||(l[u]=!0)}),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,r,i){const a=e.split("|"),o=a[0],s=a[1];r&&this.emit("failedLoading",o,s,r),!r&&i&&this.store.addResourceBundle(o,s,i,void 0,void 0,{skipCopy:!0}),this.state[e]=r?-1:2,r&&i&&(this.state[e]=0);const l={};this.queue.forEach(c=>{y9e(c.loaded,[o],s),k9e(c,e),r&&c.errors.push(r),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{l[u]||(l[u]={});const d=c.loaded[u];d.length&&d.forEach(f=>{l[u][f]===void 0&&(l[u][f]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,r,i){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:r,fcName:i,tried:a,wait:o,callback:s});return}this.readingCalls++;const l=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(u&&d&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,r,i,a+1,o*2,s)},o);return}s(u,d)},c=this.backend[i].bind(this.backend);if(c.length===2){try{const u=c(e,r);u&&typeof u.then=="function"?u.then(d=>l(null,d)).catch(l):l(null,u)}catch(u){l(u)}return}return c(e,r,l)}prepareLoading(e,r){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();nr(e)&&(e=this.languageUtils.toResolveHierarchy(e)),nr(r)&&(r=[r]);const o=this.queueLoad(e,r,i,a);if(!o.toLoad.length)return o.pending.length||a(),null;o.toLoad.forEach(s=>{this.loadOne(s)})}load(e,r,i){this.prepareLoading(e,r,{},i)}reload(e,r,i){this.prepareLoading(e,r,{reload:!0},i)}loadOne(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=e.split("|"),a=i[0],o=i[1];this.read(a,o,"read",void 0,void 0,(s,l)=>{s&&this.logger.warn(`${r}loading namespace ${o} for language ${a} failed`,s),!s&&l&&this.logger.log(`${r}loaded namespace ${o} for language ${a}`,l),this.loaded(e,s,l)})}saveMissing(e,r,i,a,o){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${i}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend&&this.backend.create){const c={...s,isUpdate:o},u=this.backend.create.bind(this.backend);if(u.length<6)try{let d;u.length===5?d=u(e,r,i,a,c):d=u(e,r,i,a),d&&typeof d.then=="function"?d.then(f=>l(null,f)).catch(l):l(null,d)}catch(d){l(d)}else u(e,r,i,a,l,c)}!e||!e[0]||this.store.addResource(e[0],r,i,a)}}}const One=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),nr(n[1])&&(e.defaultValue=n[1]),nr(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const r=n[3]||n[2];Object.keys(r).forEach(i=>{e[i]=r[i]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Ine=n=>(nr(n.ns)&&(n.ns=[n.ns]),nr(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),nr(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs&&n.supportedLngs.indexOf("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),n),g3=()=>{},$9e=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(r=>{typeof n[r]=="function"&&(n[r]=n[r].bind(n))})};class OE extends zI{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Ine(e),this.services={},this.logger=Ff,this.modules={external:[]},$9e(this),r&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,r),this;setTimeout(()=>{this.init(e,r)},0)}}init(){var e=this;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof r=="function"&&(i=r,r={}),!r.defaultNS&&r.defaultNS!==!1&&r.ns&&(nr(r.ns)?r.defaultNS=r.ns:r.ns.indexOf("translation")<0&&(r.defaultNS=r.ns[0]));const a=One();this.options={...a,...this.options,...Ine(r)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...a.interpolation,...this.options.interpolation}),r.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=r.keySeparator),r.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=r.nsSeparator);const o=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?Ff.init(o(this.modules.logger),this.options):Ff.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:typeof Intl<"u"&&(d=L9e);const f=new Rne(this.options);this.store=new Tne(this.options.resources,this.options);const h=this.services;h.logger=Ff,h.resourceStore=this.store,h.languageUtils=f,h.pluralResolver=new O9e(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(h.formatter=o(d),h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new I9e(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new F9e(o(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",function(p){for(var g=arguments.length,m=new Array(g>1?g-1:0),v=1;v<g;v++)m[v-1]=arguments[v];e.emit(p,...m)}),this.modules.languageDetector&&(h.languageDetector=o(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=o(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new SN(this.services,this.options),this.translator.on("*",function(p){for(var g=arguments.length,m=new Array(g>1?g-1:0),v=1;v<g;v++)m[v-1]=arguments[v];e.emit(p,...m)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,i||(i=g3),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return e.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return e.store[d](...arguments),e}});const c=Jw(),u=()=>{const d=(f,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(h),i(f,h)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}loadResources(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g3;const a=nr(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(a&&a.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const o=[],s=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(u=>{u!=="cimode"&&o.indexOf(u)<0&&o.push(u)})};a?s(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>s(c)),this.options.preload&&this.options.preload.forEach(l=>s(l)),this.services.backendConnector.load(o,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(l)})}else i(null)}reloadResources(e,r,i){const a=Jw();return typeof e=="function"&&(i=e,e=void 0),typeof r=="function"&&(i=r,r=void 0),e||(e=this.languages),r||(r=this.options.ns),i||(i=g3),this.services.backendConnector.reload(e,r,o=>{a.resolve(),i(o)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&ibe.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let r=0;r<this.languages.length;r++){const i=this.languages[r];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(e,r){var i=this;this.isLanguageChangingTo=e;const a=Jw();this.emit("languageChanging",e);const o=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},s=(c,u)=>{u?(o(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,a.resolve(function(){return i.t(...arguments)}),r&&r(c,function(){return i.t(...arguments)})},l=c=>{!e&&!c&&this.services.languageDetector&&(c=[]);const u=nr(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);u&&(this.language||o(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,d=>{s(d,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),a}getFixedT(e,r,i){var a=this;const o=function(s,l){let c;if(typeof l!="object"){for(var u=arguments.length,d=new Array(u>2?u-2:0),f=2;f<u;f++)d[f-2]=arguments[f];c=a.options.overloadTranslationOptionHandler([s,l].concat(d))}else c={...l};c.lng=c.lng||o.lng,c.lngs=c.lngs||o.lngs,c.ns=c.ns||o.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||i||o.keyPrefix);const h=a.options.keySeparator||".";let p;return c.keyPrefix&&Array.isArray(s)?p=s.map(g=>`${c.keyPrefix}${h}${g}`):p=c.keyPrefix?`${c.keyPrefix}${h}${s}`:s,a.t(p,c)};return nr(e)?o.lng=e:o.lngs=e,o.ns=r,o.keyPrefix=i,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=r.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const s=(l,c)=>{const u=this.services.backendConnector.state[`${l}|${c}`];return u===-1||u===0||u===2};if(r.precheck){const l=r.precheck(this,s);if(l!==void 0)return l}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(i,e)&&(!a||s(o,e)))}loadNamespaces(e,r){const i=Jw();return this.options.ns?(nr(e)&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{i.resolve(),r&&r(a)}),i):(r&&r(),Promise.resolve())}loadLanguages(e,r){const i=Jw();nr(e)&&(e=[e]);const a=this.options.preload||[],o=e.filter(s=>a.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return o.length?(this.options.preload=a.concat(o),this.loadResources(s=>{i.resolve(),r&&r(s)}),i):(r&&r(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services&&this.services.languageUtils||new Rne(One());return r.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return new OE(e,r)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g3;const i=e.forkResourceStore;i&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},o=new OE(a);return(e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e)),["store","services","language"].forEach(l=>{o[l]=this[l]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},i&&(o.store=new Tne(this.store.data,a),o.services.resourceStore=o.store),o.translator=new SN(o.services,a),o.translator.on("*",function(l){for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];o.emit(l,...u)}),o.init(a,r),o.translator.options=a,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Zs=OE.createInstance();Zs.createInstance=OE.createInstance;Zs.createInstance;Zs.dir;Zs.init;Zs.loadResources;Zs.reloadResources;Zs.use;Zs.changeLanguage;Zs.getFixedT;Zs.t;Zs.exists;Zs.setDefaultNamespace;Zs.hasLoadedNamespace;Zs.loadNamespaces;Zs.loadLanguages;const{slice:B9e,forEach:z9e}=[];function U9e(n){return z9e.call(B9e.call(arguments,1),e=>{if(e)for(const r in e)n[r]===void 0&&(n[r]=e[r])}),n}function V9e(n){return typeof n!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(r=>r.test(n))}const Dne=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,G9e=function(n,e){const i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},a=encodeURIComponent(e);let o=`${n}=${a}`;if(i.maxAge>0){const s=i.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(s)}`}if(i.domain){if(!Dne.test(i.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${i.domain}`}if(i.path){if(!Dne.test(i.path))throw new TypeError("option path is invalid");o+=`; Path=${i.path}`}if(i.expires){if(typeof i.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${i.expires.toUTCString()}`}if(i.httpOnly&&(o+="; HttpOnly"),i.secure&&(o+="; Secure"),i.sameSite)switch(typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o},Lne={create(n,e,r,i){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(a.expires=new Date,a.expires.setTime(a.expires.getTime()+r*60*1e3)),i&&(a.domain=i),document.cookie=G9e(n,encodeURIComponent(e),a)},read(n){const e=`${n}=`,r=document.cookie.split(";");for(let i=0;i<r.length;i++){let a=r[i];for(;a.charAt(0)===" ";)a=a.substring(1,a.length);if(a.indexOf(e)===0)return a.substring(e.length,a.length)}return null},remove(n){this.create(n,"",-1)}};var j9e={name:"cookie",lookup(n){let{lookupCookie:e}=n;if(e&&typeof document<"u")return Lne.read(e)||void 0},cacheUserLanguage(n,e){let{lookupCookie:r,cookieMinutes:i,cookieDomain:a,cookieOptions:o}=e;r&&typeof document<"u"&&Lne.create(r,n,i,a,o)}},H9e={name:"querystring",lookup(n){var i;let{lookupQuerystring:e}=n,r;if(typeof window<"u"){let{search:a}=window.location;!window.location.search&&((i=window.location.hash)==null?void 0:i.indexOf("?"))>-1&&(a=window.location.hash.substring(window.location.hash.indexOf("?")));const s=a.substring(1).split("&");for(let l=0;l<s.length;l++){const c=s[l].indexOf("=");c>0&&s[l].substring(0,c)===e&&(r=s[l].substring(c+1))}}return r}};let x1=null;const kne=()=>{if(x1!==null)return x1;try{if(x1=typeof window<"u"&&window.localStorage!==null,!x1)return!1;const n="i18next.translate.boo";window.localStorage.setItem(n,"foo"),window.localStorage.removeItem(n)}catch{x1=!1}return x1};var W9e={name:"localStorage",lookup(n){let{lookupLocalStorage:e}=n;if(e&&kne())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupLocalStorage:r}=e;r&&kne()&&window.localStorage.setItem(r,n)}};let _1=null;const Fne=()=>{if(_1!==null)return _1;try{if(_1=typeof window<"u"&&window.sessionStorage!==null,!_1)return!1;const n="i18next.translate.boo";window.sessionStorage.setItem(n,"foo"),window.sessionStorage.removeItem(n)}catch{_1=!1}return _1};var q9e={name:"sessionStorage",lookup(n){let{lookupSessionStorage:e}=n;if(e&&Fne())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(n,e){let{lookupSessionStorage:r}=e;r&&Fne()&&window.sessionStorage.setItem(r,n)}},Y9e={name:"navigator",lookup(n){const e=[];if(typeof navigator<"u"){const{languages:r,userLanguage:i,language:a}=navigator;if(r)for(let o=0;o<r.length;o++)e.push(r[o]);i&&e.push(i),a&&e.push(a)}return e.length>0?e:void 0}},X9e={name:"htmlTag",lookup(n){let{htmlTag:e}=n,r;const i=e||(typeof document<"u"?document.documentElement:null);return i&&typeof i.getAttribute=="function"&&(r=i.getAttribute("lang")),r}},K9e={name:"path",lookup(n){var a;let{lookupFromPathIndex:e}=n;if(typeof window>"u")return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(r)?(a=r[typeof e=="number"?e:0])==null?void 0:a.replace("/",""):void 0}},Z9e={name:"subdomain",lookup(n){var a,o;let{lookupFromSubdomainIndex:e}=n;const r=typeof e=="number"?e+1:1,i=typeof window<"u"&&((o=(a=window.location)==null?void 0:a.hostname)==null?void 0:o.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(i)return i[r]}};let abe=!1;try{document.cookie,abe=!0}catch{}const obe=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];abe||obe.splice(1,1);const Q9e=()=>({order:obe,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:n=>n});class sbe{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,r)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e,this.options=U9e(r,this.options||{},Q9e()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=a=>a.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=i,this.addDetector(j9e),this.addDetector(H9e),this.addDetector(W9e),this.addDetector(q9e),this.addDetector(Y9e),this.addDetector(X9e),this.addDetector(K9e),this.addDetector(Z9e)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,r=[];return e.forEach(i=>{if(this.detectors[i]){let a=this.detectors[i].lookup(this.options);a&&typeof a=="string"&&(a=[a]),a&&(r=r.concat(a))}}),r=r.filter(i=>i!=null&&!V9e(i)).map(i=>this.options.convertDetectedLanguage(i)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}cacheUserLanguage(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||r.forEach(i=>{this.detectors[i]&&this.detectors[i].cacheUserLanguage(e,this.options)}))}}sbe.type="languageDetector";function J9e(){if(console&&console.warn){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];$0(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const $ne={};function iG(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];$0(e[0])&&$ne[e[0]]||($0(e[0])&&($ne[e[0]]=new Date),J9e(...e))}const lbe=(n,e)=>()=>{if(n.isInitialized)e();else{const r=()=>{setTimeout(()=>{n.off("initialized",r)},0),e()};n.on("initialized",r)}},Bne=(n,e,r)=>{n.loadNamespaces(e,lbe(n,r))},zne=(n,e,r,i)=>{$0(r)&&(r=[r]),r.forEach(a=>{n.options.ns.indexOf(a)<0&&n.options.ns.push(a)}),n.loadLanguages(e,lbe(n,i))},e7e=function(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=e.languages[0],a=e.options?e.options.fallbackLng:!1,o=e.languages[e.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const s=(l,c)=>{const u=e.services.backendConnector.state[`${l}|${c}`];return u===-1||u===2};return r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!s(e.isLanguageChangingTo,n)?!1:!!(e.hasResourceBundle(i,n)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||s(i,n)&&(!a||s(o,n)))},t7e=function(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(iG("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(n,{lng:r.lng,precheck:(a,o)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!o(a.isLanguageChangingTo,n))return!1}}):e7e(n,e,r)},$0=n=>typeof n=="string",n7e=n=>typeof n=="object"&&n!==null,r7e=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,i7e={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},a7e=n=>i7e[n],o7e=n=>n.replace(r7e,a7e);let aG={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:o7e};const s7e=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};aG={...aG,...n}},l7e=()=>aG;let cbe;const c7e=n=>{cbe=n},u7e=()=>cbe,d7e={type:"3rdParty",init(n){s7e(n.options.react),c7e(n)}},f7e=C.createContext();class h7e{constructor(){Gi(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}}const p7e=(n,e)=>{const r=C.useRef();return C.useEffect(()=>{r.current=n},[n,e]),r.current},ube=(n,e,r,i)=>n.getFixedT(e,r,i),g7e=(n,e,r,i)=>C.useCallback(ube(n,e,r,i),[n,e,r,i]),Hp=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:r}=e,{i18n:i,defaultNS:a}=C.useContext(f7e)||{},o=r||i||u7e();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new h7e),!o){iG("You will need to pass in an i18next instance by using initReactI18next");const _=(M,E)=>$0(E)?E:n7e(E)&&$0(E.defaultValue)?E.defaultValue:Array.isArray(M)?M[M.length-1]:M,S=[_,{},!1];return S.t=_,S.i18n={},S.ready=!1,S}o.options.react&&o.options.react.wait!==void 0&&iG("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...l7e(),...o.options.react,...e},{useSuspense:l,keyPrefix:c}=s;let u=a||o.options&&o.options.defaultNS;u=$0(u)?[u]:u||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(u);const d=(o.isInitialized||o.initializedStoreOnce)&&u.every(_=>t7e(_,o,s)),f=g7e(o,e.lng||null,s.nsMode==="fallback"?u:u[0],c),h=()=>f,p=()=>ube(o,e.lng||null,s.nsMode==="fallback"?u:u[0],c),[g,m]=C.useState(h);let v=u.join();e.lng&&(v=`${e.lng}${v}`);const y=p7e(v),b=C.useRef(!0);C.useEffect(()=>{const{bindI18n:_,bindI18nStore:S}=s;b.current=!0,!d&&!l&&(e.lng?zne(o,e.lng,u,()=>{b.current&&m(p)}):Bne(o,u,()=>{b.current&&m(p)})),d&&y&&y!==v&&b.current&&m(p);const M=()=>{b.current&&m(p)};return _&&o&&o.on(_,M),S&&o&&o.store.on(S,M),()=>{b.current=!1,_&&o&&_.split(" ").forEach(E=>o.off(E,M)),S&&o&&S.split(" ").forEach(E=>o.store.off(E,M))}},[o,v]),C.useEffect(()=>{b.current&&d&&m(h)},[o,c,d]);const x=[g,o,d];if(x.t=g,x.i18n=o,x.ready=d,d||!d&&!l)return x;throw new Promise(_=>{e.lng?zne(o,e.lng,u,()=>_()):Bne(o,u,()=>_())})},m7e={desc:"探索GitHub开源图谱数据，洞察开发行为与社区生态。 如：贡献、伙伴、兴趣、社区、生态等...","repository-placeholder":"请输入 GitHub 仓库名称","account-placeholder":"请输入 GitHub 账户名称",graph:"图谱",project:{title1:"项目贡献图谱",desc1:"发现项目核心贡献：根据项目开发者研发活动信息（Issue、PR、Commit、CR等），找到项目核心贡献者。",title2:"项目生态图谱",desc2:"洞察项目生态伙伴：提取项目间的开发活动、组织等关联信息，构建项目核心生态关系。",title3:"项目社区图谱",desc3:"分析项目社区分布：根据项目的开发活动、开发者组织等信息，提取项目核心开发者社区分布。",title4:"开发活动图谱",desc4:"展示个人开源贡献：根据开发者研发活动信息（Issue、PR、Commit、CR等），找到参与的核心项目。",title5:"开源伙伴图谱",desc5:"寻找个人开源伙伴：找到开发者在开源社区中，与之协作紧密的其他开发者。",title6:"开源兴趣图谱",desc6:"挖掘个人开源兴趣：根据参与的项目主题、标签等信息，分析开发者技术领域与兴趣。"}},v7e={type:{label1:"项目贡献",label2:"项目生态",label3:"项目社区",label4:"开发活动",label5:"开源伙伴",label6:"开源兴趣"},edge:{desc1:"创建 Issue",desc2:"创建 PR",desc3:"提交",desc4:"CR",desc5:"PR",desc6:"Star",desc7:"评论 Issue",desc8:"共建",desc9:"属于",desc10:"合作 Issue",desc11:"合作 PR",desc12:"合作项目",desc13:"共同关注",desc14:"参与项目"},share:"分享",download_png:"图片",real_time:"Markdown",real_time_link:"Markdown链接",real_time_code:"可在 md 文档中显示实时OSGraph图谱，示例代码如下",link:"链接",share_link:"分享链接",share_link_code:"可在博客或网站中嵌入OSGraph图谱，示例代码如下",extension:"浏览器扩展程序",extension_desc:"OSGraph的浏览器扩展程序由Hypercrx提供。",extension_edge:"点击安装 Edge 扩展程序",extension_chrome:"点击安装 Chrome 扩展程序",visit:"访问",detail:"了解详情。"},y7e={REPO_CONTRIBUTE:"项目贡献",REPO_ECOLOGY:"项目生态",REPO_COMMUNITY:"项目社区",ACCT_ACTIVITY:"开发活动",ACCT_PARTNER:"开源伙伴",ACCT_INTEREST:"开源兴趣"},b7e="回到主页",x7e="查询",_7e="返回",w7e="复制",S7e="复制成功",E7e="前往 Github 查看",C7e={undo:"撤销",redo:"恢复"},M7e="确定",T7e="重置",A7e="布局",R7e="力导布局",P7e="网页",N7e="图片",O7e={404:"页面未找到",home:m7e,graph:v7e,template:y7e,goHome:b7e,search:x7e,back:_7e,copy:w7e,"share link":"分享链接",copySuccess:S7e,inGithub:E7e,historyAction:C7e,sure:M7e,reset:T7e,layout:A7e,forceLayout:R7e,web:P7e,png:N7e,"project-contribution":{"start-time":"开始时间","end-time":"结束时间","repo-limit":"贡献者数量"},"project-ecosystem":{"repo-limit":"项目数量"},"project-community":{"company-limit":"国家数量","country-limit":"组织数量","user-limit":"贡献者数量"},"developer-activity":{"user-limit":"项目数量"},"os-partner":{"user-limit":"伙伴数量"},"os-interest":{"topic-limit":"标签数据","repo-limit":"项目数量"}},I7e={desc:"Explore GitHub graph data to gain insights into development behaviors and community ecosystems.","repository-placeholder":"Please enter the GitHub repository name","account-placeholder":"Please enter the GitHub account name",graph:" Graph",project:{title1:"Project Contribution Graph",desc1:"Discover core project contributors: Identify core contributors based on project development activities (Issues, PRs, Commits, CRs, etc.).",title2:"Project Ecosystem Graph",desc2:"Insight into project ecosystem partners: Extract inter-project development activities, organizations, and other related information to construct the core ecosystem relationships of the project.",title3:"Project Community Graph",desc3:"Analyze the distribution of the project community: Extract core developers' community distribution based on project development activities and developer organizations.",title4:"Developer Activity Graph",desc4:"Showcasing individual open-source contributions: Find core projects participated in based on developer development activities (Issues, PRs, Commits, CRs, etc.).",title5:"Open-source Partner Graph",desc5:"Finding open-source partners: Find other developers in the open-source community who collaborate closely with you.",title6:"Open-source Interest Graph",desc6:"Discover individual open-source interests: Analyze the developer's technical domain and interests based on the themes and tags of the projects participated in."}},D7e={type:{label1:"Project Contribution",label2:"Project Ecosystem",label3:"Project Community",label4:"Developer Activity",label5:"Open-Source Partner",label6:"Open-Source Interest"},edge:{desc1:"Created Issues",desc2:"Created PRs",desc3:"Commits",desc4:"Code Reviews",desc5:"PRs",desc6:"Stars",desc7:"Issue Comments",desc8:"Joint Contributions",desc9:"Belongs To",desc10:"Collaborative Issues",desc11:"Collaborative PRs",desc12:"Collaborative Projects",desc13:"Co-Followed Projects",desc14:"Participated Projects"},share:"Share",download_png:"IMAGE",real_time:"Markdown",real_time_link:"Markdown chart Link",real_time_code:"You can display real-time OSGraph charts in Markdown documentation. Sample code is as follows",link:"Link",share_link:"Share Link",share_link_code:"You can embed the OSGraph chart in a blog or website. Sample code is as follows",extension:"browser extension",extension_desc:"The browser extension for OSGraph is provided by Hypercrx.。",extension_edge:"Click here to install Chrome extension",extension_chrome:"Click here to install Edge extension",visit:"Visit",detail:"for more details."},L7e={REPO_CONTRIBUTE:"Project Contribution",REPO_ECOLOGY:"Project Ecosystem",REPO_COMMUNITY:"Project Community",ACCT_ACTIVITY:"Developer Activity",ACCT_PARTNER:"Open-Source Partner",ACCT_INTEREST:"Open-Source Interest"},k7e="Return to homepage",F7e="Search",$7e="copy",B7e="View in GitHub",z7e="copy success",U7e={undo:"UNDO",redo:"REDO"},V7e="OK",G7e="Reset",j7e="Layout",H7e="Force 布局",W7e="Web",q7e="Image",Y7e={404:"Page not found",home:I7e,graph:D7e,template:L7e,goHome:k7e,search:F7e,copy:$7e,inGithub:B7e,copySuccess:z7e,historyAction:U7e,sure:V7e,reset:G7e,layout:j7e,forceLayout:H7e,web:W7e,png:q7e,"project-contribution":{"start-time":"Start time","end-time":"End time","repo-limit":"Contrib Limit"},"project-ecosystem":{"repo-limit":"Repo Limit"},"project-community":{"company-limit":"Country Limit","country-limit":"Org Limit","user-limit":"Contrib Limit"},"developer-activity":{"user-limit":"Repo Limit"},"os-partner":{"user-limit":"Partner Limit"},"os-interest":{"topic-limit":"Topic Limit","repo-limit":"Repo Limit"}};Zs.use(d7e).use(sbe).init({resources:{en:{translation:Y7e},zh:{translation:O7e}},fallbackLng:"zh",preload:["zh","en"],interpolation:{escapeValue:!1}});function X7e(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function K7e(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Z7e=function(){function n(r){var i=this;this._insertTag=function(a){var o;i.tags.length===0?i.insertionPoint?o=i.insertionPoint.nextSibling:i.prepend?o=i.container.firstChild:o=i.before:o=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(a,o),i.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(K7e(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var o=X7e(a);try{o.insertRule(i,o.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){var a;return(a=i.parentNode)==null?void 0:a.removeChild(i)}),this.tags=[],this.ctr=0},n}(),Ls="-ms-",EN="-moz-",ci="-webkit-",dbe="comm",Uq="rule",Vq="decl",Q7e="@import",fbe="@keyframes",J7e="@layer",eze=Math.abs,UI=String.fromCharCode,tze=Object.assign;function nze(n,e){return ds(n,0)^45?(((e<<2^ds(n,0))<<2^ds(n,1))<<2^ds(n,2))<<2^ds(n,3):0}function hbe(n){return n.trim()}function rze(n,e){return(n=e.exec(n))?n[0]:n}function ui(n,e,r){return n.replace(e,r)}function oG(n,e){return n.indexOf(e)}function ds(n,e){return n.charCodeAt(e)|0}function IE(n,e,r){return n.slice(e,r)}function Rf(n){return n.length}function Gq(n){return n.length}function m3(n,e){return e.push(n),n}function ize(n,e){return n.map(e).join("")}var VI=1,Ix=1,pbe=0,nc=0,ao=0,P_="";function GI(n,e,r,i,a,o,s){return{value:n,root:e,parent:r,type:i,props:a,children:o,line:VI,column:Ix,length:s,return:""}}function eS(n,e){return tze(GI("",null,null,"",null,null,0),n,{length:-n.length},e)}function aze(){return ao}function oze(){return ao=nc>0?ds(P_,--nc):0,Ix--,ao===10&&(Ix=1,VI--),ao}function zc(){return ao=nc<pbe?ds(P_,nc++):0,Ix++,ao===10&&(Ix=1,VI++),ao}function Kf(){return ds(P_,nc)}function nP(){return nc}function oM(n,e){return IE(P_,n,e)}function DE(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function gbe(n){return VI=Ix=1,pbe=Rf(P_=n),nc=0,[]}function mbe(n){return P_="",n}function rP(n){return hbe(oM(nc-1,sG(n===91?n+2:n===40?n+1:n)))}function sze(n){for(;(ao=Kf())&&ao<33;)zc();return DE(n)>2||DE(ao)>3?"":" "}function lze(n,e){for(;--e&&zc()&&!(ao<48||ao>102||ao>57&&ao<65||ao>70&&ao<97););return oM(n,nP()+(e<6&&Kf()==32&&zc()==32))}function sG(n){for(;zc();)switch(ao){case n:return nc;case 34:case 39:n!==34&&n!==39&&sG(ao);break;case 40:n===41&&sG(n);break;case 92:zc();break}return nc}function cze(n,e){for(;zc()&&n+ao!==57;)if(n+ao===84&&Kf()===47)break;return"/*"+oM(e,nc-1)+"*"+UI(n===47?n:zc())}function uze(n){for(;!DE(Kf());)zc();return oM(n,nc)}function dze(n){return mbe(iP("",null,null,null,[""],n=gbe(n),0,[0],n))}function iP(n,e,r,i,a,o,s,l,c){for(var u=0,d=0,f=s,h=0,p=0,g=0,m=1,v=1,y=1,b=0,x="",_=a,S=o,M=i,E=x;v;)switch(g=b,b=zc()){case 40:if(g!=108&&ds(E,f-1)==58){oG(E+=ui(rP(b),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=rP(b);break;case 9:case 10:case 13:case 32:E+=sze(g);break;case 92:E+=lze(nP()-1,7);continue;case 47:switch(Kf()){case 42:case 47:m3(fze(cze(zc(),nP()),e,r),c);break;default:E+="/"}break;case 123*m:l[u++]=Rf(E)*y;case 125*m:case 59:case 0:switch(b){case 0:case 125:v=0;case 59+d:y==-1&&(E=ui(E,/\f/g,"")),p>0&&Rf(E)-f&&m3(p>32?Vne(E+";",i,r,f-1):Vne(ui(E," ","")+";",i,r,f-2),c);break;case 59:E+=";";default:if(m3(M=Une(E,e,r,u,d,a,l,x,_=[],S=[],f),o),b===123)if(d===0)iP(E,e,M,M,_,o,f,l,S);else switch(h===99&&ds(E,3)===110?100:h){case 100:case 108:case 109:case 115:iP(n,M,M,i&&m3(Une(n,M,M,0,0,a,l,x,a,_=[],f),S),a,S,f,l,i?_:S);break;default:iP(E,M,M,M,[""],S,0,l,S)}}u=d=p=0,m=y=1,x=E="",f=s;break;case 58:f=1+Rf(E),p=g;default:if(m<1){if(b==123)--m;else if(b==125&&m++==0&&oze()==125)continue}switch(E+=UI(b),b*m){case 38:y=d>0?1:(E+="\f",-1);break;case 44:l[u++]=(Rf(E)-1)*y,y=1;break;case 64:Kf()===45&&(E+=rP(zc())),h=Kf(),d=f=Rf(x=E+=uze(nP())),b++;break;case 45:g===45&&Rf(E)==2&&(m=0)}}return o}function Une(n,e,r,i,a,o,s,l,c,u,d){for(var f=a-1,h=a===0?o:[""],p=Gq(h),g=0,m=0,v=0;g<i;++g)for(var y=0,b=IE(n,f+1,f=eze(m=s[g])),x=n;y<p;++y)(x=hbe(m>0?h[y]+" "+b:ui(b,/&\f/g,h[y])))&&(c[v++]=x);return GI(n,e,r,a===0?Uq:l,c,u,d)}function fze(n,e,r){return GI(n,e,r,dbe,UI(aze()),IE(n,2,-2),0)}function Vne(n,e,r,i){return GI(n,e,r,Vq,IE(n,0,i),IE(n,i+1,-1),i)}function ix(n,e){for(var r="",i=Gq(n),a=0;a<i;a++)r+=e(n[a],a,n,e)||"";return r}function hze(n,e,r,i){switch(n.type){case J7e:if(n.children.length)break;case Q7e:case Vq:return n.return=n.return||n.value;case dbe:return"";case fbe:return n.return=n.value+"{"+ix(n.children,i)+"}";case Uq:n.value=n.props.join(",")}return Rf(r=ix(n.children,i))?n.return=n.value+"{"+r+"}":""}function pze(n){var e=Gq(n);return function(r,i,a,o){for(var s="",l=0;l<e;l++)s+=n[l](r,i,a,o)||"";return s}}function gze(n){return function(e){e.root||(e=e.return)&&n(e)}}function mze(n){var e=Object.create(null);return function(r){return e[r]===void 0&&(e[r]=n(r)),e[r]}}var vze=function(e,r,i){for(var a=0,o=0;a=o,o=Kf(),a===38&&o===12&&(r[i]=1),!DE(o);)zc();return oM(e,nc)},yze=function(e,r){var i=-1,a=44;do switch(DE(a)){case 0:a===38&&Kf()===12&&(r[i]=1),e[i]+=vze(nc-1,r,i);break;case 2:e[i]+=rP(a);break;case 4:if(a===44){e[++i]=Kf()===58?"&\f":"",r[i]=e[i].length;break}default:e[i]+=UI(a)}while(a=zc());return e},bze=function(e,r){return mbe(yze(gbe(e),r))},Gne=new WeakMap,xze=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var r=e.value,i=e.parent,a=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&r.charCodeAt(0)!==58&&!Gne.get(i))&&!a){Gne.set(e,!0);for(var o=[],s=bze(r,o),l=i.props,c=0,u=0;c<s.length;c++)for(var d=0;d<l.length;d++,u++)e.props[u]=o[c]?s[c].replace(/&\f/g,l[d]):l[d]+" "+s[c]}}},_ze=function(e){if(e.type==="decl"){var r=e.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(e.return="",e.value="")}};function vbe(n,e){switch(nze(n,e)){case 5103:return ci+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ci+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return ci+n+EN+n+Ls+n+n;case 6828:case 4268:return ci+n+Ls+n+n;case 6165:return ci+n+Ls+"flex-"+n+n;case 5187:return ci+n+ui(n,/(\w+).+(:[^]+)/,ci+"box-$1$2"+Ls+"flex-$1$2")+n;case 5443:return ci+n+Ls+"flex-item-"+ui(n,/flex-|-self/,"")+n;case 4675:return ci+n+Ls+"flex-line-pack"+ui(n,/align-content|flex-|-self/,"")+n;case 5548:return ci+n+Ls+ui(n,"shrink","negative")+n;case 5292:return ci+n+Ls+ui(n,"basis","preferred-size")+n;case 6060:return ci+"box-"+ui(n,"-grow","")+ci+n+Ls+ui(n,"grow","positive")+n;case 4554:return ci+ui(n,/([^-])(transform)/g,"$1"+ci+"$2")+n;case 6187:return ui(ui(ui(n,/(zoom-|grab)/,ci+"$1"),/(image-set)/,ci+"$1"),n,"")+n;case 5495:case 3959:return ui(n,/(image-set\([^]*)/,ci+"$1$`$1");case 4968:return ui(ui(n,/(.+:)(flex-)?(.*)/,ci+"box-pack:$3"+Ls+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ci+n+n;case 4095:case 3583:case 4068:case 2532:return ui(n,/(.+)-inline(.+)/,ci+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Rf(n)-1-e>6)switch(ds(n,e+1)){case 109:if(ds(n,e+4)!==45)break;case 102:return ui(n,/(.+:)(.+)-([^]+)/,"$1"+ci+"$2-$3$1"+EN+(ds(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~oG(n,"stretch")?vbe(ui(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(ds(n,e+1)!==115)break;case 6444:switch(ds(n,Rf(n)-3-(~oG(n,"!important")&&10))){case 107:return ui(n,":",":"+ci)+n;case 101:return ui(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ci+(ds(n,14)===45?"inline-":"")+"box$3$1"+ci+"$2$3$1"+Ls+"$2box$3")+n}break;case 5936:switch(ds(n,e+11)){case 114:return ci+n+Ls+ui(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return ci+n+Ls+ui(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return ci+n+Ls+ui(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return ci+n+Ls+n+n}return n}var wze=function(e,r,i,a){if(e.length>-1&&!e.return)switch(e.type){case Vq:e.return=vbe(e.value,e.length);break;case fbe:return ix([eS(e,{value:ui(e.value,"@","@"+ci)})],a);case Uq:if(e.length)return ize(e.props,function(o){switch(rze(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ix([eS(e,{props:[ui(o,/:(read-\w+)/,":"+EN+"$1")]})],a);case"::placeholder":return ix([eS(e,{props:[ui(o,/:(plac\w+)/,":"+ci+"input-$1")]}),eS(e,{props:[ui(o,/:(plac\w+)/,":"+EN+"$1")]}),eS(e,{props:[ui(o,/:(plac\w+)/,Ls+"input-$1")]})],a)}return""})}},Sze=[wze],Eze=function(e){var r=e.key;if(r==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(m){var v=m.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var a=e.stylisPlugins||Sze,o={},s,l=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(m){for(var v=m.getAttribute("data-emotion").split(" "),y=1;y<v.length;y++)o[v[y]]=!0;l.push(m)});var c,u=[xze,_ze];{var d,f=[hze,gze(function(m){d.insert(m)})],h=pze(u.concat(a,f)),p=function(v){return ix(dze(v),h)};c=function(v,y,b,x){d=b,p(v?v+"{"+y.styles+"}":y.styles),x&&(g.inserted[y.name]=!0)}}var g={key:r,sheet:new Z7e({key:r,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:c};return g.sheet.hydrate(l),g};function Mt(){return Mt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(n[i]=r[i])}return n},Mt.apply(null,arguments)}var ybe={exports:{}},Ti={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rs=typeof Symbol=="function"&&Symbol.for,jq=rs?Symbol.for("react.element"):60103,Hq=rs?Symbol.for("react.portal"):60106,jI=rs?Symbol.for("react.fragment"):60107,HI=rs?Symbol.for("react.strict_mode"):60108,WI=rs?Symbol.for("react.profiler"):60114,qI=rs?Symbol.for("react.provider"):60109,YI=rs?Symbol.for("react.context"):60110,Wq=rs?Symbol.for("react.async_mode"):60111,XI=rs?Symbol.for("react.concurrent_mode"):60111,KI=rs?Symbol.for("react.forward_ref"):60112,ZI=rs?Symbol.for("react.suspense"):60113,Cze=rs?Symbol.for("react.suspense_list"):60120,QI=rs?Symbol.for("react.memo"):60115,JI=rs?Symbol.for("react.lazy"):60116,Mze=rs?Symbol.for("react.block"):60121,Tze=rs?Symbol.for("react.fundamental"):60117,Aze=rs?Symbol.for("react.responder"):60118,Rze=rs?Symbol.for("react.scope"):60119;function Kc(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case jq:switch(n=n.type,n){case Wq:case XI:case jI:case WI:case HI:case ZI:return n;default:switch(n=n&&n.$$typeof,n){case YI:case KI:case JI:case QI:case qI:return n;default:return e}}case Hq:return e}}}function bbe(n){return Kc(n)===XI}Ti.AsyncMode=Wq;Ti.ConcurrentMode=XI;Ti.ContextConsumer=YI;Ti.ContextProvider=qI;Ti.Element=jq;Ti.ForwardRef=KI;Ti.Fragment=jI;Ti.Lazy=JI;Ti.Memo=QI;Ti.Portal=Hq;Ti.Profiler=WI;Ti.StrictMode=HI;Ti.Suspense=ZI;Ti.isAsyncMode=function(n){return bbe(n)||Kc(n)===Wq};Ti.isConcurrentMode=bbe;Ti.isContextConsumer=function(n){return Kc(n)===YI};Ti.isContextProvider=function(n){return Kc(n)===qI};Ti.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===jq};Ti.isForwardRef=function(n){return Kc(n)===KI};Ti.isFragment=function(n){return Kc(n)===jI};Ti.isLazy=function(n){return Kc(n)===JI};Ti.isMemo=function(n){return Kc(n)===QI};Ti.isPortal=function(n){return Kc(n)===Hq};Ti.isProfiler=function(n){return Kc(n)===WI};Ti.isStrictMode=function(n){return Kc(n)===HI};Ti.isSuspense=function(n){return Kc(n)===ZI};Ti.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===jI||n===XI||n===WI||n===HI||n===ZI||n===Cze||typeof n=="object"&&n!==null&&(n.$$typeof===JI||n.$$typeof===QI||n.$$typeof===qI||n.$$typeof===YI||n.$$typeof===KI||n.$$typeof===Tze||n.$$typeof===Aze||n.$$typeof===Rze||n.$$typeof===Mze)};Ti.typeOf=Kc;ybe.exports=Ti;var Pze=ybe.exports,xbe=Pze,Nze={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Oze={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_be={};_be[xbe.ForwardRef]=Nze;_be[xbe.Memo]=Oze;var Ize=!0;function Dze(n,e,r){var i="";return r.split(" ").forEach(function(a){n[a]!==void 0?e.push(n[a]+";"):a&&(i+=a+" ")}),i}var wbe=function(e,r,i){var a=e.key+"-"+r.name;(i===!1||Ize===!1)&&e.registered[a]===void 0&&(e.registered[a]=r.styles)},Lze=function(e,r,i){wbe(e,r,i);var a=e.key+"-"+r.name;if(e.inserted[r.name]===void 0){var o=r;do e.insert(r===o?"."+a:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function kze(n){for(var e=0,r,i=0,a=n.length;a>=4;++i,a-=4)r=n.charCodeAt(i)&255|(n.charCodeAt(++i)&255)<<8|(n.charCodeAt(++i)&255)<<16|(n.charCodeAt(++i)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,e=(r&65535)*1540483477+((r>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(a){case 3:e^=(n.charCodeAt(i+2)&255)<<16;case 2:e^=(n.charCodeAt(i+1)&255)<<8;case 1:e^=n.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Fze={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},$ze=/[A-Z]|^ms/g,Bze=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Sbe=function(e){return e.charCodeAt(1)===45},jne=function(e){return e!=null&&typeof e!="boolean"},f5=mze(function(n){return Sbe(n)?n:n.replace($ze,"-$&").toLowerCase()}),Hne=function(e,r){switch(e){case"animation":case"animationName":if(typeof r=="string")return r.replace(Bze,function(i,a,o){return Pf={name:a,styles:o,next:Pf},a})}return Fze[e]!==1&&!Sbe(e)&&typeof r=="number"&&r!==0?r+"px":r};function LE(n,e,r){if(r==null)return"";var i=r;if(i.__emotion_styles!==void 0)return i;switch(typeof r){case"boolean":return"";case"object":{var a=r;if(a.anim===1)return Pf={name:a.name,styles:a.styles,next:Pf},a.name;var o=r;if(o.styles!==void 0){var s=o.next;if(s!==void 0)for(;s!==void 0;)Pf={name:s.name,styles:s.styles,next:Pf},s=s.next;var l=o.styles+";";return l}return zze(n,e,r)}case"function":{if(n!==void 0){var c=Pf,u=r(n);return Pf=c,LE(n,e,u)}break}}var d=r;return d}function zze(n,e,r){var i="";if(Array.isArray(r))for(var a=0;a<r.length;a++)i+=LE(n,e,r[a])+";";else for(var o in r){var s=r[o];if(typeof s!="object"){var l=s;jne(l)&&(i+=f5(o)+":"+Hne(o,l)+";")}else if(Array.isArray(s)&&typeof s[0]=="string"&&e==null)for(var c=0;c<s.length;c++)jne(s[c])&&(i+=f5(o)+":"+Hne(o,s[c])+";");else{var u=LE(n,e,s);switch(o){case"animation":case"animationName":{i+=f5(o)+":"+u+";";break}default:i+=o+"{"+u+"}"}}}return i}var Wne=/label:\s*([^\s;{]+)\s*(;|$)/g,Pf;function Ebe(n,e,r){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var i=!0,a="";Pf=void 0;var o=n[0];if(o==null||o.raw===void 0)i=!1,a+=LE(r,e,o);else{var s=o;a+=s[0]}for(var l=1;l<n.length;l++)if(a+=LE(r,e,n[l]),i){var c=o;a+=c[l]}Wne.lastIndex=0;for(var u="",d;(d=Wne.exec(a))!==null;)u+="-"+d[1];var f=kze(a)+u;return{name:f,styles:a,next:Pf}}var Uze=function(e){return e()},Vze=ny.useInsertionEffect?ny.useInsertionEffect:!1,Gze=Vze||Uze,Cbe=C.createContext(typeof HTMLElement<"u"?Eze({key:"css"}):null);Cbe.Provider;var jze=function(e){return C.forwardRef(function(r,i){var a=C.useContext(Cbe);return e(r,a,i)})},Hze=C.createContext({}),sM={}.hasOwnProperty,lG="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",qq=function(e,r){var i={};for(var a in r)sM.call(r,a)&&(i[a]=r[a]);return i[lG]=e,i},Wze=function(e){var r=e.cache,i=e.serialized,a=e.isStringTag;return wbe(r,i,a),Gze(function(){return Lze(r,i,a)}),null},qze=jze(function(n,e,r){var i=n.css;typeof i=="string"&&e.registered[i]!==void 0&&(i=e.registered[i]);var a=n[lG],o=[i],s="";typeof n.className=="string"?s=Dze(e.registered,o,n.className):n.className!=null&&(s=n.className+" ");var l=Ebe(o,void 0,C.useContext(Hze));s+=e.key+"-"+l.name;var c={};for(var u in n)sM.call(n,u)&&u!=="css"&&u!==lG&&(c[u]=n[u]);return c.className=s,r&&(c.ref=r),C.createElement(C.Fragment,null,C.createElement(Wze,{cache:e,serialized:l,isStringTag:typeof a=="string"}),C.createElement(a,c))}),Yq=qze,Yze=tn.Fragment,bn=function(e,r,i){return sM.call(r,"css")?tn.jsx(Yq,qq(e,r),i):tn.jsx(e,r,i)},zr=function(e,r,i){return sM.call(r,"css")?tn.jsxs(Yq,qq(e,r),i):tn.jsxs(e,r,i)},Mbe={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function r(){for(var o="",s=0;s<arguments.length;s++){var l=arguments[s];l&&(o=a(o,i(l)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return r.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var l in o)e.call(o,l)&&o[l]&&(s=a(s,l));return s}function a(o,s){return s?o?o+" "+s:o+s:o}n.exports?(r.default=r,n.exports=r):window.classNames=r})()})(Mbe);var Xze=Mbe.exports;const Be=Sl(Xze);function vn(n){"@babel/helpers - typeof";return vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(n)}var Kze=Symbol.for("react.element"),Zze=Symbol.for("react.transitional.element"),Qze=Symbol.for("react.fragment");function Tbe(n){return n&&vn(n)==="object"&&(n.$$typeof===Kze||n.$$typeof===Zze)&&n.type===Qze}function Bm(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];return Je.Children.forEach(n,function(i){i==null&&!e.keepEmpty||(Array.isArray(i)?r=r.concat(Bm(i)):Tbe(i)&&i.props?r=r.concat(Bm(i.props.children,e)):r.push(i))}),r}var cG={},Jze=function(e){};function eUe(n,e){}function tUe(n,e){}function nUe(){cG={}}function Abe(n,e,r){!e&&!cG[r]&&(n(!1,r),cG[r]=!0)}function Hs(n,e){Abe(eUe,n,e)}function rUe(n,e){Abe(tUe,n,e)}Hs.preMessage=Jze;Hs.resetWarned=nUe;Hs.noteOnce=rUe;function iUe(n,e){if(vn(n)!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(vn(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Rbe(n){var e=iUe(n,"string");return vn(e)=="symbol"?e:e+""}function re(n,e,r){return(e=Rbe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function qne(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),r.push.apply(r,i)}return r}function se(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?qne(Object(r),!0).forEach(function(i){re(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):qne(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function kE(n){return n instanceof HTMLElement||n instanceof SVGElement}function Pbe(n){return n&&vn(n)==="object"&&kE(n.nativeElement)?n.nativeElement:kE(n)?n:null}function aP(n){var e=Pbe(n);if(e)return e;if(n instanceof Je.Component){var r;return(r=JV.findDOMNode)===null||r===void 0?void 0:r.call(JV,n)}return null}var Nbe={exports:{}},Ai={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xq=Symbol.for("react.element"),Kq=Symbol.for("react.portal"),e4=Symbol.for("react.fragment"),t4=Symbol.for("react.strict_mode"),n4=Symbol.for("react.profiler"),r4=Symbol.for("react.provider"),i4=Symbol.for("react.context"),aUe=Symbol.for("react.server_context"),a4=Symbol.for("react.forward_ref"),o4=Symbol.for("react.suspense"),s4=Symbol.for("react.suspense_list"),l4=Symbol.for("react.memo"),c4=Symbol.for("react.lazy"),oUe=Symbol.for("react.offscreen"),Obe;Obe=Symbol.for("react.module.reference");function Ku(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case Xq:switch(n=n.type,n){case e4:case n4:case t4:case o4:case s4:return n;default:switch(n=n&&n.$$typeof,n){case aUe:case i4:case a4:case c4:case l4:case r4:return n;default:return e}}case Kq:return e}}}Ai.ContextConsumer=i4;Ai.ContextProvider=r4;Ai.Element=Xq;Ai.ForwardRef=a4;Ai.Fragment=e4;Ai.Lazy=c4;Ai.Memo=l4;Ai.Portal=Kq;Ai.Profiler=n4;Ai.StrictMode=t4;Ai.Suspense=o4;Ai.SuspenseList=s4;Ai.isAsyncMode=function(){return!1};Ai.isConcurrentMode=function(){return!1};Ai.isContextConsumer=function(n){return Ku(n)===i4};Ai.isContextProvider=function(n){return Ku(n)===r4};Ai.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===Xq};Ai.isForwardRef=function(n){return Ku(n)===a4};Ai.isFragment=function(n){return Ku(n)===e4};Ai.isLazy=function(n){return Ku(n)===c4};Ai.isMemo=function(n){return Ku(n)===l4};Ai.isPortal=function(n){return Ku(n)===Kq};Ai.isProfiler=function(n){return Ku(n)===n4};Ai.isStrictMode=function(n){return Ku(n)===t4};Ai.isSuspense=function(n){return Ku(n)===o4};Ai.isSuspenseList=function(n){return Ku(n)===s4};Ai.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===e4||n===n4||n===t4||n===o4||n===s4||n===oUe||typeof n=="object"&&n!==null&&(n.$$typeof===c4||n.$$typeof===l4||n.$$typeof===r4||n.$$typeof===i4||n.$$typeof===a4||n.$$typeof===Obe||n.getModuleId!==void 0)};Ai.typeOf=Ku;Nbe.exports=Ai;var h5=Nbe.exports;function u4(n,e,r){var i=C.useRef({});return(!("value"in i.current)||r(i.current.condition,e))&&(i.current.value=n(),i.current.condition=e),i.current.value}var sUe=Number(C.version.split(".")[0]),Zq=function(e,r){typeof e=="function"?e(r):vn(e)==="object"&&e&&"current"in e&&(e.current=r)},hh=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var a=r.filter(Boolean);return a.length<=1?a[0]:function(o){r.forEach(function(s){Zq(s,o)})}},N_=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return u4(function(){return hh.apply(void 0,r)},r,function(a,o){return a.length!==o.length||a.every(function(s,l){return s!==o[l]})})},O_=function(e){var r,i;if(!e)return!1;if(Ibe(e)&&sUe>=19)return!0;var a=h5.isMemo(e)?e.type.type:e.type;return!(typeof a=="function"&&!((r=a.prototype)!==null&&r!==void 0&&r.render)&&a.$$typeof!==h5.ForwardRef||typeof e=="function"&&!((i=e.prototype)!==null&&i!==void 0&&i.render)&&e.$$typeof!==h5.ForwardRef)};function Ibe(n){return C.isValidElement(n)&&!Tbe(n)}var lM=function(e){if(e&&Ibe(e)){var r=e;return r.props.propertyIsEnumerable("ref")?r.props.ref:r.ref}return null},uG=C.createContext(null);function lUe(n){var e=n.children,r=n.onBatchResize,i=C.useRef(0),a=C.useRef([]),o=C.useContext(uG),s=C.useCallback(function(l,c,u){i.current+=1;var d=i.current;a.current.push({size:l,element:c,data:u}),Promise.resolve().then(function(){d===i.current&&(r==null||r(a.current),a.current=[])}),o==null||o(l,c,u)},[r,o]);return C.createElement(uG.Provider,{value:s},e)}var Dbe=function(){if(typeof Map<"u")return Map;function n(e,r){var i=-1;return e.some(function(a,o){return a[0]===r?(i=o,!0):!1}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(r){var i=n(this.__entries__,r),a=this.__entries__[i];return a&&a[1]},e.prototype.set=function(r,i){var a=n(this.__entries__,r);~a?this.__entries__[a][1]=i:this.__entries__.push([r,i])},e.prototype.delete=function(r){var i=this.__entries__,a=n(i,r);~a&&i.splice(a,1)},e.prototype.has=function(r){return!!~n(this.__entries__,r)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(r,i){i===void 0&&(i=null);for(var a=0,o=this.__entries__;a<o.length;a++){var s=o[a];r.call(i,s[1],s[0])}},e}()}(),dG=typeof window<"u"&&typeof document<"u"&&window.document===document,CN=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),cUe=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(CN):function(n){return setTimeout(function(){return n(Date.now())},1e3/60)}}(),uUe=2;function dUe(n,e){var r=!1,i=!1,a=0;function o(){r&&(r=!1,n()),i&&l()}function s(){cUe(o)}function l(){var c=Date.now();if(r){if(c-a<uUe)return;i=!0}else r=!0,i=!1,setTimeout(s,e);a=c}return l}var fUe=20,hUe=["top","right","bottom","left","width","height","size","weight"],pUe=typeof MutationObserver<"u",gUe=function(){function n(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=dUe(this.refresh.bind(this),fUe)}return n.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},n.prototype.removeObserver=function(e){var r=this.observers_,i=r.indexOf(e);~i&&r.splice(i,1),!r.length&&this.connected_&&this.disconnect_()},n.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},n.prototype.updateObservers_=function(){var e=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return e.forEach(function(r){return r.broadcastActive()}),e.length>0},n.prototype.connect_=function(){!dG||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),pUe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},n.prototype.disconnect_=function(){!dG||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},n.prototype.onTransitionEnd_=function(e){var r=e.propertyName,i=r===void 0?"":r,a=hUe.some(function(o){return!!~i.indexOf(o)});a&&this.refresh()},n.getInstance=function(){return this.instance_||(this.instance_=new n),this.instance_},n.instance_=null,n}(),Lbe=function(n,e){for(var r=0,i=Object.keys(e);r<i.length;r++){var a=i[r];Object.defineProperty(n,a,{value:e[a],enumerable:!1,writable:!1,configurable:!0})}return n},Dx=function(n){var e=n&&n.ownerDocument&&n.ownerDocument.defaultView;return e||CN},kbe=d4(0,0,0,0);function MN(n){return parseFloat(n)||0}function Yne(n){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.reduce(function(i,a){var o=n["border-"+a+"-width"];return i+MN(o)},0)}function mUe(n){for(var e=["top","right","bottom","left"],r={},i=0,a=e;i<a.length;i++){var o=a[i],s=n["padding-"+o];r[o]=MN(s)}return r}function vUe(n){var e=n.getBBox();return d4(0,0,e.width,e.height)}function yUe(n){var e=n.clientWidth,r=n.clientHeight;if(!e&&!r)return kbe;var i=Dx(n).getComputedStyle(n),a=mUe(i),o=a.left+a.right,s=a.top+a.bottom,l=MN(i.width),c=MN(i.height);if(i.boxSizing==="border-box"&&(Math.round(l+o)!==e&&(l-=Yne(i,"left","right")+o),Math.round(c+s)!==r&&(c-=Yne(i,"top","bottom")+s)),!xUe(n)){var u=Math.round(l+o)-e,d=Math.round(c+s)-r;Math.abs(u)!==1&&(l-=u),Math.abs(d)!==1&&(c-=d)}return d4(a.left,a.top,l,c)}var bUe=function(){return typeof SVGGraphicsElement<"u"?function(n){return n instanceof Dx(n).SVGGraphicsElement}:function(n){return n instanceof Dx(n).SVGElement&&typeof n.getBBox=="function"}}();function xUe(n){return n===Dx(n).document.documentElement}function _Ue(n){return dG?bUe(n)?vUe(n):yUe(n):kbe}function wUe(n){var e=n.x,r=n.y,i=n.width,a=n.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(o.prototype);return Lbe(s,{x:e,y:r,width:i,height:a,top:r,right:e+i,bottom:a+r,left:e}),s}function d4(n,e,r,i){return{x:n,y:e,width:r,height:i}}var SUe=function(){function n(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=d4(0,0,0,0),this.target=e}return n.prototype.isActive=function(){var e=_Ue(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},n.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},n}(),EUe=function(){function n(e,r){var i=wUe(r);Lbe(this,{target:e,contentRect:i})}return n}(),CUe=function(){function n(e,r,i){if(this.activeObservations_=[],this.observations_=new Dbe,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=r,this.callbackCtx_=i}return n.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Dx(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(e)||(r.set(e,new SUe(e)),this.controller_.addObserver(this),this.controller_.refresh())}},n.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Dx(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var r=this.observations_;r.has(e)&&(r.delete(e),r.size||this.controller_.removeObserver(this))}},n.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},n.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&e.activeObservations_.push(r)})},n.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,r=this.activeObservations_.map(function(i){return new EUe(i.target,i.broadcastRect())});this.callback_.call(e,r,e),this.clearActive()}},n.prototype.clearActive=function(){this.activeObservations_.splice(0)},n.prototype.hasActive=function(){return this.activeObservations_.length>0},n}(),Fbe=typeof WeakMap<"u"?new WeakMap:new Dbe,$be=function(){function n(e){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=gUe.getInstance(),i=new CUe(e,r,this);Fbe.set(this,i)}return n}();["observe","unobserve","disconnect"].forEach(function(n){$be.prototype[n]=function(){var e;return(e=Fbe.get(this))[n].apply(e,arguments)}});var MUe=function(){return typeof CN.ResizeObserver<"u"?CN.ResizeObserver:$be}(),Jg=new Map;function TUe(n){n.forEach(function(e){var r,i=e.target;(r=Jg.get(i))===null||r===void 0||r.forEach(function(a){return a(i)})})}var Bbe=new MUe(TUe);function AUe(n,e){Jg.has(n)||(Jg.set(n,new Set),Bbe.observe(n)),Jg.get(n).add(e)}function RUe(n,e){Jg.has(n)&&(Jg.get(n).delete(e),Jg.get(n).size||(Bbe.unobserve(n),Jg.delete(n)))}function st(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Xne(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Rbe(i.key),i)}}function lt(n,e,r){return e&&Xne(n.prototype,e),r&&Xne(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}function Lx(n,e){return Lx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Lx(n,e)}function $n(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Lx(n,e)}function Op(n){return Op=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Op(n)}function f4(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f4=function(){return!!n})()}function Cr(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function zbe(n,e){if(e&&(vn(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cr(n)}function iv(n){var e=f4();return function(){var r,i=Op(n);if(e){var a=Op(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return zbe(this,r)}}var PUe=function(n){$n(r,n);var e=iv(r);function r(){return st(this,r),e.apply(this,arguments)}return lt(r,[{key:"render",value:function(){return this.props.children}}]),r}(C.Component);function NUe(n,e){var r=n.children,i=n.disabled,a=C.useRef(null),o=C.useRef(null),s=C.useContext(uG),l=typeof r=="function",c=l?r(a):r,u=C.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),d=!l&&C.isValidElement(c)&&O_(c),f=d?lM(c):null,h=N_(f,a),p=function(){var y;return aP(a.current)||(a.current&&vn(a.current)==="object"?aP((y=a.current)===null||y===void 0?void 0:y.nativeElement):null)||aP(o.current)};C.useImperativeHandle(e,function(){return p()});var g=C.useRef(n);g.current=n;var m=C.useCallback(function(v){var y=g.current,b=y.onResize,x=y.data,_=v.getBoundingClientRect(),S=_.width,M=_.height,E=v.offsetWidth,T=v.offsetHeight,P=Math.floor(S),A=Math.floor(M);if(u.current.width!==P||u.current.height!==A||u.current.offsetWidth!==E||u.current.offsetHeight!==T){var N={width:P,height:A,offsetWidth:E,offsetHeight:T};u.current=N;var O=E===Math.round(S)?S:E,I=T===Math.round(M)?M:T,D=se(se({},N),{},{offsetWidth:O,offsetHeight:I});s==null||s(D,v,x),b&&Promise.resolve().then(function(){b(D,v)})}},[]);return C.useEffect(function(){var v=p();return v&&!i&&AUe(v,m),function(){return RUe(v,m)}},[a.current,i]),C.createElement(PUe,{ref:o},d?C.cloneElement(c,{ref:h}):c)}var OUe=C.forwardRef(NUe),IUe="rc-observer-key";function DUe(n,e){var r=n.children,i=typeof r=="function"?[r]:Bm(r);return i.map(function(a,o){var s=(a==null?void 0:a.key)||"".concat(IUe,"-").concat(o);return C.createElement(OUe,Mt({},n,{key:s,ref:o===0?e:void 0}),a)})}var ph=C.forwardRef(DUe);ph.Collection=lUe;function fG(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function LUe(n){if(Array.isArray(n))return fG(n)}function Ube(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function h4(n,e){if(n){if(typeof n=="string")return fG(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fG(n,e):void 0}}function kUe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ot(n){return LUe(n)||Ube(n)||h4(n)||kUe()}var Vbe=function(e){return+setTimeout(e,16)},Gbe=function(e){return clearTimeout(e)};typeof window<"u"&&"requestAnimationFrame"in window&&(Vbe=function(e){return window.requestAnimationFrame(e)},Gbe=function(e){return window.cancelAnimationFrame(e)});var Kne=0,Qq=new Map;function jbe(n){Qq.delete(n)}var Gr=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;Kne+=1;var i=Kne;function a(o){if(o===0)jbe(i),e();else{var s=Vbe(function(){a(o-1)});Qq.set(i,s)}}return a(r),i};Gr.cancel=function(n){var e=Qq.get(n);return jbe(n),Gbe(e)};function Hbe(n){if(Array.isArray(n))return n}function FUe(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,o,s,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function Wbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fe(n,e){return Hbe(n)||FUe(n,e)||h4(n,e)||Wbe()}function FE(n){for(var e=0,r,i=0,a=n.length;a>=4;++i,a-=4)r=n.charCodeAt(i)&255|(n.charCodeAt(++i)&255)<<8|(n.charCodeAt(++i)&255)<<16|(n.charCodeAt(++i)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,e=(r&65535)*1540483477+((r>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(a){case 3:e^=(n.charCodeAt(i+2)&255)<<16;case 2:e^=(n.charCodeAt(i+1)&255)<<8;case 1:e^=n.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}function yl(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function hG(n,e){if(!n)return!1;if(n.contains)return n.contains(e);for(var r=e;r;){if(r===n)return!0;r=r.parentNode}return!1}var Zne="data-rc-order",Qne="data-rc-priority",$Ue="rc-util-key",pG=new Map;function qbe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=n.mark;return e?e.startsWith("data-")?e:"data-".concat(e):$Ue}function p4(n){if(n.attachTo)return n.attachTo;var e=document.querySelector("head");return e||document.body}function BUe(n){return n==="queue"?"prependQueue":n?"prepend":"append"}function Jq(n){return Array.from((pG.get(n)||n).children).filter(function(e){return e.tagName==="STYLE"})}function Ybe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!yl())return null;var r=e.csp,i=e.prepend,a=e.priority,o=a===void 0?0:a,s=BUe(i),l=s==="prependQueue",c=document.createElement("style");c.setAttribute(Zne,s),l&&o&&c.setAttribute(Qne,"".concat(o)),r!=null&&r.nonce&&(c.nonce=r==null?void 0:r.nonce),c.innerHTML=n;var u=p4(e),d=u.firstChild;if(i){if(l){var f=(e.styles||Jq(u)).filter(function(h){if(!["prepend","prependQueue"].includes(h.getAttribute(Zne)))return!1;var p=Number(h.getAttribute(Qne)||0);return o>=p});if(f.length)return u.insertBefore(c,f[f.length-1].nextSibling),c}u.insertBefore(c,d)}else u.appendChild(c);return c}function Xbe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=p4(e);return(e.styles||Jq(r)).find(function(i){return i.getAttribute(qbe(e))===n})}function $E(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Xbe(n,e);if(r){var i=p4(e);i.removeChild(r)}}function zUe(n,e){var r=pG.get(n);if(!r||!hG(document,r)){var i=Ybe("",e),a=i.parentNode;pG.set(n,a),n.removeChild(i)}}function bp(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=p4(r),a=Jq(i),o=se(se({},r),{},{styles:a});zUe(i,o);var s=Xbe(e,o);if(s){var l,c;if((l=o.csp)!==null&&l!==void 0&&l.nonce&&s.nonce!==((c=o.csp)===null||c===void 0?void 0:c.nonce)){var u;s.nonce=(u=o.csp)===null||u===void 0?void 0:u.nonce}return s.innerHTML!==n&&(s.innerHTML=n),s}var d=Ybe(n,o);return d.setAttribute(qbe(o),e),d}function UUe(n,e){if(n==null)return{};var r={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;r[i]=n[i]}return r}function ir(n,e){if(n==null)return{};var r,i,a=UUe(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)r=o[i],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(n,r)&&(a[r]=n[r])}return a}function gG(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=new Set;function a(o,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,c=i.has(o);if(Hs(!c,"Warning: There may be circular references"),c)return!1;if(o===s)return!0;if(r&&l>1)return!1;i.add(o);var u=l+1;if(Array.isArray(o)){if(!Array.isArray(s)||o.length!==s.length)return!1;for(var d=0;d<o.length;d++)if(!a(o[d],s[d],u))return!1;return!0}if(o&&s&&vn(o)==="object"&&vn(s)==="object"){var f=Object.keys(o);return f.length!==Object.keys(s).length?!1:f.every(function(h){return a(o[h],s[h],u)})}return!1}return a(n,e)}var VUe="%";function mG(n){return n.join(VUe)}var GUe=function(){function n(e){st(this,n),re(this,"instanceId",void 0),re(this,"cache",new Map),this.instanceId=e}return lt(n,[{key:"get",value:function(r){return this.opGet(mG(r))}},{key:"opGet",value:function(r){return this.cache.get(r)||null}},{key:"update",value:function(r,i){return this.opUpdate(mG(r),i)}},{key:"opUpdate",value:function(r,i){var a=this.cache.get(r),o=i(a);o===null?this.cache.delete(r):this.cache.set(r,o)}}]),n}(),kx="data-token-hash",jd="data-css-hash",em="__cssinjs_instance__";function jUe(){var n=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var e=document.body.querySelectorAll("style[".concat(jd,"]"))||[],r=document.head.firstChild;Array.from(e).forEach(function(a){a[em]=a[em]||n,a[em]===n&&document.head.insertBefore(a,r)});var i={};Array.from(document.querySelectorAll("style[".concat(jd,"]"))).forEach(function(a){var o=a.getAttribute(jd);if(i[o]){if(a[em]===n){var s;(s=a.parentNode)===null||s===void 0||s.removeChild(a)}}else i[o]=!0})}return new GUe(n)}var cM=C.createContext({hashPriority:"low",cache:jUe(),defaultCache:!0});function HUe(n,e){if(n.length!==e.length)return!1;for(var r=0;r<n.length;r++)if(n[r]!==e[r])return!1;return!0}var eY=function(){function n(){st(this,n),re(this,"cache",void 0),re(this,"keys",void 0),re(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return lt(n,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(r){var i,a,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s={map:this.cache};return r.forEach(function(l){if(!s)s=void 0;else{var c;s=(c=s)===null||c===void 0||(c=c.map)===null||c===void 0?void 0:c.get(l)}}),(i=s)!==null&&i!==void 0&&i.value&&o&&(s.value[1]=this.cacheCallTimes++),(a=s)===null||a===void 0?void 0:a.value}},{key:"get",value:function(r){var i;return(i=this.internalGet(r,!0))===null||i===void 0?void 0:i[0]}},{key:"has",value:function(r){return!!this.internalGet(r)}},{key:"set",value:function(r,i){var a=this;if(!this.has(r)){if(this.size()+1>n.MAX_CACHE_SIZE+n.MAX_CACHE_OFFSET){var o=this.keys.reduce(function(u,d){var f=fe(u,2),h=f[1];return a.internalGet(d)[1]<h?[d,a.internalGet(d)[1]]:u},[this.keys[0],this.cacheCallTimes]),s=fe(o,1),l=s[0];this.delete(l)}this.keys.push(r)}var c=this.cache;r.forEach(function(u,d){if(d===r.length-1)c.set(u,{value:[i,a.cacheCallTimes++]});else{var f=c.get(u);f?f.map||(f.map=new Map):c.set(u,{map:new Map}),c=c.get(u).map}})}},{key:"deleteByPath",value:function(r,i){var a=r.get(i[0]);if(i.length===1){var o;return a.map?r.set(i[0],{map:a.map}):r.delete(i[0]),(o=a.value)===null||o===void 0?void 0:o[0]}var s=this.deleteByPath(a.map,i.slice(1));return(!a.map||a.map.size===0)&&!a.value&&r.delete(i[0]),s}},{key:"delete",value:function(r){if(this.has(r))return this.keys=this.keys.filter(function(i){return!HUe(i,r)}),this.deleteByPath(this.cache,r)}}]),n}();re(eY,"MAX_CACHE_SIZE",20);re(eY,"MAX_CACHE_OFFSET",5);var Jne=0,Kbe=function(){function n(e){st(this,n),re(this,"derivatives",void 0),re(this,"id",void 0),this.derivatives=Array.isArray(e)?e:[e],this.id=Jne,e.length===0&&(e.length>0,void 0),Jne+=1}return lt(n,[{key:"getDerivativeToken",value:function(r){return this.derivatives.reduce(function(i,a){return a(r,i)},void 0)}}]),n}(),p5=new eY;function vG(n){var e=Array.isArray(n)?n:[n];return p5.has(e)||p5.set(e,new Kbe(e)),p5.get(e)}var WUe=new WeakMap,g5={};function qUe(n,e){for(var r=WUe,i=0;i<e.length;i+=1){var a=e[i];r.has(a)||r.set(a,new WeakMap),r=r.get(a)}return r.has(g5)||r.set(g5,n()),r.get(g5)}var ere=new WeakMap;function k2(n){var e=ere.get(n)||"";return e||(Object.keys(n).forEach(function(r){var i=n[r];e+=r,i instanceof Kbe?e+=i.id:i&&vn(i)==="object"?e+=k2(i):e+=i}),e=FE(e),ere.set(n,e)),e}function tre(n,e){return FE("".concat(e,"_").concat(k2(n)))}var yG=yl();function Qe(n){return typeof n=="number"?"".concat(n,"px"):n}function TN(n,e,r){var i,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(o)return n;var s=se(se({},a),{},(i={},re(i,kx,e),re(i,jd,r),i)),l=Object.keys(s).map(function(c){var u=s[c];return u?"".concat(c,'="').concat(u,'"'):null}).filter(function(c){return c}).join(" ");return"<style ".concat(l,">").concat(n,"</style>")}var oP=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(r?"".concat(r,"-"):"").concat(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},YUe=function(e,r,i){return Object.keys(e).length?".".concat(r).concat(i!=null&&i.scope?".".concat(i.scope):"","{").concat(Object.entries(e).map(function(a){var o=fe(a,2),s=o[0],l=o[1];return"".concat(s,":").concat(l,";")}).join(""),"}"):""},Zbe=function(e,r,i){var a={},o={};return Object.entries(e).forEach(function(s){var l,c,u=fe(s,2),d=u[0],f=u[1];if(i!=null&&(l=i.preserve)!==null&&l!==void 0&&l[d])o[d]=f;else if((typeof f=="string"||typeof f=="number")&&!(i!=null&&(c=i.ignore)!==null&&c!==void 0&&c[d])){var h,p=oP(d,i==null?void 0:i.prefix);a[p]=typeof f=="number"&&!(i!=null&&(h=i.unitless)!==null&&h!==void 0&&h[d])?"".concat(f,"px"):String(f),o[d]="var(".concat(p,")")}}),[o,YUe(a,r,{scope:i==null?void 0:i.scope})]},nre=yl()?C.useLayoutEffect:C.useEffect,Dr=function(e,r){var i=C.useRef(!0);nre(function(){return e(i.current)},r),nre(function(){return i.current=!1,function(){i.current=!0}},[])},ax=function(e,r){Dr(function(i){if(!i)return e()},r)},XUe=se({},ny),rre=XUe.useInsertionEffect,KUe=function(e,r,i){C.useMemo(e,i),Dr(function(){return r(!0)},i)},ZUe=rre?function(n,e,r){return rre(function(){return n(),e()},r)}:KUe,QUe=se({},ny),JUe=QUe.useInsertionEffect,eVe=function(e){var r=[],i=!1;function a(o){i||r.push(o)}return C.useEffect(function(){return i=!1,function(){i=!0,r.length&&r.forEach(function(o){return o()})}},e),a},tVe=function(){return function(e){e()}},nVe=typeof JUe<"u"?eVe:tVe;function tY(n,e,r,i,a){var o=C.useContext(cM),s=o.cache,l=[n].concat(ot(e)),c=mG(l),u=nVe([c]),d=function(g){s.opUpdate(c,function(m){var v=m||[void 0,void 0],y=fe(v,2),b=y[0],x=b===void 0?0:b,_=y[1],S=_,M=S||r(),E=[x,M];return g?g(E):E})};C.useMemo(function(){d()},[c]);var f=s.opGet(c),h=f[1];return ZUe(function(){a==null||a(h)},function(p){return d(function(g){var m=fe(g,2),v=m[0],y=m[1];return p&&v===0&&(a==null||a(h)),[v+1,y]}),function(){s.opUpdate(c,function(g){var m=g||[],v=fe(m,2),y=v[0],b=y===void 0?0:y,x=v[1],_=b-1;return _===0?(u(function(){(p||!s.opGet(c))&&(i==null||i(x,!1))}),null):[b-1,x]})}},[c]),h}var rVe={},iVe="css",s0=new Map;function aVe(n){s0.set(n,(s0.get(n)||0)+1)}function oVe(n,e){if(typeof document<"u"){var r=document.querySelectorAll("style[".concat(kx,'="').concat(n,'"]'));r.forEach(function(i){if(i[em]===e){var a;(a=i.parentNode)===null||a===void 0||a.removeChild(i)}})}}var sVe=0;function lVe(n,e){s0.set(n,(s0.get(n)||0)-1);var r=Array.from(s0.keys()),i=r.filter(function(a){var o=s0.get(a)||0;return o<=0});r.length-i.length>sVe&&i.forEach(function(a){oVe(a,e),s0.delete(a)})}var cVe=function(e,r,i,a){var o=i.getDerivativeToken(e),s=se(se({},o),r);return a&&(s=a(s)),s},Qbe="token";function uVe(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=C.useContext(cM),a=i.cache.instanceId,o=i.container,s=r.salt,l=s===void 0?"":s,c=r.override,u=c===void 0?rVe:c,d=r.formatToken,f=r.getComputedToken,h=r.cssVar,p=qUe(function(){return Object.assign.apply(Object,[{}].concat(ot(e)))},e),g=k2(p),m=k2(u),v=h?k2(h):"",y=tY(Qbe,[l,n.id,g,m,v],function(){var b,x=f?f(p,u,n):cVe(p,u,n,d),_=se({},x),S="";if(h){var M=Zbe(x,h.key,{prefix:h.prefix,ignore:h.ignore,unitless:h.unitless,preserve:h.preserve}),E=fe(M,2);x=E[0],S=E[1]}var T=tre(x,l);x._tokenKey=T,_._tokenKey=tre(_,l);var P=(b=h==null?void 0:h.key)!==null&&b!==void 0?b:T;x._themeKey=P,aVe(P);var A="".concat(iVe,"-").concat(FE(T));return x._hashId=A,[x,A,_,S,(h==null?void 0:h.key)||""]},function(b){lVe(b[0]._themeKey,a)},function(b){var x=fe(b,4),_=x[0],S=x[3];if(h&&S){var M=bp(S,FE("css-variables-".concat(_._themeKey)),{mark:jd,prepend:"queue",attachTo:o,priority:-999});M[em]=a,M.setAttribute(kx,_._themeKey)}});return y}var dVe=function(e,r,i){var a=fe(e,5),o=a[2],s=a[3],l=a[4],c=i||{},u=c.plain;if(!s)return null;var d=o._tokenKey,f=-999,h={"data-rc-order":"prependQueue","data-rc-priority":"".concat(f)},p=TN(s,l,d,h,u);return[f,d,p]},fVe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Jbe="comm",exe="rule",txe="decl",hVe="@import",pVe="@namespace",gVe="@keyframes",mVe="@layer",nxe=Math.abs,nY=String.fromCharCode;function rxe(n){return n.trim()}function sP(n,e,r){return n.replace(e,r)}function vVe(n,e,r){return n.indexOf(e,r)}function ox(n,e){return n.charCodeAt(e)|0}function Fx(n,e,r){return n.slice(e,r)}function Tf(n){return n.length}function yVe(n){return n.length}function v3(n,e){return e.push(n),n}var g4=1,$x=1,ixe=0,Gu=0,oo=0,I_="";function rY(n,e,r,i,a,o,s,l){return{value:n,root:e,parent:r,type:i,props:a,children:o,line:g4,column:$x,length:s,return:"",siblings:l}}function bVe(){return oo}function xVe(){return oo=Gu>0?ox(I_,--Gu):0,$x--,oo===10&&($x=1,g4--),oo}function Hd(){return oo=Gu<ixe?ox(I_,Gu++):0,$x++,oo===10&&($x=1,g4++),oo}function tm(){return ox(I_,Gu)}function lP(){return Gu}function m4(n,e){return Fx(I_,n,e)}function BE(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function _Ve(n){return g4=$x=1,ixe=Tf(I_=n),Gu=0,[]}function wVe(n){return I_="",n}function m5(n){return rxe(m4(Gu-1,bG(n===91?n+2:n===40?n+1:n)))}function SVe(n){for(;(oo=tm())&&oo<33;)Hd();return BE(n)>2||BE(oo)>3?"":" "}function EVe(n,e){for(;--e&&Hd()&&!(oo<48||oo>102||oo>57&&oo<65||oo>70&&oo<97););return m4(n,lP()+(e<6&&tm()==32&&Hd()==32))}function bG(n){for(;Hd();)switch(oo){case n:return Gu;case 34:case 39:n!==34&&n!==39&&bG(oo);break;case 40:n===41&&bG(n);break;case 92:Hd();break}return Gu}function CVe(n,e){for(;Hd()&&n+oo!==57;)if(n+oo===84&&tm()===47)break;return"/*"+m4(e,Gu-1)+"*"+nY(n===47?n:Hd())}function MVe(n){for(;!BE(tm());)Hd();return m4(n,Gu)}function TVe(n){return wVe(cP("",null,null,null,[""],n=_Ve(n),0,[0],n))}function cP(n,e,r,i,a,o,s,l,c){for(var u=0,d=0,f=s,h=0,p=0,g=0,m=1,v=1,y=1,b=0,x="",_=a,S=o,M=i,E=x;v;)switch(g=b,b=Hd()){case 40:if(g!=108&&ox(E,f-1)==58){vVe(E+=sP(m5(b),"&","&\f"),"&\f",nxe(u?l[u-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:E+=m5(b);break;case 9:case 10:case 13:case 32:E+=SVe(g);break;case 92:E+=EVe(lP()-1,7);continue;case 47:switch(tm()){case 42:case 47:v3(AVe(CVe(Hd(),lP()),e,r,c),c),(BE(g||1)==5||BE(tm()||1)==5)&&Tf(E)&&Fx(E,-1,void 0)!==" "&&(E+=" ");break;default:E+="/"}break;case 123*m:l[u++]=Tf(E)*y;case 125*m:case 59:case 0:switch(b){case 0:case 125:v=0;case 59+d:y==-1&&(E=sP(E,/\f/g,"")),p>0&&(Tf(E)-f||m===0&&g===47)&&v3(p>32?are(E+";",i,r,f-1,c):are(sP(E," ","")+";",i,r,f-2,c),c);break;case 59:E+=";";default:if(v3(M=ire(E,e,r,u,d,a,l,x,_=[],S=[],f,o),o),b===123)if(d===0)cP(E,e,M,M,_,o,f,l,S);else{switch(h){case 99:if(ox(E,3)===110)break;case 108:if(ox(E,2)===97)break;default:d=0;case 100:case 109:case 115:}d?cP(n,M,M,i&&v3(ire(n,M,M,0,0,a,l,x,a,_=[],f,S),S),a,S,f,l,i?_:S):cP(E,M,M,M,[""],S,0,l,S)}}u=d=p=0,m=y=1,x=E="",f=s;break;case 58:f=1+Tf(E),p=g;default:if(m<1){if(b==123)--m;else if(b==125&&m++==0&&xVe()==125)continue}switch(E+=nY(b),b*m){case 38:y=d>0?1:(E+="\f",-1);break;case 44:l[u++]=(Tf(E)-1)*y,y=1;break;case 64:tm()===45&&(E+=m5(Hd())),h=tm(),d=f=Tf(x=E+=MVe(lP())),b++;break;case 45:g===45&&Tf(E)==2&&(m=0)}}return o}function ire(n,e,r,i,a,o,s,l,c,u,d,f){for(var h=a-1,p=a===0?o:[""],g=yVe(p),m=0,v=0,y=0;m<i;++m)for(var b=0,x=Fx(n,h+1,h=nxe(v=s[m])),_=n;b<g;++b)(_=rxe(v>0?p[b]+" "+x:sP(x,/&\f/g,p[b])))&&(c[y++]=_);return rY(n,e,r,a===0?exe:l,c,u,d,f)}function AVe(n,e,r,i){return rY(n,e,r,Jbe,nY(bVe()),Fx(n,2,-2),0,i)}function are(n,e,r,i,a){return rY(n,e,r,txe,Fx(n,0,i),Fx(n,i+1,-1),i,a)}function xG(n,e){for(var r="",i=0;i<n.length;i++)r+=e(n[i],i,n,e)||"";return r}function RVe(n,e,r,i){switch(n.type){case mVe:if(n.children.length)break;case hVe:case pVe:case txe:return n.return=n.return||n.value;case Jbe:return"";case gVe:return n.return=n.value+"{"+xG(n.children,i)+"}";case exe:if(!Tf(n.value=n.props.join(",")))return""}return Tf(r=xG(n.children,i))?n.return=n.value+"{"+r+"}":""}var ore="data-ant-cssinjs-cache-path",axe="_FILE_STYLE__",B0,oxe=!0;function PVe(){if(!B0&&(B0={},yl())){var n=document.createElement("div");n.className=ore,n.style.position="fixed",n.style.visibility="hidden",n.style.top="-9999px",document.body.appendChild(n);var e=getComputedStyle(n).content||"";e=e.replace(/^"/,"").replace(/"$/,""),e.split(";").forEach(function(a){var o=a.split(":"),s=fe(o,2),l=s[0],c=s[1];B0[l]=c});var r=document.querySelector("style[".concat(ore,"]"));if(r){var i;oxe=!1,(i=r.parentNode)===null||i===void 0||i.removeChild(r)}document.body.removeChild(n)}}function NVe(n){return PVe(),!!B0[n]}function OVe(n){var e=B0[n],r=null;if(e&&yl())if(oxe)r=axe;else{var i=document.querySelector("style[".concat(jd,'="').concat(B0[n],'"]'));i?r=i.innerHTML:delete B0[n]}return[r,e]}var IVe="_skip_check_",sxe="_multi_value_";function uP(n){var e=xG(TVe(n),RVe);return e.replace(/\{%%%\:[^;];}/g,";")}function DVe(n){return vn(n)==="object"&&n&&(IVe in n||sxe in n)}function sre(n,e,r){if(!e)return n;var i=".".concat(e),a=r==="low"?":where(".concat(i,")"):i,o=n.split(",").map(function(s){var l,c=s.trim().split(/\s+/),u=c[0]||"",d=((l=u.match(/^\w+/))===null||l===void 0?void 0:l[0])||"";return u="".concat(d).concat(a).concat(u.slice(d.length)),[u].concat(ot(c.slice(1))).join(" ")});return o.join(",")}var LVe=function n(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},a=i.root,o=i.injectHash,s=i.parentSelectors,l=r.hashId,c=r.layer;r.path;var u=r.hashPriority,d=r.transformers,f=d===void 0?[]:d;r.linters;var h="",p={};function g(y){var b=y.getName(l);if(!p[b]){var x=n(y.style,r,{root:!1,parentSelectors:s}),_=fe(x,1),S=_[0];p[b]="@keyframes ".concat(y.getName(l)).concat(S)}}function m(y){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return y.forEach(function(x){Array.isArray(x)?m(x,b):x&&b.push(x)}),b}var v=m(Array.isArray(e)?e:[e]);return v.forEach(function(y){var b=typeof y=="string"&&!a?{}:y;if(typeof b=="string")h+="".concat(b,`
`);else if(b._keyframe)g(b);else{var x=f.reduce(function(_,S){var M;return(S==null||(M=S.visit)===null||M===void 0?void 0:M.call(S,_))||_},b);Object.keys(x).forEach(function(_){var S=x[_];if(vn(S)==="object"&&S&&(_!=="animationName"||!S._keyframe)&&!DVe(S)){var M=!1,E=_.trim(),T=!1;(a||o)&&l?E.startsWith("@")?M=!0:E==="&"?E=sre("",l,u):E=sre(_,l,u):a&&!l&&(E==="&"||E==="")&&(E="",T=!0);var P=n(S,r,{root:T,injectHash:M,parentSelectors:[].concat(ot(s),[E])}),A=fe(P,2),N=A[0],O=A[1];p=se(se({},p),O),h+="".concat(E).concat(N)}else{let k=function($,B){var F=$.replace(/[A-Z]/g,function(z){return"-".concat(z.toLowerCase())}),G=B;!fVe[$]&&typeof G=="number"&&G!==0&&(G="".concat(G,"px")),$==="animationName"&&B!==null&&B!==void 0&&B._keyframe&&(g(B),G=B.getName(l)),h+="".concat(F,":").concat(G,";")};var I,D=(I=S==null?void 0:S.value)!==null&&I!==void 0?I:S;vn(S)==="object"&&S!==null&&S!==void 0&&S[sxe]&&Array.isArray(D)?D.forEach(function($){k(_,$)}):k(_,D)}})}}),a?c&&(h&&(h="@layer ".concat(c.name," {").concat(h,"}")),c.dependencies&&(p["@layer ".concat(c.name)]=c.dependencies.map(function(y){return"@layer ".concat(y,", ").concat(c.name,";")}).join(`
`))):h="{".concat(h,"}"),[h,p]};function lxe(n,e){return FE("".concat(n.join("%")).concat(e))}function kVe(){return null}var cxe="style";function _G(n,e){var r=n.token,i=n.path,a=n.hashId,o=n.layer,s=n.nonce,l=n.clientOnly,c=n.order,u=c===void 0?0:c,d=C.useContext(cM),f=d.autoClear;d.mock;var h=d.defaultCache,p=d.hashPriority,g=d.container,m=d.ssrInline,v=d.transformers,y=d.linters,b=d.cache,x=d.layer,_=r._tokenKey,S=[_];x&&S.push("layer"),S.push.apply(S,ot(i));var M=yG,E=tY(cxe,S,function(){var O=S.join("|");if(NVe(O)){var I=OVe(O),D=fe(I,2),k=D[0],$=D[1];if(k)return[k,_,$,{},l,u]}var B=e(),F=LVe(B,{hashId:a,hashPriority:p,layer:x?o:void 0,path:i.join("-"),transformers:v,linters:y}),G=fe(F,2),z=G[0],U=G[1],H=uP(z),X=lxe(S,H);return[H,_,X,U,l,u]},function(O,I){var D=fe(O,3),k=D[2];(I||f)&&yG&&$E(k,{mark:jd})},function(O){var I=fe(O,4),D=I[0];I[1];var k=I[2],$=I[3];if(M&&D!==axe){var B={mark:jd,prepend:x?!1:"queue",attachTo:g,priority:u},F=typeof s=="function"?s():s;F&&(B.csp={nonce:F});var G=[],z=[];Object.keys($).forEach(function(H){H.startsWith("@layer")?G.push(H):z.push(H)}),G.forEach(function(H){bp(uP($[H]),"_layer-".concat(H),se(se({},B),{},{prepend:!0}))});var U=bp(D,k,B);U[em]=b.instanceId,U.setAttribute(kx,_),z.forEach(function(H){bp(uP($[H]),"_effect-".concat(H),B)})}}),T=fe(E,3),P=T[0],A=T[1],N=T[2];return function(O){var I;if(!m||M||!h)I=C.createElement(kVe,null);else{var D;I=C.createElement("style",Mt({},(D={},re(D,kx,A),re(D,jd,N),D),{dangerouslySetInnerHTML:{__html:P}}))}return C.createElement(C.Fragment,null,I,O)}}var FVe=function(e,r,i){var a=fe(e,6),o=a[0],s=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=i||{},h=f.plain;if(u)return null;var p=o,g={"data-rc-order":"prependQueue","data-rc-priority":"".concat(d)};return p=TN(o,s,l,g,h),c&&Object.keys(c).forEach(function(m){if(!r[m]){r[m]=!0;var v=uP(c[m]),y=TN(v,s,"_effect-".concat(m),g,h);m.startsWith("@layer")?p=y+p:p+=y}}),[d,l,p]},uxe="cssVar",$Ve=function(e,r){var i=e.key,a=e.prefix,o=e.unitless,s=e.ignore,l=e.token,c=e.scope,u=c===void 0?"":c,d=C.useContext(cM),f=d.cache.instanceId,h=d.container,p=l._tokenKey,g=[].concat(ot(e.path),[i,u,p]),m=tY(uxe,g,function(){var v=r(),y=Zbe(v,i,{prefix:a,unitless:o,ignore:s,scope:u}),b=fe(y,2),x=b[0],_=b[1],S=lxe(g,_);return[x,_,S,i]},function(v){var y=fe(v,3),b=y[2];yG&&$E(b,{mark:jd})},function(v){var y=fe(v,3),b=y[1],x=y[2];if(b){var _=bp(b,x,{mark:jd,prepend:"queue",attachTo:h,priority:-999});_[em]=f,_.setAttribute(kx,i)}});return m},BVe=function(e,r,i){var a=fe(e,4),o=a[1],s=a[2],l=a[3],c=i||{},u=c.plain;if(!o)return null;var d=-999,f={"data-rc-order":"prependQueue","data-rc-priority":"".concat(d)},h=TN(o,l,s,f,u);return[d,s,h]},tS;tS={},re(tS,cxe,FVe),re(tS,Qbe,dVe),re(tS,uxe,BVe);var qr=function(){function n(e,r){st(this,n),re(this,"name",void 0),re(this,"style",void 0),re(this,"_keyframe",!0),this.name=e,this.style=r}return lt(n,[{key:"getName",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return r?"".concat(r,"-").concat(this.name):this.name}}]),n}();function w1(n){return n.notSplit=!0,n}w1(["borderTop","borderBottom"]),w1(["borderTop"]),w1(["borderBottom"]),w1(["borderLeft","borderRight"]),w1(["borderLeft"]),w1(["borderRight"]);var iY=C.createContext({});function dxe(n){return Hbe(n)||Ube(n)||h4(n)||Wbe()}function Lu(n,e){for(var r=n,i=0;i<e.length;i+=1){if(r==null)return;r=r[e[i]]}return r}function fxe(n,e,r,i){if(!e.length)return r;var a=dxe(e),o=a[0],s=a.slice(1),l;return!n&&typeof o=="number"?l=[]:Array.isArray(n)?l=ot(n):l=se({},n),i&&r===void 0&&s.length===1?delete l[o][s[0]]:l[o]=fxe(l[o],s,r,i),l}function Eu(n,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return e.length&&i&&r===void 0&&!Lu(n,e.slice(0,-1))?n:fxe(n,e,r,i)}function zVe(n){return vn(n)==="object"&&n!==null&&Object.getPrototypeOf(n)===Object.prototype}function lre(n){return Array.isArray(n)?[]:{}}var UVe=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function Fb(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=lre(e[0]);return e.forEach(function(a){function o(s,l){var c=new Set(l),u=Lu(a,s),d=Array.isArray(u);if(d||zVe(u)){if(!c.has(u)){c.add(u);var f=Lu(i,s);d?i=Eu(i,s,[]):(!f||vn(f)!=="object")&&(i=Eu(i,s,lre(u))),UVe(u).forEach(function(h){o([].concat(ot(s),[h]),c)})}}else i=Eu(i,s,u)}o([])}),i}function VVe(){}const GVe=C.createContext({}),v4=()=>{const n=()=>{};return n.deprecated=VVe,n},hxe=C.createContext(void 0);var jVe={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},HVe={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},WVe=se(se({},HVe),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",week:"Week",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const pxe={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},AN={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},WVe),timePickerLocale:Object.assign({},pxe)},hc="${label} is not a valid ${type}",zm={locale:"en",Pagination:jVe,DatePicker:AN,TimePicker:pxe,Calendar:AN,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckAll:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:hc,method:hc,array:hc,object:hc,number:hc,date:hc,boolean:hc,integer:hc,float:hc,regexp:hc,email:hc,url:hc,hex:hc},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};let dP=Object.assign({},zm.Modal),fP=[];const cre=()=>fP.reduce((n,e)=>Object.assign(Object.assign({},n),e),zm.Modal);function qVe(n){if(n){const e=Object.assign({},n);return fP.push(e),dP=cre(),()=>{fP=fP.filter(r=>r!==e),dP=cre()}}dP=Object.assign({},zm.Modal)}function gxe(){return dP}const aY=C.createContext(void 0),Wp=(n,e)=>{const r=C.useContext(aY),i=C.useMemo(()=>{var o;const s=e||zm[n],l=(o=r==null?void 0:r[n])!==null&&o!==void 0?o:{};return Object.assign(Object.assign({},typeof s=="function"?s():s),l||{})},[n,e,r]),a=C.useMemo(()=>{const o=r==null?void 0:r.locale;return r!=null&&r.exist&&!o?zm.locale:o},[r]);return[i,a]},YVe="internalMark",XVe=n=>{const{locale:e={},children:r,_ANT_MARK__:i}=n;C.useEffect(()=>qVe(e==null?void 0:e.Modal),[e]);const a=C.useMemo(()=>Object.assign(Object.assign({},e),{exist:!0}),[e]);return C.createElement(aY.Provider,{value:a},r)},oY={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},zE=Object.assign(Object.assign({},oY),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),Ho=Math.round;function v5(n,e){const r=n.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],i=r.map(a=>parseFloat(a));for(let a=0;a<3;a+=1)i[a]=e(i[a]||0,r[a]||"",a);return r[3]?i[3]=r[3].includes("%")?i[3]/100:i[3]:i[3]=1,i}const ure=(n,e,r)=>r===0?n:n/100;function nS(n,e){const r=e||255;return n>r?r:n<0?0:n}class Zr{constructor(e){re(this,"isValid",!0),re(this,"r",0),re(this,"g",0),re(this,"b",0),re(this,"a",1),re(this,"_h",void 0),re(this,"_s",void 0),re(this,"_l",void 0),re(this,"_v",void 0),re(this,"_max",void 0),re(this,"_min",void 0),re(this,"_brightness",void 0);function r(i){return i[0]in e&&i[1]in e&&i[2]in e}if(e)if(typeof e=="string"){let a=function(o){return i.startsWith(o)};const i=e.trim();/^#?[A-F\d]{3,8}$/i.test(i)?this.fromHexString(i):a("rgb")?this.fromRgbString(i):a("hsl")?this.fromHslString(i):(a("hsv")||a("hsb"))&&this.fromHsvString(i)}else if(e instanceof Zr)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(r("rgb"))this.r=nS(e.r),this.g=nS(e.g),this.b=nS(e.b),this.a=typeof e.a=="number"?nS(e.a,1):1;else if(r("hsl"))this.fromHsl(e);else if(r("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const r=this.toHsv();return r.h=e,this._c(r)}getLuminance(){function e(o){const s=o/255;return s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4)}const r=e(this.r),i=e(this.g),a=e(this.b);return .2126*r+.7152*i+.0722*a}getHue(){if(typeof this._h>"u"){const e=this.getMax()-this.getMin();e===0?this._h=0:this._h=Ho(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){const r=this.getHue(),i=this.getSaturation();let a=this.getLightness()-e/100;return a<0&&(a=0),this._c({h:r,s:i,l:a,a:this.a})}lighten(e=10){const r=this.getHue(),i=this.getSaturation();let a=this.getLightness()+e/100;return a>1&&(a=1),this._c({h:r,s:i,l:a,a:this.a})}mix(e,r=50){const i=this._c(e),a=r/100,o=l=>(i[l]-this[l])*a+this[l],s={r:Ho(o("r")),g:Ho(o("g")),b:Ho(o("b")),a:Ho(o("a")*100)/100};return this._c(s)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const r=this._c(e),i=this.a+r.a*(1-this.a),a=o=>Ho((this[o]*this.a+r[o]*r.a*(1-this.a))/i);return this._c({r:a("r"),g:a("g"),b:a("b"),a:i})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const r=(this.r||0).toString(16);e+=r.length===2?r:"0"+r;const i=(this.g||0).toString(16);e+=i.length===2?i:"0"+i;const a=(this.b||0).toString(16);if(e+=a.length===2?a:"0"+a,typeof this.a=="number"&&this.a>=0&&this.a<1){const o=Ho(this.a*255).toString(16);e+=o.length===2?o:"0"+o}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),r=Ho(this.getSaturation()*100),i=Ho(this.getLightness()*100);return this.a!==1?`hsla(${e},${r}%,${i}%,${this.a})`:`hsl(${e},${r}%,${i}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,r,i){const a=this.clone();return a[e]=nS(r,i),a}_c(e){return new this.constructor(e)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const r=e.replace("#","");function i(a,o){return parseInt(r[a]+r[o||a],16)}r.length<6?(this.r=i(0),this.g=i(1),this.b=i(2),this.a=r[3]?i(3)/255:1):(this.r=i(0,1),this.g=i(2,3),this.b=i(4,5),this.a=r[6]?i(6,7)/255:1)}fromHsl({h:e,s:r,l:i,a}){if(this._h=e%360,this._s=r,this._l=i,this.a=typeof a=="number"?a:1,r<=0){const h=Ho(i*255);this.r=h,this.g=h,this.b=h}let o=0,s=0,l=0;const c=e/60,u=(1-Math.abs(2*i-1))*r,d=u*(1-Math.abs(c%2-1));c>=0&&c<1?(o=u,s=d):c>=1&&c<2?(o=d,s=u):c>=2&&c<3?(s=u,l=d):c>=3&&c<4?(s=d,l=u):c>=4&&c<5?(o=d,l=u):c>=5&&c<6&&(o=u,l=d);const f=i-u/2;this.r=Ho((o+f)*255),this.g=Ho((s+f)*255),this.b=Ho((l+f)*255)}fromHsv({h:e,s:r,v:i,a}){this._h=e%360,this._s=r,this._v=i,this.a=typeof a=="number"?a:1;const o=Ho(i*255);if(this.r=o,this.g=o,this.b=o,r<=0)return;const s=e/60,l=Math.floor(s),c=s-l,u=Ho(i*(1-r)*255),d=Ho(i*(1-r*c)*255),f=Ho(i*(1-r*(1-c))*255);switch(l){case 0:this.g=f,this.b=u;break;case 1:this.r=d,this.b=u;break;case 2:this.r=u,this.b=f;break;case 3:this.r=u,this.g=d;break;case 4:this.r=f,this.g=u;break;case 5:default:this.g=u,this.b=d;break}}fromHsvString(e){const r=v5(e,ure);this.fromHsv({h:r[0],s:r[1],v:r[2],a:r[3]})}fromHslString(e){const r=v5(e,ure);this.fromHsl({h:r[0],s:r[1],l:r[2],a:r[3]})}fromRgbString(e){const r=v5(e,(i,a)=>a.includes("%")?Ho(i/100*255):i);this.r=r[0],this.g=r[1],this.b=r[2],this.a=r[3]}}var y3=2,dre=.16,KVe=.05,ZVe=.05,QVe=.15,mxe=5,vxe=4,JVe=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function fre(n,e,r){var i;return Math.round(n.h)>=60&&Math.round(n.h)<=240?i=r?Math.round(n.h)-y3*e:Math.round(n.h)+y3*e:i=r?Math.round(n.h)+y3*e:Math.round(n.h)-y3*e,i<0?i+=360:i>=360&&(i-=360),i}function hre(n,e,r){if(n.h===0&&n.s===0)return n.s;var i;return r?i=n.s-dre*e:e===vxe?i=n.s+dre:i=n.s+KVe*e,i>1&&(i=1),r&&e===mxe&&i>.1&&(i=.1),i<.06&&(i=.06),Math.round(i*100)/100}function pre(n,e,r){var i;return r?i=n.v+ZVe*e:i=n.v-QVe*e,i=Math.max(0,Math.min(1,i)),Math.round(i*100)/100}function ly(n){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[],i=new Zr(n),a=i.toHsv(),o=mxe;o>0;o-=1){var s=new Zr({h:fre(a,o,!0),s:hre(a,o,!0),v:pre(a,o,!0)});r.push(s)}r.push(i);for(var l=1;l<=vxe;l+=1){var c=new Zr({h:fre(a,l),s:hre(a,l),v:pre(a,l)});r.push(c)}return e.theme==="dark"?JVe.map(function(u){var d=u.index,f=u.amount;return new Zr(e.backgroundColor||"#141414").mix(r[d],f).toHexString()}):r.map(function(u){return u.toHexString()})}var y5={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},wG=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];wG.primary=wG[5];var SG=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];SG.primary=SG[5];var EG=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];EG.primary=EG[5];var CG=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];CG.primary=CG[5];var MG=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];MG.primary=MG[5];var TG=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];TG.primary=TG[5];var AG=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];AG.primary=AG[5];var RG=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];RG.primary=RG[5];var RN=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];RN.primary=RN[5];var PG=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];PG.primary=PG[5];var NG=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];NG.primary=NG[5];var OG=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];OG.primary=OG[5];var IG=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];IG.primary=IG[5];var b5={red:wG,volcano:SG,orange:EG,gold:CG,yellow:MG,lime:TG,green:AG,cyan:RG,blue:RN,geekblue:PG,purple:NG,magenta:OG,grey:IG};function yxe(n,e){let{generateColorPalettes:r,generateNeutralColorPalettes:i}=e;const{colorSuccess:a,colorWarning:o,colorError:s,colorInfo:l,colorPrimary:c,colorBgBase:u,colorTextBase:d}=n,f=r(c),h=r(a),p=r(o),g=r(s),m=r(l),v=i(u,d),y=n.colorLink||n.colorInfo,b=r(y),x=new Zr(g[1]).mix(new Zr(g[3]),50).toHexString();return Object.assign(Object.assign({},v),{colorPrimaryBg:f[1],colorPrimaryBgHover:f[2],colorPrimaryBorder:f[3],colorPrimaryBorderHover:f[4],colorPrimaryHover:f[5],colorPrimary:f[6],colorPrimaryActive:f[7],colorPrimaryTextHover:f[8],colorPrimaryText:f[9],colorPrimaryTextActive:f[10],colorSuccessBg:h[1],colorSuccessBgHover:h[2],colorSuccessBorder:h[3],colorSuccessBorderHover:h[4],colorSuccessHover:h[4],colorSuccess:h[6],colorSuccessActive:h[7],colorSuccessTextHover:h[8],colorSuccessText:h[9],colorSuccessTextActive:h[10],colorErrorBg:g[1],colorErrorBgHover:g[2],colorErrorBgFilledHover:x,colorErrorBgActive:g[3],colorErrorBorder:g[3],colorErrorBorderHover:g[4],colorErrorHover:g[5],colorError:g[6],colorErrorActive:g[7],colorErrorTextHover:g[8],colorErrorText:g[9],colorErrorTextActive:g[10],colorWarningBg:p[1],colorWarningBgHover:p[2],colorWarningBorder:p[3],colorWarningBorderHover:p[4],colorWarningHover:p[4],colorWarning:p[6],colorWarningActive:p[7],colorWarningTextHover:p[8],colorWarningText:p[9],colorWarningTextActive:p[10],colorInfoBg:m[1],colorInfoBgHover:m[2],colorInfoBorder:m[3],colorInfoBorderHover:m[4],colorInfoHover:m[4],colorInfo:m[6],colorInfoActive:m[7],colorInfoTextHover:m[8],colorInfoText:m[9],colorInfoTextActive:m[10],colorLinkHover:b[4],colorLink:b[6],colorLinkActive:b[7],colorBgMask:new Zr("#000").setA(.45).toRgbString(),colorWhite:"#fff"})}const eGe=n=>{let e=n,r=n,i=n,a=n;return n<6&&n>=5?e=n+1:n<16&&n>=6?e=n+2:n>=16&&(e=16),n<7&&n>=5?r=4:n<8&&n>=7?r=5:n<14&&n>=8?r=6:n<16&&n>=14?r=7:n>=16&&(r=8),n<6&&n>=2?i=1:n>=6&&(i=2),n>4&&n<8?a=4:n>=8&&(a=6),{borderRadius:n,borderRadiusXS:i,borderRadiusSM:r,borderRadiusLG:e,borderRadiusOuter:a}};function tGe(n){const{motionUnit:e,motionBase:r,borderRadius:i,lineWidth:a}=n;return Object.assign({motionDurationFast:`${(r+e).toFixed(1)}s`,motionDurationMid:`${(r+e*2).toFixed(1)}s`,motionDurationSlow:`${(r+e*3).toFixed(1)}s`,lineWidthBold:a+1},eGe(i))}const nGe=n=>{const{controlHeight:e}=n;return{controlHeightSM:e*.75,controlHeightXS:e*.5,controlHeightLG:e*1.25}};function hP(n){return(n+8)/n}function rGe(n){const e=Array.from({length:10}).map((r,i)=>{const a=i-1,o=n*Math.pow(Math.E,a/5),s=i>1?Math.floor(o):Math.ceil(o);return Math.floor(s/2)*2});return e[1]=n,e.map(r=>({size:r,lineHeight:hP(r)}))}const iGe=n=>{const e=rGe(n),r=e.map(d=>d.size),i=e.map(d=>d.lineHeight),a=r[1],o=r[0],s=r[2],l=i[1],c=i[0],u=i[2];return{fontSizeSM:o,fontSize:a,fontSizeLG:s,fontSizeXL:r[3],fontSizeHeading1:r[6],fontSizeHeading2:r[5],fontSizeHeading3:r[4],fontSizeHeading4:r[3],fontSizeHeading5:r[2],lineHeight:l,lineHeightLG:u,lineHeightSM:c,fontHeight:Math.round(l*a),fontHeightLG:Math.round(u*s),fontHeightSM:Math.round(c*o),lineHeightHeading1:i[6],lineHeightHeading2:i[5],lineHeightHeading3:i[4],lineHeightHeading4:i[3],lineHeightHeading5:i[2]}};function aGe(n){const{sizeUnit:e,sizeStep:r}=n;return{sizeXXL:e*(r+8),sizeXL:e*(r+4),sizeLG:e*(r+2),sizeMD:e*(r+1),sizeMS:e*r,size:e*r,sizeSM:e*(r-1),sizeXS:e*(r-2),sizeXXS:e*(r-3)}}const uu=(n,e)=>new Zr(n).setA(e).toRgbString(),rS=(n,e)=>new Zr(n).darken(e).toHexString(),oGe=n=>{const e=ly(n);return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[4],6:e[5],7:e[6],8:e[4],9:e[5],10:e[6]}},sGe=(n,e)=>{const r=n||"#fff",i=e||"#000";return{colorBgBase:r,colorTextBase:i,colorText:uu(i,.88),colorTextSecondary:uu(i,.65),colorTextTertiary:uu(i,.45),colorTextQuaternary:uu(i,.25),colorFill:uu(i,.15),colorFillSecondary:uu(i,.06),colorFillTertiary:uu(i,.04),colorFillQuaternary:uu(i,.02),colorBgSolid:uu(i,1),colorBgSolidHover:uu(i,.75),colorBgSolidActive:uu(i,.95),colorBgLayout:rS(r,4),colorBgContainer:rS(r,0),colorBgElevated:rS(r,0),colorBgSpotlight:uu(i,.85),colorBgBlur:"transparent",colorBorder:rS(r,15),colorBorderSecondary:rS(r,6)}};function sY(n){y5.pink=y5.magenta,b5.pink=b5.magenta;const e=Object.keys(oY).map(r=>{const i=n[r]===y5[r]?b5[r]:ly(n[r]);return Array.from({length:10},()=>1).reduce((a,o,s)=>(a[`${r}-${s+1}`]=i[s],a[`${r}${s+1}`]=i[s],a),{})}).reduce((r,i)=>(r=Object.assign(Object.assign({},r),i),r),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),e),yxe(n,{generateColorPalettes:oGe,generateNeutralColorPalettes:sGe})),iGe(n.fontSize)),aGe(n)),nGe(n)),tGe(n))}const bxe=vG(sY),PN={token:zE,override:{override:zE},hashed:!0},xxe=Je.createContext(PN),UE="ant",y4="anticon",lGe=["outlined","borderless","filled","underlined"],cGe=(n,e)=>e||(n?`${UE}-${n}`:UE),yr=C.createContext({getPrefixCls:cGe,iconPrefixCls:y4}),{Consumer:zQt}=yr,gre={};function Zu(n){const e=C.useContext(yr),{getPrefixCls:r,direction:i,getPopupContainer:a}=e,o=e[n];return Object.assign(Object.assign({classNames:gre,styles:gre},o),{getPrefixCls:r,direction:i,getPopupContainer:a})}const uGe=`-ant-${Date.now()}-${Math.random()}`;function dGe(n,e){const r={},i=(s,l)=>{let c=s.clone();return c=(l==null?void 0:l(c))||c,c.toRgbString()},a=(s,l)=>{const c=new Zr(s),u=ly(c.toRgbString());r[`${l}-color`]=i(c),r[`${l}-color-disabled`]=u[1],r[`${l}-color-hover`]=u[4],r[`${l}-color-active`]=u[6],r[`${l}-color-outline`]=c.clone().setA(.2).toRgbString(),r[`${l}-color-deprecated-bg`]=u[0],r[`${l}-color-deprecated-border`]=u[2]};if(e.primaryColor){a(e.primaryColor,"primary");const s=new Zr(e.primaryColor),l=ly(s.toRgbString());l.forEach((u,d)=>{r[`primary-${d+1}`]=u}),r["primary-color-deprecated-l-35"]=i(s,u=>u.lighten(35)),r["primary-color-deprecated-l-20"]=i(s,u=>u.lighten(20)),r["primary-color-deprecated-t-20"]=i(s,u=>u.tint(20)),r["primary-color-deprecated-t-50"]=i(s,u=>u.tint(50)),r["primary-color-deprecated-f-12"]=i(s,u=>u.setA(u.a*.12));const c=new Zr(l[0]);r["primary-color-active-deprecated-f-30"]=i(c,u=>u.setA(u.a*.3)),r["primary-color-active-deprecated-d-02"]=i(c,u=>u.darken(2))}return e.successColor&&a(e.successColor,"success"),e.warningColor&&a(e.warningColor,"warning"),e.errorColor&&a(e.errorColor,"error"),e.infoColor&&a(e.infoColor,"info"),`
  :root {
    ${Object.keys(r).map(s=>`--${n}-${s}: ${r[s]};`).join(`
`)}
  }
  `.trim()}function fGe(n,e){const r=dGe(n,e);yl()&&bp(r,`${uGe}-dynamic-theme`)}const ju=C.createContext(!1),lY=n=>{let{children:e,disabled:r}=n;const i=C.useContext(ju);return C.createElement(ju.Provider,{value:r??i},e)},cy=C.createContext(void 0),hGe=n=>{let{children:e,size:r}=n;const i=C.useContext(cy);return C.createElement(cy.Provider,{value:r||i},e)};function pGe(){const n=C.useContext(ju),e=C.useContext(cy);return{componentDisabled:n,componentSize:e}}var _xe=lt(function n(){st(this,n)}),wxe="CALC_UNIT",gGe=new RegExp(wxe,"g");function x5(n){return typeof n=="number"?"".concat(n).concat(wxe):n}var mGe=function(n){$n(r,n);var e=iv(r);function r(i,a){var o;st(this,r),o=e.call(this),re(Cr(o),"result",""),re(Cr(o),"unitlessCssVar",void 0),re(Cr(o),"lowPriority",void 0);var s=vn(i);return o.unitlessCssVar=a,i instanceof r?o.result="(".concat(i.result,")"):s==="number"?o.result=x5(i):s==="string"&&(o.result=i),o}return lt(r,[{key:"add",value:function(a){return a instanceof r?this.result="".concat(this.result," + ").concat(a.getResult()):(typeof a=="number"||typeof a=="string")&&(this.result="".concat(this.result," + ").concat(x5(a))),this.lowPriority=!0,this}},{key:"sub",value:function(a){return a instanceof r?this.result="".concat(this.result," - ").concat(a.getResult()):(typeof a=="number"||typeof a=="string")&&(this.result="".concat(this.result," - ").concat(x5(a))),this.lowPriority=!0,this}},{key:"mul",value:function(a){return this.lowPriority&&(this.result="(".concat(this.result,")")),a instanceof r?this.result="".concat(this.result," * ").concat(a.getResult(!0)):(typeof a=="number"||typeof a=="string")&&(this.result="".concat(this.result," * ").concat(a)),this.lowPriority=!1,this}},{key:"div",value:function(a){return this.lowPriority&&(this.result="(".concat(this.result,")")),a instanceof r?this.result="".concat(this.result," / ").concat(a.getResult(!0)):(typeof a=="number"||typeof a=="string")&&(this.result="".concat(this.result," / ").concat(a)),this.lowPriority=!1,this}},{key:"getResult",value:function(a){return this.lowPriority||a?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(a){var o=this,s=a||{},l=s.unit,c=!0;return typeof l=="boolean"?c=l:Array.from(this.unitlessCssVar).some(function(u){return o.result.includes(u)})&&(c=!1),this.result=this.result.replace(gGe,c?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),r}(_xe),vGe=function(n){$n(r,n);var e=iv(r);function r(i){var a;return st(this,r),a=e.call(this),re(Cr(a),"result",0),i instanceof r?a.result=i.result:typeof i=="number"&&(a.result=i),a}return lt(r,[{key:"add",value:function(a){return a instanceof r?this.result+=a.result:typeof a=="number"&&(this.result+=a),this}},{key:"sub",value:function(a){return a instanceof r?this.result-=a.result:typeof a=="number"&&(this.result-=a),this}},{key:"mul",value:function(a){return a instanceof r?this.result*=a.result:typeof a=="number"&&(this.result*=a),this}},{key:"div",value:function(a){return a instanceof r?this.result/=a.result:typeof a=="number"&&(this.result/=a),this}},{key:"equal",value:function(){return this.result}}]),r}(_xe),yGe=function(e,r){var i=e==="css"?mGe:vGe;return function(a){return new i(a,r)}},mre=function(e,r){return"".concat([r,e.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function Lr(n){var e=C.useRef();e.current=n;var r=C.useCallback(function(){for(var i,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(i=e.current)===null||i===void 0?void 0:i.call.apply(i,[e].concat(o))},[]);return r}function uy(n){var e=C.useRef(!1),r=C.useState(n),i=fe(r,2),a=i[0],o=i[1];C.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]);function s(l,c){c&&e.current||o(l)}return[a,s]}function _5(n){return n!==void 0}function es(n,e){var r=e||{},i=r.defaultValue,a=r.value,o=r.onChange,s=r.postState,l=uy(function(){return _5(a)?a:_5(i)?typeof i=="function"?i():i:typeof n=="function"?n():n}),c=fe(l,2),u=c[0],d=c[1],f=a!==void 0?a:u,h=s?s(f):f,p=Lr(o),g=uy([f]),m=fe(g,2),v=m[0],y=m[1];ax(function(){var x=v[0];u!==x&&p(u,x)},[v]),ax(function(){_5(a)||d(a)},[a]);var b=Lr(function(x,_){d(x,_),y([f],_)});return[h,b]}function vre(n,e,r,i){var a=se({},e[n]);if(i!=null&&i.deprecatedTokens){var o=i.deprecatedTokens;o.forEach(function(l){var c=fe(l,2),u=c[0],d=c[1];if(a!=null&&a[u]||a!=null&&a[d]){var f;(f=a[d])!==null&&f!==void 0||(a[d]=a==null?void 0:a[u])}})}var s=se(se({},r),a);return Object.keys(s).forEach(function(l){s[l]===e[l]&&delete s[l]}),s}var Sxe=typeof CSSINJS_STATISTIC<"u",DG=!0;function Qr(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];if(!Sxe)return Object.assign.apply(Object,[{}].concat(e));DG=!1;var i={};return e.forEach(function(a){if(vn(a)==="object"){var o=Object.keys(a);o.forEach(function(s){Object.defineProperty(i,s,{configurable:!0,enumerable:!0,get:function(){return a[s]}})})}}),DG=!0,i}var yre={};function bGe(){}var xGe=function(e){var r,i=e,a=bGe;return Sxe&&typeof Proxy<"u"&&(r=new Set,i=new Proxy(e,{get:function(s,l){if(DG){var c;(c=r)===null||c===void 0||c.add(l)}return s[l]}}),a=function(s,l){var c;yre[s]={global:Array.from(r),component:se(se({},(c=yre[s])===null||c===void 0?void 0:c.component),l)}}),{token:i,keys:r,flush:a}};function bre(n,e,r){if(typeof r=="function"){var i;return r(Qr(e,(i=e[n])!==null&&i!==void 0?i:{}))}return r??{}}function _Ge(n){return n==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return"max(".concat(i.map(function(o){return Qe(o)}).join(","),")")},min:function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return"min(".concat(i.map(function(o){return Qe(o)}).join(","),")")}}}var wGe=1e3*60*10,SGe=function(){function n(){st(this,n),re(this,"map",new Map),re(this,"objectIDMap",new WeakMap),re(this,"nextID",0),re(this,"lastAccessBeat",new Map),re(this,"accessBeat",0)}return lt(n,[{key:"set",value:function(r,i){this.clear();var a=this.getCompositeKey(r);this.map.set(a,i),this.lastAccessBeat.set(a,Date.now())}},{key:"get",value:function(r){var i=this.getCompositeKey(r),a=this.map.get(i);return this.lastAccessBeat.set(i,Date.now()),this.accessBeat+=1,a}},{key:"getCompositeKey",value:function(r){var i=this,a=r.map(function(o){return o&&vn(o)==="object"?"obj_".concat(i.getObjectID(o)):"".concat(vn(o),"_").concat(o)});return a.join("|")}},{key:"getObjectID",value:function(r){if(this.objectIDMap.has(r))return this.objectIDMap.get(r);var i=this.nextID;return this.objectIDMap.set(r,i),this.nextID+=1,i}},{key:"clear",value:function(){var r=this;if(this.accessBeat>1e4){var i=Date.now();this.lastAccessBeat.forEach(function(a,o){i-a>wGe&&(r.map.delete(o),r.lastAccessBeat.delete(o))}),this.accessBeat=0}}}]),n}(),xre=new SGe;function EGe(n,e){return Je.useMemo(function(){var r=xre.get(e);if(r)return r;var i=n();return xre.set(e,i),i},e)}var CGe=function(){return{}};function MGe(n){var e=n.useCSP,r=e===void 0?CGe:e,i=n.useToken,a=n.usePrefix,o=n.getResetStyles,s=n.getCommonStyle,l=n.getCompUnitless;function c(h,p,g,m){var v=Array.isArray(h)?h[0]:h;function y(T){return"".concat(String(v)).concat(T.slice(0,1).toUpperCase()).concat(T.slice(1))}var b=(m==null?void 0:m.unitless)||{},x=typeof l=="function"?l(h):{},_=se(se({},x),{},re({},y("zIndexPopup"),!0));Object.keys(b).forEach(function(T){_[y(T)]=b[T]});var S=se(se({},m),{},{unitless:_,prefixToken:y}),M=d(h,p,g,S),E=u(v,g,S);return function(T){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T,A=M(T,P),N=fe(A,2),O=N[1],I=E(P),D=fe(I,2),k=D[0],$=D[1];return[k,O,$]}}function u(h,p,g){var m=g.unitless,v=g.injectStyle,y=v===void 0?!0:v,b=g.prefixToken,x=g.ignore,_=function(E){var T=E.rootCls,P=E.cssVar,A=P===void 0?{}:P,N=i(),O=N.realToken;return $Ve({path:[h],prefix:A.prefix,key:A.key,unitless:m,ignore:x,token:O,scope:T},function(){var I=bre(h,O,p),D=vre(h,O,I,{deprecatedTokens:g==null?void 0:g.deprecatedTokens});return Object.keys(I).forEach(function(k){D[b(k)]=D[k],delete D[k]}),D}),null},S=function(E){var T=i(),P=T.cssVar;return[function(A){return y&&P?Je.createElement(Je.Fragment,null,Je.createElement(_,{rootCls:E,cssVar:P,component:h}),A):A},P==null?void 0:P.key]};return S}function d(h,p,g){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},v=Array.isArray(h)?h:[h,h],y=fe(v,1),b=y[0],x=v.join("-"),_=n.layer||{name:"antd"};return function(S){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S,E=i(),T=E.theme,P=E.realToken,A=E.hashId,N=E.token,O=E.cssVar,I=a(),D=I.rootPrefixCls,k=I.iconPrefixCls,$=r(),B=O?"css":"js",F=EGe(function(){var V=new Set;return O&&Object.keys(m.unitless||{}).forEach(function(W){V.add(oP(W,O.prefix)),V.add(oP(W,mre(b,O.prefix)))}),yGe(B,V)},[B,b,O==null?void 0:O.prefix]),G=_Ge(B),z=G.max,U=G.min,H={theme:T,token:N,hashId:A,nonce:function(){return $.nonce},clientOnly:m.clientOnly,layer:_,order:m.order||-999};typeof o=="function"&&_G(se(se({},H),{},{clientOnly:!1,path:["Shared",D]}),function(){return o(N,{prefix:{rootPrefixCls:D,iconPrefixCls:k},csp:$})});var X=_G(se(se({},H),{},{path:[x,S,k]}),function(){if(m.injectStyle===!1)return[];var V=xGe(N),W=V.token,K=V.flush,q=bre(b,P,g),Q=".".concat(S),ie=vre(b,P,q,{deprecatedTokens:m.deprecatedTokens});O&&q&&vn(q)==="object"&&Object.keys(q).forEach(function(me){q[me]="var(".concat(oP(me,mre(b,O.prefix)),")")});var oe=Qr(W,{componentCls:Q,prefixCls:S,iconCls:".".concat(k),antCls:".".concat(D),calc:F,max:z,min:U},O?q:ie),ue=p(oe,{hashId:A,prefixCls:S,rootPrefixCls:D,iconPrefixCls:k});K(b,ie);var le=typeof s=="function"?s(oe,S,M,m.resetFont):null;return[m.resetStyle===!1?null:le,ue]});return[X,A]}}function f(h,p,g){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},v=d(h,p,g,se({resetStyle:!1,order:-998},m)),y=function(x){var _=x.prefixCls,S=x.rootCls,M=S===void 0?_:S;return v(_,M),null};return y}return{genStyleHooks:c,genSubStyleComponent:f,genComponentStyleHook:d}}const Um=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],TGe="5.24.8";function w5(n){return n>=0&&n<=255}function QS(n,e){const{r,g:i,b:a,a:o}=new Zr(n).toRgb();if(o<1)return n;const{r:s,g:l,b:c}=new Zr(e).toRgb();for(let u=.01;u<=1;u+=.01){const d=Math.round((r-s*(1-u))/u),f=Math.round((i-l*(1-u))/u),h=Math.round((a-c*(1-u))/u);if(w5(d)&&w5(f)&&w5(h))return new Zr({r:d,g:f,b:h,a:Math.round(u*100)/100}).toRgbString()}return new Zr({r,g:i,b:a,a:1}).toRgbString()}var AGe=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};function Exe(n){const{override:e}=n,r=AGe(n,["override"]),i=Object.assign({},e);Object.keys(zE).forEach(h=>{delete i[h]});const a=Object.assign(Object.assign({},r),i),o=480,s=576,l=768,c=992,u=1200,d=1600;if(a.motion===!1){const h="0s";a.motionDurationFast=h,a.motionDurationMid=h,a.motionDurationSlow=h}return Object.assign(Object.assign(Object.assign({},a),{colorFillContent:a.colorFillSecondary,colorFillContentHover:a.colorFill,colorFillAlter:a.colorFillQuaternary,colorBgContainerDisabled:a.colorFillTertiary,colorBorderBg:a.colorBgContainer,colorSplit:QS(a.colorBorderSecondary,a.colorBgContainer),colorTextPlaceholder:a.colorTextQuaternary,colorTextDisabled:a.colorTextQuaternary,colorTextHeading:a.colorText,colorTextLabel:a.colorTextSecondary,colorTextDescription:a.colorTextTertiary,colorTextLightSolid:a.colorWhite,colorHighlight:a.colorError,colorBgTextHover:a.colorFillSecondary,colorBgTextActive:a.colorFill,colorIcon:a.colorTextTertiary,colorIconHover:a.colorText,colorErrorOutline:QS(a.colorErrorBg,a.colorBgContainer),colorWarningOutline:QS(a.colorWarningBg,a.colorBgContainer),fontSizeIcon:a.fontSizeSM,lineWidthFocus:a.lineWidth*3,lineWidth:a.lineWidth,controlOutlineWidth:a.lineWidth*2,controlInteractiveSize:a.controlHeight/2,controlItemBgHover:a.colorFillTertiary,controlItemBgActive:a.colorPrimaryBg,controlItemBgActiveHover:a.colorPrimaryBgHover,controlItemBgActiveDisabled:a.colorFill,controlTmpOutline:a.colorFillQuaternary,controlOutline:QS(a.colorPrimaryBg,a.colorBgContainer),lineType:a.lineType,borderRadius:a.borderRadius,borderRadiusXS:a.borderRadiusXS,borderRadiusSM:a.borderRadiusSM,borderRadiusLG:a.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:a.sizeXXS,paddingXS:a.sizeXS,paddingSM:a.sizeSM,padding:a.size,paddingMD:a.sizeMD,paddingLG:a.sizeLG,paddingXL:a.sizeXL,paddingContentHorizontalLG:a.sizeLG,paddingContentVerticalLG:a.sizeMS,paddingContentHorizontal:a.sizeMS,paddingContentVertical:a.sizeSM,paddingContentHorizontalSM:a.size,paddingContentVerticalSM:a.sizeXS,marginXXS:a.sizeXXS,marginXS:a.sizeXS,marginSM:a.sizeSM,margin:a.size,marginMD:a.sizeMD,marginLG:a.sizeLG,marginXL:a.sizeXL,marginXXL:a.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:o,screenXSMin:o,screenXSMax:s-1,screenSM:s,screenSMMin:s,screenSMMax:l-1,screenMD:l,screenMDMin:l,screenMDMax:c-1,screenLG:c,screenLGMin:c,screenLGMax:u-1,screenXL:u,screenXLMin:u,screenXLMax:d-1,screenXXL:d,screenXXLMin:d,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new Zr("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new Zr("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new Zr("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),i)}var _re=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const Cxe={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},RGe={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},PGe={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},Mxe=(n,e,r)=>{const i=r.getDerivativeToken(n),{override:a}=e,o=_re(e,["override"]);let s=Object.assign(Object.assign({},i),{override:a});return s=Exe(s),o&&Object.entries(o).forEach(l=>{let[c,u]=l;const{theme:d}=u,f=_re(u,["theme"]);let h=f;d&&(h=Mxe(Object.assign(Object.assign({},s),f),{override:f},d)),s[c]=h}),s};function Zc(){const{token:n,hashed:e,theme:r,override:i,cssVar:a}=Je.useContext(xxe),o=`${TGe}-${e||""}`,s=r||bxe,[l,c,u]=uVe(s,[zE,n],{salt:o,override:i,getComputedToken:Mxe,formatToken:Exe,cssVar:a&&{prefix:a.prefix,key:a.key,unitless:Cxe,ignore:RGe,preserve:PGe}});return[s,u,e?c:"",l,a]}const NN={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},ts=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:n.colorText,fontSize:n.fontSize,lineHeight:n.lineHeight,listStyle:"none",fontFamily:e?"inherit":n.fontFamily}},uM=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),Txe=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),NGe=n=>({a:{color:n.colorLink,textDecoration:n.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${n.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:n.colorLinkHover},"&:active":{color:n.colorLinkActive},"&:active, &:hover":{textDecoration:n.linkHoverDecoration,outline:0},"&:focus":{textDecoration:n.linkFocusDecoration,outline:0},"&[disabled]":{color:n.colorTextDisabled,cursor:"not-allowed"}}}),OGe=(n,e,r,i)=>{const a=`[class^="${e}"], [class*=" ${e}"]`,o=r?`.${r}`:a,s={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let l={};return i!==!1&&(l={fontFamily:n.fontFamily,fontSize:n.fontSize}),{[o]:Object.assign(Object.assign(Object.assign({},l),s),{[a]:s})}},IGe=(n,e)=>({outline:`${Qe(n.lineWidthFocus)} solid ${n.colorPrimaryBorder}`,outlineOffset:e??1,transition:"outline-offset 0s, outline 0s"}),Axe=(n,e)=>({"&:focus-visible":Object.assign({},IGe(n,e))}),Rxe=n=>({[`.${n}`]:Object.assign(Object.assign({},uM()),{[`.${n} .${n}-icon`]:{display:"block"}})}),{genStyleHooks:Ja,genComponentStyleHook:DGe,genSubStyleComponent:cY}=MGe({usePrefix:()=>{const{getPrefixCls:n,iconPrefixCls:e}=C.useContext(yr);return{rootPrefixCls:n(),iconPrefixCls:e}},useToken:()=>{const[n,e,r,i,a]=Zc();return{theme:n,realToken:e,hashId:r,token:i,cssVar:a}},useCSP:()=>{const{csp:n}=C.useContext(yr);return n??{}},getResetStyles:(n,e)=>{var r;const i=NGe(n);return[i,{"&":i},Rxe((r=e==null?void 0:e.prefix.iconPrefixCls)!==null&&r!==void 0?r:y4)]},getCommonStyle:OGe,getCompUnitless:()=>Cxe});function LGe(n,e){return Um.reduce((r,i)=>{const a=n[`${i}1`],o=n[`${i}3`],s=n[`${i}6`],l=n[`${i}7`];return Object.assign(Object.assign({},r),e(i,{lightColor:a,lightBorderColor:o,darkColor:s,textColor:l}))},{})}const kGe=(n,e)=>{const[r,i]=Zc();return _G({token:i,hashId:"",path:["ant-design-icons",n],nonce:()=>e==null?void 0:e.nonce,layer:{name:"antd"}},()=>[Rxe(n)])},FGe=Object.assign({},ny),{useId:wre}=FGe,$Ge=()=>"",BGe=typeof wre>"u"?$Ge:wre;function zGe(n,e,r){var i;v4();const a=n||{},o=a.inherit===!1||!e?Object.assign(Object.assign({},PN),{hashed:(i=e==null?void 0:e.hashed)!==null&&i!==void 0?i:PN.hashed,cssVar:e==null?void 0:e.cssVar}):e,s=BGe();return u4(()=>{var l,c;if(!n)return e;const u=Object.assign({},o.components);Object.keys(n.components||{}).forEach(h=>{u[h]=Object.assign(Object.assign({},u[h]),n.components[h])});const d=`css-var-${s.replace(/:/g,"")}`,f=((l=a.cssVar)!==null&&l!==void 0?l:o.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:r==null?void 0:r.prefixCls},typeof o.cssVar=="object"?o.cssVar:{}),typeof a.cssVar=="object"?a.cssVar:{}),{key:typeof a.cssVar=="object"&&((c=a.cssVar)===null||c===void 0?void 0:c.key)||d});return Object.assign(Object.assign(Object.assign({},o),a),{token:Object.assign(Object.assign({},o.token),a.token),components:u,cssVar:f})},[a,o],(l,c)=>l.some((u,d)=>{const f=c[d];return!gG(u,f,!0)}))}var UGe=["children"],Pxe=C.createContext({});function VGe(n){var e=n.children,r=ir(n,UGe);return C.createElement(Pxe.Provider,{value:r},e)}var GGe=function(n){$n(r,n);var e=iv(r);function r(){return st(this,r),e.apply(this,arguments)}return lt(r,[{key:"render",value:function(){return this.props.children}}]),r}(C.Component);function jGe(n){var e=C.useReducer(function(l){return l+1},0),r=fe(e,2),i=r[1],a=C.useRef(n),o=Lr(function(){return a.current}),s=Lr(function(l){a.current=typeof l=="function"?l(a.current):l,i()});return[o,s]}var Lg="none",b3="appear",x3="enter",_3="leave",Sre="none",Ed="prepare",$b="start",Bb="active",uY="end",Nxe="prepared";function Ere(n,e){var r={};return r[n.toLowerCase()]=e.toLowerCase(),r["Webkit".concat(n)]="webkit".concat(e),r["Moz".concat(n)]="moz".concat(e),r["ms".concat(n)]="MS".concat(e),r["O".concat(n)]="o".concat(e.toLowerCase()),r}function HGe(n,e){var r={animationend:Ere("Animation","AnimationEnd"),transitionend:Ere("Transition","TransitionEnd")};return n&&("AnimationEvent"in e||delete r.animationend.animation,"TransitionEvent"in e||delete r.transitionend.transition),r}var WGe=HGe(yl(),typeof window<"u"?window:{}),Oxe={};if(yl()){var qGe=document.createElement("div");Oxe=qGe.style}var w3={};function Ixe(n){if(w3[n])return w3[n];var e=WGe[n];if(e)for(var r=Object.keys(e),i=r.length,a=0;a<i;a+=1){var o=r[a];if(Object.prototype.hasOwnProperty.call(e,o)&&o in Oxe)return w3[n]=e[o],w3[n]}return""}var Dxe=Ixe("animationend"),Lxe=Ixe("transitionend"),kxe=!!(Dxe&&Lxe),Cre=Dxe||"animationend",Mre=Lxe||"transitionend";function Tre(n,e){if(!n)return null;if(vn(n)==="object"){var r=e.replace(/-\w/g,function(i){return i[1].toUpperCase()});return n[r]}return"".concat(n,"-").concat(e)}const YGe=function(n){var e=C.useRef();function r(a){a&&(a.removeEventListener(Mre,n),a.removeEventListener(Cre,n))}function i(a){e.current&&e.current!==a&&r(e.current),a&&a!==e.current&&(a.addEventListener(Mre,n),a.addEventListener(Cre,n),e.current=a)}return C.useEffect(function(){return function(){r(e.current)}},[]),[i,r]};var Fxe=yl()?C.useLayoutEffect:C.useEffect;const XGe=function(){var n=C.useRef(null);function e(){Gr.cancel(n.current)}function r(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;e();var o=Gr(function(){a<=1?i({isCanceled:function(){return o!==n.current}}):r(i,a-1)});n.current=o}return C.useEffect(function(){return function(){e()}},[]),[r,e]};var KGe=[Ed,$b,Bb,uY],ZGe=[Ed,Nxe],$xe=!1,QGe=!0;function Bxe(n){return n===Bb||n===uY}const JGe=function(n,e,r){var i=uy(Sre),a=fe(i,2),o=a[0],s=a[1],l=XGe(),c=fe(l,2),u=c[0],d=c[1];function f(){s(Ed,!0)}var h=e?ZGe:KGe;return Fxe(function(){if(o!==Sre&&o!==uY){var p=h.indexOf(o),g=h[p+1],m=r(o);m===$xe?s(g,!0):g&&u(function(v){function y(){v.isCanceled()||s(g,!0)}m===!0?y():Promise.resolve(m).then(y)})}},[n,o]),C.useEffect(function(){return function(){d()}},[]),[f,o]};function eje(n,e,r,i){var a=i.motionEnter,o=a===void 0?!0:a,s=i.motionAppear,l=s===void 0?!0:s,c=i.motionLeave,u=c===void 0?!0:c,d=i.motionDeadline,f=i.motionLeaveImmediately,h=i.onAppearPrepare,p=i.onEnterPrepare,g=i.onLeavePrepare,m=i.onAppearStart,v=i.onEnterStart,y=i.onLeaveStart,b=i.onAppearActive,x=i.onEnterActive,_=i.onLeaveActive,S=i.onAppearEnd,M=i.onEnterEnd,E=i.onLeaveEnd,T=i.onVisibleChanged,P=uy(),A=fe(P,2),N=A[0],O=A[1],I=jGe(Lg),D=fe(I,2),k=D[0],$=D[1],B=uy(null),F=fe(B,2),G=F[0],z=F[1],U=k(),H=C.useRef(!1),X=C.useRef(null);function V(){return r()}var W=C.useRef(!1);function K(){$(Lg),z(null,!0)}var q=Lr(function(ee){var Y=k();if(Y!==Lg){var ce=V();if(!(ee&&!ee.deadline&&ee.target!==ce)){var _e=W.current,Ae;Y===b3&&_e?Ae=S==null?void 0:S(ce,ee):Y===x3&&_e?Ae=M==null?void 0:M(ce,ee):Y===_3&&_e&&(Ae=E==null?void 0:E(ce,ee)),_e&&Ae!==!1&&K()}}}),Q=YGe(q),ie=fe(Q,1),oe=ie[0],ue=function(Y){switch(Y){case b3:return re(re(re({},Ed,h),$b,m),Bb,b);case x3:return re(re(re({},Ed,p),$b,v),Bb,x);case _3:return re(re(re({},Ed,g),$b,y),Bb,_);default:return{}}},le=C.useMemo(function(){return ue(U)},[U]),me=JGe(U,!n,function(ee){if(ee===Ed){var Y=le[Ed];return Y?Y(V()):$xe}if(ve in le){var ce;z(((ce=le[ve])===null||ce===void 0?void 0:ce.call(le,V(),null))||null)}return ve===Bb&&U!==Lg&&(oe(V()),d>0&&(clearTimeout(X.current),X.current=setTimeout(function(){q({deadline:!0})},d))),ve===Nxe&&K(),QGe}),J=fe(me,2),pe=J[0],ve=J[1],Me=Bxe(ve);W.current=Me;var Re=C.useRef(null);Fxe(function(){if(!(H.current&&Re.current===e)){O(e);var ee=H.current;H.current=!0;var Y;!ee&&e&&l&&(Y=b3),ee&&e&&o&&(Y=x3),(ee&&!e&&u||!ee&&f&&!e&&u)&&(Y=_3);var ce=ue(Y);Y&&(n||ce[Ed])?($(Y),pe()):$(Lg),Re.current=e}},[e]),C.useEffect(function(){(U===b3&&!l||U===x3&&!o||U===_3&&!u)&&$(Lg)},[l,o,u]),C.useEffect(function(){return function(){H.current=!1,clearTimeout(X.current)}},[]);var Xe=C.useRef(!1);C.useEffect(function(){N&&(Xe.current=!0),N!==void 0&&U===Lg&&((Xe.current||N)&&(T==null||T(N)),Xe.current=!0)},[N,U]);var He=G;return le[Ed]&&ve===$b&&(He=se({transition:"none"},He)),[U,ve,He,N??e]}function tje(n){var e=n;vn(n)==="object"&&(e=n.transitionSupport);function r(a,o){return!!(a.motionName&&e&&o!==!1)}var i=C.forwardRef(function(a,o){var s=a.visible,l=s===void 0?!0:s,c=a.removeOnLeave,u=c===void 0?!0:c,d=a.forceRender,f=a.children,h=a.motionName,p=a.leavedClassName,g=a.eventProps,m=C.useContext(Pxe),v=m.motion,y=r(a,v),b=C.useRef(),x=C.useRef();function _(){try{return b.current instanceof HTMLElement?b.current:aP(x.current)}catch{return null}}var S=eje(y,l,_,a),M=fe(S,4),E=M[0],T=M[1],P=M[2],A=M[3],N=C.useRef(A);A&&(N.current=!0);var O=C.useCallback(function(F){b.current=F,Zq(o,F)},[o]),I,D=se(se({},g),{},{visible:l});if(!f)I=null;else if(E===Lg)A?I=f(se({},D),O):!u&&N.current&&p?I=f(se(se({},D),{},{className:p}),O):d||!u&&!p?I=f(se(se({},D),{},{style:{display:"none"}}),O):I=null;else{var k;T===Ed?k="prepare":Bxe(T)?k="active":T===$b&&(k="start");var $=Tre(h,"".concat(E,"-").concat(k));I=f(se(se({},D),{},{className:Be(Tre(h,E),re(re({},$,$&&k),h,typeof h=="string")),style:P}),O)}if(C.isValidElement(I)&&O_(I)){var B=lM(I);B||(I=C.cloneElement(I,{ref:O}))}return C.createElement(GGe,{ref:x},I)});return i.displayName="CSSMotion",i}const av=tje(kxe);var LG="add",kG="keep",FG="remove",S5="removed";function nje(n){var e;return n&&vn(n)==="object"&&"key"in n?e=n:e={key:n},se(se({},e),{},{key:String(e.key)})}function $G(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return n.map(nje)}function rje(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],i=0,a=e.length,o=$G(n),s=$G(e);o.forEach(function(u){for(var d=!1,f=i;f<a;f+=1){var h=s[f];if(h.key===u.key){i<f&&(r=r.concat(s.slice(i,f).map(function(p){return se(se({},p),{},{status:LG})})),i=f),r.push(se(se({},h),{},{status:kG})),i+=1,d=!0;break}}d||r.push(se(se({},u),{},{status:FG}))}),i<a&&(r=r.concat(s.slice(i).map(function(u){return se(se({},u),{},{status:LG})})));var l={};r.forEach(function(u){var d=u.key;l[d]=(l[d]||0)+1});var c=Object.keys(l).filter(function(u){return l[u]>1});return c.forEach(function(u){r=r.filter(function(d){var f=d.key,h=d.status;return f!==u||h!==FG}),r.forEach(function(d){d.key===u&&(d.status=kG)})}),r}var ije=["component","children","onVisibleChanged","onAllRemoved"],aje=["status"],oje=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function sje(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:av,r=function(i){$n(o,i);var a=iv(o);function o(){var s;st(this,o);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return s=a.call.apply(a,[this].concat(c)),re(Cr(s),"state",{keyEntities:[]}),re(Cr(s),"removeKey",function(d){s.setState(function(f){var h=f.keyEntities.map(function(p){return p.key!==d?p:se(se({},p),{},{status:S5})});return{keyEntities:h}},function(){var f=s.state.keyEntities,h=f.filter(function(p){var g=p.status;return g!==S5}).length;h===0&&s.props.onAllRemoved&&s.props.onAllRemoved()})}),s}return lt(o,[{key:"render",value:function(){var l=this,c=this.state.keyEntities,u=this.props,d=u.component,f=u.children,h=u.onVisibleChanged;u.onAllRemoved;var p=ir(u,ije),g=d||C.Fragment,m={};return oje.forEach(function(v){m[v]=p[v],delete p[v]}),delete p.keys,C.createElement(g,p,c.map(function(v,y){var b=v.status,x=ir(v,aje),_=b===LG||b===kG;return C.createElement(e,Mt({},m,{key:x.key,visible:_,eventProps:x,onVisibleChanged:function(M){h==null||h(M,{key:x.key}),M||l.removeKey(x.key)}}),function(S,M){return f(se(se({},S),{},{index:y}),M)})}))}}],[{key:"getDerivedStateFromProps",value:function(l,c){var u=l.keys,d=c.keyEntities,f=$G(u),h=rje(d,f);return{keyEntities:h.filter(function(p){var g=d.find(function(m){var v=m.key;return p.key===v});return!(g&&g.status===S5&&p.status===FG)})}}}]),o}(C.Component);return re(r,"defaultProps",{component:"div"}),r}const zxe=sje(kxe);function lje(n){const{children:e}=n,[,r]=Zc(),{motion:i}=r,a=C.useRef(!1);return a.current=a.current||i===!1,a.current?C.createElement(VGe,{motion:i},e):e}const cje=()=>null;var uje=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const dje=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let ON,Uxe,Vxe,Gxe;function pP(){return ON||UE}function fje(){return Uxe||y4}function hje(n){return Object.keys(n).some(e=>e.endsWith("Color"))}const pje=n=>{const{prefixCls:e,iconPrefixCls:r,theme:i,holderRender:a}=n;e!==void 0&&(ON=e),r!==void 0&&(Uxe=r),"holderRender"in n&&(Gxe=a),i&&(hje(i)?fGe(pP(),i):Vxe=i)},jxe=()=>({getPrefixCls:(n,e)=>e||(n?`${pP()}-${n}`:pP()),getIconPrefixCls:fje,getRootPrefixCls:()=>ON||pP(),getTheme:()=>Vxe,holderRender:Gxe}),gje=n=>{const{children:e,csp:r,autoInsertSpaceInButton:i,alert:a,anchor:o,form:s,locale:l,componentSize:c,direction:u,space:d,splitter:f,virtual:h,dropdownMatchSelectWidth:p,popupMatchSelectWidth:g,popupOverflow:m,legacyLocale:v,parentContext:y,iconPrefixCls:b,theme:x,componentDisabled:_,segmented:S,statistic:M,spin:E,calendar:T,carousel:P,cascader:A,collapse:N,typography:O,checkbox:I,descriptions:D,divider:k,drawer:$,skeleton:B,steps:F,image:G,layout:z,list:U,mentions:H,modal:X,progress:V,result:W,slider:K,breadcrumb:q,menu:Q,pagination:ie,input:oe,textArea:ue,empty:le,badge:me,radio:J,rate:pe,switch:ve,transfer:Me,avatar:Re,message:Xe,tag:He,table:ee,card:Y,tabs:ce,timeline:_e,timePicker:Ae,upload:Ce,notification:et,tree:Ve,colorPicker:qe,datePicker:dt,rangePicker:Ge,flex:We,wave:Ze,dropdown:Ie,warning:De,tour:bt,tooltip:Ke,popover:mt,popconfirm:xe,floatButtonGroup:vt,variant:Ue,inputNumber:Le,treeSelect:Ye}=n,nt=C.useCallback((ft,Tt)=>{const{prefixCls:It}=n;if(Tt)return Tt;const Rt=It||y.getPrefixCls("");return ft?`${Rt}-${ft}`:Rt},[y.getPrefixCls,n.prefixCls]),_t=b||y.iconPrefixCls||y4,Gt=r||y.csp;kGe(_t,Gt);const Ot=zGe(x,y.theme,{prefixCls:nt("")}),wt={csp:Gt,autoInsertSpaceInButton:i,alert:a,anchor:o,locale:l||v,direction:u,space:d,splitter:f,virtual:h,popupMatchSelectWidth:g??p,popupOverflow:m,getPrefixCls:nt,iconPrefixCls:_t,theme:Ot,segmented:S,statistic:M,spin:E,calendar:T,carousel:P,cascader:A,collapse:N,typography:O,checkbox:I,descriptions:D,divider:k,drawer:$,skeleton:B,steps:F,image:G,input:oe,textArea:ue,layout:z,list:U,mentions:H,modal:X,progress:V,result:W,slider:K,breadcrumb:q,menu:Q,pagination:ie,empty:le,badge:me,radio:J,rate:pe,switch:ve,transfer:Me,avatar:Re,message:Xe,tag:He,table:ee,card:Y,tabs:ce,timeline:_e,timePicker:Ae,upload:Ce,notification:et,tree:Ve,colorPicker:qe,datePicker:dt,rangePicker:Ge,flex:We,wave:Ze,dropdown:Ie,warning:De,tour:bt,tooltip:Ke,popover:mt,popconfirm:xe,floatButtonGroup:vt,variant:Ue,inputNumber:Le,treeSelect:Ye},Ft=Object.assign({},y);Object.keys(wt).forEach(ft=>{wt[ft]!==void 0&&(Ft[ft]=wt[ft])}),dje.forEach(ft=>{const Tt=n[ft];Tt&&(Ft[ft]=Tt)}),typeof i<"u"&&(Ft.button=Object.assign({autoInsertSpace:i},Ft.button));const wn=u4(()=>Ft,Ft,(ft,Tt)=>{const It=Object.keys(ft),Rt=Object.keys(Tt);return It.length!==Rt.length||It.some(Lt=>ft[Lt]!==Tt[Lt])}),{layer:ye}=C.useContext(cM),be=C.useMemo(()=>({prefixCls:_t,csp:Gt,layer:ye?"antd":void 0}),[_t,Gt,ye]);let Se=C.createElement(C.Fragment,null,C.createElement(cje,{dropdownMatchSelectWidth:p}),e);const je=C.useMemo(()=>{var ft,Tt,It,Rt;return Fb(((ft=zm.Form)===null||ft===void 0?void 0:ft.defaultValidateMessages)||{},((It=(Tt=wn.locale)===null||Tt===void 0?void 0:Tt.Form)===null||It===void 0?void 0:It.defaultValidateMessages)||{},((Rt=wn.form)===null||Rt===void 0?void 0:Rt.validateMessages)||{},(s==null?void 0:s.validateMessages)||{})},[wn,s==null?void 0:s.validateMessages]);Object.keys(je).length>0&&(Se=C.createElement(hxe.Provider,{value:je},Se)),l&&(Se=C.createElement(XVe,{locale:l,_ANT_MARK__:YVe},Se)),Se=C.createElement(iY.Provider,{value:be},Se),c&&(Se=C.createElement(hGe,{size:c},Se)),Se=C.createElement(lje,null,Se);const tt=C.useMemo(()=>{const ft=Ot||{},{algorithm:Tt,token:It,components:Rt,cssVar:Lt}=ft,$t=uje(ft,["algorithm","token","components","cssVar"]),en=Tt&&(!Array.isArray(Tt)||Tt.length>0)?vG(Tt):bxe,yn={};Object.entries(Rt||{}).forEach(qn=>{let[_n,te]=qn;const de=Object.assign({},te);"algorithm"in de&&(de.algorithm===!0?de.theme=en:(Array.isArray(de.algorithm)||typeof de.algorithm=="function")&&(de.theme=vG(de.algorithm)),delete de.algorithm),yn[_n]=de});const kn=Object.assign(Object.assign({},zE),It);return Object.assign(Object.assign({},$t),{theme:en,token:kn,components:yn,override:Object.assign({override:kn},yn),cssVar:Lt})},[Ot]);return x&&(Se=C.createElement(xxe.Provider,{value:tt},Se)),wn.warning&&(Se=C.createElement(GVe.Provider,{value:wn.warning},Se)),_!==void 0&&(Se=C.createElement(lY,{disabled:_},Se)),C.createElement(yr.Provider,{value:wn},Se)},rf=n=>{const e=C.useContext(yr),r=C.useContext(aY);return C.createElement(gje,Object.assign({parentContext:e,legacyLocale:r},n))};rf.ConfigContext=yr;rf.SizeContext=cy;rf.config=pje;rf.useConfig=pGe;Object.defineProperty(rf,"SizeContext",{get:()=>cy});var mje={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function Hxe(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}function vje(n){return Hxe(n)instanceof ShadowRoot}function IN(n){return vje(n)?Hxe(n):null}function yje(n){return n.replace(/-(.)/g,function(e,r){return r.toUpperCase()})}function bje(n,e){Hs(n,"[@ant-design/icons] ".concat(e))}function Are(n){return vn(n)==="object"&&typeof n.name=="string"&&typeof n.theme=="string"&&(vn(n.icon)==="object"||typeof n.icon=="function")}function Rre(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(n).reduce(function(e,r){var i=n[r];switch(r){case"class":e.className=i,delete e.class;break;default:delete e[r],e[yje(r)]=i}return e},{})}function BG(n,e,r){return r?Je.createElement(n.tag,se(se({key:e},Rre(n.attrs)),r),(n.children||[]).map(function(i,a){return BG(i,"".concat(e,"-").concat(n.tag,"-").concat(a))})):Je.createElement(n.tag,se({key:e},Rre(n.attrs)),(n.children||[]).map(function(i,a){return BG(i,"".concat(e,"-").concat(n.tag,"-").concat(a))}))}function Wxe(n){return ly(n)[0]}function qxe(n){return n?Array.isArray(n)?n:[n]:[]}var xje=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,_je=function(e){var r=C.useContext(iY),i=r.csp,a=r.prefixCls,o=r.layer,s=xje;a&&(s=s.replace(/anticon/g,a)),o&&(s="@layer ".concat(o,` {
`).concat(s,`
}`)),C.useEffect(function(){var l=e.current,c=IN(l);bp(s,"@ant-design-icons",{prepend:!o,csp:i,attachTo:c})},[])},wje=["icon","className","onClick","style","primaryColor","secondaryColor"],F2={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function Sje(n){var e=n.primaryColor,r=n.secondaryColor;F2.primaryColor=e,F2.secondaryColor=r||Wxe(e),F2.calculated=!!r}function Eje(){return se({},F2)}var D_=function(e){var r=e.icon,i=e.className,a=e.onClick,o=e.style,s=e.primaryColor,l=e.secondaryColor,c=ir(e,wje),u=C.useRef(),d=F2;if(s&&(d={primaryColor:s,secondaryColor:l||Wxe(s)}),_je(u),bje(Are(r),"icon should be icon definiton, but got ".concat(r)),!Are(r))return null;var f=r;return f&&typeof f.icon=="function"&&(f=se(se({},f),{},{icon:f.icon(d.primaryColor,d.secondaryColor)})),BG(f.icon,"svg-".concat(f.name),se(se({className:i,onClick:a,style:o,"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},c),{},{ref:u}))};D_.displayName="IconReact";D_.getTwoToneColors=Eje;D_.setTwoToneColors=Sje;function Yxe(n){var e=qxe(n),r=fe(e,2),i=r[0],a=r[1];return D_.setTwoToneColors({primaryColor:i,secondaryColor:a})}function Cje(){var n=D_.getTwoToneColors();return n.calculated?[n.primaryColor,n.secondaryColor]:n.primaryColor}var Mje=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Yxe(RN.primary);var Na=C.forwardRef(function(n,e){var r=n.className,i=n.icon,a=n.spin,o=n.rotate,s=n.tabIndex,l=n.onClick,c=n.twoToneColor,u=ir(n,Mje),d=C.useContext(iY),f=d.prefixCls,h=f===void 0?"anticon":f,p=d.rootClassName,g=Be(p,h,re(re({},"".concat(h,"-").concat(i.name),!!i.name),"".concat(h,"-spin"),!!a||i.name==="loading"),r),m=s;m===void 0&&l&&(m=-1);var v=o?{msTransform:"rotate(".concat(o,"deg)"),transform:"rotate(".concat(o,"deg)")}:void 0,y=qxe(c),b=fe(y,2),x=b[0],_=b[1];return C.createElement("span",Mt({role:"img","aria-label":i.name},u,{ref:e,tabIndex:m,onClick:l,className:g}),C.createElement(D_,{icon:i,primaryColor:x,secondaryColor:_,style:v}))});Na.displayName="AntdIcon";Na.getTwoToneColor=Cje;Na.setTwoToneColor=Yxe;var Tje=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:mje}))},b4=C.forwardRef(Tje),Aje={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},Rje=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:Aje}))},L_=C.forwardRef(Rje),Pje={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},Nje=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:Pje}))},k_=C.forwardRef(Nje),Oje={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},Ije=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:Oje}))},x4=C.forwardRef(Ije),Dje={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},Lje=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:Dje}))},Xxe=C.forwardRef(Lje),kje=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,Fje=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,$je="".concat(kje," ").concat(Fje).split(/[\s\n]+/),Bje="aria-",zje="data-";function Pre(n,e){return n.indexOf(e)===0}function Hu(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r;e===!1?r={aria:!0,data:!0,attr:!0}:e===!0?r={aria:!0}:r=se({},e);var i={};return Object.keys(n).forEach(function(a){(r.aria&&(a==="role"||Pre(a,Bje))||r.data&&Pre(a,zje)||r.attr&&$je.includes(a))&&(i[a]=n[a])}),i}function Kxe(n){return n&&Je.isValidElement(n)&&n.type===Je.Fragment}const Uje=(n,e,r)=>Je.isValidElement(n)?Je.cloneElement(n,typeof r=="function"?r(n.props||{}):r):e;function Vm(n,e){return Uje(n,n,e)}function dr(n,e,r){return e=Op(e),zbe(n,f4()?Reflect.construct(e,r||[],Op(n).constructor):e.apply(n,r))}const Nre=n=>typeof n=="object"&&n!=null&&n.nodeType===1,Ore=(n,e)=>(!e||n!=="hidden")&&n!=="visible"&&n!=="clip",S3=(n,e)=>{if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){const r=getComputedStyle(n,null);return Ore(r.overflowY,e)||Ore(r.overflowX,e)||(i=>{const a=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!a&&(a.clientHeight<i.scrollHeight||a.clientWidth<i.scrollWidth)})(n)}return!1},E3=(n,e,r,i,a,o,s,l)=>o<n&&s>e||o>n&&s<e?0:o<=n&&l<=r||s>=e&&l>=r?o-n-i:s>e&&l<r||o<n&&l>r?s-e+a:0,Vje=n=>{const e=n.parentElement;return e??(n.getRootNode().host||null)},Ire=(n,e)=>{var r,i,a,o;if(typeof document>"u")return[];const{scrollMode:s,block:l,inline:c,boundary:u,skipOverflowHiddenElements:d}=e,f=typeof u=="function"?u:$=>$!==u;if(!Nre(n))throw new TypeError("Invalid target");const h=document.scrollingElement||document.documentElement,p=[];let g=n;for(;Nre(g)&&f(g);){if(g=Vje(g),g===h){p.push(g);break}g!=null&&g===document.body&&S3(g)&&!S3(document.documentElement)||g!=null&&S3(g,d)&&p.push(g)}const m=(i=(r=window.visualViewport)==null?void 0:r.width)!=null?i:innerWidth,v=(o=(a=window.visualViewport)==null?void 0:a.height)!=null?o:innerHeight,{scrollX:y,scrollY:b}=window,{height:x,width:_,top:S,right:M,bottom:E,left:T}=n.getBoundingClientRect(),{top:P,right:A,bottom:N,left:O}=($=>{const B=window.getComputedStyle($);return{top:parseFloat(B.scrollMarginTop)||0,right:parseFloat(B.scrollMarginRight)||0,bottom:parseFloat(B.scrollMarginBottom)||0,left:parseFloat(B.scrollMarginLeft)||0}})(n);let I=l==="start"||l==="nearest"?S-P:l==="end"?E+N:S+x/2-P+N,D=c==="center"?T+_/2-O+A:c==="end"?M+A:T-O;const k=[];for(let $=0;$<p.length;$++){const B=p[$],{height:F,width:G,top:z,right:U,bottom:H,left:X}=B.getBoundingClientRect();if(s==="if-needed"&&S>=0&&T>=0&&E<=v&&M<=m&&(B===h&&!S3(B)||S>=z&&E<=H&&T>=X&&M<=U))return k;const V=getComputedStyle(B),W=parseInt(V.borderLeftWidth,10),K=parseInt(V.borderTopWidth,10),q=parseInt(V.borderRightWidth,10),Q=parseInt(V.borderBottomWidth,10);let ie=0,oe=0;const ue="offsetWidth"in B?B.offsetWidth-B.clientWidth-W-q:0,le="offsetHeight"in B?B.offsetHeight-B.clientHeight-K-Q:0,me="offsetWidth"in B?B.offsetWidth===0?0:G/B.offsetWidth:0,J="offsetHeight"in B?B.offsetHeight===0?0:F/B.offsetHeight:0;if(h===B)ie=l==="start"?I:l==="end"?I-v:l==="nearest"?E3(b,b+v,v,K,Q,b+I,b+I+x,x):I-v/2,oe=c==="start"?D:c==="center"?D-m/2:c==="end"?D-m:E3(y,y+m,m,W,q,y+D,y+D+_,_),ie=Math.max(0,ie+b),oe=Math.max(0,oe+y);else{ie=l==="start"?I-z-K:l==="end"?I-H+Q+le:l==="nearest"?E3(z,H,F,K,Q+le,I,I+x,x):I-(z+F/2)+le/2,oe=c==="start"?D-X-W:c==="center"?D-(X+G/2)+ue/2:c==="end"?D-U+q+ue:E3(X,U,G,W,q+ue,D,D+_,_);const{scrollLeft:pe,scrollTop:ve}=B;ie=J===0?0:Math.max(0,Math.min(ve+ie/J,B.scrollHeight-F/J+le)),oe=me===0?0:Math.max(0,Math.min(pe+oe/me,B.scrollWidth-G/me+ue)),I+=ve-ie,D+=pe-oe}k.push({el:B,top:ie,left:oe})}return k},Gje=n=>n===!1?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&Object.keys(e).length!==0)(n)?n:{block:"start",inline:"nearest"};function jje(n,e){if(!n.isConnected||!(a=>{let o=a;for(;o&&o.parentNode;){if(o.parentNode===document)return!0;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(n))return;const r=(a=>{const o=window.getComputedStyle(a);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(n);if((a=>typeof a=="object"&&typeof a.behavior=="function")(e))return e.behavior(Ire(n,e));const i=typeof e=="boolean"||e==null?void 0:e.behavior;for(const{el:a,top:o,left:s}of Ire(n,Gje(e))){const l=o-r.top+r.bottom,c=s-r.left+r.right;a.scroll({top:l,left:c,behavior:i})}}const Qc=n=>{const[,,,,e]=Zc();return e?`${n}-css-var`:""};var Xn={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,CAPS_LOCK:20,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,N:78,P:80,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,EQUALS:187,WIN_KEY:224},Zxe=C.forwardRef(function(n,e){var r=n.prefixCls,i=n.style,a=n.className,o=n.duration,s=o===void 0?4.5:o,l=n.showProgress,c=n.pauseOnHover,u=c===void 0?!0:c,d=n.eventKey,f=n.content,h=n.closable,p=n.closeIcon,g=p===void 0?"x":p,m=n.props,v=n.onClick,y=n.onNoticeClose,b=n.times,x=n.hovering,_=C.useState(!1),S=fe(_,2),M=S[0],E=S[1],T=C.useState(0),P=fe(T,2),A=P[0],N=P[1],O=C.useState(0),I=fe(O,2),D=I[0],k=I[1],$=x||M,B=s>0&&l,F=function(){y(d)},G=function(W){(W.key==="Enter"||W.code==="Enter"||W.keyCode===Xn.ENTER)&&F()};C.useEffect(function(){if(!$&&s>0){var V=Date.now()-D,W=setTimeout(function(){F()},s*1e3-D);return function(){u&&clearTimeout(W),k(Date.now()-V)}}},[s,$,b]),C.useEffect(function(){if(!$&&B&&(u||D===0)){var V=performance.now(),W,K=function q(){cancelAnimationFrame(W),W=requestAnimationFrame(function(Q){var ie=Q+D-V,oe=Math.min(ie/(s*1e3),1);N(oe*100),oe<1&&q()})};return K(),function(){u&&cancelAnimationFrame(W)}}},[s,D,$,B,b]);var z=C.useMemo(function(){return vn(h)==="object"&&h!==null?h:h?{closeIcon:g}:{}},[h,g]),U=Hu(z,!0),H=100-(!A||A<0?0:A>100?100:A),X="".concat(r,"-notice");return C.createElement("div",Mt({},m,{ref:e,className:Be(X,a,re({},"".concat(X,"-closable"),h)),style:i,onMouseEnter:function(W){var K;E(!0),m==null||(K=m.onMouseEnter)===null||K===void 0||K.call(m,W)},onMouseLeave:function(W){var K;E(!1),m==null||(K=m.onMouseLeave)===null||K===void 0||K.call(m,W)},onClick:v}),C.createElement("div",{className:"".concat(X,"-content")},f),h&&C.createElement("a",Mt({tabIndex:0,className:"".concat(X,"-close"),onKeyDown:G,"aria-label":"Close"},U,{onClick:function(W){W.preventDefault(),W.stopPropagation(),F()}}),z.closeIcon),B&&C.createElement("progress",{className:"".concat(X,"-progress"),max:"100",value:H},H+"%"))}),Qxe=Je.createContext({}),Hje=function(e){var r=e.children,i=e.classNames;return Je.createElement(Qxe.Provider,{value:{classNames:i}},r)},Dre=8,Lre=3,kre=16,Wje=function(e){var r={offset:Dre,threshold:Lre,gap:kre};if(e&&vn(e)==="object"){var i,a,o;r.offset=(i=e.offset)!==null&&i!==void 0?i:Dre,r.threshold=(a=e.threshold)!==null&&a!==void 0?a:Lre,r.gap=(o=e.gap)!==null&&o!==void 0?o:kre}return[!!e,r]},qje=["className","style","classNames","styles"],Yje=function(e){var r=e.configList,i=e.placement,a=e.prefixCls,o=e.className,s=e.style,l=e.motion,c=e.onAllNoticeRemoved,u=e.onNoticeClose,d=e.stack,f=C.useContext(Qxe),h=f.classNames,p=C.useRef({}),g=C.useState(null),m=fe(g,2),v=m[0],y=m[1],b=C.useState([]),x=fe(b,2),_=x[0],S=x[1],M=r.map(function($){return{config:$,key:String($.key)}}),E=Wje(d),T=fe(E,2),P=T[0],A=T[1],N=A.offset,O=A.threshold,I=A.gap,D=P&&(_.length>0||M.length<=O),k=typeof l=="function"?l(i):l;return C.useEffect(function(){P&&_.length>1&&S(function($){return $.filter(function(B){return M.some(function(F){var G=F.key;return B===G})})})},[_,M,P]),C.useEffect(function(){var $;if(P&&p.current[($=M[M.length-1])===null||$===void 0?void 0:$.key]){var B;y(p.current[(B=M[M.length-1])===null||B===void 0?void 0:B.key])}},[M,P]),Je.createElement(zxe,Mt({key:i,className:Be(a,"".concat(a,"-").concat(i),h==null?void 0:h.list,o,re(re({},"".concat(a,"-stack"),!!P),"".concat(a,"-stack-expanded"),D)),style:s,keys:M,motionAppear:!0},k,{onAllRemoved:function(){c(i)}}),function($,B){var F=$.config,G=$.className,z=$.style,U=$.index,H=F,X=H.key,V=H.times,W=String(X),K=F,q=K.className,Q=K.style,ie=K.classNames,oe=K.styles,ue=ir(K,qje),le=M.findIndex(function(_e){return _e.key===W}),me={};if(P){var J=M.length-1-(le>-1?le:U-1),pe=i==="top"||i==="bottom"?"-50%":"0";if(J>0){var ve,Me,Re;me.height=D?(ve=p.current[W])===null||ve===void 0?void 0:ve.offsetHeight:v==null?void 0:v.offsetHeight;for(var Xe=0,He=0;He<J;He++){var ee;Xe+=((ee=p.current[M[M.length-1-He].key])===null||ee===void 0?void 0:ee.offsetHeight)+I}var Y=(D?Xe:J*N)*(i.startsWith("top")?1:-1),ce=!D&&v!==null&&v!==void 0&&v.offsetWidth&&(Me=p.current[W])!==null&&Me!==void 0&&Me.offsetWidth?((v==null?void 0:v.offsetWidth)-N*2*(J<3?J:3))/((Re=p.current[W])===null||Re===void 0?void 0:Re.offsetWidth):1;me.transform="translate3d(".concat(pe,", ").concat(Y,"px, 0) scaleX(").concat(ce,")")}else me.transform="translate3d(".concat(pe,", 0, 0)")}return Je.createElement("div",{ref:B,className:Be("".concat(a,"-notice-wrapper"),G,ie==null?void 0:ie.wrapper),style:se(se(se({},z),me),oe==null?void 0:oe.wrapper),onMouseEnter:function(){return S(function(Ae){return Ae.includes(W)?Ae:[].concat(ot(Ae),[W])})},onMouseLeave:function(){return S(function(Ae){return Ae.filter(function(Ce){return Ce!==W})})}},Je.createElement(Zxe,Mt({},ue,{ref:function(Ae){le>-1?p.current[W]=Ae:delete p.current[W]},prefixCls:a,classNames:ie,styles:oe,className:Be(q,h==null?void 0:h.notice),style:Q,times:V,key:X,eventKey:X,onNoticeClose:u,hovering:P&&_.length>0})))})},Xje=C.forwardRef(function(n,e){var r=n.prefixCls,i=r===void 0?"rc-notification":r,a=n.container,o=n.motion,s=n.maxCount,l=n.className,c=n.style,u=n.onAllRemoved,d=n.stack,f=n.renderNotifications,h=C.useState([]),p=fe(h,2),g=p[0],m=p[1],v=function(P){var A,N=g.find(function(O){return O.key===P});N==null||(A=N.onClose)===null||A===void 0||A.call(N),m(function(O){return O.filter(function(I){return I.key!==P})})};C.useImperativeHandle(e,function(){return{open:function(P){m(function(A){var N=ot(A),O=N.findIndex(function(k){return k.key===P.key}),I=se({},P);if(O>=0){var D;I.times=(((D=A[O])===null||D===void 0?void 0:D.times)||0)+1,N[O]=I}else I.times=0,N.push(I);return s>0&&N.length>s&&(N=N.slice(-s)),N})},close:function(P){v(P)},destroy:function(){m([])}}});var y=C.useState({}),b=fe(y,2),x=b[0],_=b[1];C.useEffect(function(){var T={};g.forEach(function(P){var A=P.placement,N=A===void 0?"topRight":A;N&&(T[N]=T[N]||[],T[N].push(P))}),Object.keys(x).forEach(function(P){T[P]=T[P]||[]}),_(T)},[g]);var S=function(P){_(function(A){var N=se({},A),O=N[P]||[];return O.length||delete N[P],N})},M=C.useRef(!1);if(C.useEffect(function(){Object.keys(x).length>0?M.current=!0:M.current&&(u==null||u(),M.current=!1)},[x]),!a)return null;var E=Object.keys(x);return $m.createPortal(C.createElement(C.Fragment,null,E.map(function(T){var P=x[T],A=C.createElement(Yje,{key:T,configList:P,placement:T,prefixCls:i,className:l==null?void 0:l(T),style:c==null?void 0:c(T),motion:o,onNoticeClose:v,onAllNoticeRemoved:S,stack:d});return f?f(A,{prefixCls:i,key:T}):A})),a)}),Kje=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],Zje=function(){return document.body},Fre=0;function Qje(){for(var n={},e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r.forEach(function(a){a&&Object.keys(a).forEach(function(o){var s=a[o];s!==void 0&&(n[o]=s)})}),n}function Jje(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=n.getContainer,r=e===void 0?Zje:e,i=n.motion,a=n.prefixCls,o=n.maxCount,s=n.className,l=n.style,c=n.onAllRemoved,u=n.stack,d=n.renderNotifications,f=ir(n,Kje),h=C.useState(),p=fe(h,2),g=p[0],m=p[1],v=C.useRef(),y=C.createElement(Xje,{container:g,ref:v,prefixCls:a,motion:i,maxCount:o,className:s,style:l,onAllRemoved:c,stack:u,renderNotifications:d}),b=C.useState([]),x=fe(b,2),_=x[0],S=x[1],M=Lr(function(T){var P=Qje(f,T);(P.key===null||P.key===void 0)&&(P.key="rc-notification-".concat(Fre),Fre+=1),S(function(A){return[].concat(ot(A),[{type:"open",config:P}])})}),E=C.useMemo(function(){return{open:M,close:function(P){S(function(A){return[].concat(ot(A),[{type:"close",key:P}])})},destroy:function(){S(function(P){return[].concat(ot(P),[{type:"destroy"}])})}}},[]);return C.useEffect(function(){m(r())}),C.useEffect(function(){if(v.current&&_.length){_.forEach(function(A){switch(A.type){case"open":v.current.open(A.config);break;case"close":v.current.close(A.key);break;case"destroy":v.current.destroy();break}});var T,P;S(function(A){return(T!==A||!P)&&(T=A,P=A.filter(function(N){return!_.includes(N)})),P})}},[_]),[E,y]}var eHe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},tHe=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:eHe}))},_4=C.forwardRef(tHe);const dY=Je.createContext(void 0),kg=100,nHe=10,Jxe=kg*nHe,e_e={Modal:kg,Drawer:kg,Popover:kg,Popconfirm:kg,Tooltip:kg,Tour:kg,FloatButton:kg},rHe={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function iHe(n){return n in e_e}const dM=(n,e)=>{const[,r]=Zc(),i=Je.useContext(dY),a=iHe(n);let o;if(e!==void 0)o=[e,e];else{let s=i??0;a?s+=(i?0:r.zIndexPopupBase)+e_e[n]:s+=rHe[n],o=[i===void 0?e:s,s]}return o},aHe=n=>{const{componentCls:e,iconCls:r,boxShadow:i,colorText:a,colorSuccess:o,colorError:s,colorWarning:l,colorInfo:c,fontSizeLG:u,motionEaseInOutCirc:d,motionDurationSlow:f,marginXS:h,paddingXS:p,borderRadiusLG:g,zIndexPopup:m,contentPadding:v,contentBg:y}=n,b=`${e}-notice`,x=new qr("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:p,transform:"translateY(0)",opacity:1}}),_=new qr("MessageMoveOut",{"0%":{maxHeight:n.height,padding:p,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),S={padding:p,textAlign:"center",[`${e}-custom-content`]:{display:"flex",alignItems:"center"},[`${e}-custom-content > ${r}`]:{marginInlineEnd:h,fontSize:u},[`${b}-content`]:{display:"inline-block",padding:v,background:y,borderRadius:g,boxShadow:i,pointerEvents:"all"},[`${e}-success > ${r}`]:{color:o},[`${e}-error > ${r}`]:{color:s},[`${e}-warning > ${r}`]:{color:l},[`${e}-info > ${r},
      ${e}-loading > ${r}`]:{color:c}};return[{[e]:Object.assign(Object.assign({},ts(n)),{color:a,position:"fixed",top:h,width:"100%",pointerEvents:"none",zIndex:m,[`${e}-move-up`]:{animationFillMode:"forwards"},[`
        ${e}-move-up-appear,
        ${e}-move-up-enter
      `]:{animationName:x,animationDuration:f,animationPlayState:"paused",animationTimingFunction:d},[`
        ${e}-move-up-appear${e}-move-up-appear-active,
        ${e}-move-up-enter${e}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${e}-move-up-leave`]:{animationName:_,animationDuration:f,animationPlayState:"paused",animationTimingFunction:d},[`${e}-move-up-leave${e}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[e]:{[`${b}-wrapper`]:Object.assign({},S)}},{[`${e}-notice-pure-panel`]:Object.assign(Object.assign({},S),{padding:0,textAlign:"start"})}]},oHe=n=>({zIndexPopup:n.zIndexPopupBase+Jxe+10,contentBg:n.colorBgElevated,contentPadding:`${(n.controlHeightLG-n.fontSize*n.lineHeight)/2}px ${n.paddingSM}px`}),t_e=Ja("Message",n=>{const e=Qr(n,{height:150});return[aHe(e)]},oHe);var sHe=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const lHe={info:C.createElement(Xxe,null),success:C.createElement(b4,null),error:C.createElement(L_,null),warning:C.createElement(x4,null),loading:C.createElement(_4,null)},n_e=n=>{let{prefixCls:e,type:r,icon:i,children:a}=n;return C.createElement("div",{className:Be(`${e}-custom-content`,`${e}-${r}`)},i||lHe[r],C.createElement("span",null,a))},cHe=n=>{const{prefixCls:e,className:r,type:i,icon:a,content:o}=n,s=sHe(n,["prefixCls","className","type","icon","content"]),{getPrefixCls:l}=C.useContext(yr),c=e||l("message"),u=Qc(c),[d,f,h]=t_e(c,u);return d(C.createElement(Zxe,Object.assign({},s,{prefixCls:c,className:Be(r,f,`${c}-notice-pure-panel`,h,u),eventKey:"pure",duration:null,content:C.createElement(n_e,{prefixCls:c,type:i,icon:a},o)})))};function uHe(n,e){return{motionName:e??`${n}-move-up`}}function fY(n){let e;const r=new Promise(a=>{e=n(()=>{a(!0)})}),i=()=>{e==null||e()};return i.then=(a,o)=>r.then(a,o),i.promise=r,i}var dHe=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const fHe=8,hHe=3,pHe=n=>{let{children:e,prefixCls:r}=n;const i=Qc(r),[a,o,s]=t_e(r,i);return a(C.createElement(Hje,{classNames:{list:Be(o,s,i)}},e))},gHe=(n,e)=>{let{prefixCls:r,key:i}=e;return C.createElement(pHe,{prefixCls:r,key:i},n)},mHe=C.forwardRef((n,e)=>{const{top:r,prefixCls:i,getContainer:a,maxCount:o,duration:s=hHe,rtl:l,transitionName:c,onAllRemoved:u}=n,{getPrefixCls:d,getPopupContainer:f,message:h,direction:p}=C.useContext(yr),g=i||d("message"),m=()=>({left:"50%",transform:"translateX(-50%)",top:r??fHe}),v=()=>Be({[`${g}-rtl`]:l??p==="rtl"}),y=()=>uHe(g,c),b=C.createElement("span",{className:`${g}-close-x`},C.createElement(k_,{className:`${g}-close-icon`})),[x,_]=Jje({prefixCls:g,style:m,className:v,motion:y,closable:!1,closeIcon:b,duration:s,getContainer:()=>(a==null?void 0:a())||(f==null?void 0:f())||document.body,maxCount:o,onAllRemoved:u,renderNotifications:gHe});return C.useImperativeHandle(e,()=>Object.assign(Object.assign({},x),{prefixCls:g,message:h})),_});let $re=0;function r_e(n){const e=C.useRef(null);return v4(),[C.useMemo(()=>{const i=c=>{var u;(u=e.current)===null||u===void 0||u.close(c)},a=c=>{if(!e.current){const M=()=>{};return M.then=()=>{},M}const{open:u,prefixCls:d,message:f}=e.current,h=`${d}-notice`,{content:p,icon:g,type:m,key:v,className:y,style:b,onClose:x}=c,_=dHe(c,["content","icon","type","key","className","style","onClose"]);let S=v;return S==null&&($re+=1,S=`antd-message-${$re}`),fY(M=>(u(Object.assign(Object.assign({},_),{key:S,content:C.createElement(n_e,{prefixCls:d,type:m,icon:g},p),placement:"top",className:Be(m&&`${h}-${m}`,y,f==null?void 0:f.className),style:Object.assign(Object.assign({},f==null?void 0:f.style),b),onClose:()=>{x==null||x(),M()}})),()=>{i(S)}))},s={open:a,destroy:c=>{var u;c!==void 0?i(c):(u=e.current)===null||u===void 0||u.destroy()}};return["info","success","warning","error","loading"].forEach(c=>{const u=(d,f,h)=>{let p;d&&typeof d=="object"&&"content"in d?p=d:p={content:d};let g,m;typeof f=="function"?m=f:(g=f,m=h);const v=Object.assign(Object.assign({onClose:m,duration:g},p),{type:c});return a(v)};s[c]=u}),s},[]),C.createElement(mHe,Object.assign({key:"message-holder"},n,{ref:e}))]}function vHe(n){return r_e(n)}function yHe(){const[n,e]=C.useState([]),r=C.useCallback(i=>(e(a=>[].concat(ot(a),[i])),()=>{e(a=>a.filter(o=>o!==i))}),[]);return[n,r]}function pi(){pi=function(){return e};var n,e={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function($,B,F){$[B]=F.value},o=typeof Symbol=="function"?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u($,B,F){return Object.defineProperty($,B,{value:F,enumerable:!0,configurable:!0,writable:!0}),$[B]}try{u({},"")}catch{u=function(F,G,z){return F[G]=z}}function d($,B,F,G){var z=B&&B.prototype instanceof y?B:y,U=Object.create(z.prototype),H=new D(G||[]);return a(U,"_invoke",{value:A($,F,H)}),U}function f($,B,F){try{return{type:"normal",arg:$.call(B,F)}}catch(G){return{type:"throw",arg:G}}}e.wrap=d;var h="suspendedStart",p="suspendedYield",g="executing",m="completed",v={};function y(){}function b(){}function x(){}var _={};u(_,s,function(){return this});var S=Object.getPrototypeOf,M=S&&S(S(k([])));M&&M!==r&&i.call(M,s)&&(_=M);var E=x.prototype=y.prototype=Object.create(_);function T($){["next","throw","return"].forEach(function(B){u($,B,function(F){return this._invoke(B,F)})})}function P($,B){function F(z,U,H,X){var V=f($[z],$,U);if(V.type!=="throw"){var W=V.arg,K=W.value;return K&&vn(K)=="object"&&i.call(K,"__await")?B.resolve(K.__await).then(function(q){F("next",q,H,X)},function(q){F("throw",q,H,X)}):B.resolve(K).then(function(q){W.value=q,H(W)},function(q){return F("throw",q,H,X)})}X(V.arg)}var G;a(this,"_invoke",{value:function(U,H){function X(){return new B(function(V,W){F(U,H,V,W)})}return G=G?G.then(X,X):X()}})}function A($,B,F){var G=h;return function(z,U){if(G===g)throw Error("Generator is already running");if(G===m){if(z==="throw")throw U;return{value:n,done:!0}}for(F.method=z,F.arg=U;;){var H=F.delegate;if(H){var X=N(H,F);if(X){if(X===v)continue;return X}}if(F.method==="next")F.sent=F._sent=F.arg;else if(F.method==="throw"){if(G===h)throw G=m,F.arg;F.dispatchException(F.arg)}else F.method==="return"&&F.abrupt("return",F.arg);G=g;var V=f($,B,F);if(V.type==="normal"){if(G=F.done?m:p,V.arg===v)continue;return{value:V.arg,done:F.done}}V.type==="throw"&&(G=m,F.method="throw",F.arg=V.arg)}}}function N($,B){var F=B.method,G=$.iterator[F];if(G===n)return B.delegate=null,F==="throw"&&$.iterator.return&&(B.method="return",B.arg=n,N($,B),B.method==="throw")||F!=="return"&&(B.method="throw",B.arg=new TypeError("The iterator does not provide a '"+F+"' method")),v;var z=f(G,$.iterator,B.arg);if(z.type==="throw")return B.method="throw",B.arg=z.arg,B.delegate=null,v;var U=z.arg;return U?U.done?(B[$.resultName]=U.value,B.next=$.nextLoc,B.method!=="return"&&(B.method="next",B.arg=n),B.delegate=null,v):U:(B.method="throw",B.arg=new TypeError("iterator result is not an object"),B.delegate=null,v)}function O($){var B={tryLoc:$[0]};1 in $&&(B.catchLoc=$[1]),2 in $&&(B.finallyLoc=$[2],B.afterLoc=$[3]),this.tryEntries.push(B)}function I($){var B=$.completion||{};B.type="normal",delete B.arg,$.completion=B}function D($){this.tryEntries=[{tryLoc:"root"}],$.forEach(O,this),this.reset(!0)}function k($){if($||$===""){var B=$[s];if(B)return B.call($);if(typeof $.next=="function")return $;if(!isNaN($.length)){var F=-1,G=function z(){for(;++F<$.length;)if(i.call($,F))return z.value=$[F],z.done=!1,z;return z.value=n,z.done=!0,z};return G.next=G}}throw new TypeError(vn($)+" is not iterable")}return b.prototype=x,a(E,"constructor",{value:x,configurable:!0}),a(x,"constructor",{value:b,configurable:!0}),b.displayName=u(x,c,"GeneratorFunction"),e.isGeneratorFunction=function($){var B=typeof $=="function"&&$.constructor;return!!B&&(B===b||(B.displayName||B.name)==="GeneratorFunction")},e.mark=function($){return Object.setPrototypeOf?Object.setPrototypeOf($,x):($.__proto__=x,u($,c,"GeneratorFunction")),$.prototype=Object.create(E),$},e.awrap=function($){return{__await:$}},T(P.prototype),u(P.prototype,l,function(){return this}),e.AsyncIterator=P,e.async=function($,B,F,G,z){z===void 0&&(z=Promise);var U=new P(d($,B,F,G),z);return e.isGeneratorFunction(B)?U:U.next().then(function(H){return H.done?H.value:U.next()})},T(E),u(E,c,"Generator"),u(E,s,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),e.keys=function($){var B=Object($),F=[];for(var G in B)F.push(G);return F.reverse(),function z(){for(;F.length;){var U=F.pop();if(U in B)return z.value=U,z.done=!1,z}return z.done=!0,z}},e.values=k,D.prototype={constructor:D,reset:function(B){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(I),!B)for(var F in this)F.charAt(0)==="t"&&i.call(this,F)&&!isNaN(+F.slice(1))&&(this[F]=n)},stop:function(){this.done=!0;var B=this.tryEntries[0].completion;if(B.type==="throw")throw B.arg;return this.rval},dispatchException:function(B){if(this.done)throw B;var F=this;function G(W,K){return H.type="throw",H.arg=B,F.next=W,K&&(F.method="next",F.arg=n),!!K}for(var z=this.tryEntries.length-1;z>=0;--z){var U=this.tryEntries[z],H=U.completion;if(U.tryLoc==="root")return G("end");if(U.tryLoc<=this.prev){var X=i.call(U,"catchLoc"),V=i.call(U,"finallyLoc");if(X&&V){if(this.prev<U.catchLoc)return G(U.catchLoc,!0);if(this.prev<U.finallyLoc)return G(U.finallyLoc)}else if(X){if(this.prev<U.catchLoc)return G(U.catchLoc,!0)}else{if(!V)throw Error("try statement without catch or finally");if(this.prev<U.finallyLoc)return G(U.finallyLoc)}}}},abrupt:function(B,F){for(var G=this.tryEntries.length-1;G>=0;--G){var z=this.tryEntries[G];if(z.tryLoc<=this.prev&&i.call(z,"finallyLoc")&&this.prev<z.finallyLoc){var U=z;break}}U&&(B==="break"||B==="continue")&&U.tryLoc<=F&&F<=U.finallyLoc&&(U=null);var H=U?U.completion:{};return H.type=B,H.arg=F,U?(this.method="next",this.next=U.finallyLoc,v):this.complete(H)},complete:function(B,F){if(B.type==="throw")throw B.arg;return B.type==="break"||B.type==="continue"?this.next=B.arg:B.type==="return"?(this.rval=this.arg=B.arg,this.method="return",this.next="end"):B.type==="normal"&&F&&(this.next=F),v},finish:function(B){for(var F=this.tryEntries.length-1;F>=0;--F){var G=this.tryEntries[F];if(G.finallyLoc===B)return this.complete(G.completion,G.afterLoc),I(G),v}},catch:function(B){for(var F=this.tryEntries.length-1;F>=0;--F){var G=this.tryEntries[F];if(G.tryLoc===B){var z=G.completion;if(z.type==="throw"){var U=z.arg;I(G)}return U}}throw Error("illegal catch attempt")},delegateYield:function(B,F,G){return this.delegate={iterator:k(B),resultName:F,nextLoc:G},this.method==="next"&&(this.arg=n),v}},e}function Bre(n,e,r,i,a,o,s){try{var l=n[o](s),c=l.value}catch(u){return void r(u)}l.done?e(c):Promise.resolve(c).then(i,a)}function bl(n){return function(){var e=this,r=arguments;return new Promise(function(i,a){var o=n.apply(e,r);function s(c){Bre(o,i,a,s,l,"next",c)}function l(c){Bre(o,i,a,s,l,"throw",c)}s(void 0)})}}var fM=se({},$1e),bHe=fM.version,E5=fM.render,xHe=fM.unmountComponentAtNode,w4;try{var _He=Number((bHe||"").split(".")[0]);_He>=18&&(w4=fM.createRoot)}catch{}function zre(n){var e=fM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;e&&vn(e)==="object"&&(e.usingClientEntryPoint=n)}var DN="__rc_react_root__";function wHe(n,e){zre(!0);var r=e[DN]||w4(e);zre(!1),r.render(n),e[DN]=r}function SHe(n,e){E5==null||E5(n,e)}function EHe(n,e){if(w4){wHe(n,e);return}SHe(n,e)}function CHe(n){return zG.apply(this,arguments)}function zG(){return zG=bl(pi().mark(function n(e){return pi().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.resolve().then(function(){var a;(a=e[DN])===null||a===void 0||a.unmount(),delete e[DN]}));case 1:case"end":return i.stop()}},n)})),zG.apply(this,arguments)}function MHe(n){xHe(n)}function THe(n){return UG.apply(this,arguments)}function UG(){return UG=bl(pi().mark(function n(e){return pi().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(w4===void 0){i.next=2;break}return i.abrupt("return",CHe(e));case 2:MHe(e);case 3:case"end":return i.stop()}},n)})),UG.apply(this,arguments)}const AHe=(n,e)=>(EHe(n,e),()=>THe(e));let RHe=AHe;function hY(){return RHe}const C5=()=>({height:0,opacity:0}),Ure=n=>{const{scrollHeight:e}=n;return{height:e,opacity:1}},PHe=n=>({height:n?n.offsetHeight:0}),M5=(n,e)=>(e==null?void 0:e.deadline)===!0||e.propertyName==="height",Vre=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:UE}-motion-collapse`,onAppearStart:C5,onEnterStart:C5,onAppearActive:Ure,onEnterActive:Ure,onLeaveStart:PHe,onLeaveActive:C5,onAppearEnd:M5,onEnterEnd:M5,onLeaveEnd:M5,motionDeadline:500}},dy=(n,e,r)=>r!==void 0?r:`${n}-${e}`;function Qu(n,e){var r=Object.assign({},n);return Array.isArray(e)&&e.forEach(function(i){delete r[i]}),r}const S4=function(n){if(!n)return!1;if(n instanceof Element){if(n.offsetParent)return!0;if(n.getBBox){var e=n.getBBox(),r=e.width,i=e.height;if(r||i)return!0}if(n.getBoundingClientRect){var a=n.getBoundingClientRect(),o=a.width,s=a.height;if(o||s)return!0}}return!1},NHe=n=>{const{componentCls:e,colorPrimary:r}=n;return{[e]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${r})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${n.motionEaseOutCirc}`,`opacity 2s ${n.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${n.motionDurationSlow} ${n.motionEaseInOut}`,`opacity ${n.motionDurationSlow} ${n.motionEaseInOut}`].join(",")}}}}},OHe=DGe("Wave",n=>[NHe(n)]),i_e=`${UE}-wave-target`;function T5(n){return n&&n!=="#fff"&&n!=="#ffffff"&&n!=="rgb(255, 255, 255)"&&n!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(n)&&n!=="transparent"}function IHe(n){const{borderTopColor:e,borderColor:r,backgroundColor:i}=getComputedStyle(n);return T5(e)?e:T5(r)?r:T5(i)?i:null}function A5(n){return Number.isNaN(n)?0:n}const DHe=n=>{const{className:e,target:r,component:i,registerUnmount:a}=n,o=C.useRef(null),s=C.useRef(null);C.useEffect(()=>{s.current=a()},[]);const[l,c]=C.useState(null),[u,d]=C.useState([]),[f,h]=C.useState(0),[p,g]=C.useState(0),[m,v]=C.useState(0),[y,b]=C.useState(0),[x,_]=C.useState(!1),S={left:f,top:p,width:m,height:y,borderRadius:u.map(T=>`${T}px`).join(" ")};l&&(S["--wave-color"]=l);function M(){const T=getComputedStyle(r);c(IHe(r));const P=T.position==="static",{borderLeftWidth:A,borderTopWidth:N}=T;h(P?r.offsetLeft:A5(-parseFloat(A))),g(P?r.offsetTop:A5(-parseFloat(N))),v(r.offsetWidth),b(r.offsetHeight);const{borderTopLeftRadius:O,borderTopRightRadius:I,borderBottomLeftRadius:D,borderBottomRightRadius:k}=T;d([O,I,k,D].map($=>A5(parseFloat($))))}if(C.useEffect(()=>{if(r){const T=Gr(()=>{M(),_(!0)});let P;return typeof ResizeObserver<"u"&&(P=new ResizeObserver(M),P.observe(r)),()=>{Gr.cancel(T),P==null||P.disconnect()}}},[]),!x)return null;const E=(i==="Checkbox"||i==="Radio")&&(r==null?void 0:r.classList.contains(i_e));return C.createElement(av,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(T,P)=>{var A,N;if(P.deadline||P.propertyName==="opacity"){const O=(A=o.current)===null||A===void 0?void 0:A.parentElement;(N=s.current)===null||N===void 0||N.call(s).then(()=>{O==null||O.remove()})}return!1}},(T,P)=>{let{className:A}=T;return C.createElement("div",{ref:hh(o,P),className:Be(e,A,{"wave-quick":E}),style:S})})},LHe=(n,e)=>{var r;const{component:i}=e;if(i==="Checkbox"&&!(!((r=n.querySelector("input"))===null||r===void 0)&&r.checked))return;const a=document.createElement("div");a.style.position="absolute",a.style.left="0px",a.style.top="0px",n==null||n.insertBefore(a,n==null?void 0:n.firstChild);const o=hY();let s=null;function l(){return s}s=o(C.createElement(DHe,Object.assign({},e,{target:n,registerUnmount:l})),a)},kHe=(n,e,r)=>{const{wave:i}=C.useContext(yr),[,a,o]=Zc(),s=Lr(u=>{const d=n.current;if(i!=null&&i.disabled||!d)return;const f=d.querySelector(`.${i_e}`)||d,{showEffect:h}=i||{};(h||LHe)(f,{className:e,token:a,component:r,event:u,hashId:o})}),l=C.useRef(null);return u=>{Gr.cancel(l.current),l.current=Gr(()=>{s(u)})}},FHe=n=>{const{children:e,disabled:r,component:i}=n,{getPrefixCls:a}=C.useContext(yr),o=C.useRef(null),s=a("wave"),[,l]=OHe(s),c=kHe(o,Be(s,l),i);if(Je.useEffect(()=>{const d=o.current;if(!d||d.nodeType!==1||r)return;const f=h=>{!S4(h.target)||!d.getAttribute||d.getAttribute("disabled")||d.disabled||d.className.includes("disabled")||d.className.includes("-leave")||c(h)};return d.addEventListener("click",f,!0),()=>{d.removeEventListener("click",f,!0)}},[r]),!Je.isValidElement(e))return e??null;const u=O_(e)?hh(lM(e),o):o;return Vm(e,{ref:u})},af=n=>{const e=Je.useContext(cy);return Je.useMemo(()=>n?typeof n=="string"?n??e:typeof n=="function"?n(e):e:e,[n,e])},$He=n=>{const{componentCls:e}=n;return{[e]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},BHe=n=>{const{componentCls:e,antCls:r}=n;return{[e]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${e}-item:empty`]:{display:"none"},[`${e}-item > ${r}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},zHe=n=>{const{componentCls:e}=n;return{[e]:{"&-gap-row-small":{rowGap:n.spaceGapSmallSize},"&-gap-row-middle":{rowGap:n.spaceGapMiddleSize},"&-gap-row-large":{rowGap:n.spaceGapLargeSize},"&-gap-col-small":{columnGap:n.spaceGapSmallSize},"&-gap-col-middle":{columnGap:n.spaceGapMiddleSize},"&-gap-col-large":{columnGap:n.spaceGapLargeSize}}}},a_e=Ja("Space",n=>{const e=Qr(n,{spaceGapSmallSize:n.paddingXS,spaceGapMiddleSize:n.padding,spaceGapLargeSize:n.paddingLG});return[BHe(e),zHe(e),$He(e)]},()=>({}),{resetStyle:!1});var o_e=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const E4=C.createContext(null),ov=(n,e)=>{const r=C.useContext(E4),i=C.useMemo(()=>{if(!r)return"";const{compactDirection:a,isFirstItem:o,isLastItem:s}=r,l=a==="vertical"?"-vertical-":"-";return Be(`${n}-compact${l}item`,{[`${n}-compact${l}first-item`]:o,[`${n}-compact${l}last-item`]:s,[`${n}-compact${l}item-rtl`]:e==="rtl"})},[n,e,r]);return{compactSize:r==null?void 0:r.compactSize,compactDirection:r==null?void 0:r.compactDirection,compactItemClassnames:i}},UHe=n=>{const{children:e}=n;return C.createElement(E4.Provider,{value:null},e)},VHe=n=>{const{children:e}=n,r=o_e(n,["children"]);return C.createElement(E4.Provider,{value:C.useMemo(()=>r,[r])},e)},GHe=n=>{const{getPrefixCls:e,direction:r}=C.useContext(yr),{size:i,direction:a,block:o,prefixCls:s,className:l,rootClassName:c,children:u}=n,d=o_e(n,["size","direction","block","prefixCls","className","rootClassName","children"]),f=af(x=>i??x),h=e("space-compact",s),[p,g]=a_e(h),m=Be(h,g,{[`${h}-rtl`]:r==="rtl",[`${h}-block`]:o,[`${h}-vertical`]:a==="vertical"},l,c),v=C.useContext(E4),y=Bm(u),b=C.useMemo(()=>y.map((x,_)=>{const S=(x==null?void 0:x.key)||`${h}-item-${_}`;return C.createElement(VHe,{key:S,compactSize:f,compactDirection:a,isFirstItem:_===0&&(!v||(v==null?void 0:v.isFirstItem)),isLastItem:_===y.length-1&&(!v||(v==null?void 0:v.isLastItem))},x)}),[i,y,v]);return y.length===0?null:p(C.createElement("div",Object.assign({className:m},d),b))};var jHe=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const s_e=C.createContext(void 0),HHe=n=>{const{getPrefixCls:e,direction:r}=C.useContext(yr),{prefixCls:i,size:a,className:o}=n,s=jHe(n,["prefixCls","size","className"]),l=e("btn-group",i),[,,c]=Zc(),u=C.useMemo(()=>{switch(a){case"large":return"lg";case"small":return"sm";default:return""}},[a]),d=Be(l,{[`${l}-${u}`]:u,[`${l}-rtl`]:r==="rtl"},o,c);return C.createElement(s_e.Provider,{value:a},C.createElement("div",Object.assign({},s,{className:d})))},Gre=/^[\u4E00-\u9FA5]{2}$/,VG=Gre.test.bind(Gre);function l_e(n){return n==="danger"?{danger:!0}:{type:n}}function jre(n){return typeof n=="string"}function R5(n){return n==="text"||n==="link"}function WHe(n,e){if(n==null)return;const r=e?" ":"";return typeof n!="string"&&typeof n!="number"&&jre(n.type)&&VG(n.props.children)?Vm(n,{children:n.props.children.split("").join(r)}):jre(n)?VG(n)?Je.createElement("span",null,n.split("").join(r)):Je.createElement("span",null,n):Kxe(n)?Je.createElement("span",null,n):n}function qHe(n,e){let r=!1;const i=[];return Je.Children.forEach(n,a=>{const o=typeof a,s=o==="string"||o==="number";if(r&&s){const l=i.length-1,c=i[l];i[l]=`${c}${a}`}else i.push(a);r=s}),Je.Children.map(i,a=>WHe(a,e))}["default","primary","danger"].concat(ot(Um));const GG=C.forwardRef((n,e)=>{const{className:r,style:i,children:a,prefixCls:o}=n,s=Be(`${o}-icon`,r);return Je.createElement("span",{ref:e,className:s,style:i},a)}),Hre=C.forwardRef((n,e)=>{const{prefixCls:r,className:i,style:a,iconClassName:o}=n,s=Be(`${r}-loading-icon`,i);return Je.createElement(GG,{prefixCls:r,className:s,style:a,ref:e},Je.createElement(_4,{className:o}))}),P5=()=>({width:0,opacity:0,transform:"scale(0)"}),N5=n=>({width:n.scrollWidth,opacity:1,transform:"scale(1)"}),YHe=n=>{const{prefixCls:e,loading:r,existIcon:i,className:a,style:o,mount:s}=n,l=!!r;return i?Je.createElement(Hre,{prefixCls:e,className:a,style:o}):Je.createElement(av,{visible:l,motionName:`${e}-loading-icon-motion`,motionAppear:!s,motionEnter:!s,motionLeave:!s,removeOnLeave:!0,onAppearStart:P5,onAppearActive:N5,onEnterStart:P5,onEnterActive:N5,onLeaveStart:N5,onLeaveActive:P5},(c,u)=>{let{className:d,style:f}=c;const h=Object.assign(Object.assign({},o),f);return Je.createElement(Hre,{prefixCls:e,className:Be(a,d),style:h,ref:u})})},Wre=(n,e)=>({[`> span, > ${n}`]:{"&:not(:last-child)":{[`&, & > ${n}`]:{"&:not(:disabled)":{borderInlineEndColor:e}}},"&:not(:first-child)":{[`&, & > ${n}`]:{"&:not(:disabled)":{borderInlineStartColor:e}}}}}),XHe=n=>{const{componentCls:e,fontSize:r,lineWidth:i,groupBorderColor:a,colorErrorHover:o}=n;return{[`${e}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:n.calc(i).mul(-1).equal(),[`&, & > ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[e]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${e}-icon-only`]:{fontSize:r}},Wre(`${e}-primary`,a),Wre(`${e}-danger`,o)]}};var KHe=["b"],ZHe=["v"],O5=function(e){return Math.round(Number(e||0))},QHe=function(e){if(e instanceof Zr)return e;if(e&&vn(e)==="object"&&"h"in e&&"b"in e){var r=e,i=r.b,a=ir(r,KHe);return se(se({},a),{},{v:i})}return typeof e=="string"&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e},VE=function(n){$n(r,n);var e=iv(r);function r(i){return st(this,r),e.call(this,QHe(i))}return lt(r,[{key:"toHsbString",value:function(){var a=this.toHsb(),o=O5(a.s*100),s=O5(a.b*100),l=O5(a.h),c=a.a,u="hsb(".concat(l,", ").concat(o,"%, ").concat(s,"%)"),d="hsba(".concat(l,", ").concat(o,"%, ").concat(s,"%, ").concat(c.toFixed(c===0?0:2),")");return c===1?u:d}},{key:"toHsb",value:function(){var a=this.toHsv(),o=a.v,s=ir(a,ZHe);return se(se({},s),{},{b:o,a:this.a})}}]),r}(Zr),JHe=function(e){return e instanceof VE?e:new VE(e)};JHe("#1677ff");const eWe=(n,e)=>(n==null?void 0:n.replace(/[^\w/]/g,"").slice(0,e?8:6))||"",tWe=(n,e)=>n?eWe(n,e):"";let nWe=function(){function n(e){st(this,n);var r;if(this.cleared=!1,e instanceof n){this.metaColor=e.metaColor.clone(),this.colors=(r=e.colors)===null||r===void 0?void 0:r.map(a=>({color:new n(a.color),percent:a.percent})),this.cleared=e.cleared;return}const i=Array.isArray(e);i&&e.length?(this.colors=e.map(a=>{let{color:o,percent:s}=a;return{color:new n(o),percent:s}}),this.metaColor=new VE(this.colors[0].color.metaColor)):this.metaColor=new VE(i?"":e),(!e||i&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return lt(n,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return tWe(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:r}=this;return r?`linear-gradient(90deg, ${r.map(a=>`${a.color.toRgbString()} ${a.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(r){return!r||this.isGradient()!==r.isGradient()?!1:this.isGradient()?this.colors.length===r.colors.length&&this.colors.every((i,a)=>{const o=r.colors[a];return i.percent===o.percent&&i.color.equals(o.color)}):this.toHexString()===r.toHexString()}}])}();const rWe=n=>({[n.componentCls]:{[`${n.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${n.motionDurationMid} ${n.motionEaseInOut},
        opacity ${n.motionDurationMid} ${n.motionEaseInOut} !important`}},[`${n.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${n.motionDurationMid} ${n.motionEaseInOut},
        opacity ${n.motionDurationMid} ${n.motionEaseInOut} !important`}}}),iWe=n=>({animationDuration:n,animationFillMode:"both"}),aWe=n=>({animationDuration:n,animationFillMode:"both"}),C4=function(n,e,r,i){const o=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${o}${n}-enter,
      ${o}${n}-appear
    `]:Object.assign(Object.assign({},iWe(i)),{animationPlayState:"paused"}),[`${o}${n}-leave`]:Object.assign(Object.assign({},aWe(i)),{animationPlayState:"paused"}),[`
      ${o}${n}-enter${n}-enter-active,
      ${o}${n}-appear${n}-appear-active
    `]:{animationName:e,animationPlayState:"running"},[`${o}${n}-leave${n}-leave-active`]:{animationName:r,animationPlayState:"running",pointerEvents:"none"}}},oWe=new qr("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),sWe=new qr("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),lWe=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:r}=n,i=`${r}-fade`,a=e?"&":"";return[C4(i,oWe,sWe,n.motionDurationMid,e),{[`
        ${a}${i}-enter,
        ${a}${i}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${a}${i}-leave`]:{animationTimingFunction:"linear"}}]},cWe=new qr("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),uWe=new qr("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),dWe=new qr("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),fWe=new qr("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),hWe=new qr("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),pWe=new qr("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),gWe=new qr("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),mWe=new qr("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),vWe={"move-up":{inKeyframes:gWe,outKeyframes:mWe},"move-down":{inKeyframes:cWe,outKeyframes:uWe},"move-left":{inKeyframes:dWe,outKeyframes:fWe},"move-right":{inKeyframes:hWe,outKeyframes:pWe}},LN=(n,e)=>{const{antCls:r}=n,i=`${r}-${e}`,{inKeyframes:a,outKeyframes:o}=vWe[e];return[C4(i,a,o,n.motionDurationMid),{[`
        ${i}-enter,
        ${i}-appear
      `]:{opacity:0,animationTimingFunction:n.motionEaseOutCirc},[`${i}-leave`]:{animationTimingFunction:n.motionEaseInOutCirc}}]},pY=new qr("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),gY=new qr("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),mY=new qr("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),vY=new qr("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),yWe=new qr("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),bWe=new qr("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),xWe=new qr("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),_We=new qr("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),wWe={"slide-up":{inKeyframes:pY,outKeyframes:gY},"slide-down":{inKeyframes:mY,outKeyframes:vY},"slide-left":{inKeyframes:yWe,outKeyframes:bWe},"slide-right":{inKeyframes:xWe,outKeyframes:_We}},kN=(n,e)=>{const{antCls:r}=n,i=`${r}-${e}`,{inKeyframes:a,outKeyframes:o}=wWe[e];return[C4(i,a,o,n.motionDurationMid),{[`
      ${i}-enter,
      ${i}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:n.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${i}-leave`]:{animationTimingFunction:n.motionEaseInQuint}}]},yY=new qr("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),SWe=new qr("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),qre=new qr("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),Yre=new qr("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),EWe=new qr("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),CWe=new qr("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),MWe=new qr("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),TWe=new qr("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),AWe=new qr("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),RWe=new qr("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),PWe=new qr("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),NWe=new qr("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),OWe={zoom:{inKeyframes:yY,outKeyframes:SWe},"zoom-big":{inKeyframes:qre,outKeyframes:Yre},"zoom-big-fast":{inKeyframes:qre,outKeyframes:Yre},"zoom-left":{inKeyframes:MWe,outKeyframes:TWe},"zoom-right":{inKeyframes:AWe,outKeyframes:RWe},"zoom-up":{inKeyframes:EWe,outKeyframes:CWe},"zoom-down":{inKeyframes:PWe,outKeyframes:NWe}},bY=(n,e)=>{const{antCls:r}=n,i=`${r}-${e}`,{inKeyframes:a,outKeyframes:o}=OWe[e];return[C4(i,a,o,e==="zoom-big-fast"?n.motionDurationFast:n.motionDurationMid),{[`
        ${i}-enter,
        ${i}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:n.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${i}-leave`]:{animationTimingFunction:n.motionEaseInOutCirc}}]},IWe=(n,e)=>{const{r,g:i,b:a,a:o}=n.toRgb(),s=new VE(n.toRgbString()).onBackground(e).toHsv();return o<=.5?s.v>.5:r*.299+i*.587+a*.114>192},c_e=n=>{const{paddingInline:e,onlyIconSize:r}=n;return Qr(n,{buttonPaddingHorizontal:e,buttonPaddingVertical:0,buttonIconOnlyFontSize:r})},u_e=n=>{var e,r,i,a,o,s;const l=(e=n.contentFontSize)!==null&&e!==void 0?e:n.fontSize,c=(r=n.contentFontSizeSM)!==null&&r!==void 0?r:n.fontSize,u=(i=n.contentFontSizeLG)!==null&&i!==void 0?i:n.fontSizeLG,d=(a=n.contentLineHeight)!==null&&a!==void 0?a:hP(l),f=(o=n.contentLineHeightSM)!==null&&o!==void 0?o:hP(c),h=(s=n.contentLineHeightLG)!==null&&s!==void 0?s:hP(u),p=IWe(new nWe(n.colorBgSolid),"#fff")?"#000":"#fff",g=Um.reduce((m,v)=>Object.assign(Object.assign({},m),{[`${v}ShadowColor`]:`0 ${Qe(n.controlOutlineWidth)} 0 ${QS(n[`${v}1`],n.colorBgContainer)}`}),{});return Object.assign(Object.assign({},g),{fontWeight:400,defaultShadow:`0 ${n.controlOutlineWidth}px 0 ${n.controlTmpOutline}`,primaryShadow:`0 ${n.controlOutlineWidth}px 0 ${n.controlOutline}`,dangerShadow:`0 ${n.controlOutlineWidth}px 0 ${n.colorErrorOutline}`,primaryColor:n.colorTextLightSolid,dangerColor:n.colorTextLightSolid,borderColorDisabled:n.colorBorder,defaultGhostColor:n.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:n.colorBgContainer,paddingInline:n.paddingContentHorizontal-n.lineWidth,paddingInlineLG:n.paddingContentHorizontal-n.lineWidth,paddingInlineSM:8-n.lineWidth,onlyIconSize:"inherit",onlyIconSizeSM:"inherit",onlyIconSizeLG:"inherit",groupBorderColor:n.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:n.colorText,textTextHoverColor:n.colorText,textTextActiveColor:n.colorText,textHoverBg:n.colorFillTertiary,defaultColor:n.colorText,defaultBg:n.colorBgContainer,defaultBorderColor:n.colorBorder,defaultBorderColorDisabled:n.colorBorder,defaultHoverBg:n.colorBgContainer,defaultHoverColor:n.colorPrimaryHover,defaultHoverBorderColor:n.colorPrimaryHover,defaultActiveBg:n.colorBgContainer,defaultActiveColor:n.colorPrimaryActive,defaultActiveBorderColor:n.colorPrimaryActive,solidTextColor:p,contentFontSize:l,contentFontSizeSM:c,contentFontSizeLG:u,contentLineHeight:d,contentLineHeightSM:f,contentLineHeightLG:h,paddingBlock:Math.max((n.controlHeight-l*d)/2-n.lineWidth,0),paddingBlockSM:Math.max((n.controlHeightSM-c*f)/2-n.lineWidth,0),paddingBlockLG:Math.max((n.controlHeightLG-u*h)/2-n.lineWidth,0)})},DWe=n=>{const{componentCls:e,iconCls:r,fontWeight:i,opacityLoading:a,motionDurationSlow:o,motionEaseInOut:s,marginXS:l,calc:c}=n;return{[e]:{outline:"none",position:"relative",display:"inline-flex",gap:n.marginXS,alignItems:"center",justifyContent:"center",fontWeight:i,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${Qe(n.lineWidth)} ${n.lineType} transparent`,cursor:"pointer",transition:`all ${n.motionDurationMid} ${n.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:n.colorText,"&:disabled > *":{pointerEvents:"none"},[`${e}-icon > svg`]:uM(),"> a":{color:"currentColor"},"&:not(:disabled)":Axe(n),[`&${e}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${e}-two-chinese-chars > *:not(${r})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&${e}-icon-only`]:{paddingInline:0,[`&${e}-compact-item`]:{flex:"none"},[`&${e}-round`]:{width:"auto"}},[`&${e}-loading`]:{opacity:a,cursor:"default"},[`${e}-loading-icon`]:{transition:["width","opacity","margin"].map(u=>`${u} ${o} ${s}`).join(",")},[`&:not(${e}-icon-end)`]:{[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineEnd:c(l).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineEnd:0},"&-leave-start":{marginInlineEnd:0},"&-leave-active":{marginInlineEnd:c(l).mul(-1).equal()}}},"&-icon-end":{flexDirection:"row-reverse",[`${e}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineStart:c(l).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineStart:0},"&-leave-start":{marginInlineStart:0},"&-leave-active":{marginInlineStart:c(l).mul(-1).equal()}}}}}},d_e=(n,e,r)=>({[`&:not(:disabled):not(${n}-disabled)`]:{"&:hover":e,"&:active":r}}),LWe=n=>({minWidth:n.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),kWe=n=>({borderRadius:n.controlHeight,paddingInlineStart:n.calc(n.controlHeight).div(2).equal(),paddingInlineEnd:n.calc(n.controlHeight).div(2).equal()}),FWe=n=>({cursor:"not-allowed",borderColor:n.borderColorDisabled,color:n.colorTextDisabled,background:n.colorBgContainerDisabled,boxShadow:"none"}),M4=(n,e,r,i,a,o,s,l)=>({[`&${n}-background-ghost`]:Object.assign(Object.assign({color:r||void 0,background:e,borderColor:i||void 0,boxShadow:"none"},d_e(n,Object.assign({background:e},s),Object.assign({background:e},l))),{"&:disabled":{cursor:"not-allowed",color:a||void 0,borderColor:o||void 0}})}),$We=n=>({[`&:disabled, &${n.componentCls}-disabled`]:Object.assign({},FWe(n))}),BWe=n=>({[`&:disabled, &${n.componentCls}-disabled`]:{cursor:"not-allowed",color:n.colorTextDisabled}}),T4=(n,e,r,i)=>{const o=i&&["link","text"].includes(i)?BWe:$We;return Object.assign(Object.assign({},o(n)),d_e(n.componentCls,e,r))},A4=(n,e,r,i,a)=>({[`&${n.componentCls}-variant-solid`]:Object.assign({color:e,background:r},T4(n,i,a))}),R4=(n,e,r,i,a)=>({[`&${n.componentCls}-variant-outlined, &${n.componentCls}-variant-dashed`]:Object.assign({borderColor:e,background:r},T4(n,i,a))}),P4=n=>({[`&${n.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),N4=(n,e,r,i)=>({[`&${n.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:e},T4(n,r,i))}),eh=(n,e,r,i,a)=>({[`&${n.componentCls}-variant-${r}`]:Object.assign({color:e,boxShadow:"none"},T4(n,i,a,r))}),zWe=n=>{const{componentCls:e}=n;return Um.reduce((r,i)=>{const a=n[`${i}6`],o=n[`${i}1`],s=n[`${i}5`],l=n[`${i}2`],c=n[`${i}3`],u=n[`${i}7`];return Object.assign(Object.assign({},r),{[`&${e}-color-${i}`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:a,boxShadow:n[`${i}ShadowColor`]},A4(n,n.colorTextLightSolid,a,{background:s},{background:u})),R4(n,a,n.colorBgContainer,{color:s,borderColor:s,background:n.colorBgContainer},{color:u,borderColor:u,background:n.colorBgContainer})),P4(n)),N4(n,o,{background:l},{background:c})),eh(n,a,"link",{color:s},{color:u})),eh(n,a,"text",{color:s,background:o},{color:u,background:c}))})},{})},UWe=n=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:n.defaultColor,boxShadow:n.defaultShadow},A4(n,n.solidTextColor,n.colorBgSolid,{color:n.solidTextColor,background:n.colorBgSolidHover},{color:n.solidTextColor,background:n.colorBgSolidActive})),P4(n)),N4(n,n.colorFillTertiary,{background:n.colorFillSecondary},{background:n.colorFill})),M4(n.componentCls,n.ghostBg,n.defaultGhostColor,n.defaultGhostBorderColor,n.colorTextDisabled,n.colorBorder)),eh(n,n.textTextColor,"link",{color:n.colorLinkHover,background:n.linkHoverBg},{color:n.colorLinkActive})),VWe=n=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:n.colorPrimary,boxShadow:n.primaryShadow},R4(n,n.colorPrimary,n.colorBgContainer,{color:n.colorPrimaryTextHover,borderColor:n.colorPrimaryHover,background:n.colorBgContainer},{color:n.colorPrimaryTextActive,borderColor:n.colorPrimaryActive,background:n.colorBgContainer})),P4(n)),N4(n,n.colorPrimaryBg,{background:n.colorPrimaryBgHover},{background:n.colorPrimaryBorder})),eh(n,n.colorPrimaryText,"text",{color:n.colorPrimaryTextHover,background:n.colorPrimaryBg},{color:n.colorPrimaryTextActive,background:n.colorPrimaryBorder})),eh(n,n.colorPrimaryText,"link",{color:n.colorPrimaryTextHover,background:n.linkHoverBg},{color:n.colorPrimaryTextActive})),M4(n.componentCls,n.ghostBg,n.colorPrimary,n.colorPrimary,n.colorTextDisabled,n.colorBorder,{color:n.colorPrimaryHover,borderColor:n.colorPrimaryHover},{color:n.colorPrimaryActive,borderColor:n.colorPrimaryActive})),GWe=n=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:n.colorError,boxShadow:n.dangerShadow},A4(n,n.dangerColor,n.colorError,{background:n.colorErrorHover},{background:n.colorErrorActive})),R4(n,n.colorError,n.colorBgContainer,{color:n.colorErrorHover,borderColor:n.colorErrorBorderHover},{color:n.colorErrorActive,borderColor:n.colorErrorActive})),P4(n)),N4(n,n.colorErrorBg,{background:n.colorErrorBgFilledHover},{background:n.colorErrorBgActive})),eh(n,n.colorError,"text",{color:n.colorErrorHover,background:n.colorErrorBg},{color:n.colorErrorHover,background:n.colorErrorBgActive})),eh(n,n.colorError,"link",{color:n.colorErrorHover},{color:n.colorErrorActive})),M4(n.componentCls,n.ghostBg,n.colorError,n.colorError,n.colorTextDisabled,n.colorBorder,{color:n.colorErrorHover,borderColor:n.colorErrorHover},{color:n.colorErrorActive,borderColor:n.colorErrorActive})),jWe=n=>Object.assign(Object.assign({},eh(n,n.colorLink,"link",{color:n.colorLinkHover},{color:n.colorLinkActive})),M4(n.componentCls,n.ghostBg,n.colorInfo,n.colorInfo,n.colorTextDisabled,n.colorBorder,{color:n.colorInfoHover,borderColor:n.colorInfoHover},{color:n.colorInfoActive,borderColor:n.colorInfoActive})),HWe=n=>{const{componentCls:e}=n;return Object.assign({[`${e}-color-default`]:UWe(n),[`${e}-color-primary`]:VWe(n),[`${e}-color-dangerous`]:GWe(n),[`${e}-color-link`]:jWe(n)},zWe(n))},WWe=n=>Object.assign(Object.assign(Object.assign(Object.assign({},R4(n,n.defaultBorderColor,n.defaultBg,{color:n.defaultHoverColor,borderColor:n.defaultHoverBorderColor,background:n.defaultHoverBg},{color:n.defaultActiveColor,borderColor:n.defaultActiveBorderColor,background:n.defaultActiveBg})),eh(n,n.textTextColor,"text",{color:n.textTextHoverColor,background:n.textHoverBg},{color:n.textTextActiveColor,background:n.colorBgTextActive})),A4(n,n.primaryColor,n.colorPrimary,{background:n.colorPrimaryHover,color:n.primaryColor},{background:n.colorPrimaryActive,color:n.primaryColor})),eh(n,n.colorLink,"link",{color:n.colorLinkHover,background:n.linkHoverBg},{color:n.colorLinkActive})),xY=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:r,controlHeight:i,fontSize:a,borderRadius:o,buttonPaddingHorizontal:s,iconCls:l,buttonPaddingVertical:c,buttonIconOnlyFontSize:u}=n;return[{[e]:{fontSize:a,height:i,padding:`${Qe(c)} ${Qe(s)}`,borderRadius:o,[`&${r}-icon-only`]:{width:i,[l]:{fontSize:u}}}},{[`${r}${r}-circle${e}`]:LWe(n)},{[`${r}${r}-round${e}`]:kWe(n)}]},qWe=n=>{const e=Qr(n,{fontSize:n.contentFontSize});return xY(e,n.componentCls)},YWe=n=>{const e=Qr(n,{controlHeight:n.controlHeightSM,fontSize:n.contentFontSizeSM,padding:n.paddingXS,buttonPaddingHorizontal:n.paddingInlineSM,buttonPaddingVertical:0,borderRadius:n.borderRadiusSM,buttonIconOnlyFontSize:n.onlyIconSizeSM});return xY(e,`${n.componentCls}-sm`)},XWe=n=>{const e=Qr(n,{controlHeight:n.controlHeightLG,fontSize:n.contentFontSizeLG,buttonPaddingHorizontal:n.paddingInlineLG,buttonPaddingVertical:0,borderRadius:n.borderRadiusLG,buttonIconOnlyFontSize:n.onlyIconSizeLG});return xY(e,`${n.componentCls}-lg`)},KWe=n=>{const{componentCls:e}=n;return{[e]:{[`&${e}-block`]:{width:"100%"}}}},ZWe=Ja("Button",n=>{const e=c_e(n);return[DWe(e),qWe(e),YWe(e),XWe(e),KWe(e),HWe(e),WWe(e),XHe(e)]},u_e,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function QWe(n,e,r){const{focusElCls:i,focus:a,borderElCls:o}=r,s=o?"> *":"",l=["hover",a?"focus":null,"active"].filter(Boolean).map(c=>`&:${c} ${s}`).join(",");return{[`&-item:not(${e}-last-item)`]:{marginInlineEnd:n.calc(n.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[l]:{zIndex:2}},i?{[`&${i}`]:{zIndex:2}}:{}),{[`&[disabled] ${s}`]:{zIndex:0}})}}function JWe(n,e,r){const{borderElCls:i}=r,a=i?`> ${i}`:"";return{[`&-item:not(${e}-first-item):not(${e}-last-item) ${a}`]:{borderRadius:0},[`&-item:not(${e}-last-item)${e}-first-item`]:{[`& ${a}, &${n}-sm ${a}, &${n}-lg ${a}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${e}-first-item)${e}-last-item`]:{[`& ${a}, &${n}-sm ${a}, &${n}-lg ${a}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function hM(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:r}=n,i=`${r}-compact`;return{[i]:Object.assign(Object.assign({},QWe(n,i,e)),JWe(r,i,e))}}function eqe(n,e){return{[`&-item:not(${e}-last-item)`]:{marginBottom:n.calc(n.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function tqe(n,e){return{[`&-item:not(${e}-first-item):not(${e}-last-item)`]:{borderRadius:0},[`&-item${e}-first-item:not(${e}-last-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${e}-last-item:not(${e}-first-item)`]:{[`&, &${n}-sm, &${n}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function nqe(n){const e=`${n.componentCls}-compact-vertical`;return{[e]:Object.assign(Object.assign({},eqe(n,e)),tqe(n.componentCls,e))}}const rqe=n=>{const{componentCls:e,colorPrimaryHover:r,lineWidth:i,calc:a}=n,o=a(i).mul(-1).equal(),s=l=>{const c=`${e}-compact${l?"-vertical":""}-item${e}-primary:not([disabled])`;return{[`${c} + ${c}::before`]:{position:"absolute",top:l?o:0,insetInlineStart:l?0:o,backgroundColor:r,content:'""',width:l?"100%":i,height:l?i:"100%"}}};return Object.assign(Object.assign({},s()),s(!0))},iqe=cY(["Button","compact"],n=>{const e=c_e(n);return[hM(e),nqe(e),rqe(e)]},u_e);var aqe=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};function oqe(n){if(typeof n=="object"&&n){let e=n==null?void 0:n.delay;return e=!Number.isNaN(e)&&typeof e=="number"?e:0,{loading:e<=0,delay:e}}return{loading:!!n,delay:0}}const sqe={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["link","link"],text:["default","text"]},lqe=Je.forwardRef((n,e)=>{var r,i;const{loading:a=!1,prefixCls:o,color:s,variant:l,type:c,danger:u=!1,shape:d="default",size:f,styles:h,disabled:p,className:g,rootClassName:m,children:v,icon:y,iconPosition:b="start",ghost:x=!1,block:_=!1,htmlType:S="button",classNames:M,style:E={},autoInsertSpace:T,autoFocus:P}=n,A=aqe(n,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace","autoFocus"]),N=c||"default",[O,I]=C.useMemo(()=>{if(s&&l)return[s,l];const De=sqe[N]||[];return u?["danger",De[1]]:De},[c,s,l,u]),k=O==="danger"?"dangerous":O,{getPrefixCls:$,direction:B,autoInsertSpace:F,className:G,style:z,classNames:U,styles:H}=Zu("button"),X=(r=T??F)!==null&&r!==void 0?r:!0,V=$("btn",o),[W,K,q]=ZWe(V),Q=C.useContext(ju),ie=p??Q,oe=C.useContext(s_e),ue=C.useMemo(()=>oqe(a),[a]),[le,me]=C.useState(ue.loading),[J,pe]=C.useState(!1),ve=C.useRef(null),Me=N_(e,ve),Re=C.Children.count(v)===1&&!y&&!R5(I),Xe=C.useRef(!0);Je.useEffect(()=>(Xe.current=!1,()=>{Xe.current=!0}),[]),C.useEffect(()=>{let De=null;ue.delay>0?De=setTimeout(()=>{De=null,me(!0)},ue.delay):me(ue.loading);function bt(){De&&(clearTimeout(De),De=null)}return bt},[ue]),C.useEffect(()=>{if(!ve.current||!X)return;const De=ve.current.textContent||"";Re&&VG(De)?J||pe(!0):J&&pe(!1)}),C.useEffect(()=>{P&&ve.current&&ve.current.focus()},[]);const He=Je.useCallback(De=>{var bt;if(le||ie){De.preventDefault();return}(bt=n.onClick)===null||bt===void 0||bt.call(n,("href"in n,De))},[n.onClick,le,ie]),{compactSize:ee,compactItemClassnames:Y}=ov(V,B),ce={large:"lg",small:"sm",middle:void 0},_e=af(De=>{var bt,Ke;return(Ke=(bt=f??ee)!==null&&bt!==void 0?bt:oe)!==null&&Ke!==void 0?Ke:De}),Ae=_e&&(i=ce[_e])!==null&&i!==void 0?i:"",Ce=le?"loading":y,et=Qu(A,["navigate"]),Ve=Be(V,K,q,{[`${V}-${d}`]:d!=="default"&&d,[`${V}-${N}`]:N,[`${V}-dangerous`]:u,[`${V}-color-${k}`]:k,[`${V}-variant-${I}`]:I,[`${V}-${Ae}`]:Ae,[`${V}-icon-only`]:!v&&v!==0&&!!Ce,[`${V}-background-ghost`]:x&&!R5(I),[`${V}-loading`]:le,[`${V}-two-chinese-chars`]:J&&X&&!le,[`${V}-block`]:_,[`${V}-rtl`]:B==="rtl",[`${V}-icon-end`]:b==="end"},Y,g,m,G),qe=Object.assign(Object.assign({},z),E),dt=Be(M==null?void 0:M.icon,U.icon),Ge=Object.assign(Object.assign({},(h==null?void 0:h.icon)||{}),H.icon||{}),We=y&&!le?Je.createElement(GG,{prefixCls:V,className:dt,style:Ge},y):a&&typeof a=="object"&&a.icon?Je.createElement(GG,{prefixCls:V,className:dt,style:Ge},a.icon):Je.createElement(YHe,{existIcon:!!y,prefixCls:V,loading:le,mount:Xe.current}),Ze=v||v===0?qHe(v,Re&&X):null;if(et.href!==void 0)return W(Je.createElement("a",Object.assign({},et,{className:Be(Ve,{[`${V}-disabled`]:ie}),href:ie?void 0:et.href,style:qe,onClick:He,ref:Me,tabIndex:ie?-1:0}),We,Ze));let Ie=Je.createElement("button",Object.assign({},A,{type:S,className:Ve,style:qe,onClick:He,disabled:ie,ref:Me}),We,Ze,Y&&Je.createElement(iqe,{prefixCls:V}));return R5(I)||(Ie=Je.createElement(FHe,{component:"Button",disabled:le},Ie)),W(Ie)}),ms=lqe;ms.Group=HHe;ms.__ANT_BUTTON=!0;function I5(n){return!!(n!=null&&n.then)}const f_e=n=>{const{type:e,children:r,prefixCls:i,buttonProps:a,close:o,autoFocus:s,emitEvent:l,isSilent:c,quitOnNullishReturnValue:u,actionFn:d}=n,f=C.useRef(!1),h=C.useRef(null),[p,g]=uy(!1),m=function(){o==null||o.apply(void 0,arguments)};C.useEffect(()=>{let b=null;return s&&(b=setTimeout(()=>{var x;(x=h.current)===null||x===void 0||x.focus({preventScroll:!0})})),()=>{b&&clearTimeout(b)}},[]);const v=b=>{I5(b)&&(g(!0),b.then(function(){g(!1,!0),m.apply(void 0,arguments),f.current=!1},x=>{if(g(!1,!0),f.current=!1,!(c!=null&&c()))return Promise.reject(x)}))},y=b=>{if(f.current)return;if(f.current=!0,!d){m();return}let x;if(l){if(x=d(b),u&&!I5(x)){f.current=!1,m(b);return}}else if(d.length)x=d(o),f.current=!1;else if(x=d(),!I5(x)){m();return}v(x)};return C.createElement(ms,Object.assign({},l_e(e),{onClick:y,loading:p,prefixCls:i},a,{ref:h}),r)},pM=Je.createContext({}),{Provider:h_e}=pM,Xre=()=>{const{autoFocusButton:n,cancelButtonProps:e,cancelTextLocale:r,isSilent:i,mergedOkCancel:a,rootPrefixCls:o,close:s,onCancel:l,onConfirm:c}=C.useContext(pM);return a?Je.createElement(f_e,{isSilent:i,actionFn:l,close:function(){s==null||s.apply(void 0,arguments),c==null||c(!1)},autoFocus:n==="cancel",buttonProps:e,prefixCls:`${o}-btn`},r):null},Kre=()=>{const{autoFocusButton:n,close:e,isSilent:r,okButtonProps:i,rootPrefixCls:a,okTextLocale:o,okType:s,onConfirm:l,onOk:c}=C.useContext(pM);return Je.createElement(f_e,{isSilent:r,type:s||"primary",actionFn:c,close:function(){e==null||e.apply(void 0,arguments),l==null||l(!0)},autoFocus:n==="ok",buttonProps:i,prefixCls:`${a}-btn`},o)};var p_e=C.createContext(null),Zre=[];function cqe(n,e){var r=C.useState(function(){if(!yl())return null;var g=document.createElement("div");return g}),i=fe(r,1),a=i[0],o=C.useRef(!1),s=C.useContext(p_e),l=C.useState(Zre),c=fe(l,2),u=c[0],d=c[1],f=s||(o.current?void 0:function(g){d(function(m){var v=[g].concat(ot(m));return v})});function h(){a.parentElement||document.body.appendChild(a),o.current=!0}function p(){var g;(g=a.parentElement)===null||g===void 0||g.removeChild(a),o.current=!1}return Dr(function(){return n?s?s(h):h():p(),p},[n]),Dr(function(){u.length&&(u.forEach(function(g){return g()}),d(Zre))},[u]),[a,f]}function uqe(n){var e="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),r=document.createElement("div");r.id=e;var i=r.style;i.position="absolute",i.left="0",i.top="0",i.width="100px",i.height="100px",i.overflow="scroll";var a,o;if(n){var s=getComputedStyle(n);i.scrollbarColor=s.scrollbarColor,i.scrollbarWidth=s.scrollbarWidth;var l=getComputedStyle(n,"::-webkit-scrollbar"),c=parseInt(l.width,10),u=parseInt(l.height,10);try{var d=c?"width: ".concat(l.width,";"):"",f=u?"height: ".concat(l.height,";"):"";bp(`
#`.concat(e,`::-webkit-scrollbar {
`).concat(d,`
`).concat(f,`
}`),e)}catch(g){console.error(g),a=c,o=u}}document.body.appendChild(r);var h=n&&a&&!isNaN(a)?a:r.offsetWidth-r.clientWidth,p=n&&o&&!isNaN(o)?o:r.offsetHeight-r.clientHeight;return document.body.removeChild(r),$E(e),{width:h,height:p}}function dqe(n){return typeof document>"u"||!n||!(n instanceof Element)?{width:0,height:0}:uqe(n)}function fqe(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var hqe="rc-util-locker-".concat(Date.now()),Qre=0;function pqe(n){var e=!!n,r=C.useState(function(){return Qre+=1,"".concat(hqe,"_").concat(Qre)}),i=fe(r,1),a=i[0];Dr(function(){if(e){var o=dqe(document.body).width,s=fqe();bp(`
html body {
  overflow-y: hidden;
  `.concat(s?"width: calc(100% - ".concat(o,"px);"):"",`
}`),a)}else $E(a);return function(){$E(a)}},[e,a])}var gqe=!1;function mqe(n){return gqe}var Jre=function(e){return e===!1?!1:!yl()||!e?null:typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e},_Y=C.forwardRef(function(n,e){var r=n.open,i=n.autoLock,a=n.getContainer;n.debug;var o=n.autoDestroy,s=o===void 0?!0:o,l=n.children,c=C.useState(r),u=fe(c,2),d=u[0],f=u[1],h=d||r;C.useEffect(function(){(s||r)&&f(r)},[r,s]);var p=C.useState(function(){return Jre(a)}),g=fe(p,2),m=g[0],v=g[1];C.useEffect(function(){var N=Jre(a);v(N??null)});var y=cqe(h&&!m),b=fe(y,2),x=b[0],_=b[1],S=m??x;pqe(i&&r&&yl()&&(S===x||S===document.body));var M=null;if(l&&O_(l)&&e){var E=l;M=E.ref}var T=N_(M,e);if(!h||!yl()||m===void 0)return null;var P=S===!1||mqe(),A=l;return e&&(A=C.cloneElement(l,{ref:T})),C.createElement(p_e.Provider,{value:_},P?A:$m.createPortal(A,S))}),g_e=C.createContext({});function vqe(){var n=se({},ny);return n.useId}var eie=0,tie=vqe();const wY=tie?function(e){var r=tie();return e||r}:function(e){var r=C.useState("ssr-id"),i=fe(r,2),a=i[0],o=i[1];return C.useEffect(function(){var s=eie;eie+=1,o("rc_unique_".concat(s))},[]),e||a};function nie(n,e,r){var i=e;return!i&&r&&(i="".concat(n,"-").concat(r)),i}function rie(n,e){var r=n["page".concat(e?"Y":"X","Offset")],i="scroll".concat(e?"Top":"Left");if(typeof r!="number"){var a=n.document;r=a.documentElement[i],typeof r!="number"&&(r=a.body[i])}return r}function yqe(n){var e=n.getBoundingClientRect(),r={left:e.left,top:e.top},i=n.ownerDocument,a=i.defaultView||i.parentWindow;return r.left+=rie(a),r.top+=rie(a,!0),r}const bqe=C.memo(function(n){var e=n.children;return e},function(n,e){var r=e.shouldUpdate;return!r});var xqe={width:0,height:0,overflow:"hidden",outline:"none"},_qe={outline:"none"},m_e=Je.forwardRef(function(n,e){var r=n.prefixCls,i=n.className,a=n.style,o=n.title,s=n.ariaId,l=n.footer,c=n.closable,u=n.closeIcon,d=n.onClose,f=n.children,h=n.bodyStyle,p=n.bodyProps,g=n.modalRender,m=n.onMouseDown,v=n.onMouseUp,y=n.holderRef,b=n.visible,x=n.forceRender,_=n.width,S=n.height,M=n.classNames,E=n.styles,T=Je.useContext(g_e),P=T.panel,A=N_(y,P),N=C.useRef(),O=C.useRef();Je.useImperativeHandle(e,function(){return{focus:function(){var H;(H=N.current)===null||H===void 0||H.focus({preventScroll:!0})},changeActive:function(H){var X=document,V=X.activeElement;H&&V===O.current?N.current.focus({preventScroll:!0}):!H&&V===N.current&&O.current.focus({preventScroll:!0})}}});var I={};_!==void 0&&(I.width=_),S!==void 0&&(I.height=S);var D=l?Je.createElement("div",{className:Be("".concat(r,"-footer"),M==null?void 0:M.footer),style:se({},E==null?void 0:E.footer)},l):null,k=o?Je.createElement("div",{className:Be("".concat(r,"-header"),M==null?void 0:M.header),style:se({},E==null?void 0:E.header)},Je.createElement("div",{className:"".concat(r,"-title"),id:s},o)):null,$=C.useMemo(function(){return vn(c)==="object"&&c!==null?c:c?{closeIcon:u??Je.createElement("span",{className:"".concat(r,"-close-x")})}:{}},[c,u,r]),B=Hu($,!0),F=vn(c)==="object"&&c.disabled,G=c?Je.createElement("button",Mt({type:"button",onClick:d,"aria-label":"Close"},B,{className:"".concat(r,"-close"),disabled:F}),$.closeIcon):null,z=Je.createElement("div",{className:Be("".concat(r,"-content"),M==null?void 0:M.content),style:E==null?void 0:E.content},G,k,Je.createElement("div",Mt({className:Be("".concat(r,"-body"),M==null?void 0:M.body),style:se(se({},h),E==null?void 0:E.body)},p),f),D);return Je.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":o?s:null,"aria-modal":"true",ref:A,style:se(se({},a),I),className:Be(r,i),onMouseDown:m,onMouseUp:v},Je.createElement("div",{ref:N,tabIndex:0,style:_qe},Je.createElement(bqe,{shouldUpdate:b||x},g?g(z):z)),Je.createElement("div",{tabIndex:0,ref:O,style:xqe}))}),v_e=C.forwardRef(function(n,e){var r=n.prefixCls,i=n.title,a=n.style,o=n.className,s=n.visible,l=n.forceRender,c=n.destroyOnClose,u=n.motionName,d=n.ariaId,f=n.onVisibleChanged,h=n.mousePosition,p=C.useRef(),g=C.useState(),m=fe(g,2),v=m[0],y=m[1],b={};v&&(b.transformOrigin=v);function x(){var _=yqe(p.current);y(h&&(h.x||h.y)?"".concat(h.x-_.left,"px ").concat(h.y-_.top,"px"):"")}return C.createElement(av,{visible:s,onVisibleChanged:f,onAppearPrepare:x,onEnterPrepare:x,forceRender:l,motionName:u,removeOnLeave:c,ref:p},function(_,S){var M=_.className,E=_.style;return C.createElement(m_e,Mt({},n,{ref:e,title:i,ariaId:d,prefixCls:r,holderRef:S,style:se(se(se({},E),a),b),className:Be(o,M)}))})});v_e.displayName="Content";var wqe=function(e){var r=e.prefixCls,i=e.style,a=e.visible,o=e.maskProps,s=e.motionName,l=e.className;return C.createElement(av,{key:"mask",visible:a,motionName:s,leavedClassName:"".concat(r,"-mask-hidden")},function(c,u){var d=c.className,f=c.style;return C.createElement("div",Mt({ref:u,style:se(se({},f),i),className:Be("".concat(r,"-mask"),d,l)},o))})},Sqe=function(e){var r=e.prefixCls,i=r===void 0?"rc-dialog":r,a=e.zIndex,o=e.visible,s=o===void 0?!1:o,l=e.keyboard,c=l===void 0?!0:l,u=e.focusTriggerAfterClose,d=u===void 0?!0:u,f=e.wrapStyle,h=e.wrapClassName,p=e.wrapProps,g=e.onClose,m=e.afterOpenChange,v=e.afterClose,y=e.transitionName,b=e.animation,x=e.closable,_=x===void 0?!0:x,S=e.mask,M=S===void 0?!0:S,E=e.maskTransitionName,T=e.maskAnimation,P=e.maskClosable,A=P===void 0?!0:P,N=e.maskStyle,O=e.maskProps,I=e.rootClassName,D=e.classNames,k=e.styles,$=C.useRef(),B=C.useRef(),F=C.useRef(),G=C.useState(s),z=fe(G,2),U=z[0],H=z[1],X=wY();function V(){hG(B.current,document.activeElement)||($.current=document.activeElement)}function W(){if(!hG(B.current,document.activeElement)){var pe;(pe=F.current)===null||pe===void 0||pe.focus()}}function K(pe){if(pe)W();else{if(H(!1),M&&$.current&&d){try{$.current.focus({preventScroll:!0})}catch{}$.current=null}U&&(v==null||v())}m==null||m(pe)}function q(pe){g==null||g(pe)}var Q=C.useRef(!1),ie=C.useRef(),oe=function(){clearTimeout(ie.current),Q.current=!0},ue=function(){ie.current=setTimeout(function(){Q.current=!1})},le=null;A&&(le=function(ve){Q.current?Q.current=!1:B.current===ve.target&&q(ve)});function me(pe){if(c&&pe.keyCode===Xn.ESC){pe.stopPropagation(),q(pe);return}s&&pe.keyCode===Xn.TAB&&F.current.changeActive(!pe.shiftKey)}C.useEffect(function(){s&&(H(!0),V())},[s]),C.useEffect(function(){return function(){clearTimeout(ie.current)}},[]);var J=se(se(se({zIndex:a},f),k==null?void 0:k.wrapper),{},{display:U?null:"none"});return C.createElement("div",Mt({className:Be("".concat(i,"-root"),I)},Hu(e,{data:!0})),C.createElement(wqe,{prefixCls:i,visible:M&&s,motionName:nie(i,E,T),style:se(se({zIndex:a},N),k==null?void 0:k.mask),maskProps:O,className:D==null?void 0:D.mask}),C.createElement("div",Mt({tabIndex:-1,onKeyDown:me,className:Be("".concat(i,"-wrap"),h,D==null?void 0:D.wrapper),ref:B,onClick:le,style:J},p),C.createElement(v_e,Mt({},e,{onMouseDown:oe,onMouseUp:ue,ref:F,closable:_,ariaId:X,prefixCls:i,visible:s&&U,onClose:q,onVisibleChanged:K,motionName:nie(i,y,b)}))))},y_e=function(e){var r=e.visible,i=e.getContainer,a=e.forceRender,o=e.destroyOnClose,s=o===void 0?!1:o,l=e.afterClose,c=e.panelRef,u=C.useState(r),d=fe(u,2),f=d[0],h=d[1],p=C.useMemo(function(){return{panel:c}},[c]);return C.useEffect(function(){r&&h(!0)},[r]),!a&&s&&!f?null:C.createElement(g_e.Provider,{value:p},C.createElement(_Y,{open:r||a||f,autoDestroy:!1,getContainer:i,autoLock:r||f},C.createElement(Sqe,Mt({},e,{destroyOnClose:s,afterClose:function(){l==null||l(),h(!1)}}))))};y_e.displayName="Dialog";var M0="RC_FORM_INTERNAL_HOOKS",Pi=function(){Hs(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},fy=C.createContext({getFieldValue:Pi,getFieldsValue:Pi,getFieldError:Pi,getFieldWarning:Pi,getFieldsError:Pi,isFieldsTouched:Pi,isFieldTouched:Pi,isFieldValidating:Pi,isFieldsValidating:Pi,resetFields:Pi,setFields:Pi,setFieldValue:Pi,setFieldsValue:Pi,validateFields:Pi,submit:Pi,getInternalHooks:function(){return Pi(),{dispatch:Pi,initEntityValue:Pi,registerField:Pi,useSubscribe:Pi,setInitialValues:Pi,destroyForm:Pi,setCallbacks:Pi,registerWatch:Pi,getFields:Pi,setValidateMessages:Pi,setPreserve:Pi,getInitialValue:Pi}}}),GE=C.createContext(null);function jG(n){return n==null?[]:Array.isArray(n)?n:[n]}function Eqe(n){return n&&!!n._init}function HG(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var WG=HG();function Cqe(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}function Mqe(n,e,r){if(f4())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var a=new(n.bind.apply(n,i));return r&&Lx(a,r.prototype),a}function FN(n){var e=typeof Map=="function"?new Map:void 0;return FN=function(i){if(i===null||!Cqe(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(i))return e.get(i);e.set(i,a)}function a(){return Mqe(i,arguments,Op(this).constructor)}return a.prototype=Object.create(i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Lx(a,i)},FN(n)}var Tqe=/%[sdj%]/g,Aqe=function(){};function qG(n){if(!n||!n.length)return null;var e={};return n.forEach(function(r){var i=r.field;e[i]=e[i]||[],e[i].push(r)}),e}function Dc(n){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];var a=0,o=r.length;if(typeof n=="function")return n.apply(null,r);if(typeof n=="string"){var s=n.replace(Tqe,function(l){if(l==="%%")return"%";if(a>=o)return l;switch(l){case"%s":return String(r[a++]);case"%d":return Number(r[a++]);case"%j":try{return JSON.stringify(r[a++])}catch{return"[Circular]"}break;default:return l}});return s}return n}function Rqe(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function $o(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||Rqe(e)&&typeof n=="string"&&!n)}function Pqe(n,e,r){var i=[],a=0,o=n.length;function s(l){i.push.apply(i,ot(l||[])),a++,a===o&&r(i)}n.forEach(function(l){e(l,s)})}function iie(n,e,r){var i=0,a=n.length;function o(s){if(s&&s.length){r(s);return}var l=i;i=i+1,l<a?e(n[l],o):r([])}o([])}function Nqe(n){var e=[];return Object.keys(n).forEach(function(r){e.push.apply(e,ot(n[r]||[]))}),e}var aie=function(n){$n(r,n);var e=iv(r);function r(i,a){var o;return st(this,r),o=e.call(this,"Async Validation Error"),re(Cr(o),"errors",void 0),re(Cr(o),"fields",void 0),o.errors=i,o.fields=a,o}return lt(r)}(FN(Error));function Oqe(n,e,r,i,a){if(e.first){var o=new Promise(function(h,p){var g=function(y){return i(y),y.length?p(new aie(y,qG(y))):h(a)},m=Nqe(n);iie(m,r,g)});return o.catch(function(h){return h}),o}var s=e.firstFields===!0?Object.keys(n):e.firstFields||[],l=Object.keys(n),c=l.length,u=0,d=[],f=new Promise(function(h,p){var g=function(v){if(d.push.apply(d,v),u++,u===c)return i(d),d.length?p(new aie(d,qG(d))):h(a)};l.length||(i(d),h(a)),l.forEach(function(m){var v=n[m];s.indexOf(m)!==-1?iie(v,r,g):Pqe(v,r,g)})});return f.catch(function(h){return h}),f}function Iqe(n){return!!(n&&n.message!==void 0)}function Dqe(n,e){for(var r=n,i=0;i<e.length;i++){if(r==null)return r;r=r[e[i]]}return r}function oie(n,e){return function(r){var i;return n.fullFields?i=Dqe(e,n.fullFields):i=e[r.field||n.fullField],Iqe(r)?(r.field=r.field||n.fullField,r.fieldValue=i,r):{message:typeof r=="function"?r():r,fieldValue:i,field:r.field||n.fullField}}}function sie(n,e){if(e){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];vn(i)==="object"&&vn(n[r])==="object"?n[r]=se(se({},n[r]),i):n[r]=i}}return n}var S1="enum",Lqe=function(e,r,i,a,o){e[S1]=Array.isArray(e[S1])?e[S1]:[],e[S1].indexOf(r)===-1&&a.push(Dc(o.messages[S1],e.fullField,e[S1].join(", ")))},kqe=function(e,r,i,a,o){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(r)||a.push(Dc(o.messages.pattern.mismatch,e.fullField,r,e.pattern));else if(typeof e.pattern=="string"){var s=new RegExp(e.pattern);s.test(r)||a.push(Dc(o.messages.pattern.mismatch,e.fullField,r,e.pattern))}}},Fqe=function(e,r,i,a,o){var s=typeof e.len=="number",l=typeof e.min=="number",c=typeof e.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=r,f=null,h=typeof r=="number",p=typeof r=="string",g=Array.isArray(r);if(h?f="number":p?f="string":g&&(f="array"),!f)return!1;g&&(d=r.length),p&&(d=r.replace(u,"_").length),s?d!==e.len&&a.push(Dc(o.messages[f].len,e.fullField,e.len)):l&&!c&&d<e.min?a.push(Dc(o.messages[f].min,e.fullField,e.min)):c&&!l&&d>e.max?a.push(Dc(o.messages[f].max,e.fullField,e.max)):l&&c&&(d<e.min||d>e.max)&&a.push(Dc(o.messages[f].range,e.fullField,e.min,e.max))},b_e=function(e,r,i,a,o,s){e.required&&(!i.hasOwnProperty(e.field)||$o(r,s||e.type))&&a.push(Dc(o.messages.required,e.fullField))},C3;const $qe=function(){if(C3)return C3;var n="[a-fA-F\\d:]",e=function(M){return M&&M.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(n,")|(?<=").concat(n,")(?=\\s|$))"):""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",a=["(?:".concat(i,":){7}(?:").concat(i,"|:)"),"(?:".concat(i,":){6}(?:").concat(r,"|:").concat(i,"|:)"),"(?:".concat(i,":){5}(?::").concat(r,"|(?::").concat(i,"){1,2}|:)"),"(?:".concat(i,":){4}(?:(?::").concat(i,"){0,1}:").concat(r,"|(?::").concat(i,"){1,3}|:)"),"(?:".concat(i,":){3}(?:(?::").concat(i,"){0,2}:").concat(r,"|(?::").concat(i,"){1,4}|:)"),"(?:".concat(i,":){2}(?:(?::").concat(i,"){0,3}:").concat(r,"|(?::").concat(i,"){1,5}|:)"),"(?:".concat(i,":){1}(?:(?::").concat(i,"){0,4}:").concat(r,"|(?::").concat(i,"){1,6}|:)"),"(?::(?:(?::".concat(i,"){0,5}:").concat(r,"|(?::").concat(i,"){1,7}|:))")],o="(?:%[0-9a-zA-Z]{1,})?",s="(?:".concat(a.join("|"),")").concat(o),l=new RegExp("(?:^".concat(r,"$)|(?:^").concat(s,"$)")),c=new RegExp("^".concat(r,"$")),u=new RegExp("^".concat(s,"$")),d=function(M){return M&&M.exact?l:new RegExp("(?:".concat(e(M)).concat(r).concat(e(M),")|(?:").concat(e(M)).concat(s).concat(e(M),")"),"g")};d.v4=function(S){return S&&S.exact?c:new RegExp("".concat(e(S)).concat(r).concat(e(S)),"g")},d.v6=function(S){return S&&S.exact?u:new RegExp("".concat(e(S)).concat(s).concat(e(S)),"g")};var f="(?:(?:[a-z]+:)?//)",h="(?:\\S+(?::\\S*)?@)?",p=d.v4().source,g=d.v6().source,m="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",v="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",y="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",b="(?::\\d{2,5})?",x='(?:[/?#][^\\s"]*)?',_="(?:".concat(f,"|www\\.)").concat(h,"(?:localhost|").concat(p,"|").concat(g,"|").concat(m).concat(v).concat(y,")").concat(b).concat(x);return C3=new RegExp("(?:^".concat(_,"$)"),"i"),C3};var lie={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},JS={integer:function(e){return JS.number(e)&&parseInt(e,10)===e},float:function(e){return JS.number(e)&&!JS.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return vn(e)==="object"&&!JS.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(lie.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match($qe())},hex:function(e){return typeof e=="string"&&!!e.match(lie.hex)}},Bqe=function(e,r,i,a,o){if(e.required&&r===void 0){b_e(e,r,i,a,o);return}var s=["integer","float","array","regexp","object","method","email","number","date","url","hex"],l=e.type;s.indexOf(l)>-1?JS[l](r)||a.push(Dc(o.messages.types[l],e.fullField,e.type)):l&&vn(r)!==e.type&&a.push(Dc(o.messages.types[l],e.fullField,e.type))},zqe=function(e,r,i,a,o){(/^\s+$/.test(r)||r==="")&&a.push(Dc(o.messages.whitespace,e.fullField))};const Ur={required:b_e,whitespace:zqe,type:Bqe,range:Fqe,enum:Lqe,pattern:kqe};var Uqe=function(e,r,i,a,o){var s=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if($o(r)&&!e.required)return i();Ur.required(e,r,a,s,o)}i(s)},Vqe=function(e,r,i,a,o){var s=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if(r==null&&!e.required)return i();Ur.required(e,r,a,s,o,"array"),r!=null&&(Ur.type(e,r,a,s,o),Ur.range(e,r,a,s,o))}i(s)},Gqe=function(e,r,i,a,o){var s=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if($o(r)&&!e.required)return i();Ur.required(e,r,a,s,o),r!==void 0&&Ur.type(e,r,a,s,o)}i(s)},jqe=function(e,r,i,a,o){var s=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if($o(r,"date")&&!e.required)return i();if(Ur.required(e,r,a,s,o),!$o(r,"date")){var c;r instanceof Date?c=r:c=new Date(r),Ur.type(e,c,a,s,o),c&&Ur.range(e,c.getTime(),a,s,o)}}i(s)},Hqe="enum",Wqe=function(e,r,i,a,o){var s=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if($o(r)&&!e.required)return i();Ur.required(e,r,a,s,o),r!==void 0&&Ur[Hqe](e,r,a,s,o)}i(s)},qqe=function(e,r,i,a,o){var s=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if($o(r)&&!e.required)return i();Ur.required(e,r,a,s,o),r!==void 0&&(Ur.type(e,r,a,s,o),Ur.range(e,r,a,s,o))}i(s)},Yqe=function(e,r,i,a,o){var s=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if($o(r)&&!e.required)return i();Ur.required(e,r,a,s,o),r!==void 0&&(Ur.type(e,r,a,s,o),Ur.range(e,r,a,s,o))}i(s)},Xqe=function(e,r,i,a,o){var s=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if($o(r)&&!e.required)return i();Ur.required(e,r,a,s,o),r!==void 0&&Ur.type(e,r,a,s,o)}i(s)},Kqe=function(e,r,i,a,o){var s=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if(r===""&&(r=void 0),$o(r)&&!e.required)return i();Ur.required(e,r,a,s,o),r!==void 0&&(Ur.type(e,r,a,s,o),Ur.range(e,r,a,s,o))}i(s)},Zqe=function(e,r,i,a,o){var s=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if($o(r)&&!e.required)return i();Ur.required(e,r,a,s,o),r!==void 0&&Ur.type(e,r,a,s,o)}i(s)},Qqe=function(e,r,i,a,o){var s=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if($o(r,"string")&&!e.required)return i();Ur.required(e,r,a,s,o),$o(r,"string")||Ur.pattern(e,r,a,s,o)}i(s)},Jqe=function(e,r,i,a,o){var s=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if($o(r)&&!e.required)return i();Ur.required(e,r,a,s,o),$o(r)||Ur.type(e,r,a,s,o)}i(s)},eYe=function(e,r,i,a,o){var s=[],l=Array.isArray(r)?"array":vn(r);Ur.required(e,r,a,s,o,l),i(s)},tYe=function(e,r,i,a,o){var s=[],l=e.required||!e.required&&a.hasOwnProperty(e.field);if(l){if($o(r,"string")&&!e.required)return i();Ur.required(e,r,a,s,o,"string"),$o(r,"string")||(Ur.type(e,r,a,s,o),Ur.range(e,r,a,s,o),Ur.pattern(e,r,a,s,o),e.whitespace===!0&&Ur.whitespace(e,r,a,s,o))}i(s)},D5=function(e,r,i,a,o){var s=e.type,l=[],c=e.required||!e.required&&a.hasOwnProperty(e.field);if(c){if($o(r,s)&&!e.required)return i();Ur.required(e,r,a,l,o,s),$o(r,s)||Ur.type(e,r,a,l,o)}i(l)};const $2={string:tYe,method:Xqe,number:Kqe,boolean:Gqe,regexp:Jqe,integer:Yqe,float:qqe,array:Vqe,object:Zqe,enum:Wqe,pattern:Qqe,date:jqe,url:D5,hex:D5,email:D5,required:eYe,any:Uqe};var gM=function(){function n(e){st(this,n),re(this,"rules",null),re(this,"_messages",WG),this.define(e)}return lt(n,[{key:"define",value:function(r){var i=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(vn(r)!=="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(a){var o=r[a];i.rules[a]=Array.isArray(o)?o:[o]})}},{key:"messages",value:function(r){return r&&(this._messages=sie(HG(),r)),this._messages}},{key:"validate",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},s=r,l=a,c=o;if(typeof l=="function"&&(c=l,l={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,s),Promise.resolve(s);function u(g){var m=[],v={};function y(x){if(Array.isArray(x)){var _;m=(_=m).concat.apply(_,ot(x))}else m.push(x)}for(var b=0;b<g.length;b++)y(g[b]);m.length?(v=qG(m),c(m,v)):c(null,s)}if(l.messages){var d=this.messages();d===WG&&(d=HG()),sie(d,l.messages),l.messages=d}else l.messages=this.messages();var f={},h=l.keys||Object.keys(this.rules);h.forEach(function(g){var m=i.rules[g],v=s[g];m.forEach(function(y){var b=y;typeof b.transform=="function"&&(s===r&&(s=se({},s)),v=s[g]=b.transform(v),v!=null&&(b.type=b.type||(Array.isArray(v)?"array":vn(v)))),typeof b=="function"?b={validator:b}:b=se({},b),b.validator=i.getValidationMethod(b),b.validator&&(b.field=g,b.fullField=b.fullField||g,b.type=i.getType(b),f[g]=f[g]||[],f[g].push({rule:b,value:v,source:s,field:g}))})});var p={};return Oqe(f,l,function(g,m){var v=g.rule,y=(v.type==="object"||v.type==="array")&&(vn(v.fields)==="object"||vn(v.defaultField)==="object");y=y&&(v.required||!v.required&&g.value),v.field=g.field;function b(E,T){return se(se({},T),{},{fullField:"".concat(v.fullField,".").concat(E),fullFields:v.fullFields?[].concat(ot(v.fullFields),[E]):[E]})}function x(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],T=Array.isArray(E)?E:[E];!l.suppressWarning&&T.length&&n.warning("async-validator:",T),T.length&&v.message!==void 0&&(T=[].concat(v.message));var P=T.map(oie(v,s));if(l.first&&P.length)return p[v.field]=1,m(P);if(!y)m(P);else{if(v.required&&!g.value)return v.message!==void 0?P=[].concat(v.message).map(oie(v,s)):l.error&&(P=[l.error(v,Dc(l.messages.required,v.field))]),m(P);var A={};v.defaultField&&Object.keys(g.value).map(function(I){A[I]=v.defaultField}),A=se(se({},A),g.rule.fields);var N={};Object.keys(A).forEach(function(I){var D=A[I],k=Array.isArray(D)?D:[D];N[I]=k.map(b.bind(null,I))});var O=new n(N);O.messages(l.messages),g.rule.options&&(g.rule.options.messages=l.messages,g.rule.options.error=l.error),O.validate(g.value,g.rule.options||l,function(I){var D=[];P&&P.length&&D.push.apply(D,ot(P)),I&&I.length&&D.push.apply(D,ot(I)),m(D.length?D:null)})}}var _;if(v.asyncValidator)_=v.asyncValidator(v,g.value,x,g.source,l);else if(v.validator){try{_=v.validator(v,g.value,x,g.source,l)}catch(E){var S,M;(S=(M=console).error)===null||S===void 0||S.call(M,E),l.suppressValidatorError||setTimeout(function(){throw E},0),x(E.message)}_===!0?x():_===!1?x(typeof v.message=="function"?v.message(v.fullField||v.field):v.message||"".concat(v.fullField||v.field," fails")):_ instanceof Array?x(_):_ instanceof Error&&x(_.message)}_&&_.then&&_.then(function(){return x()},function(E){return x(E)})},function(g){u(g)},s)}},{key:"getType",value:function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!$2.hasOwnProperty(r.type))throw new Error(Dc("Unknown rule type %s",r.type));return r.type||"string"}},{key:"getValidationMethod",value:function(r){if(typeof r.validator=="function")return r.validator;var i=Object.keys(r),a=i.indexOf("message");return a!==-1&&i.splice(a,1),i.length===1&&i[0]==="required"?$2.required:$2[this.getType(r)]||void 0}}]),n}();re(gM,"register",function(e,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");$2[e]=r});re(gM,"warning",Aqe);re(gM,"messages",WG);re(gM,"validators",$2);var pc="'${name}' is not a valid ${type}",x_e={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:pc,method:pc,array:pc,object:pc,number:pc,date:pc,boolean:pc,integer:pc,float:pc,regexp:pc,email:pc,url:pc,hex:pc},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},cie=gM;function nYe(n,e){return n.replace(/\\?\$\{\w+\}/g,function(r){if(r.startsWith("\\"))return r.slice(1);var i=r.slice(2,-1);return e[i]})}var uie="CODE_LOGIC_ERROR";function YG(n,e,r,i,a){return XG.apply(this,arguments)}function XG(){return XG=bl(pi().mark(function n(e,r,i,a,o){var s,l,c,u,d,f,h,p,g;return pi().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return s=se({},i),delete s.ruleIndex,cie.warning=function(){},s.validator&&(l=s.validator,s.validator=function(){try{return l.apply(void 0,arguments)}catch(y){return console.error(y),Promise.reject(uie)}}),c=null,s&&s.type==="array"&&s.defaultField&&(c=s.defaultField,delete s.defaultField),u=new cie(re({},e,[s])),d=Fb(x_e,a.validateMessages),u.messages(d),f=[],v.prev=10,v.next=13,Promise.resolve(u.validate(re({},e,r),se({},a)));case 13:v.next=18;break;case 15:v.prev=15,v.t0=v.catch(10),v.t0.errors&&(f=v.t0.errors.map(function(y,b){var x=y.message,_=x===uie?d.default:x;return C.isValidElement(_)?C.cloneElement(_,{key:"error_".concat(b)}):_}));case 18:if(!(!f.length&&c)){v.next=23;break}return v.next=21,Promise.all(r.map(function(y,b){return YG("".concat(e,".").concat(b),y,c,a,o)}));case 21:return h=v.sent,v.abrupt("return",h.reduce(function(y,b){return[].concat(ot(y),ot(b))},[]));case 23:return p=se(se({},i),{},{name:e,enum:(i.enum||[]).join(", ")},o),g=f.map(function(y){return typeof y=="string"?nYe(y,p):y}),v.abrupt("return",g);case 26:case"end":return v.stop()}},n,null,[[10,15]])})),XG.apply(this,arguments)}function rYe(n,e,r,i,a,o){var s=n.join("."),l=r.map(function(d,f){var h=d.validator,p=se(se({},d),{},{ruleIndex:f});return h&&(p.validator=function(g,m,v){var y=!1,b=function(){for(var S=arguments.length,M=new Array(S),E=0;E<S;E++)M[E]=arguments[E];Promise.resolve().then(function(){Hs(!y,"Your validator function has already return a promise. `callback` will be ignored."),y||v.apply(void 0,M)})},x=h(g,m,b);y=x&&typeof x.then=="function"&&typeof x.catch=="function",Hs(y,"`callback` is deprecated. Please return a promise instead."),y&&x.then(function(){v()}).catch(function(_){v(_||" ")})}),p}).sort(function(d,f){var h=d.warningOnly,p=d.ruleIndex,g=f.warningOnly,m=f.ruleIndex;return!!h==!!g?p-m:h?1:-1}),c;if(a===!0)c=new Promise(function(){var d=bl(pi().mark(function f(h,p){var g,m,v;return pi().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:g=0;case 1:if(!(g<l.length)){b.next=12;break}return m=l[g],b.next=5,YG(s,e,m,i,o);case 5:if(v=b.sent,!v.length){b.next=9;break}return p([{errors:v,rule:m}]),b.abrupt("return");case 9:g+=1,b.next=1;break;case 12:h([]);case 13:case"end":return b.stop()}},f)}));return function(f,h){return d.apply(this,arguments)}}());else{var u=l.map(function(d){return YG(s,e,d,i,o).then(function(f){return{errors:f,rule:d}})});c=(a?aYe(u):iYe(u)).then(function(d){return Promise.reject(d)})}return c.catch(function(d){return d}),c}function iYe(n){return KG.apply(this,arguments)}function KG(){return KG=bl(pi().mark(function n(e){return pi().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",Promise.all(e).then(function(a){var o,s=(o=[]).concat.apply(o,ot(a));return s}));case 1:case"end":return i.stop()}},n)})),KG.apply(this,arguments)}function aYe(n){return ZG.apply(this,arguments)}function ZG(){return ZG=bl(pi().mark(function n(e){var r;return pi().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=0,a.abrupt("return",new Promise(function(o){e.forEach(function(s){s.then(function(l){l.errors.length&&o([l]),r+=1,r===e.length&&o([])})})}));case 2:case"end":return a.stop()}},n)})),ZG.apply(this,arguments)}function Ha(n){return jG(n)}function die(n,e){var r={};return e.forEach(function(i){var a=Lu(n,i);r=Eu(r,i,a)}),r}function sx(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return n&&n.some(function(i){return __e(e,i,r)})}function __e(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!n||!e||!r&&n.length!==e.length?!1:e.every(function(i,a){return n[a]===i})}function oYe(n,e){if(n===e)return!0;if(!n&&e||n&&!e||!n||!e||vn(n)!=="object"||vn(e)!=="object")return!1;var r=Object.keys(n),i=Object.keys(e),a=new Set([].concat(r,i));return ot(a).every(function(o){var s=n[o],l=e[o];return typeof s=="function"&&typeof l=="function"?!0:s===l})}function sYe(n){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&vn(e.target)==="object"&&n in e.target?e.target[n]:e}function fie(n,e,r){var i=n.length;if(e<0||e>=i||r<0||r>=i)return n;var a=n[e],o=e-r;return o>0?[].concat(ot(n.slice(0,r)),[a],ot(n.slice(r,e)),ot(n.slice(e+1,i))):o<0?[].concat(ot(n.slice(0,e)),ot(n.slice(e+1,r+1)),[a],ot(n.slice(r+1,i))):n}var lYe=["name"],du=[];function L5(n,e,r,i,a,o){return typeof n=="function"?n(e,r,"source"in o?{source:o.source}:{}):i!==a}var SY=function(n){$n(r,n);var e=iv(r);function r(i){var a;if(st(this,r),a=e.call(this,i),re(Cr(a),"state",{resetCount:0}),re(Cr(a),"cancelRegisterFunc",null),re(Cr(a),"mounted",!1),re(Cr(a),"touched",!1),re(Cr(a),"dirty",!1),re(Cr(a),"validatePromise",void 0),re(Cr(a),"prevValidating",void 0),re(Cr(a),"errors",du),re(Cr(a),"warnings",du),re(Cr(a),"cancelRegister",function(){var c=a.props,u=c.preserve,d=c.isListField,f=c.name;a.cancelRegisterFunc&&a.cancelRegisterFunc(d,u,Ha(f)),a.cancelRegisterFunc=null}),re(Cr(a),"getNamePath",function(){var c=a.props,u=c.name,d=c.fieldContext,f=d.prefixName,h=f===void 0?[]:f;return u!==void 0?[].concat(ot(h),ot(u)):[]}),re(Cr(a),"getRules",function(){var c=a.props,u=c.rules,d=u===void 0?[]:u,f=c.fieldContext;return d.map(function(h){return typeof h=="function"?h(f):h})}),re(Cr(a),"refresh",function(){a.mounted&&a.setState(function(c){var u=c.resetCount;return{resetCount:u+1}})}),re(Cr(a),"metaCache",null),re(Cr(a),"triggerMetaEvent",function(c){var u=a.props.onMetaChange;if(u){var d=se(se({},a.getMeta()),{},{destroy:c});gG(a.metaCache,d)||u(d),a.metaCache=d}else a.metaCache=null}),re(Cr(a),"onStoreChange",function(c,u,d){var f=a.props,h=f.shouldUpdate,p=f.dependencies,g=p===void 0?[]:p,m=f.onReset,v=d.store,y=a.getNamePath(),b=a.getValue(c),x=a.getValue(v),_=u&&sx(u,y);switch(d.type==="valueUpdate"&&d.source==="external"&&!gG(b,x)&&(a.touched=!0,a.dirty=!0,a.validatePromise=null,a.errors=du,a.warnings=du,a.triggerMetaEvent()),d.type){case"reset":if(!u||_){a.touched=!1,a.dirty=!1,a.validatePromise=void 0,a.errors=du,a.warnings=du,a.triggerMetaEvent(),m==null||m(),a.refresh();return}break;case"remove":{if(h&&L5(h,c,v,b,x,d)){a.reRender();return}break}case"setField":{var S=d.data;if(_){"touched"in S&&(a.touched=S.touched),"validating"in S&&!("originRCField"in S)&&(a.validatePromise=S.validating?Promise.resolve([]):null),"errors"in S&&(a.errors=S.errors||du),"warnings"in S&&(a.warnings=S.warnings||du),a.dirty=!0,a.triggerMetaEvent(),a.reRender();return}else if("value"in S&&sx(u,y,!0)){a.reRender();return}if(h&&!y.length&&L5(h,c,v,b,x,d)){a.reRender();return}break}case"dependenciesUpdate":{var M=g.map(Ha);if(M.some(function(E){return sx(d.relatedFields,E)})){a.reRender();return}break}default:if(_||(!g.length||y.length||h)&&L5(h,c,v,b,x,d)){a.reRender();return}break}h===!0&&a.reRender()}),re(Cr(a),"validateRules",function(c){var u=a.getNamePath(),d=a.getValue(),f=c||{},h=f.triggerName,p=f.validateOnly,g=p===void 0?!1:p,m=Promise.resolve().then(bl(pi().mark(function v(){var y,b,x,_,S,M,E;return pi().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(a.mounted){P.next=2;break}return P.abrupt("return",[]);case 2:if(y=a.props,b=y.validateFirst,x=b===void 0?!1:b,_=y.messageVariables,S=y.validateDebounce,M=a.getRules(),h&&(M=M.filter(function(A){return A}).filter(function(A){var N=A.validateTrigger;if(!N)return!0;var O=jG(N);return O.includes(h)})),!(S&&h)){P.next=10;break}return P.next=8,new Promise(function(A){setTimeout(A,S)});case 8:if(a.validatePromise===m){P.next=10;break}return P.abrupt("return",[]);case 10:return E=rYe(u,d,M,c,x,_),E.catch(function(A){return A}).then(function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:du;if(a.validatePromise===m){var N;a.validatePromise=null;var O=[],I=[];(N=A.forEach)===null||N===void 0||N.call(A,function(D){var k=D.rule.warningOnly,$=D.errors,B=$===void 0?du:$;k?I.push.apply(I,ot(B)):O.push.apply(O,ot(B))}),a.errors=O,a.warnings=I,a.triggerMetaEvent(),a.reRender()}}),P.abrupt("return",E);case 13:case"end":return P.stop()}},v)})));return g||(a.validatePromise=m,a.dirty=!0,a.errors=du,a.warnings=du,a.triggerMetaEvent(),a.reRender()),m}),re(Cr(a),"isFieldValidating",function(){return!!a.validatePromise}),re(Cr(a),"isFieldTouched",function(){return a.touched}),re(Cr(a),"isFieldDirty",function(){if(a.dirty||a.props.initialValue!==void 0)return!0;var c=a.props.fieldContext,u=c.getInternalHooks(M0),d=u.getInitialValue;return d(a.getNamePath())!==void 0}),re(Cr(a),"getErrors",function(){return a.errors}),re(Cr(a),"getWarnings",function(){return a.warnings}),re(Cr(a),"isListField",function(){return a.props.isListField}),re(Cr(a),"isList",function(){return a.props.isList}),re(Cr(a),"isPreserve",function(){return a.props.preserve}),re(Cr(a),"getMeta",function(){a.prevValidating=a.isFieldValidating();var c={touched:a.isFieldTouched(),validating:a.prevValidating,errors:a.errors,warnings:a.warnings,name:a.getNamePath(),validated:a.validatePromise===null};return c}),re(Cr(a),"getOnlyChild",function(c){if(typeof c=="function"){var u=a.getMeta();return se(se({},a.getOnlyChild(c(a.getControlled(),u,a.props.fieldContext))),{},{isFunction:!0})}var d=Bm(c);return d.length!==1||!C.isValidElement(d[0])?{child:d,isFunction:!1}:{child:d[0],isFunction:!1}}),re(Cr(a),"getValue",function(c){var u=a.props.fieldContext.getFieldsValue,d=a.getNamePath();return Lu(c||u(!0),d)}),re(Cr(a),"getControlled",function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=a.props,d=u.name,f=u.trigger,h=u.validateTrigger,p=u.getValueFromEvent,g=u.normalize,m=u.valuePropName,v=u.getValueProps,y=u.fieldContext,b=h!==void 0?h:y.validateTrigger,x=a.getNamePath(),_=y.getInternalHooks,S=y.getFieldsValue,M=_(M0),E=M.dispatch,T=a.getValue(),P=v||function(D){return re({},m,D)},A=c[f],N=d!==void 0?P(T):{},O=se(se({},c),N);O[f]=function(){a.touched=!0,a.dirty=!0,a.triggerMetaEvent();for(var D,k=arguments.length,$=new Array(k),B=0;B<k;B++)$[B]=arguments[B];p?D=p.apply(void 0,$):D=sYe.apply(void 0,[m].concat($)),g&&(D=g(D,T,S(!0))),D!==T&&E({type:"updateValue",namePath:x,value:D}),A&&A.apply(void 0,$)};var I=jG(b||[]);return I.forEach(function(D){var k=O[D];O[D]=function(){k&&k.apply(void 0,arguments);var $=a.props.rules;$&&$.length&&E({type:"validateField",namePath:x,triggerName:D})}}),O}),i.fieldContext){var o=i.fieldContext.getInternalHooks,s=o(M0),l=s.initEntityValue;l(Cr(a))}return a}return lt(r,[{key:"componentDidMount",value:function(){var a=this.props,o=a.shouldUpdate,s=a.fieldContext;if(this.mounted=!0,s){var l=s.getInternalHooks,c=l(M0),u=c.registerField;this.cancelRegisterFunc=u(this)}o===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var a=this.state.resetCount,o=this.props.children,s=this.getOnlyChild(o),l=s.child,c=s.isFunction,u;return c?u=l:C.isValidElement(l)?u=C.cloneElement(l,this.getControlled(l.props)):(Hs(!l,"`children` of Field is not validate ReactElement."),u=l),C.createElement(C.Fragment,{key:a},u)}}]),r}(C.Component);re(SY,"contextType",fy);re(SY,"defaultProps",{trigger:"onChange",valuePropName:"value"});function EY(n){var e,r=n.name,i=ir(n,lYe),a=C.useContext(fy),o=C.useContext(GE),s=r!==void 0?Ha(r):void 0,l=(e=i.isListField)!==null&&e!==void 0?e:!!o,c="keep";return l||(c="_".concat((s||[]).join("_"))),C.createElement(SY,Mt({key:c,name:s,isListField:l},i,{fieldContext:a}))}function w_e(n){var e=n.name,r=n.initialValue,i=n.children,a=n.rules,o=n.validateTrigger,s=n.isListField,l=C.useContext(fy),c=C.useContext(GE),u=C.useRef({keys:[],id:0}),d=u.current,f=C.useMemo(function(){var m=Ha(l.prefixName)||[];return[].concat(ot(m),ot(Ha(e)))},[l.prefixName,e]),h=C.useMemo(function(){return se(se({},l),{},{prefixName:f})},[l,f]),p=C.useMemo(function(){return{getKey:function(v){var y=f.length,b=v[y];return[d.keys[b],v.slice(y+1)]}}},[f]);if(typeof i!="function")return Hs(!1,"Form.List only accepts function as children."),null;var g=function(v,y,b){var x=b.source;return x==="internal"?!1:v!==y};return C.createElement(GE.Provider,{value:p},C.createElement(fy.Provider,{value:h},C.createElement(EY,{name:[],shouldUpdate:g,rules:a,validateTrigger:o,initialValue:r,isList:!0,isListField:s??!!c},function(m,v){var y=m.value,b=y===void 0?[]:y,x=m.onChange,_=l.getFieldValue,S=function(){var P=_(f||[]);return P||[]},M={add:function(P,A){var N=S();A>=0&&A<=N.length?(d.keys=[].concat(ot(d.keys.slice(0,A)),[d.id],ot(d.keys.slice(A))),x([].concat(ot(N.slice(0,A)),[P],ot(N.slice(A))))):(d.keys=[].concat(ot(d.keys),[d.id]),x([].concat(ot(N),[P]))),d.id+=1},remove:function(P){var A=S(),N=new Set(Array.isArray(P)?P:[P]);N.size<=0||(d.keys=d.keys.filter(function(O,I){return!N.has(I)}),x(A.filter(function(O,I){return!N.has(I)})))},move:function(P,A){if(P!==A){var N=S();P<0||P>=N.length||A<0||A>=N.length||(d.keys=fie(d.keys,P,A),x(fie(N,P,A)))}}},E=b||[];return Array.isArray(E)||(E=[]),i(E.map(function(T,P){var A=d.keys[P];return A===void 0&&(d.keys[P]=d.id,A=d.keys[P],d.id+=1),{name:P,key:A,isListField:!0}}),M,v)})))}function cYe(n){var e=!1,r=n.length,i=[];return n.length?new Promise(function(a,o){n.forEach(function(s,l){s.catch(function(c){return e=!0,c}).then(function(c){r-=1,i[l]=c,!(r>0)&&(e&&o(i),a(i))})})}):Promise.resolve([])}var S_e="__@field_split__";function k5(n){return n.map(function(e){return"".concat(vn(e),":").concat(e)}).join(S_e)}var E1=function(){function n(){st(this,n),re(this,"kvs",new Map)}return lt(n,[{key:"set",value:function(r,i){this.kvs.set(k5(r),i)}},{key:"get",value:function(r){return this.kvs.get(k5(r))}},{key:"update",value:function(r,i){var a=this.get(r),o=i(a);o?this.set(r,o):this.delete(r)}},{key:"delete",value:function(r){this.kvs.delete(k5(r))}},{key:"map",value:function(r){return ot(this.kvs.entries()).map(function(i){var a=fe(i,2),o=a[0],s=a[1],l=o.split(S_e);return r({key:l.map(function(c){var u=c.match(/^([^:]*):(.*)$/),d=fe(u,3),f=d[1],h=d[2];return f==="number"?Number(h):h}),value:s})})}},{key:"toJSON",value:function(){var r={};return this.map(function(i){var a=i.key,o=i.value;return r[a.join(".")]=o,null}),r}}]),n}(),uYe=["name"],dYe=lt(function n(e){var r=this;st(this,n),re(this,"formHooked",!1),re(this,"forceRootUpdate",void 0),re(this,"subscribable",!0),re(this,"store",{}),re(this,"fieldEntities",[]),re(this,"initialValues",{}),re(this,"callbacks",{}),re(this,"validateMessages",null),re(this,"preserve",null),re(this,"lastValidatePromise",null),re(this,"getForm",function(){return{getFieldValue:r.getFieldValue,getFieldsValue:r.getFieldsValue,getFieldError:r.getFieldError,getFieldWarning:r.getFieldWarning,getFieldsError:r.getFieldsError,isFieldsTouched:r.isFieldsTouched,isFieldTouched:r.isFieldTouched,isFieldValidating:r.isFieldValidating,isFieldsValidating:r.isFieldsValidating,resetFields:r.resetFields,setFields:r.setFields,setFieldValue:r.setFieldValue,setFieldsValue:r.setFieldsValue,validateFields:r.validateFields,submit:r.submit,_init:!0,getInternalHooks:r.getInternalHooks}}),re(this,"getInternalHooks",function(i){return i===M0?(r.formHooked=!0,{dispatch:r.dispatch,initEntityValue:r.initEntityValue,registerField:r.registerField,useSubscribe:r.useSubscribe,setInitialValues:r.setInitialValues,destroyForm:r.destroyForm,setCallbacks:r.setCallbacks,setValidateMessages:r.setValidateMessages,getFields:r.getFields,setPreserve:r.setPreserve,getInitialValue:r.getInitialValue,registerWatch:r.registerWatch}):(Hs(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),re(this,"useSubscribe",function(i){r.subscribable=i}),re(this,"prevWithoutPreserves",null),re(this,"setInitialValues",function(i,a){if(r.initialValues=i||{},a){var o,s=Fb(i,r.store);(o=r.prevWithoutPreserves)===null||o===void 0||o.map(function(l){var c=l.key;s=Eu(s,c,Lu(i,c))}),r.prevWithoutPreserves=null,r.updateStore(s)}}),re(this,"destroyForm",function(i){if(i)r.updateStore({});else{var a=new E1;r.getFieldEntities(!0).forEach(function(o){r.isMergedPreserve(o.isPreserve())||a.set(o.getNamePath(),!0)}),r.prevWithoutPreserves=a}}),re(this,"getInitialValue",function(i){var a=Lu(r.initialValues,i);return i.length?Fb(a):a}),re(this,"setCallbacks",function(i){r.callbacks=i}),re(this,"setValidateMessages",function(i){r.validateMessages=i}),re(this,"setPreserve",function(i){r.preserve=i}),re(this,"watchList",[]),re(this,"registerWatch",function(i){return r.watchList.push(i),function(){r.watchList=r.watchList.filter(function(a){return a!==i})}}),re(this,"notifyWatch",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(r.watchList.length){var a=r.getFieldsValue(),o=r.getFieldsValue(!0);r.watchList.forEach(function(s){s(a,o,i)})}}),re(this,"timeoutId",null),re(this,"warningUnhooked",function(){}),re(this,"updateStore",function(i){r.store=i}),re(this,"getFieldEntities",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return i?r.fieldEntities.filter(function(a){return a.getNamePath().length}):r.fieldEntities}),re(this,"getFieldsMap",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,a=new E1;return r.getFieldEntities(i).forEach(function(o){var s=o.getNamePath();a.set(s,o)}),a}),re(this,"getFieldEntitiesForNamePathList",function(i){if(!i)return r.getFieldEntities(!0);var a=r.getFieldsMap(!0);return i.map(function(o){var s=Ha(o);return a.get(s)||{INVALIDATE_NAME_PATH:Ha(o)}})}),re(this,"getFieldsValue",function(i,a){r.warningUnhooked();var o,s,l;if(i===!0||Array.isArray(i)?(o=i,s=a):i&&vn(i)==="object"&&(l=i.strict,s=i.filter),o===!0&&!s)return r.store;var c=r.getFieldEntitiesForNamePathList(Array.isArray(o)?o:null),u=[];return c.forEach(function(d){var f,h,p="INVALIDATE_NAME_PATH"in d?d.INVALIDATE_NAME_PATH:d.getNamePath();if(l){var g,m;if((g=(m=d).isList)!==null&&g!==void 0&&g.call(m))return}else if(!o&&(f=(h=d).isListField)!==null&&f!==void 0&&f.call(h))return;if(!s)u.push(p);else{var v="getMeta"in d?d.getMeta():null;s(v)&&u.push(p)}}),die(r.store,u.map(Ha))}),re(this,"getFieldValue",function(i){r.warningUnhooked();var a=Ha(i);return Lu(r.store,a)}),re(this,"getFieldsError",function(i){r.warningUnhooked();var a=r.getFieldEntitiesForNamePathList(i);return a.map(function(o,s){return o&&!("INVALIDATE_NAME_PATH"in o)?{name:o.getNamePath(),errors:o.getErrors(),warnings:o.getWarnings()}:{name:Ha(i[s]),errors:[],warnings:[]}})}),re(this,"getFieldError",function(i){r.warningUnhooked();var a=Ha(i),o=r.getFieldsError([a])[0];return o.errors}),re(this,"getFieldWarning",function(i){r.warningUnhooked();var a=Ha(i),o=r.getFieldsError([a])[0];return o.warnings}),re(this,"isFieldsTouched",function(){r.warningUnhooked();for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=a[0],l=a[1],c,u=!1;a.length===0?c=null:a.length===1?Array.isArray(s)?(c=s.map(Ha),u=!1):(c=null,u=s):(c=s.map(Ha),u=l);var d=r.getFieldEntities(!0),f=function(v){return v.isFieldTouched()};if(!c)return u?d.every(function(m){return f(m)||m.isList()}):d.some(f);var h=new E1;c.forEach(function(m){h.set(m,[])}),d.forEach(function(m){var v=m.getNamePath();c.forEach(function(y){y.every(function(b,x){return v[x]===b})&&h.update(y,function(b){return[].concat(ot(b),[m])})})});var p=function(v){return v.some(f)},g=h.map(function(m){var v=m.value;return v});return u?g.every(p):g.some(p)}),re(this,"isFieldTouched",function(i){return r.warningUnhooked(),r.isFieldsTouched([i])}),re(this,"isFieldsValidating",function(i){r.warningUnhooked();var a=r.getFieldEntities();if(!i)return a.some(function(s){return s.isFieldValidating()});var o=i.map(Ha);return a.some(function(s){var l=s.getNamePath();return sx(o,l)&&s.isFieldValidating()})}),re(this,"isFieldValidating",function(i){return r.warningUnhooked(),r.isFieldsValidating([i])}),re(this,"resetWithFieldInitialValue",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=new E1,o=r.getFieldEntities(!0);o.forEach(function(c){var u=c.props.initialValue,d=c.getNamePath();if(u!==void 0){var f=a.get(d)||new Set;f.add({entity:c,value:u}),a.set(d,f)}});var s=function(u){u.forEach(function(d){var f=d.props.initialValue;if(f!==void 0){var h=d.getNamePath(),p=r.getInitialValue(h);if(p!==void 0)Hs(!1,"Form already set 'initialValues' with path '".concat(h.join("."),"'. Field can not overwrite it."));else{var g=a.get(h);if(g&&g.size>1)Hs(!1,"Multiple Field with path '".concat(h.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(g){var m=r.getFieldValue(h),v=d.isListField();!v&&(!i.skipExist||m===void 0)&&r.updateStore(Eu(r.store,h,ot(g)[0].value))}}}})},l;i.entities?l=i.entities:i.namePathList?(l=[],i.namePathList.forEach(function(c){var u=a.get(c);if(u){var d;(d=l).push.apply(d,ot(ot(u).map(function(f){return f.entity})))}})):l=o,s(l)}),re(this,"resetFields",function(i){r.warningUnhooked();var a=r.store;if(!i){r.updateStore(Fb(r.initialValues)),r.resetWithFieldInitialValue(),r.notifyObservers(a,null,{type:"reset"}),r.notifyWatch();return}var o=i.map(Ha);o.forEach(function(s){var l=r.getInitialValue(s);r.updateStore(Eu(r.store,s,l))}),r.resetWithFieldInitialValue({namePathList:o}),r.notifyObservers(a,o,{type:"reset"}),r.notifyWatch(o)}),re(this,"setFields",function(i){r.warningUnhooked();var a=r.store,o=[];i.forEach(function(s){var l=s.name,c=ir(s,uYe),u=Ha(l);o.push(u),"value"in c&&r.updateStore(Eu(r.store,u,c.value)),r.notifyObservers(a,[u],{type:"setField",data:s})}),r.notifyWatch(o)}),re(this,"getFields",function(){var i=r.getFieldEntities(!0),a=i.map(function(o){var s=o.getNamePath(),l=o.getMeta(),c=se(se({},l),{},{name:s,value:r.getFieldValue(s)});return Object.defineProperty(c,"originRCField",{value:!0}),c});return a}),re(this,"initEntityValue",function(i){var a=i.props.initialValue;if(a!==void 0){var o=i.getNamePath(),s=Lu(r.store,o);s===void 0&&r.updateStore(Eu(r.store,o,a))}}),re(this,"isMergedPreserve",function(i){var a=i!==void 0?i:r.preserve;return a??!0}),re(this,"registerField",function(i){r.fieldEntities.push(i);var a=i.getNamePath();if(r.notifyWatch([a]),i.props.initialValue!==void 0){var o=r.store;r.resetWithFieldInitialValue({entities:[i],skipExist:!0}),r.notifyObservers(o,[i.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(s,l){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(r.fieldEntities=r.fieldEntities.filter(function(f){return f!==i}),!r.isMergedPreserve(l)&&(!s||c.length>1)){var u=s?void 0:r.getInitialValue(a);if(a.length&&r.getFieldValue(a)!==u&&r.fieldEntities.every(function(f){return!__e(f.getNamePath(),a)})){var d=r.store;r.updateStore(Eu(d,a,u,!0)),r.notifyObservers(d,[a],{type:"remove"}),r.triggerDependenciesUpdate(d,a)}}r.notifyWatch([a])}}),re(this,"dispatch",function(i){switch(i.type){case"updateValue":{var a=i.namePath,o=i.value;r.updateValue(a,o);break}case"validateField":{var s=i.namePath,l=i.triggerName;r.validateFields([s],{triggerName:l});break}}}),re(this,"notifyObservers",function(i,a,o){if(r.subscribable){var s=se(se({},o),{},{store:r.getFieldsValue(!0)});r.getFieldEntities().forEach(function(l){var c=l.onStoreChange;c(i,a,s)})}else r.forceRootUpdate()}),re(this,"triggerDependenciesUpdate",function(i,a){var o=r.getDependencyChildrenFields(a);return o.length&&r.validateFields(o),r.notifyObservers(i,o,{type:"dependenciesUpdate",relatedFields:[a].concat(ot(o))}),o}),re(this,"updateValue",function(i,a){var o=Ha(i),s=r.store;r.updateStore(Eu(r.store,o,a)),r.notifyObservers(s,[o],{type:"valueUpdate",source:"internal"}),r.notifyWatch([o]);var l=r.triggerDependenciesUpdate(s,o),c=r.callbacks.onValuesChange;if(c){var u=die(r.store,[o]);c(u,r.getFieldsValue())}r.triggerOnFieldsChange([o].concat(ot(l)))}),re(this,"setFieldsValue",function(i){r.warningUnhooked();var a=r.store;if(i){var o=Fb(r.store,i);r.updateStore(o)}r.notifyObservers(a,null,{type:"valueUpdate",source:"external"}),r.notifyWatch()}),re(this,"setFieldValue",function(i,a){r.setFields([{name:i,value:a,errors:[],warnings:[]}])}),re(this,"getDependencyChildrenFields",function(i){var a=new Set,o=[],s=new E1;r.getFieldEntities().forEach(function(c){var u=c.props.dependencies;(u||[]).forEach(function(d){var f=Ha(d);s.update(f,function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return h.add(c),h})})});var l=function c(u){var d=s.get(u)||new Set;d.forEach(function(f){if(!a.has(f)){a.add(f);var h=f.getNamePath();f.isFieldDirty()&&h.length&&(o.push(h),c(h))}})};return l(i),o}),re(this,"triggerOnFieldsChange",function(i,a){var o=r.callbacks.onFieldsChange;if(o){var s=r.getFields();if(a){var l=new E1;a.forEach(function(u){var d=u.name,f=u.errors;l.set(d,f)}),s.forEach(function(u){u.errors=l.get(u.name)||u.errors})}var c=s.filter(function(u){var d=u.name;return sx(i,d)});c.length&&o(c,s)}}),re(this,"validateFields",function(i,a){r.warningUnhooked();var o,s;Array.isArray(i)||typeof i=="string"||typeof a=="string"?(o=i,s=a):s=i;var l=!!o,c=l?o.map(Ha):[],u=[],d=String(Date.now()),f=new Set,h=s||{},p=h.recursive,g=h.dirty;r.getFieldEntities(!0).forEach(function(b){if(l||c.push(b.getNamePath()),!(!b.props.rules||!b.props.rules.length)&&!(g&&!b.isFieldDirty())){var x=b.getNamePath();if(f.add(x.join(d)),!l||sx(c,x,p)){var _=b.validateRules(se({validateMessages:se(se({},x_e),r.validateMessages)},s));u.push(_.then(function(){return{name:x,errors:[],warnings:[]}}).catch(function(S){var M,E=[],T=[];return(M=S.forEach)===null||M===void 0||M.call(S,function(P){var A=P.rule.warningOnly,N=P.errors;A?T.push.apply(T,ot(N)):E.push.apply(E,ot(N))}),E.length?Promise.reject({name:x,errors:E,warnings:T}):{name:x,errors:E,warnings:T}}))}}});var m=cYe(u);r.lastValidatePromise=m,m.catch(function(b){return b}).then(function(b){var x=b.map(function(_){var S=_.name;return S});r.notifyObservers(r.store,x,{type:"validateFinish"}),r.triggerOnFieldsChange(x,b)});var v=m.then(function(){return r.lastValidatePromise===m?Promise.resolve(r.getFieldsValue(c)):Promise.reject([])}).catch(function(b){var x=b.filter(function(_){return _&&_.errors.length});return Promise.reject({values:r.getFieldsValue(c),errorFields:x,outOfDate:r.lastValidatePromise!==m})});v.catch(function(b){return b});var y=c.filter(function(b){return f.has(b.join(d))});return r.triggerOnFieldsChange(y),v}),re(this,"submit",function(){r.warningUnhooked(),r.validateFields().then(function(i){var a=r.callbacks.onFinish;if(a)try{a(i)}catch(o){console.error(o)}}).catch(function(i){var a=r.callbacks.onFinishFailed;a&&a(i)})}),this.forceRootUpdate=e});function CY(n){var e=C.useRef(),r=C.useState({}),i=fe(r,2),a=i[1];if(!e.current)if(n)e.current=n;else{var o=function(){a({})},s=new dYe(o);e.current=s.getForm()}return[e.current]}var QG=C.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),E_e=function(e){var r=e.validateMessages,i=e.onFormChange,a=e.onFormFinish,o=e.children,s=C.useContext(QG),l=C.useRef({});return C.createElement(QG.Provider,{value:se(se({},s),{},{validateMessages:se(se({},s.validateMessages),r),triggerFormChange:function(u,d){i&&i(u,{changedFields:d,forms:l.current}),s.triggerFormChange(u,d)},triggerFormFinish:function(u,d){a&&a(u,{values:d,forms:l.current}),s.triggerFormFinish(u,d)},registerForm:function(u,d){u&&(l.current=se(se({},l.current),{},re({},u,d))),s.registerForm(u,d)},unregisterForm:function(u){var d=se({},l.current);delete d[u],l.current=d,s.unregisterForm(u)}})},o)},fYe=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],hYe=function(e,r){var i=e.name,a=e.initialValues,o=e.fields,s=e.form,l=e.preserve,c=e.children,u=e.component,d=u===void 0?"form":u,f=e.validateMessages,h=e.validateTrigger,p=h===void 0?"onChange":h,g=e.onValuesChange,m=e.onFieldsChange,v=e.onFinish,y=e.onFinishFailed,b=e.clearOnDestroy,x=ir(e,fYe),_=C.useRef(null),S=C.useContext(QG),M=CY(s),E=fe(M,1),T=E[0],P=T.getInternalHooks(M0),A=P.useSubscribe,N=P.setInitialValues,O=P.setCallbacks,I=P.setValidateMessages,D=P.setPreserve,k=P.destroyForm;C.useImperativeHandle(r,function(){return se(se({},T),{},{nativeElement:_.current})}),C.useEffect(function(){return S.registerForm(i,T),function(){S.unregisterForm(i)}},[S,T,i]),I(se(se({},S.validateMessages),f)),O({onValuesChange:g,onFieldsChange:function(V){if(S.triggerFormChange(i,V),m){for(var W=arguments.length,K=new Array(W>1?W-1:0),q=1;q<W;q++)K[q-1]=arguments[q];m.apply(void 0,[V].concat(K))}},onFinish:function(V){S.triggerFormFinish(i,V),v&&v(V)},onFinishFailed:y}),D(l);var $=C.useRef(null);N(a,!$.current),$.current||($.current=!0),C.useEffect(function(){return function(){return k(b)}},[]);var B,F=typeof c=="function";if(F){var G=T.getFieldsValue(!0);B=c(G,T)}else B=c;A(!F);var z=C.useRef();C.useEffect(function(){oYe(z.current||[],o||[])||T.setFields(o||[]),z.current=o},[o,T]);var U=C.useMemo(function(){return se(se({},T),{},{validateTrigger:p})},[T,p]),H=C.createElement(GE.Provider,{value:null},C.createElement(fy.Provider,{value:U},B));return d===!1?H:C.createElement(d,Mt({},x,{ref:_,onSubmit:function(V){V.preventDefault(),V.stopPropagation(),T.submit()},onReset:function(V){var W;V.preventDefault(),T.resetFields(),(W=x.onReset)===null||W===void 0||W.call(x,V)}}),H)};function hie(n){try{return JSON.stringify(n)}catch{return Math.random()}}function C_e(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=e[0],a=e[1],o=a===void 0?{}:a,s=Eqe(o)?{form:o}:o,l=s.form,c=C.useState(),u=fe(c,2),d=u[0],f=u[1],h=C.useMemo(function(){return hie(d)},[d]),p=C.useRef(h);p.current=h;var g=C.useContext(fy),m=l||g,v=m&&m._init,y=Ha(i),b=C.useRef(y);return b.current=y,C.useEffect(function(){if(v){var x=m.getFieldsValue,_=m.getInternalHooks,S=_(M0),M=S.registerWatch,E=function(N,O){var I=s.preserve?O:N;return typeof i=="function"?i(I):Lu(I,b.current)},T=M(function(A,N){var O=E(A,N),I=hie(O);p.current!==I&&(p.current=I,f(O))}),P=E(x(),x(!0));return d!==P&&f(P),T}},[v]),d}var pYe=C.forwardRef(hYe),F_=pYe;F_.FormProvider=E_e;F_.Field=EY;F_.List=w_e;F_.useForm=CY;F_.useWatch=C_e;const Ip=C.createContext({labelAlign:"right",vertical:!1,itemRef:()=>{}}),M_e=C.createContext(null),T_e=n=>{const e=Qu(n,["prefixCls"]);return C.createElement(E_e,Object.assign({},e))},MY=C.createContext({prefixCls:""}),Xs=C.createContext({}),gYe=n=>{let{children:e,status:r,override:i}=n;const a=C.useContext(Xs),o=C.useMemo(()=>{const s=Object.assign({},a);return i&&delete s.isFormItemInput,r&&(delete s.status,delete s.hasFeedback,delete s.feedbackIcon),s},[r,i,a]);return C.createElement(Xs.Provider,{value:o},e)},A_e=C.createContext(void 0),Gm=n=>{const{space:e,form:r,children:i}=n;if(i==null)return null;let a=i;return r&&(a=Je.createElement(gYe,{override:!0,status:!0},a)),e&&(a=Je.createElement(UHe,null,a)),a};function pie(n){if(n)return{closable:n.closable,closeIcon:n.closeIcon}}function gie(n){const{closable:e,closeIcon:r}=n||{};return Je.useMemo(()=>{if(!e&&(e===!1||r===!1||r===null))return!1;if(e===void 0&&r===void 0)return null;let i={closeIcon:typeof r!="boolean"&&r!==null?r:void 0};return e&&typeof e=="object"&&(i=Object.assign(Object.assign({},i),e)),i},[e,r])}function mie(){const n={};for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r.forEach(a=>{a&&Object.keys(a).forEach(o=>{a[o]!==void 0&&(n[o]=a[o])})}),n}const mYe={};function vYe(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mYe;const i=gie(n),a=gie(e),o=typeof i!="boolean"?!!(i!=null&&i.disabled):!1,s=Je.useMemo(()=>Object.assign({closeIcon:Je.createElement(k_,null)},r),[r]),l=Je.useMemo(()=>i===!1?!1:i?mie(s,a,i):a===!1?!1:a?mie(s,a):s.closable?s:!1,[i,a,s]);return Je.useMemo(()=>{if(l===!1)return[!1,null,o];const{closeIconRender:c}=s,{closeIcon:u}=l;let d=u;if(d!=null){c&&(d=c(u));const f=Hu(l,!0);Object.keys(f).length&&(d=Je.isValidElement(d)?Je.cloneElement(d,f):Je.createElement("span",Object.assign({},f),d))}return[!0,d,o]},[l,s])}const yYe=()=>yl()&&window.document.documentElement,O4=n=>{const{prefixCls:e,className:r,style:i,size:a,shape:o}=n,s=Be({[`${e}-lg`]:a==="large",[`${e}-sm`]:a==="small"}),l=Be({[`${e}-circle`]:o==="circle",[`${e}-square`]:o==="square",[`${e}-round`]:o==="round"}),c=C.useMemo(()=>typeof a=="number"?{width:a,height:a,lineHeight:`${a}px`}:{},[a]);return C.createElement("span",{className:Be(e,s,l,r),style:Object.assign(Object.assign({},c),i)})},bYe=new qr("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),I4=n=>({height:n,lineHeight:Qe(n)}),lx=n=>Object.assign({width:n},I4(n)),xYe=n=>({background:n.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:bYe,animationDuration:n.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),F5=(n,e)=>Object.assign({width:e(n).mul(5).equal(),minWidth:e(n).mul(5).equal()},I4(n)),_Ye=n=>{const{skeletonAvatarCls:e,gradientFromColor:r,controlHeight:i,controlHeightLG:a,controlHeightSM:o}=n;return{[e]:Object.assign({display:"inline-block",verticalAlign:"top",background:r},lx(i)),[`${e}${e}-circle`]:{borderRadius:"50%"},[`${e}${e}-lg`]:Object.assign({},lx(a)),[`${e}${e}-sm`]:Object.assign({},lx(o))}},wYe=n=>{const{controlHeight:e,borderRadiusSM:r,skeletonInputCls:i,controlHeightLG:a,controlHeightSM:o,gradientFromColor:s,calc:l}=n;return{[i]:Object.assign({display:"inline-block",verticalAlign:"top",background:s,borderRadius:r},F5(e,l)),[`${i}-lg`]:Object.assign({},F5(a,l)),[`${i}-sm`]:Object.assign({},F5(o,l))}},vie=n=>Object.assign({width:n},I4(n)),SYe=n=>{const{skeletonImageCls:e,imageSizeBase:r,gradientFromColor:i,borderRadiusSM:a,calc:o}=n;return{[e]:Object.assign(Object.assign({display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",background:i,borderRadius:a},vie(o(r).mul(2).equal())),{[`${e}-path`]:{fill:"#bfbfbf"},[`${e}-svg`]:Object.assign(Object.assign({},vie(r)),{maxWidth:o(r).mul(4).equal(),maxHeight:o(r).mul(4).equal()}),[`${e}-svg${e}-svg-circle`]:{borderRadius:"50%"}}),[`${e}${e}-circle`]:{borderRadius:"50%"}}},$5=(n,e,r)=>{const{skeletonButtonCls:i}=n;return{[`${r}${i}-circle`]:{width:e,minWidth:e,borderRadius:"50%"},[`${r}${i}-round`]:{borderRadius:e}}},B5=(n,e)=>Object.assign({width:e(n).mul(2).equal(),minWidth:e(n).mul(2).equal()},I4(n)),EYe=n=>{const{borderRadiusSM:e,skeletonButtonCls:r,controlHeight:i,controlHeightLG:a,controlHeightSM:o,gradientFromColor:s,calc:l}=n;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[r]:Object.assign({display:"inline-block",verticalAlign:"top",background:s,borderRadius:e,width:l(i).mul(2).equal(),minWidth:l(i).mul(2).equal()},B5(i,l))},$5(n,i,r)),{[`${r}-lg`]:Object.assign({},B5(a,l))}),$5(n,a,`${r}-lg`)),{[`${r}-sm`]:Object.assign({},B5(o,l))}),$5(n,o,`${r}-sm`))},CYe=n=>{const{componentCls:e,skeletonAvatarCls:r,skeletonTitleCls:i,skeletonParagraphCls:a,skeletonButtonCls:o,skeletonInputCls:s,skeletonImageCls:l,controlHeight:c,controlHeightLG:u,controlHeightSM:d,gradientFromColor:f,padding:h,marginSM:p,borderRadius:g,titleHeight:m,blockRadius:v,paragraphLiHeight:y,controlHeightXS:b,paragraphMarginTop:x}=n;return{[e]:{display:"table",width:"100%",[`${e}-header`]:{display:"table-cell",paddingInlineEnd:h,verticalAlign:"top",[r]:Object.assign({display:"inline-block",verticalAlign:"top",background:f},lx(c)),[`${r}-circle`]:{borderRadius:"50%"},[`${r}-lg`]:Object.assign({},lx(u)),[`${r}-sm`]:Object.assign({},lx(d))},[`${e}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[i]:{width:"100%",height:m,background:f,borderRadius:v,[`+ ${a}`]:{marginBlockStart:d}},[a]:{padding:0,"> li":{width:"100%",height:y,listStyle:"none",background:f,borderRadius:v,"+ li":{marginBlockStart:b}}},[`${a}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${e}-content`]:{[`${i}, ${a} > li`]:{borderRadius:g}}},[`${e}-with-avatar ${e}-content`]:{[i]:{marginBlockStart:p,[`+ ${a}`]:{marginBlockStart:x}}},[`${e}${e}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},EYe(n)),_Ye(n)),wYe(n)),SYe(n)),[`${e}${e}-block`]:{width:"100%",[o]:{width:"100%"},[s]:{width:"100%"}},[`${e}${e}-active`]:{[`
        ${i},
        ${a} > li,
        ${r},
        ${o},
        ${s},
        ${l}
      `]:Object.assign({},xYe(n))}}},MYe=n=>{const{colorFillContent:e,colorFill:r}=n,i=e,a=r;return{color:i,colorGradientEnd:a,gradientFromColor:i,gradientToColor:a,titleHeight:n.controlHeight/2,blockRadius:n.borderRadiusSM,paragraphMarginTop:n.marginLG+n.marginXXS,paragraphLiHeight:n.controlHeight/2}},$_=Ja("Skeleton",n=>{const{componentCls:e,calc:r}=n,i=Qr(n,{skeletonAvatarCls:`${e}-avatar`,skeletonTitleCls:`${e}-title`,skeletonParagraphCls:`${e}-paragraph`,skeletonButtonCls:`${e}-button`,skeletonInputCls:`${e}-input`,skeletonImageCls:`${e}-image`,imageSizeBase:r(n.controlHeight).mul(1.5).equal(),borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${n.gradientFromColor} 25%, ${n.gradientToColor} 37%, ${n.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[CYe(i)]},MYe,{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),TYe=n=>{const{prefixCls:e,className:r,rootClassName:i,active:a,shape:o="circle",size:s="default"}=n,{getPrefixCls:l}=C.useContext(yr),c=l("skeleton",e),[u,d,f]=$_(c),h=Qu(n,["prefixCls","className"]),p=Be(c,`${c}-element`,{[`${c}-active`]:a},r,i,d,f);return u(C.createElement("div",{className:p},C.createElement(O4,Object.assign({prefixCls:`${c}-avatar`,shape:o,size:s},h))))},AYe=n=>{const{prefixCls:e,className:r,rootClassName:i,active:a,block:o=!1,size:s="default"}=n,{getPrefixCls:l}=C.useContext(yr),c=l("skeleton",e),[u,d,f]=$_(c),h=Qu(n,["prefixCls"]),p=Be(c,`${c}-element`,{[`${c}-active`]:a,[`${c}-block`]:o},r,i,d,f);return u(C.createElement("div",{className:p},C.createElement(O4,Object.assign({prefixCls:`${c}-button`,size:s},h))))},RYe="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",PYe=n=>{const{prefixCls:e,className:r,rootClassName:i,style:a,active:o}=n,{getPrefixCls:s}=C.useContext(yr),l=s("skeleton",e),[c,u,d]=$_(l),f=Be(l,`${l}-element`,{[`${l}-active`]:o},r,i,u,d);return c(C.createElement("div",{className:f},C.createElement("div",{className:Be(`${l}-image`,r),style:a},C.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${l}-image-svg`},C.createElement("title",null,"Image placeholder"),C.createElement("path",{d:RYe,className:`${l}-image-path`})))))},NYe=n=>{const{prefixCls:e,className:r,rootClassName:i,active:a,block:o,size:s="default"}=n,{getPrefixCls:l}=C.useContext(yr),c=l("skeleton",e),[u,d,f]=$_(c),h=Qu(n,["prefixCls"]),p=Be(c,`${c}-element`,{[`${c}-active`]:a,[`${c}-block`]:o},r,i,d,f);return u(C.createElement("div",{className:p},C.createElement(O4,Object.assign({prefixCls:`${c}-input`,size:s},h))))},OYe=n=>{const{prefixCls:e,className:r,rootClassName:i,style:a,active:o,children:s}=n,{getPrefixCls:l}=C.useContext(yr),c=l("skeleton",e),[u,d,f]=$_(c),h=Be(c,`${c}-element`,{[`${c}-active`]:o},d,r,i,f);return u(C.createElement("div",{className:h},C.createElement("div",{className:Be(`${c}-image`,r),style:a},s)))},IYe=(n,e)=>{const{width:r,rows:i=2}=e;if(Array.isArray(r))return r[n];if(i-1===n)return r},DYe=n=>{const{prefixCls:e,className:r,style:i,rows:a=0}=n,o=Array.from({length:a}).map((s,l)=>C.createElement("li",{key:l,style:{width:IYe(l,n)}}));return C.createElement("ul",{className:Be(e,r),style:i},o)},LYe=n=>{let{prefixCls:e,className:r,width:i,style:a}=n;return C.createElement("h3",{className:Be(e,r),style:Object.assign({width:i},a)})};function z5(n){return n&&typeof n=="object"?n:{}}function kYe(n,e){return n&&!e?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function FYe(n,e){return!n&&e?{width:"38%"}:n&&e?{width:"50%"}:{}}function $Ye(n,e){const r={};return(!n||!e)&&(r.width="61%"),!n&&e?r.rows=3:r.rows=2,r}const B_=n=>{const{prefixCls:e,loading:r,className:i,rootClassName:a,style:o,children:s,avatar:l=!1,title:c=!0,paragraph:u=!0,active:d,round:f}=n,{getPrefixCls:h,direction:p,className:g,style:m}=Zu("skeleton"),v=h("skeleton",e),[y,b,x]=$_(v);if(r||!("loading"in n)){const _=!!l,S=!!c,M=!!u;let E;if(_){const A=Object.assign(Object.assign({prefixCls:`${v}-avatar`},kYe(S,M)),z5(l));E=C.createElement("div",{className:`${v}-header`},C.createElement(O4,Object.assign({},A)))}let T;if(S||M){let A;if(S){const O=Object.assign(Object.assign({prefixCls:`${v}-title`},FYe(_,M)),z5(c));A=C.createElement(LYe,Object.assign({},O))}let N;if(M){const O=Object.assign(Object.assign({prefixCls:`${v}-paragraph`},$Ye(_,S)),z5(u));N=C.createElement(DYe,Object.assign({},O))}T=C.createElement("div",{className:`${v}-content`},A,N)}const P=Be(v,{[`${v}-with-avatar`]:_,[`${v}-active`]:d,[`${v}-rtl`]:p==="rtl",[`${v}-round`]:f},g,i,a,b,x);return y(C.createElement("div",{className:P,style:Object.assign(Object.assign({},m),o)},E,T))}return s??null};B_.Button=AYe;B_.Avatar=TYe;B_.Input=NYe;B_.Image=PYe;B_.Node=OYe;function yie(){}const BYe=C.createContext({add:yie,remove:yie});function zYe(n){const e=C.useContext(BYe),r=C.useRef(null);return Lr(a=>{if(a){const o=n?a.querySelector(n):a;e.add(o),r.current=o}else e.remove(r.current)})}const bie=()=>{const{cancelButtonProps:n,cancelTextLocale:e,onCancel:r}=C.useContext(pM);return Je.createElement(ms,Object.assign({onClick:r},n),e)},xie=()=>{const{confirmLoading:n,okButtonProps:e,okType:r,okTextLocale:i,onOk:a}=C.useContext(pM);return Je.createElement(ms,Object.assign({},l_e(r),{loading:n,onClick:a},e),i)};function R_e(n,e){return Je.createElement("span",{className:`${n}-close-x`},e||Je.createElement(k_,{className:`${n}-close-icon`}))}const P_e=n=>{const{okText:e,okType:r="primary",cancelText:i,confirmLoading:a,onOk:o,onCancel:s,okButtonProps:l,cancelButtonProps:c,footer:u}=n,[d]=Wp("Modal",gxe()),f=e||(d==null?void 0:d.okText),h=i||(d==null?void 0:d.cancelText),p={confirmLoading:a,okButtonProps:l,cancelButtonProps:c,okTextLocale:f,cancelTextLocale:h,okType:r,onOk:o,onCancel:s},g=Je.useMemo(()=>p,ot(Object.values(p)));let m;return typeof u=="function"||typeof u>"u"?(m=Je.createElement(Je.Fragment,null,Je.createElement(bie,null),Je.createElement(xie,null)),typeof u=="function"&&(m=u(m,{OkBtn:xie,CancelBtn:bie})),m=Je.createElement(h_e,{value:g},m)):m=u,Je.createElement(lY,{disabled:!1},m)},UYe=n=>{const{componentCls:e}=n;return{[e]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},VYe=n=>{const{componentCls:e}=n;return{[e]:{position:"relative",maxWidth:"100%",minHeight:1}}},GYe=(n,e)=>{const{prefixCls:r,componentCls:i,gridColumns:a}=n,o={};for(let s=a;s>=0;s--)s===0?(o[`${i}${e}-${s}`]={display:"none"},o[`${i}-push-${s}`]={insetInlineStart:"auto"},o[`${i}-pull-${s}`]={insetInlineEnd:"auto"},o[`${i}${e}-push-${s}`]={insetInlineStart:"auto"},o[`${i}${e}-pull-${s}`]={insetInlineEnd:"auto"},o[`${i}${e}-offset-${s}`]={marginInlineStart:0},o[`${i}${e}-order-${s}`]={order:0}):(o[`${i}${e}-${s}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${s/a*100}%`,maxWidth:`${s/a*100}%`}],o[`${i}${e}-push-${s}`]={insetInlineStart:`${s/a*100}%`},o[`${i}${e}-pull-${s}`]={insetInlineEnd:`${s/a*100}%`},o[`${i}${e}-offset-${s}`]={marginInlineStart:`${s/a*100}%`},o[`${i}${e}-order-${s}`]={order:s});return o[`${i}${e}-flex`]={flex:`var(--${r}${e}-flex)`},o},JG=(n,e)=>GYe(n,e),jYe=(n,e,r)=>({[`@media (min-width: ${Qe(e)})`]:Object.assign({},JG(n,r))}),HYe=()=>({}),WYe=()=>({}),qYe=Ja("Grid",UYe,HYe),N_e=n=>({xs:n.screenXSMin,sm:n.screenSMMin,md:n.screenMDMin,lg:n.screenLGMin,xl:n.screenXLMin,xxl:n.screenXXLMin}),YYe=Ja("Grid",n=>{const e=Qr(n,{gridColumns:24}),r=N_e(e);return delete r.xs,[VYe(e),JG(e,""),JG(e,"-xs"),Object.keys(r).map(i=>jYe(e,r[i],`-${i}`)).reduce((i,a)=>Object.assign(Object.assign({},i),a),{})]},WYe);function _ie(n){return{position:n,inset:0}}const XYe=n=>{const{componentCls:e,antCls:r}=n;return[{[`${e}-root`]:{[`${e}${r}-zoom-enter, ${e}${r}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:n.motionDurationSlow,userSelect:"none"},[`${e}${r}-zoom-leave ${e}-content`]:{pointerEvents:"none"},[`${e}-mask`]:Object.assign(Object.assign({},_ie("fixed")),{zIndex:n.zIndexPopupBase,height:"100%",backgroundColor:n.colorBgMask,pointerEvents:"none",[`${e}-hidden`]:{display:"none"}}),[`${e}-wrap`]:Object.assign(Object.assign({},_ie("fixed")),{zIndex:n.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${e}-root`]:lWe(n)}]},KYe=n=>{const{componentCls:e}=n;return[{[`${e}-root`]:{[`${e}-wrap-rtl`]:{direction:"rtl"},[`${e}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[e]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${n.screenSMMax}px)`]:{[e]:{maxWidth:"calc(100vw - 16px)",margin:`${Qe(n.marginXS)} auto`},[`${e}-centered`]:{[e]:{flex:1}}}}},{[e]:Object.assign(Object.assign({},ts(n)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${Qe(n.calc(n.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:n.paddingLG,[`${e}-title`]:{margin:0,color:n.titleColor,fontWeight:n.fontWeightStrong,fontSize:n.titleFontSize,lineHeight:n.titleLineHeight,wordWrap:"break-word"},[`${e}-content`]:{position:"relative",backgroundColor:n.contentBg,backgroundClip:"padding-box",border:0,borderRadius:n.borderRadiusLG,boxShadow:n.boxShadow,pointerEvents:"auto",padding:n.contentPadding},[`${e}-close`]:Object.assign({position:"absolute",top:n.calc(n.modalHeaderHeight).sub(n.modalCloseBtnSize).div(2).equal(),insetInlineEnd:n.calc(n.modalHeaderHeight).sub(n.modalCloseBtnSize).div(2).equal(),zIndex:n.calc(n.zIndexPopupBase).add(10).equal(),padding:0,color:n.modalCloseIconColor,fontWeight:n.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:n.borderRadiusSM,width:n.modalCloseBtnSize,height:n.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${n.motionDurationMid}, background-color ${n.motionDurationMid}`,"&-x":{display:"flex",fontSize:n.fontSizeLG,fontStyle:"normal",lineHeight:Qe(n.modalCloseBtnSize),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:disabled":{pointerEvents:"none"},"&:hover":{color:n.modalCloseIconHoverColor,backgroundColor:n.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:n.colorBgTextActive}},Axe(n)),[`${e}-header`]:{color:n.colorText,background:n.headerBg,borderRadius:`${Qe(n.borderRadiusLG)} ${Qe(n.borderRadiusLG)} 0 0`,marginBottom:n.headerMarginBottom,padding:n.headerPadding,borderBottom:n.headerBorderBottom},[`${e}-body`]:{fontSize:n.fontSize,lineHeight:n.lineHeight,wordWrap:"break-word",padding:n.bodyPadding,[`${e}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:`${Qe(n.margin)} auto`}},[`${e}-footer`]:{textAlign:"end",background:n.footerBg,marginTop:n.footerMarginTop,padding:n.footerPadding,borderTop:n.footerBorderTop,borderRadius:n.footerBorderRadius,[`> ${n.antCls}-btn + ${n.antCls}-btn`]:{marginInlineStart:n.marginXS}},[`${e}-open`]:{overflow:"hidden"}})},{[`${e}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${e}-content,
          ${e}-body,
          ${e}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${e}-confirm-body`]:{marginBottom:"auto"}}}]},ZYe=n=>{const{componentCls:e}=n;return{[`${e}-root`]:{[`${e}-wrap-rtl`]:{direction:"rtl",[`${e}-confirm-body`]:{direction:"rtl"}}}}},QYe=n=>{const{componentCls:e}=n,r=N_e(n);delete r.xs;const i=Object.keys(r).map(a=>({[`@media (min-width: ${Qe(r[a])})`]:{width:`var(--${e.replace(".","")}-${a}-width)`}}));return{[`${e}-root`]:{[e]:[{width:`var(--${e.replace(".","")}-xs-width)`}].concat(ot(i))}}},O_e=n=>{const e=n.padding,r=n.fontSizeHeading5,i=n.lineHeightHeading5;return Qr(n,{modalHeaderHeight:n.calc(n.calc(i).mul(r).equal()).add(n.calc(e).mul(2).equal()).equal(),modalFooterBorderColorSplit:n.colorSplit,modalFooterBorderStyle:n.lineType,modalFooterBorderWidth:n.lineWidth,modalCloseIconColor:n.colorIcon,modalCloseIconHoverColor:n.colorIconHover,modalCloseBtnSize:n.controlHeight,modalConfirmIconSize:n.fontHeight,modalTitleHeight:n.calc(n.titleFontSize).mul(n.titleLineHeight).equal()})},I_e=n=>({footerBg:"transparent",headerBg:n.colorBgElevated,titleLineHeight:n.lineHeightHeading5,titleFontSize:n.fontSizeHeading5,contentBg:n.colorBgElevated,titleColor:n.colorTextHeading,contentPadding:n.wireframe?0:`${Qe(n.paddingMD)} ${Qe(n.paddingContentHorizontalLG)}`,headerPadding:n.wireframe?`${Qe(n.padding)} ${Qe(n.paddingLG)}`:0,headerBorderBottom:n.wireframe?`${Qe(n.lineWidth)} ${n.lineType} ${n.colorSplit}`:"none",headerMarginBottom:n.wireframe?0:n.marginXS,bodyPadding:n.wireframe?n.paddingLG:0,footerPadding:n.wireframe?`${Qe(n.paddingXS)} ${Qe(n.padding)}`:0,footerBorderTop:n.wireframe?`${Qe(n.lineWidth)} ${n.lineType} ${n.colorSplit}`:"none",footerBorderRadius:n.wireframe?`0 0 ${Qe(n.borderRadiusLG)} ${Qe(n.borderRadiusLG)}`:0,footerMarginTop:n.wireframe?0:n.marginSM,confirmBodyPadding:n.wireframe?`${Qe(n.padding*2)} ${Qe(n.padding*2)} ${Qe(n.paddingLG)}`:0,confirmIconMarginInlineEnd:n.wireframe?n.margin:n.marginSM,confirmBtnsMarginTop:n.wireframe?n.marginLG:n.marginSM}),D_e=Ja("Modal",n=>{const e=O_e(n);return[KYe(e),ZYe(e),XYe(e),bY(e,"zoom"),QYe(e)]},I_e,{unitless:{titleLineHeight:!0}});var JYe=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};let ej;const eXe=n=>{ej={x:n.pageX,y:n.pageY},setTimeout(()=>{ej=null},100)};yYe()&&document.documentElement.addEventListener("click",eXe,!0);const L_e=n=>{const{prefixCls:e,className:r,rootClassName:i,open:a,wrapClassName:o,centered:s,getContainer:l,focusTriggerAfterClose:c=!0,style:u,visible:d,width:f=520,footer:h,classNames:p,styles:g,children:m,loading:v,confirmLoading:y,zIndex:b,mousePosition:x,onOk:_,onCancel:S}=n,M=JYe(n,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading","confirmLoading","zIndex","mousePosition","onOk","onCancel"]),{getPopupContainer:E,getPrefixCls:T,direction:P,modal:A}=C.useContext(yr),N=oe=>{y||S==null||S(oe)},O=oe=>{_==null||_(oe)},I=T("modal",e),D=T(),k=Qc(I),[$,B,F]=D_e(I,k),G=Be(o,{[`${I}-centered`]:s??(A==null?void 0:A.centered),[`${I}-wrap-rtl`]:P==="rtl"}),z=h!==null&&!v?C.createElement(P_e,Object.assign({},n,{onOk:O,onCancel:N})):null,[U,H,X]=vYe(pie(n),pie(A),{closable:!0,closeIcon:C.createElement(k_,{className:`${I}-close-icon`}),closeIconRender:oe=>R_e(I,oe)}),V=zYe(`.${I}-content`),[W,K]=dM("Modal",b),[q,Q]=C.useMemo(()=>f&&typeof f=="object"?[void 0,f]:[f,void 0],[f]),ie=C.useMemo(()=>{const oe={};return Q&&Object.keys(Q).forEach(ue=>{const le=Q[ue];le!==void 0&&(oe[`--${I}-${ue}-width`]=typeof le=="number"?`${le}px`:le)}),oe},[Q]);return $(C.createElement(Gm,{form:!0,space:!0},C.createElement(dY.Provider,{value:K},C.createElement(y_e,Object.assign({width:q},M,{zIndex:W,getContainer:l===void 0?E:l,prefixCls:I,rootClassName:Be(B,i,F,k),footer:z,visible:a??d,mousePosition:x??ej,onClose:N,closable:U&&{disabled:X,closeIcon:H},closeIcon:H,focusTriggerAfterClose:c,transitionName:dy(D,"zoom",n.transitionName),maskTransitionName:dy(D,"fade",n.maskTransitionName),className:Be(B,r,A==null?void 0:A.className),style:Object.assign(Object.assign(Object.assign({},A==null?void 0:A.style),u),ie),classNames:Object.assign(Object.assign(Object.assign({},A==null?void 0:A.classNames),p),{wrapper:Be(G,p==null?void 0:p.wrapper)}),styles:Object.assign(Object.assign({},A==null?void 0:A.styles),g),panelRef:V}),v?C.createElement(B_,{active:!0,title:!1,paragraph:{rows:4},className:`${I}-body-skeleton`}):m))))},tXe=n=>{const{componentCls:e,titleFontSize:r,titleLineHeight:i,modalConfirmIconSize:a,fontSize:o,lineHeight:s,modalTitleHeight:l,fontHeight:c,confirmBodyPadding:u}=n,d=`${e}-confirm`;return{[d]:{"&-rtl":{direction:"rtl"},[`${n.antCls}-modal-header`]:{display:"none"},[`${d}-body-wrapper`]:Object.assign({},Txe()),[`&${e} ${e}-body`]:{padding:u},[`${d}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${n.iconCls}`]:{flex:"none",fontSize:a,marginInlineEnd:n.confirmIconMarginInlineEnd,marginTop:n.calc(n.calc(c).sub(a).equal()).div(2).equal()},[`&-has-title > ${n.iconCls}`]:{marginTop:n.calc(n.calc(l).sub(a).equal()).div(2).equal()}},[`${d}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:n.marginXS,maxWidth:`calc(100% - ${Qe(n.marginSM)})`},[`${n.iconCls} + ${d}-paragraph`]:{maxWidth:`calc(100% - ${Qe(n.calc(n.modalConfirmIconSize).add(n.marginSM).equal())})`},[`${d}-title`]:{color:n.colorTextHeading,fontWeight:n.fontWeightStrong,fontSize:r,lineHeight:i},[`${d}-content`]:{color:n.colorText,fontSize:o,lineHeight:s},[`${d}-btns`]:{textAlign:"end",marginTop:n.confirmBtnsMarginTop,[`${n.antCls}-btn + ${n.antCls}-btn`]:{marginBottom:0,marginInlineStart:n.marginXS}}},[`${d}-error ${d}-body > ${n.iconCls}`]:{color:n.colorError},[`${d}-warning ${d}-body > ${n.iconCls},
        ${d}-confirm ${d}-body > ${n.iconCls}`]:{color:n.colorWarning},[`${d}-info ${d}-body > ${n.iconCls}`]:{color:n.colorInfo},[`${d}-success ${d}-body > ${n.iconCls}`]:{color:n.colorSuccess}}},nXe=cY(["Modal","confirm"],n=>{const e=O_e(n);return[tXe(e)]},I_e,{order:-1e3});var rXe=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};function k_e(n){const{prefixCls:e,icon:r,okText:i,cancelText:a,confirmPrefixCls:o,type:s,okCancel:l,footer:c,locale:u}=n,d=rXe(n,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let f=r;if(!r&&r!==null)switch(s){case"info":f=C.createElement(Xxe,null);break;case"success":f=C.createElement(b4,null);break;case"error":f=C.createElement(L_,null);break;default:f=C.createElement(x4,null)}const h=l??s==="confirm",p=n.autoFocusButton===null?!1:n.autoFocusButton||"ok",[g]=Wp("Modal"),m=u||g,v=i||(h?m==null?void 0:m.okText:m==null?void 0:m.justOkText),y=a||(m==null?void 0:m.cancelText),b=Object.assign({autoFocusButton:p,cancelTextLocale:y,okTextLocale:v,mergedOkCancel:h},d),x=C.useMemo(()=>b,ot(Object.values(b))),_=C.createElement(C.Fragment,null,C.createElement(Xre,null),C.createElement(Kre,null)),S=n.title!==void 0&&n.title!==null,M=`${o}-body`;return C.createElement("div",{className:`${o}-body-wrapper`},C.createElement("div",{className:Be(M,{[`${M}-has-title`]:S})},f,C.createElement("div",{className:`${o}-paragraph`},S&&C.createElement("span",{className:`${o}-title`},n.title),C.createElement("div",{className:`${o}-content`},n.content))),c===void 0||typeof c=="function"?C.createElement(h_e,{value:x},C.createElement("div",{className:`${o}-btns`},typeof c=="function"?c(_,{OkBtn:Kre,CancelBtn:Xre}):_)):c,C.createElement(nXe,{prefixCls:e}))}const iXe=n=>{const{close:e,zIndex:r,maskStyle:i,direction:a,prefixCls:o,wrapClassName:s,rootPrefixCls:l,bodyStyle:c,closable:u=!1,onConfirm:d,styles:f}=n,h=`${o}-confirm`,p=n.width||416,g=n.style||{},m=n.mask===void 0?!0:n.mask,v=n.maskClosable===void 0?!1:n.maskClosable,y=Be(h,`${h}-${n.type}`,{[`${h}-rtl`]:a==="rtl"},n.className),[,b]=Zc(),x=C.useMemo(()=>r!==void 0?r:b.zIndexPopupBase+Jxe,[r,b]);return C.createElement(L_e,Object.assign({},n,{className:y,wrapClassName:Be({[`${h}-centered`]:!!n.centered},s),onCancel:()=>{e==null||e({triggerCancel:!0}),d==null||d(!1)},title:"",footer:null,transitionName:dy(l||"","zoom",n.transitionName),maskTransitionName:dy(l||"","fade",n.maskTransitionName),mask:m,maskClosable:v,style:g,styles:Object.assign({body:c,mask:i},f),width:p,zIndex:x,closable:u}),C.createElement(k_e,Object.assign({},n,{confirmPrefixCls:h})))},F_e=n=>{const{rootPrefixCls:e,iconPrefixCls:r,direction:i,theme:a}=n;return C.createElement(rf,{prefixCls:e,iconPrefixCls:r,direction:i,theme:a},C.createElement(iXe,Object.assign({},n)))},T0=[];let $_e="";function B_e(){return $_e}const aXe=n=>{var e,r;const{prefixCls:i,getContainer:a,direction:o}=n,s=gxe(),l=C.useContext(yr),c=B_e()||l.getPrefixCls(),u=i||`${c}-modal`;let d=a;return d===!1&&(d=void 0),Je.createElement(F_e,Object.assign({},n,{rootPrefixCls:c,prefixCls:u,iconPrefixCls:l.iconPrefixCls,theme:l.theme,direction:o??l.direction,locale:(r=(e=l.locale)===null||e===void 0?void 0:e.Modal)!==null&&r!==void 0?r:s,getContainer:d}))};function mM(n){const e=jxe(),r=document.createDocumentFragment();let i=Object.assign(Object.assign({},n),{close:c,open:!0}),a,o;function s(){for(var d,f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];if(h.some(v=>v==null?void 0:v.triggerCancel)){var m;(d=n.onCancel)===null||d===void 0||(m=d).call.apply(m,[n,()=>{}].concat(ot(h.slice(1))))}for(let v=0;v<T0.length;v++)if(T0[v]===c){T0.splice(v,1);break}o()}function l(d){clearTimeout(a),a=setTimeout(()=>{const f=e.getPrefixCls(void 0,B_e()),h=e.getIconPrefixCls(),p=e.getTheme(),g=Je.createElement(aXe,Object.assign({},d));o=hY()(Je.createElement(rf,{prefixCls:f,iconPrefixCls:h,theme:p},e.holderRender?e.holderRender(g):g),r)})}function c(){for(var d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];i=Object.assign(Object.assign({},i),{open:!1,afterClose:()=>{typeof n.afterClose=="function"&&n.afterClose(),s.apply(this,f)}}),i.visible&&delete i.visible,l(i)}function u(d){typeof d=="function"?i=d(i):i=Object.assign(Object.assign({},i),d),l(i)}return l(i),T0.push(c),{destroy:c,update:u}}function z_e(n){return Object.assign(Object.assign({},n),{type:"warning"})}function U_e(n){return Object.assign(Object.assign({},n),{type:"info"})}function V_e(n){return Object.assign(Object.assign({},n),{type:"success"})}function G_e(n){return Object.assign(Object.assign({},n),{type:"error"})}function j_e(n){return Object.assign(Object.assign({},n),{type:"confirm"})}function oXe(n){let{rootPrefixCls:e}=n;$_e=e}var sXe=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const lXe=(n,e)=>{var r,{afterClose:i,config:a}=n,o=sXe(n,["afterClose","config"]);const[s,l]=C.useState(!0),[c,u]=C.useState(a),{direction:d,getPrefixCls:f}=C.useContext(yr),h=f("modal"),p=f(),g=()=>{var b;i(),(b=c.afterClose)===null||b===void 0||b.call(c)},m=function(){var b;l(!1);for(var x=arguments.length,_=new Array(x),S=0;S<x;S++)_[S]=arguments[S];if(_.some(T=>T==null?void 0:T.triggerCancel)){var E;(b=c.onCancel)===null||b===void 0||(E=b).call.apply(E,[c,()=>{}].concat(ot(_.slice(1))))}};C.useImperativeHandle(e,()=>({destroy:m,update:b=>{u(x=>Object.assign(Object.assign({},x),b))}}));const v=(r=c.okCancel)!==null&&r!==void 0?r:c.type==="confirm",[y]=Wp("Modal",zm.Modal);return C.createElement(F_e,Object.assign({prefixCls:h,rootPrefixCls:p},c,{close:m,open:s,afterClose:g,okText:c.okText||(v?y==null?void 0:y.okText:y==null?void 0:y.justOkText),direction:c.direction||d,cancelText:c.cancelText||(y==null?void 0:y.cancelText)},o))},cXe=C.forwardRef(lXe);let wie=0;const uXe=C.memo(C.forwardRef((n,e)=>{const[r,i]=yHe();return C.useImperativeHandle(e,()=>({patchElement:i}),[]),C.createElement(C.Fragment,null,r)}));function dXe(){const n=C.useRef(null),[e,r]=C.useState([]);C.useEffect(()=>{e.length&&(ot(e).forEach(s=>{s()}),r([]))},[e]);const i=C.useCallback(o=>function(l){var c;wie+=1;const u=C.createRef();let d;const f=new Promise(v=>{d=v});let h=!1,p;const g=C.createElement(cXe,{key:`modal-${wie}`,config:o(l),ref:u,afterClose:()=>{p==null||p()},isSilent:()=>h,onConfirm:v=>{d(v)}});return p=(c=n.current)===null||c===void 0?void 0:c.patchElement(g),p&&T0.push(p),{destroy:()=>{function v(){var y;(y=u.current)===null||y===void 0||y.destroy()}u.current?v():r(y=>[].concat(ot(y),[v]))},update:v=>{function y(){var b;(b=u.current)===null||b===void 0||b.update(v)}u.current?y():r(b=>[].concat(ot(b),[y]))},then:v=>(h=!0,f.then(v))}},[]);return[C.useMemo(()=>({info:i(U_e),success:i(V_e),error:i(G_e),warning:i(z_e),confirm:i(j_e)}),[]),C.createElement(uXe,{key:"modal-holder",ref:n})]}const fXe=Je.createContext({});function H_e(n){return e=>C.createElement(rf,{theme:{token:{motion:!1,zIndexPopupBase:0}}},C.createElement(n,Object.assign({},e)))}const TY=(n,e,r,i,a)=>H_e(s=>{const{prefixCls:l,style:c}=s,u=C.useRef(null),[d,f]=C.useState(0),[h,p]=C.useState(0),[g,m]=es(!1,{value:s.open}),{getPrefixCls:v}=C.useContext(yr),y=v(i||"select",l);C.useEffect(()=>{if(m(!0),typeof ResizeObserver<"u"){const _=new ResizeObserver(M=>{const E=M[0].target;f(E.offsetHeight+8),p(E.offsetWidth)}),S=setInterval(()=>{var M;const E=`.${y}-dropdown`,T=(M=u.current)===null||M===void 0?void 0:M.querySelector(E);T&&(clearInterval(S),_.observe(T))},10);return()=>{clearInterval(S),_.disconnect()}}},[]);let b=Object.assign(Object.assign({},s),{style:Object.assign(Object.assign({},c),{margin:0}),open:g,visible:g,getPopupContainer:()=>u.current});e&&Object.assign(b,{[e]:{overflow:{adjustX:!1,adjustY:!1}}});const x={paddingBottom:d,position:"relative",minWidth:h};return C.createElement("div",{ref:u,style:x},C.createElement(n,Object.assign({},b)))}),AY=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var n=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(n==null?void 0:n.substr(0,4))};var D4=function(e){var r=e.className,i=e.customizeIcon,a=e.customizeIconProps,o=e.children,s=e.onMouseDown,l=e.onClick,c=typeof i=="function"?i(a):i;return C.createElement("span",{className:r,onMouseDown:function(d){d.preventDefault(),s==null||s(d)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:l,"aria-hidden":!0},c!==void 0?c:C.createElement("span",{className:Be(r.split(/\s+/).map(function(u){return"".concat(u,"-icon")}))},o))},hXe=function(e,r,i,a,o){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,l=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,u=Je.useMemo(function(){if(vn(a)==="object")return a.clearIcon;if(o)return o},[a,o]),d=Je.useMemo(function(){return!!(!s&&a&&(i.length||l)&&!(c==="combobox"&&l===""))},[a,s,i.length,l,c]);return{allowClear:d,clearIcon:Je.createElement(D4,{className:"".concat(e,"-clear"),onMouseDown:r,customizeIcon:u},"×")}},W_e=C.createContext(null);function pXe(){return C.useContext(W_e)}function gXe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=C.useState(!1),r=fe(e,2),i=r[0],a=r[1],o=C.useRef(null),s=function(){window.clearTimeout(o.current)};C.useEffect(function(){return s},[]);var l=function(u,d){s(),o.current=window.setTimeout(function(){a(u),d&&d()},n)};return[i,l,s]}function q_e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=C.useRef(null),r=C.useRef(null);C.useEffect(function(){return function(){window.clearTimeout(r.current)}},[]);function i(a){(a||e.current===null)&&(e.current=a),window.clearTimeout(r.current),r.current=window.setTimeout(function(){e.current=null},n)}return[function(){return e.current},i]}function mXe(n,e,r,i){var a=C.useRef(null);a.current={open:e,triggerOpen:r,customizedTrigger:i},C.useEffect(function(){function o(s){var l;if(!((l=a.current)!==null&&l!==void 0&&l.customizedTrigger)){var c=s.target;c.shadowRoot&&s.composed&&(c=s.composedPath()[0]||c),a.current.open&&n().filter(function(u){return u}).every(function(u){return!u.contains(c)&&u!==c})&&a.current.triggerOpen(!1)}}return window.addEventListener("mousedown",o),function(){return window.removeEventListener("mousedown",o)}},[])}function vXe(n){return n&&![Xn.ESC,Xn.SHIFT,Xn.BACKSPACE,Xn.TAB,Xn.WIN_KEY,Xn.ALT,Xn.META,Xn.WIN_KEY_RIGHT,Xn.CTRL,Xn.SEMICOLON,Xn.EQUALS,Xn.CAPS_LOCK,Xn.CONTEXT_MENU,Xn.F1,Xn.F2,Xn.F3,Xn.F4,Xn.F5,Xn.F6,Xn.F7,Xn.F8,Xn.F9,Xn.F10,Xn.F11,Xn.F12].includes(n)}var yXe=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],C1=void 0;function bXe(n,e){var r=n.prefixCls,i=n.invalidate,a=n.item,o=n.renderItem,s=n.responsive,l=n.responsiveDisabled,c=n.registerSize,u=n.itemKey,d=n.className,f=n.style,h=n.children,p=n.display,g=n.order,m=n.component,v=m===void 0?"div":m,y=ir(n,yXe),b=s&&!p;function x(T){c(u,T)}C.useEffect(function(){return function(){x(null)}},[]);var _=o&&a!==C1?o(a,{index:g}):h,S;i||(S={opacity:b?0:1,height:b?0:C1,overflowY:b?"hidden":C1,order:s?g:C1,pointerEvents:b?"none":C1,position:b?"absolute":C1});var M={};b&&(M["aria-hidden"]=!0);var E=C.createElement(v,Mt({className:Be(!i&&r,d),style:se(se({},S),f)},M,y,{ref:e}),_);return s&&(E=C.createElement(ph,{onResize:function(P){var A=P.offsetWidth;x(A)},disabled:l},E)),E}var B2=C.forwardRef(bXe);B2.displayName="Item";function xXe(n){if(typeof MessageChannel>"u")Gr(n);else{var e=new MessageChannel;e.port1.onmessage=function(){return n()},e.port2.postMessage(void 0)}}function _Xe(){var n=C.useRef(null),e=function(i){n.current||(n.current=[],xXe(function(){$m.unstable_batchedUpdates(function(){n.current.forEach(function(a){a()}),n.current=null})})),n.current.push(i)};return e}function iS(n,e){var r=C.useState(e),i=fe(r,2),a=i[0],o=i[1],s=Lr(function(l){n(function(){o(l)})});return[a,s]}var $N=Je.createContext(null),wXe=["component"],SXe=["className"],EXe=["className"],CXe=function(e,r){var i=C.useContext($N);if(!i){var a=e.component,o=a===void 0?"div":a,s=ir(e,wXe);return C.createElement(o,Mt({},s,{ref:r}))}var l=i.className,c=ir(i,SXe),u=e.className,d=ir(e,EXe);return C.createElement($N.Provider,{value:null},C.createElement(B2,Mt({ref:r,className:Be(l,u)},c,d)))},Y_e=C.forwardRef(CXe);Y_e.displayName="RawItem";var MXe=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],X_e="responsive",K_e="invalidate";function TXe(n){return"+ ".concat(n.length," ...")}function AXe(n,e){var r=n.prefixCls,i=r===void 0?"rc-overflow":r,a=n.data,o=a===void 0?[]:a,s=n.renderItem,l=n.renderRawItem,c=n.itemKey,u=n.itemWidth,d=u===void 0?10:u,f=n.ssr,h=n.style,p=n.className,g=n.maxCount,m=n.renderRest,v=n.renderRawRest,y=n.suffix,b=n.component,x=b===void 0?"div":b,_=n.itemComponent,S=n.onVisibleChange,M=ir(n,MXe),E=f==="full",T=_Xe(),P=iS(T,null),A=fe(P,2),N=A[0],O=A[1],I=N||0,D=iS(T,new Map),k=fe(D,2),$=k[0],B=k[1],F=iS(T,0),G=fe(F,2),z=G[0],U=G[1],H=iS(T,0),X=fe(H,2),V=X[0],W=X[1],K=iS(T,0),q=fe(K,2),Q=q[0],ie=q[1],oe=C.useState(null),ue=fe(oe,2),le=ue[0],me=ue[1],J=C.useState(null),pe=fe(J,2),ve=pe[0],Me=pe[1],Re=C.useMemo(function(){return ve===null&&E?Number.MAX_SAFE_INTEGER:ve||0},[ve,N]),Xe=C.useState(!1),He=fe(Xe,2),ee=He[0],Y=He[1],ce="".concat(i,"-item"),_e=Math.max(z,V),Ae=g===X_e,Ce=o.length&&Ae,et=g===K_e,Ve=Ce||typeof g=="number"&&o.length>g,qe=C.useMemo(function(){var Ot=o;return Ce?N===null&&E?Ot=o:Ot=o.slice(0,Math.min(o.length,I/d)):typeof g=="number"&&(Ot=o.slice(0,g)),Ot},[o,d,N,g,Ce]),dt=C.useMemo(function(){return Ce?o.slice(Re+1):o.slice(qe.length)},[o,qe,Ce,Re]),Ge=C.useCallback(function(Ot,wt){var Ft;return typeof c=="function"?c(Ot):(Ft=c&&(Ot==null?void 0:Ot[c]))!==null&&Ft!==void 0?Ft:wt},[c]),We=C.useCallback(s||function(Ot){return Ot},[s]);function Ze(Ot,wt,Ft){ve===Ot&&(wt===void 0||wt===le)||(Me(Ot),Ft||(Y(Ot<o.length-1),S==null||S(Ot)),wt!==void 0&&me(wt))}function Ie(Ot,wt){O(wt.clientWidth)}function De(Ot,wt){B(function(Ft){var wn=new Map(Ft);return wt===null?wn.delete(Ot):wn.set(Ot,wt),wn})}function bt(Ot,wt){W(wt),U(V)}function Ke(Ot,wt){ie(wt)}function mt(Ot){return $.get(Ge(qe[Ot],Ot))}Dr(function(){if(I&&typeof _e=="number"&&qe){var Ot=Q,wt=qe.length,Ft=wt-1;if(!wt){Ze(0,null);return}for(var wn=0;wn<wt;wn+=1){var ye=mt(wn);if(E&&(ye=ye||0),ye===void 0){Ze(wn-1,void 0,!0);break}if(Ot+=ye,Ft===0&&Ot<=I||wn===Ft-1&&Ot+mt(Ft)<=I){Ze(Ft,null);break}else if(Ot+_e>I){Ze(wn-1,Ot-ye-Q+V);break}}y&&mt(0)+Q>I&&me(null)}},[I,$,V,Q,Ge,qe]);var xe=ee&&!!dt.length,vt={};le!==null&&Ce&&(vt={position:"absolute",left:le,top:0});var Ue={prefixCls:ce,responsive:Ce,component:_,invalidate:et},Le=l?function(Ot,wt){var Ft=Ge(Ot,wt);return C.createElement($N.Provider,{key:Ft,value:se(se({},Ue),{},{order:wt,item:Ot,itemKey:Ft,registerSize:De,display:wt<=Re})},l(Ot,wt))}:function(Ot,wt){var Ft=Ge(Ot,wt);return C.createElement(B2,Mt({},Ue,{order:wt,key:Ft,item:Ot,renderItem:We,itemKey:Ft,registerSize:De,display:wt<=Re}))},Ye={order:xe?Re:Number.MAX_SAFE_INTEGER,className:"".concat(ce,"-rest"),registerSize:bt,display:xe},nt=m||TXe,_t=v?C.createElement($N.Provider,{value:se(se({},Ue),Ye)},v(dt)):C.createElement(B2,Mt({},Ue,Ye),typeof nt=="function"?nt(dt):nt),Gt=C.createElement(x,Mt({className:Be(!et&&i,p),style:h,ref:e},M),qe.map(Le),Ve?_t:null,y&&C.createElement(B2,Mt({},Ue,{responsive:Ae,responsiveDisabled:!Ce,order:Re,className:"".concat(ce,"-suffix"),registerSize:Ke,display:!0,style:vt}),y));return Ae?C.createElement(ph,{onResize:Ie,disabled:!Ce},Gt):Gt}var z_=C.forwardRef(AXe);z_.displayName="Overflow";z_.Item=Y_e;z_.RESPONSIVE=X_e;z_.INVALIDATE=K_e;var RXe=function(e,r){var i,a=e.prefixCls,o=e.id,s=e.inputElement,l=e.disabled,c=e.tabIndex,u=e.autoFocus,d=e.autoComplete,f=e.editable,h=e.activeDescendantId,p=e.value,g=e.maxLength,m=e.onKeyDown,v=e.onMouseDown,y=e.onChange,b=e.onPaste,x=e.onCompositionStart,_=e.onCompositionEnd,S=e.onBlur,M=e.open,E=e.attrs,T=s||C.createElement("input",null),P=T,A=P.ref,N=P.props,O=N.onKeyDown,I=N.onChange,D=N.onMouseDown,k=N.onCompositionStart,$=N.onCompositionEnd,B=N.onBlur,F=N.style;return"maxLength"in T.props,T=C.cloneElement(T,se(se(se({type:"search"},N),{},{id:o,ref:hh(r,A),disabled:l,tabIndex:c,autoComplete:d||"off",autoFocus:u,className:Be("".concat(a,"-selection-search-input"),(i=T)===null||i===void 0||(i=i.props)===null||i===void 0?void 0:i.className),role:"combobox","aria-expanded":M||!1,"aria-haspopup":"listbox","aria-owns":"".concat(o,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(o,"_list"),"aria-activedescendant":M?h:void 0},E),{},{value:f?p:"",maxLength:g,readOnly:!f,unselectable:f?null:"on",style:se(se({},F),{},{opacity:f?null:0}),onKeyDown:function(z){m(z),O&&O(z)},onMouseDown:function(z){v(z),D&&D(z)},onChange:function(z){y(z),I&&I(z)},onCompositionStart:function(z){x(z),k&&k(z)},onCompositionEnd:function(z){_(z),$&&$(z)},onPaste:b,onBlur:function(z){S(z),B&&B(z)}})),T},Z_e=C.forwardRef(RXe);function Q_e(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}var PXe=typeof window<"u"&&window.document&&window.document.documentElement,NXe=PXe;function OXe(n){return n!=null}function IXe(n){return!n&&n!==0}function Sie(n){return["string","number"].includes(vn(n))}function J_e(n){var e=void 0;return n&&(Sie(n.title)?e=n.title.toString():Sie(n.label)&&(e=n.label.toString())),e}function DXe(n,e){NXe?C.useLayoutEffect(n,e):C.useEffect(n,e)}function LXe(n){var e;return(e=n.key)!==null&&e!==void 0?e:n.value}var Eie=function(e){e.preventDefault(),e.stopPropagation()},kXe=function(e){var r=e.id,i=e.prefixCls,a=e.values,o=e.open,s=e.searchValue,l=e.autoClearSearchValue,c=e.inputRef,u=e.placeholder,d=e.disabled,f=e.mode,h=e.showSearch,p=e.autoFocus,g=e.autoComplete,m=e.activeDescendantId,v=e.tabIndex,y=e.removeIcon,b=e.maxTagCount,x=e.maxTagTextLength,_=e.maxTagPlaceholder,S=_===void 0?function(J){return"+ ".concat(J.length," ...")}:_,M=e.tagRender,E=e.onToggleOpen,T=e.onRemove,P=e.onInputChange,A=e.onInputPaste,N=e.onInputKeyDown,O=e.onInputMouseDown,I=e.onInputCompositionStart,D=e.onInputCompositionEnd,k=e.onInputBlur,$=C.useRef(null),B=C.useState(0),F=fe(B,2),G=F[0],z=F[1],U=C.useState(!1),H=fe(U,2),X=H[0],V=H[1],W="".concat(i,"-selection"),K=o||f==="multiple"&&l===!1||f==="tags"?s:"",q=f==="tags"||f==="multiple"&&l===!1||h&&(o||X);DXe(function(){z($.current.scrollWidth)},[K]);var Q=function(pe,ve,Me,Re,Xe){return C.createElement("span",{title:J_e(pe),className:Be("".concat(W,"-item"),re({},"".concat(W,"-item-disabled"),Me))},C.createElement("span",{className:"".concat(W,"-item-content")},ve),Re&&C.createElement(D4,{className:"".concat(W,"-item-remove"),onMouseDown:Eie,onClick:Xe,customizeIcon:y},"×"))},ie=function(pe,ve,Me,Re,Xe,He){var ee=function(ce){Eie(ce),E(!o)};return C.createElement("span",{onMouseDown:ee},M({label:ve,value:pe,disabled:Me,closable:Re,onClose:Xe,isMaxTag:!!He}))},oe=function(pe){var ve=pe.disabled,Me=pe.label,Re=pe.value,Xe=!d&&!ve,He=Me;if(typeof x=="number"&&(typeof Me=="string"||typeof Me=="number")){var ee=String(He);ee.length>x&&(He="".concat(ee.slice(0,x),"..."))}var Y=function(_e){_e&&_e.stopPropagation(),T(pe)};return typeof M=="function"?ie(Re,He,ve,Xe,Y):Q(pe,He,ve,Xe,Y)},ue=function(pe){if(!a.length)return null;var ve=typeof S=="function"?S(pe):S;return typeof M=="function"?ie(void 0,ve,!1,!1,void 0,!0):Q({title:ve},ve,!1)},le=C.createElement("div",{className:"".concat(W,"-search"),style:{width:G},onFocus:function(){V(!0)},onBlur:function(){V(!1)}},C.createElement(Z_e,{ref:c,open:o,prefixCls:i,id:r,inputElement:null,disabled:d,autoFocus:p,autoComplete:g,editable:q,activeDescendantId:m,value:K,onKeyDown:N,onMouseDown:O,onChange:P,onPaste:A,onCompositionStart:I,onCompositionEnd:D,onBlur:k,tabIndex:v,attrs:Hu(e,!0)}),C.createElement("span",{ref:$,className:"".concat(W,"-search-mirror"),"aria-hidden":!0},K," ")),me=C.createElement(z_,{prefixCls:"".concat(W,"-overflow"),data:a,renderItem:oe,renderRest:ue,suffix:le,itemKey:LXe,maxCount:b});return C.createElement("span",{className:"".concat(W,"-wrap")},me,!a.length&&!K&&C.createElement("span",{className:"".concat(W,"-placeholder")},u))},FXe=function(e){var r=e.inputElement,i=e.prefixCls,a=e.id,o=e.inputRef,s=e.disabled,l=e.autoFocus,c=e.autoComplete,u=e.activeDescendantId,d=e.mode,f=e.open,h=e.values,p=e.placeholder,g=e.tabIndex,m=e.showSearch,v=e.searchValue,y=e.activeValue,b=e.maxLength,x=e.onInputKeyDown,_=e.onInputMouseDown,S=e.onInputChange,M=e.onInputPaste,E=e.onInputCompositionStart,T=e.onInputCompositionEnd,P=e.onInputBlur,A=e.title,N=C.useState(!1),O=fe(N,2),I=O[0],D=O[1],k=d==="combobox",$=k||m,B=h[0],F=v||"";k&&y&&!I&&(F=y),C.useEffect(function(){k&&D(!1)},[k,y]);var G=d!=="combobox"&&!f&&!m?!1:!!F,z=A===void 0?J_e(B):A,U=C.useMemo(function(){return B?null:C.createElement("span",{className:"".concat(i,"-selection-placeholder"),style:G?{visibility:"hidden"}:void 0},p)},[B,G,p,i]);return C.createElement("span",{className:"".concat(i,"-selection-wrap")},C.createElement("span",{className:"".concat(i,"-selection-search")},C.createElement(Z_e,{ref:o,prefixCls:i,id:a,open:f,inputElement:r,disabled:s,autoFocus:l,autoComplete:c,editable:$,activeDescendantId:u,value:F,onKeyDown:x,onMouseDown:_,onChange:function(X){D(!0),S(X)},onPaste:M,onCompositionStart:E,onCompositionEnd:T,onBlur:P,tabIndex:g,attrs:Hu(e,!0),maxLength:k?b:void 0})),!k&&B?C.createElement("span",{className:"".concat(i,"-selection-item"),title:z,style:G?{visibility:"hidden"}:void 0},B.label):null,U)},$Xe=function(e,r){var i=C.useRef(null),a=C.useRef(!1),o=e.prefixCls,s=e.open,l=e.mode,c=e.showSearch,u=e.tokenWithEnter,d=e.disabled,f=e.prefix,h=e.autoClearSearchValue,p=e.onSearch,g=e.onSearchSubmit,m=e.onToggleOpen,v=e.onInputKeyDown,y=e.onInputBlur,b=e.domRef;C.useImperativeHandle(r,function(){return{focus:function(z){i.current.focus(z)},blur:function(){i.current.blur()}}});var x=q_e(0),_=fe(x,2),S=_[0],M=_[1],E=function(z){var U=z.which,H=i.current instanceof HTMLTextAreaElement;!H&&s&&(U===Xn.UP||U===Xn.DOWN)&&z.preventDefault(),v&&v(z),U===Xn.ENTER&&l==="tags"&&!a.current&&!s&&(g==null||g(z.target.value)),!(H&&!s&&~[Xn.UP,Xn.DOWN,Xn.LEFT,Xn.RIGHT].indexOf(U))&&vXe(U)&&m(!0)},T=function(){M(!0)},P=C.useRef(null),A=function(z){p(z,!0,a.current)!==!1&&m(!0)},N=function(){a.current=!0},O=function(z){a.current=!1,l!=="combobox"&&A(z.target.value)},I=function(z){var U=z.target.value;if(u&&P.current&&/[\r\n]/.test(P.current)){var H=P.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");U=U.replace(H,P.current)}P.current=null,A(U)},D=function(z){var U=z.clipboardData,H=U==null?void 0:U.getData("text");P.current=H||""},k=function(z){var U=z.target;if(U!==i.current){var H=document.body.style.msTouchAction!==void 0;H?setTimeout(function(){i.current.focus()}):i.current.focus()}},$=function(z){var U=S();z.target!==i.current&&!U&&!(l==="combobox"&&d)&&z.preventDefault(),(l!=="combobox"&&(!c||!U)||!s)&&(s&&h!==!1&&p("",!0,!1),m())},B={inputRef:i,onInputKeyDown:E,onInputMouseDown:T,onInputChange:I,onInputPaste:D,onInputCompositionStart:N,onInputCompositionEnd:O,onInputBlur:y},F=l==="multiple"||l==="tags"?C.createElement(kXe,Mt({},e,B)):C.createElement(FXe,Mt({},e,B));return C.createElement("div",{ref:b,className:"".concat(o,"-selector"),onClick:k,onMouseDown:$},f&&C.createElement("div",{className:"".concat(o,"-prefix")},f),F)},BXe=C.forwardRef($Xe);function zXe(n){var e=n.prefixCls,r=n.align,i=n.arrow,a=n.arrowPos,o=i||{},s=o.className,l=o.content,c=a.x,u=c===void 0?0:c,d=a.y,f=d===void 0?0:d,h=C.useRef();if(!r||!r.points)return null;var p={position:"absolute"};if(r.autoArrow!==!1){var g=r.points[0],m=r.points[1],v=g[0],y=g[1],b=m[0],x=m[1];v===b||!["t","b"].includes(v)?p.top=f:v==="t"?p.top=0:p.bottom=0,y===x||!["l","r"].includes(y)?p.left=u:y==="l"?p.left=0:p.right=0}return C.createElement("div",{ref:h,className:Be("".concat(e,"-arrow"),s),style:p},l)}function UXe(n){var e=n.prefixCls,r=n.open,i=n.zIndex,a=n.mask,o=n.motion;return a?C.createElement(av,Mt({},o,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(s){var l=s.className;return C.createElement("div",{style:{zIndex:i},className:Be("".concat(e,"-mask"),l)})}):null}var VXe=C.memo(function(n){var e=n.children;return e},function(n,e){return e.cache}),GXe=C.forwardRef(function(n,e){var r=n.popup,i=n.className,a=n.prefixCls,o=n.style,s=n.target,l=n.onVisibleChanged,c=n.open,u=n.keepDom,d=n.fresh,f=n.onClick,h=n.mask,p=n.arrow,g=n.arrowPos,m=n.align,v=n.motion,y=n.maskMotion,b=n.forceRender,x=n.getPopupContainer,_=n.autoDestroy,S=n.portal,M=n.zIndex,E=n.onMouseEnter,T=n.onMouseLeave,P=n.onPointerEnter,A=n.onPointerDownCapture,N=n.ready,O=n.offsetX,I=n.offsetY,D=n.offsetR,k=n.offsetB,$=n.onAlign,B=n.onPrepare,F=n.stretch,G=n.targetWidth,z=n.targetHeight,U=typeof r=="function"?r():r,H=c||u,X=(x==null?void 0:x.length)>0,V=C.useState(!x||!X),W=fe(V,2),K=W[0],q=W[1];if(Dr(function(){!K&&X&&s&&q(!0)},[K,X,s]),!K)return null;var Q="auto",ie={left:"-1000vw",top:"-1000vh",right:Q,bottom:Q};if(N||!c){var oe,ue=m.points,le=m.dynamicInset||((oe=m._experimental)===null||oe===void 0?void 0:oe.dynamicInset),me=le&&ue[0][1]==="r",J=le&&ue[0][0]==="b";me?(ie.right=D,ie.left=Q):(ie.left=O,ie.right=Q),J?(ie.bottom=k,ie.top=Q):(ie.top=I,ie.bottom=Q)}var pe={};return F&&(F.includes("height")&&z?pe.height=z:F.includes("minHeight")&&z&&(pe.minHeight=z),F.includes("width")&&G?pe.width=G:F.includes("minWidth")&&G&&(pe.minWidth=G)),c||(pe.pointerEvents="none"),C.createElement(S,{open:b||H,getContainer:x&&function(){return x(s)},autoDestroy:_},C.createElement(UXe,{prefixCls:a,open:c,zIndex:M,mask:h,motion:y}),C.createElement(ph,{onResize:$,disabled:!c},function(ve){return C.createElement(av,Mt({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:b,leavedClassName:"".concat(a,"-hidden")},v,{onAppearPrepare:B,onEnterPrepare:B,visible:c,onVisibleChanged:function(Re){var Xe;v==null||(Xe=v.onVisibleChanged)===null||Xe===void 0||Xe.call(v,Re),l(Re)}}),function(Me,Re){var Xe=Me.className,He=Me.style,ee=Be(a,Xe,i);return C.createElement("div",{ref:hh(ve,e,Re),className:ee,style:se(se(se(se({"--arrow-x":"".concat(g.x||0,"px"),"--arrow-y":"".concat(g.y||0,"px")},ie),pe),He),{},{boxSizing:"border-box",zIndex:M},o),onMouseEnter:E,onMouseLeave:T,onPointerEnter:P,onClick:f,onPointerDownCapture:A},p&&C.createElement(zXe,{prefixCls:a,arrow:p,arrowPos:g,align:m}),C.createElement(VXe,{cache:!c&&!d},U))})}))}),jXe=C.forwardRef(function(n,e){var r=n.children,i=n.getTriggerDOMNode,a=O_(r),o=C.useCallback(function(l){Zq(e,i?i(l):l)},[i]),s=N_(o,lM(r));return a?C.cloneElement(r,{ref:s}):r}),Cie=C.createContext(null);function Mie(n){return n?Array.isArray(n)?n:[n]:[]}function HXe(n,e,r,i){return C.useMemo(function(){var a=Mie(r??e),o=Mie(i??e),s=new Set(a),l=new Set(o);return n&&(s.has("hover")&&(s.delete("hover"),s.add("click")),l.has("hover")&&(l.delete("hover"),l.add("click"))),[s,l]},[n,e,r,i])}function WXe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?n[0]===e[0]:n[0]===e[0]&&n[1]===e[1]}function qXe(n,e,r,i){for(var a=r.points,o=Object.keys(n),s=0;s<o.length;s+=1){var l,c=o[s];if(WXe((l=n[c])===null||l===void 0?void 0:l.points,a,i))return"".concat(e,"-placement-").concat(c)}return""}function Tie(n,e,r,i){return e||(r?{motionName:"".concat(n,"-").concat(r)}:i?{motionName:i}:null)}function vM(n){return n.ownerDocument.defaultView}function tj(n){for(var e=[],r=n==null?void 0:n.parentElement,i=["hidden","scroll","clip","auto"];r;){var a=vM(r).getComputedStyle(r),o=a.overflowX,s=a.overflowY,l=a.overflow;[o,s,l].some(function(c){return i.includes(c)})&&e.push(r),r=r.parentElement}return e}function jE(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(n)?e:n}function aS(n){return jE(parseFloat(n),0)}function Aie(n,e){var r=se({},n);return(e||[]).forEach(function(i){if(!(i instanceof HTMLBodyElement||i instanceof HTMLHtmlElement)){var a=vM(i).getComputedStyle(i),o=a.overflow,s=a.overflowClipMargin,l=a.borderTopWidth,c=a.borderBottomWidth,u=a.borderLeftWidth,d=a.borderRightWidth,f=i.getBoundingClientRect(),h=i.offsetHeight,p=i.clientHeight,g=i.offsetWidth,m=i.clientWidth,v=aS(l),y=aS(c),b=aS(u),x=aS(d),_=jE(Math.round(f.width/g*1e3)/1e3),S=jE(Math.round(f.height/h*1e3)/1e3),M=(g-m-b-x)*_,E=(h-p-v-y)*S,T=v*S,P=y*S,A=b*_,N=x*_,O=0,I=0;if(o==="clip"){var D=aS(s);O=D*_,I=D*S}var k=f.x+A-O,$=f.y+T-I,B=k+f.width+2*O-A-N-M,F=$+f.height+2*I-T-P-E;r.left=Math.max(r.left,k),r.top=Math.max(r.top,$),r.right=Math.min(r.right,B),r.bottom=Math.min(r.bottom,F)}}),r}function Rie(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(e),i=r.match(/^(.*)\%$/);return i?n*(parseFloat(i[1])/100):parseFloat(r)}function Pie(n,e){var r=e||[],i=fe(r,2),a=i[0],o=i[1];return[Rie(n.width,a),Rie(n.height,o)]}function Nie(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[n[0],n[1]]}function M1(n,e){var r=e[0],i=e[1],a,o;return r==="t"?o=n.y:r==="b"?o=n.y+n.height:o=n.y+n.height/2,i==="l"?a=n.x:i==="r"?a=n.x+n.width:a=n.x+n.width/2,{x:a,y:o}}function hg(n,e){var r={t:"b",b:"t",l:"r",r:"l"};return n.map(function(i,a){return a===e?r[i]||"c":i}).join("")}function YXe(n,e,r,i,a,o,s){var l=C.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:a[i]||{}}),c=fe(l,2),u=c[0],d=c[1],f=C.useRef(0),h=C.useMemo(function(){return e?tj(e):[]},[e]),p=C.useRef({}),g=function(){p.current={}};n||g();var m=Lr(function(){if(e&&r&&n){let Ar=function(ad,hf){var pf=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_e,Ev=V.x+ad,Cv=V.y+hf,Sw=Ev+me,Ew=Cv+le,Cw=Math.max(Ev,pf.left),gn=Math.max(Cv,pf.top),Ln=Math.min(Sw,pf.right),Vi=Math.min(Ew,pf.bottom);return Math.max(0,(Ln-Cw)*(Vi-gn))},Xi=function(){en=V.y+Ft,yn=en+le,kn=V.x+wt,qn=kn+me};var b,x,_,S,M=e,E=M.ownerDocument,T=vM(M),P=T.getComputedStyle(M),A=P.width,N=P.height,O=P.position,I=M.style.left,D=M.style.top,k=M.style.right,$=M.style.bottom,B=M.style.overflow,F=se(se({},a[i]),o),G=E.createElement("div");(b=M.parentElement)===null||b===void 0||b.appendChild(G),G.style.left="".concat(M.offsetLeft,"px"),G.style.top="".concat(M.offsetTop,"px"),G.style.position=O,G.style.height="".concat(M.offsetHeight,"px"),G.style.width="".concat(M.offsetWidth,"px"),M.style.left="0",M.style.top="0",M.style.right="auto",M.style.bottom="auto",M.style.overflow="hidden";var z;if(Array.isArray(r))z={x:r[0],y:r[1],width:0,height:0};else{var U,H,X=r.getBoundingClientRect();X.x=(U=X.x)!==null&&U!==void 0?U:X.left,X.y=(H=X.y)!==null&&H!==void 0?H:X.top,z={x:X.x,y:X.y,width:X.width,height:X.height}}var V=M.getBoundingClientRect();V.x=(x=V.x)!==null&&x!==void 0?x:V.left,V.y=(_=V.y)!==null&&_!==void 0?_:V.top;var W=E.documentElement,K=W.clientWidth,q=W.clientHeight,Q=W.scrollWidth,ie=W.scrollHeight,oe=W.scrollTop,ue=W.scrollLeft,le=V.height,me=V.width,J=z.height,pe=z.width,ve={left:0,top:0,right:K,bottom:q},Me={left:-ue,top:-oe,right:Q-ue,bottom:ie-oe},Re=F.htmlRegion,Xe="visible",He="visibleFirst";Re!=="scroll"&&Re!==He&&(Re=Xe);var ee=Re===He,Y=Aie(Me,h),ce=Aie(ve,h),_e=Re===Xe?ce:Y,Ae=ee?ce:_e;M.style.left="auto",M.style.top="auto",M.style.right="0",M.style.bottom="0";var Ce=M.getBoundingClientRect();M.style.left=I,M.style.top=D,M.style.right=k,M.style.bottom=$,M.style.overflow=B,(S=M.parentElement)===null||S===void 0||S.removeChild(G);var et=jE(Math.round(me/parseFloat(A)*1e3)/1e3),Ve=jE(Math.round(le/parseFloat(N)*1e3)/1e3);if(et===0||Ve===0||kE(r)&&!S4(r))return;var qe=F.offset,dt=F.targetOffset,Ge=Pie(V,qe),We=fe(Ge,2),Ze=We[0],Ie=We[1],De=Pie(z,dt),bt=fe(De,2),Ke=bt[0],mt=bt[1];z.x-=Ke,z.y-=mt;var xe=F.points||[],vt=fe(xe,2),Ue=vt[0],Le=vt[1],Ye=Nie(Le),nt=Nie(Ue),_t=M1(z,Ye),Gt=M1(V,nt),Ot=se({},F),wt=_t.x-Gt.x+Ze,Ft=_t.y-Gt.y+Ie,wn=Ar(wt,Ft),ye=Ar(wt,Ft,ce),be=M1(z,["t","l"]),Se=M1(V,["t","l"]),je=M1(z,["b","r"]),tt=M1(V,["b","r"]),ft=F.overflow||{},Tt=ft.adjustX,It=ft.adjustY,Rt=ft.shiftX,Lt=ft.shiftY,$t=function(hf){return typeof hf=="boolean"?hf:hf>=0},en,yn,kn,qn;Xi();var _n=$t(It),te=nt[0]===Ye[0];if(_n&&nt[0]==="t"&&(yn>Ae.bottom||p.current.bt)){var de=Ft;te?de-=le-J:de=be.y-tt.y-Ie;var Te=Ar(wt,de),Oe=Ar(wt,de,ce);Te>wn||Te===wn&&(!ee||Oe>=ye)?(p.current.bt=!0,Ft=de,Ie=-Ie,Ot.points=[hg(nt,0),hg(Ye,0)]):p.current.bt=!1}if(_n&&nt[0]==="b"&&(en<Ae.top||p.current.tb)){var Ee=Ft;te?Ee+=le-J:Ee=je.y-Se.y-Ie;var ut=Ar(wt,Ee),Dt=Ar(wt,Ee,ce);ut>wn||ut===wn&&(!ee||Dt>=ye)?(p.current.tb=!0,Ft=Ee,Ie=-Ie,Ot.points=[hg(nt,0),hg(Ye,0)]):p.current.tb=!1}var Bt=$t(Tt),Zt=nt[1]===Ye[1];if(Bt&&nt[1]==="l"&&(qn>Ae.right||p.current.rl)){var dn=wt;Zt?dn-=me-pe:dn=be.x-tt.x-Ze;var kt=Ar(dn,Ft),zt=Ar(dn,Ft,ce);kt>wn||kt===wn&&(!ee||zt>=ye)?(p.current.rl=!0,wt=dn,Ze=-Ze,Ot.points=[hg(nt,1),hg(Ye,1)]):p.current.rl=!1}if(Bt&&nt[1]==="r"&&(kn<Ae.left||p.current.lr)){var En=wt;Zt?En+=me-pe:En=je.x-Se.x-Ze;var Bn=Ar(En,Ft),In=Ar(En,Ft,ce);Bn>wn||Bn===wn&&(!ee||In>=ye)?(p.current.lr=!0,wt=En,Ze=-Ze,Ot.points=[hg(nt,1),hg(Ye,1)]):p.current.lr=!1}Xi();var zn=Rt===!0?0:Rt;typeof zn=="number"&&(kn<ce.left&&(wt-=kn-ce.left-Ze,z.x+pe<ce.left+zn&&(wt+=z.x-ce.left+pe-zn)),qn>ce.right&&(wt-=qn-ce.right-Ze,z.x>ce.right-zn&&(wt+=z.x-ce.right+zn)));var Rn=Lt===!0?0:Lt;typeof Rn=="number"&&(en<ce.top&&(Ft-=en-ce.top-Ie,z.y+J<ce.top+Rn&&(Ft+=z.y-ce.top+J-Rn)),yn>ce.bottom&&(Ft-=yn-ce.bottom-Ie,z.y>ce.bottom-Rn&&(Ft+=z.y-ce.bottom+Rn)));var fn=V.x+wt,Yr=fn+me,Hn=V.y+Ft,Yi=Hn+le,sa=z.x,Cn=sa+pe,Mn=z.y,Un=Mn+J,rn=Math.max(fn,sa),Wt=Math.min(Yr,Cn),Dn=(rn+Wt)/2,hr=Dn-fn,Li=Math.max(Hn,Mn),Ui=Math.min(Yi,Un),_o=(Li+Ui)/2,Ms=_o-Hn;s==null||s(e,Ot);var Yn=Ce.right-V.x-(wt+V.width),xn=Ce.bottom-V.y-(Ft+V.height);et===1&&(wt=Math.round(wt),Yn=Math.round(Yn)),Ve===1&&(Ft=Math.round(Ft),xn=Math.round(xn));var er={ready:!0,offsetX:wt/et,offsetY:Ft/Ve,offsetR:Yn/et,offsetB:xn/Ve,arrowX:hr/et,arrowY:Ms/Ve,scaleX:et,scaleY:Ve,align:Ot};d(er)}}),v=function(){f.current+=1;var x=f.current;Promise.resolve().then(function(){f.current===x&&m()})},y=function(){d(function(x){return se(se({},x),{},{ready:!1})})};return Dr(y,[i]),Dr(function(){n||y()},[n]),[u.ready,u.offsetX,u.offsetY,u.offsetR,u.offsetB,u.arrowX,u.arrowY,u.scaleX,u.scaleY,u.align,v]}function XXe(n,e,r,i,a){Dr(function(){if(n&&e&&r){let f=function(){i(),a()};var o=e,s=r,l=tj(o),c=tj(s),u=vM(s),d=new Set([u].concat(ot(l),ot(c)));return d.forEach(function(h){h.addEventListener("scroll",f,{passive:!0})}),u.addEventListener("resize",f,{passive:!0}),i(),function(){d.forEach(function(h){h.removeEventListener("scroll",f),u.removeEventListener("resize",f)})}}},[n,e,r])}function KXe(n,e,r,i,a,o,s,l){var c=C.useRef(n);c.current=n;var u=C.useRef(!1);C.useEffect(function(){if(e&&i&&(!a||o)){var f=function(){u.current=!1},h=function(v){var y;c.current&&!s(((y=v.composedPath)===null||y===void 0||(y=y.call(v))===null||y===void 0?void 0:y[0])||v.target)&&!u.current&&l(!1)},p=vM(i);p.addEventListener("pointerdown",f,!0),p.addEventListener("mousedown",h,!0),p.addEventListener("contextmenu",h,!0);var g=IN(r);return g&&(g.addEventListener("mousedown",h,!0),g.addEventListener("contextmenu",h,!0)),function(){p.removeEventListener("pointerdown",f,!0),p.removeEventListener("mousedown",h,!0),p.removeEventListener("contextmenu",h,!0),g&&(g.removeEventListener("mousedown",h,!0),g.removeEventListener("contextmenu",h,!0))}}},[e,r,i,a,o]);function d(){u.current=!0}return d}var ZXe=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function QXe(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_Y,e=C.forwardRef(function(r,i){var a=r.prefixCls,o=a===void 0?"rc-trigger-popup":a,s=r.children,l=r.action,c=l===void 0?"hover":l,u=r.showAction,d=r.hideAction,f=r.popupVisible,h=r.defaultPopupVisible,p=r.onPopupVisibleChange,g=r.afterPopupVisibleChange,m=r.mouseEnterDelay,v=r.mouseLeaveDelay,y=v===void 0?.1:v,b=r.focusDelay,x=r.blurDelay,_=r.mask,S=r.maskClosable,M=S===void 0?!0:S,E=r.getPopupContainer,T=r.forceRender,P=r.autoDestroy,A=r.destroyPopupOnHide,N=r.popup,O=r.popupClassName,I=r.popupStyle,D=r.popupPlacement,k=r.builtinPlacements,$=k===void 0?{}:k,B=r.popupAlign,F=r.zIndex,G=r.stretch,z=r.getPopupClassNameFromAlign,U=r.fresh,H=r.alignPoint,X=r.onPopupClick,V=r.onPopupAlign,W=r.arrow,K=r.popupMotion,q=r.maskMotion,Q=r.popupTransitionName,ie=r.popupAnimation,oe=r.maskTransitionName,ue=r.maskAnimation,le=r.className,me=r.getTriggerDOMNode,J=ir(r,ZXe),pe=P||A||!1,ve=C.useState(!1),Me=fe(ve,2),Re=Me[0],Xe=Me[1];Dr(function(){Xe(AY())},[]);var He=C.useRef({}),ee=C.useContext(Cie),Y=C.useMemo(function(){return{registerSubPopup:function(Ln,Vi){He.current[Ln]=Vi,ee==null||ee.registerSubPopup(Ln,Vi)}}},[ee]),ce=wY(),_e=C.useState(null),Ae=fe(_e,2),Ce=Ae[0],et=Ae[1],Ve=C.useRef(null),qe=Lr(function(gn){Ve.current=gn,kE(gn)&&Ce!==gn&&et(gn),ee==null||ee.registerSubPopup(ce,gn)}),dt=C.useState(null),Ge=fe(dt,2),We=Ge[0],Ze=Ge[1],Ie=C.useRef(null),De=Lr(function(gn){kE(gn)&&We!==gn&&(Ze(gn),Ie.current=gn)}),bt=C.Children.only(s),Ke=(bt==null?void 0:bt.props)||{},mt={},xe=Lr(function(gn){var Ln,Vi,za=We;return(za==null?void 0:za.contains(gn))||((Ln=IN(za))===null||Ln===void 0?void 0:Ln.host)===gn||gn===za||(Ce==null?void 0:Ce.contains(gn))||((Vi=IN(Ce))===null||Vi===void 0?void 0:Vi.host)===gn||gn===Ce||Object.values(He.current).some(function(la){return(la==null?void 0:la.contains(gn))||gn===la})}),vt=Tie(o,K,ie,Q),Ue=Tie(o,q,ue,oe),Le=C.useState(h||!1),Ye=fe(Le,2),nt=Ye[0],_t=Ye[1],Gt=f??nt,Ot=Lr(function(gn){f===void 0&&_t(gn)});Dr(function(){_t(f||!1)},[f]);var wt=C.useRef(Gt);wt.current=Gt;var Ft=C.useRef([]);Ft.current=[];var wn=Lr(function(gn){var Ln;Ot(gn),((Ln=Ft.current[Ft.current.length-1])!==null&&Ln!==void 0?Ln:Gt)!==gn&&(Ft.current.push(gn),p==null||p(gn))}),ye=C.useRef(),be=function(){clearTimeout(ye.current)},Se=function(Ln){var Vi=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;be(),Vi===0?wn(Ln):ye.current=setTimeout(function(){wn(Ln)},Vi*1e3)};C.useEffect(function(){return be},[]);var je=C.useState(!1),tt=fe(je,2),ft=tt[0],Tt=tt[1];Dr(function(gn){(!gn||Gt)&&Tt(!0)},[Gt]);var It=C.useState(null),Rt=fe(It,2),Lt=Rt[0],$t=Rt[1],en=C.useState(null),yn=fe(en,2),kn=yn[0],qn=yn[1],_n=function(Ln){qn([Ln.clientX,Ln.clientY])},te=YXe(Gt,Ce,H&&kn!==null?kn:We,D,$,B,V),de=fe(te,11),Te=de[0],Oe=de[1],Ee=de[2],ut=de[3],Dt=de[4],Bt=de[5],Zt=de[6],dn=de[7],kt=de[8],zt=de[9],En=de[10],Bn=HXe(Re,c,u,d),In=fe(Bn,2),zn=In[0],Rn=In[1],fn=zn.has("click"),Yr=Rn.has("click")||Rn.has("contextMenu"),Hn=Lr(function(){ft||En()}),Yi=function(){wt.current&&H&&Yr&&Se(!1)};XXe(Gt,We,Ce,Hn,Yi),Dr(function(){Hn()},[kn,D]),Dr(function(){Gt&&!($!=null&&$[D])&&Hn()},[JSON.stringify(B)]);var sa=C.useMemo(function(){var gn=qXe($,o,zt,H);return Be(gn,z==null?void 0:z(zt))},[zt,z,$,o,H]);C.useImperativeHandle(i,function(){return{nativeElement:Ie.current,popupElement:Ve.current,forceAlign:Hn}});var Cn=C.useState(0),Mn=fe(Cn,2),Un=Mn[0],rn=Mn[1],Wt=C.useState(0),Dn=fe(Wt,2),hr=Dn[0],Li=Dn[1],Ui=function(){if(G&&We){var Ln=We.getBoundingClientRect();rn(Ln.width),Li(Ln.height)}},_o=function(){Ui(),Hn()},Ms=function(Ln){Tt(!1),En(),g==null||g(Ln)},Yn=function(){return new Promise(function(Ln){Ui(),$t(function(){return Ln})})};Dr(function(){Lt&&(En(),Lt(),$t(null))},[Lt]);function xn(gn,Ln,Vi,za){mt[gn]=function(la){var n1;za==null||za(la),Se(Ln,Vi);for(var Mw=arguments.length,Ri=new Array(Mw>1?Mw-1:0),si=1;si<Mw;si++)Ri[si-1]=arguments[si];(n1=Ke[gn])===null||n1===void 0||n1.call.apply(n1,[Ke,la].concat(Ri))}}(fn||Yr)&&(mt.onClick=function(gn){var Ln;wt.current&&Yr?Se(!1):!wt.current&&fn&&(_n(gn),Se(!0));for(var Vi=arguments.length,za=new Array(Vi>1?Vi-1:0),la=1;la<Vi;la++)za[la-1]=arguments[la];(Ln=Ke.onClick)===null||Ln===void 0||Ln.call.apply(Ln,[Ke,gn].concat(za))});var er=KXe(Gt,Yr,We,Ce,_,M,xe,Se),Ar=zn.has("hover"),Xi=Rn.has("hover"),ad,hf;Ar&&(xn("onMouseEnter",!0,m,function(gn){_n(gn)}),xn("onPointerEnter",!0,m,function(gn){_n(gn)}),ad=function(Ln){(Gt||ft)&&Ce!==null&&Ce!==void 0&&Ce.contains(Ln.target)&&Se(!0,m)},H&&(mt.onMouseMove=function(gn){var Ln;(Ln=Ke.onMouseMove)===null||Ln===void 0||Ln.call(Ke,gn)})),Xi&&(xn("onMouseLeave",!1,y),xn("onPointerLeave",!1,y),hf=function(){Se(!1,y)}),zn.has("focus")&&xn("onFocus",!0,b),Rn.has("focus")&&xn("onBlur",!1,x),zn.has("contextMenu")&&(mt.onContextMenu=function(gn){var Ln;wt.current&&Rn.has("contextMenu")?Se(!1):(_n(gn),Se(!0)),gn.preventDefault();for(var Vi=arguments.length,za=new Array(Vi>1?Vi-1:0),la=1;la<Vi;la++)za[la-1]=arguments[la];(Ln=Ke.onContextMenu)===null||Ln===void 0||Ln.call.apply(Ln,[Ke,gn].concat(za))}),le&&(mt.className=Be(Ke.className,le));var pf=se(se({},Ke),mt),Ev={},Cv=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Cv.forEach(function(gn){J[gn]&&(Ev[gn]=function(){for(var Ln,Vi=arguments.length,za=new Array(Vi),la=0;la<Vi;la++)za[la]=arguments[la];(Ln=pf[gn])===null||Ln===void 0||Ln.call.apply(Ln,[pf].concat(za)),J[gn].apply(J,za)})});var Sw=C.cloneElement(bt,se(se({},pf),Ev)),Ew={x:Bt,y:Zt},Cw=W?se({},W!==!0?W:{}):null;return C.createElement(C.Fragment,null,C.createElement(ph,{disabled:!Gt,ref:De,onResize:_o},C.createElement(jXe,{getTriggerDOMNode:me},Sw)),C.createElement(Cie.Provider,{value:Y},C.createElement(GXe,{portal:n,ref:qe,prefixCls:o,popup:N,className:Be(O,sa),style:I,target:We,onMouseEnter:ad,onMouseLeave:hf,onPointerEnter:ad,zIndex:F,open:Gt,keepDom:ft,fresh:U,onClick:X,onPointerDownCapture:er,mask:_,motion:vt,maskMotion:Ue,onVisibleChanged:Ms,onPrepare:Yn,forceRender:T,autoDestroy:pe,getPopupContainer:E,align:zt,arrow:Cw,arrowPos:Ew,ready:Te,offsetX:Oe,offsetY:Ee,offsetR:ut,offsetB:Dt,onAlign:Hn,stretch:G,targetWidth:Un/dn,targetHeight:hr/kt})))});return e}const RY=QXe(_Y);var JXe=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],eKe=function(e){var r=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:r,adjustY:1},htmlRegion:"scroll"}}},tKe=function(e,r){var i=e.prefixCls;e.disabled;var a=e.visible,o=e.children,s=e.popupElement,l=e.animation,c=e.transitionName,u=e.dropdownStyle,d=e.dropdownClassName,f=e.direction,h=f===void 0?"ltr":f,p=e.placement,g=e.builtinPlacements,m=e.dropdownMatchSelectWidth,v=e.dropdownRender,y=e.dropdownAlign,b=e.getPopupContainer,x=e.empty,_=e.getTriggerDOMNode,S=e.onPopupVisibleChange,M=e.onPopupMouseEnter,E=ir(e,JXe),T="".concat(i,"-dropdown"),P=s;v&&(P=v(s));var A=C.useMemo(function(){return g||eKe(m)},[g,m]),N=l?"".concat(T,"-").concat(l):c,O=typeof m=="number",I=C.useMemo(function(){return O?null:m===!1?"minWidth":"width"},[m,O]),D=u;O&&(D=se(se({},D),{},{width:m}));var k=C.useRef(null);return C.useImperativeHandle(r,function(){return{getPopupElement:function(){var B;return(B=k.current)===null||B===void 0?void 0:B.popupElement}}}),C.createElement(RY,Mt({},E,{showAction:S?["click"]:[],hideAction:S?["click"]:[],popupPlacement:p||(h==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:A,prefixCls:T,popupTransitionName:N,popup:C.createElement("div",{onMouseEnter:M},P),ref:k,stretch:I,popupAlign:y,popupVisible:a,getPopupContainer:b,popupClassName:Be(d,re({},"".concat(T,"-empty"),x)),popupStyle:D,getTriggerDOMNode:_,onPopupVisibleChange:S}),o)},nKe=C.forwardRef(tKe);function Oie(n,e){var r=n.key,i;return"value"in n&&(i=n.value),r??(i!==void 0?i:"rc-index-key-".concat(e))}function nj(n){return typeof n<"u"&&!Number.isNaN(n)}function ewe(n,e){var r=n||{},i=r.label,a=r.value,o=r.options,s=r.groupLabel,l=i||(e?"children":"label");return{label:l,value:a||"value",options:o||"options",groupLabel:s||l}}function rKe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.fieldNames,i=e.childrenAsData,a=[],o=ewe(r,!1),s=o.label,l=o.value,c=o.options,u=o.groupLabel;function d(f,h){Array.isArray(f)&&f.forEach(function(p){if(h||!(c in p)){var g=p[l];a.push({key:Oie(p,a.length),groupOption:h,data:p,label:p[s],value:g})}else{var m=p[u];m===void 0&&i&&(m=p.label),a.push({key:Oie(p,a.length),group:!0,data:p,label:m}),d(p[c],!0)}})}return d(n,!1),a}function rj(n){var e=se({},n);return"props"in e||Object.defineProperty(e,"props",{get:function(){return Hs(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}var iKe=function(e,r,i){if(!r||!r.length)return null;var a=!1,o=function l(c,u){var d=dxe(u),f=d[0],h=d.slice(1);if(!f)return[c];var p=c.split(f);return a=a||p.length>1,p.reduce(function(g,m){return[].concat(ot(g),ot(l(m,h)))},[]).filter(Boolean)},s=o(e,r);return a?typeof i<"u"?s.slice(0,i):s:null},PY=C.createContext(null);function aKe(n){var e=n.visible,r=n.values;if(!e)return null;var i=50;return C.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(r.slice(0,i).map(function(a){var o=a.label,s=a.value;return["number","string"].includes(vn(o))?o:s}).join(", ")),r.length>i?", ...":null)}var oKe=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],sKe=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],ij=function(e){return e==="tags"||e==="multiple"},lKe=C.forwardRef(function(n,e){var r,i=n.id,a=n.prefixCls,o=n.className,s=n.showSearch,l=n.tagRender,c=n.direction,u=n.omitDomProps,d=n.displayValues,f=n.onDisplayValuesChange,h=n.emptyOptions,p=n.notFoundContent,g=p===void 0?"Not Found":p,m=n.onClear,v=n.mode,y=n.disabled,b=n.loading,x=n.getInputElement,_=n.getRawInputElement,S=n.open,M=n.defaultOpen,E=n.onDropdownVisibleChange,T=n.activeValue,P=n.onActiveValueChange,A=n.activeDescendantId,N=n.searchValue,O=n.autoClearSearchValue,I=n.onSearch,D=n.onSearchSplit,k=n.tokenSeparators,$=n.allowClear,B=n.prefix,F=n.suffixIcon,G=n.clearIcon,z=n.OptionList,U=n.animation,H=n.transitionName,X=n.dropdownStyle,V=n.dropdownClassName,W=n.dropdownMatchSelectWidth,K=n.dropdownRender,q=n.dropdownAlign,Q=n.placement,ie=n.builtinPlacements,oe=n.getPopupContainer,ue=n.showAction,le=ue===void 0?[]:ue,me=n.onFocus,J=n.onBlur,pe=n.onKeyUp,ve=n.onKeyDown,Me=n.onMouseDown,Re=ir(n,oKe),Xe=ij(v),He=(s!==void 0?s:Xe)||v==="combobox",ee=se({},Re);sKe.forEach(function(Cn){delete ee[Cn]}),u==null||u.forEach(function(Cn){delete ee[Cn]});var Y=C.useState(!1),ce=fe(Y,2),_e=ce[0],Ae=ce[1];C.useEffect(function(){Ae(AY())},[]);var Ce=C.useRef(null),et=C.useRef(null),Ve=C.useRef(null),qe=C.useRef(null),dt=C.useRef(null),Ge=C.useRef(!1),We=gXe(),Ze=fe(We,3),Ie=Ze[0],De=Ze[1],bt=Ze[2];C.useImperativeHandle(e,function(){var Cn,Mn;return{focus:(Cn=qe.current)===null||Cn===void 0?void 0:Cn.focus,blur:(Mn=qe.current)===null||Mn===void 0?void 0:Mn.blur,scrollTo:function(rn){var Wt;return(Wt=dt.current)===null||Wt===void 0?void 0:Wt.scrollTo(rn)},nativeElement:Ce.current||et.current}});var Ke=C.useMemo(function(){var Cn;if(v!=="combobox")return N;var Mn=(Cn=d[0])===null||Cn===void 0?void 0:Cn.value;return typeof Mn=="string"||typeof Mn=="number"?String(Mn):""},[N,v,d]),mt=v==="combobox"&&typeof x=="function"&&x()||null,xe=typeof _=="function"&&_(),vt=N_(et,xe==null||(r=xe.props)===null||r===void 0?void 0:r.ref),Ue=C.useState(!1),Le=fe(Ue,2),Ye=Le[0],nt=Le[1];Dr(function(){nt(!0)},[]);var _t=es(!1,{defaultValue:M,value:S}),Gt=fe(_t,2),Ot=Gt[0],wt=Gt[1],Ft=Ye?Ot:!1,wn=!g&&h;(y||wn&&Ft&&v==="combobox")&&(Ft=!1);var ye=wn?!1:Ft,be=C.useCallback(function(Cn){var Mn=Cn!==void 0?Cn:!Ft;y||(wt(Mn),Ft!==Mn&&(E==null||E(Mn)))},[y,Ft,wt,E]),Se=C.useMemo(function(){return(k||[]).some(function(Cn){return[`
`,`\r
`].includes(Cn)})},[k]),je=C.useContext(PY)||{},tt=je.maxCount,ft=je.rawValues,Tt=function(Mn,Un,rn){if(!(Xe&&nj(tt)&&(ft==null?void 0:ft.size)>=tt)){var Wt=!0,Dn=Mn;P==null||P(null);var hr=iKe(Mn,k,nj(tt)?tt-ft.size:void 0),Li=rn?null:hr;return v!=="combobox"&&Li&&(Dn="",D==null||D(Li),be(!1),Wt=!1),I&&Ke!==Dn&&I(Dn,{source:Un?"typing":"effect"}),Wt}},It=function(Mn){!Mn||!Mn.trim()||I(Mn,{source:"submit"})};C.useEffect(function(){!Ft&&!Xe&&v!=="combobox"&&Tt("",!1,!1)},[Ft]),C.useEffect(function(){Ot&&y&&wt(!1),y&&!Ge.current&&De(!1)},[y]);var Rt=q_e(),Lt=fe(Rt,2),$t=Lt[0],en=Lt[1],yn=C.useRef(!1),kn=function(Mn){var Un=$t(),rn=Mn.key,Wt=rn==="Enter";if(Wt&&(v!=="combobox"&&Mn.preventDefault(),Ft||be(!0)),en(!!Ke),rn==="Backspace"&&!Un&&Xe&&!Ke&&d.length){for(var Dn=ot(d),hr=null,Li=Dn.length-1;Li>=0;Li-=1){var Ui=Dn[Li];if(!Ui.disabled){Dn.splice(Li,1),hr=Ui;break}}hr&&f(Dn,{type:"remove",values:[hr]})}for(var _o=arguments.length,Ms=new Array(_o>1?_o-1:0),Yn=1;Yn<_o;Yn++)Ms[Yn-1]=arguments[Yn];if(Ft&&(!Wt||!yn.current)){var xn;Wt&&(yn.current=!0),(xn=dt.current)===null||xn===void 0||xn.onKeyDown.apply(xn,[Mn].concat(Ms))}ve==null||ve.apply(void 0,[Mn].concat(Ms))},qn=function(Mn){for(var Un=arguments.length,rn=new Array(Un>1?Un-1:0),Wt=1;Wt<Un;Wt++)rn[Wt-1]=arguments[Wt];if(Ft){var Dn;(Dn=dt.current)===null||Dn===void 0||Dn.onKeyUp.apply(Dn,[Mn].concat(rn))}Mn.key==="Enter"&&(yn.current=!1),pe==null||pe.apply(void 0,[Mn].concat(rn))},_n=function(Mn){var Un=d.filter(function(rn){return rn!==Mn});f(Un,{type:"remove",values:[Mn]})},te=function(){yn.current=!1},de=C.useRef(!1),Te=function(){De(!0),y||(me&&!de.current&&me.apply(void 0,arguments),le.includes("focus")&&be(!0)),de.current=!0},Oe=function(){Ge.current=!0,De(!1,function(){de.current=!1,Ge.current=!1,be(!1)}),!y&&(Ke&&(v==="tags"?I(Ke,{source:"submit"}):v==="multiple"&&I("",{source:"blur"})),J&&J.apply(void 0,arguments))},Ee=[];C.useEffect(function(){return function(){Ee.forEach(function(Cn){return clearTimeout(Cn)}),Ee.splice(0,Ee.length)}},[]);var ut=function(Mn){var Un,rn=Mn.target,Wt=(Un=Ve.current)===null||Un===void 0?void 0:Un.getPopupElement();if(Wt&&Wt.contains(rn)){var Dn=setTimeout(function(){var _o=Ee.indexOf(Dn);if(_o!==-1&&Ee.splice(_o,1),bt(),!_e&&!Wt.contains(document.activeElement)){var Ms;(Ms=qe.current)===null||Ms===void 0||Ms.focus()}});Ee.push(Dn)}for(var hr=arguments.length,Li=new Array(hr>1?hr-1:0),Ui=1;Ui<hr;Ui++)Li[Ui-1]=arguments[Ui];Me==null||Me.apply(void 0,[Mn].concat(Li))},Dt=C.useState({}),Bt=fe(Dt,2),Zt=Bt[1];function dn(){Zt({})}var kt;xe&&(kt=function(Mn){be(Mn)}),mXe(function(){var Cn;return[Ce.current,(Cn=Ve.current)===null||Cn===void 0?void 0:Cn.getPopupElement()]},ye,be,!!xe);var zt=C.useMemo(function(){return se(se({},n),{},{notFoundContent:g,open:Ft,triggerOpen:ye,id:i,showSearch:He,multiple:Xe,toggleOpen:be})},[n,g,ye,Ft,i,He,Xe,be]),En=!!F||b,Bn;En&&(Bn=C.createElement(D4,{className:Be("".concat(a,"-arrow"),re({},"".concat(a,"-arrow-loading"),b)),customizeIcon:F,customizeIconProps:{loading:b,searchValue:Ke,open:Ft,focused:Ie,showSearch:He}}));var In=function(){var Mn;m==null||m(),(Mn=qe.current)===null||Mn===void 0||Mn.focus(),f([],{type:"clear",values:d}),Tt("",!1,!1)},zn=hXe(a,In,d,$,G,y,Ke,v),Rn=zn.allowClear,fn=zn.clearIcon,Yr=C.createElement(z,{ref:dt}),Hn=Be(a,o,re(re(re(re(re(re(re(re(re(re({},"".concat(a,"-focused"),Ie),"".concat(a,"-multiple"),Xe),"".concat(a,"-single"),!Xe),"".concat(a,"-allow-clear"),$),"".concat(a,"-show-arrow"),En),"".concat(a,"-disabled"),y),"".concat(a,"-loading"),b),"".concat(a,"-open"),Ft),"".concat(a,"-customize-input"),mt),"".concat(a,"-show-search"),He)),Yi=C.createElement(nKe,{ref:Ve,disabled:y,prefixCls:a,visible:ye,popupElement:Yr,animation:U,transitionName:H,dropdownStyle:X,dropdownClassName:V,direction:c,dropdownMatchSelectWidth:W,dropdownRender:K,dropdownAlign:q,placement:Q,builtinPlacements:ie,getPopupContainer:oe,empty:h,getTriggerDOMNode:function(Mn){return et.current||Mn},onPopupVisibleChange:kt,onPopupMouseEnter:dn},xe?C.cloneElement(xe,{ref:vt}):C.createElement(BXe,Mt({},n,{domRef:et,prefixCls:a,inputElement:mt,ref:qe,id:i,prefix:B,showSearch:He,autoClearSearchValue:O,mode:v,activeDescendantId:A,tagRender:l,values:d,open:Ft,onToggleOpen:be,activeValue:T,searchValue:Ke,onSearch:Tt,onSearchSubmit:It,onRemove:_n,tokenWithEnter:Se,onInputBlur:te}))),sa;return xe?sa=Yi:sa=C.createElement("div",Mt({className:Hn},ee,{ref:Ce,onMouseDown:ut,onKeyDown:kn,onKeyUp:qn,onFocus:Te,onBlur:Oe}),C.createElement(aKe,{visible:Ie&&!Ft,values:d}),Yi,Bn,Rn&&fn),C.createElement(W_e.Provider,{value:zt},sa)}),NY=function(){return null};NY.isSelectOptGroup=!0;var OY=function(){return null};OY.isSelectOption=!0;var twe=C.forwardRef(function(n,e){var r=n.height,i=n.offsetY,a=n.offsetX,o=n.children,s=n.prefixCls,l=n.onInnerResize,c=n.innerProps,u=n.rtl,d=n.extra,f={},h={display:"flex",flexDirection:"column"};return i!==void 0&&(f={height:r,position:"relative",overflow:"hidden"},h=se(se({},h),{},re(re(re(re(re({transform:"translateY(".concat(i,"px)")},u?"marginRight":"marginLeft",-a),"position","absolute"),"left",0),"right",0),"top",0))),C.createElement("div",{style:f},C.createElement(ph,{onResize:function(g){var m=g.offsetHeight;m&&l&&l()}},C.createElement("div",Mt({style:h,className:Be(re({},"".concat(s,"-holder-inner"),s)),ref:e},c),o,d)))});twe.displayName="Filler";function cKe(n){var e=n.children,r=n.setRef,i=C.useCallback(function(a){r(a)},[]);return C.cloneElement(e,{ref:i})}function uKe(n,e,r,i,a,o,s,l){var c=l.getKey;return n.slice(e,r+1).map(function(u,d){var f=e+d,h=s(u,f,{style:{width:i},offsetX:a}),p=c(u);return C.createElement(cKe,{key:p,setRef:function(m){return o(u,m)}},h)})}function dKe(n,e,r){var i=n.length,a=e.length,o,s;if(i===0&&a===0)return null;i<a?(o=n,s=e):(o=e,s=n);var l={__EMPTY_ITEM__:!0};function c(g){return g!==void 0?r(g):l}for(var u=null,d=Math.abs(i-a)!==1,f=0;f<s.length;f+=1){var h=c(o[f]),p=c(s[f]);if(h!==p){u=f,d=d||h!==c(s[f+1]);break}}return u===null?null:{index:u,multiple:d}}function fKe(n,e,r){var i=C.useState(n),a=fe(i,2),o=a[0],s=a[1],l=C.useState(null),c=fe(l,2),u=c[0],d=c[1];return C.useEffect(function(){var f=dKe(o||[],n||[],e);(f==null?void 0:f.index)!==void 0&&d(n[f.index]),s(n)},[n]),[u]}var Iie=(typeof navigator>"u"?"undefined":vn(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const nwe=function(n,e,r,i){var a=C.useRef(!1),o=C.useRef(null);function s(){clearTimeout(o.current),a.current=!0,o.current=setTimeout(function(){a.current=!1},50)}var l=C.useRef({top:n,bottom:e,left:r,right:i});return l.current.top=n,l.current.bottom=e,l.current.left=r,l.current.right=i,function(c,u){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,f=c?u<0&&l.current.left||u>0&&l.current.right:u<0&&l.current.top||u>0&&l.current.bottom;return d&&f?(clearTimeout(o.current),a.current=!1):(!f||a.current)&&s(),!a.current&&f}};function hKe(n,e,r,i,a,o,s){var l=C.useRef(0),c=C.useRef(null),u=C.useRef(null),d=C.useRef(!1),f=nwe(e,r,i,a);function h(b,x){if(Gr.cancel(c.current),!f(!1,x)){var _=b;if(!_._virtualHandled)_._virtualHandled=!0;else return;l.current+=x,u.current=x,Iie||_.preventDefault(),c.current=Gr(function(){var S=d.current?10:1;s(l.current*S,!1),l.current=0})}}function p(b,x){s(x,!0),Iie||b.preventDefault()}var g=C.useRef(null),m=C.useRef(null);function v(b){if(n){Gr.cancel(m.current),m.current=Gr(function(){g.current=null},2);var x=b.deltaX,_=b.deltaY,S=b.shiftKey,M=x,E=_;(g.current==="sx"||!g.current&&S&&_&&!x)&&(M=_,E=0,g.current="sx");var T=Math.abs(M),P=Math.abs(E);g.current===null&&(g.current=o&&T>P?"x":"y"),g.current==="y"?h(b,E):p(b,M)}}function y(b){n&&(d.current=b.detail===u.current)}return[v,y]}function pKe(n,e,r,i){var a=C.useMemo(function(){return[new Map,[]]},[n,r.id,i]),o=fe(a,2),s=o[0],l=o[1],c=function(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d,h=s.get(d),p=s.get(f);if(h===void 0||p===void 0)for(var g=n.length,m=l.length;m<g;m+=1){var v,y=n[m],b=e(y);s.set(b,m);var x=(v=r.get(b))!==null&&v!==void 0?v:i;if(l[m]=(l[m-1]||0)+x,b===d&&(h=m),b===f&&(p=m),h!==void 0&&p!==void 0)break}return{top:l[h-1]||0,bottom:l[p]}};return c}var gKe=function(){function n(){st(this,n),re(this,"maps",void 0),re(this,"id",0),re(this,"diffKeys",new Set),this.maps=Object.create(null)}return lt(n,[{key:"set",value:function(r,i){this.maps[r]=i,this.id+=1,this.diffKeys.add(r)}},{key:"get",value:function(r){return this.maps[r]}},{key:"resetRecord",value:function(){this.diffKeys.clear()}},{key:"getRecord",value:function(){return this.diffKeys}}]),n}();function Die(n){var e=parseFloat(n);return isNaN(e)?0:e}function mKe(n,e,r){var i=C.useState(0),a=fe(i,2),o=a[0],s=a[1],l=C.useRef(new Map),c=C.useRef(new gKe),u=C.useRef(0);function d(){u.current+=1}function f(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;d();var g=function(){var y=!1;l.current.forEach(function(b,x){if(b&&b.offsetParent){var _=b.offsetHeight,S=getComputedStyle(b),M=S.marginTop,E=S.marginBottom,T=Die(M),P=Die(E),A=_+T+P;c.current.get(x)!==A&&(c.current.set(x,A),y=!0)}}),y&&s(function(b){return b+1})};if(p)g();else{u.current+=1;var m=u.current;Promise.resolve().then(function(){m===u.current&&g()})}}function h(p,g){var m=n(p);l.current.get(m),g?(l.current.set(m,g),f()):l.current.delete(m)}return C.useEffect(function(){return d},[]),[h,f,c.current,o]}var Lie=14/15;function vKe(n,e,r){var i=C.useRef(!1),a=C.useRef(0),o=C.useRef(0),s=C.useRef(null),l=C.useRef(null),c,u=function(p){if(i.current){var g=Math.ceil(p.touches[0].pageX),m=Math.ceil(p.touches[0].pageY),v=a.current-g,y=o.current-m,b=Math.abs(v)>Math.abs(y);b?a.current=g:o.current=m;var x=r(b,b?v:y,!1,p);x&&p.preventDefault(),clearInterval(l.current),x&&(l.current=setInterval(function(){b?v*=Lie:y*=Lie;var _=Math.floor(b?v:y);(!r(b,_,!0)||Math.abs(_)<=.1)&&clearInterval(l.current)},16))}},d=function(){i.current=!1,c()},f=function(p){c(),p.touches.length===1&&!i.current&&(i.current=!0,a.current=Math.ceil(p.touches[0].pageX),o.current=Math.ceil(p.touches[0].pageY),s.current=p.target,s.current.addEventListener("touchmove",u,{passive:!1}),s.current.addEventListener("touchend",d,{passive:!0}))};c=function(){s.current&&(s.current.removeEventListener("touchmove",u),s.current.removeEventListener("touchend",d))},Dr(function(){return n&&e.current.addEventListener("touchstart",f,{passive:!0}),function(){var h;(h=e.current)===null||h===void 0||h.removeEventListener("touchstart",f),c(),clearInterval(l.current)}},[n])}function kie(n){return Math.floor(Math.pow(n,.5))}function aj(n,e){var r="touches"in n?n.touches[0]:n;return r[e?"pageX":"pageY"]-window[e?"scrollX":"scrollY"]}function yKe(n,e,r){C.useEffect(function(){var i=e.current;if(n&&i){var a=!1,o,s,l=function(){Gr.cancel(o)},c=function h(){l(),o=Gr(function(){r(s),h()})},u=function(p){if(!(p.target.draggable||p.button!==0)){var g=p;g._virtualHandled||(g._virtualHandled=!0,a=!0)}},d=function(){a=!1,l()},f=function(p){if(a){var g=aj(p,!1),m=i.getBoundingClientRect(),v=m.top,y=m.bottom;if(g<=v){var b=v-g;s=-kie(b),c()}else if(g>=y){var x=g-y;s=kie(x),c()}else l()}};return i.addEventListener("mousedown",u),i.ownerDocument.addEventListener("mouseup",d),i.ownerDocument.addEventListener("mousemove",f),function(){i.removeEventListener("mousedown",u),i.ownerDocument.removeEventListener("mouseup",d),i.ownerDocument.removeEventListener("mousemove",f),l()}}},[n])}var bKe=10;function xKe(n,e,r,i,a,o,s,l){var c=C.useRef(),u=C.useState(null),d=fe(u,2),f=d[0],h=d[1];return Dr(function(){if(f&&f.times<bKe){if(!n.current){h(function(G){return se({},G)});return}o();var p=f.targetAlign,g=f.originAlign,m=f.index,v=f.offset,y=n.current.clientHeight,b=!1,x=p,_=null;if(y){for(var S=p||g,M=0,E=0,T=0,P=Math.min(e.length-1,m),A=0;A<=P;A+=1){var N=a(e[A]);E=M;var O=r.get(N);T=E+(O===void 0?i:O),M=T}for(var I=S==="top"?v:y-v,D=P;D>=0;D-=1){var k=a(e[D]),$=r.get(k);if($===void 0){b=!0;break}if(I-=$,I<=0)break}switch(S){case"top":_=E-v;break;case"bottom":_=T-y+v;break;default:{var B=n.current.scrollTop,F=B+y;E<B?x="top":T>F&&(x="bottom")}}_!==null&&s(_),_!==f.lastTop&&(b=!0)}b&&h(se(se({},f),{},{times:f.times+1,targetAlign:x,lastTop:_}))}},[f,n.current]),function(p){if(p==null){l();return}if(Gr.cancel(c.current),typeof p=="number")s(p);else if(p&&vn(p)==="object"){var g,m=p.align;"index"in p?g=p.index:g=e.findIndex(function(b){return a(b)===p.key});var v=p.offset,y=v===void 0?0:v;h({times:0,index:g,offset:y,originAlign:m})}}}var Fie=C.forwardRef(function(n,e){var r=n.prefixCls,i=n.rtl,a=n.scrollOffset,o=n.scrollRange,s=n.onStartMove,l=n.onStopMove,c=n.onScroll,u=n.horizontal,d=n.spinSize,f=n.containerSize,h=n.style,p=n.thumbStyle,g=n.showScrollBar,m=C.useState(!1),v=fe(m,2),y=v[0],b=v[1],x=C.useState(null),_=fe(x,2),S=_[0],M=_[1],E=C.useState(null),T=fe(E,2),P=T[0],A=T[1],N=!i,O=C.useRef(),I=C.useRef(),D=C.useState(g),k=fe(D,2),$=k[0],B=k[1],F=C.useRef(),G=function(){g===!0||g===!1||(clearTimeout(F.current),B(!0),F.current=setTimeout(function(){B(!1)},3e3))},z=o-f||0,U=f-d||0,H=C.useMemo(function(){if(a===0||z===0)return 0;var ue=a/z;return ue*U},[a,z,U]),X=function(le){le.stopPropagation(),le.preventDefault()},V=C.useRef({top:H,dragging:y,pageY:S,startTop:P});V.current={top:H,dragging:y,pageY:S,startTop:P};var W=function(le){b(!0),M(aj(le,u)),A(V.current.top),s(),le.stopPropagation(),le.preventDefault()};C.useEffect(function(){var ue=function(pe){pe.preventDefault()},le=O.current,me=I.current;return le.addEventListener("touchstart",ue,{passive:!1}),me.addEventListener("touchstart",W,{passive:!1}),function(){le.removeEventListener("touchstart",ue),me.removeEventListener("touchstart",W)}},[]);var K=C.useRef();K.current=z;var q=C.useRef();q.current=U,C.useEffect(function(){if(y){var ue,le=function(pe){var ve=V.current,Me=ve.dragging,Re=ve.pageY,Xe=ve.startTop;Gr.cancel(ue);var He=O.current.getBoundingClientRect(),ee=f/(u?He.width:He.height);if(Me){var Y=(aj(pe,u)-Re)*ee,ce=Xe;!N&&u?ce-=Y:ce+=Y;var _e=K.current,Ae=q.current,Ce=Ae?ce/Ae:0,et=Math.ceil(Ce*_e);et=Math.max(et,0),et=Math.min(et,_e),ue=Gr(function(){c(et,u)})}},me=function(){b(!1),l()};return window.addEventListener("mousemove",le,{passive:!0}),window.addEventListener("touchmove",le,{passive:!0}),window.addEventListener("mouseup",me,{passive:!0}),window.addEventListener("touchend",me,{passive:!0}),function(){window.removeEventListener("mousemove",le),window.removeEventListener("touchmove",le),window.removeEventListener("mouseup",me),window.removeEventListener("touchend",me),Gr.cancel(ue)}}},[y]),C.useEffect(function(){return G(),function(){clearTimeout(F.current)}},[a]),C.useImperativeHandle(e,function(){return{delayHidden:G}});var Q="".concat(r,"-scrollbar"),ie={position:"absolute",visibility:$?null:"hidden"},oe={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return u?(ie.height=8,ie.left=0,ie.right=0,ie.bottom=0,oe.height="100%",oe.width=d,N?oe.left=H:oe.right=H):(ie.width=8,ie.top=0,ie.bottom=0,N?ie.right=0:ie.left=0,oe.width="100%",oe.height=d,oe.top=H),C.createElement("div",{ref:O,className:Be(Q,re(re(re({},"".concat(Q,"-horizontal"),u),"".concat(Q,"-vertical"),!u),"".concat(Q,"-visible"),$)),style:se(se({},ie),h),onMouseDown:X,onMouseMove:G},C.createElement("div",{ref:I,className:Be("".concat(Q,"-thumb"),re({},"".concat(Q,"-thumb-moving"),y)),style:se(se({},oe),p),onMouseDown:W}))}),_Ke=20;function $ie(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=n/e*n;return isNaN(r)&&(r=0),r=Math.max(r,_Ke),Math.floor(r)}var wKe=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles","showScrollBar"],SKe=[],EKe={overflowY:"auto",overflowAnchor:"none"};function CKe(n,e){var r=n.prefixCls,i=r===void 0?"rc-virtual-list":r,a=n.className,o=n.height,s=n.itemHeight,l=n.fullHeight,c=l===void 0?!0:l,u=n.style,d=n.data,f=n.children,h=n.itemKey,p=n.virtual,g=n.direction,m=n.scrollWidth,v=n.component,y=v===void 0?"div":v,b=n.onScroll,x=n.onVirtualScroll,_=n.onVisibleChange,S=n.innerProps,M=n.extraRender,E=n.styles,T=n.showScrollBar,P=T===void 0?"optional":T,A=ir(n,wKe),N=C.useCallback(function(de){return typeof h=="function"?h(de):de==null?void 0:de[h]},[h]),O=mKe(N),I=fe(O,4),D=I[0],k=I[1],$=I[2],B=I[3],F=!!(p!==!1&&o&&s),G=C.useMemo(function(){return Object.values($.maps).reduce(function(de,Te){return de+Te},0)},[$.id,$.maps]),z=F&&d&&(Math.max(s*d.length,G)>o||!!m),U=g==="rtl",H=Be(i,re({},"".concat(i,"-rtl"),U),a),X=d||SKe,V=C.useRef(),W=C.useRef(),K=C.useRef(),q=C.useState(0),Q=fe(q,2),ie=Q[0],oe=Q[1],ue=C.useState(0),le=fe(ue,2),me=le[0],J=le[1],pe=C.useState(!1),ve=fe(pe,2),Me=ve[0],Re=ve[1],Xe=function(){Re(!0)},He=function(){Re(!1)},ee={getKey:N};function Y(de){oe(function(Te){var Oe;typeof de=="function"?Oe=de(Te):Oe=de;var Ee=nt(Oe);return V.current.scrollTop=Ee,Ee})}var ce=C.useRef({start:0,end:X.length}),_e=C.useRef(),Ae=fKe(X,N),Ce=fe(Ae,1),et=Ce[0];_e.current=et;var Ve=C.useMemo(function(){if(!F)return{scrollHeight:void 0,start:0,end:X.length-1,offset:void 0};if(!z){var de;return{scrollHeight:((de=W.current)===null||de===void 0?void 0:de.offsetHeight)||0,start:0,end:X.length-1,offset:void 0}}for(var Te=0,Oe,Ee,ut,Dt=X.length,Bt=0;Bt<Dt;Bt+=1){var Zt=X[Bt],dn=N(Zt),kt=$.get(dn),zt=Te+(kt===void 0?s:kt);zt>=ie&&Oe===void 0&&(Oe=Bt,Ee=Te),zt>ie+o&&ut===void 0&&(ut=Bt),Te=zt}return Oe===void 0&&(Oe=0,Ee=0,ut=Math.ceil(o/s)),ut===void 0&&(ut=X.length-1),ut=Math.min(ut+1,X.length-1),{scrollHeight:Te,start:Oe,end:ut,offset:Ee}},[z,F,ie,X,B,o]),qe=Ve.scrollHeight,dt=Ve.start,Ge=Ve.end,We=Ve.offset;ce.current.start=dt,ce.current.end=Ge,C.useLayoutEffect(function(){var de=$.getRecord();if(de.size===1){var Te=Array.from(de)[0],Oe=X[dt];if(Oe){var Ee=N(Oe);if(Ee===Te){var ut=$.get(Te),Dt=ut-s;Y(function(Bt){return Bt+Dt})}}}$.resetRecord()},[qe]);var Ze=C.useState({width:0,height:o}),Ie=fe(Ze,2),De=Ie[0],bt=Ie[1],Ke=function(Te){bt({width:Te.offsetWidth,height:Te.offsetHeight})},mt=C.useRef(),xe=C.useRef(),vt=C.useMemo(function(){return $ie(De.width,m)},[De.width,m]),Ue=C.useMemo(function(){return $ie(De.height,qe)},[De.height,qe]),Le=qe-o,Ye=C.useRef(Le);Ye.current=Le;function nt(de){var Te=de;return Number.isNaN(Ye.current)||(Te=Math.min(Te,Ye.current)),Te=Math.max(Te,0),Te}var _t=ie<=0,Gt=ie>=Le,Ot=me<=0,wt=me>=m,Ft=nwe(_t,Gt,Ot,wt),wn=function(){return{x:U?-me:me,y:ie}},ye=C.useRef(wn()),be=Lr(function(de){if(x){var Te=se(se({},wn()),de);(ye.current.x!==Te.x||ye.current.y!==Te.y)&&(x(Te),ye.current=Te)}});function Se(de,Te){var Oe=de;Te?($m.flushSync(function(){J(Oe)}),be()):Y(Oe)}function je(de){var Te=de.currentTarget.scrollTop;Te!==ie&&Y(Te),b==null||b(de),be()}var tt=function(Te){var Oe=Te,Ee=m?m-De.width:0;return Oe=Math.max(Oe,0),Oe=Math.min(Oe,Ee),Oe},ft=Lr(function(de,Te){Te?($m.flushSync(function(){J(function(Oe){var Ee=Oe+(U?-de:de);return tt(Ee)})}),be()):Y(function(Oe){var Ee=Oe+de;return Ee})}),Tt=hKe(F,_t,Gt,Ot,wt,!!m,ft),It=fe(Tt,2),Rt=It[0],Lt=It[1];vKe(F,V,function(de,Te,Oe,Ee){var ut=Ee;return Ft(de,Te,Oe)?!1:!ut||!ut._virtualHandled?(ut&&(ut._virtualHandled=!0),Rt({preventDefault:function(){},deltaX:de?Te:0,deltaY:de?0:Te}),!0):!1}),yKe(z,V,function(de){Y(function(Te){return Te+de})}),Dr(function(){function de(Oe){var Ee=_t&&Oe.detail<0,ut=Gt&&Oe.detail>0;F&&!Ee&&!ut&&Oe.preventDefault()}var Te=V.current;return Te.addEventListener("wheel",Rt,{passive:!1}),Te.addEventListener("DOMMouseScroll",Lt,{passive:!0}),Te.addEventListener("MozMousePixelScroll",de,{passive:!1}),function(){Te.removeEventListener("wheel",Rt),Te.removeEventListener("DOMMouseScroll",Lt),Te.removeEventListener("MozMousePixelScroll",de)}},[F,_t,Gt]),Dr(function(){if(m){var de=tt(me);J(de),be({x:de})}},[De.width,m]);var $t=function(){var Te,Oe;(Te=mt.current)===null||Te===void 0||Te.delayHidden(),(Oe=xe.current)===null||Oe===void 0||Oe.delayHidden()},en=xKe(V,X,$,s,N,function(){return k(!0)},Y,$t);C.useImperativeHandle(e,function(){return{nativeElement:K.current,getScrollInfo:wn,scrollTo:function(Te){function Oe(Ee){return Ee&&vn(Ee)==="object"&&("left"in Ee||"top"in Ee)}Oe(Te)?(Te.left!==void 0&&J(tt(Te.left)),en(Te.top)):en(Te)}}}),Dr(function(){if(_){var de=X.slice(dt,Ge+1);_(de,X)}},[dt,Ge,X]);var yn=pKe(X,N,$,s),kn=M==null?void 0:M({start:dt,end:Ge,virtual:z,offsetX:me,offsetY:We,rtl:U,getSize:yn}),qn=uKe(X,dt,Ge,m,me,D,f,ee),_n=null;o&&(_n=se(re({},c?"height":"maxHeight",o),EKe),F&&(_n.overflowY="hidden",m&&(_n.overflowX="hidden"),Me&&(_n.pointerEvents="none")));var te={};return U&&(te.dir="rtl"),C.createElement("div",Mt({ref:K,style:se(se({},u),{},{position:"relative"}),className:H},te,A),C.createElement(ph,{onResize:Ke},C.createElement(y,{className:"".concat(i,"-holder"),style:_n,ref:V,onScroll:je,onMouseEnter:$t},C.createElement(twe,{prefixCls:i,height:qe,offsetX:me,offsetY:We,scrollWidth:m,onInnerResize:k,ref:W,innerProps:S,rtl:U,extra:kn},qn))),z&&qe>o&&C.createElement(Fie,{ref:mt,prefixCls:i,scrollOffset:ie,scrollRange:qe,rtl:U,onScroll:Se,onStartMove:Xe,onStopMove:He,spinSize:Ue,containerSize:De.height,style:E==null?void 0:E.verticalScrollBar,thumbStyle:E==null?void 0:E.verticalScrollBarThumb,showScrollBar:P}),z&&m>De.width&&C.createElement(Fie,{ref:xe,prefixCls:i,scrollOffset:me,scrollRange:m,rtl:U,onScroll:Se,onStartMove:Xe,onStopMove:He,spinSize:vt,containerSize:De.width,horizontal:!0,style:E==null?void 0:E.horizontalScrollBar,thumbStyle:E==null?void 0:E.horizontalScrollBarThumb,showScrollBar:P}))}var rwe=C.forwardRef(CKe);rwe.displayName="List";function MKe(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var TKe=["disabled","title","children","style","className"];function Bie(n){return typeof n=="string"||typeof n=="number"}var AKe=function(e,r){var i=pXe(),a=i.prefixCls,o=i.id,s=i.open,l=i.multiple,c=i.mode,u=i.searchValue,d=i.toggleOpen,f=i.notFoundContent,h=i.onPopupScroll,p=C.useContext(PY),g=p.maxCount,m=p.flattenOptions,v=p.onActiveValue,y=p.defaultActiveFirstOption,b=p.onSelect,x=p.menuItemSelectedIcon,_=p.rawValues,S=p.fieldNames,M=p.virtual,E=p.direction,T=p.listHeight,P=p.listItemHeight,A=p.optionRender,N="".concat(a,"-item"),O=u4(function(){return m},[s,m],function(ue,le){return le[0]&&ue[1]!==le[1]}),I=C.useRef(null),D=C.useMemo(function(){return l&&nj(g)&&(_==null?void 0:_.size)>=g},[l,g,_==null?void 0:_.size]),k=function(le){le.preventDefault()},$=function(le){var me;(me=I.current)===null||me===void 0||me.scrollTo(typeof le=="number"?{index:le}:le)},B=C.useCallback(function(ue){return c==="combobox"?!1:_.has(ue)},[c,ot(_).toString(),_.size]),F=function(le){for(var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,J=O.length,pe=0;pe<J;pe+=1){var ve=(le+pe*me+J)%J,Me=O[ve]||{},Re=Me.group,Xe=Me.data;if(!Re&&!(Xe!=null&&Xe.disabled)&&(B(Xe.value)||!D))return ve}return-1},G=C.useState(function(){return F(0)}),z=fe(G,2),U=z[0],H=z[1],X=function(le){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;H(le);var J={source:me?"keyboard":"mouse"},pe=O[le];if(!pe){v(null,-1,J);return}v(pe.value,le,J)};C.useEffect(function(){X(y!==!1?F(0):-1)},[O.length,u]);var V=C.useCallback(function(ue){return c==="combobox"?String(ue).toLowerCase()===u.toLowerCase():_.has(ue)},[c,u,ot(_).toString(),_.size]);C.useEffect(function(){var ue=setTimeout(function(){if(!l&&s&&_.size===1){var me=Array.from(_)[0],J=O.findIndex(function(pe){var ve=pe.data;return ve.value===me});J!==-1&&(X(J),$(J))}});if(s){var le;(le=I.current)===null||le===void 0||le.scrollTo(void 0)}return function(){return clearTimeout(ue)}},[s,u]);var W=function(le){le!==void 0&&b(le,{selected:!_.has(le)}),l||d(!1)};if(C.useImperativeHandle(r,function(){return{onKeyDown:function(le){var me=le.which,J=le.ctrlKey;switch(me){case Xn.N:case Xn.P:case Xn.UP:case Xn.DOWN:{var pe=0;if(me===Xn.UP?pe=-1:me===Xn.DOWN?pe=1:MKe()&&J&&(me===Xn.N?pe=1:me===Xn.P&&(pe=-1)),pe!==0){var ve=F(U+pe,pe);$(ve),X(ve,!0)}break}case Xn.TAB:case Xn.ENTER:{var Me,Re=O[U];Re&&!(Re!=null&&(Me=Re.data)!==null&&Me!==void 0&&Me.disabled)&&!D?W(Re.value):W(void 0),s&&le.preventDefault();break}case Xn.ESC:d(!1),s&&le.stopPropagation()}},onKeyUp:function(){},scrollTo:function(le){$(le)}}}),O.length===0)return C.createElement("div",{role:"listbox",id:"".concat(o,"_list"),className:"".concat(N,"-empty"),onMouseDown:k},f);var K=Object.keys(S).map(function(ue){return S[ue]}),q=function(le){return le.label};function Q(ue,le){var me=ue.group;return{role:me?"presentation":"option",id:"".concat(o,"_list_").concat(le)}}var ie=function(le){var me=O[le];if(!me)return null;var J=me.data||{},pe=J.value,ve=me.group,Me=Hu(J,!0),Re=q(me);return me?C.createElement("div",Mt({"aria-label":typeof Re=="string"&&!ve?Re:null},Me,{key:le},Q(me,le),{"aria-selected":V(pe)}),pe):null},oe={role:"listbox",id:"".concat(o,"_list")};return C.createElement(C.Fragment,null,M&&C.createElement("div",Mt({},oe,{style:{height:0,width:0,overflow:"hidden"}}),ie(U-1),ie(U),ie(U+1)),C.createElement(rwe,{itemKey:"key",ref:I,data:O,height:T,itemHeight:P,fullHeight:!1,onMouseDown:k,onScroll:h,virtual:M,direction:E,innerProps:M?null:oe},function(ue,le){var me=ue.group,J=ue.groupOption,pe=ue.data,ve=ue.label,Me=ue.value,Re=pe.key;if(me){var Xe,He=(Xe=pe.title)!==null&&Xe!==void 0?Xe:Bie(ve)?ve.toString():void 0;return C.createElement("div",{className:Be(N,"".concat(N,"-group"),pe.className),title:He},ve!==void 0?ve:Re)}var ee=pe.disabled,Y=pe.title;pe.children;var ce=pe.style,_e=pe.className,Ae=ir(pe,TKe),Ce=Qu(Ae,K),et=B(Me),Ve=ee||!et&&D,qe="".concat(N,"-option"),dt=Be(N,qe,_e,re(re(re(re({},"".concat(qe,"-grouped"),J),"".concat(qe,"-active"),U===le&&!Ve),"".concat(qe,"-disabled"),Ve),"".concat(qe,"-selected"),et)),Ge=q(ue),We=!x||typeof x=="function"||et,Ze=typeof Ge=="number"?Ge:Ge||Me,Ie=Bie(Ze)?Ze.toString():void 0;return Y!==void 0&&(Ie=Y),C.createElement("div",Mt({},Hu(Ce),M?{}:Q(ue,le),{"aria-selected":V(Me),className:dt,title:Ie,onMouseMove:function(){U===le||Ve||X(le)},onClick:function(){Ve||W(Me)},style:ce}),C.createElement("div",{className:"".concat(qe,"-content")},typeof A=="function"?A(ue,{index:le}):Ze),C.isValidElement(x)||et,We&&C.createElement(D4,{className:"".concat(N,"-option-state"),customizeIcon:x,customizeIconProps:{value:Me,disabled:Ve,isSelected:et}},et?"✓":null))}))},RKe=C.forwardRef(AKe);const PKe=function(n,e){var r=C.useRef({values:new Map,options:new Map}),i=C.useMemo(function(){var o=r.current,s=o.values,l=o.options,c=n.map(function(f){if(f.label===void 0){var h;return se(se({},f),{},{label:(h=s.get(f.value))===null||h===void 0?void 0:h.label})}return f}),u=new Map,d=new Map;return c.forEach(function(f){u.set(f.value,f),d.set(f.value,e.get(f.value)||l.get(f.value))}),r.current.values=u,r.current.options=d,c},[n,e]),a=C.useCallback(function(o){return e.get(o)||r.current.options.get(o)},[e]);return[i,a]};function U5(n,e){return Q_e(n).join("").toUpperCase().includes(e)}const NKe=function(n,e,r,i,a){return C.useMemo(function(){if(!r||i===!1)return n;var o=e.options,s=e.label,l=e.value,c=[],u=typeof i=="function",d=r.toUpperCase(),f=u?i:function(p,g){return a?U5(g[a],d):g[o]?U5(g[s!=="children"?s:"label"],d):U5(g[l],d)},h=u?function(p){return rj(p)}:function(p){return p};return n.forEach(function(p){if(p[o]){var g=f(r,h(p));if(g)c.push(p);else{var m=p[o].filter(function(v){return f(r,h(v))});m.length&&c.push(se(se({},p),{},re({},o,m)))}return}f(r,h(p))&&c.push(p)}),c},[n,i,a,r,e])};var zie=0,OKe=yl();function IKe(){var n;return OKe?(n=zie,zie+=1):n="TEST_OR_SSR",n}function DKe(n){var e=C.useState(),r=fe(e,2),i=r[0],a=r[1];return C.useEffect(function(){a("rc_select_".concat(IKe()))},[]),n||i}var LKe=["children","value"],kKe=["children"];function FKe(n){var e=n,r=e.key,i=e.props,a=i.children,o=i.value,s=ir(i,LKe);return se({key:r,value:o!==void 0?o:r,children:a},s)}function iwe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Bm(n).map(function(r,i){if(!C.isValidElement(r)||!r.type)return null;var a=r,o=a.type.isSelectOptGroup,s=a.key,l=a.props,c=l.children,u=ir(l,kKe);return e||!o?FKe(r):se(se({key:"__RC_SELECT_GRP__".concat(s===null?i:s,"__"),label:s},u),{},{options:iwe(c)})}).filter(function(r){return r})}var $Ke=function(e,r,i,a,o){return C.useMemo(function(){var s=e,l=!e;l&&(s=iwe(r));var c=new Map,u=new Map,d=function(p,g,m){m&&typeof m=="string"&&p.set(g[m],g)},f=function h(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,m=0;m<p.length;m+=1){var v=p[m];!v[i.options]||g?(c.set(v[i.value],v),d(u,v,i.label),d(u,v,a),d(u,v,o)):h(v[i.options],!0)}};return f(s),{options:s,valueOptions:c,labelOptions:u}},[e,r,i,a,o])};function Uie(n){var e=C.useRef();e.current=n;var r=C.useCallback(function(){return e.current.apply(e,arguments)},[]);return r}var BKe=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],zKe=["inputValue"];function UKe(n){return!n||vn(n)!=="object"}var VKe=C.forwardRef(function(n,e){var r=n.id,i=n.mode,a=n.prefixCls,o=a===void 0?"rc-select":a,s=n.backfill,l=n.fieldNames,c=n.inputValue,u=n.searchValue,d=n.onSearch,f=n.autoClearSearchValue,h=f===void 0?!0:f,p=n.onSelect,g=n.onDeselect,m=n.dropdownMatchSelectWidth,v=m===void 0?!0:m,y=n.filterOption,b=n.filterSort,x=n.optionFilterProp,_=n.optionLabelProp,S=n.options,M=n.optionRender,E=n.children,T=n.defaultActiveFirstOption,P=n.menuItemSelectedIcon,A=n.virtual,N=n.direction,O=n.listHeight,I=O===void 0?200:O,D=n.listItemHeight,k=D===void 0?20:D,$=n.labelRender,B=n.value,F=n.defaultValue,G=n.labelInValue,z=n.onChange,U=n.maxCount,H=ir(n,BKe),X=DKe(r),V=ij(i),W=!!(!S&&E),K=C.useMemo(function(){return y===void 0&&i==="combobox"?!1:y},[y,i]),q=C.useMemo(function(){return ewe(l,W)},[JSON.stringify(l),W]),Q=es("",{value:u!==void 0?u:c,postState:function(Se){return Se||""}}),ie=fe(Q,2),oe=ie[0],ue=ie[1],le=$Ke(S,E,q,x,_),me=le.valueOptions,J=le.labelOptions,pe=le.options,ve=C.useCallback(function(be){var Se=Q_e(be);return Se.map(function(je){var tt,ft,Tt,It,Rt;if(UKe(je))tt=je;else{var Lt;Tt=je.key,ft=je.label,tt=(Lt=je.value)!==null&&Lt!==void 0?Lt:Tt}var $t=me.get(tt);if($t){var en;ft===void 0&&(ft=$t==null?void 0:$t[_||q.label]),Tt===void 0&&(Tt=(en=$t==null?void 0:$t.key)!==null&&en!==void 0?en:tt),It=$t==null?void 0:$t.disabled,Rt=$t==null?void 0:$t.title}return{label:ft,value:tt,key:Tt,disabled:It,title:Rt}})},[q,_,me]),Me=es(F,{value:B}),Re=fe(Me,2),Xe=Re[0],He=Re[1],ee=C.useMemo(function(){var be,Se=V&&Xe===null?[]:Xe,je=ve(Se);return i==="combobox"&&IXe((be=je[0])===null||be===void 0?void 0:be.value)?[]:je},[Xe,ve,i,V]),Y=PKe(ee,me),ce=fe(Y,2),_e=ce[0],Ae=ce[1],Ce=C.useMemo(function(){if(!i&&_e.length===1){var be=_e[0];if(be.value===null&&(be.label===null||be.label===void 0))return[]}return _e.map(function(Se){var je;return se(se({},Se),{},{label:(je=typeof $=="function"?$(Se):Se.label)!==null&&je!==void 0?je:Se.value})})},[i,_e,$]),et=C.useMemo(function(){return new Set(_e.map(function(be){return be.value}))},[_e]);C.useEffect(function(){if(i==="combobox"){var be,Se=(be=_e[0])===null||be===void 0?void 0:be.value;ue(OXe(Se)?String(Se):"")}},[_e]);var Ve=Uie(function(be,Se){var je=Se??be;return re(re({},q.value,be),q.label,je)}),qe=C.useMemo(function(){if(i!=="tags")return pe;var be=ot(pe),Se=function(tt){return me.has(tt)};return ot(_e).sort(function(je,tt){return je.value<tt.value?-1:1}).forEach(function(je){var tt=je.value;Se(tt)||be.push(Ve(tt,je.label))}),be},[Ve,pe,me,_e,i]),dt=NKe(qe,q,oe,K,x),Ge=C.useMemo(function(){return i!=="tags"||!oe||dt.some(function(be){return be[x||"value"]===oe})||dt.some(function(be){return be[q.value]===oe})?dt:[Ve(oe)].concat(ot(dt))},[Ve,x,i,dt,oe,q]),We=function be(Se){var je=ot(Se).sort(function(tt,ft){return b(tt,ft,{searchValue:oe})});return je.map(function(tt){return Array.isArray(tt.options)?se(se({},tt),{},{options:tt.options.length>0?be(tt.options):tt.options}):tt})},Ze=C.useMemo(function(){return b?We(Ge):Ge},[Ge,b,oe]),Ie=C.useMemo(function(){return rKe(Ze,{fieldNames:q,childrenAsData:W})},[Ze,q,W]),De=function(Se){var je=ve(Se);if(He(je),z&&(je.length!==_e.length||je.some(function(Tt,It){var Rt;return((Rt=_e[It])===null||Rt===void 0?void 0:Rt.value)!==(Tt==null?void 0:Tt.value)}))){var tt=G?je:je.map(function(Tt){return Tt.value}),ft=je.map(function(Tt){return rj(Ae(Tt.value))});z(V?tt:tt[0],V?ft:ft[0])}},bt=C.useState(null),Ke=fe(bt,2),mt=Ke[0],xe=Ke[1],vt=C.useState(0),Ue=fe(vt,2),Le=Ue[0],Ye=Ue[1],nt=T!==void 0?T:i!=="combobox",_t=C.useCallback(function(be,Se){var je=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},tt=je.source,ft=tt===void 0?"keyboard":tt;Ye(Se),s&&i==="combobox"&&be!==null&&ft==="keyboard"&&xe(String(be))},[s,i]),Gt=function(Se,je,tt){var ft=function(){var _n,te=Ae(Se);return[G?{label:te==null?void 0:te[q.label],value:Se,key:(_n=te==null?void 0:te.key)!==null&&_n!==void 0?_n:Se}:Se,rj(te)]};if(je&&p){var Tt=ft(),It=fe(Tt,2),Rt=It[0],Lt=It[1];p(Rt,Lt)}else if(!je&&g&&tt!=="clear"){var $t=ft(),en=fe($t,2),yn=en[0],kn=en[1];g(yn,kn)}},Ot=Uie(function(be,Se){var je,tt=V?Se.selected:!0;tt?je=V?[].concat(ot(_e),[be]):[be]:je=_e.filter(function(ft){return ft.value!==be}),De(je),Gt(be,tt),i==="combobox"?xe(""):(!ij||h)&&(ue(""),xe(""))}),wt=function(Se,je){De(Se);var tt=je.type,ft=je.values;(tt==="remove"||tt==="clear")&&ft.forEach(function(Tt){Gt(Tt.value,!1,tt)})},Ft=function(Se,je){if(ue(Se),xe(null),je.source==="submit"){var tt=(Se||"").trim();if(tt){var ft=Array.from(new Set([].concat(ot(et),[tt])));De(ft),Gt(tt,!0),ue("")}return}je.source!=="blur"&&(i==="combobox"&&De(Se),d==null||d(Se))},wn=function(Se){var je=Se;i!=="tags"&&(je=Se.map(function(ft){var Tt=J.get(ft);return Tt==null?void 0:Tt.value}).filter(function(ft){return ft!==void 0}));var tt=Array.from(new Set([].concat(ot(et),ot(je))));De(tt),tt.forEach(function(ft){Gt(ft,!0)})},ye=C.useMemo(function(){var be=A!==!1&&v!==!1;return se(se({},le),{},{flattenOptions:Ie,onActiveValue:_t,defaultActiveFirstOption:nt,onSelect:Ot,menuItemSelectedIcon:P,rawValues:et,fieldNames:q,virtual:be,direction:N,listHeight:I,listItemHeight:k,childrenAsData:W,maxCount:U,optionRender:M})},[U,le,Ie,_t,nt,Ot,P,et,q,A,v,N,I,k,W,M]);return C.createElement(PY.Provider,{value:ye},C.createElement(lKe,Mt({},H,{id:X,prefixCls:o,ref:e,omitDomProps:zKe,mode:i,displayValues:Ce,onDisplayValuesChange:wt,direction:N,searchValue:oe,onSearch:Ft,autoClearSearchValue:h,onSearchSplit:wn,dropdownMatchSelectWidth:v,OptionList:RKe,emptyOptions:!Ie.length,activeValue:mt,activeDescendantId:"".concat(X,"_list_").concat(Le)})))}),IY=VKe;IY.Option=OY;IY.OptGroup=NY;function jm(n,e,r){return Be({[`${n}-status-success`]:e==="success",[`${n}-status-warning`]:e==="warning",[`${n}-status-error`]:e==="error",[`${n}-status-validating`]:e==="validating",[`${n}-has-feedback`]:r})}const ky=(n,e)=>e||n,GKe=()=>{const[,n]=Zc(),[e]=Wp("Empty"),i=new Zr(n.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return C.createElement("svg",{style:i,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},C.createElement("title",null,(e==null?void 0:e.description)||"Empty"),C.createElement("g",{fill:"none",fillRule:"evenodd"},C.createElement("g",{transform:"translate(24 31.67)"},C.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),C.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),C.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),C.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),C.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),C.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),C.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},C.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),C.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},jKe=()=>{const[,n]=Zc(),[e]=Wp("Empty"),{colorFill:r,colorFillTertiary:i,colorFillQuaternary:a,colorBgContainer:o}=n,{borderColor:s,shadowColor:l,contentColor:c}=C.useMemo(()=>({borderColor:new Zr(r).onBackground(o).toHexString(),shadowColor:new Zr(i).onBackground(o).toHexString(),contentColor:new Zr(a).onBackground(o).toHexString()}),[r,i,a,o]);return C.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},C.createElement("title",null,(e==null?void 0:e.description)||"Empty"),C.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},C.createElement("ellipse",{fill:l,cx:"32",cy:"33",rx:"32",ry:"7"}),C.createElement("g",{fillRule:"nonzero",stroke:s},C.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),C.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:c}))))},HKe=n=>{const{componentCls:e,margin:r,marginXS:i,marginXL:a,fontSize:o,lineHeight:s}=n;return{[e]:{marginInline:i,fontSize:o,lineHeight:s,textAlign:"center",[`${e}-image`]:{height:n.emptyImgHeight,marginBottom:i,opacity:n.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${e}-description`]:{color:n.colorTextDescription},[`${e}-footer`]:{marginTop:r},"&-normal":{marginBlock:a,color:n.colorTextDescription,[`${e}-description`]:{color:n.colorTextDescription},[`${e}-image`]:{height:n.emptyImgHeightMD}},"&-small":{marginBlock:i,color:n.colorTextDescription,[`${e}-image`]:{height:n.emptyImgHeightSM}}}}},WKe=Ja("Empty",n=>{const{componentCls:e,controlHeightLG:r,calc:i}=n,a=Qr(n,{emptyImgCls:`${e}-img`,emptyImgHeight:i(r).mul(2.5).equal(),emptyImgHeightMD:r,emptyImgHeightSM:i(r).mul(.875).equal()});return[HKe(a)]});var qKe=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const awe=C.createElement(GKe,null),owe=C.createElement(jKe,null),l0=n=>{const{className:e,rootClassName:r,prefixCls:i,image:a=awe,description:o,children:s,imageStyle:l,style:c,classNames:u,styles:d}=n,f=qKe(n,["className","rootClassName","prefixCls","image","description","children","imageStyle","style","classNames","styles"]),{getPrefixCls:h,direction:p,className:g,style:m,classNames:v,styles:y}=Zu("empty"),b=h("empty",i),[x,_,S]=WKe(b),[M]=Wp("Empty"),E=typeof o<"u"?o:M==null?void 0:M.description,T=typeof E=="string"?E:"empty";let P=null;return typeof a=="string"?P=C.createElement("img",{alt:T,src:a}):P=a,x(C.createElement("div",Object.assign({className:Be(_,S,b,g,{[`${b}-normal`]:a===owe,[`${b}-rtl`]:p==="rtl"},e,r,v.root,u==null?void 0:u.root),style:Object.assign(Object.assign(Object.assign(Object.assign({},y.root),m),d==null?void 0:d.root),c)},f),C.createElement("div",{className:Be(`${b}-image`,v.image,u==null?void 0:u.image),style:Object.assign(Object.assign(Object.assign({},l),y.image),d==null?void 0:d.image)},P),E&&C.createElement("div",{className:Be(`${b}-description`,v.description,u==null?void 0:u.description),style:Object.assign(Object.assign({},y.description),d==null?void 0:d.description)},E),s&&C.createElement("div",{className:Be(`${b}-footer`,v.footer,u==null?void 0:u.footer),style:Object.assign(Object.assign({},y.footer),d==null?void 0:d.footer)},s)))};l0.PRESENTED_IMAGE_DEFAULT=awe;l0.PRESENTED_IMAGE_SIMPLE=owe;const YKe=n=>{const{componentName:e}=n,{getPrefixCls:r}=C.useContext(yr),i=r("empty");switch(e){case"Table":case"List":return Je.createElement(l0,{image:l0.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return Je.createElement(l0,{image:l0.PRESENTED_IMAGE_SIMPLE,className:`${i}-small`});case"Table.filter":return null;default:return Je.createElement(l0,null)}},U_=function(n,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;var i,a;const{variant:o,[n]:s}=C.useContext(yr),l=C.useContext(A_e),c=s==null?void 0:s.variant;let u;typeof e<"u"?u=e:r===!1?u="borderless":u=(a=(i=l??c)!==null&&i!==void 0?i:o)!==null&&a!==void 0?a:"outlined";const d=lGe.includes(u);return[u,d]},XKe=n=>{const r={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:n==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},r),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},r),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},r),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},r),{points:["br","tr"],offset:[0,-4]})}};function KKe(n,e){return n||XKe(e)}const Vie=n=>{const{optionHeight:e,optionFontSize:r,optionLineHeight:i,optionPadding:a}=n;return{position:"relative",display:"block",minHeight:e,padding:a,color:n.colorText,fontWeight:"normal",fontSize:r,lineHeight:i,boxSizing:"border-box"}},ZKe=n=>{const{antCls:e,componentCls:r}=n,i=`${r}-item`,a=`&${e}-slide-up-enter${e}-slide-up-enter-active`,o=`&${e}-slide-up-appear${e}-slide-up-appear-active`,s=`&${e}-slide-up-leave${e}-slide-up-leave-active`,l=`${r}-dropdown-placement-`,c=`${i}-option-selected`;return[{[`${r}-dropdown`]:Object.assign(Object.assign({},ts(n)),{position:"absolute",top:-9999,zIndex:n.zIndexPopup,boxSizing:"border-box",padding:n.paddingXXS,overflow:"hidden",fontSize:n.fontSize,fontVariant:"initial",backgroundColor:n.colorBgElevated,borderRadius:n.borderRadiusLG,outline:"none",boxShadow:n.boxShadowSecondary,[`
          ${a}${l}bottomLeft,
          ${o}${l}bottomLeft
        `]:{animationName:pY},[`
          ${a}${l}topLeft,
          ${o}${l}topLeft,
          ${a}${l}topRight,
          ${o}${l}topRight
        `]:{animationName:mY},[`${s}${l}bottomLeft`]:{animationName:gY},[`
          ${s}${l}topLeft,
          ${s}${l}topRight
        `]:{animationName:vY},"&-hidden":{display:"none"},[i]:Object.assign(Object.assign({},Vie(n)),{cursor:"pointer",transition:`background ${n.motionDurationSlow} ease`,borderRadius:n.borderRadiusSM,"&-group":{color:n.colorTextDescription,fontSize:n.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},NN),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${i}-option-disabled)`]:{backgroundColor:n.optionActiveBg},[`&-selected:not(${i}-option-disabled)`]:{color:n.optionSelectedColor,fontWeight:n.optionSelectedFontWeight,backgroundColor:n.optionSelectedBg,[`${i}-option-state`]:{color:n.colorPrimary}},"&-disabled":{[`&${i}-option-selected`]:{backgroundColor:n.colorBgContainerDisabled},color:n.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:n.calc(n.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},Vie(n)),{color:n.colorTextDisabled})}),[`${c}:has(+ ${c})`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${c}`]:{borderStartStartRadius:0,borderStartEndRadius:0}},"&-rtl":{direction:"rtl"}})},kN(n,"slide-up"),kN(n,"slide-down"),LN(n,"move-up"),LN(n,"move-down")]},swe=n=>{const{multipleSelectItemHeight:e,paddingXXS:r,lineWidth:i,INTERNAL_FIXED_ITEM_MARGIN:a}=n,o=n.max(n.calc(r).sub(i).equal(),0),s=n.max(n.calc(o).sub(a).equal(),0);return{basePadding:o,containerPadding:s,itemHeight:Qe(e),itemLineHeight:Qe(n.calc(e).sub(n.calc(n.lineWidth).mul(2)).equal())}},QKe=n=>{const{multipleSelectItemHeight:e,selectHeight:r,lineWidth:i}=n;return n.calc(r).sub(e).div(2).sub(i).equal()},lwe=n=>{const{componentCls:e,iconCls:r,borderRadiusSM:i,motionDurationSlow:a,paddingXS:o,multipleItemColorDisabled:s,multipleItemBorderColorDisabled:l,colorIcon:c,colorIconHover:u,INTERNAL_FIXED_ITEM_MARGIN:d}=n;return{[`${e}-selection-overflow`]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${e}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:d,borderRadius:i,cursor:"default",transition:`font-size ${a}, line-height ${a}, height ${a}`,marginInlineEnd:n.calc(d).mul(2).equal(),paddingInlineStart:o,paddingInlineEnd:n.calc(o).div(2).equal(),[`${e}-disabled&`]:{color:s,borderColor:l,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:n.calc(o).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},uM()),{display:"inline-flex",alignItems:"center",color:c,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${r}`]:{verticalAlign:"-0.2em"},"&:hover":{color:u}})}}}},JKe=(n,e)=>{const{componentCls:r,INTERNAL_FIXED_ITEM_MARGIN:i}=n,a=`${r}-selection-overflow`,o=n.multipleSelectItemHeight,s=QKe(n),l=e?`${r}-${e}`:"",c=swe(n);return{[`${r}-multiple${l}`]:Object.assign(Object.assign({},lwe(n)),{[`${r}-selector`]:{display:"flex",alignItems:"center",width:"100%",height:"100%",paddingInline:c.basePadding,paddingBlock:c.containerPadding,borderRadius:n.borderRadius,[`${r}-disabled&`]:{background:n.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${Qe(i)} 0`,lineHeight:Qe(o),visibility:"hidden",content:'"\\a0"'}},[`${r}-selection-item`]:{height:c.itemHeight,lineHeight:Qe(c.itemLineHeight)},[`${r}-selection-wrap`]:{alignSelf:"flex-start","&:after":{lineHeight:Qe(o),marginBlock:i}},[`${r}-prefix`]:{marginInlineStart:n.calc(n.inputPaddingHorizontalBase).sub(c.basePadding).equal()},[`${a}-item + ${a}-item,
        ${r}-prefix + ${r}-selection-wrap
      `]:{[`${r}-selection-search`]:{marginInlineStart:0},[`${r}-selection-placeholder`]:{insetInlineStart:0}},[`${a}-item-suffix`]:{minHeight:c.itemHeight,marginBlock:i},[`${r}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:n.calc(n.inputPaddingHorizontalBase).sub(s).equal(),"\n          &-input,\n          &-mirror\n        ":{height:o,fontFamily:n.fontFamily,lineHeight:Qe(o),transition:`all ${n.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${r}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:n.calc(n.inputPaddingHorizontalBase).sub(c.basePadding).equal(),insetInlineEnd:n.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${n.motionDurationSlow}`}})}};function V5(n,e){const{componentCls:r}=n,i=e?`${r}-${e}`:"",a={[`${r}-multiple${i}`]:{fontSize:n.fontSize,[`${r}-selector`]:{[`${r}-show-search&`]:{cursor:"text"}},[`
        &${r}-show-arrow ${r}-selector,
        &${r}-allow-clear ${r}-selector
      `]:{paddingInlineEnd:n.calc(n.fontSizeIcon).add(n.controlPaddingHorizontal).equal()}}};return[JKe(n,e),a]}const eZe=n=>{const{componentCls:e}=n,r=Qr(n,{selectHeight:n.controlHeightSM,multipleSelectItemHeight:n.multipleItemHeightSM,borderRadius:n.borderRadiusSM,borderRadiusSM:n.borderRadiusXS}),i=Qr(n,{fontSize:n.fontSizeLG,selectHeight:n.controlHeightLG,multipleSelectItemHeight:n.multipleItemHeightLG,borderRadius:n.borderRadiusLG,borderRadiusSM:n.borderRadius});return[V5(n),V5(r,"sm"),{[`${e}-multiple${e}-sm`]:{[`${e}-selection-placeholder`]:{insetInline:n.calc(n.controlPaddingHorizontalSM).sub(n.lineWidth).equal()},[`${e}-selection-search`]:{marginInlineStart:2}}},V5(i,"lg")]};function G5(n,e){const{componentCls:r,inputPaddingHorizontalBase:i,borderRadius:a}=n,o=n.calc(n.controlHeight).sub(n.calc(n.lineWidth).mul(2)).equal(),s=e?`${r}-${e}`:"";return{[`${r}-single${s}`]:{fontSize:n.fontSize,height:n.controlHeight,[`${r}-selector`]:Object.assign(Object.assign({},ts(n,!0)),{display:"flex",borderRadius:a,flex:"1 1 auto",[`${r}-selection-wrap:after`]:{lineHeight:Qe(o)},[`${r}-selection-search`]:{position:"absolute",inset:0,width:"100%","&-input":{width:"100%",WebkitAppearance:"textfield"}},[`
          ${r}-selection-item,
          ${r}-selection-placeholder
        `]:{display:"block",padding:0,lineHeight:Qe(o),transition:`all ${n.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${r}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${r}-selection-item:empty:after`,`${r}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${r}-show-arrow ${r}-selection-item,
        &${r}-show-arrow ${r}-selection-search,
        &${r}-show-arrow ${r}-selection-placeholder
      `]:{paddingInlineEnd:n.showArrowPaddingInlineEnd},[`&${r}-open ${r}-selection-item`]:{color:n.colorTextPlaceholder},[`&:not(${r}-customize-input)`]:{[`${r}-selector`]:{width:"100%",height:"100%",alignItems:"center",padding:`0 ${Qe(i)}`,[`${r}-selection-search-input`]:{height:o,fontSize:n.fontSize},"&:after":{lineHeight:Qe(o)}}},[`&${r}-customize-input`]:{[`${r}-selector`]:{"&:after":{display:"none"},[`${r}-selection-search`]:{position:"static",width:"100%"},[`${r}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${Qe(i)}`,"&:after":{display:"none"}}}}}}}function tZe(n){const{componentCls:e}=n,r=n.calc(n.controlPaddingHorizontalSM).sub(n.lineWidth).equal();return[G5(n),G5(Qr(n,{controlHeight:n.controlHeightSM,borderRadius:n.borderRadiusSM}),"sm"),{[`${e}-single${e}-sm`]:{[`&:not(${e}-customize-input)`]:{[`${e}-selector`]:{padding:`0 ${Qe(r)}`},[`&${e}-show-arrow ${e}-selection-search`]:{insetInlineEnd:n.calc(r).add(n.calc(n.fontSize).mul(1.5)).equal()},[`
            &${e}-show-arrow ${e}-selection-item,
            &${e}-show-arrow ${e}-selection-placeholder
          `]:{paddingInlineEnd:n.calc(n.fontSize).mul(1.5).equal()}}}},G5(Qr(n,{controlHeight:n.singleItemHeightLG,fontSize:n.fontSizeLG,borderRadius:n.borderRadiusLG}),"lg")]}const nZe=n=>{const{fontSize:e,lineHeight:r,lineWidth:i,controlHeight:a,controlHeightSM:o,controlHeightLG:s,paddingXXS:l,controlPaddingHorizontal:c,zIndexPopupBase:u,colorText:d,fontWeightStrong:f,controlItemBgActive:h,controlItemBgHover:p,colorBgContainer:g,colorFillSecondary:m,colorBgContainerDisabled:v,colorTextDisabled:y,colorPrimaryHover:b,colorPrimary:x,controlOutline:_}=n,S=l*2,M=i*2,E=Math.min(a-S,a-M),T=Math.min(o-S,o-M),P=Math.min(s-S,s-M);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(l/2),zIndexPopup:u+50,optionSelectedColor:d,optionSelectedFontWeight:f,optionSelectedBg:h,optionActiveBg:p,optionPadding:`${(a-e*r)/2}px ${c}px`,optionFontSize:e,optionLineHeight:r,optionHeight:a,selectorBg:g,clearBg:g,singleItemHeightLG:s,multipleItemBg:m,multipleItemBorderColor:"transparent",multipleItemHeight:E,multipleItemHeightSM:T,multipleItemHeightLG:P,multipleSelectorBgDisabled:v,multipleItemColorDisabled:y,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(n.fontSize*1.25),hoverBorderColor:b,activeBorderColor:x,activeOutlineColor:_,selectAffixPadding:l}},cwe=(n,e)=>{const{componentCls:r,antCls:i,controlOutlineWidth:a}=n;return{[`&:not(${r}-customize-input) ${r}-selector`]:{border:`${Qe(n.lineWidth)} ${n.lineType} ${e.borderColor}`,background:n.selectorBg},[`&:not(${r}-disabled):not(${r}-customize-input):not(${i}-pagination-size-changer)`]:{[`&:hover ${r}-selector`]:{borderColor:e.hoverBorderHover},[`${r}-focused& ${r}-selector`]:{borderColor:e.activeBorderColor,boxShadow:`0 0 0 ${Qe(a)} ${e.activeOutlineColor}`,outline:0},[`${r}-prefix`]:{color:e.color}}}},Gie=(n,e)=>({[`&${n.componentCls}-status-${e.status}`]:Object.assign({},cwe(n,e))}),rZe=n=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},cwe(n,{borderColor:n.colorBorder,hoverBorderHover:n.hoverBorderColor,activeBorderColor:n.activeBorderColor,activeOutlineColor:n.activeOutlineColor,color:n.colorText})),Gie(n,{status:"error",borderColor:n.colorError,hoverBorderHover:n.colorErrorHover,activeBorderColor:n.colorError,activeOutlineColor:n.colorErrorOutline,color:n.colorError})),Gie(n,{status:"warning",borderColor:n.colorWarning,hoverBorderHover:n.colorWarningHover,activeBorderColor:n.colorWarning,activeOutlineColor:n.colorWarningOutline,color:n.colorWarning})),{[`&${n.componentCls}-disabled`]:{[`&:not(${n.componentCls}-customize-input) ${n.componentCls}-selector`]:{background:n.colorBgContainerDisabled,color:n.colorTextDisabled}},[`&${n.componentCls}-multiple ${n.componentCls}-selection-item`]:{background:n.multipleItemBg,border:`${Qe(n.lineWidth)} ${n.lineType} ${n.multipleItemBorderColor}`}})}),uwe=(n,e)=>{const{componentCls:r,antCls:i}=n;return{[`&:not(${r}-customize-input) ${r}-selector`]:{background:e.bg,border:`${Qe(n.lineWidth)} ${n.lineType} transparent`,color:e.color},[`&:not(${r}-disabled):not(${r}-customize-input):not(${i}-pagination-size-changer)`]:{[`&:hover ${r}-selector`]:{background:e.hoverBg},[`${r}-focused& ${r}-selector`]:{background:n.selectorBg,borderColor:e.activeBorderColor,outline:0}}}},jie=(n,e)=>({[`&${n.componentCls}-status-${e.status}`]:Object.assign({},uwe(n,e))}),iZe=n=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},uwe(n,{bg:n.colorFillTertiary,hoverBg:n.colorFillSecondary,activeBorderColor:n.activeBorderColor,color:n.colorText})),jie(n,{status:"error",bg:n.colorErrorBg,hoverBg:n.colorErrorBgHover,activeBorderColor:n.colorError,color:n.colorError})),jie(n,{status:"warning",bg:n.colorWarningBg,hoverBg:n.colorWarningBgHover,activeBorderColor:n.colorWarning,color:n.colorWarning})),{[`&${n.componentCls}-disabled`]:{[`&:not(${n.componentCls}-customize-input) ${n.componentCls}-selector`]:{borderColor:n.colorBorder,background:n.colorBgContainerDisabled,color:n.colorTextDisabled}},[`&${n.componentCls}-multiple ${n.componentCls}-selection-item`]:{background:n.colorBgContainer,border:`${Qe(n.lineWidth)} ${n.lineType} ${n.colorSplit}`}})}),aZe=n=>({"&-borderless":{[`${n.componentCls}-selector`]:{background:"transparent",border:`${Qe(n.lineWidth)} ${n.lineType} transparent`},[`&${n.componentCls}-disabled`]:{[`&:not(${n.componentCls}-customize-input) ${n.componentCls}-selector`]:{color:n.colorTextDisabled}},[`&${n.componentCls}-multiple ${n.componentCls}-selection-item`]:{background:n.multipleItemBg,border:`${Qe(n.lineWidth)} ${n.lineType} ${n.multipleItemBorderColor}`},[`&${n.componentCls}-status-error`]:{[`${n.componentCls}-prefix, ${n.componentCls}-selection-item`]:{color:n.colorError}},[`&${n.componentCls}-status-warning`]:{[`${n.componentCls}-prefix, ${n.componentCls}-selection-item`]:{color:n.colorWarning}}}}),dwe=(n,e)=>{const{componentCls:r,antCls:i}=n;return{[`&:not(${r}-customize-input) ${r}-selector`]:{borderWidth:`0 0 ${Qe(n.lineWidth)} 0`,borderStyle:`none none ${n.lineType} none`,borderColor:e.borderColor,background:n.selectorBg,borderRadius:0},[`&:not(${r}-disabled):not(${r}-customize-input):not(${i}-pagination-size-changer)`]:{[`&:hover ${r}-selector`]:{borderColor:e.hoverBorderHover},[`${r}-focused& ${r}-selector`]:{borderColor:e.activeBorderColor,outline:0},[`${r}-prefix`]:{color:e.color}}}},Hie=(n,e)=>({[`&${n.componentCls}-status-${e.status}`]:Object.assign({},dwe(n,e))}),oZe=n=>({"&-underlined":Object.assign(Object.assign(Object.assign(Object.assign({},dwe(n,{borderColor:n.colorBorder,hoverBorderHover:n.hoverBorderColor,activeBorderColor:n.activeBorderColor,activeOutlineColor:n.activeOutlineColor,color:n.colorText})),Hie(n,{status:"error",borderColor:n.colorError,hoverBorderHover:n.colorErrorHover,activeBorderColor:n.colorError,activeOutlineColor:n.colorErrorOutline,color:n.colorError})),Hie(n,{status:"warning",borderColor:n.colorWarning,hoverBorderHover:n.colorWarningHover,activeBorderColor:n.colorWarning,activeOutlineColor:n.colorWarningOutline,color:n.colorWarning})),{[`&${n.componentCls}-disabled`]:{[`&:not(${n.componentCls}-customize-input) ${n.componentCls}-selector`]:{color:n.colorTextDisabled}},[`&${n.componentCls}-multiple ${n.componentCls}-selection-item`]:{background:n.multipleItemBg,border:`${Qe(n.lineWidth)} ${n.lineType} ${n.multipleItemBorderColor}`}})}),sZe=n=>({[n.componentCls]:Object.assign(Object.assign(Object.assign(Object.assign({},rZe(n)),iZe(n)),aZe(n)),oZe(n))}),lZe=n=>{const{componentCls:e}=n;return{position:"relative",transition:`all ${n.motionDurationMid} ${n.motionEaseInOut}`,input:{cursor:"pointer"},[`${e}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${e}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},cZe=n=>{const{componentCls:e}=n;return{[`${e}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none",appearance:"none"}}}},uZe=n=>{const{antCls:e,componentCls:r,inputPaddingHorizontalBase:i,iconCls:a}=n;return{[r]:Object.assign(Object.assign({},ts(n)),{position:"relative",display:"inline-flex",cursor:"pointer",[`&:not(${r}-customize-input) ${r}-selector`]:Object.assign(Object.assign({},lZe(n)),cZe(n)),[`${r}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},NN),{[`> ${e}-typography`]:{display:"inline"}}),[`${r}-selection-placeholder`]:Object.assign(Object.assign({},NN),{flex:1,color:n.colorTextPlaceholder,pointerEvents:"none"}),[`${r}-arrow`]:Object.assign(Object.assign({},uM()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:i,height:n.fontSizeIcon,marginTop:n.calc(n.fontSizeIcon).mul(-1).div(2).equal(),color:n.colorTextQuaternary,fontSize:n.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${n.motionDurationSlow} ease`,[a]:{verticalAlign:"top",transition:`transform ${n.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${r}-suffix)`]:{pointerEvents:"auto"}},[`${r}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${r}-selection-wrap`]:{display:"flex",width:"100%",position:"relative",minWidth:0,"&:after":{content:'"\\a0"',width:0,overflow:"hidden"}},[`${r}-prefix`]:{flex:"none",marginInlineEnd:n.selectAffixPadding},[`${r}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:i,zIndex:1,display:"inline-block",width:n.fontSizeIcon,height:n.fontSizeIcon,marginTop:n.calc(n.fontSizeIcon).mul(-1).div(2).equal(),color:n.colorTextQuaternary,fontSize:n.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${n.motionDurationMid} ease, opacity ${n.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:n.colorIcon}},[`&:hover ${r}-clear`]:{opacity:1,background:n.colorBgBase,borderRadius:"50%"}}),[`${r}-status`]:{"&-error, &-warning, &-success, &-validating":{[`&${r}-has-feedback`]:{[`${r}-clear`]:{insetInlineEnd:n.calc(i).add(n.fontSize).add(n.paddingXS).equal()}}}}}},dZe=n=>{const{componentCls:e}=n;return[{[e]:{[`&${e}-in-form-item`]:{width:"100%"}}},uZe(n),tZe(n),eZe(n),ZKe(n),{[`${e}-rtl`]:{direction:"rtl"}},hM(n,{borderElCls:`${e}-selector`,focusElCls:`${e}-focused`})]},fZe=Ja("Select",(n,e)=>{let{rootPrefixCls:r}=e;const i=Qr(n,{rootPrefixCls:r,inputPaddingHorizontalBase:n.calc(n.paddingSM).sub(1).equal(),multipleSelectItemHeight:n.multipleItemHeight,selectHeight:n.controlHeight});return[dZe(i),sZe(i)]},nZe,{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});var hZe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},pZe=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:hZe}))},gZe=C.forwardRef(pZe),mZe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},vZe=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:mZe}))},fwe=C.forwardRef(vZe),yZe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},bZe=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:yZe}))},hwe=C.forwardRef(bZe);function pwe(n){let{suffixIcon:e,clearIcon:r,menuItemSelectedIcon:i,removeIcon:a,loading:o,multiple:s,hasFeedback:l,prefixCls:c,showSuffixIcon:u,feedbackIcon:d,showArrow:f,componentName:h}=n;const p=r??C.createElement(L_,null),g=b=>e===null&&!l&&!f?null:C.createElement(C.Fragment,null,u!==!1&&b,l&&d);let m=null;if(e!==void 0)m=g(e);else if(o)m=g(C.createElement(_4,{spin:!0}));else{const b=`${c}-suffix`;m=x=>{let{open:_,showSearch:S}=x;return g(_&&S?C.createElement(hwe,{className:b}):C.createElement(fwe,{className:b}))}}let v=null;i!==void 0?v=i:s?v=C.createElement(gZe,null):v=null;let y=null;return a!==void 0?y=a:y=C.createElement(k_,null),{clearIcon:p,suffixIcon:m,itemIcon:v,removeIcon:y}}function xZe(n,e){return e!==void 0?e:n!==null}var _Ze=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const gwe="SECRET_COMBOBOX_MODE_DO_NOT_USE",wZe=(n,e)=>{var r;const{prefixCls:i,bordered:a,className:o,rootClassName:s,getPopupContainer:l,popupClassName:c,dropdownClassName:u,listHeight:d=256,placement:f,listItemHeight:h,size:p,disabled:g,notFoundContent:m,status:v,builtinPlacements:y,dropdownMatchSelectWidth:b,popupMatchSelectWidth:x,direction:_,style:S,allowClear:M,variant:E,dropdownStyle:T,transitionName:P,tagRender:A,maxCount:N,prefix:O}=n,I=_Ze(n,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount","prefix"]),{getPopupContainer:D,getPrefixCls:k,renderEmpty:$,direction:B,virtual:F,popupMatchSelectWidth:G,popupOverflow:z}=C.useContext(yr),U=Zu("select"),[,H]=Zc(),X=h??(H==null?void 0:H.controlHeight),V=k("select",i),W=k(),K=_??B,{compactSize:q,compactItemClassnames:Q}=ov(V,K),[ie,oe]=U_("select",E,a),ue=Qc(V),[le,me,J]=fZe(V,ue),pe=C.useMemo(()=>{const{mode:mt}=n;if(mt!=="combobox")return mt===gwe?"combobox":mt},[n.mode]),ve=pe==="multiple"||pe==="tags",Me=xZe(n.suffixIcon,n.showArrow),Re=(r=x??b)!==null&&r!==void 0?r:G,{status:Xe,hasFeedback:He,isFormItemInput:ee,feedbackIcon:Y}=C.useContext(Xs),ce=ky(Xe,v);let _e;m!==void 0?_e=m:pe==="combobox"?_e=null:_e=($==null?void 0:$("Select"))||C.createElement(YKe,{componentName:"Select"});const{suffixIcon:Ae,itemIcon:Ce,removeIcon:et,clearIcon:Ve}=pwe(Object.assign(Object.assign({},I),{multiple:ve,hasFeedback:He,feedbackIcon:Y,showSuffixIcon:Me,prefixCls:V,componentName:"Select"})),qe=M===!0?{clearIcon:Ve}:M,dt=Qu(I,["suffixIcon","itemIcon"]),Ge=Be(c||u,{[`${V}-dropdown-${K}`]:K==="rtl"},s,J,ue,me),We=af(mt=>{var xe;return(xe=p??q)!==null&&xe!==void 0?xe:mt}),Ze=C.useContext(ju),Ie=g??Ze,De=Be({[`${V}-lg`]:We==="large",[`${V}-sm`]:We==="small",[`${V}-rtl`]:K==="rtl",[`${V}-${ie}`]:oe,[`${V}-in-form-item`]:ee},jm(V,ce,He),Q,U.className,o,s,J,ue,me),bt=C.useMemo(()=>f!==void 0?f:K==="rtl"?"bottomRight":"bottomLeft",[f,K]),[Ke]=dM("SelectLike",T==null?void 0:T.zIndex);return le(C.createElement(IY,Object.assign({ref:e,virtual:F,showSearch:U.showSearch},dt,{style:Object.assign(Object.assign({},U.style),S),dropdownMatchSelectWidth:Re,transitionName:dy(W,"slide-up",P),builtinPlacements:KKe(y,z),listHeight:d,listItemHeight:X,mode:pe,prefixCls:V,placement:bt,direction:K,prefix:O,suffixIcon:Ae,menuItemSelectedIcon:Ce,removeIcon:et,allowClear:qe,notFoundContent:_e,className:De,getPopupContainer:l||D,dropdownClassName:Ge,disabled:Ie,dropdownStyle:Object.assign(Object.assign({},T),{zIndex:Ke}),maxCount:ve?N:void 0,tagRender:ve?A:void 0})))},sp=C.forwardRef(wZe),SZe=TY(sp,"dropdownAlign");sp.SECRET_COMBOBOX_MODE_DO_NOT_USE=gwe;sp.Option=OY;sp.OptGroup=NY;sp._InternalPanelDoNotUseOrYouWillBeFired=SZe;const HE=["xxl","xl","lg","md","sm","xs"],EZe=n=>({xs:`(max-width: ${n.screenXSMax}px)`,sm:`(min-width: ${n.screenSM}px)`,md:`(min-width: ${n.screenMD}px)`,lg:`(min-width: ${n.screenLG}px)`,xl:`(min-width: ${n.screenXL}px)`,xxl:`(min-width: ${n.screenXXL}px)`}),CZe=n=>{const e=n,r=[].concat(HE).reverse();return r.forEach((i,a)=>{const o=i.toUpperCase(),s=`screen${o}Min`,l=`screen${o}`;if(!(e[s]<=e[l]))throw new Error(`${s}<=${l} fails : !(${e[s]}<=${e[l]})`);if(a<r.length-1){const c=`screen${o}Max`;if(!(e[l]<=e[c]))throw new Error(`${l}<=${c} fails : !(${e[l]}<=${e[c]})`);const d=`screen${r[a+1].toUpperCase()}Min`;if(!(e[c]<=e[d]))throw new Error(`${c}<=${d} fails : !(${e[c]}<=${e[d]})`)}}),n},MZe=()=>{const[,n]=Zc(),e=EZe(CZe(n));return Je.useMemo(()=>{const r=new Map;let i=-1,a={};return{responsiveMap:e,matchHandlers:{},dispatch(o){return a=o,r.forEach(s=>s(a)),r.size>=1},subscribe(o){return r.size||this.register(),i+=1,r.set(i,o),o(a),i},unsubscribe(o){r.delete(o),r.size||this.unregister()},register(){Object.keys(e).forEach(o=>{const s=e[o],l=u=>{let{matches:d}=u;this.dispatch(Object.assign(Object.assign({},a),{[o]:d}))},c=window.matchMedia(s);c.addListener(l),this.matchHandlers[s]={mql:c,listener:l},l(c)})},unregister(){Object.keys(e).forEach(o=>{const s=e[o],l=this.matchHandlers[s];l==null||l.mql.removeListener(l==null?void 0:l.listener)}),r.clear()}}},[n])};function TZe(){const[,n]=C.useReducer(e=>e+1,0);return n}function AZe(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=C.useRef(e),i=TZe(),a=MZe();return Dr(()=>{const o=a.subscribe(s=>{r.current=s,n&&i()});return()=>a.unsubscribe(o)},[]),r.current}const BN=n=>n?typeof n=="function"?n():n:null;function DY(n){var e=n.children,r=n.prefixCls,i=n.id,a=n.overlayInnerStyle,o=n.bodyClassName,s=n.className,l=n.style;return C.createElement("div",{className:Be("".concat(r,"-content"),s),style:l},C.createElement("div",{className:Be("".concat(r,"-inner"),o),id:i,role:"tooltip",style:a},typeof e=="function"?e():e))}var T1={shiftX:64,adjustY:1},A1={adjustX:1,shiftY:!0},fu=[0,0],RZe={left:{points:["cr","cl"],overflow:A1,offset:[-4,0],targetOffset:fu},right:{points:["cl","cr"],overflow:A1,offset:[4,0],targetOffset:fu},top:{points:["bc","tc"],overflow:T1,offset:[0,-4],targetOffset:fu},bottom:{points:["tc","bc"],overflow:T1,offset:[0,4],targetOffset:fu},topLeft:{points:["bl","tl"],overflow:T1,offset:[0,-4],targetOffset:fu},leftTop:{points:["tr","tl"],overflow:A1,offset:[-4,0],targetOffset:fu},topRight:{points:["br","tr"],overflow:T1,offset:[0,-4],targetOffset:fu},rightTop:{points:["tl","tr"],overflow:A1,offset:[4,0],targetOffset:fu},bottomRight:{points:["tr","br"],overflow:T1,offset:[0,4],targetOffset:fu},rightBottom:{points:["bl","br"],overflow:A1,offset:[4,0],targetOffset:fu},bottomLeft:{points:["tl","bl"],overflow:T1,offset:[0,4],targetOffset:fu},leftBottom:{points:["br","bl"],overflow:A1,offset:[-4,0],targetOffset:fu}},PZe=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow","classNames","styles"],NZe=function(e,r){var i=e.overlayClassName,a=e.trigger,o=a===void 0?["hover"]:a,s=e.mouseEnterDelay,l=s===void 0?0:s,c=e.mouseLeaveDelay,u=c===void 0?.1:c,d=e.overlayStyle,f=e.prefixCls,h=f===void 0?"rc-tooltip":f,p=e.children,g=e.onVisibleChange,m=e.afterVisibleChange,v=e.transitionName,y=e.animation,b=e.motion,x=e.placement,_=x===void 0?"right":x,S=e.align,M=S===void 0?{}:S,E=e.destroyTooltipOnHide,T=E===void 0?!1:E,P=e.defaultVisible,A=e.getTooltipContainer,N=e.overlayInnerStyle;e.arrowContent;var O=e.overlay,I=e.id,D=e.showArrow,k=D===void 0?!0:D,$=e.classNames,B=e.styles,F=ir(e,PZe),G=wY(I),z=C.useRef(null);C.useImperativeHandle(r,function(){return z.current});var U=se({},F);"visible"in e&&(U.popupVisible=e.visible);var H=function(){return C.createElement(DY,{key:"content",prefixCls:h,id:G,bodyClassName:$==null?void 0:$.body,overlayInnerStyle:se(se({},N),B==null?void 0:B.body)},O)},X=function(){var W=C.Children.only(p),K=(W==null?void 0:W.props)||{},q=se(se({},K),{},{"aria-describedby":O?G:null});return C.cloneElement(p,q)};return C.createElement(RY,Mt({popupClassName:Be(i,$==null?void 0:$.root),prefixCls:h,popup:H,action:o,builtinPlacements:RZe,popupPlacement:_,ref:z,popupAlign:M,getPopupContainer:A,onPopupVisibleChange:g,afterPopupVisibleChange:m,popupTransitionName:v,popupAnimation:y,popupMotion:b,defaultPopupVisible:P,autoDestroy:T,mouseLeaveDelay:u,popupStyle:se(se({},d),B==null?void 0:B.root),mouseEnterDelay:l,arrow:k},U),X())};const OZe=C.forwardRef(NZe);function LY(n){const{sizePopupArrow:e,borderRadiusXS:r,borderRadiusOuter:i}=n,a=e/2,o=0,s=a,l=i*1/Math.sqrt(2),c=a-i*(1-1/Math.sqrt(2)),u=a-r*(1/Math.sqrt(2)),d=i*(Math.sqrt(2)-1)+r*(1/Math.sqrt(2)),f=2*a-u,h=d,p=2*a-l,g=c,m=2*a-o,v=s,y=a*Math.sqrt(2)+i*(Math.sqrt(2)-2),b=i*(Math.sqrt(2)-1),x=`polygon(${b}px 100%, 50% ${b}px, ${2*a-b}px 100%, ${b}px 100%)`,_=`path('M ${o} ${s} A ${i} ${i} 0 0 0 ${l} ${c} L ${u} ${d} A ${r} ${r} 0 0 1 ${f} ${h} L ${p} ${g} A ${i} ${i} 0 0 0 ${m} ${v} Z')`;return{arrowShadowWidth:y,arrowPath:_,arrowPolygon:x}}const mwe=(n,e,r)=>{const{sizePopupArrow:i,arrowPolygon:a,arrowPath:o,arrowShadowWidth:s,borderRadiusXS:l,calc:c}=n;return{pointerEvents:"none",width:i,height:i,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:i,height:c(i).div(2).equal(),background:e,clipPath:{_multi_value_:!0,value:[a,o]},content:'""'},"&::after":{content:'""',position:"absolute",width:s,height:s,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${Qe(l)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:r,zIndex:0,background:"transparent"}}},vwe=8;function kY(n){const{contentRadius:e,limitVerticalRadius:r}=n,i=e>12?e+2:12;return{arrowOffsetHorizontal:i,arrowOffsetVertical:r?vwe:i}}function M3(n,e){return n?e:{}}function ywe(n,e,r){const{componentCls:i,boxShadowPopoverArrow:a,arrowOffsetVertical:o,arrowOffsetHorizontal:s}=n,{arrowDistance:l=0,arrowPlacement:c={left:!0,right:!0,top:!0,bottom:!0}}={};return{[i]:Object.assign(Object.assign(Object.assign(Object.assign({[`${i}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},mwe(n,e,a)),{"&:before":{background:e}})]},M3(!!c.top,{[[`&-placement-top > ${i}-arrow`,`&-placement-topLeft > ${i}-arrow`,`&-placement-topRight > ${i}-arrow`].join(",")]:{bottom:l,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${i}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":s,[`> ${i}-arrow`]:{left:{_skip_check_:!0,value:s}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${Qe(s)})`,[`> ${i}-arrow`]:{right:{_skip_check_:!0,value:s}}}})),M3(!!c.bottom,{[[`&-placement-bottom > ${i}-arrow`,`&-placement-bottomLeft > ${i}-arrow`,`&-placement-bottomRight > ${i}-arrow`].join(",")]:{top:l,transform:"translateY(-100%)"},[`&-placement-bottom > ${i}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":s,[`> ${i}-arrow`]:{left:{_skip_check_:!0,value:s}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${Qe(s)})`,[`> ${i}-arrow`]:{right:{_skip_check_:!0,value:s}}}})),M3(!!c.left,{[[`&-placement-left > ${i}-arrow`,`&-placement-leftTop > ${i}-arrow`,`&-placement-leftBottom > ${i}-arrow`].join(",")]:{right:{_skip_check_:!0,value:l},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${i}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${i}-arrow`]:{top:o},[`&-placement-leftBottom > ${i}-arrow`]:{bottom:o}})),M3(!!c.right,{[[`&-placement-right > ${i}-arrow`,`&-placement-rightTop > ${i}-arrow`,`&-placement-rightBottom > ${i}-arrow`].join(",")]:{left:{_skip_check_:!0,value:l},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${i}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${i}-arrow`]:{top:o},[`&-placement-rightBottom > ${i}-arrow`]:{bottom:o}}))}}function IZe(n,e,r,i){if(i===!1)return{adjustX:!1,adjustY:!1};const a=i&&typeof i=="object"?i:{},o={};switch(n){case"top":case"bottom":o.shiftX=e.arrowOffsetHorizontal*2+r,o.shiftY=!0,o.adjustY=!0;break;case"left":case"right":o.shiftY=e.arrowOffsetVertical*2+r,o.shiftX=!0,o.adjustX=!0;break}const s=Object.assign(Object.assign({},o),a);return s.shiftX||(s.adjustX=!0),s.shiftY||(s.adjustY=!0),s}const Wie={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},DZe={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},LZe=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function kZe(n){const{arrowWidth:e,autoAdjustOverflow:r,arrowPointAtCenter:i,offset:a,borderRadius:o}=n,s=e/2,l={};return Object.keys(Wie).forEach(c=>{const u=i&&DZe[c]||Wie[c],d=Object.assign(Object.assign({},u),{offset:[0,0],dynamicInset:!0});switch(l[c]=d,LZe.has(c)&&(d.autoArrow=!1),c){case"top":case"topLeft":case"topRight":d.offset[1]=-s-a;break;case"bottom":case"bottomLeft":case"bottomRight":d.offset[1]=s+a;break;case"left":case"leftTop":case"leftBottom":d.offset[0]=-s-a;break;case"right":case"rightTop":case"rightBottom":d.offset[0]=s+a;break}const f=kY({contentRadius:o,limitVerticalRadius:!0});if(i)switch(c){case"topLeft":case"bottomLeft":d.offset[0]=-f.arrowOffsetHorizontal-s;break;case"topRight":case"bottomRight":d.offset[0]=f.arrowOffsetHorizontal+s;break;case"leftTop":case"rightTop":d.offset[1]=-f.arrowOffsetHorizontal*2+s;break;case"leftBottom":case"rightBottom":d.offset[1]=f.arrowOffsetHorizontal*2-s;break}d.overflow=IZe(c,f,e,r),d.htmlRegion="visibleFirst"}),l}const FZe=n=>{const{calc:e,componentCls:r,tooltipMaxWidth:i,tooltipColor:a,tooltipBg:o,tooltipBorderRadius:s,zIndexPopup:l,controlHeight:c,boxShadowSecondary:u,paddingSM:d,paddingXS:f,arrowOffsetHorizontal:h,sizePopupArrow:p}=n,g=e(s).add(p).add(h).equal(),m=e(s).mul(2).add(p).equal();return[{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},ts(n)),{position:"absolute",zIndex:l,display:"block",width:"max-content",maxWidth:i,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":o,[`${r}-inner`]:{minWidth:m,minHeight:c,padding:`${Qe(n.calc(d).div(2).equal())} ${Qe(f)}`,color:a,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:o,borderRadius:s,boxShadow:u,boxSizing:"border-box"},[["&-placement-topLeft","&-placement-topRight","&-placement-bottomLeft","&-placement-bottomRight"].join(",")]:{minWidth:g},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${r}-inner`]:{borderRadius:n.min(s,vwe)}},[`${r}-content`]:{position:"relative"}}),LGe(n,(v,y)=>{let{darkColor:b}=y;return{[`&${r}-${v}`]:{[`${r}-inner`]:{backgroundColor:b},[`${r}-arrow`]:{"--antd-arrow-background-color":b}}}})),{"&-rtl":{direction:"rtl"}})},ywe(n,"var(--antd-arrow-background-color)"),{[`${r}-pure`]:{position:"relative",maxWidth:"none",margin:n.sizePopupArrow}}]},$Ze=n=>Object.assign(Object.assign({zIndexPopup:n.zIndexPopupBase+70},kY({contentRadius:n.borderRadius,limitVerticalRadius:!0})),LY(Qr(n,{borderRadiusOuter:Math.min(n.borderRadiusOuter,4)}))),bwe=function(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Ja("Tooltip",i=>{const{borderRadius:a,colorTextLightSolid:o,colorBgSpotlight:s}=i,l=Qr(i,{tooltipMaxWidth:250,tooltipColor:o,tooltipBorderRadius:a,tooltipBg:s});return[FZe(l),bY(i,"zoom-big-fast")]},$Ze,{resetStyle:!1,injectStyle:e})(n)},BZe=Um.map(n=>`${n}-inverse`);function zZe(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(ot(BZe),ot(Um)).includes(n):Um.includes(n)}function xwe(n,e){const r=zZe(e),i=Be({[`${n}-${e}`]:e&&r}),a={},o={};return e&&!r&&(a.background=e,o["--antd-arrow-background-color"]=e),{className:i,overlayStyle:a,arrowStyle:o}}const UZe=n=>{const{prefixCls:e,className:r,placement:i="top",title:a,color:o,overlayInnerStyle:s}=n,{getPrefixCls:l}=C.useContext(yr),c=l("tooltip",e),[u,d,f]=bwe(c),h=xwe(c,o),p=h.arrowStyle,g=Object.assign(Object.assign({},s),h.overlayStyle),m=Be(d,f,c,`${c}-pure`,`${c}-placement-${i}`,r,h.className);return u(C.createElement("div",{className:m,style:p},C.createElement("div",{className:`${c}-arrow`}),C.createElement(DY,Object.assign({},n,{className:d,prefixCls:c,overlayInnerStyle:g}),a)))};var VZe=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const GZe=C.forwardRef((n,e)=>{var r,i;const{prefixCls:a,openClassName:o,getTooltipContainer:s,color:l,overlayInnerStyle:c,children:u,afterOpenChange:d,afterVisibleChange:f,destroyTooltipOnHide:h,arrow:p=!0,title:g,overlay:m,builtinPlacements:v,arrowPointAtCenter:y=!1,autoAdjustOverflow:b=!0,motion:x,getPopupContainer:_,placement:S="top",mouseEnterDelay:M=.1,mouseLeaveDelay:E=.1,overlayStyle:T,rootClassName:P,overlayClassName:A,styles:N,classNames:O}=n,I=VZe(n,["prefixCls","openClassName","getTooltipContainer","color","overlayInnerStyle","children","afterOpenChange","afterVisibleChange","destroyTooltipOnHide","arrow","title","overlay","builtinPlacements","arrowPointAtCenter","autoAdjustOverflow","motion","getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName","overlayClassName","styles","classNames"]),D=!!p,[,k]=Zc(),{getPopupContainer:$,getPrefixCls:B,direction:F,className:G,style:z,classNames:U,styles:H}=Zu("tooltip"),X=v4(),V=C.useRef(null),W=()=>{var dt;(dt=V.current)===null||dt===void 0||dt.forceAlign()};C.useImperativeHandle(e,()=>{var dt,Ge;return{forceAlign:W,forcePopupAlign:()=>{X.deprecated(!1,"forcePopupAlign","forceAlign"),W()},nativeElement:(dt=V.current)===null||dt===void 0?void 0:dt.nativeElement,popupElement:(Ge=V.current)===null||Ge===void 0?void 0:Ge.popupElement}});const[K,q]=es(!1,{value:(r=n.open)!==null&&r!==void 0?r:n.visible,defaultValue:(i=n.defaultOpen)!==null&&i!==void 0?i:n.defaultVisible}),Q=!g&&!m&&g!==0,ie=dt=>{var Ge,We;q(Q?!1:dt),Q||((Ge=n.onOpenChange)===null||Ge===void 0||Ge.call(n,dt),(We=n.onVisibleChange)===null||We===void 0||We.call(n,dt))},oe=C.useMemo(()=>{var dt,Ge;let We=y;return typeof p=="object"&&(We=(Ge=(dt=p.pointAtCenter)!==null&&dt!==void 0?dt:p.arrowPointAtCenter)!==null&&Ge!==void 0?Ge:y),v||kZe({arrowPointAtCenter:We,autoAdjustOverflow:b,arrowWidth:D?k.sizePopupArrow:0,borderRadius:k.borderRadius,offset:k.marginXXS})},[y,p,v,k]),ue=C.useMemo(()=>g===0?g:m||g||"",[m,g]),le=C.createElement(Gm,{space:!0},typeof ue=="function"?ue():ue),me=B("tooltip",a),J=B(),pe=n["data-popover-inject"];let ve=K;!("open"in n)&&!("visible"in n)&&Q&&(ve=!1);const Me=C.isValidElement(u)&&!Kxe(u)?u:C.createElement("span",null,u),Re=Me.props,Xe=!Re.className||typeof Re.className=="string"?Be(Re.className,o||`${me}-open`):Re.className,[He,ee,Y]=bwe(me,!pe),ce=xwe(me,l),_e=ce.arrowStyle,Ae=Be(A,{[`${me}-rtl`]:F==="rtl"},ce.className,P,ee,Y,G,U.root,O==null?void 0:O.root),Ce=Be(U.body,O==null?void 0:O.body),[et,Ve]=dM("Tooltip",I.zIndex),qe=C.createElement(OZe,Object.assign({},I,{zIndex:et,showArrow:D,placement:S,mouseEnterDelay:M,mouseLeaveDelay:E,prefixCls:me,classNames:{root:Ae,body:Ce},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_e),H.root),z),T),N==null?void 0:N.root),body:Object.assign(Object.assign(Object.assign(Object.assign({},H.body),c),N==null?void 0:N.body),ce.overlayStyle)},getTooltipContainer:_||s||$,ref:V,builtinPlacements:oe,overlay:le,visible:ve,onVisibleChange:ie,afterVisibleChange:d??f,arrowContent:C.createElement("span",{className:`${me}-arrow-content`}),motion:{motionName:dy(J,"zoom-big-fast",n.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!h}),ve?Vm(Me,{className:Xe}):Me);return He(C.createElement(dY.Provider,{value:Ve},qe))}),FY=GZe;FY._InternalPanelDoNotUseOrYouWillBeFired=UZe;const jZe=n=>{const{componentCls:e,popoverColor:r,titleMinWidth:i,fontWeightStrong:a,innerPadding:o,boxShadowSecondary:s,colorTextHeading:l,borderRadiusLG:c,zIndexPopup:u,titleMarginBottom:d,colorBgElevated:f,popoverBg:h,titleBorderBottom:p,innerContentPadding:g,titlePadding:m}=n;return[{[e]:Object.assign(Object.assign({},ts(n)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:u,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":f,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${e}-content`]:{position:"relative"},[`${e}-inner`]:{backgroundColor:h,backgroundClip:"padding-box",borderRadius:c,boxShadow:s,padding:o},[`${e}-title`]:{minWidth:i,marginBottom:d,color:l,fontWeight:a,borderBottom:p,padding:m},[`${e}-inner-content`]:{color:r,padding:g}})},ywe(n,"var(--antd-arrow-background-color)"),{[`${e}-pure`]:{position:"relative",maxWidth:"none",margin:n.sizePopupArrow,display:"inline-block",[`${e}-content`]:{display:"inline-block"}}}]},HZe=n=>{const{componentCls:e}=n;return{[e]:Um.map(r=>{const i=n[`${r}6`];return{[`&${e}-${r}`]:{"--antd-arrow-background-color":i,[`${e}-inner`]:{backgroundColor:i},[`${e}-arrow`]:{background:"transparent"}}}})}},WZe=n=>{const{lineWidth:e,controlHeight:r,fontHeight:i,padding:a,wireframe:o,zIndexPopupBase:s,borderRadiusLG:l,marginXS:c,lineType:u,colorSplit:d,paddingSM:f}=n,h=r-i,p=h/2,g=h/2-e,m=a;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:s+30},LY(n)),kY({contentRadius:l,limitVerticalRadius:!0})),{innerPadding:o?0:12,titleMarginBottom:o?0:c,titlePadding:o?`${p}px ${m}px ${g}px`:0,titleBorderBottom:o?`${e}px ${u} ${d}`:"none",innerContentPadding:o?`${f}px ${m}px`:0})},_we=Ja("Popover",n=>{const{colorBgElevated:e,colorText:r}=n,i=Qr(n,{popoverBg:e,popoverColor:r});return[jZe(i),HZe(i),bY(i,"zoom-big")]},WZe,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var qZe=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const wwe=n=>{let{title:e,content:r,prefixCls:i}=n;return!e&&!r?null:C.createElement(C.Fragment,null,e&&C.createElement("div",{className:`${i}-title`},e),r&&C.createElement("div",{className:`${i}-inner-content`},r))},YZe=n=>{const{hashId:e,prefixCls:r,className:i,style:a,placement:o="top",title:s,content:l,children:c}=n,u=BN(s),d=BN(l),f=Be(e,r,`${r}-pure`,`${r}-placement-${o}`,i);return C.createElement("div",{className:f,style:a},C.createElement("div",{className:`${r}-arrow`}),C.createElement(DY,Object.assign({},n,{className:e,prefixCls:r}),c||C.createElement(wwe,{prefixCls:r,title:u,content:d})))},XZe=n=>{const{prefixCls:e,className:r}=n,i=qZe(n,["prefixCls","className"]),{getPrefixCls:a}=C.useContext(yr),o=a("popover",e),[s,l,c]=_we(o);return s(C.createElement(YZe,Object.assign({},i,{prefixCls:o,hashId:l,className:Be(r,c)})))};var KZe=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const ZZe=C.forwardRef((n,e)=>{var r,i;const{prefixCls:a,title:o,content:s,overlayClassName:l,placement:c="top",trigger:u="hover",children:d,mouseEnterDelay:f=.1,mouseLeaveDelay:h=.1,onOpenChange:p,overlayStyle:g={},styles:m,classNames:v}=n,y=KZe(n,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle","styles","classNames"]),{getPrefixCls:b,className:x,style:_,classNames:S,styles:M}=Zu("popover"),E=b("popover",a),[T,P,A]=_we(E),N=b(),O=Be(l,P,A,x,S.root,v==null?void 0:v.root),I=Be(S.body,v==null?void 0:v.body),[D,k]=es(!1,{value:(r=n.open)!==null&&r!==void 0?r:n.visible,defaultValue:(i=n.defaultOpen)!==null&&i!==void 0?i:n.defaultVisible}),$=(U,H)=>{k(U,!0),p==null||p(U,H)},B=U=>{U.keyCode===Xn.ESC&&$(!1,U)},F=U=>{$(U)},G=BN(o),z=BN(s);return T(C.createElement(FY,Object.assign({placement:c,trigger:u,mouseEnterDelay:f,mouseLeaveDelay:h},y,{prefixCls:E,classNames:{root:O,body:I},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},M.root),_),g),m==null?void 0:m.root),body:Object.assign(Object.assign({},M.body),m==null?void 0:m.body)},ref:e,open:D,onOpenChange:F,overlay:G||z?C.createElement(wwe,{prefixCls:E,title:G,content:z}):null,transitionName:dy(N,"zoom-big",y.transitionName),"data-popover-inject":!0}),Vm(d,{onKeyDown:U=>{var H,X;C.isValidElement(d)&&((X=d==null?void 0:(H=d.props).onKeyDown)===null||X===void 0||X.call(H,U)),B(U)}})))}),$Y=ZZe;$Y._InternalPanelDoNotUseOrYouWillBeFired=XZe;var Swe={exports:{}};(function(n,e){(function(r,i){n.exports=i()})(Qo,function(){var r=1e3,i=6e4,a=36e5,o="millisecond",s="second",l="minute",c="hour",u="day",d="week",f="month",h="quarter",p="year",g="date",m="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(D){var k=["th","st","nd","rd"],$=D%100;return"["+D+(k[($-20)%10]||k[$]||k[0])+"]"}},x=function(D,k,$){var B=String(D);return!B||B.length>=k?D:""+Array(k+1-B.length).join($)+D},_={s:x,z:function(D){var k=-D.utcOffset(),$=Math.abs(k),B=Math.floor($/60),F=$%60;return(k<=0?"+":"-")+x(B,2,"0")+":"+x(F,2,"0")},m:function D(k,$){if(k.date()<$.date())return-D($,k);var B=12*($.year()-k.year())+($.month()-k.month()),F=k.clone().add(B,f),G=$-F<0,z=k.clone().add(B+(G?-1:1),f);return+(-(B+($-F)/(G?F-z:z-F))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:f,y:p,w:d,d:u,D:g,h:c,m:l,s,ms:o,Q:h}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return D===void 0}},S="en",M={};M[S]=b;var E="$isDayjsObject",T=function(D){return D instanceof O||!(!D||!D[E])},P=function D(k,$,B){var F;if(!k)return S;if(typeof k=="string"){var G=k.toLowerCase();M[G]&&(F=G),$&&(M[G]=$,F=G);var z=k.split("-");if(!F&&z.length>1)return D(z[0])}else{var U=k.name;M[U]=k,F=U}return!B&&F&&(S=F),F||!B&&S},A=function(D,k){if(T(D))return D.clone();var $=typeof k=="object"?k:{};return $.date=D,$.args=arguments,new O($)},N=_;N.l=P,N.i=T,N.w=function(D,k){return A(D,{locale:k.$L,utc:k.$u,x:k.$x,$offset:k.$offset})};var O=function(){function D($){this.$L=P($.locale,null,!0),this.parse($),this.$x=this.$x||$.x||{},this[E]=!0}var k=D.prototype;return k.parse=function($){this.$d=function(B){var F=B.date,G=B.utc;if(F===null)return new Date(NaN);if(N.u(F))return new Date;if(F instanceof Date)return new Date(F);if(typeof F=="string"&&!/Z$/i.test(F)){var z=F.match(v);if(z){var U=z[2]-1||0,H=(z[7]||"0").substring(0,3);return G?new Date(Date.UTC(z[1],U,z[3]||1,z[4]||0,z[5]||0,z[6]||0,H)):new Date(z[1],U,z[3]||1,z[4]||0,z[5]||0,z[6]||0,H)}}return new Date(F)}($),this.init()},k.init=function(){var $=this.$d;this.$y=$.getFullYear(),this.$M=$.getMonth(),this.$D=$.getDate(),this.$W=$.getDay(),this.$H=$.getHours(),this.$m=$.getMinutes(),this.$s=$.getSeconds(),this.$ms=$.getMilliseconds()},k.$utils=function(){return N},k.isValid=function(){return this.$d.toString()!==m},k.isSame=function($,B){var F=A($);return this.startOf(B)<=F&&F<=this.endOf(B)},k.isAfter=function($,B){return A($)<this.startOf(B)},k.isBefore=function($,B){return this.endOf(B)<A($)},k.$g=function($,B,F){return N.u($)?this[B]:this.set(F,$)},k.unix=function(){return Math.floor(this.valueOf()/1e3)},k.valueOf=function(){return this.$d.getTime()},k.startOf=function($,B){var F=this,G=!!N.u(B)||B,z=N.p($),U=function(ie,oe){var ue=N.w(F.$u?Date.UTC(F.$y,oe,ie):new Date(F.$y,oe,ie),F);return G?ue:ue.endOf(u)},H=function(ie,oe){return N.w(F.toDate()[ie].apply(F.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(oe)),F)},X=this.$W,V=this.$M,W=this.$D,K="set"+(this.$u?"UTC":"");switch(z){case p:return G?U(1,0):U(31,11);case f:return G?U(1,V):U(0,V+1);case d:var q=this.$locale().weekStart||0,Q=(X<q?X+7:X)-q;return U(G?W-Q:W+(6-Q),V);case u:case g:return H(K+"Hours",0);case c:return H(K+"Minutes",1);case l:return H(K+"Seconds",2);case s:return H(K+"Milliseconds",3);default:return this.clone()}},k.endOf=function($){return this.startOf($,!1)},k.$set=function($,B){var F,G=N.p($),z="set"+(this.$u?"UTC":""),U=(F={},F[u]=z+"Date",F[g]=z+"Date",F[f]=z+"Month",F[p]=z+"FullYear",F[c]=z+"Hours",F[l]=z+"Minutes",F[s]=z+"Seconds",F[o]=z+"Milliseconds",F)[G],H=G===u?this.$D+(B-this.$W):B;if(G===f||G===p){var X=this.clone().set(g,1);X.$d[U](H),X.init(),this.$d=X.set(g,Math.min(this.$D,X.daysInMonth())).$d}else U&&this.$d[U](H);return this.init(),this},k.set=function($,B){return this.clone().$set($,B)},k.get=function($){return this[N.p($)]()},k.add=function($,B){var F,G=this;$=Number($);var z=N.p(B),U=function(V){var W=A(G);return N.w(W.date(W.date()+Math.round(V*$)),G)};if(z===f)return this.set(f,this.$M+$);if(z===p)return this.set(p,this.$y+$);if(z===u)return U(1);if(z===d)return U(7);var H=(F={},F[l]=i,F[c]=a,F[s]=r,F)[z]||1,X=this.$d.getTime()+$*H;return N.w(X,this)},k.subtract=function($,B){return this.add(-1*$,B)},k.format=function($){var B=this,F=this.$locale();if(!this.isValid())return F.invalidDate||m;var G=$||"YYYY-MM-DDTHH:mm:ssZ",z=N.z(this),U=this.$H,H=this.$m,X=this.$M,V=F.weekdays,W=F.months,K=F.meridiem,q=function(oe,ue,le,me){return oe&&(oe[ue]||oe(B,G))||le[ue].slice(0,me)},Q=function(oe){return N.s(U%12||12,oe,"0")},ie=K||function(oe,ue,le){var me=oe<12?"AM":"PM";return le?me.toLowerCase():me};return G.replace(y,function(oe,ue){return ue||function(le){switch(le){case"YY":return String(B.$y).slice(-2);case"YYYY":return N.s(B.$y,4,"0");case"M":return X+1;case"MM":return N.s(X+1,2,"0");case"MMM":return q(F.monthsShort,X,W,3);case"MMMM":return q(W,X);case"D":return B.$D;case"DD":return N.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return q(F.weekdaysMin,B.$W,V,2);case"ddd":return q(F.weekdaysShort,B.$W,V,3);case"dddd":return V[B.$W];case"H":return String(U);case"HH":return N.s(U,2,"0");case"h":return Q(1);case"hh":return Q(2);case"a":return ie(U,H,!0);case"A":return ie(U,H,!1);case"m":return String(H);case"mm":return N.s(H,2,"0");case"s":return String(B.$s);case"ss":return N.s(B.$s,2,"0");case"SSS":return N.s(B.$ms,3,"0");case"Z":return z}return null}(oe)||z.replace(":","")})},k.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},k.diff=function($,B,F){var G,z=this,U=N.p(B),H=A($),X=(H.utcOffset()-this.utcOffset())*i,V=this-H,W=function(){return N.m(z,H)};switch(U){case p:G=W()/12;break;case f:G=W();break;case h:G=W()/3;break;case d:G=(V-X)/6048e5;break;case u:G=(V-X)/864e5;break;case c:G=V/a;break;case l:G=V/i;break;case s:G=V/r;break;default:G=V}return F?G:N.a(G)},k.daysInMonth=function(){return this.endOf(f).$D},k.$locale=function(){return M[this.$L]},k.locale=function($,B){if(!$)return this.$L;var F=this.clone(),G=P($,B,!0);return G&&(F.$L=G),F},k.clone=function(){return N.w(this.$d,this)},k.toDate=function(){return new Date(this.valueOf())},k.toJSON=function(){return this.isValid()?this.toISOString():null},k.toISOString=function(){return this.$d.toISOString()},k.toString=function(){return this.$d.toUTCString()},D}(),I=O.prototype;return A.prototype=I,[["$ms",o],["$s",s],["$m",l],["$H",c],["$W",u],["$M",f],["$y",p],["$D",g]].forEach(function(D){I[D[1]]=function(k){return this.$g(k,D[0],D[1])}}),A.extend=function(D,k){return D.$i||(D(k,O,A),D.$i=!0),A},A.locale=P,A.isDayjs=T,A.unix=function(D){return A(1e3*D)},A.en=M[S],A.Ls=M,A.p={},A})})(Swe);var QZe=Swe.exports;const Fs=Sl(QZe);var Ewe={exports:{}};(function(n,e){(function(r,i){n.exports=i()})(Qo,function(){return function(r,i){i.prototype.weekday=function(a){var o=this.$locale().weekStart||0,s=this.$W,l=(s<o?s+7:s)-o;return this.$utils().u(a)?l:this.subtract(l,"day").add(a,"day")}}})})(Ewe);var JZe=Ewe.exports;const eQe=Sl(JZe);var Cwe={exports:{}};(function(n,e){(function(r,i){n.exports=i()})(Qo,function(){return function(r,i,a){var o=i.prototype,s=function(f){return f&&(f.indexOf?f:f.s)},l=function(f,h,p,g,m){var v=f.name?f:f.$locale(),y=s(v[h]),b=s(v[p]),x=y||b.map(function(S){return S.slice(0,g)});if(!m)return x;var _=v.weekStart;return x.map(function(S,M){return x[(M+(_||0))%7]})},c=function(){return a.Ls[a.locale()]},u=function(f,h){return f.formats[h]||function(p){return p.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(g,m,v){return m||v.slice(1)})}(f.formats[h.toUpperCase()])},d=function(){var f=this;return{months:function(h){return h?h.format("MMMM"):l(f,"months")},monthsShort:function(h){return h?h.format("MMM"):l(f,"monthsShort","months",3)},firstDayOfWeek:function(){return f.$locale().weekStart||0},weekdays:function(h){return h?h.format("dddd"):l(f,"weekdays")},weekdaysMin:function(h){return h?h.format("dd"):l(f,"weekdaysMin","weekdays",2)},weekdaysShort:function(h){return h?h.format("ddd"):l(f,"weekdaysShort","weekdays",3)},longDateFormat:function(h){return u(f.$locale(),h)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};o.localeData=function(){return d.bind(this)()},a.localeData=function(){var f=c();return{firstDayOfWeek:function(){return f.weekStart||0},weekdays:function(){return a.weekdays()},weekdaysShort:function(){return a.weekdaysShort()},weekdaysMin:function(){return a.weekdaysMin()},months:function(){return a.months()},monthsShort:function(){return a.monthsShort()},longDateFormat:function(h){return u(f,h)},meridiem:f.meridiem,ordinal:f.ordinal}},a.months=function(){return l(c(),"months")},a.monthsShort=function(){return l(c(),"monthsShort","months",3)},a.weekdays=function(f){return l(c(),"weekdays",null,null,f)},a.weekdaysShort=function(f){return l(c(),"weekdaysShort","weekdays",3,f)},a.weekdaysMin=function(f){return l(c(),"weekdaysMin","weekdays",2,f)}}})})(Cwe);var tQe=Cwe.exports;const nQe=Sl(tQe);var Mwe={exports:{}};(function(n,e){(function(r,i){n.exports=i()})(Qo,function(){var r="week",i="year";return function(a,o,s){var l=o.prototype;l.week=function(c){if(c===void 0&&(c=null),c!==null)return this.add(7*(c-this.week()),"day");var u=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var d=s(this).startOf(i).add(1,i).date(u),f=s(this).endOf(r);if(d.isBefore(f))return 1}var h=s(this).startOf(i).date(u).startOf(r).subtract(1,"millisecond"),p=this.diff(h,r,!0);return p<0?s(this).startOf("week").week():Math.ceil(p)},l.weeks=function(c){return c===void 0&&(c=null),this.week(c)}}})})(Mwe);var rQe=Mwe.exports;const iQe=Sl(rQe);var Twe={exports:{}};(function(n,e){(function(r,i){n.exports=i()})(Qo,function(){return function(r,i){i.prototype.weekYear=function(){var a=this.month(),o=this.week(),s=this.year();return o===1&&a===11?s+1:a===0&&o>=52?s-1:s}}})})(Twe);var aQe=Twe.exports;const oQe=Sl(aQe);var Awe={exports:{}};(function(n,e){(function(r,i){n.exports=i()})(Qo,function(){return function(r,i){var a=i.prototype,o=a.format;a.format=function(s){var l=this,c=this.$locale();if(!this.isValid())return o.bind(this)(s);var u=this.$utils(),d=(s||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(f){switch(f){case"Q":return Math.ceil((l.$M+1)/3);case"Do":return c.ordinal(l.$D);case"gggg":return l.weekYear();case"GGGG":return l.isoWeekYear();case"wo":return c.ordinal(l.week(),"W");case"w":case"ww":return u.s(l.week(),f==="w"?1:2,"0");case"W":case"WW":return u.s(l.isoWeek(),f==="W"?1:2,"0");case"k":case"kk":return u.s(String(l.$H===0?24:l.$H),f==="k"?1:2,"0");case"X":return Math.floor(l.$d.getTime()/1e3);case"x":return l.$d.getTime();case"z":return"["+l.offsetName()+"]";case"zzz":return"["+l.offsetName("long")+"]";default:return f}});return o.bind(this)(d)}}})})(Awe);var sQe=Awe.exports;const lQe=Sl(sQe);var Rwe={exports:{}};(function(n,e){(function(r,i){n.exports=i()})(Qo,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d/,o=/\d\d/,s=/\d\d?/,l=/\d*[^-_:/,()\s\d]+/,c={},u=function(v){return(v=+v)+(v>68?1900:2e3)},d=function(v){return function(y){this[v]=+y}},f=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=function(y){if(!y||y==="Z")return 0;var b=y.match(/([+-]|\d\d)/g),x=60*b[1]+(+b[2]||0);return x===0?0:b[0]==="+"?-x:x}(v)}],h=function(v){var y=c[v];return y&&(y.indexOf?y:y.s.concat(y.f))},p=function(v,y){var b,x=c.meridiem;if(x){for(var _=1;_<=24;_+=1)if(v.indexOf(x(_,0,y))>-1){b=_>12;break}}else b=v===(y?"pm":"PM");return b},g={A:[l,function(v){this.afternoon=p(v,!1)}],a:[l,function(v){this.afternoon=p(v,!0)}],Q:[a,function(v){this.month=3*(v-1)+1}],S:[a,function(v){this.milliseconds=100*+v}],SS:[o,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[s,d("seconds")],ss:[s,d("seconds")],m:[s,d("minutes")],mm:[s,d("minutes")],H:[s,d("hours")],h:[s,d("hours")],HH:[s,d("hours")],hh:[s,d("hours")],D:[s,d("day")],DD:[o,d("day")],Do:[l,function(v){var y=c.ordinal,b=v.match(/\d+/);if(this.day=b[0],y)for(var x=1;x<=31;x+=1)y(x).replace(/\[|\]/g,"")===v&&(this.day=x)}],w:[s,d("week")],ww:[o,d("week")],M:[s,d("month")],MM:[o,d("month")],MMM:[l,function(v){var y=h("months"),b=(h("monthsShort")||y.map(function(x){return x.slice(0,3)})).indexOf(v)+1;if(b<1)throw new Error;this.month=b%12||b}],MMMM:[l,function(v){var y=h("months").indexOf(v)+1;if(y<1)throw new Error;this.month=y%12||y}],Y:[/[+-]?\d+/,d("year")],YY:[o,function(v){this.year=u(v)}],YYYY:[/\d{4}/,d("year")],Z:f,ZZ:f};function m(v){var y,b;y=v,b=c&&c.formats;for(var x=(v=y.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(A,N,O){var I=O&&O.toUpperCase();return N||b[O]||r[O]||b[I].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(D,k,$){return k||$.slice(1)})})).match(i),_=x.length,S=0;S<_;S+=1){var M=x[S],E=g[M],T=E&&E[0],P=E&&E[1];x[S]=P?{regex:T,parser:P}:M.replace(/^\[|\]$/g,"")}return function(A){for(var N={},O=0,I=0;O<_;O+=1){var D=x[O];if(typeof D=="string")I+=D.length;else{var k=D.regex,$=D.parser,B=A.slice(I),F=k.exec(B)[0];$.call(N,F),A=A.replace(F,"")}}return function(G){var z=G.afternoon;if(z!==void 0){var U=G.hours;z?U<12&&(G.hours+=12):U===12&&(G.hours=0),delete G.afternoon}}(N),N}}return function(v,y,b){b.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(u=v.parseTwoDigitYear);var x=y.prototype,_=x.parse;x.parse=function(S){var M=S.date,E=S.utc,T=S.args;this.$u=E;var P=T[1];if(typeof P=="string"){var A=T[2]===!0,N=T[3]===!0,O=A||N,I=T[2];N&&(I=T[2]),c=this.$locale(),!A&&I&&(c=b.Ls[I]),this.$d=function(B,F,G,z){try{if(["x","X"].indexOf(F)>-1)return new Date((F==="X"?1e3:1)*B);var U=m(F)(B),H=U.year,X=U.month,V=U.day,W=U.hours,K=U.minutes,q=U.seconds,Q=U.milliseconds,ie=U.zone,oe=U.week,ue=new Date,le=V||(H||X?1:ue.getDate()),me=H||ue.getFullYear(),J=0;H&&!X||(J=X>0?X-1:ue.getMonth());var pe,ve=W||0,Me=K||0,Re=q||0,Xe=Q||0;return ie?new Date(Date.UTC(me,J,le,ve,Me,Re,Xe+60*ie.offset*1e3)):G?new Date(Date.UTC(me,J,le,ve,Me,Re,Xe)):(pe=new Date(me,J,le,ve,Me,Re,Xe),oe&&(pe=z(pe).week(oe).toDate()),pe)}catch{return new Date("")}}(M,P,E,b),this.init(),I&&I!==!0&&(this.$L=this.locale(I).$L),O&&M!=this.format(P)&&(this.$d=new Date("")),c={}}else if(P instanceof Array)for(var D=P.length,k=1;k<=D;k+=1){T[1]=P[k-1];var $=b.apply(this,T);if($.isValid()){this.$d=$.$d,this.$L=$.$L,this.init();break}k===D&&(this.$d=new Date(""))}else _.call(this,S)}}})})(Rwe);var cQe=Rwe.exports;const uQe=Sl(cQe);Fs.extend(uQe);Fs.extend(lQe);Fs.extend(eQe);Fs.extend(nQe);Fs.extend(iQe);Fs.extend(oQe);Fs.extend(function(n,e){var r=e.prototype,i=r.format;r.format=function(o){var s=(o||"").replace("Wo","wo");return i.bind(this)(s)}});var dQe={bn_BD:"bn-bd",by_BY:"be",en_GB:"en-gb",en_US:"en",fr_BE:"fr",fr_CA:"fr-ca",hy_AM:"hy-am",kmr_IQ:"ku",nl_BE:"nl-be",pt_BR:"pt-br",zh_CN:"zh-cn",zh_HK:"zh-hk",zh_TW:"zh-tw"},Lv=function(e){var r=dQe[e];return r||e.split("_")[0]},fQe={getNow:function(){var e=Fs();return typeof e.tz=="function"?e.tz():e},getFixedDate:function(e){return Fs(e,["YYYY-M-DD","YYYY-MM-DD"])},getEndDate:function(e){return e.endOf("month")},getWeekDay:function(e){var r=e.locale("en");return r.weekday()+r.localeData().firstDayOfWeek()},getYear:function(e){return e.year()},getMonth:function(e){return e.month()},getDate:function(e){return e.date()},getHour:function(e){return e.hour()},getMinute:function(e){return e.minute()},getSecond:function(e){return e.second()},getMillisecond:function(e){return e.millisecond()},addYear:function(e,r){return e.add(r,"year")},addMonth:function(e,r){return e.add(r,"month")},addDate:function(e,r){return e.add(r,"day")},setYear:function(e,r){return e.year(r)},setMonth:function(e,r){return e.month(r)},setDate:function(e,r){return e.date(r)},setHour:function(e,r){return e.hour(r)},setMinute:function(e,r){return e.minute(r)},setSecond:function(e,r){return e.second(r)},setMillisecond:function(e,r){return e.millisecond(r)},isAfter:function(e,r){return e.isAfter(r)},isValidate:function(e){return e.isValid()},locale:{getWeekFirstDay:function(e){return Fs().locale(Lv(e)).localeData().firstDayOfWeek()},getWeekFirstDate:function(e,r){return r.locale(Lv(e)).weekday(0)},getWeek:function(e,r){return r.locale(Lv(e)).week()},getShortWeekDays:function(e){return Fs().locale(Lv(e)).localeData().weekdaysMin()},getShortMonths:function(e){return Fs().locale(Lv(e)).localeData().monthsShort()},format:function(e,r,i){return r.locale(Lv(e)).format(i)},parse:function(e,r,i){for(var a=Lv(e),o=0;o<i.length;o+=1){var s=i[o],l=r;if(s.includes("wo")||s.includes("Wo")){for(var c=l.split("-")[0],u=l.split("-")[1],d=Fs(c,"YYYY").startOf("year").locale(a),f=0;f<=52;f+=1){var h=d.add(f,"week");if(h.format("Wo")===u)return h}return null}var p=Fs(l,s,!0).locale(a);if(p.isValid())return p}return null}}};function hQe(n,e){return n!==void 0?n:e?"bottomRight":"bottomLeft"}var of=C.createContext(null),pQe={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}};function Pwe(n){var e=n.popupElement,r=n.popupStyle,i=n.popupClassName,a=n.popupAlign,o=n.transitionName,s=n.getPopupContainer,l=n.children,c=n.range,u=n.placement,d=n.builtinPlacements,f=d===void 0?pQe:d,h=n.direction,p=n.visible,g=n.onClose,m=C.useContext(of),v=m.prefixCls,y="".concat(v,"-dropdown"),b=hQe(u,h==="rtl");return C.createElement(RY,{showAction:[],hideAction:["click"],popupPlacement:b,builtinPlacements:f,prefixCls:y,popupTransitionName:o,popup:e,popupAlign:a,popupVisible:p,popupClassName:Be(i,re(re({},"".concat(y,"-range"),c),"".concat(y,"-rtl"),h==="rtl")),popupStyle:r,stretch:"minWidth",getPopupContainer:s,onPopupVisibleChange:function(_){_||g()}},l)}function BY(n,e){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0",i=String(n);i.length<e;)i="".concat(r).concat(i);return i}function Fy(n){return n==null?[]:Array.isArray(n)?n:[n]}function z2(n,e,r){var i=ot(n);return i[e]=r,i}function L4(n,e){var r={},i=e||Object.keys(n);return i.forEach(function(a){n[a]!==void 0&&(r[a]=n[a])}),r}function Nwe(n,e,r){if(r)return r;switch(n){case"time":return e.fieldTimeFormat;case"datetime":return e.fieldDateTimeFormat;case"month":return e.fieldMonthFormat;case"year":return e.fieldYearFormat;case"quarter":return e.fieldQuarterFormat;case"week":return e.fieldWeekFormat;default:return e.fieldDateFormat}}function Owe(n,e,r){var i=r!==void 0?r:e[e.length-1],a=e.find(function(o){return n[o]});return i!==a?n[a]:void 0}function Iwe(n){return L4(n,["placement","builtinPlacements","popupAlign","getPopupContainer","transitionName","direction"])}function zY(n,e,r,i){var a=C.useMemo(function(){return n||function(s,l){var c=s;return e&&l.type==="date"?e(c,l.today):r&&l.type==="month"?r(c,l.locale):l.originNode}},[n,r,e]),o=C.useCallback(function(s,l){return a(s,se(se({},l),{},{range:i}))},[a,i]);return o}function Dwe(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],i=C.useState([!1,!1]),a=fe(i,2),o=a[0],s=a[1],l=function(d,f){s(function(h){return z2(h,f,d)})},c=C.useMemo(function(){return o.map(function(u,d){if(u)return!0;var f=n[d];return f?!!(!r[d]&&!f||f&&e(f,{activeIndex:d})):!1})},[n,o,e,r]);return[c,l]}function Lwe(n,e,r,i,a){var o="",s=[];return n&&s.push(a?"hh":"HH"),e&&s.push("mm"),r&&s.push("ss"),o=s.join(":"),i&&(o+=".SSS"),a&&(o+=" A"),o}function gQe(n,e,r,i,a,o){var s=n.fieldDateTimeFormat,l=n.fieldDateFormat,c=n.fieldTimeFormat,u=n.fieldMonthFormat,d=n.fieldYearFormat,f=n.fieldWeekFormat,h=n.fieldQuarterFormat,p=n.yearFormat,g=n.cellYearFormat,m=n.cellQuarterFormat,v=n.dayFormat,y=n.cellDateFormat,b=Lwe(e,r,i,a,o);return se(se({},n),{},{fieldDateTimeFormat:s||"YYYY-MM-DD ".concat(b),fieldDateFormat:l||"YYYY-MM-DD",fieldTimeFormat:c||b,fieldMonthFormat:u||"YYYY-MM",fieldYearFormat:d||"YYYY",fieldWeekFormat:f||"gggg-wo",fieldQuarterFormat:h||"YYYY-[Q]Q",yearFormat:p||"YYYY",cellYearFormat:g||"YYYY",cellQuarterFormat:m||"[Q]Q",cellDateFormat:y||v||"D"})}function kwe(n,e){var r=e.showHour,i=e.showMinute,a=e.showSecond,o=e.showMillisecond,s=e.use12Hours;return Je.useMemo(function(){return gQe(n,r,i,a,o,s)},[n,r,i,a,o,s])}function oS(n,e,r){return r??e.some(function(i){return n.includes(i)})}var mQe=["showNow","showHour","showMinute","showSecond","showMillisecond","use12Hours","hourStep","minuteStep","secondStep","millisecondStep","hideDisabledOptions","defaultValue","disabledHours","disabledMinutes","disabledSeconds","disabledMilliseconds","disabledTime","changeOnScroll","defaultOpenValue"];function vQe(n){var e=L4(n,mQe),r=n.format,i=n.picker,a=null;return r&&(a=r,Array.isArray(a)&&(a=a[0]),a=vn(a)==="object"?a.format:a),i==="time"&&(e.format=a),[e,a]}function yQe(n){return n&&typeof n=="string"}function Fwe(n,e,r,i){return[n,e,r,i].some(function(a){return a!==void 0})}function $we(n,e,r,i,a){var o=e,s=r,l=i;if(!n&&!o&&!s&&!l&&!a)o=!0,s=!0,l=!0;else if(n){var c,u,d,f=[o,s,l].some(function(g){return g===!1}),h=[o,s,l].some(function(g){return g===!0}),p=f?!0:!h;o=(c=o)!==null&&c!==void 0?c:p,s=(u=s)!==null&&u!==void 0?u:p,l=(d=l)!==null&&d!==void 0?d:p}return[o,s,l,a]}function Bwe(n){var e=n.showTime,r=vQe(n),i=fe(r,2),a=i[0],o=i[1],s=e&&vn(e)==="object"?e:{},l=se(se({defaultOpenValue:s.defaultOpenValue||s.defaultValue},a),s),c=l.showMillisecond,u=l.showHour,d=l.showMinute,f=l.showSecond,h=Fwe(u,d,f,c),p=$we(h,u,d,f,c),g=fe(p,3);return u=g[0],d=g[1],f=g[2],[l,se(se({},l),{},{showHour:u,showMinute:d,showSecond:f,showMillisecond:c}),l.format,o]}function zwe(n,e,r,i,a){var o=n==="time";if(n==="datetime"||o){for(var s=i,l=Nwe(n,a,null),c=l,u=[e,r],d=0;d<u.length;d+=1){var f=Fy(u[d])[0];if(yQe(f)){c=f;break}}var h=s.showHour,p=s.showMinute,g=s.showSecond,m=s.showMillisecond,v=s.use12Hours,y=oS(c,["a","A","LT","LLL","LTS"],v),b=Fwe(h,p,g,m);b||(h=oS(c,["H","h","k","LT","LLL"]),p=oS(c,["m","LT","LLL"]),g=oS(c,["s","LTS"]),m=oS(c,["SSS"]));var x=$we(b,h,p,g,m),_=fe(x,3);h=_[0],p=_[1],g=_[2];var S=e||Lwe(h,p,g,m,y);return se(se({},s),{},{format:S,showHour:h,showMinute:p,showSecond:g,showMillisecond:m,use12Hours:y})}return null}function bQe(n,e,r){if(e===!1)return null;var i=e&&vn(e)==="object"?e:{};return i.clearIcon||r||C.createElement("span",{className:"".concat(n,"-clear-btn")})}var j5=7;function sv(n,e,r){return!n&&!e||n===e?!0:!n||!e?!1:r()}function oj(n,e,r){return sv(e,r,function(){var i=Math.floor(n.getYear(e)/10),a=Math.floor(n.getYear(r)/10);return i===a})}function hy(n,e,r){return sv(e,r,function(){return n.getYear(e)===n.getYear(r)})}function qie(n,e){var r=Math.floor(n.getMonth(e)/3);return r+1}function xQe(n,e,r){return sv(e,r,function(){return hy(n,e,r)&&qie(n,e)===qie(n,r)})}function UY(n,e,r){return sv(e,r,function(){return hy(n,e,r)&&n.getMonth(e)===n.getMonth(r)})}function VY(n,e,r){return sv(e,r,function(){return hy(n,e,r)&&UY(n,e,r)&&n.getDate(e)===n.getDate(r)})}function Uwe(n,e,r){return sv(e,r,function(){return n.getHour(e)===n.getHour(r)&&n.getMinute(e)===n.getMinute(r)&&n.getSecond(e)===n.getSecond(r)})}function Vwe(n,e,r){return sv(e,r,function(){return VY(n,e,r)&&Uwe(n,e,r)&&n.getMillisecond(e)===n.getMillisecond(r)})}function e2(n,e,r,i){return sv(r,i,function(){var a=n.locale.getWeekFirstDate(e,r),o=n.locale.getWeekFirstDate(e,i);return hy(n,a,o)&&n.locale.getWeek(e,r)===n.locale.getWeek(e,i)})}function Us(n,e,r,i,a){switch(a){case"date":return VY(n,r,i);case"week":return e2(n,e.locale,r,i);case"month":return UY(n,r,i);case"quarter":return xQe(n,r,i);case"year":return hy(n,r,i);case"decade":return oj(n,r,i);case"time":return Uwe(n,r,i);default:return Vwe(n,r,i)}}function k4(n,e,r,i){return!e||!r||!i?!1:n.isAfter(i,e)&&n.isAfter(r,i)}function T3(n,e,r,i,a){return Us(n,e,r,i,a)?!0:n.isAfter(r,i)}function _Qe(n,e,r){var i=e.locale.getWeekFirstDay(n),a=e.setDate(r,1),o=e.getWeekDay(a),s=e.addDate(a,i-o);return e.getMonth(s)===e.getMonth(r)&&e.getDate(s)>1&&(s=e.addDate(s,-7)),s}function Io(n,e){var r=e.generateConfig,i=e.locale,a=e.format;return n?typeof a=="function"?a(n):r.locale.format(i.locale,n,a):""}function zN(n,e,r){var i=e,a=["getHour","getMinute","getSecond","getMillisecond"],o=["setHour","setMinute","setSecond","setMillisecond"];return o.forEach(function(s,l){r?i=n[s](i,n[a[l]](r)):i=n[s](i,0)}),i}function wQe(n,e,r,i,a){var o=Lr(function(s,l){return!!(r&&r(s,l)||i&&n.isAfter(i,s)&&!Us(n,e,i,s,l.type)||a&&n.isAfter(s,a)&&!Us(n,e,a,s,l.type))});return o}function SQe(n,e,r){return C.useMemo(function(){var i=Nwe(n,e,r),a=Fy(i),o=a[0],s=vn(o)==="object"&&o.type==="mask"?o.format:null;return[a.map(function(l){return typeof l=="string"||typeof l=="function"?l:l.format}),s]},[n,e,r])}function EQe(n,e,r){return typeof n[0]=="function"||r?!0:e}function CQe(n,e,r,i){var a=Lr(function(o,s){var l=se({type:e},s);if(delete l.activeIndex,!n.isValidate(o)||r&&r(o,l))return!0;if((e==="date"||e==="time")&&i){var c,u=s&&s.activeIndex===1?"end":"start",d=((c=i.disabledTime)===null||c===void 0?void 0:c.call(i,o,u,{from:l.from}))||{},f=d.disabledHours,h=d.disabledMinutes,p=d.disabledSeconds,g=d.disabledMilliseconds,m=i.disabledHours,v=i.disabledMinutes,y=i.disabledSeconds,b=f||m,x=h||v,_=p||y,S=n.getHour(o),M=n.getMinute(o),E=n.getSecond(o),T=n.getMillisecond(o);if(b&&b().includes(S)||x&&x(S).includes(M)||_&&_(S,M).includes(E)||g&&g(S,M,E).includes(T))return!0}return!1});return a}function A3(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=C.useMemo(function(){var i=n&&Fy(n);return e&&i&&(i[1]=i[1]||i[0]),i},[n,e]);return r}function Gwe(n,e){var r=n.generateConfig,i=n.locale,a=n.picker,o=a===void 0?"date":a,s=n.prefixCls,l=s===void 0?"rc-picker":s,c=n.styles,u=c===void 0?{}:c,d=n.classNames,f=d===void 0?{}:d,h=n.order,p=h===void 0?!0:h,g=n.components,m=g===void 0?{}:g,v=n.inputRender,y=n.allowClear,b=n.clearIcon,x=n.needConfirm,_=n.multiple,S=n.format,M=n.inputReadOnly,E=n.disabledDate,T=n.minDate,P=n.maxDate,A=n.showTime,N=n.value,O=n.defaultValue,I=n.pickerValue,D=n.defaultPickerValue,k=A3(N),$=A3(O),B=A3(I),F=A3(D),G=o==="date"&&A?"datetime":o,z=G==="time"||G==="datetime",U=z||_,H=x??z,X=Bwe(n),V=fe(X,4),W=V[0],K=V[1],q=V[2],Q=V[3],ie=kwe(i,K),oe=C.useMemo(function(){return zwe(G,q,Q,W,ie)},[G,q,Q,W,ie]),ue=C.useMemo(function(){return se(se({},n),{},{prefixCls:l,locale:ie,picker:o,styles:u,classNames:f,order:p,components:se({input:v},m),clearIcon:bQe(l,y,b),showTime:oe,value:k,defaultValue:$,pickerValue:B,defaultPickerValue:F},e==null?void 0:e())},[n]),le=SQe(G,ie,S),me=fe(le,2),J=me[0],pe=me[1],ve=EQe(J,M,_),Me=wQe(r,i,E,T,P),Re=CQe(r,o,Me,oe),Xe=C.useMemo(function(){return se(se({},ue),{},{needConfirm:H,inputReadOnly:ve,disabledDate:Me})},[ue,H,ve,Me]);return[Xe,G,U,J,pe,Re]}function MQe(n,e,r){var i=es(e,{value:n}),a=fe(i,2),o=a[0],s=a[1],l=Je.useRef(n),c=Je.useRef(),u=function(){Gr.cancel(c.current)},d=Lr(function(){s(l.current),r&&o!==l.current&&r(l.current)}),f=Lr(function(h,p){u(),l.current=h,h||p?d():c.current=Gr(d)});return Je.useEffect(function(){return u},[]),[o,f]}function jwe(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,a=r.every(function(d){return d})?!1:n,o=MQe(a,e||!1,i),s=fe(o,2),l=s[0],c=s[1];function u(d){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!f.inherit||l)&&c(d,f.force)}return[l,u]}function Hwe(n){var e=C.useRef();return C.useImperativeHandle(n,function(){var r;return{nativeElement:(r=e.current)===null||r===void 0?void 0:r.nativeElement,focus:function(a){var o;(o=e.current)===null||o===void 0||o.focus(a)},blur:function(){var a;(a=e.current)===null||a===void 0||a.blur()}}}),e}function Wwe(n,e){return C.useMemo(function(){return n||(e?(Hs(!1,"`ranges` is deprecated. Please use `presets` instead."),Object.entries(e).map(function(r){var i=fe(r,2),a=i[0],o=i[1];return{label:a,value:o}})):[])},[n,e])}function GY(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=C.useRef(e);i.current=e,ax(function(){if(n)i.current(n);else{var a=Gr(function(){i.current(n)},r);return function(){Gr.cancel(a)}}},[n])}function qwe(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=C.useState(0),a=fe(i,2),o=a[0],s=a[1],l=C.useState(!1),c=fe(l,2),u=c[0],d=c[1],f=C.useRef([]),h=C.useRef(null),p=C.useRef(null),g=function(_){h.current=_},m=function(_){return h.current===_},v=function(_){d(_)},y=function(_){return _&&(p.current=_),p.current},b=function(_){var S=f.current,M=new Set(S.filter(function(T){return _[T]||e[T]})),E=S[S.length-1]===0?1:0;return M.size>=2||n[E]?null:E};return GY(u||r,function(){u||(f.current=[],g(null))}),C.useEffect(function(){u&&f.current.push(o)},[u,o]),[u,v,y,o,s,b,f.current,g,m]}function TQe(n,e,r,i,a,o){var s=r[r.length-1],l=function(u,d){var f=fe(n,2),h=f[0],p=f[1],g=se(se({},d),{},{from:Owe(n,r)});return s===1&&e[0]&&h&&!Us(i,a,h,u,g.type)&&i.isAfter(h,u)||s===0&&e[1]&&p&&!Us(i,a,p,u,g.type)&&i.isAfter(u,p)?!0:o==null?void 0:o(u,g)};return l}function t2(n,e,r,i){switch(e){case"date":case"week":return n.addMonth(r,i);case"month":case"quarter":return n.addYear(r,i);case"year":return n.addYear(r,i*10);case"decade":return n.addYear(r,i*100);default:return r}}var H5=[];function Ywe(n,e,r,i,a,o,s,l){var c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:H5,u=arguments.length>9&&arguments[9]!==void 0?arguments[9]:H5,d=arguments.length>10&&arguments[10]!==void 0?arguments[10]:H5,f=arguments.length>11?arguments[11]:void 0,h=arguments.length>12?arguments[12]:void 0,p=arguments.length>13?arguments[13]:void 0,g=s==="time",m=o||0,v=function(B){var F=n.getNow();return g&&(F=zN(n,F)),c[B]||r[B]||F},y=fe(u,2),b=y[0],x=y[1],_=es(function(){return v(0)},{value:b}),S=fe(_,2),M=S[0],E=S[1],T=es(function(){return v(1)},{value:x}),P=fe(T,2),A=P[0],N=P[1],O=C.useMemo(function(){var $=[M,A][m];return g?$:zN(n,$,d[m])},[g,M,A,m,n,d]),I=function(B){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"panel",G=[E,N][m];G(B);var z=[M,A];z[m]=B,f&&(!Us(n,e,M,z[0],s)||!Us(n,e,A,z[1],s))&&f(z,{source:F,range:m===1?"end":"start",mode:i})},D=function(B,F){if(l){var G={date:"month",week:"month",month:"year",quarter:"year"},z=G[s];if(z&&!Us(n,e,B,F,z))return t2(n,s,F,-1);if(s==="year"&&B){var U=Math.floor(n.getYear(B)/10),H=Math.floor(n.getYear(F)/10);if(U!==H)return t2(n,s,F,-1)}}return F},k=C.useRef(null);return Dr(function(){if(a&&!c[m]){var $=g?null:n.getNow();if(k.current!==null&&k.current!==m?$=[M,A][m^1]:r[m]?$=m===0?r[0]:D(r[0],r[1]):r[m^1]&&($=r[m^1]),$){h&&n.isAfter(h,$)&&($=h);var B=l?t2(n,s,$,1):$;p&&n.isAfter(B,p)&&($=l?t2(n,s,p,-1):p),I($,"reset")}}},[a,m,r[m]]),C.useEffect(function(){a?k.current=m:k.current=null},[a,m]),Dr(function(){a&&c&&c[m]&&I(c[m],"reset")},[a,m]),[O,I]}function Xwe(n,e){var r=C.useRef(n),i=C.useState({}),a=fe(i,2),o=a[1],s=function(u){return u&&e!==void 0?e:r.current},l=function(u){r.current=u,o({})};return[s,l,s(!0)]}var AQe=[];function Kwe(n,e,r){var i=function(s){return s.map(function(l){return Io(l,{generateConfig:n,locale:e,format:r[0]})})},a=function(s,l){for(var c=Math.max(s.length,l.length),u=-1,d=0;d<c;d+=1){var f=s[d]||null,h=l[d]||null;if(f!==h&&!Vwe(n,f,h)){u=d;break}}return[u<0,u!==0]};return[i,a]}function Zwe(n,e){return ot(n).sort(function(r,i){return e.isAfter(r,i)?1:-1})}function RQe(n){var e=Xwe(n),r=fe(e,2),i=r[0],a=r[1],o=Lr(function(){a(n)});return C.useEffect(function(){o()},[n]),[i,a]}function Qwe(n,e,r,i,a,o,s,l,c){var u=es(o,{value:s}),d=fe(u,2),f=d[0],h=d[1],p=f||AQe,g=RQe(p),m=fe(g,2),v=m[0],y=m[1],b=Kwe(n,e,r),x=fe(b,2),_=x[0],S=x[1],M=Lr(function(T){var P=ot(T);if(i)for(var A=0;A<2;A+=1)P[A]=P[A]||null;else a&&(P=Zwe(P.filter(function($){return $}),n));var N=S(v(),P),O=fe(N,2),I=O[0],D=O[1];if(!I&&(y(P),l)){var k=_(P);l(P,k,{range:D?"end":"start"})}}),E=function(){c&&c(v())};return[p,h,v,M,E]}function Jwe(n,e,r,i,a,o,s,l,c,u){var d=n.generateConfig,f=n.locale,h=n.picker,p=n.onChange,g=n.allowEmpty,m=n.order,v=o.some(function(I){return I})?!1:m,y=Kwe(d,f,s),b=fe(y,2),x=b[0],_=b[1],S=Xwe(e),M=fe(S,2),E=M[0],T=M[1],P=Lr(function(){T(e)});C.useEffect(function(){P()},[e]);var A=Lr(function(I){var D=I===null,k=ot(I||E());if(D)for(var $=Math.max(o.length,k.length),B=0;B<$;B+=1)o[B]||(k[B]=null);v&&k[0]&&k[1]&&(k=Zwe(k,d)),a(k);var F=k,G=fe(F,2),z=G[0],U=G[1],H=!z,X=!U,V=g?(!H||g[0])&&(!X||g[1]):!0,W=!m||H||X||Us(d,f,z,U,h)||d.isAfter(U,z),K=(o[0]||!z||!u(z,{activeIndex:0}))&&(o[1]||!U||!u(U,{from:z,activeIndex:1})),q=D||V&&W&&K;if(q){r(k);var Q=_(k,e),ie=fe(Q,1),oe=ie[0];p&&!oe&&p(D&&k.every(function(ue){return!ue})?null:k,x(k))}return q}),N=Lr(function(I,D){var k=z2(E(),I,i()[I]);T(k),D&&A()}),O=!l&&!c;return GY(!O,function(){O&&(A(),a(e),P())},2),[N,A]}function eSe(n,e,r,i,a){return e!=="date"&&e!=="time"?!1:r!==void 0?r:i!==void 0?i:!a&&(n==="date"||n==="time")}function PQe(n,e,r,i,a,o){var s=n;function l(f,h,p){var g=o[f](s),m=p.find(function(x){return x.value===g});if(!m||m.disabled){var v=p.filter(function(x){return!x.disabled}),y=ot(v).reverse(),b=y.find(function(x){return x.value<=g})||v[0];b&&(g=b.value,s=o[h](s,g))}return g}var c=l("getHour","setHour",e()),u=l("getMinute","setMinute",r(c)),d=l("getSecond","setSecond",i(c,u));return l("getMillisecond","setMillisecond",a(c,u,d)),s}function R3(){return[]}function P3(n,e){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:2,s=[],l=r>=1?r|0:1,c=n;c<=e;c+=l){var u=a.includes(c);(!u||!i)&&s.push({label:BY(c,o),value:c,disabled:u})}return s}function jY(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=e||{},a=i.use12Hours,o=i.hourStep,s=o===void 0?1:o,l=i.minuteStep,c=l===void 0?1:l,u=i.secondStep,d=u===void 0?1:u,f=i.millisecondStep,h=f===void 0?100:f,p=i.hideDisabledOptions,g=i.disabledTime,m=i.disabledHours,v=i.disabledMinutes,y=i.disabledSeconds,b=C.useMemo(function(){return r||n.getNow()},[r,n]),x=C.useCallback(function(F){var G=(g==null?void 0:g(F))||{};return[G.disabledHours||m||R3,G.disabledMinutes||v||R3,G.disabledSeconds||y||R3,G.disabledMilliseconds||R3]},[g,m,v,y]),_=C.useMemo(function(){return x(b)},[b,x]),S=fe(_,4),M=S[0],E=S[1],T=S[2],P=S[3],A=C.useCallback(function(F,G,z,U){var H=P3(0,23,s,p,F()),X=a?H.map(function(q){return se(se({},q),{},{label:BY(q.value%12||12,2)})}):H,V=function(Q){return P3(0,59,c,p,G(Q))},W=function(Q,ie){return P3(0,59,d,p,z(Q,ie))},K=function(Q,ie,oe){return P3(0,999,h,p,U(Q,ie,oe),3)};return[X,V,W,K]},[p,s,a,h,c,d]),N=C.useMemo(function(){return A(M,E,T,P)},[A,M,E,T,P]),O=fe(N,4),I=O[0],D=O[1],k=O[2],$=O[3],B=function(G,z){var U=function(){return I},H=D,X=k,V=$;if(z){var W=x(z),K=fe(W,4),q=K[0],Q=K[1],ie=K[2],oe=K[3],ue=A(q,Q,ie,oe),le=fe(ue,4),me=le[0],J=le[1],pe=le[2],ve=le[3];U=function(){return me},H=J,X=pe,V=ve}var Me=PQe(G,U,H,X,V,n);return Me};return[B,I,D,k,$]}function NQe(n){var e=n.mode,r=n.internalMode,i=n.renderExtraFooter,a=n.showNow,o=n.showTime,s=n.onSubmit,l=n.onNow,c=n.invalid,u=n.needConfirm,d=n.generateConfig,f=n.disabledDate,h=C.useContext(of),p=h.prefixCls,g=h.locale,m=h.button,v=m===void 0?"button":m,y=d.getNow(),b=jY(d,o,y),x=fe(b,1),_=x[0],S=i==null?void 0:i(e),M=f(y,{type:e}),E=function(){if(!M){var D=_(y);l(D)}},T="".concat(p,"-now"),P="".concat(T,"-btn"),A=a&&C.createElement("li",{className:T},C.createElement("a",{className:Be(P,M&&"".concat(P,"-disabled")),"aria-disabled":M,onClick:E},r==="date"?g.today:g.now)),N=u&&C.createElement("li",{className:"".concat(p,"-ok")},C.createElement(v,{disabled:c,onClick:s},g.ok)),O=(A||N)&&C.createElement("ul",{className:"".concat(p,"-ranges")},A,N);return!S&&!O?null:C.createElement("div",{className:"".concat(p,"-footer")},S&&C.createElement("div",{className:"".concat(p,"-footer-extra")},S),O)}function tSe(n,e,r){function i(a,o){var s=a.findIndex(function(c){return Us(n,e,c,o,r)});if(s===-1)return[].concat(ot(a),[o]);var l=ot(a);return l.splice(s,1),l}return i}var $y=C.createContext(null);function F4(){return C.useContext($y)}function V_(n,e){var r=n.prefixCls,i=n.generateConfig,a=n.locale,o=n.disabledDate,s=n.minDate,l=n.maxDate,c=n.cellRender,u=n.hoverValue,d=n.hoverRangeValue,f=n.onHover,h=n.values,p=n.pickerValue,g=n.onSelect,m=n.prevIcon,v=n.nextIcon,y=n.superPrevIcon,b=n.superNextIcon,x=i.getNow(),_={now:x,values:h,pickerValue:p,prefixCls:r,disabledDate:o,minDate:s,maxDate:l,cellRender:c,hoverValue:u,hoverRangeValue:d,onHover:f,locale:a,generateConfig:i,onSelect:g,panelType:e,prevIcon:m,nextIcon:v,superPrevIcon:y,superNextIcon:b};return[_,x]}var wm=C.createContext({});function yM(n){for(var e=n.rowNum,r=n.colNum,i=n.baseDate,a=n.getCellDate,o=n.prefixColumn,s=n.rowClassName,l=n.titleFormat,c=n.getCellText,u=n.getCellClassName,d=n.headerCells,f=n.cellSelection,h=f===void 0?!0:f,p=n.disabledDate,g=F4(),m=g.prefixCls,v=g.panelType,y=g.now,b=g.disabledDate,x=g.cellRender,_=g.onHover,S=g.hoverValue,M=g.hoverRangeValue,E=g.generateConfig,T=g.values,P=g.locale,A=g.onSelect,N=p||b,O="".concat(m,"-cell"),I=C.useContext(wm),D=I.onCellDblClick,k=function(X){return T.some(function(V){return V&&Us(E,P,X,V,v)})},$=[],B=0;B<e;B+=1){for(var F=[],G=void 0,z=function(){var X=B*r+U,V=a(i,X),W=N==null?void 0:N(V,{type:v});U===0&&(G=V,o&&F.push(o(G)));var K=!1,q=!1,Q=!1;if(h&&M){var ie=fe(M,2),oe=ie[0],ue=ie[1];K=k4(E,oe,ue,V),q=Us(E,P,V,oe,v),Q=Us(E,P,V,ue,v)}var le=l?Io(V,{locale:P,format:l,generateConfig:E}):void 0,me=C.createElement("div",{className:"".concat(O,"-inner")},c(V));F.push(C.createElement("td",{key:U,title:le,className:Be(O,se(re(re(re(re(re(re({},"".concat(O,"-disabled"),W),"".concat(O,"-hover"),(S||[]).some(function(J){return Us(E,P,V,J,v)})),"".concat(O,"-in-range"),K&&!q&&!Q),"".concat(O,"-range-start"),q),"".concat(O,"-range-end"),Q),"".concat(m,"-cell-selected"),!M&&v!=="week"&&k(V)),u(V))),onClick:function(){W||A(V)},onDoubleClick:function(){!W&&D&&D()},onMouseEnter:function(){W||_==null||_(V)},onMouseLeave:function(){W||_==null||_(null)}},x?x(V,{prefixCls:m,originNode:me,today:y,type:v,locale:P}):me))},U=0;U<r;U+=1)z();$.push(C.createElement("tr",{key:B,className:s==null?void 0:s(G)},F))}return C.createElement("div",{className:"".concat(m,"-body")},C.createElement("table",{className:"".concat(m,"-content")},d&&C.createElement("thead",null,C.createElement("tr",null,d)),C.createElement("tbody",null,$)))}var N3={visibility:"hidden"};function G_(n){var e=n.offset,r=n.superOffset,i=n.onChange,a=n.getStart,o=n.getEnd,s=n.children,l=F4(),c=l.prefixCls,u=l.prevIcon,d=u===void 0?"‹":u,f=l.nextIcon,h=f===void 0?"›":f,p=l.superPrevIcon,g=p===void 0?"«":p,m=l.superNextIcon,v=m===void 0?"»":m,y=l.minDate,b=l.maxDate,x=l.generateConfig,_=l.locale,S=l.pickerValue,M=l.panelType,E="".concat(c,"-header"),T=C.useContext(wm),P=T.hidePrev,A=T.hideNext,N=T.hideHeader,O=C.useMemo(function(){if(!y||!e||!o)return!1;var H=o(e(-1,S));return!T3(x,_,H,y,M)},[y,e,S,o,x,_,M]),I=C.useMemo(function(){if(!y||!r||!o)return!1;var H=o(r(-1,S));return!T3(x,_,H,y,M)},[y,r,S,o,x,_,M]),D=C.useMemo(function(){if(!b||!e||!a)return!1;var H=a(e(1,S));return!T3(x,_,b,H,M)},[b,e,S,a,x,_,M]),k=C.useMemo(function(){if(!b||!r||!a)return!1;var H=a(r(1,S));return!T3(x,_,b,H,M)},[b,r,S,a,x,_,M]),$=function(X){e&&i(e(X,S))},B=function(X){r&&i(r(X,S))};if(N)return null;var F="".concat(E,"-prev-btn"),G="".concat(E,"-next-btn"),z="".concat(E,"-super-prev-btn"),U="".concat(E,"-super-next-btn");return C.createElement("div",{className:E},r&&C.createElement("button",{type:"button","aria-label":_.previousYear,onClick:function(){return B(-1)},tabIndex:-1,className:Be(z,I&&"".concat(z,"-disabled")),disabled:I,style:P?N3:{}},g),e&&C.createElement("button",{type:"button","aria-label":_.previousMonth,onClick:function(){return $(-1)},tabIndex:-1,className:Be(F,O&&"".concat(F,"-disabled")),disabled:O,style:P?N3:{}},d),C.createElement("div",{className:"".concat(E,"-view")},s),e&&C.createElement("button",{type:"button","aria-label":_.nextMonth,onClick:function(){return $(1)},tabIndex:-1,className:Be(G,D&&"".concat(G,"-disabled")),disabled:D,style:A?N3:{}},h),r&&C.createElement("button",{type:"button","aria-label":_.nextYear,onClick:function(){return B(1)},tabIndex:-1,className:Be(U,k&&"".concat(U,"-disabled")),disabled:k,style:A?N3:{}},v))}function $4(n){var e=n.prefixCls,r=n.panelName,i=r===void 0?"date":r,a=n.locale,o=n.generateConfig,s=n.pickerValue,l=n.onPickerValueChange,c=n.onModeChange,u=n.mode,d=u===void 0?"date":u,f=n.disabledDate,h=n.onSelect,p=n.onHover,g=n.showWeek,m="".concat(e,"-").concat(i,"-panel"),v="".concat(e,"-cell"),y=d==="week",b=V_(n,d),x=fe(b,2),_=x[0],S=x[1],M=o.locale.getWeekFirstDay(a.locale),E=o.setDate(s,1),T=_Qe(a.locale,o,E),P=o.getMonth(s),A=g===void 0?y:g,N=A?function(H){var X=f==null?void 0:f(H,{type:"week"});return C.createElement("td",{key:"week",className:Be(v,"".concat(v,"-week"),re({},"".concat(v,"-disabled"),X)),onClick:function(){X||h(H)},onMouseEnter:function(){X||p==null||p(H)},onMouseLeave:function(){X||p==null||p(null)}},C.createElement("div",{className:"".concat(v,"-inner")},o.locale.getWeek(a.locale,H)))}:null,O=[],I=a.shortWeekDays||(o.locale.getShortWeekDays?o.locale.getShortWeekDays(a.locale):[]);N&&O.push(C.createElement("th",{key:"empty"},C.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},a.week)));for(var D=0;D<j5;D+=1)O.push(C.createElement("th",{key:D},I[(D+M)%j5]));var k=function(X,V){return o.addDate(X,V)},$=function(X){return Io(X,{locale:a,format:a.cellDateFormat,generateConfig:o})},B=function(X){var V=re(re({},"".concat(e,"-cell-in-view"),UY(o,X,s)),"".concat(e,"-cell-today"),VY(o,X,S));return V},F=a.shortMonths||(o.locale.getShortMonths?o.locale.getShortMonths(a.locale):[]),G=C.createElement("button",{type:"button","aria-label":a.yearSelect,key:"year",onClick:function(){c("year",s)},tabIndex:-1,className:"".concat(e,"-year-btn")},Io(s,{locale:a,format:a.yearFormat,generateConfig:o})),z=C.createElement("button",{type:"button","aria-label":a.monthSelect,key:"month",onClick:function(){c("month",s)},tabIndex:-1,className:"".concat(e,"-month-btn")},a.monthFormat?Io(s,{locale:a,format:a.monthFormat,generateConfig:o}):F[P]),U=a.monthBeforeYear?[z,G]:[G,z];return C.createElement($y.Provider,{value:_},C.createElement("div",{className:Be(m,g&&"".concat(m,"-show-week"))},C.createElement(G_,{offset:function(X){return o.addMonth(s,X)},superOffset:function(X){return o.addYear(s,X)},onChange:l,getStart:function(X){return o.setDate(X,1)},getEnd:function(X){var V=o.setDate(X,1);return V=o.addMonth(V,1),o.addDate(V,-1)}},U),C.createElement(yM,Mt({titleFormat:a.fieldDateFormat},n,{colNum:j5,rowNum:6,baseDate:T,headerCells:O,getCellDate:k,getCellText:$,getCellClassName:B,prefixColumn:N,cellSelection:!y}))))}var OQe=1/3;function IQe(n,e){var r=C.useRef(!1),i=C.useRef(null),a=C.useRef(null),o=function(){return r.current},s=function(){Gr.cancel(i.current),r.current=!1},l=C.useRef(),c=function(){var f=n.current;if(a.current=null,l.current=0,f){var h=f.querySelector('[data-value="'.concat(e,'"]')),p=f.querySelector("li"),g=function m(){s(),r.current=!0,l.current+=1;var v=f.scrollTop,y=p.offsetTop,b=h.offsetTop,x=b-y;if(b===0&&h!==p||!S4(f)){l.current<=5&&(i.current=Gr(m));return}var _=v+(x-v)*OQe,S=Math.abs(x-_);if(a.current!==null&&a.current<S){s();return}if(a.current=S,S<=1){f.scrollTop=x,s();return}f.scrollTop=_,i.current=Gr(m)};h&&p&&g()}},u=Lr(c);return[u,s,o]}var DQe=300;function LQe(n){return n.map(function(e){var r=e.value,i=e.label,a=e.disabled;return[r,i,a].join(",")}).join(";")}function sS(n){var e=n.units,r=n.value,i=n.optionalValue,a=n.type,o=n.onChange,s=n.onHover,l=n.onDblClick,c=n.changeOnScroll,u=F4(),d=u.prefixCls,f=u.cellRender,h=u.now,p=u.locale,g="".concat(d,"-time-panel"),m="".concat(d,"-time-panel-cell"),v=C.useRef(null),y=C.useRef(),b=function(){clearTimeout(y.current)},x=IQe(v,r??i),_=fe(x,3),S=_[0],M=_[1],E=_[2];Dr(function(){return S(),b(),function(){M(),b()}},[r,i,LQe(e)]);var T=function(N){b();var O=N.target;!E()&&c&&(y.current=setTimeout(function(){var I=v.current,D=I.querySelector("li").offsetTop,k=Array.from(I.querySelectorAll("li")),$=k.map(function(U){return U.offsetTop-D}),B=$.map(function(U,H){return e[H].disabled?Number.MAX_SAFE_INTEGER:Math.abs(U-O.scrollTop)}),F=Math.min.apply(Math,ot(B)),G=B.findIndex(function(U){return U===F}),z=e[G];z&&!z.disabled&&o(z.value)},DQe))},P="".concat(g,"-column");return C.createElement("ul",{className:P,ref:v,"data-type":a,onScroll:T},e.map(function(A){var N=A.label,O=A.value,I=A.disabled,D=C.createElement("div",{className:"".concat(m,"-inner")},N);return C.createElement("li",{key:O,className:Be(m,re(re({},"".concat(m,"-selected"),r===O),"".concat(m,"-disabled"),I)),onClick:function(){I||o(O)},onDoubleClick:function(){!I&&l&&l()},onMouseEnter:function(){s(O)},onMouseLeave:function(){s(null)},"data-value":O},f?f(O,{prefixCls:d,originNode:D,today:h,type:"time",subType:a,locale:p}):D)}))}function pg(n){return n<12}function kQe(n){var e=n.showHour,r=n.showMinute,i=n.showSecond,a=n.showMillisecond,o=n.use12Hours,s=n.changeOnScroll,l=F4(),c=l.prefixCls,u=l.values,d=l.generateConfig,f=l.locale,h=l.onSelect,p=l.onHover,g=p===void 0?function(){}:p,m=l.pickerValue,v=(u==null?void 0:u[0])||null,y=C.useContext(wm),b=y.onCellDblClick,x=jY(d,n,v),_=fe(x,5),S=_[0],M=_[1],E=_[2],T=_[3],P=_[4],A=function(mt){var xe=v&&d[mt](v),vt=m&&d[mt](m);return[xe,vt]},N=A("getHour"),O=fe(N,2),I=O[0],D=O[1],k=A("getMinute"),$=fe(k,2),B=$[0],F=$[1],G=A("getSecond"),z=fe(G,2),U=z[0],H=z[1],X=A("getMillisecond"),V=fe(X,2),W=V[0],K=V[1],q=I===null?null:pg(I)?"am":"pm",Q=C.useMemo(function(){return o?pg(I)?M.filter(function(Ke){return pg(Ke.value)}):M.filter(function(Ke){return!pg(Ke.value)}):M},[I,M,o]),ie=function(mt,xe){var vt,Ue=mt.filter(function(Le){return!Le.disabled});return xe??(Ue==null||(vt=Ue[0])===null||vt===void 0?void 0:vt.value)},oe=ie(M,I),ue=C.useMemo(function(){return E(oe)},[E,oe]),le=ie(ue,B),me=C.useMemo(function(){return T(oe,le)},[T,oe,le]),J=ie(me,U),pe=C.useMemo(function(){return P(oe,le,J)},[P,oe,le,J]),ve=ie(pe,W),Me=C.useMemo(function(){if(!o)return[];var Ke=d.getNow(),mt=d.setHour(Ke,6),xe=d.setHour(Ke,18),vt=function(Le,Ye){var nt=f.cellMeridiemFormat;return nt?Io(Le,{generateConfig:d,locale:f,format:nt}):Ye};return[{label:vt(mt,"AM"),value:"am",disabled:M.every(function(Ue){return Ue.disabled||!pg(Ue.value)})},{label:vt(xe,"PM"),value:"pm",disabled:M.every(function(Ue){return Ue.disabled||pg(Ue.value)})}]},[M,o,d,f]),Re=function(mt){var xe=S(mt);h(xe)},Xe=C.useMemo(function(){var Ke=v||m||d.getNow(),mt=function(vt){return vt!=null};return mt(I)?(Ke=d.setHour(Ke,I),Ke=d.setMinute(Ke,B),Ke=d.setSecond(Ke,U),Ke=d.setMillisecond(Ke,W)):mt(D)?(Ke=d.setHour(Ke,D),Ke=d.setMinute(Ke,F),Ke=d.setSecond(Ke,H),Ke=d.setMillisecond(Ke,K)):mt(oe)&&(Ke=d.setHour(Ke,oe),Ke=d.setMinute(Ke,le),Ke=d.setSecond(Ke,J),Ke=d.setMillisecond(Ke,ve)),Ke},[v,m,I,B,U,W,oe,le,J,ve,D,F,H,K,d]),He=function(mt,xe){return mt===null?null:d[xe](Xe,mt)},ee=function(mt){return He(mt,"setHour")},Y=function(mt){return He(mt,"setMinute")},ce=function(mt){return He(mt,"setSecond")},_e=function(mt){return He(mt,"setMillisecond")},Ae=function(mt){return mt===null?null:mt==="am"&&!pg(I)?d.setHour(Xe,I-12):mt==="pm"&&pg(I)?d.setHour(Xe,I+12):Xe},Ce=function(mt){Re(ee(mt))},et=function(mt){Re(Y(mt))},Ve=function(mt){Re(ce(mt))},qe=function(mt){Re(_e(mt))},dt=function(mt){Re(Ae(mt))},Ge=function(mt){g(ee(mt))},We=function(mt){g(Y(mt))},Ze=function(mt){g(ce(mt))},Ie=function(mt){g(_e(mt))},De=function(mt){g(Ae(mt))},bt={onDblClick:b,changeOnScroll:s};return C.createElement("div",{className:"".concat(c,"-content")},e&&C.createElement(sS,Mt({units:Q,value:I,optionalValue:D,type:"hour",onChange:Ce,onHover:Ge},bt)),r&&C.createElement(sS,Mt({units:ue,value:B,optionalValue:F,type:"minute",onChange:et,onHover:We},bt)),i&&C.createElement(sS,Mt({units:me,value:U,optionalValue:H,type:"second",onChange:Ve,onHover:Ze},bt)),a&&C.createElement(sS,Mt({units:pe,value:W,optionalValue:K,type:"millisecond",onChange:qe,onHover:Ie},bt)),o&&C.createElement(sS,Mt({units:Me,value:q,type:"meridiem",onChange:dt,onHover:De},bt)))}function nSe(n){var e=n.prefixCls,r=n.value,i=n.locale,a=n.generateConfig,o=n.showTime,s=o||{},l=s.format,c="".concat(e,"-time-panel"),u=V_(n,"time"),d=fe(u,1),f=d[0];return C.createElement($y.Provider,{value:f},C.createElement("div",{className:Be(c)},C.createElement(G_,null,r?Io(r,{locale:i,format:l,generateConfig:a}):" "),C.createElement(kQe,o)))}function FQe(n){var e=n.prefixCls,r=n.generateConfig,i=n.showTime,a=n.onSelect,o=n.value,s=n.pickerValue,l=n.onHover,c="".concat(e,"-datetime-panel"),u=jY(r,i),d=fe(u,1),f=d[0],h=function(v){return o?zN(r,v,o):zN(r,v,s)},p=function(v){l==null||l(v&&h(v))},g=function(v){var y=h(v);a(f(y,y))};return C.createElement("div",{className:c},C.createElement($4,Mt({},n,{onSelect:g,onHover:p})),C.createElement(nSe,n))}function $Qe(n){var e=n.prefixCls,r=n.locale,i=n.generateConfig,a=n.pickerValue,o=n.disabledDate,s=n.onPickerValueChange,l="".concat(e,"-decade-panel"),c=V_(n,"decade"),u=fe(c,1),d=u[0],f=function(M){var E=Math.floor(i.getYear(M)/100)*100;return i.setYear(M,E)},h=function(M){var E=f(M);return i.addYear(E,99)},p=f(a),g=h(a),m=i.addYear(p,-10),v=function(M,E){return i.addYear(M,E*10)},y=function(M){var E=r.cellYearFormat,T=Io(M,{locale:r,format:E,generateConfig:i}),P=Io(i.addYear(M,9),{locale:r,format:E,generateConfig:i});return"".concat(T,"-").concat(P)},b=function(M){return re({},"".concat(e,"-cell-in-view"),oj(i,M,p)||oj(i,M,g)||k4(i,p,g,M))},x=o?function(S,M){var E=i.setDate(S,1),T=i.setMonth(E,0),P=i.setYear(T,Math.floor(i.getYear(T)/10)*10),A=i.addYear(P,10),N=i.addDate(A,-1);return o(P,M)&&o(N,M)}:null,_="".concat(Io(p,{locale:r,format:r.yearFormat,generateConfig:i}),"-").concat(Io(g,{locale:r,format:r.yearFormat,generateConfig:i}));return C.createElement($y.Provider,{value:d},C.createElement("div",{className:l},C.createElement(G_,{superOffset:function(M){return i.addYear(a,M*100)},onChange:s,getStart:f,getEnd:h},_),C.createElement(yM,Mt({},n,{disabledDate:x,colNum:3,rowNum:4,baseDate:m,getCellDate:v,getCellText:y,getCellClassName:b}))))}function BQe(n){var e=n.prefixCls,r=n.locale,i=n.generateConfig,a=n.pickerValue,o=n.disabledDate,s=n.onPickerValueChange,l=n.onModeChange,c="".concat(e,"-month-panel"),u=V_(n,"month"),d=fe(u,1),f=d[0],h=i.setMonth(a,0),p=r.shortMonths||(i.locale.getShortMonths?i.locale.getShortMonths(r.locale):[]),g=function(_,S){return i.addMonth(_,S)},m=function(_){var S=i.getMonth(_);return r.monthFormat?Io(_,{locale:r,format:r.monthFormat,generateConfig:i}):p[S]},v=function(){return re({},"".concat(e,"-cell-in-view"),!0)},y=o?function(x,_){var S=i.setDate(x,1),M=i.setMonth(S,i.getMonth(S)+1),E=i.addDate(M,-1);return o(S,_)&&o(E,_)}:null,b=C.createElement("button",{type:"button",key:"year","aria-label":r.yearSelect,onClick:function(){l("year")},tabIndex:-1,className:"".concat(e,"-year-btn")},Io(a,{locale:r,format:r.yearFormat,generateConfig:i}));return C.createElement($y.Provider,{value:f},C.createElement("div",{className:c},C.createElement(G_,{superOffset:function(_){return i.addYear(a,_)},onChange:s,getStart:function(_){return i.setMonth(_,0)},getEnd:function(_){return i.setMonth(_,11)}},b),C.createElement(yM,Mt({},n,{disabledDate:y,titleFormat:r.fieldMonthFormat,colNum:3,rowNum:4,baseDate:h,getCellDate:g,getCellText:m,getCellClassName:v}))))}function zQe(n){var e=n.prefixCls,r=n.locale,i=n.generateConfig,a=n.pickerValue,o=n.onPickerValueChange,s=n.onModeChange,l="".concat(e,"-quarter-panel"),c=V_(n,"quarter"),u=fe(c,1),d=u[0],f=i.setMonth(a,0),h=function(y,b){return i.addMonth(y,b*3)},p=function(y){return Io(y,{locale:r,format:r.cellQuarterFormat,generateConfig:i})},g=function(){return re({},"".concat(e,"-cell-in-view"),!0)},m=C.createElement("button",{type:"button",key:"year","aria-label":r.yearSelect,onClick:function(){s("year")},tabIndex:-1,className:"".concat(e,"-year-btn")},Io(a,{locale:r,format:r.yearFormat,generateConfig:i}));return C.createElement($y.Provider,{value:d},C.createElement("div",{className:l},C.createElement(G_,{superOffset:function(y){return i.addYear(a,y)},onChange:o,getStart:function(y){return i.setMonth(y,0)},getEnd:function(y){return i.setMonth(y,11)}},m),C.createElement(yM,Mt({},n,{titleFormat:r.fieldQuarterFormat,colNum:4,rowNum:1,baseDate:f,getCellDate:h,getCellText:p,getCellClassName:g}))))}function UQe(n){var e=n.prefixCls,r=n.generateConfig,i=n.locale,a=n.value,o=n.hoverValue,s=n.hoverRangeValue,l=i.locale,c="".concat(e,"-week-panel-row"),u=function(f){var h={};if(s){var p=fe(s,2),g=p[0],m=p[1],v=e2(r,l,g,f),y=e2(r,l,m,f);h["".concat(c,"-range-start")]=v,h["".concat(c,"-range-end")]=y,h["".concat(c,"-range-hover")]=!v&&!y&&k4(r,g,m,f)}return o&&(h["".concat(c,"-hover")]=o.some(function(b){return e2(r,l,f,b)})),Be(c,re({},"".concat(c,"-selected"),!s&&e2(r,l,a,f)),h)};return C.createElement($4,Mt({},n,{mode:"week",panelName:"week",rowClassName:u}))}function VQe(n){var e=n.prefixCls,r=n.locale,i=n.generateConfig,a=n.pickerValue,o=n.disabledDate,s=n.onPickerValueChange,l=n.onModeChange,c="".concat(e,"-year-panel"),u=V_(n,"year"),d=fe(u,1),f=d[0],h=function(E){var T=Math.floor(i.getYear(E)/10)*10;return i.setYear(E,T)},p=function(E){var T=h(E);return i.addYear(T,9)},g=h(a),m=p(a),v=i.addYear(g,-1),y=function(E,T){return i.addYear(E,T)},b=function(E){return Io(E,{locale:r,format:r.cellYearFormat,generateConfig:i})},x=function(E){return re({},"".concat(e,"-cell-in-view"),hy(i,E,g)||hy(i,E,m)||k4(i,g,m,E))},_=o?function(M,E){var T=i.setMonth(M,0),P=i.setDate(T,1),A=i.addYear(P,1),N=i.addDate(A,-1);return o(P,E)&&o(N,E)}:null,S=C.createElement("button",{type:"button",key:"decade","aria-label":r.decadeSelect,onClick:function(){l("decade")},tabIndex:-1,className:"".concat(e,"-decade-btn")},Io(g,{locale:r,format:r.yearFormat,generateConfig:i}),"-",Io(m,{locale:r,format:r.yearFormat,generateConfig:i}));return C.createElement($y.Provider,{value:f},C.createElement("div",{className:c},C.createElement(G_,{superOffset:function(E){return i.addYear(a,E*10)},onChange:s,getStart:h,getEnd:p},S),C.createElement(yM,Mt({},n,{disabledDate:_,titleFormat:r.fieldYearFormat,colNum:3,rowNum:4,baseDate:v,getCellDate:y,getCellText:b,getCellClassName:x}))))}var GQe={date:$4,datetime:FQe,week:UQe,month:BQe,quarter:zQe,year:VQe,decade:$Qe,time:nSe};function jQe(n,e){var r,i=n.locale,a=n.generateConfig,o=n.direction,s=n.prefixCls,l=n.tabIndex,c=l===void 0?0:l,u=n.multiple,d=n.defaultValue,f=n.value,h=n.onChange,p=n.onSelect,g=n.defaultPickerValue,m=n.pickerValue,v=n.onPickerValueChange,y=n.mode,b=n.onPanelChange,x=n.picker,_=x===void 0?"date":x,S=n.showTime,M=n.hoverValue,E=n.hoverRangeValue,T=n.cellRender,P=n.dateRender,A=n.monthCellRender,N=n.components,O=N===void 0?{}:N,I=n.hideHeader,D=((r=C.useContext(of))===null||r===void 0?void 0:r.prefixCls)||s||"rc-picker",k=C.useRef();C.useImperativeHandle(e,function(){return{nativeElement:k.current}});var $=Bwe(n),B=fe($,4),F=B[0],G=B[1],z=B[2],U=B[3],H=kwe(i,G),X=_==="date"&&S?"datetime":_,V=C.useMemo(function(){return zwe(X,z,U,F,H)},[X,z,U,F,H]),W=a.getNow(),K=es(_,{value:y,postState:function(De){return De||"date"}}),q=fe(K,2),Q=q[0],ie=q[1],oe=Q==="date"&&V?"datetime":Q,ue=tSe(a,i,X),le=es(d,{value:f}),me=fe(le,2),J=me[0],pe=me[1],ve=C.useMemo(function(){var Ie=Fy(J).filter(function(De){return De});return u?Ie:Ie.slice(0,1)},[J,u]),Me=Lr(function(Ie){pe(Ie),h&&(Ie===null||ve.length!==Ie.length||ve.some(function(De,bt){return!Us(a,i,De,Ie[bt],X)}))&&(h==null||h(u?Ie:Ie[0]))}),Re=Lr(function(Ie){if(p==null||p(Ie),Q===_){var De=u?ue(ve,Ie):[Ie];Me(De)}}),Xe=es(g||ve[0]||W,{value:m}),He=fe(Xe,2),ee=He[0],Y=He[1];C.useEffect(function(){ve[0]&&!m&&Y(ve[0])},[ve[0]]);var ce=function(De,bt){b==null||b(De||m,bt||Q)},_e=function(De){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Y(De),v==null||v(De),bt&&ce(De)},Ae=function(De,bt){ie(De),bt&&_e(bt),ce(bt,De)},Ce=function(De){if(Re(De),_e(De),Q!==_){var bt=["decade","year"],Ke=[].concat(bt,["month"]),mt={quarter:[].concat(bt,["quarter"]),week:[].concat(ot(Ke),["week"]),date:[].concat(ot(Ke),["date"])},xe=mt[_]||Ke,vt=xe.indexOf(Q),Ue=xe[vt+1];Ue&&Ae(Ue,De)}},et=C.useMemo(function(){var Ie,De;if(Array.isArray(E)){var bt=fe(E,2);Ie=bt[0],De=bt[1]}else Ie=E;return!Ie&&!De?null:(Ie=Ie||De,De=De||Ie,a.isAfter(Ie,De)?[De,Ie]:[Ie,De])},[E,a]),Ve=zY(T,P,A),qe=O[oe]||GQe[oe]||$4,dt=C.useContext(wm),Ge=C.useMemo(function(){return se(se({},dt),{},{hideHeader:I})},[dt,I]),We="".concat(D,"-panel"),Ze=L4(n,["showWeek","prevIcon","nextIcon","superPrevIcon","superNextIcon","disabledDate","minDate","maxDate","onHover"]);return C.createElement(wm.Provider,{value:Ge},C.createElement("div",{ref:k,tabIndex:c,className:Be(We,re({},"".concat(We,"-rtl"),o==="rtl"))},C.createElement(qe,Mt({},Ze,{showTime:V,prefixCls:D,locale:H,generateConfig:a,onModeChange:Ae,pickerValue:ee,onPickerValueChange:function(De){_e(De,!0)},value:ve[0],onSelect:Ce,values:ve,cellRender:Ve,hoverRangeValue:et,hoverValue:M}))))}var W5=C.memo(C.forwardRef(jQe));function HQe(n){var e=n.picker,r=n.multiplePanel,i=n.pickerValue,a=n.onPickerValueChange,o=n.needConfirm,s=n.onSubmit,l=n.range,c=n.hoverValue,u=C.useContext(of),d=u.prefixCls,f=u.generateConfig,h=C.useCallback(function(b,x){return t2(f,e,b,x)},[f,e]),p=C.useMemo(function(){return h(i,1)},[i,h]),g=function(x){a(h(x,-1))},m={onCellDblClick:function(){o&&s()}},v=e==="time",y=se(se({},n),{},{hoverValue:null,hoverRangeValue:null,hideHeader:v});return l?y.hoverRangeValue=c:y.hoverValue=c,r?C.createElement("div",{className:"".concat(d,"-panels")},C.createElement(wm.Provider,{value:se(se({},m),{},{hideNext:!0})},C.createElement(W5,y)),C.createElement(wm.Provider,{value:se(se({},m),{},{hidePrev:!0})},C.createElement(W5,Mt({},y,{pickerValue:p,onPickerValueChange:g})))):C.createElement(wm.Provider,{value:se({},m)},C.createElement(W5,y))}function Yie(n){return typeof n=="function"?n():n}function WQe(n){var e=n.prefixCls,r=n.presets,i=n.onClick,a=n.onHover;return r.length?C.createElement("div",{className:"".concat(e,"-presets")},C.createElement("ul",null,r.map(function(o,s){var l=o.label,c=o.value;return C.createElement("li",{key:s,onClick:function(){i(Yie(c))},onMouseEnter:function(){a(Yie(c))},onMouseLeave:function(){a(null)}},l)}))):null}function rSe(n){var e=n.panelRender,r=n.internalMode,i=n.picker,a=n.showNow,o=n.range,s=n.multiple,l=n.activeInfo,c=l===void 0?[0,0,0]:l,u=n.presets,d=n.onPresetHover,f=n.onPresetSubmit,h=n.onFocus,p=n.onBlur,g=n.onPanelMouseDown,m=n.direction,v=n.value,y=n.onSelect,b=n.isInvalid,x=n.defaultOpenValue,_=n.onOk,S=n.onSubmit,M=C.useContext(of),E=M.prefixCls,T="".concat(E,"-panel"),P=m==="rtl",A=C.useRef(null),N=C.useRef(null),O=C.useState(0),I=fe(O,2),D=I[0],k=I[1],$=C.useState(0),B=fe($,2),F=B[0],G=B[1],z=C.useState(0),U=fe(z,2),H=U[0],X=U[1],V=function(Ce){Ce.width&&k(Ce.width)},W=fe(c,3),K=W[0],q=W[1],Q=W[2],ie=C.useState(0),oe=fe(ie,2),ue=oe[0],le=oe[1];C.useEffect(function(){le(10)},[K]),C.useEffect(function(){if(o&&N.current){var Ae,Ce=((Ae=A.current)===null||Ae===void 0?void 0:Ae.offsetWidth)||0,et=N.current.getBoundingClientRect();if(!et.height||et.right<0){le(function(Ge){return Math.max(0,Ge-1)});return}var Ve=(P?q-Ce:K)-et.left;if(X(Ve),D&&D<Q){var qe=P?et.right-(q-Ce+D):K+Ce-et.left-D,dt=Math.max(0,qe);G(dt)}else G(0)}},[ue,P,D,K,q,Q,o]);function me(Ae){return Ae.filter(function(Ce){return Ce})}var J=C.useMemo(function(){return me(Fy(v))},[v]),pe=i==="time"&&!J.length,ve=C.useMemo(function(){return pe?me([x]):J},[pe,J,x]),Me=pe?x:J,Re=C.useMemo(function(){return ve.length?ve.some(function(Ae){return b(Ae)}):!0},[ve,b]),Xe=function(){pe&&y(x),_(),S()},He=C.createElement("div",{className:"".concat(E,"-panel-layout")},C.createElement(WQe,{prefixCls:E,presets:u,onClick:f,onHover:d}),C.createElement("div",null,C.createElement(HQe,Mt({},n,{value:Me})),C.createElement(NQe,Mt({},n,{showNow:s?!1:a,invalid:Re,onSubmit:Xe}))));e&&(He=e(He));var ee="".concat(T,"-container"),Y="marginLeft",ce="marginRight",_e=C.createElement("div",{onMouseDown:g,tabIndex:-1,className:Be(ee,"".concat(E,"-").concat(r,"-panel-container")),style:re(re({},P?ce:Y,F),P?Y:ce,"auto"),onFocus:h,onBlur:p},He);return o&&(_e=C.createElement("div",{onMouseDown:g,ref:N,className:Be("".concat(E,"-range-wrapper"),"".concat(E,"-").concat(i,"-range-wrapper"))},C.createElement("div",{ref:A,className:"".concat(E,"-range-arrow"),style:{left:H}}),C.createElement(ph,{onResize:V},_e))),_e}function iSe(n,e){var r=n.format,i=n.maskFormat,a=n.generateConfig,o=n.locale,s=n.preserveInvalidOnBlur,l=n.inputReadOnly,c=n.required,u=n["aria-required"],d=n.onSubmit,f=n.onFocus,h=n.onBlur,p=n.onInputChange,g=n.onInvalid,m=n.open,v=n.onOpenChange,y=n.onKeyDown,b=n.onChange,x=n.activeHelp,_=n.name,S=n.autoComplete,M=n.id,E=n.value,T=n.invalid,P=n.placeholder,A=n.disabled,N=n.activeIndex,O=n.allHelp,I=n.picker,D=function(H,X){var V=a.locale.parse(o.locale,H,[X]);return V&&a.isValidate(V)?V:null},k=r[0],$=C.useCallback(function(U){return Io(U,{locale:o,format:k,generateConfig:a})},[o,a,k]),B=C.useMemo(function(){return E.map($)},[E,$]),F=C.useMemo(function(){var U=I==="time"?8:10,H=typeof k=="function"?k(a.getNow()).length:k.length;return Math.max(U,H)+2},[k,I,a]),G=function(H){for(var X=0;X<r.length;X+=1){var V=r[X];if(typeof V=="string"){var W=D(H,V);if(W)return W}}return!1},z=function(H){function X(K){return H!==void 0?K[H]:K}var V=Hu(n,{aria:!0,data:!0}),W=se(se({},V),{},{format:i,validateFormat:function(q){return!!G(q)},preserveInvalidOnBlur:s,readOnly:l,required:c,"aria-required":u,name:_,autoComplete:S,size:F,id:X(M),value:X(B)||"",invalid:X(T),placeholder:X(P),active:N===H,helped:O||x&&N===H,disabled:X(A),onFocus:function(q){f(q,H)},onBlur:function(q){h(q,H)},onSubmit:d,onChange:function(q){p();var Q=G(q);if(Q){g(!1,H),b(Q,H);return}g(!!q,H)},onHelp:function(){v(!0,{index:H})},onKeyDown:function(q){var Q=!1;if(y==null||y(q,function(){Q=!0}),!q.defaultPrevented&&!Q)switch(q.key){case"Escape":v(!1,{index:H});break;case"Enter":m||v(!0);break}}},e==null?void 0:e({valueTexts:B}));return Object.keys(W).forEach(function(K){W[K]===void 0&&delete W[K]}),W};return[z,$]}var qQe=["onMouseEnter","onMouseLeave"];function aSe(n){return C.useMemo(function(){return L4(n,qQe)},[n])}var YQe=["icon","type"],XQe=["onClear"];function B4(n){var e=n.icon,r=n.type,i=ir(n,YQe),a=C.useContext(of),o=a.prefixCls;return e?C.createElement("span",Mt({className:"".concat(o,"-").concat(r)},i),e):null}function sj(n){var e=n.onClear,r=ir(n,XQe);return C.createElement(B4,Mt({},r,{type:"clear",role:"button",onMouseDown:function(a){a.preventDefault()},onClick:function(a){a.stopPropagation(),e()}}))}var q5=["YYYY","MM","DD","HH","mm","ss","SSS"],Xie="顧",KQe=function(){function n(e){st(this,n),re(this,"format",void 0),re(this,"maskFormat",void 0),re(this,"cells",void 0),re(this,"maskCells",void 0),this.format=e;var r=q5.map(function(l){return"(".concat(l,")")}).join("|"),i=new RegExp(r,"g");this.maskFormat=e.replace(i,function(l){return Xie.repeat(l.length)});var a=new RegExp("(".concat(q5.join("|"),")")),o=(e.split(a)||[]).filter(function(l){return l}),s=0;this.cells=o.map(function(l){var c=q5.includes(l),u=s,d=s+l.length;return s=d,{text:l,mask:c,start:u,end:d}}),this.maskCells=this.cells.filter(function(l){return l.mask})}return lt(n,[{key:"getSelection",value:function(r){var i=this.maskCells[r]||{},a=i.start,o=i.end;return[a||0,o||0]}},{key:"match",value:function(r){for(var i=0;i<this.maskFormat.length;i+=1){var a=this.maskFormat[i],o=r[i];if(!o||a!==Xie&&a!==o)return!1}return!0}},{key:"size",value:function(){return this.maskCells.length}},{key:"getMaskCellIndex",value:function(r){for(var i=Number.MAX_SAFE_INTEGER,a=0,o=0;o<this.maskCells.length;o+=1){var s=this.maskCells[o],l=s.start,c=s.end;if(r>=l&&r<=c)return o;var u=Math.min(Math.abs(r-l),Math.abs(r-c));u<i&&(i=u,a=o)}return a}}]),n}();function ZQe(n){var e={YYYY:[0,9999,new Date().getFullYear()],MM:[1,12],DD:[1,31],HH:[0,23],mm:[0,59],ss:[0,59],SSS:[0,999]};return e[n]}var QQe=["active","showActiveCls","suffixIcon","format","validateFormat","onChange","onInput","helped","onHelp","onSubmit","onKeyDown","preserveInvalidOnBlur","invalid","clearIcon"],lj=C.forwardRef(function(n,e){var r=n.active,i=n.showActiveCls,a=i===void 0?!0:i,o=n.suffixIcon,s=n.format,l=n.validateFormat,c=n.onChange;n.onInput;var u=n.helped,d=n.onHelp,f=n.onSubmit,h=n.onKeyDown,p=n.preserveInvalidOnBlur,g=p===void 0?!1:p,m=n.invalid,v=n.clearIcon,y=ir(n,QQe),b=n.value,x=n.onFocus,_=n.onBlur,S=n.onMouseUp,M=C.useContext(of),E=M.prefixCls,T=M.input,P=T===void 0?"input":T,A="".concat(E,"-input"),N=C.useState(!1),O=fe(N,2),I=O[0],D=O[1],k=C.useState(b),$=fe(k,2),B=$[0],F=$[1],G=C.useState(""),z=fe(G,2),U=z[0],H=z[1],X=C.useState(null),V=fe(X,2),W=V[0],K=V[1],q=C.useState(null),Q=fe(q,2),ie=Q[0],oe=Q[1],ue=B||"";C.useEffect(function(){F(b)},[b]);var le=C.useRef(),me=C.useRef();C.useImperativeHandle(e,function(){return{nativeElement:le.current,inputElement:me.current,focus:function(Ie){me.current.focus(Ie)},blur:function(){me.current.blur()}}});var J=C.useMemo(function(){return new KQe(s||"")},[s]),pe=C.useMemo(function(){return u?[0,0]:J.getSelection(W)},[J,W,u]),ve=fe(pe,2),Me=ve[0],Re=ve[1],Xe=function(Ie){Ie&&Ie!==s&&Ie!==b&&d()},He=Lr(function(Ze){l(Ze)&&c(Ze),F(Ze),Xe(Ze)}),ee=function(Ie){if(!s){var De=Ie.target.value;Xe(De),F(De),c(De)}},Y=function(Ie){var De=Ie.clipboardData.getData("text");l(De)&&He(De)},ce=C.useRef(!1),_e=function(){ce.current=!0},Ae=function(Ie){var De=Ie.target,bt=De.selectionStart,Ke=J.getMaskCellIndex(bt);K(Ke),oe({}),S==null||S(Ie),ce.current=!1},Ce=function(Ie){D(!0),K(0),H(""),x(Ie)},et=function(Ie){_(Ie)},Ve=function(Ie){D(!1),et(Ie)};GY(r,function(){!r&&!g&&F(b)});var qe=function(Ie){Ie.key==="Enter"&&l(ue)&&f(),h==null||h(Ie)},dt=function(Ie){qe(Ie);var De=Ie.key,bt=null,Ke=null,mt=Re-Me,xe=s.slice(Me,Re),vt=function(nt){K(function(_t){var Gt=_t+nt;return Gt=Math.max(Gt,0),Gt=Math.min(Gt,J.size()-1),Gt})},Ue=function(nt){var _t=ZQe(xe),Gt=fe(_t,3),Ot=Gt[0],wt=Gt[1],Ft=Gt[2],wn=ue.slice(Me,Re),ye=Number(wn);if(isNaN(ye))return String(Ft||(nt>0?Ot:wt));var be=ye+nt,Se=wt-Ot+1;return String(Ot+(Se+be-Ot)%Se)};switch(De){case"Backspace":case"Delete":bt="",Ke=xe;break;case"ArrowLeft":bt="",vt(-1);break;case"ArrowRight":bt="",vt(1);break;case"ArrowUp":bt="",Ke=Ue(1);break;case"ArrowDown":bt="",Ke=Ue(-1);break;default:isNaN(Number(De))||(bt=U+De,Ke=bt);break}if(bt!==null&&(H(bt),bt.length>=mt&&(vt(1),H(""))),Ke!==null){var Le=ue.slice(0,Me)+BY(Ke,mt)+ue.slice(Re);He(Le.slice(0,s.length))}oe({})},Ge=C.useRef();Dr(function(){if(!(!I||!s||ce.current)){if(!J.match(ue)){He(s);return}return me.current.setSelectionRange(Me,Re),Ge.current=Gr(function(){me.current.setSelectionRange(Me,Re)}),function(){Gr.cancel(Ge.current)}}},[J,s,I,ue,W,Me,Re,ie,He]);var We=s?{onFocus:Ce,onBlur:Ve,onKeyDown:dt,onMouseDown:_e,onMouseUp:Ae,onPaste:Y}:{};return C.createElement("div",{ref:le,className:Be(A,re(re({},"".concat(A,"-active"),r&&a),"".concat(A,"-placeholder"),u))},C.createElement(P,Mt({ref:me,"aria-invalid":m,autoComplete:"off"},y,{onKeyDown:qe,onBlur:et},We,{value:ue,onChange:ee})),C.createElement(B4,{type:"suffix",icon:o}),v)}),JQe=["id","prefix","clearIcon","suffixIcon","separator","activeIndex","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","value","onChange","onSubmit","onInputChange","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onActiveInfo","placement","onMouseDown","required","aria-required","autoFocus","tabIndex"],eJe=["index"];function tJe(n,e){var r=n.id,i=n.prefix,a=n.clearIcon,o=n.suffixIcon,s=n.separator,l=s===void 0?"~":s,c=n.activeIndex;n.activeHelp,n.allHelp;var u=n.focused;n.onFocus,n.onBlur,n.onKeyDown,n.locale,n.generateConfig;var d=n.placeholder,f=n.className,h=n.style,p=n.onClick,g=n.onClear,m=n.value;n.onChange,n.onSubmit,n.onInputChange,n.format,n.maskFormat,n.preserveInvalidOnBlur,n.onInvalid;var v=n.disabled,y=n.invalid;n.inputReadOnly;var b=n.direction;n.onOpenChange;var x=n.onActiveInfo;n.placement;var _=n.onMouseDown;n.required,n["aria-required"];var S=n.autoFocus,M=n.tabIndex,E=ir(n,JQe),T=b==="rtl",P=C.useContext(of),A=P.prefixCls,N=C.useMemo(function(){if(typeof r=="string")return[r];var ie=r||{};return[ie.start,ie.end]},[r]),O=C.useRef(),I=C.useRef(),D=C.useRef(),k=function(oe){var ue;return(ue=[I,D][oe])===null||ue===void 0?void 0:ue.current};C.useImperativeHandle(e,function(){return{nativeElement:O.current,focus:function(oe){if(vn(oe)==="object"){var ue,le=oe||{},me=le.index,J=me===void 0?0:me,pe=ir(le,eJe);(ue=k(J))===null||ue===void 0||ue.focus(pe)}else{var ve;(ve=k(oe??0))===null||ve===void 0||ve.focus()}},blur:function(){var oe,ue;(oe=k(0))===null||oe===void 0||oe.blur(),(ue=k(1))===null||ue===void 0||ue.blur()}}});var $=aSe(E),B=C.useMemo(function(){return Array.isArray(d)?d:[d,d]},[d]),F=iSe(se(se({},n),{},{id:N,placeholder:B})),G=fe(F,1),z=G[0],U=C.useState({position:"absolute",width:0}),H=fe(U,2),X=H[0],V=H[1],W=Lr(function(){var ie=k(c);if(ie){var oe=ie.nativeElement.getBoundingClientRect(),ue=O.current.getBoundingClientRect(),le=oe.left-ue.left;V(function(me){return se(se({},me),{},{width:oe.width,left:le})}),x([oe.left,oe.right,ue.width])}});C.useEffect(function(){W()},[c]);var K=a&&(m[0]&&!v[0]||m[1]&&!v[1]),q=S&&!v[0],Q=S&&!q&&!v[1];return C.createElement(ph,{onResize:W},C.createElement("div",Mt({},$,{className:Be(A,"".concat(A,"-range"),re(re(re(re({},"".concat(A,"-focused"),u),"".concat(A,"-disabled"),v.every(function(ie){return ie})),"".concat(A,"-invalid"),y.some(function(ie){return ie})),"".concat(A,"-rtl"),T),f),style:h,ref:O,onClick:p,onMouseDown:function(oe){var ue=oe.target;ue!==I.current.inputElement&&ue!==D.current.inputElement&&oe.preventDefault(),_==null||_(oe)}}),i&&C.createElement("div",{className:"".concat(A,"-prefix")},i),C.createElement(lj,Mt({ref:I},z(0),{autoFocus:q,tabIndex:M,"date-range":"start"})),C.createElement("div",{className:"".concat(A,"-range-separator")},l),C.createElement(lj,Mt({ref:D},z(1),{autoFocus:Q,tabIndex:M,"date-range":"end"})),C.createElement("div",{className:"".concat(A,"-active-bar"),style:X}),C.createElement(B4,{type:"suffix",icon:o}),K&&C.createElement(sj,{icon:a,onClear:g})))}var nJe=C.forwardRef(tJe);function Kie(n,e){var r=n??e;return Array.isArray(r)?r:[r,r]}function O3(n){return n===1?"end":"start"}function rJe(n,e){var r=Gwe(n,function(){var Yn=n.disabled,xn=n.allowEmpty,er=Kie(Yn,!1),Ar=Kie(xn,!1);return{disabled:er,allowEmpty:Ar}}),i=fe(r,6),a=i[0],o=i[1],s=i[2],l=i[3],c=i[4],u=i[5],d=a.prefixCls,f=a.styles,h=a.classNames,p=a.defaultValue,g=a.value,m=a.needConfirm,v=a.onKeyDown,y=a.disabled,b=a.allowEmpty,x=a.disabledDate,_=a.minDate,S=a.maxDate,M=a.defaultOpen,E=a.open,T=a.onOpenChange,P=a.locale,A=a.generateConfig,N=a.picker,O=a.showNow,I=a.showToday,D=a.showTime,k=a.mode,$=a.onPanelChange,B=a.onCalendarChange,F=a.onOk,G=a.defaultPickerValue,z=a.pickerValue,U=a.onPickerValueChange,H=a.inputReadOnly,X=a.suffixIcon,V=a.onFocus,W=a.onBlur,K=a.presets,q=a.ranges,Q=a.components,ie=a.cellRender,oe=a.dateRender,ue=a.monthCellRender,le=a.onClick,me=Hwe(e),J=jwe(E,M,y,T),pe=fe(J,2),ve=pe[0],Me=pe[1],Re=function(xn,er){(y.some(function(Ar){return!Ar})||!xn)&&Me(xn,er)},Xe=Qwe(A,P,l,!0,!1,p,g,B,F),He=fe(Xe,5),ee=He[0],Y=He[1],ce=He[2],_e=He[3],Ae=He[4],Ce=ce(),et=qwe(y,b,ve),Ve=fe(et,9),qe=Ve[0],dt=Ve[1],Ge=Ve[2],We=Ve[3],Ze=Ve[4],Ie=Ve[5],De=Ve[6],bt=Ve[7],Ke=Ve[8],mt=function(xn,er){dt(!0),V==null||V(xn,{range:O3(er??We)})},xe=function(xn,er){dt(!1),W==null||W(xn,{range:O3(er??We)})},vt=C.useMemo(function(){if(!D)return null;var Yn=D.disabledTime,xn=Yn?function(er){var Ar=O3(We),Xi=Owe(Ce,De,We);return Yn(er,Ar,{from:Xi})}:void 0;return se(se({},D),{},{disabledTime:xn})},[D,We,Ce,De]),Ue=es([N,N],{value:k}),Le=fe(Ue,2),Ye=Le[0],nt=Le[1],_t=Ye[We]||N,Gt=_t==="date"&&vt?"datetime":_t,Ot=Gt===N&&Gt!=="time",wt=eSe(N,_t,O,I,!0),Ft=Jwe(a,ee,Y,ce,_e,y,l,qe,ve,u),wn=fe(Ft,2),ye=wn[0],be=wn[1],Se=TQe(Ce,y,De,A,P,x),je=Dwe(Ce,u,b),tt=fe(je,2),ft=tt[0],Tt=tt[1],It=Ywe(A,P,Ce,Ye,ve,We,o,Ot,G,z,vt==null?void 0:vt.defaultOpenValue,U,_,S),Rt=fe(It,2),Lt=Rt[0],$t=Rt[1],en=Lr(function(Yn,xn,er){var Ar=z2(Ye,We,xn);if((Ar[0]!==Ye[0]||Ar[1]!==Ye[1])&&nt(Ar),$&&er!==!1){var Xi=ot(Ce);Yn&&(Xi[We]=Yn),$(Xi,Ar)}}),yn=function(xn,er){return z2(Ce,er,xn)},kn=function(xn,er){var Ar=Ce;xn&&(Ar=yn(xn,We)),bt(We);var Xi=Ie(Ar);_e(Ar),ye(We,Xi===null),Xi===null?Re(!1,{force:!0}):er||me.current.focus({index:Xi})},qn=function(xn){var er,Ar=xn.target.getRootNode();if(!me.current.nativeElement.contains((er=Ar.activeElement)!==null&&er!==void 0?er:document.activeElement)){var Xi=y.findIndex(function(ad){return!ad});Xi>=0&&me.current.focus({index:Xi})}Re(!0),le==null||le(xn)},_n=function(){be(null),Re(!1,{force:!0})},te=C.useState(null),de=fe(te,2),Te=de[0],Oe=de[1],Ee=C.useState(null),ut=fe(Ee,2),Dt=ut[0],Bt=ut[1],Zt=C.useMemo(function(){return Dt||Ce},[Ce,Dt]);C.useEffect(function(){ve||Bt(null)},[ve]);var dn=C.useState([0,0,0]),kt=fe(dn,2),zt=kt[0],En=kt[1],Bn=Wwe(K,q),In=function(xn){Bt(xn),Oe("preset")},zn=function(xn){var er=be(xn);er&&Re(!1,{force:!0})},Rn=function(xn){kn(xn)},fn=function(xn){Bt(xn?yn(xn,We):null),Oe("cell")},Yr=function(xn){Re(!0),mt(xn)},Hn=function(){Ge("panel")},Yi=function(xn){var er=z2(Ce,We,xn);_e(er),!m&&!s&&o===Gt&&kn(xn)},sa=function(){Re(!1)},Cn=zY(ie,oe,ue,O3(We)),Mn=Ce[We]||null,Un=Lr(function(Yn){return u(Yn,{activeIndex:We})}),rn=C.useMemo(function(){var Yn=Hu(a,!1),xn=Qu(a,[].concat(ot(Object.keys(Yn)),["onChange","onCalendarChange","style","className","onPanelChange","disabledTime"]));return xn},[a]),Wt=C.createElement(rSe,Mt({},rn,{showNow:wt,showTime:vt,range:!0,multiplePanel:Ot,activeInfo:zt,disabledDate:Se,onFocus:Yr,onBlur:xe,onPanelMouseDown:Hn,picker:N,mode:_t,internalMode:Gt,onPanelChange:en,format:c,value:Mn,isInvalid:Un,onChange:null,onSelect:Yi,pickerValue:Lt,defaultOpenValue:Fy(D==null?void 0:D.defaultOpenValue)[We],onPickerValueChange:$t,hoverValue:Zt,onHover:fn,needConfirm:m,onSubmit:kn,onOk:Ae,presets:Bn,onPresetHover:In,onPresetSubmit:zn,onNow:Rn,cellRender:Cn})),Dn=function(xn,er){var Ar=yn(xn,er);_e(Ar)},hr=function(){Ge("input")},Li=function(xn,er){var Ar=De.length,Xi=De[Ar-1];if(Ar&&Xi!==er&&m&&!b[Xi]&&!Ke(Xi)&&Ce[Xi]){me.current.focus({index:Xi});return}Ge("input"),Re(!0,{inherit:!0}),We!==er&&ve&&!m&&s&&kn(null,!0),Ze(er),mt(xn,er)},Ui=function(xn,er){if(Re(!1),!m&&Ge()==="input"){var Ar=Ie(Ce);ye(We,Ar===null)}xe(xn,er)},_o=function(xn,er){xn.key==="Tab"&&kn(null,!0),v==null||v(xn,er)},Ms=C.useMemo(function(){return{prefixCls:d,locale:P,generateConfig:A,button:Q.button,input:Q.input}},[d,P,A,Q.button,Q.input]);return Dr(function(){ve&&We!==void 0&&en(null,N,!1)},[ve,We,N]),Dr(function(){var Yn=Ge();!ve&&Yn==="input"&&(Re(!1),kn(null,!0)),!ve&&s&&!m&&Yn==="panel"&&(Re(!0),kn())},[ve]),C.createElement(of.Provider,{value:Ms},C.createElement(Pwe,Mt({},Iwe(a),{popupElement:Wt,popupStyle:f.popup,popupClassName:h.popup,visible:ve,onClose:sa,range:!0}),C.createElement(nJe,Mt({},a,{ref:me,suffixIcon:X,activeIndex:qe||ve?We:null,activeHelp:!!Dt,allHelp:!!Dt&&Te==="preset",focused:qe,onFocus:Li,onBlur:Ui,onKeyDown:_o,onSubmit:kn,value:Zt,maskFormat:c,onChange:Dn,onInputChange:hr,format:l,inputReadOnly:H,disabled:y,open:ve,onOpenChange:Re,onClick:qn,onClear:_n,invalid:ft,onInvalid:Tt,onActiveInfo:En}))))}var iJe=C.forwardRef(rJe);function aJe(n){var e=n.prefixCls,r=n.value,i=n.onRemove,a=n.removeIcon,o=a===void 0?"×":a,s=n.formatDate,l=n.disabled,c=n.maxTagCount,u=n.placeholder,d="".concat(e,"-selector"),f="".concat(e,"-selection"),h="".concat(f,"-overflow");function p(v,y){return C.createElement("span",{className:Be("".concat(f,"-item")),title:typeof v=="string"?v:null},C.createElement("span",{className:"".concat(f,"-item-content")},v),!l&&y&&C.createElement("span",{onMouseDown:function(x){x.preventDefault()},onClick:y,className:"".concat(f,"-item-remove")},o))}function g(v){var y=s(v),b=function(_){_&&_.stopPropagation(),i(v)};return p(y,b)}function m(v){var y="+ ".concat(v.length," ...");return p(y)}return C.createElement("div",{className:d},C.createElement(z_,{prefixCls:h,data:r,renderItem:g,renderRest:m,itemKey:function(y){return s(y)},maxCount:c}),!r.length&&C.createElement("span",{className:"".concat(e,"-selection-placeholder")},u))}var oJe=["id","open","prefix","clearIcon","suffixIcon","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","internalPicker","value","onChange","onSubmit","onInputChange","multiple","maxTagCount","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onMouseDown","required","aria-required","autoFocus","tabIndex","removeIcon"];function sJe(n,e){n.id;var r=n.open,i=n.prefix,a=n.clearIcon,o=n.suffixIcon;n.activeHelp,n.allHelp;var s=n.focused;n.onFocus,n.onBlur,n.onKeyDown;var l=n.locale,c=n.generateConfig,u=n.placeholder,d=n.className,f=n.style,h=n.onClick,p=n.onClear,g=n.internalPicker,m=n.value,v=n.onChange,y=n.onSubmit;n.onInputChange;var b=n.multiple,x=n.maxTagCount;n.format,n.maskFormat,n.preserveInvalidOnBlur,n.onInvalid;var _=n.disabled,S=n.invalid;n.inputReadOnly;var M=n.direction;n.onOpenChange;var E=n.onMouseDown;n.required,n["aria-required"];var T=n.autoFocus,P=n.tabIndex,A=n.removeIcon,N=ir(n,oJe),O=M==="rtl",I=C.useContext(of),D=I.prefixCls,k=C.useRef(),$=C.useRef();C.useImperativeHandle(e,function(){return{nativeElement:k.current,focus:function(q){var Q;(Q=$.current)===null||Q===void 0||Q.focus(q)},blur:function(){var q;(q=$.current)===null||q===void 0||q.blur()}}});var B=aSe(N),F=function(q){v([q])},G=function(q){var Q=m.filter(function(ie){return ie&&!Us(c,l,ie,q,g)});v(Q),r||y()},z=iSe(se(se({},n),{},{onChange:F}),function(K){var q=K.valueTexts;return{value:q[0]||"",active:s}}),U=fe(z,2),H=U[0],X=U[1],V=!!(a&&m.length&&!_),W=b?C.createElement(C.Fragment,null,C.createElement(aJe,{prefixCls:D,value:m,onRemove:G,formatDate:X,maxTagCount:x,disabled:_,removeIcon:A,placeholder:u}),C.createElement("input",{className:"".concat(D,"-multiple-input"),value:m.map(X).join(","),ref:$,readOnly:!0,autoFocus:T,tabIndex:P}),C.createElement(B4,{type:"suffix",icon:o}),V&&C.createElement(sj,{icon:a,onClear:p})):C.createElement(lj,Mt({ref:$},H(),{autoFocus:T,tabIndex:P,suffixIcon:o,clearIcon:V&&C.createElement(sj,{icon:a,onClear:p}),showActiveCls:!1}));return C.createElement("div",Mt({},B,{className:Be(D,re(re(re(re(re({},"".concat(D,"-multiple"),b),"".concat(D,"-focused"),s),"".concat(D,"-disabled"),_),"".concat(D,"-invalid"),S),"".concat(D,"-rtl"),O),d),style:f,ref:k,onClick:h,onMouseDown:function(q){var Q,ie=q.target;ie!==((Q=$.current)===null||Q===void 0?void 0:Q.inputElement)&&q.preventDefault(),E==null||E(q)}}),i&&C.createElement("div",{className:"".concat(D,"-prefix")},i),W)}var lJe=C.forwardRef(sJe);function cJe(n,e){var r=Gwe(n),i=fe(r,6),a=i[0],o=i[1],s=i[2],l=i[3],c=i[4],u=i[5],d=a,f=d.prefixCls,h=d.styles,p=d.classNames,g=d.order,m=d.defaultValue,v=d.value,y=d.needConfirm,b=d.onChange,x=d.onKeyDown,_=d.disabled,S=d.disabledDate,M=d.minDate,E=d.maxDate,T=d.defaultOpen,P=d.open,A=d.onOpenChange,N=d.locale,O=d.generateConfig,I=d.picker,D=d.showNow,k=d.showToday,$=d.showTime,B=d.mode,F=d.onPanelChange,G=d.onCalendarChange,z=d.onOk,U=d.multiple,H=d.defaultPickerValue,X=d.pickerValue,V=d.onPickerValueChange,W=d.inputReadOnly,K=d.suffixIcon,q=d.removeIcon,Q=d.onFocus,ie=d.onBlur,oe=d.presets,ue=d.components,le=d.cellRender,me=d.dateRender,J=d.monthCellRender,pe=d.onClick,ve=Hwe(e);function Me(rn){return rn===null?null:U?rn:rn[0]}var Re=tSe(O,N,o),Xe=jwe(P,T,[_],A),He=fe(Xe,2),ee=He[0],Y=He[1],ce=function(Wt,Dn,hr){if(G){var Li=se({},hr);delete Li.range,G(Me(Wt),Me(Dn),Li)}},_e=function(Wt){z==null||z(Me(Wt))},Ae=Qwe(O,N,l,!1,g,m,v,ce,_e),Ce=fe(Ae,5),et=Ce[0],Ve=Ce[1],qe=Ce[2],dt=Ce[3],Ge=Ce[4],We=qe(),Ze=qwe([_]),Ie=fe(Ze,4),De=Ie[0],bt=Ie[1],Ke=Ie[2],mt=Ie[3],xe=function(Wt){bt(!0),Q==null||Q(Wt,{})},vt=function(Wt){bt(!1),ie==null||ie(Wt,{})},Ue=es(I,{value:B}),Le=fe(Ue,2),Ye=Le[0],nt=Le[1],_t=Ye==="date"&&$?"datetime":Ye,Gt=eSe(I,Ye,D,k),Ot=b&&function(rn,Wt){b(Me(rn),Me(Wt))},wt=Jwe(se(se({},a),{},{onChange:Ot}),et,Ve,qe,dt,[],l,De,ee,u),Ft=fe(wt,2),wn=Ft[1],ye=Dwe(We,u),be=fe(ye,2),Se=be[0],je=be[1],tt=C.useMemo(function(){return Se.some(function(rn){return rn})},[Se]),ft=function(Wt,Dn){if(V){var hr=se(se({},Dn),{},{mode:Dn.mode[0]});delete hr.range,V(Wt[0],hr)}},Tt=Ywe(O,N,We,[Ye],ee,mt,o,!1,H,X,Fy($==null?void 0:$.defaultOpenValue),ft,M,E),It=fe(Tt,2),Rt=It[0],Lt=It[1],$t=Lr(function(rn,Wt,Dn){if(nt(Wt),F&&Dn!==!1){var hr=rn||We[We.length-1];F(hr,Wt)}}),en=function(){wn(qe()),Y(!1,{force:!0})},yn=function(Wt){!_&&!ve.current.nativeElement.contains(document.activeElement)&&ve.current.focus(),Y(!0),pe==null||pe(Wt)},kn=function(){wn(null),Y(!1,{force:!0})},qn=C.useState(null),_n=fe(qn,2),te=_n[0],de=_n[1],Te=C.useState(null),Oe=fe(Te,2),Ee=Oe[0],ut=Oe[1],Dt=C.useMemo(function(){var rn=[Ee].concat(ot(We)).filter(function(Wt){return Wt});return U?rn:rn.slice(0,1)},[We,Ee,U]),Bt=C.useMemo(function(){return!U&&Ee?[Ee]:We.filter(function(rn){return rn})},[We,Ee,U]);C.useEffect(function(){ee||ut(null)},[ee]);var Zt=Wwe(oe),dn=function(Wt){ut(Wt),de("preset")},kt=function(Wt){var Dn=U?Re(qe(),Wt):[Wt],hr=wn(Dn);hr&&!U&&Y(!1,{force:!0})},zt=function(Wt){kt(Wt)},En=function(Wt){ut(Wt),de("cell")},Bn=function(Wt){Y(!0),xe(Wt)},In=function(Wt){if(Ke("panel"),!(U&&_t!==I)){var Dn=U?Re(qe(),Wt):[Wt];dt(Dn),!y&&!s&&o===_t&&en()}},zn=function(){Y(!1)},Rn=zY(le,me,J),fn=C.useMemo(function(){var rn=Hu(a,!1),Wt=Qu(a,[].concat(ot(Object.keys(rn)),["onChange","onCalendarChange","style","className","onPanelChange"]));return se(se({},Wt),{},{multiple:a.multiple})},[a]),Yr=C.createElement(rSe,Mt({},fn,{showNow:Gt,showTime:$,disabledDate:S,onFocus:Bn,onBlur:vt,picker:I,mode:Ye,internalMode:_t,onPanelChange:$t,format:c,value:We,isInvalid:u,onChange:null,onSelect:In,pickerValue:Rt,defaultOpenValue:$==null?void 0:$.defaultOpenValue,onPickerValueChange:Lt,hoverValue:Dt,onHover:En,needConfirm:y,onSubmit:en,onOk:Ge,presets:Zt,onPresetHover:dn,onPresetSubmit:kt,onNow:zt,cellRender:Rn})),Hn=function(Wt){dt(Wt)},Yi=function(){Ke("input")},sa=function(Wt){Ke("input"),Y(!0,{inherit:!0}),xe(Wt)},Cn=function(Wt){Y(!1),vt(Wt)},Mn=function(Wt,Dn){Wt.key==="Tab"&&en(),x==null||x(Wt,Dn)},Un=C.useMemo(function(){return{prefixCls:f,locale:N,generateConfig:O,button:ue.button,input:ue.input}},[f,N,O,ue.button,ue.input]);return Dr(function(){ee&&mt!==void 0&&$t(null,I,!1)},[ee,mt,I]),Dr(function(){var rn=Ke();!ee&&rn==="input"&&(Y(!1),en()),!ee&&s&&!y&&rn==="panel"&&en()},[ee]),C.createElement(of.Provider,{value:Un},C.createElement(Pwe,Mt({},Iwe(a),{popupElement:Yr,popupStyle:h.popup,popupClassName:p.popup,visible:ee,onClose:zn}),C.createElement(lJe,Mt({},a,{ref:ve,suffixIcon:K,removeIcon:q,activeHelp:!!Ee,allHelp:!!Ee&&te==="preset",focused:De,onFocus:sa,onBlur:Cn,onKeyDown:Mn,onSubmit:en,value:Bt,maskFormat:c,onChange:Hn,onInputChange:Yi,internalPicker:o,format:l,inputReadOnly:W,disabled:_,open:ee,onOpenChange:Y,onClick:yn,onClear:kn,invalid:tt,onInvalid:function(Wt){je(Wt,0)}}))))}var uJe=C.forwardRef(cJe);function j_(n){return Qr(n,{inputAffixPadding:n.paddingXXS})}const H_=n=>{const{controlHeight:e,fontSize:r,lineHeight:i,lineWidth:a,controlHeightSM:o,controlHeightLG:s,fontSizeLG:l,lineHeightLG:c,paddingSM:u,controlPaddingHorizontalSM:d,controlPaddingHorizontal:f,colorFillAlter:h,colorPrimaryHover:p,colorPrimary:g,controlOutlineWidth:m,controlOutline:v,colorErrorOutline:y,colorWarningOutline:b,colorBgContainer:x,inputFontSize:_,inputFontSizeLG:S,inputFontSizeSM:M}=n,E=_||r,T=M||E,P=S||l,A=Math.round((e-E*i)/2*10)/10-a,N=Math.round((o-T*i)/2*10)/10-a,O=Math.ceil((s-P*c)/2*10)/10-a;return{paddingBlock:Math.max(A,0),paddingBlockSM:Math.max(N,0),paddingBlockLG:Math.max(O,0),paddingInline:u-a,paddingInlineSM:d-a,paddingInlineLG:f-a,addonBg:h,activeBorderColor:g,hoverBorderColor:p,activeShadow:`0 0 0 ${m}px ${v}`,errorActiveShadow:`0 0 0 ${m}px ${y}`,warningActiveShadow:`0 0 0 ${m}px ${b}`,hoverBg:x,activeBg:x,inputFontSize:E,inputFontSizeLG:P,inputFontSizeSM:T}},dJe=n=>({borderColor:n.hoverBorderColor,backgroundColor:n.hoverBg}),HY=n=>({color:n.colorTextDisabled,backgroundColor:n.colorBgContainerDisabled,borderColor:n.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},dJe(Qr(n,{hoverBorderColor:n.colorBorder,hoverBg:n.colorBgContainerDisabled})))}),oSe=(n,e)=>({background:n.colorBgContainer,borderWidth:n.lineWidth,borderStyle:n.lineType,borderColor:e.borderColor,"&:hover":{borderColor:e.hoverBorderColor,backgroundColor:n.hoverBg},"&:focus, &:focus-within":{borderColor:e.activeBorderColor,boxShadow:e.activeShadow,outline:0,backgroundColor:n.activeBg}}),Zie=(n,e)=>({[`&${n.componentCls}-status-${e.status}:not(${n.componentCls}-disabled)`]:Object.assign(Object.assign({},oSe(n,e)),{[`${n.componentCls}-prefix, ${n.componentCls}-suffix`]:{color:e.affixColor}}),[`&${n.componentCls}-status-${e.status}${n.componentCls}-disabled`]:{borderColor:e.borderColor}}),WY=(n,e)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},oSe(n,{borderColor:n.colorBorder,hoverBorderColor:n.hoverBorderColor,activeBorderColor:n.activeBorderColor,activeShadow:n.activeShadow})),{[`&${n.componentCls}-disabled, &[disabled]`]:Object.assign({},HY(n))}),Zie(n,{status:"error",borderColor:n.colorError,hoverBorderColor:n.colorErrorBorderHover,activeBorderColor:n.colorError,activeShadow:n.errorActiveShadow,affixColor:n.colorError})),Zie(n,{status:"warning",borderColor:n.colorWarning,hoverBorderColor:n.colorWarningBorderHover,activeBorderColor:n.colorWarning,activeShadow:n.warningActiveShadow,affixColor:n.colorWarning})),e)}),Qie=(n,e)=>({[`&${n.componentCls}-group-wrapper-status-${e.status}`]:{[`${n.componentCls}-group-addon`]:{borderColor:e.addonBorderColor,color:e.addonColor}}}),sSe=n=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${n.componentCls}-group`]:{"&-addon":{background:n.addonBg,border:`${Qe(n.lineWidth)} ${n.lineType} ${n.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},Qie(n,{status:"error",addonBorderColor:n.colorError,addonColor:n.colorErrorText})),Qie(n,{status:"warning",addonBorderColor:n.colorWarning,addonColor:n.colorWarningText})),{[`&${n.componentCls}-group-wrapper-disabled`]:{[`${n.componentCls}-group-addon`]:Object.assign({},HY(n))}})}),qY=(n,e)=>{const{componentCls:r}=n;return{"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${r}-disabled, &[disabled]`]:{color:n.colorTextDisabled,cursor:"not-allowed"},[`&${r}-status-error`]:{"&, & input, & textarea":{color:n.colorError}},[`&${r}-status-warning`]:{"&, & input, & textarea":{color:n.colorWarning}}},e)}},lSe=(n,e)=>{var r;return{background:e.bg,borderWidth:n.lineWidth,borderStyle:n.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:(r=e==null?void 0:e.inputColor)!==null&&r!==void 0?r:"unset"},"&:hover":{background:e.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:e.activeBorderColor,backgroundColor:n.activeBg}}},Jie=(n,e)=>({[`&${n.componentCls}-status-${e.status}:not(${n.componentCls}-disabled)`]:Object.assign(Object.assign({},lSe(n,e)),{[`${n.componentCls}-prefix, ${n.componentCls}-suffix`]:{color:e.affixColor}})}),YY=(n,e)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},lSe(n,{bg:n.colorFillTertiary,hoverBg:n.colorFillSecondary,activeBorderColor:n.activeBorderColor})),{[`&${n.componentCls}-disabled, &[disabled]`]:Object.assign({},HY(n))}),Jie(n,{status:"error",bg:n.colorErrorBg,hoverBg:n.colorErrorBgHover,activeBorderColor:n.colorError,inputColor:n.colorErrorText,affixColor:n.colorError})),Jie(n,{status:"warning",bg:n.colorWarningBg,hoverBg:n.colorWarningBgHover,activeBorderColor:n.colorWarning,inputColor:n.colorWarningText,affixColor:n.colorWarning})),e)}),eae=(n,e)=>({[`&${n.componentCls}-group-wrapper-status-${e.status}`]:{[`${n.componentCls}-group-addon`]:{background:e.addonBg,color:e.addonColor}}}),cSe=n=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${n.componentCls}-group`]:{"&-addon":{background:n.colorFillTertiary},[`${n.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${Qe(n.lineWidth)} ${n.lineType} ${n.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${Qe(n.lineWidth)} ${n.lineType} ${n.colorSplit}`}}}},eae(n,{status:"error",addonBg:n.colorErrorBg,addonColor:n.colorErrorText})),eae(n,{status:"warning",addonBg:n.colorWarningBg,addonColor:n.colorWarningText})),{[`&${n.componentCls}-group-wrapper-disabled`]:{[`${n.componentCls}-group`]:{"&-addon":{background:n.colorFillTertiary,color:n.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${Qe(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderTop:`${Qe(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderBottom:`${Qe(n.lineWidth)} ${n.lineType} ${n.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${Qe(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderTop:`${Qe(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderBottom:`${Qe(n.lineWidth)} ${n.lineType} ${n.colorBorder}`}}}})}),uSe=(n,e)=>({background:n.colorBgContainer,borderWidth:`${Qe(n.lineWidth)} 0`,borderStyle:`${n.lineType} none`,borderColor:`transparent transparent ${e.borderColor} transparent`,borderRadius:0,"&:hover":{borderColor:`transparent transparent ${e.borderColor} transparent`,backgroundColor:n.hoverBg},"&:focus, &:focus-within":{borderColor:`transparent transparent ${e.borderColor} transparent`,outline:0,backgroundColor:n.activeBg}}),tae=(n,e)=>({[`&${n.componentCls}-status-${e.status}:not(${n.componentCls}-disabled)`]:Object.assign(Object.assign({},uSe(n,e)),{[`${n.componentCls}-prefix, ${n.componentCls}-suffix`]:{color:e.affixColor}}),[`&${n.componentCls}-status-${e.status}${n.componentCls}-disabled`]:{borderColor:`transparent transparent ${e.borderColor} transparent`}}),XY=(n,e)=>({"&-underlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},uSe(n,{borderColor:n.colorBorder,hoverBorderColor:n.hoverBorderColor,activeBorderColor:n.activeBorderColor,activeShadow:n.activeShadow})),{[`&${n.componentCls}-disabled, &[disabled]`]:{color:n.colorTextDisabled,boxShadow:"none",cursor:"not-allowed","&:hover":{borderColor:`transparent transparent ${n.colorBorder} transparent`}},"input[disabled], textarea[disabled]":{cursor:"not-allowed"}}),tae(n,{status:"error",borderColor:n.colorError,hoverBorderColor:n.colorErrorBorderHover,activeBorderColor:n.colorError,activeShadow:n.errorActiveShadow,affixColor:n.colorError})),tae(n,{status:"warning",borderColor:n.colorWarning,hoverBorderColor:n.colorWarningBorderHover,activeBorderColor:n.colorWarning,activeShadow:n.warningActiveShadow,affixColor:n.colorWarning})),e)}),KY=n=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:n,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),dSe=n=>{const{paddingBlockLG:e,lineHeightLG:r,borderRadiusLG:i,paddingInlineLG:a}=n;return{padding:`${Qe(e)} ${Qe(a)}`,fontSize:n.inputFontSizeLG,lineHeight:r,borderRadius:i}},fSe=n=>({padding:`${Qe(n.paddingBlockSM)} ${Qe(n.paddingInlineSM)}`,fontSize:n.inputFontSizeSM,borderRadius:n.borderRadiusSM}),z4=n=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${Qe(n.paddingBlock)} ${Qe(n.paddingInline)}`,color:n.colorText,fontSize:n.inputFontSize,lineHeight:n.lineHeight,borderRadius:n.borderRadius,transition:`all ${n.motionDurationMid}`},KY(n.colorTextPlaceholder)),{"&-lg":Object.assign({},dSe(n)),"&-sm":Object.assign({},fSe(n)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),hSe=n=>{const{componentCls:e,antCls:r}=n;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:n.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${e}, &-lg > ${e}-group-addon`]:Object.assign({},dSe(n)),[`&-sm ${e}, &-sm > ${e}-group-addon`]:Object.assign({},fSe(n)),[`&-lg ${r}-select-single ${r}-select-selector`]:{height:n.controlHeightLG},[`&-sm ${r}-select-single ${r}-select-selector`]:{height:n.controlHeightSM},[`> ${e}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${e}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${Qe(n.paddingInline)}`,color:n.colorText,fontWeight:"normal",fontSize:n.inputFontSize,textAlign:"center",borderRadius:n.borderRadius,transition:`all ${n.motionDurationSlow}`,lineHeight:1,[`${r}-select`]:{margin:`${Qe(n.calc(n.paddingBlock).add(1).mul(-1).equal())} ${Qe(n.calc(n.paddingInline).mul(-1).equal())}`,[`&${r}-select-single:not(${r}-select-customize-input):not(${r}-pagination-size-changer)`]:{[`${r}-select-selector`]:{backgroundColor:"inherit",border:`${Qe(n.lineWidth)} ${n.lineType} transparent`,boxShadow:"none"}}},[`${r}-cascader-picker`]:{margin:`-9px ${Qe(n.calc(n.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${r}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[e]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${e}-search-with-button &`]:{zIndex:0}}},[`> ${e}:first-child, ${e}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${r}-select ${r}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}-affix-wrapper`]:{[`&:not(:first-child) ${e}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${e}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${e}:last-child, ${e}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${r}-select ${r}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${e}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${e}-search &`]:{borderStartStartRadius:n.borderRadius,borderEndStartRadius:n.borderRadius}},[`&:not(:first-child), ${e}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${e}-group-compact`]:Object.assign(Object.assign({display:"block"},Txe()),{[`${e}-group-addon, ${e}-group-wrap, > ${e}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:n.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${e}-affix-wrapper,
        & > ${e}-number-affix-wrapper,
        & > ${r}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:n.calc(n.lineWidth).mul(-1).equal(),borderInlineEndWidth:n.lineWidth},[e]:{float:"none"},[`& > ${r}-select > ${r}-select-selector,
      & > ${r}-select-auto-complete ${e},
      & > ${r}-cascader-picker ${e},
      & > ${e}-group-wrapper ${e}`]:{borderInlineEndWidth:n.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${r}-select-focused`]:{zIndex:1},[`& > ${r}-select > ${r}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${r}-select:first-child > ${r}-select-selector,
      & > ${r}-select-auto-complete:first-child ${e},
      & > ${r}-cascader-picker:first-child ${e}`]:{borderStartStartRadius:n.borderRadius,borderEndStartRadius:n.borderRadius},[`& > *:last-child,
      & > ${r}-select:last-child > ${r}-select-selector,
      & > ${r}-cascader-picker:last-child ${e},
      & > ${r}-cascader-picker-focused:last-child ${e}`]:{borderInlineEndWidth:n.lineWidth,borderStartEndRadius:n.borderRadius,borderEndEndRadius:n.borderRadius},[`& > ${r}-select-auto-complete ${e}`]:{verticalAlign:"top"},[`${e}-group-wrapper + ${e}-group-wrapper`]:{marginInlineStart:n.calc(n.lineWidth).mul(-1).equal(),[`${e}-affix-wrapper`]:{borderRadius:0}},[`${e}-group-wrapper:not(:last-child)`]:{[`&${e}-search > ${e}-group`]:{[`& > ${e}-group-addon > ${e}-search-button`]:{borderRadius:0},[`& > ${e}`]:{borderStartStartRadius:n.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:n.borderRadius}}}})}},fJe=n=>{const{componentCls:e,controlHeightSM:r,lineWidth:i,calc:a}=n,s=a(r).sub(a(i).mul(2)).sub(16).div(2).equal();return{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ts(n)),z4(n)),WY(n)),YY(n)),qY(n)),XY(n)),{'&[type="color"]':{height:n.controlHeight,[`&${e}-lg`]:{height:n.controlHeightLG},[`&${e}-sm`]:{height:r,paddingTop:s,paddingBottom:s}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{appearance:"none"}})}},hJe=n=>{const{componentCls:e}=n;return{[`${e}-clear-icon`]:{margin:0,padding:0,lineHeight:0,color:n.colorTextQuaternary,fontSize:n.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${n.motionDurationSlow}`,border:"none",outline:"none",backgroundColor:"transparent","&:hover":{color:n.colorIcon},"&:active":{color:n.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${Qe(n.inputAffixPadding)}`}}}},pJe=n=>{const{componentCls:e,inputAffixPadding:r,colorTextDescription:i,motionDurationSlow:a,colorIcon:o,colorIconHover:s,iconCls:l}=n,c=`${e}-affix-wrapper`,u=`${e}-affix-wrapper-disabled`;return{[c]:Object.assign(Object.assign(Object.assign(Object.assign({},z4(n)),{display:"inline-flex",[`&:not(${e}-disabled):hover`]:{zIndex:1,[`${e}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${e}`]:{padding:0},[`> input${e}, > textarea${e}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[e]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:n.paddingXS}},"&-show-count-suffix":{color:i,direction:"ltr"},"&-show-count-has-suffix":{marginInlineEnd:n.paddingXXS},"&-prefix":{marginInlineEnd:r},"&-suffix":{marginInlineStart:r}}}),hJe(n)),{[`${l}${e}-password-icon`]:{color:o,cursor:"pointer",transition:`all ${a}`,"&:hover":{color:s}}}),[`${e}-underlined`]:{borderRadius:0},[u]:{[`${l}${e}-password-icon`]:{color:o,cursor:"not-allowed","&:hover":{color:o}}}}},gJe=n=>{const{componentCls:e,borderRadiusLG:r,borderRadiusSM:i}=n;return{[`${e}-group`]:Object.assign(Object.assign(Object.assign({},ts(n)),hSe(n)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${e}-group-addon`]:{borderRadius:r,fontSize:n.inputFontSizeLG}},"&-sm":{[`${e}-group-addon`]:{borderRadius:i}}},sSe(n)),cSe(n)),{[`&:not(${e}-compact-first-item):not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}, ${e}-group-addon`]:{borderRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-first-item`]:{[`${e}, ${e}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-last-item`]:{[`${e}, ${e}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-item`]:{[`${e}-affix-wrapper`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})})}},mJe=n=>{const{componentCls:e,antCls:r}=n,i=`${e}-search`;return{[i]:{[e]:{"&:hover, &:focus":{[`+ ${e}-group-addon ${i}-button:not(${r}-btn-primary)`]:{borderInlineStartColor:n.colorPrimaryHover}}},[`${e}-affix-wrapper`]:{height:n.controlHeight,borderRadius:0},[`${e}-lg`]:{lineHeight:n.calc(n.lineHeightLG).sub(2e-4).equal()},[`> ${e}-group`]:{[`> ${e}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${i}-button`]:{marginInlineEnd:-1,borderStartStartRadius:0,borderEndStartRadius:0,boxShadow:"none"},[`${i}-button:not(${r}-btn-primary)`]:{color:n.colorTextDescription,"&:hover":{color:n.colorPrimaryHover},"&:active":{color:n.colorPrimaryActive},[`&${r}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${i}-button`]:{height:n.controlHeight,"&:hover, &:focus":{zIndex:1}},"&-large":{[`${e}-affix-wrapper, ${i}-button`]:{height:n.controlHeightLG}},"&-small":{[`${e}-affix-wrapper, ${i}-button`]:{height:n.controlHeightSM}},"&-rtl":{direction:"rtl"},[`&${e}-compact-item`]:{[`&:not(${e}-compact-last-item)`]:{[`${e}-group-addon`]:{[`${e}-search-button`]:{marginInlineEnd:n.calc(n.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${e}-compact-first-item)`]:{[`${e},${e}-affix-wrapper`]:{borderRadius:0}},[`> ${e}-group-addon ${e}-search-button,
        > ${e},
        ${e}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${e}-affix-wrapper-focused`]:{zIndex:2}}}}},vJe=n=>{const{componentCls:e}=n;return{[`${e}-out-of-range`]:{[`&, & input, & textarea, ${e}-show-count-suffix, ${e}-data-count`]:{color:n.colorError}}}},pSe=Ja(["Input","Shared"],n=>{const e=Qr(n,j_(n));return[fJe(e),pJe(e)]},H_,{resetFont:!1}),gSe=Ja(["Input","Component"],n=>{const e=Qr(n,j_(n));return[gJe(e),mJe(e),vJe(e),hM(e)]},H_,{resetFont:!1}),Y5=(n,e)=>{const{componentCls:r,controlHeight:i}=n,a=e?`${r}-${e}`:"",o=swe(n);return[{[`${r}-multiple${a}`]:{paddingBlock:o.containerPadding,paddingInlineStart:o.basePadding,minHeight:i,[`${r}-selection-item`]:{height:o.itemHeight,lineHeight:Qe(o.itemLineHeight)}}}]},yJe=n=>{const{componentCls:e,calc:r,lineWidth:i}=n,a=Qr(n,{fontHeight:n.fontSize,selectHeight:n.controlHeightSM,multipleSelectItemHeight:n.multipleItemHeightSM,borderRadius:n.borderRadiusSM,borderRadiusSM:n.borderRadiusXS,controlHeight:n.controlHeightSM}),o=Qr(n,{fontHeight:r(n.multipleItemHeightLG).sub(r(i).mul(2).equal()).equal(),fontSize:n.fontSizeLG,selectHeight:n.controlHeightLG,multipleSelectItemHeight:n.multipleItemHeightLG,borderRadius:n.borderRadiusLG,borderRadiusSM:n.borderRadius,controlHeight:n.controlHeightLG});return[Y5(a,"small"),Y5(n),Y5(o,"large"),{[`${e}${e}-multiple`]:Object.assign(Object.assign({width:"100%",cursor:"text",[`${e}-selector`]:{flex:"auto",padding:0,position:"relative","&:after":{margin:0},[`${e}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:n.inputPaddingHorizontalBase,insetInlineEnd:0,transform:"translateY(-50%)",transition:`all ${n.motionDurationSlow}`,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",flex:1,color:n.colorTextPlaceholder,pointerEvents:"none"}}},lwe(n)),{[`${e}-multiple-input`]:{width:0,height:0,border:0,visibility:"hidden",position:"absolute",zIndex:-1}})}]},bJe=n=>{const{pickerCellCls:e,pickerCellInnerCls:r,cellHeight:i,borderRadiusSM:a,motionDurationMid:o,cellHoverBg:s,lineWidth:l,lineType:c,colorPrimary:u,cellActiveWithRangeBg:d,colorTextLightSolid:f,colorTextDisabled:h,cellBgDisabled:p,colorFillSecondary:g}=n;return{"&::before":{position:"absolute",top:"50%",insetInlineStart:0,insetInlineEnd:0,zIndex:1,height:i,transform:"translateY(-50%)",content:'""',pointerEvents:"none"},[r]:{position:"relative",zIndex:2,display:"inline-block",minWidth:i,height:i,lineHeight:Qe(i),borderRadius:a,transition:`background ${o}`},[`&:hover:not(${e}-in-view):not(${e}-disabled),
    &:hover:not(${e}-selected):not(${e}-range-start):not(${e}-range-end):not(${e}-disabled)`]:{[r]:{background:s}},[`&-in-view${e}-today ${r}`]:{"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:1,border:`${Qe(l)} ${c} ${u}`,borderRadius:a,content:'""'}},[`&-in-view${e}-in-range,
      &-in-view${e}-range-start,
      &-in-view${e}-range-end`]:{position:"relative",[`&:not(${e}-disabled):before`]:{background:d}},[`&-in-view${e}-selected,
      &-in-view${e}-range-start,
      &-in-view${e}-range-end`]:{[`&:not(${e}-disabled) ${r}`]:{color:f,background:u},[`&${e}-disabled ${r}`]:{background:g}},[`&-in-view${e}-range-start:not(${e}-disabled):before`]:{insetInlineStart:"50%"},[`&-in-view${e}-range-end:not(${e}-disabled):before`]:{insetInlineEnd:"50%"},[`&-in-view${e}-range-start:not(${e}-range-end) ${r}`]:{borderStartStartRadius:a,borderEndStartRadius:a,borderStartEndRadius:0,borderEndEndRadius:0},[`&-in-view${e}-range-end:not(${e}-range-start) ${r}`]:{borderStartStartRadius:0,borderEndStartRadius:0,borderStartEndRadius:a,borderEndEndRadius:a},"&-disabled":{color:h,cursor:"not-allowed",[r]:{background:"transparent"},"&::before":{background:p}},[`&-disabled${e}-today ${r}::before`]:{borderColor:h}}},xJe=n=>{const{componentCls:e,pickerCellCls:r,pickerCellInnerCls:i,pickerYearMonthCellWidth:a,pickerControlIconSize:o,cellWidth:s,paddingSM:l,paddingXS:c,paddingXXS:u,colorBgContainer:d,lineWidth:f,lineType:h,borderRadiusLG:p,colorPrimary:g,colorTextHeading:m,colorSplit:v,pickerControlIconBorderWidth:y,colorIcon:b,textHeight:x,motionDurationMid:_,colorIconHover:S,fontWeightStrong:M,cellHeight:E,pickerCellPaddingVertical:T,colorTextDisabled:P,colorText:A,fontSize:N,motionDurationSlow:O,withoutTimeCellHeight:I,pickerQuarterPanelContentHeight:D,borderRadiusSM:k,colorTextLightSolid:$,cellHoverBg:B,timeColumnHeight:F,timeColumnWidth:G,timeCellHeight:z,controlItemBgActive:U,marginXXS:H,pickerDatePanelPaddingHorizontal:X,pickerControlIconMargin:V}=n,W=n.calc(s).mul(7).add(n.calc(X).mul(2)).equal();return{[e]:{"&-panel":{display:"inline-flex",flexDirection:"column",textAlign:"center",background:d,borderRadius:p,outline:"none","&-focused":{borderColor:g},"&-rtl":{[`${e}-prev-icon,
              ${e}-super-prev-icon`]:{transform:"rotate(45deg)"},[`${e}-next-icon,
              ${e}-super-next-icon`]:{transform:"rotate(-135deg)"},[`${e}-time-panel`]:{[`${e}-content`]:{direction:"ltr","> *":{direction:"rtl"}}}}},"&-decade-panel,\n        &-year-panel,\n        &-quarter-panel,\n        &-month-panel,\n        &-week-panel,\n        &-date-panel,\n        &-time-panel":{display:"flex",flexDirection:"column",width:W},"&-header":{display:"flex",padding:`0 ${Qe(c)}`,color:m,borderBottom:`${Qe(f)} ${h} ${v}`,"> *":{flex:"none"},button:{padding:0,color:b,lineHeight:Qe(x),background:"transparent",border:0,cursor:"pointer",transition:`color ${_}`,fontSize:"inherit",display:"inline-flex",alignItems:"center",justifyContent:"center","&:empty":{display:"none"}},"> button":{minWidth:"1.6em",fontSize:N,"&:hover":{color:S},"&:disabled":{opacity:.25,pointerEvents:"none"}},"&-view":{flex:"auto",fontWeight:M,lineHeight:Qe(x),"> button":{color:"inherit",fontWeight:"inherit",verticalAlign:"top","&:not(:first-child)":{marginInlineStart:c},"&:hover":{color:g}}}},"&-prev-icon,\n        &-next-icon,\n        &-super-prev-icon,\n        &-super-next-icon":{position:"relative",width:o,height:o,"&::before":{position:"absolute",top:0,insetInlineStart:0,width:o,height:o,border:"0 solid currentcolor",borderBlockStartWidth:y,borderInlineStartWidth:y,content:'""'}},"&-super-prev-icon,\n        &-super-next-icon":{"&::after":{position:"absolute",top:V,insetInlineStart:V,display:"inline-block",width:o,height:o,border:"0 solid currentcolor",borderBlockStartWidth:y,borderInlineStartWidth:y,content:'""'}},"&-prev-icon, &-super-prev-icon":{transform:"rotate(-45deg)"},"&-next-icon, &-super-next-icon":{transform:"rotate(135deg)"},"&-content":{width:"100%",tableLayout:"fixed",borderCollapse:"collapse","th, td":{position:"relative",minWidth:E,fontWeight:"normal"},th:{height:n.calc(E).add(n.calc(T).mul(2)).equal(),color:A,verticalAlign:"middle"}},"&-cell":Object.assign({padding:`${Qe(T)} 0`,color:P,cursor:"pointer","&-in-view":{color:A}},bJe(n)),"&-decade-panel,\n        &-year-panel,\n        &-quarter-panel,\n        &-month-panel":{[`${e}-content`]:{height:n.calc(I).mul(4).equal()},[i]:{padding:`0 ${Qe(c)}`}},"&-quarter-panel":{[`${e}-content`]:{height:D}},"&-decade-panel":{[i]:{padding:`0 ${Qe(n.calc(c).div(2).equal())}`},[`${e}-cell::before`]:{display:"none"}},"&-year-panel,\n        &-quarter-panel,\n        &-month-panel":{[`${e}-body`]:{padding:`0 ${Qe(c)}`},[i]:{width:a}},"&-date-panel":{[`${e}-body`]:{padding:`${Qe(c)} ${Qe(X)}`},[`${e}-content th`]:{boxSizing:"border-box",padding:0}},"&-week-panel":{[`${e}-cell`]:{[`&:hover ${i},
            &-selected ${i},
            ${i}`]:{background:"transparent !important"}},"&-row":{td:{"&:before":{transition:`background ${_}`},"&:first-child:before":{borderStartStartRadius:k,borderEndStartRadius:k},"&:last-child:before":{borderStartEndRadius:k,borderEndEndRadius:k}},"&:hover td:before":{background:B},"&-range-start td, &-range-end td, &-selected td, &-hover td":{[`&${r}`]:{"&:before":{background:g},[`&${e}-cell-week`]:{color:new Zr($).setA(.5).toHexString()},[i]:{color:$}}},"&-range-hover td:before":{background:U}}},"&-week-panel, &-date-panel-show-week":{[`${e}-body`]:{padding:`${Qe(c)} ${Qe(l)}`},[`${e}-content th`]:{width:"auto"}},"&-datetime-panel":{display:"flex",[`${e}-time-panel`]:{borderInlineStart:`${Qe(f)} ${h} ${v}`},[`${e}-date-panel,
          ${e}-time-panel`]:{transition:`opacity ${O}`},"&-active":{[`${e}-date-panel,
            ${e}-time-panel`]:{opacity:.3,"&-active":{opacity:1}}}},"&-time-panel":{width:"auto",minWidth:"auto",[`${e}-content`]:{display:"flex",flex:"auto",height:F},"&-column":{flex:"1 0 auto",width:G,margin:`${Qe(u)} 0`,padding:0,overflowY:"hidden",textAlign:"start",listStyle:"none",transition:`background ${_}`,overflowX:"hidden","&::-webkit-scrollbar":{width:8,backgroundColor:"transparent"},"&::-webkit-scrollbar-thumb":{backgroundColor:n.colorTextTertiary,borderRadius:n.borderRadiusSM},"&":{scrollbarWidth:"thin",scrollbarColor:`${n.colorTextTertiary} transparent`},"&::after":{display:"block",height:`calc(100% - ${Qe(z)})`,content:'""'},"&:not(:first-child)":{borderInlineStart:`${Qe(f)} ${h} ${v}`},"&-active":{background:new Zr(U).setA(.2).toHexString()},"&:hover":{overflowY:"auto"},"> li":{margin:0,padding:0,[`&${e}-time-panel-cell`]:{marginInline:H,[`${e}-time-panel-cell-inner`]:{display:"block",width:n.calc(G).sub(n.calc(H).mul(2)).equal(),height:z,margin:0,paddingBlock:0,paddingInlineEnd:0,paddingInlineStart:n.calc(G).sub(z).div(2).equal(),color:A,lineHeight:Qe(z),borderRadius:k,cursor:"pointer",transition:`background ${_}`,"&:hover":{background:B}},"&-selected":{[`${e}-time-panel-cell-inner`]:{background:U}},"&-disabled":{[`${e}-time-panel-cell-inner`]:{color:P,background:"transparent",cursor:"not-allowed"}}}}}}}}},_Je=n=>{const{componentCls:e,textHeight:r,lineWidth:i,paddingSM:a,antCls:o,colorPrimary:s,cellActiveWithRangeBg:l,colorPrimaryBorder:c,lineType:u,colorSplit:d}=n;return{[`${e}-dropdown`]:{[`${e}-footer`]:{borderTop:`${Qe(i)} ${u} ${d}`,"&-extra":{padding:`0 ${Qe(a)}`,lineHeight:Qe(n.calc(r).sub(n.calc(i).mul(2)).equal()),textAlign:"start","&:not(:last-child)":{borderBottom:`${Qe(i)} ${u} ${d}`}}},[`${e}-panels + ${e}-footer ${e}-ranges`]:{justifyContent:"space-between"},[`${e}-ranges`]:{marginBlock:0,paddingInline:Qe(a),overflow:"hidden",textAlign:"start",listStyle:"none",display:"flex",justifyContent:"center",alignItems:"center","> li":{lineHeight:Qe(n.calc(r).sub(n.calc(i).mul(2)).equal()),display:"inline-block"},[`${e}-now-btn-disabled`]:{pointerEvents:"none",color:n.colorTextDisabled},[`${e}-preset > ${o}-tag-blue`]:{color:s,background:l,borderColor:c,cursor:"pointer"},[`${e}-ok`]:{paddingBlock:n.calc(i).mul(2).equal(),marginInlineStart:"auto"}}}}},wJe=n=>{const{componentCls:e,controlHeightLG:r,paddingXXS:i,padding:a}=n;return{pickerCellCls:`${e}-cell`,pickerCellInnerCls:`${e}-cell-inner`,pickerYearMonthCellWidth:n.calc(r).mul(1.5).equal(),pickerQuarterPanelContentHeight:n.calc(r).mul(1.4).equal(),pickerCellPaddingVertical:n.calc(i).add(n.calc(i).div(2)).equal(),pickerCellBorderGap:2,pickerControlIconSize:7,pickerControlIconMargin:4,pickerControlIconBorderWidth:1.5,pickerDatePanelPaddingHorizontal:n.calc(a).add(n.calc(i).div(2)).equal()}},SJe=n=>{const{colorBgContainerDisabled:e,controlHeight:r,controlHeightSM:i,controlHeightLG:a,paddingXXS:o,lineWidth:s}=n,l=o*2,c=s*2,u=Math.min(r-l,r-c),d=Math.min(i-l,i-c),f=Math.min(a-l,a-c);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(o/2),cellHoverBg:n.controlItemBgHover,cellActiveWithRangeBg:n.controlItemBgActive,cellHoverWithRangeBg:new Zr(n.colorPrimary).lighten(35).toHexString(),cellRangeBorderColor:new Zr(n.colorPrimary).lighten(20).toHexString(),cellBgDisabled:e,timeColumnWidth:a*1.4,timeColumnHeight:28*8,timeCellHeight:28,cellWidth:i*1.5,cellHeight:i,textHeight:a,withoutTimeCellHeight:a*1.65,multipleItemBg:n.colorFillSecondary,multipleItemBorderColor:"transparent",multipleItemHeight:u,multipleItemHeightSM:d,multipleItemHeightLG:f,multipleSelectorBgDisabled:e,multipleItemColorDisabled:n.colorTextDisabled,multipleItemBorderColorDisabled:"transparent"}},EJe=n=>Object.assign(Object.assign(Object.assign(Object.assign({},H_(n)),SJe(n)),LY(n)),{presetsWidth:120,presetsMaxWidth:200,zIndexPopup:n.zIndexPopupBase+50}),CJe=n=>{const{componentCls:e}=n;return{[e]:[Object.assign(Object.assign(Object.assign(Object.assign({},WY(n)),XY(n)),YY(n)),qY(n)),{"&-outlined":{[`&${e}-multiple ${e}-selection-item`]:{background:n.multipleItemBg,border:`${Qe(n.lineWidth)} ${n.lineType} ${n.multipleItemBorderColor}`}},"&-filled":{[`&${e}-multiple ${e}-selection-item`]:{background:n.colorBgContainer,border:`${Qe(n.lineWidth)} ${n.lineType} ${n.colorSplit}`}},"&-borderless":{[`&${e}-multiple ${e}-selection-item`]:{background:n.multipleItemBg,border:`${Qe(n.lineWidth)} ${n.lineType} ${n.multipleItemBorderColor}`}},"&-underlined":{[`&${e}-multiple ${e}-selection-item`]:{background:n.multipleItemBg,border:`${Qe(n.lineWidth)} ${n.lineType} ${n.multipleItemBorderColor}`}}}]}},X5=(n,e,r,i)=>{const a=n.calc(r).add(2).equal(),o=n.max(n.calc(e).sub(a).div(2).equal(),0),s=n.max(n.calc(e).sub(a).sub(o).equal(),0);return{padding:`${Qe(o)} ${Qe(i)} ${Qe(s)}`}},MJe=n=>{const{componentCls:e,colorError:r,colorWarning:i}=n;return{[`${e}:not(${e}-disabled):not([disabled])`]:{[`&${e}-status-error`]:{[`${e}-active-bar`]:{background:r}},[`&${e}-status-warning`]:{[`${e}-active-bar`]:{background:i}}}}},TJe=n=>{const{componentCls:e,antCls:r,controlHeight:i,paddingInline:a,lineWidth:o,lineType:s,colorBorder:l,borderRadius:c,motionDurationMid:u,colorTextDisabled:d,colorTextPlaceholder:f,controlHeightLG:h,fontSizeLG:p,controlHeightSM:g,paddingInlineSM:m,paddingXS:v,marginXS:y,colorIcon:b,lineWidthBold:x,colorPrimary:_,motionDurationSlow:S,zIndexPopup:M,paddingXXS:E,sizePopupArrow:T,colorBgElevated:P,borderRadiusLG:A,boxShadowSecondary:N,borderRadiusSM:O,colorSplit:I,cellHoverBg:D,presetsWidth:k,presetsMaxWidth:$,boxShadowPopoverArrow:B,fontHeight:F,fontHeightLG:G,lineHeightLG:z}=n;return[{[e]:Object.assign(Object.assign(Object.assign({},ts(n)),X5(n,i,F,a)),{position:"relative",display:"inline-flex",alignItems:"center",lineHeight:1,borderRadius:c,transition:`border ${u}, box-shadow ${u}, background ${u}`,[`${e}-prefix`]:{flex:"0 0 auto",marginInlineEnd:n.inputAffixPadding},[`${e}-input`]:{position:"relative",display:"inline-flex",alignItems:"center",width:"100%","> input":Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",color:"inherit",fontSize:n.fontSize,lineHeight:n.lineHeight,transition:`all ${u}`},KY(f)),{flex:"auto",minWidth:1,height:"auto",padding:0,background:"transparent",border:0,fontFamily:"inherit","&:focus":{boxShadow:"none",outline:0},"&[disabled]":{background:"transparent",color:d,cursor:"not-allowed"}}),"&-placeholder":{"> input":{color:f}}},"&-large":Object.assign(Object.assign({},X5(n,h,G,a)),{[`${e}-input > input`]:{fontSize:p,lineHeight:z}}),"&-small":Object.assign({},X5(n,g,F,m)),[`${e}-suffix`]:{display:"flex",flex:"none",alignSelf:"center",marginInlineStart:n.calc(v).div(2).equal(),color:d,lineHeight:1,pointerEvents:"none",transition:`opacity ${u}, color ${u}`,"> *":{verticalAlign:"top","&:not(:last-child)":{marginInlineEnd:y}}},[`${e}-clear`]:{position:"absolute",top:"50%",insetInlineEnd:0,color:d,lineHeight:1,transform:"translateY(-50%)",cursor:"pointer",opacity:0,transition:`opacity ${u}, color ${u}`,"> *":{verticalAlign:"top"},"&:hover":{color:b}},"&:hover":{[`${e}-clear`]:{opacity:1},[`${e}-suffix:not(:last-child)`]:{opacity:0}},[`${e}-separator`]:{position:"relative",display:"inline-block",width:"1em",height:p,color:d,fontSize:p,verticalAlign:"top",cursor:"default",[`${e}-focused &`]:{color:b},[`${e}-range-separator &`]:{[`${e}-disabled &`]:{cursor:"not-allowed"}}},"&-range":{position:"relative",display:"inline-flex",[`${e}-active-bar`]:{bottom:n.calc(o).mul(-1).equal(),height:x,background:_,opacity:0,transition:`all ${S} ease-out`,pointerEvents:"none"},[`&${e}-focused`]:{[`${e}-active-bar`]:{opacity:1}},[`${e}-range-separator`]:{alignItems:"center",padding:`0 ${Qe(v)}`,lineHeight:1}},"&-range, &-multiple":{[`${e}-clear`]:{insetInlineEnd:a},[`&${e}-small`]:{[`${e}-clear`]:{insetInlineEnd:m}}},"&-dropdown":Object.assign(Object.assign(Object.assign({},ts(n)),xJe(n)),{pointerEvents:"none",position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:M,[`&${e}-dropdown-hidden`]:{display:"none"},"&-rtl":{direction:"rtl"},[`&${e}-dropdown-placement-bottomLeft,
            &${e}-dropdown-placement-bottomRight`]:{[`${e}-range-arrow`]:{top:0,display:"block",transform:"translateY(-100%)"}},[`&${e}-dropdown-placement-topLeft,
            &${e}-dropdown-placement-topRight`]:{[`${e}-range-arrow`]:{bottom:0,display:"block",transform:"translateY(100%) rotate(180deg)"}},[`&${r}-slide-up-appear, &${r}-slide-up-enter`]:{[`${e}-range-arrow${e}-range-arrow`]:{transition:"none"}},[`&${r}-slide-up-enter${r}-slide-up-enter-active${e}-dropdown-placement-topLeft,
          &${r}-slide-up-enter${r}-slide-up-enter-active${e}-dropdown-placement-topRight,
          &${r}-slide-up-appear${r}-slide-up-appear-active${e}-dropdown-placement-topLeft,
          &${r}-slide-up-appear${r}-slide-up-appear-active${e}-dropdown-placement-topRight`]:{animationName:mY},[`&${r}-slide-up-enter${r}-slide-up-enter-active${e}-dropdown-placement-bottomLeft,
          &${r}-slide-up-enter${r}-slide-up-enter-active${e}-dropdown-placement-bottomRight,
          &${r}-slide-up-appear${r}-slide-up-appear-active${e}-dropdown-placement-bottomLeft,
          &${r}-slide-up-appear${r}-slide-up-appear-active${e}-dropdown-placement-bottomRight`]:{animationName:pY},[`&${r}-slide-up-leave ${e}-panel-container`]:{pointerEvents:"none"},[`&${r}-slide-up-leave${r}-slide-up-leave-active${e}-dropdown-placement-topLeft,
          &${r}-slide-up-leave${r}-slide-up-leave-active${e}-dropdown-placement-topRight`]:{animationName:vY},[`&${r}-slide-up-leave${r}-slide-up-leave-active${e}-dropdown-placement-bottomLeft,
          &${r}-slide-up-leave${r}-slide-up-leave-active${e}-dropdown-placement-bottomRight`]:{animationName:gY},[`${e}-panel > ${e}-time-panel`]:{paddingTop:E},[`${e}-range-wrapper`]:{display:"flex",position:"relative"},[`${e}-range-arrow`]:Object.assign(Object.assign({position:"absolute",zIndex:1,display:"none",paddingInline:n.calc(a).mul(1.5).equal(),boxSizing:"content-box",transition:`all ${S} ease-out`},mwe(n,P,B)),{"&:before":{insetInlineStart:n.calc(a).mul(1.5).equal()}}),[`${e}-panel-container`]:{overflow:"hidden",verticalAlign:"top",background:P,borderRadius:A,boxShadow:N,transition:`margin ${S}`,display:"inline-block",pointerEvents:"auto",[`${e}-panel-layout`]:{display:"flex",flexWrap:"nowrap",alignItems:"stretch"},[`${e}-presets`]:{display:"flex",flexDirection:"column",minWidth:k,maxWidth:$,ul:{height:0,flex:"auto",listStyle:"none",overflow:"auto",margin:0,padding:v,borderInlineEnd:`${Qe(o)} ${s} ${I}`,li:Object.assign(Object.assign({},NN),{borderRadius:O,paddingInline:v,paddingBlock:n.calc(g).sub(F).div(2).equal(),cursor:"pointer",transition:`all ${S}`,"+ li":{marginTop:y},"&:hover":{background:D}})}},[`${e}-panels`]:{display:"inline-flex",flexWrap:"nowrap","&:last-child":{[`${e}-panel`]:{borderWidth:0}}},[`${e}-panel`]:{verticalAlign:"top",background:"transparent",borderRadius:0,borderWidth:0,[`${e}-content, table`]:{textAlign:"center"},"&-focused":{borderColor:l}}}}),"&-dropdown-range":{padding:`${Qe(n.calc(T).mul(2).div(3).equal())} 0`,"&-hidden":{display:"none"}},"&-rtl":{direction:"rtl",[`${e}-separator`]:{transform:"scale(-1, 1)"},[`${e}-footer`]:{"&-extra":{direction:"rtl"}}}})},kN(n,"slide-up"),kN(n,"slide-down"),LN(n,"move-up"),LN(n,"move-down")]},mSe=Ja("DatePicker",n=>{const e=Qr(j_(n),wJe(n),{inputPaddingHorizontalBase:n.calc(n.paddingSM).sub(1).equal(),multipleSelectItemHeight:n.multipleItemHeight,selectHeight:n.controlHeight});return[_Je(e),TJe(e),CJe(e),MJe(e),yJe(e),hM(n,{focusElCls:`${n.componentCls}-focused`})]},EJe);function AJe(n,e,r){var i=r||{},a=i.noTrailing,o=a===void 0?!1:a,s=i.noLeading,l=s===void 0?!1:s,c=i.debounceMode,u=c===void 0?void 0:c,d,f=!1,h=0;function p(){d&&clearTimeout(d)}function g(v){var y=v||{},b=y.upcomingOnly,x=b===void 0?!1:b;p(),f=!x}function m(){for(var v=arguments.length,y=new Array(v),b=0;b<v;b++)y[b]=arguments[b];var x=this,_=Date.now()-h;if(f)return;function S(){h=Date.now(),e.apply(x,y)}function M(){d=void 0}!l&&u&&!d&&S(),p(),u===void 0&&_>n?l?(h=Date.now(),o||(d=setTimeout(u?M:S,n))):S():o!==!0&&(d=setTimeout(u?M:S,u===void 0?n-_:n))}return m.cancel=g,m}function RJe(n,e,r){var i={},a=i.atBegin,o=a===void 0?!1:a;return AJe(n,e,{debounceMode:o!==!1})}const vSe=C.createContext({});var PJe=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};function nae(n){return typeof n=="number"?`${n} ${n} auto`:/^\d+(\.\d+)?(px|em|rem|%)$/.test(n)?`0 0 ${n}`:n}const NJe=["xs","sm","md","lg","xl","xxl"],ySe=C.forwardRef((n,e)=>{const{getPrefixCls:r,direction:i}=C.useContext(yr),{gutter:a,wrap:o}=C.useContext(vSe),{prefixCls:s,span:l,order:c,offset:u,push:d,pull:f,className:h,children:p,flex:g,style:m}=n,v=PJe(n,["prefixCls","span","order","offset","push","pull","className","children","flex","style"]),y=r("col",s),[b,x,_]=YYe(y),S={};let M={};NJe.forEach(P=>{let A={};const N=n[P];typeof N=="number"?A.span=N:typeof N=="object"&&(A=N||{}),delete v[P],M=Object.assign(Object.assign({},M),{[`${y}-${P}-${A.span}`]:A.span!==void 0,[`${y}-${P}-order-${A.order}`]:A.order||A.order===0,[`${y}-${P}-offset-${A.offset}`]:A.offset||A.offset===0,[`${y}-${P}-push-${A.push}`]:A.push||A.push===0,[`${y}-${P}-pull-${A.pull}`]:A.pull||A.pull===0,[`${y}-rtl`]:i==="rtl"}),A.flex&&(M[`${y}-${P}-flex`]=!0,S[`--${y}-${P}-flex`]=nae(A.flex))});const E=Be(y,{[`${y}-${l}`]:l!==void 0,[`${y}-order-${c}`]:c,[`${y}-offset-${u}`]:u,[`${y}-push-${d}`]:d,[`${y}-pull-${f}`]:f},h,M,x,_),T={};if(a&&a[0]>0){const P=a[0]/2;T.paddingLeft=P,T.paddingRight=P}return g&&(T.flex=nae(g),o===!1&&!T.minWidth&&(T.minWidth=0)),b(C.createElement("div",Object.assign({},v,{style:Object.assign(Object.assign(Object.assign({},T),m),S),className:E,ref:e}),p))});function OJe(n,e){const r=[void 0,void 0],i=Array.isArray(n)?n:[n,void 0],a=e||{xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0};return i.forEach((o,s)=>{if(typeof o=="object"&&o!==null)for(let l=0;l<HE.length;l++){const c=HE[l];if(a[c]&&o[c]!==void 0){r[s]=o[c];break}}else r[s]=o}),r}var IJe=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};function rae(n,e){const[r,i]=C.useState(typeof n=="string"?n:""),a=()=>{if(typeof n=="string"&&i(n),typeof n=="object")for(let o=0;o<HE.length;o++){const s=HE[o];if(!e||!e[s])continue;const l=n[s];if(l!==void 0){i(l);return}}};return C.useEffect(()=>{a()},[JSON.stringify(n),e]),r}const DJe=C.forwardRef((n,e)=>{const{prefixCls:r,justify:i,align:a,className:o,style:s,children:l,gutter:c=0,wrap:u}=n,d=IJe(n,["prefixCls","justify","align","className","style","children","gutter","wrap"]),{getPrefixCls:f,direction:h}=C.useContext(yr),p=AZe(!0,null),g=rae(a,p),m=rae(i,p),v=f("row",r),[y,b,x]=qYe(v),_=OJe(c,p),S=Be(v,{[`${v}-no-wrap`]:u===!1,[`${v}-${m}`]:m,[`${v}-${g}`]:g,[`${v}-rtl`]:h==="rtl"},o,b,x),M={},E=_[0]!=null&&_[0]>0?_[0]/-2:void 0;E&&(M.marginLeft=E,M.marginRight=E);const[T,P]=_;M.rowGap=P;const A=C.useMemo(()=>({gutter:[T,P],wrap:u}),[T,P,u]);return y(C.createElement(vSe.Provider,{value:A},C.createElement("div",Object.assign({},d,{className:S,style:Object.assign(Object.assign({},M),s),ref:e}),l)))}),LJe=n=>{const{componentCls:e,sizePaddingEdgeHorizontal:r,colorSplit:i,lineWidth:a,textPaddingInline:o,orientationMargin:s,verticalMarginInline:l}=n;return{[e]:Object.assign(Object.assign({},ts(n)),{borderBlockStart:`${Qe(a)} solid ${i}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:l,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${Qe(a)} solid ${i}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${Qe(n.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${e}-with-text`]:{display:"flex",alignItems:"center",margin:`${Qe(n.dividerHorizontalWithTextGutterMargin)} 0`,color:n.colorTextHeading,fontWeight:500,fontSize:n.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${i}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${Qe(a)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${e}-with-text-start`]:{"&::before":{width:`calc(${s} * 100%)`},"&::after":{width:`calc(100% - ${s} * 100%)`}},[`&-horizontal${e}-with-text-end`]:{"&::before":{width:`calc(100% - ${s} * 100%)`},"&::after":{width:`calc(${s} * 100%)`}},[`${e}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:o},"&-dashed":{background:"none",borderColor:i,borderStyle:"dashed",borderWidth:`${Qe(a)} 0 0`},[`&-horizontal${e}-with-text${e}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${e}-dashed`]:{borderInlineStartWidth:a,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:i,borderStyle:"dotted",borderWidth:`${Qe(a)} 0 0`},[`&-horizontal${e}-with-text${e}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${e}-dotted`]:{borderInlineStartWidth:a,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${e}-with-text`]:{color:n.colorText,fontWeight:"normal",fontSize:n.fontSize},[`&-horizontal${e}-with-text-start${e}-no-default-orientation-margin-start`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${e}-inner-text`]:{paddingInlineStart:r}},[`&-horizontal${e}-with-text-end${e}-no-default-orientation-margin-end`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${e}-inner-text`]:{paddingInlineEnd:r}}})}},kJe=n=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:n.marginXS}),FJe=Ja("Divider",n=>{const e=Qr(n,{dividerHorizontalWithTextGutterMargin:n.margin,dividerHorizontalGutterMargin:n.marginLG,sizePaddingEdgeHorizontal:0});return[LJe(e)]},kJe,{unitless:{orientationMargin:!0}});var $Je=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const BJe=n=>{const{getPrefixCls:e,direction:r,className:i,style:a}=Zu("divider"),{prefixCls:o,type:s="horizontal",orientation:l="center",orientationMargin:c,className:u,rootClassName:d,children:f,dashed:h,variant:p="solid",plain:g,style:m}=n,v=$Je(n,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style"]),y=e("divider",o),[b,x,_]=FJe(y),S=!!f,M=C.useMemo(()=>l==="left"?r==="rtl"?"end":"start":l==="right"?r==="rtl"?"start":"end":l,[r,l]),E=M==="start"&&c!=null,T=M==="end"&&c!=null,P=Be(y,i,x,_,`${y}-${s}`,{[`${y}-with-text`]:S,[`${y}-with-text-${M}`]:S,[`${y}-dashed`]:!!h,[`${y}-${p}`]:p!=="solid",[`${y}-plain`]:!!g,[`${y}-rtl`]:r==="rtl",[`${y}-no-default-orientation-margin-start`]:E,[`${y}-no-default-orientation-margin-end`]:T},u,d),A=C.useMemo(()=>typeof c=="number"?c:/^\d+$/.test(c)?Number(c):c,[c]),N={marginInlineStart:E?A:void 0,marginInlineEnd:T?A:void 0};return b(C.createElement("div",Object.assign({className:P,style:Object.assign(Object.assign({},a),m)},v,{role:"separator"}),f&&s!=="vertical"&&C.createElement("span",{className:`${y}-inner-text`,style:N},f)))};var zJe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},UJe=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:zJe}))},VJe=C.forwardRef(UJe);function cj(){return typeof BigInt=="function"}function bSe(n){return!n&&n!==0&&!Number.isNaN(n)||!String(n).trim()}function z0(n){var e=n.trim(),r=e.startsWith("-");r&&(e=e.slice(1)),e=e.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),e.startsWith(".")&&(e="0".concat(e));var i=e||"0",a=i.split("."),o=a[0]||"0",s=a[1]||"0";o==="0"&&s==="0"&&(r=!1);var l=r?"-":"";return{negative:r,negativeStr:l,trimStr:i,integerStr:o,decimalStr:s,fullStr:"".concat(l).concat(i)}}function ZY(n){var e=String(n);return!Number.isNaN(Number(e))&&e.includes("e")}function A0(n){var e=String(n);if(ZY(n)){var r=Number(e.slice(e.indexOf("e-")+2)),i=e.match(/\.(\d+)/);return i!=null&&i[1]&&(r+=i[1].length),r}return e.includes(".")&&QY(e)?e.length-e.indexOf(".")-1:0}function U4(n){var e=String(n);if(ZY(n)){if(n>Number.MAX_SAFE_INTEGER)return String(cj()?BigInt(n).toString():Number.MAX_SAFE_INTEGER);if(n<Number.MIN_SAFE_INTEGER)return String(cj()?BigInt(n).toString():Number.MIN_SAFE_INTEGER);e=n.toFixed(A0(e))}return z0(e).fullStr}function QY(n){return typeof n=="number"?!Number.isNaN(n):n?/^\s*-?\d+(\.\d+)?\s*$/.test(n)||/^\s*-?\d+\.\s*$/.test(n)||/^\s*-?\.\d+\s*$/.test(n):!1}var GJe=function(){function n(e){if(st(this,n),re(this,"origin",""),re(this,"negative",void 0),re(this,"integer",void 0),re(this,"decimal",void 0),re(this,"decimalLen",void 0),re(this,"empty",void 0),re(this,"nan",void 0),bSe(e)){this.empty=!0;return}if(this.origin=String(e),e==="-"||Number.isNaN(e)){this.nan=!0;return}var r=e;if(ZY(r)&&(r=Number(r)),r=typeof r=="string"?r:U4(r),QY(r)){var i=z0(r);this.negative=i.negative;var a=i.trimStr.split(".");this.integer=BigInt(a[0]);var o=a[1]||"0";this.decimal=BigInt(o),this.decimalLen=o.length}else this.nan=!0}return lt(n,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(r){var i="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(r,"0"));return BigInt(i)}},{key:"negate",value:function(){var r=new n(this.toString());return r.negative=!r.negative,r}},{key:"cal",value:function(r,i,a){var o=Math.max(this.getDecimalStr().length,r.getDecimalStr().length),s=this.alignDecimal(o),l=r.alignDecimal(o),c=i(s,l).toString(),u=a(o),d=z0(c),f=d.negativeStr,h=d.trimStr,p="".concat(f).concat(h.padStart(u+1,"0"));return new n("".concat(p.slice(0,-u),".").concat(p.slice(-u)))}},{key:"add",value:function(r){if(this.isInvalidate())return new n(r);var i=new n(r);return i.isInvalidate()?this:this.cal(i,function(a,o){return a+o},function(a){return a})}},{key:"multi",value:function(r){var i=new n(r);return this.isInvalidate()||i.isInvalidate()?new n(NaN):this.cal(i,function(a,o){return a*o},function(a){return a*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(r){return this.toString()===(r==null?void 0:r.toString())}},{key:"lessEquals",value:function(r){return this.add(r.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r?this.isInvalidate()?"":z0("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),n}(),jJe=function(){function n(e){if(st(this,n),re(this,"origin",""),re(this,"number",void 0),re(this,"empty",void 0),bSe(e)){this.empty=!0;return}this.origin=String(e),this.number=Number(e)}return lt(n,[{key:"negate",value:function(){return new n(-this.toNumber())}},{key:"add",value:function(r){if(this.isInvalidate())return new n(r);var i=Number(r);if(Number.isNaN(i))return this;var a=this.number+i;if(a>Number.MAX_SAFE_INTEGER)return new n(Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return new n(Number.MIN_SAFE_INTEGER);var o=Math.max(A0(this.number),A0(i));return new n(a.toFixed(o))}},{key:"multi",value:function(r){var i=Number(r);if(this.isInvalidate()||Number.isNaN(i))return new n(NaN);var a=this.number*i;if(a>Number.MAX_SAFE_INTEGER)return new n(Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return new n(Number.MIN_SAFE_INTEGER);var o=Math.max(A0(this.number),A0(i));return new n(a.toFixed(o))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(r){return this.toNumber()===(r==null?void 0:r.toNumber())}},{key:"lessEquals",value:function(r){return this.add(r.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r?this.isInvalidate()?"":U4(this.number):this.origin}}]),n}();function vd(n){return cj()?new GJe(n):new jJe(n)}function gP(n,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(n==="")return"";var a=z0(n),o=a.negativeStr,s=a.integerStr,l=a.decimalStr,c="".concat(e).concat(l),u="".concat(o).concat(s);if(r>=0){var d=Number(l[r]);if(d>=5&&!i){var f=vd(n).add("".concat(o,"0.").concat("0".repeat(r)).concat(10-d));return gP(f.toString(),e,r,i)}return r===0?u:"".concat(u).concat(e).concat(l.padEnd(r,"0").slice(0,r))}return c===".0"?u:"".concat(u).concat(c)}function HJe(n){return!!(n.addonBefore||n.addonAfter)}function WJe(n){return!!(n.prefix||n.suffix||n.allowClear)}function iae(n,e,r){var i=e.cloneNode(!0),a=Object.create(n,{target:{value:i},currentTarget:{value:i}});return i.value=r,typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"&&(i.selectionStart=e.selectionStart,i.selectionEnd=e.selectionEnd),i.setSelectionRange=function(){e.setSelectionRange.apply(e,arguments)},a}function UN(n,e,r,i){if(r){var a=e;if(e.type==="click"){a=iae(e,n,""),r(a);return}if(n.type!=="file"&&i!==void 0){a=iae(e,n,i),r(a);return}r(a)}}function JY(n,e){if(n){n.focus(e);var r=e||{},i=r.cursor;if(i){var a=n.value.length;switch(i){case"start":n.setSelectionRange(0,0);break;case"end":n.setSelectionRange(a,a);break;default:n.setSelectionRange(0,a)}}}}var eX=Je.forwardRef(function(n,e){var r,i,a,o=n.inputElement,s=n.children,l=n.prefixCls,c=n.prefix,u=n.suffix,d=n.addonBefore,f=n.addonAfter,h=n.className,p=n.style,g=n.disabled,m=n.readOnly,v=n.focused,y=n.triggerFocus,b=n.allowClear,x=n.value,_=n.handleReset,S=n.hidden,M=n.classes,E=n.classNames,T=n.dataAttrs,P=n.styles,A=n.components,N=n.onClear,O=s??o,I=(A==null?void 0:A.affixWrapper)||"span",D=(A==null?void 0:A.groupWrapper)||"span",k=(A==null?void 0:A.wrapper)||"span",$=(A==null?void 0:A.groupAddon)||"span",B=C.useRef(null),F=function(pe){var ve;(ve=B.current)!==null&&ve!==void 0&&ve.contains(pe.target)&&(y==null||y())},G=WJe(n),z=C.cloneElement(O,{value:x,className:Be((r=O.props)===null||r===void 0?void 0:r.className,!G&&(E==null?void 0:E.variant))||null}),U=C.useRef(null);if(Je.useImperativeHandle(e,function(){return{nativeElement:U.current||B.current}}),G){var H=null;if(b){var X=!g&&!m&&x,V="".concat(l,"-clear-icon"),W=vn(b)==="object"&&b!==null&&b!==void 0&&b.clearIcon?b.clearIcon:"✖";H=Je.createElement("button",{type:"button",tabIndex:-1,onClick:function(pe){_==null||_(pe),N==null||N()},onMouseDown:function(pe){return pe.preventDefault()},className:Be(V,re(re({},"".concat(V,"-hidden"),!X),"".concat(V,"-has-suffix"),!!u))},W)}var K="".concat(l,"-affix-wrapper"),q=Be(K,re(re(re(re(re({},"".concat(l,"-disabled"),g),"".concat(K,"-disabled"),g),"".concat(K,"-focused"),v),"".concat(K,"-readonly"),m),"".concat(K,"-input-with-clear-btn"),u&&b&&x),M==null?void 0:M.affixWrapper,E==null?void 0:E.affixWrapper,E==null?void 0:E.variant),Q=(u||b)&&Je.createElement("span",{className:Be("".concat(l,"-suffix"),E==null?void 0:E.suffix),style:P==null?void 0:P.suffix},H,u);z=Je.createElement(I,Mt({className:q,style:P==null?void 0:P.affixWrapper,onClick:F},T==null?void 0:T.affixWrapper,{ref:B}),c&&Je.createElement("span",{className:Be("".concat(l,"-prefix"),E==null?void 0:E.prefix),style:P==null?void 0:P.prefix},c),z,Q)}if(HJe(n)){var ie="".concat(l,"-group"),oe="".concat(ie,"-addon"),ue="".concat(ie,"-wrapper"),le=Be("".concat(l,"-wrapper"),ie,M==null?void 0:M.wrapper,E==null?void 0:E.wrapper),me=Be(ue,re({},"".concat(ue,"-disabled"),g),M==null?void 0:M.group,E==null?void 0:E.groupWrapper);z=Je.createElement(D,{className:me,ref:U},Je.createElement(k,{className:le},d&&Je.createElement($,{className:oe},d),z,f&&Je.createElement($,{className:oe},f)))}return Je.cloneElement(z,{className:Be((i=z.props)===null||i===void 0?void 0:i.className,h)||null,style:se(se({},(a=z.props)===null||a===void 0?void 0:a.style),p),hidden:S})}),qJe=["show"];function xSe(n,e){return C.useMemo(function(){var r={};e&&(r.show=vn(e)==="object"&&e.formatter?e.formatter:!!e),r=se(se({},r),n);var i=r,a=i.show,o=ir(i,qJe);return se(se({},o),{},{show:!!a,showFormatter:typeof a=="function"?a:void 0,strategy:o.strategy||function(s){return s.length}})},[n,e])}var YJe=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],XJe=C.forwardRef(function(n,e){var r=n.autoComplete,i=n.onChange,a=n.onFocus,o=n.onBlur,s=n.onPressEnter,l=n.onKeyDown,c=n.onKeyUp,u=n.prefixCls,d=u===void 0?"rc-input":u,f=n.disabled,h=n.htmlSize,p=n.className,g=n.maxLength,m=n.suffix,v=n.showCount,y=n.count,b=n.type,x=b===void 0?"text":b,_=n.classes,S=n.classNames,M=n.styles,E=n.onCompositionStart,T=n.onCompositionEnd,P=ir(n,YJe),A=C.useState(!1),N=fe(A,2),O=N[0],I=N[1],D=C.useRef(!1),k=C.useRef(!1),$=C.useRef(null),B=C.useRef(null),F=function(_e){$.current&&JY($.current,_e)},G=es(n.defaultValue,{value:n.value}),z=fe(G,2),U=z[0],H=z[1],X=U==null?"":String(U),V=C.useState(null),W=fe(V,2),K=W[0],q=W[1],Q=xSe(y,v),ie=Q.max||g,oe=Q.strategy(X),ue=!!ie&&oe>ie;C.useImperativeHandle(e,function(){var ce;return{focus:F,blur:function(){var Ae;(Ae=$.current)===null||Ae===void 0||Ae.blur()},setSelectionRange:function(Ae,Ce,et){var Ve;(Ve=$.current)===null||Ve===void 0||Ve.setSelectionRange(Ae,Ce,et)},select:function(){var Ae;(Ae=$.current)===null||Ae===void 0||Ae.select()},input:$.current,nativeElement:((ce=B.current)===null||ce===void 0?void 0:ce.nativeElement)||$.current}}),C.useEffect(function(){k.current&&(k.current=!1),I(function(ce){return ce&&f?!1:ce})},[f]);var le=function(_e,Ae,Ce){var et=Ae;if(!D.current&&Q.exceedFormatter&&Q.max&&Q.strategy(Ae)>Q.max){if(et=Q.exceedFormatter(Ae,{max:Q.max}),Ae!==et){var Ve,qe;q([((Ve=$.current)===null||Ve===void 0?void 0:Ve.selectionStart)||0,((qe=$.current)===null||qe===void 0?void 0:qe.selectionEnd)||0])}}else if(Ce.source==="compositionEnd")return;H(et),$.current&&UN($.current,_e,i,et)};C.useEffect(function(){if(K){var ce;(ce=$.current)===null||ce===void 0||ce.setSelectionRange.apply(ce,ot(K))}},[K]);var me=function(_e){le(_e,_e.target.value,{source:"change"})},J=function(_e){D.current=!1,le(_e,_e.currentTarget.value,{source:"compositionEnd"}),T==null||T(_e)},pe=function(_e){s&&_e.key==="Enter"&&!k.current&&(k.current=!0,s(_e)),l==null||l(_e)},ve=function(_e){_e.key==="Enter"&&(k.current=!1),c==null||c(_e)},Me=function(_e){I(!0),a==null||a(_e)},Re=function(_e){k.current&&(k.current=!1),I(!1),o==null||o(_e)},Xe=function(_e){H(""),F(),$.current&&UN($.current,_e,i)},He=ue&&"".concat(d,"-out-of-range"),ee=function(){var _e=Qu(n,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return Je.createElement("input",Mt({autoComplete:r},_e,{onChange:me,onFocus:Me,onBlur:Re,onKeyDown:pe,onKeyUp:ve,className:Be(d,re({},"".concat(d,"-disabled"),f),S==null?void 0:S.input),style:M==null?void 0:M.input,ref:$,size:h,type:x,onCompositionStart:function(Ce){D.current=!0,E==null||E(Ce)},onCompositionEnd:J}))},Y=function(){var _e=Number(ie)>0;if(m||Q.show){var Ae=Q.showFormatter?Q.showFormatter({value:X,count:oe,maxLength:ie}):"".concat(oe).concat(_e?" / ".concat(ie):"");return Je.createElement(Je.Fragment,null,Q.show&&Je.createElement("span",{className:Be("".concat(d,"-show-count-suffix"),re({},"".concat(d,"-show-count-has-suffix"),!!m),S==null?void 0:S.count),style:se({},M==null?void 0:M.count)},Ae),m)}return null};return Je.createElement(eX,Mt({},P,{prefixCls:d,className:Be(p,He),handleReset:Xe,value:X,focused:O,triggerFocus:F,suffix:Y(),disabled:f,classes:_,classNames:S,styles:M,ref:B}),ee())});function KJe(n,e){return typeof Proxy<"u"&&n?new Proxy(n,{get:function(i,a){if(e[a])return e[a];var o=i[a];return typeof o=="function"?o.bind(i):o}}):n}function ZJe(n,e){var r=C.useRef(null);function i(){try{var o=n.selectionStart,s=n.selectionEnd,l=n.value,c=l.substring(0,o),u=l.substring(s);r.current={start:o,end:s,value:l,beforeTxt:c,afterTxt:u}}catch{}}function a(){if(n&&r.current&&e)try{var o=n.value,s=r.current,l=s.beforeTxt,c=s.afterTxt,u=s.start,d=o.length;if(o.startsWith(l))d=l.length;else if(o.endsWith(c))d=o.length-r.current.afterTxt.length;else{var f=l[u-1],h=o.indexOf(f,u-1);h!==-1&&(d=h+1)}n.setSelectionRange(d,d)}catch(p){Hs(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(p.message))}}return[i,a]}var QJe=function(){var e=C.useState(!1),r=fe(e,2),i=r[0],a=r[1];return Dr(function(){a(AY())},[]),i},JJe=200,eet=600;function tet(n){var e=n.prefixCls,r=n.upNode,i=n.downNode,a=n.upDisabled,o=n.downDisabled,s=n.onStep,l=C.useRef(),c=C.useRef([]),u=C.useRef();u.current=s;var d=function(){clearTimeout(l.current)},f=function(x,_){x.preventDefault(),d(),u.current(_);function S(){u.current(_),l.current=setTimeout(S,JJe)}l.current=setTimeout(S,eet)};C.useEffect(function(){return function(){d(),c.current.forEach(function(b){return Gr.cancel(b)})}},[]);var h=QJe();if(h)return null;var p="".concat(e,"-handler"),g=Be(p,"".concat(p,"-up"),re({},"".concat(p,"-up-disabled"),a)),m=Be(p,"".concat(p,"-down"),re({},"".concat(p,"-down-disabled"),o)),v=function(){return c.current.push(Gr(d))},y={unselectable:"on",role:"button",onMouseUp:v,onMouseLeave:v};return C.createElement("div",{className:"".concat(p,"-wrap")},C.createElement("span",Mt({},y,{onMouseDown:function(x){f(x,!0)},"aria-label":"Increase Value","aria-disabled":a,className:g}),r||C.createElement("span",{unselectable:"on",className:"".concat(e,"-handler-up-inner")})),C.createElement("span",Mt({},y,{onMouseDown:function(x){f(x,!1)},"aria-label":"Decrease Value","aria-disabled":o,className:m}),i||C.createElement("span",{unselectable:"on",className:"".concat(e,"-handler-down-inner")})))}function aae(n){var e=typeof n=="number"?U4(n):z0(n).fullStr,r=e.includes(".");return r?z0(e.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:n+"0"}const net=function(){var n=C.useRef(0),e=function(){Gr.cancel(n.current)};return C.useEffect(function(){return e},[]),function(r){e(),n.current=Gr(function(){r()})}};var ret=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur","domRef"],iet=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],oae=function(e,r){return e||r.isEmpty()?r.toString():r.toNumber()},sae=function(e){var r=vd(e);return r.isInvalidate()?null:r},aet=C.forwardRef(function(n,e){var r=n.prefixCls,i=n.className,a=n.style,o=n.min,s=n.max,l=n.step,c=l===void 0?1:l,u=n.defaultValue,d=n.value,f=n.disabled,h=n.readOnly,p=n.upHandler,g=n.downHandler,m=n.keyboard,v=n.changeOnWheel,y=v===void 0?!1:v,b=n.controls,x=b===void 0?!0:b;n.classNames;var _=n.stringMode,S=n.parser,M=n.formatter,E=n.precision,T=n.decimalSeparator,P=n.onChange,A=n.onInput,N=n.onPressEnter,O=n.onStep,I=n.changeOnBlur,D=I===void 0?!0:I,k=n.domRef,$=ir(n,ret),B="".concat(r,"-input"),F=C.useRef(null),G=C.useState(!1),z=fe(G,2),U=z[0],H=z[1],X=C.useRef(!1),V=C.useRef(!1),W=C.useRef(!1),K=C.useState(function(){return vd(d??u)}),q=fe(K,2),Q=q[0],ie=q[1];function oe(Le){d===void 0&&ie(Le)}var ue=C.useCallback(function(Le,Ye){if(!Ye)return E>=0?E:Math.max(A0(Le),A0(c))},[E,c]),le=C.useCallback(function(Le){var Ye=String(Le);if(S)return S(Ye);var nt=Ye;return T&&(nt=nt.replace(T,".")),nt.replace(/[^\w.-]+/g,"")},[S,T]),me=C.useRef(""),J=C.useCallback(function(Le,Ye){if(M)return M(Le,{userTyping:Ye,input:String(me.current)});var nt=typeof Le=="number"?U4(Le):Le;if(!Ye){var _t=ue(nt,Ye);if(QY(nt)&&(T||_t>=0)){var Gt=T||".";nt=gP(nt,Gt,_t)}}return nt},[M,ue,T]),pe=C.useState(function(){var Le=u??d;return Q.isInvalidate()&&["string","number"].includes(vn(Le))?Number.isNaN(Le)?"":Le:J(Q.toString(),!1)}),ve=fe(pe,2),Me=ve[0],Re=ve[1];me.current=Me;function Xe(Le,Ye){Re(J(Le.isInvalidate()?Le.toString(!1):Le.toString(!Ye),Ye))}var He=C.useMemo(function(){return sae(s)},[s,E]),ee=C.useMemo(function(){return sae(o)},[o,E]),Y=C.useMemo(function(){return!He||!Q||Q.isInvalidate()?!1:He.lessEquals(Q)},[He,Q]),ce=C.useMemo(function(){return!ee||!Q||Q.isInvalidate()?!1:Q.lessEquals(ee)},[ee,Q]),_e=ZJe(F.current,U),Ae=fe(_e,2),Ce=Ae[0],et=Ae[1],Ve=function(Ye){return He&&!Ye.lessEquals(He)?He:ee&&!ee.lessEquals(Ye)?ee:null},qe=function(Ye){return!Ve(Ye)},dt=function(Ye,nt){var _t=Ye,Gt=qe(_t)||_t.isEmpty();if(!_t.isEmpty()&&!nt&&(_t=Ve(_t)||_t,Gt=!0),!h&&!f&&Gt){var Ot=_t.toString(),wt=ue(Ot,nt);return wt>=0&&(_t=vd(gP(Ot,".",wt)),qe(_t)||(_t=vd(gP(Ot,".",wt,!0)))),_t.equals(Q)||(oe(_t),P==null||P(_t.isEmpty()?null:oae(_,_t)),d===void 0&&Xe(_t,nt)),_t}return Q},Ge=net(),We=function Le(Ye){if(Ce(),me.current=Ye,Re(Ye),!V.current){var nt=le(Ye),_t=vd(nt);_t.isNaN()||dt(_t,!0)}A==null||A(Ye),Ge(function(){var Gt=Ye;S||(Gt=Ye.replace(/。/g,".")),Gt!==Ye&&Le(Gt)})},Ze=function(){V.current=!0},Ie=function(){V.current=!1,We(F.current.value)},De=function(Ye){We(Ye.target.value)},bt=function(Ye){var nt;if(!(Ye&&Y||!Ye&&ce)){X.current=!1;var _t=vd(W.current?aae(c):c);Ye||(_t=_t.negate());var Gt=(Q||vd(0)).add(_t.toString()),Ot=dt(Gt,!1);O==null||O(oae(_,Ot),{offset:W.current?aae(c):c,type:Ye?"up":"down"}),(nt=F.current)===null||nt===void 0||nt.focus()}},Ke=function(Ye){var nt=vd(le(Me)),_t;nt.isNaN()?_t=dt(Q,Ye):_t=dt(nt,Ye),d!==void 0?Xe(Q,!1):_t.isNaN()||Xe(_t,!1)},mt=function(){X.current=!0},xe=function(Ye){var nt=Ye.key,_t=Ye.shiftKey;X.current=!0,W.current=_t,nt==="Enter"&&(V.current||(X.current=!1),Ke(!1),N==null||N(Ye)),m!==!1&&!V.current&&["Up","ArrowUp","Down","ArrowDown"].includes(nt)&&(bt(nt==="Up"||nt==="ArrowUp"),Ye.preventDefault())},vt=function(){X.current=!1,W.current=!1};C.useEffect(function(){if(y&&U){var Le=function(_t){bt(_t.deltaY<0),_t.preventDefault()},Ye=F.current;if(Ye)return Ye.addEventListener("wheel",Le,{passive:!1}),function(){return Ye.removeEventListener("wheel",Le)}}});var Ue=function(){D&&Ke(!1),H(!1),X.current=!1};return ax(function(){Q.isInvalidate()||Xe(Q,!1)},[E,M]),ax(function(){var Le=vd(d);ie(Le);var Ye=vd(le(Me));(!Le.equals(Ye)||!X.current||M)&&Xe(Le,X.current)},[d]),ax(function(){M&&et()},[Me]),C.createElement("div",{ref:k,className:Be(r,i,re(re(re(re(re({},"".concat(r,"-focused"),U),"".concat(r,"-disabled"),f),"".concat(r,"-readonly"),h),"".concat(r,"-not-a-number"),Q.isNaN()),"".concat(r,"-out-of-range"),!Q.isInvalidate()&&!qe(Q))),style:a,onFocus:function(){H(!0)},onBlur:Ue,onKeyDown:xe,onKeyUp:vt,onCompositionStart:Ze,onCompositionEnd:Ie,onBeforeInput:mt},x&&C.createElement(tet,{prefixCls:r,upNode:p,downNode:g,upDisabled:Y,downDisabled:ce,onStep:bt}),C.createElement("div",{className:"".concat(B,"-wrap")},C.createElement("input",Mt({autoComplete:"off",role:"spinbutton","aria-valuemin":o,"aria-valuemax":s,"aria-valuenow":Q.isInvalidate()?null:Q.toString(),step:c},$,{ref:hh(F,e),className:B,value:Me,onChange:De,disabled:f,readOnly:h}))))}),oet=C.forwardRef(function(n,e){var r=n.disabled,i=n.style,a=n.prefixCls,o=a===void 0?"rc-input-number":a,s=n.value,l=n.prefix,c=n.suffix,u=n.addonBefore,d=n.addonAfter,f=n.className,h=n.classNames,p=ir(n,iet),g=C.useRef(null),m=C.useRef(null),v=C.useRef(null),y=function(x){v.current&&JY(v.current,x)};return C.useImperativeHandle(e,function(){return KJe(v.current,{focus:y,nativeElement:g.current.nativeElement||m.current})}),C.createElement(eX,{className:f,triggerFocus:y,prefixCls:o,value:s,disabled:r,style:i,prefix:l,suffix:c,addonAfter:d,addonBefore:u,classNames:h,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"},ref:g},C.createElement(aet,Mt({prefixCls:o,disabled:r,ref:v,domRef:m,className:h==null?void 0:h.input},p)))});const set=n=>{var e;const r=(e=n.handleVisible)!==null&&e!==void 0?e:"auto",i=n.controlHeightSM-n.lineWidth*2;return Object.assign(Object.assign({},H_(n)),{controlWidth:90,handleWidth:i,handleFontSize:n.fontSize/2,handleVisible:r,handleActiveBg:n.colorFillAlter,handleBg:n.colorBgContainer,filledHandleBg:new Zr(n.colorFillSecondary).onBackground(n.colorBgContainer).toHexString(),handleHoverColor:n.colorPrimary,handleBorderColor:n.colorBorder,handleOpacity:r===!0?1:0,handleVisibleWidth:r===!0?i:0})},lae=(n,e)=>{let{componentCls:r,borderRadiusSM:i,borderRadiusLG:a}=n;const o=e==="lg"?a:i;return{[`&-${e}`]:{[`${r}-handler-wrap`]:{borderStartEndRadius:o,borderEndEndRadius:o},[`${r}-handler-up`]:{borderStartEndRadius:o},[`${r}-handler-down`]:{borderEndEndRadius:o}}}},cet=n=>{const{componentCls:e,lineWidth:r,lineType:i,borderRadius:a,inputFontSizeSM:o,inputFontSizeLG:s,controlHeightLG:l,controlHeightSM:c,colorError:u,paddingInlineSM:d,paddingBlockSM:f,paddingBlockLG:h,paddingInlineLG:p,colorIcon:g,motionDurationMid:m,handleHoverColor:v,handleOpacity:y,paddingInline:b,paddingBlock:x,handleBg:_,handleActiveBg:S,colorTextDisabled:M,borderRadiusSM:E,borderRadiusLG:T,controlWidth:P,handleBorderColor:A,filledHandleBg:N,lineHeightLG:O,calc:I}=n;return[{[e]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ts(n)),z4(n)),{display:"inline-block",width:P,margin:0,padding:0,borderRadius:a}),WY(n,{[`${e}-handler-wrap`]:{background:_,[`${e}-handler-down`]:{borderBlockStart:`${Qe(r)} ${i} ${A}`}}})),YY(n,{[`${e}-handler-wrap`]:{background:N,[`${e}-handler-down`]:{borderBlockStart:`${Qe(r)} ${i} ${A}`}},"&:focus-within":{[`${e}-handler-wrap`]:{background:_}}})),XY(n,{[`${e}-handler-wrap`]:{background:_,[`${e}-handler-down`]:{borderBlockStart:`${Qe(r)} ${i} ${A}`}}})),qY(n)),{"&-rtl":{direction:"rtl",[`${e}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:s,lineHeight:O,borderRadius:T,[`input${e}-input`]:{height:I(l).sub(I(r).mul(2)).equal(),padding:`${Qe(h)} ${Qe(p)}`}},"&-sm":{padding:0,fontSize:o,borderRadius:E,[`input${e}-input`]:{height:I(c).sub(I(r).mul(2)).equal(),padding:`${Qe(f)} ${Qe(d)}`}},"&-out-of-range":{[`${e}-input-wrap`]:{input:{color:u}}},"&-group":Object.assign(Object.assign(Object.assign({},ts(n)),hSe(n)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${e}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${e}-group-addon`]:{borderRadius:T,fontSize:n.fontSizeLG}},"&-sm":{[`${e}-group-addon`]:{borderRadius:E}}},sSe(n)),cSe(n)),{[`&:not(${e}-compact-first-item):not(${e}-compact-last-item)${e}-compact-item`]:{[`${e}, ${e}-group-addon`]:{borderRadius:0}},[`&:not(${e}-compact-last-item)${e}-compact-first-item`]:{[`${e}, ${e}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${e}-compact-first-item)${e}-compact-last-item`]:{[`${e}, ${e}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${e}-input`]:{cursor:"not-allowed"},[e]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},ts(n)),{width:"100%",padding:`${Qe(x)} ${Qe(b)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:a,outline:0,transition:`all ${m} linear`,appearance:"textfield",fontSize:"inherit"}),KY(n.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,appearance:"none"}})},[`&:hover ${e}-handler-wrap, &-focused ${e}-handler-wrap`]:{width:n.handleWidth,opacity:1}})},{[e]:Object.assign(Object.assign(Object.assign({[`${e}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:n.handleVisibleWidth,opacity:y,height:"100%",borderStartStartRadius:0,borderStartEndRadius:a,borderEndEndRadius:a,borderEndStartRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${m}`,overflow:"hidden",[`${e}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${e}-handler-up-inner,
              ${e}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:n.handleFontSize}}},[`${e}-handler`]:{height:"50%",overflow:"hidden",color:g,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${Qe(r)} ${i} ${A}`,transition:`all ${m} linear`,"&:active":{background:S},"&:hover":{height:"60%",[`
              ${e}-handler-up-inner,
              ${e}-handler-down-inner
            `]:{color:v}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},uM()),{color:g,transition:`all ${m} linear`,userSelect:"none"})},[`${e}-handler-up`]:{borderStartEndRadius:a},[`${e}-handler-down`]:{borderEndEndRadius:a}},lae(n,"lg")),lae(n,"sm")),{"&-disabled, &-readonly":{[`${e}-handler-wrap`]:{display:"none"},[`${e}-input`]:{color:"inherit"}},[`
          ${e}-handler-up-disabled,
          ${e}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${e}-handler-up-disabled:hover &-handler-up-inner,
          ${e}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:M}})}]},uet=n=>{const{componentCls:e,paddingBlock:r,paddingInline:i,inputAffixPadding:a,controlWidth:o,borderRadiusLG:s,borderRadiusSM:l,paddingInlineLG:c,paddingInlineSM:u,paddingBlockLG:d,paddingBlockSM:f,motionDurationMid:h}=n;return{[`${e}-affix-wrapper`]:Object.assign(Object.assign({[`input${e}-input`]:{padding:`${Qe(r)} 0`}},z4(n)),{position:"relative",display:"inline-flex",alignItems:"center",width:o,padding:0,paddingInlineStart:i,"&-lg":{borderRadius:s,paddingInlineStart:c,[`input${e}-input`]:{padding:`${Qe(d)} 0`}},"&-sm":{borderRadius:l,paddingInlineStart:u,[`input${e}-input`]:{padding:`${Qe(f)} 0`}},[`&:not(${e}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${e}-disabled`]:{background:"transparent"},[`> div${e}`]:{width:"100%",border:"none",outline:"none",[`&${e}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${e}-handler-wrap`]:{zIndex:2},[e]:{position:"static",color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:a},"&-suffix":{insetBlockStart:0,insetInlineEnd:0,height:"100%",marginInlineEnd:i,marginInlineStart:a,transition:`margin ${h}`}},[`&:hover ${e}-handler-wrap, &-focused ${e}-handler-wrap`]:{width:n.handleWidth,opacity:1},[`&:not(${e}-affix-wrapper-without-controls):hover ${e}-suffix`]:{marginInlineEnd:n.calc(n.handleWidth).add(i).equal()}})}},det=Ja("InputNumber",n=>{const e=Qr(n,j_(n));return[cet(e),uet(e),hM(e)]},set,{unitless:{handleOpacity:!0}});var fet=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const _Se=C.forwardRef((n,e)=>{const{getPrefixCls:r,direction:i}=C.useContext(yr),a=C.useRef(null);C.useImperativeHandle(e,()=>a.current);const{className:o,rootClassName:s,size:l,disabled:c,prefixCls:u,addonBefore:d,addonAfter:f,prefix:h,suffix:p,bordered:g,readOnly:m,status:v,controls:y,variant:b}=n,x=fet(n,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","suffix","bordered","readOnly","status","controls","variant"]),_=r("input-number",u),S=Qc(_),[M,E,T]=det(_,S),{compactSize:P,compactItemClassnames:A}=ov(_,i);let N=C.createElement(VJe,{className:`${_}-handler-up-inner`}),O=C.createElement(fwe,{className:`${_}-handler-down-inner`});const I=typeof y=="boolean"?y:void 0;typeof y=="object"&&(N=typeof y.upIcon>"u"?N:C.createElement("span",{className:`${_}-handler-up-inner`},y.upIcon),O=typeof y.downIcon>"u"?O:C.createElement("span",{className:`${_}-handler-down-inner`},y.downIcon));const{hasFeedback:D,status:k,isFormItemInput:$,feedbackIcon:B}=C.useContext(Xs),F=ky(k,v),G=af(Q=>{var ie;return(ie=l??P)!==null&&ie!==void 0?ie:Q}),z=C.useContext(ju),U=c??z,[H,X]=U_("inputNumber",b,g),V=D&&C.createElement(C.Fragment,null,B),W=Be({[`${_}-lg`]:G==="large",[`${_}-sm`]:G==="small",[`${_}-rtl`]:i==="rtl",[`${_}-in-form-item`]:$},E),K=`${_}-group`,q=C.createElement(oet,Object.assign({ref:a,disabled:U,className:Be(T,S,o,s,A),upHandler:N,downHandler:O,prefixCls:_,readOnly:m,controls:I,prefix:h,suffix:V||p,addonBefore:d&&C.createElement(Gm,{form:!0,space:!0},d),addonAfter:f&&C.createElement(Gm,{form:!0,space:!0},f),classNames:{input:W,variant:Be({[`${_}-${H}`]:X},jm(_,F,D)),affixWrapper:Be({[`${_}-affix-wrapper-sm`]:G==="small",[`${_}-affix-wrapper-lg`]:G==="large",[`${_}-affix-wrapper-rtl`]:i==="rtl",[`${_}-affix-wrapper-without-controls`]:y===!1||U},E),wrapper:Be({[`${K}-rtl`]:i==="rtl"},E),groupWrapper:Be({[`${_}-group-wrapper-sm`]:G==="small",[`${_}-group-wrapper-lg`]:G==="large",[`${_}-group-wrapper-rtl`]:i==="rtl",[`${_}-group-wrapper-${H}`]:X},jm(`${_}-group-wrapper`,F,D),E)}},x));return M(q)}),wSe=_Se,het=n=>C.createElement(rf,{theme:{components:{InputNumber:{handleVisible:!0}}}},C.createElement(_Se,Object.assign({},n)));wSe._InternalPanelDoNotUseOrYouWillBeFired=het;const SSe=n=>{let e;return typeof n=="object"&&(n!=null&&n.clearIcon)?e=n:n&&(e={clearIcon:Je.createElement(L_,null)}),e};function ESe(n,e){const r=C.useRef([]),i=()=>{r.current.push(setTimeout(()=>{var a,o,s,l;!((a=n.current)===null||a===void 0)&&a.input&&((o=n.current)===null||o===void 0?void 0:o.input.getAttribute("type"))==="password"&&(!((s=n.current)===null||s===void 0)&&s.input.hasAttribute("value"))&&((l=n.current)===null||l===void 0||l.input.removeAttribute("value"))}))};return C.useEffect(()=>(e&&i(),()=>r.current.forEach(a=>{a&&clearTimeout(a)})),[]),i}function pet(n){return!!(n.prefix||n.suffix||n.allowClear||n.showCount)}var get=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const V4=C.forwardRef((n,e)=>{const{prefixCls:r,bordered:i=!0,status:a,size:o,disabled:s,onBlur:l,onFocus:c,suffix:u,allowClear:d,addonAfter:f,addonBefore:h,className:p,style:g,styles:m,rootClassName:v,onChange:y,classNames:b,variant:x}=n,_=get(n,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:S,direction:M,allowClear:E,autoComplete:T,className:P,style:A,classNames:N,styles:O}=Zu("input"),I=S("input",r),D=C.useRef(null),k=Qc(I),[$,B,F]=pSe(I,v),[G]=gSe(I,k),{compactSize:z,compactItemClassnames:U}=ov(I,M),H=af(Re=>{var Xe;return(Xe=o??z)!==null&&Xe!==void 0?Xe:Re}),X=Je.useContext(ju),V=s??X,{status:W,hasFeedback:K,feedbackIcon:q}=C.useContext(Xs),Q=ky(W,a),ie=pet(n)||!!K;C.useRef(ie);const oe=ESe(D,!0),ue=Re=>{oe(),l==null||l(Re)},le=Re=>{oe(),c==null||c(Re)},me=Re=>{oe(),y==null||y(Re)},J=(K||u)&&Je.createElement(Je.Fragment,null,u,K&&q),pe=SSe(d??E),[ve,Me]=U_("input",x,i);return $(G(Je.createElement(XJe,Object.assign({ref:hh(e,D),prefixCls:I,autoComplete:T},_,{disabled:V,onBlur:ue,onFocus:le,style:Object.assign(Object.assign({},A),g),styles:Object.assign(Object.assign({},O),m),suffix:J,allowClear:pe,className:Be(p,v,F,k,U,P),onChange:me,addonBefore:h&&Je.createElement(Gm,{form:!0,space:!0},h),addonAfter:f&&Je.createElement(Gm,{form:!0,space:!0},f),classNames:Object.assign(Object.assign(Object.assign({},b),N),{input:Be({[`${I}-sm`]:H==="small",[`${I}-lg`]:H==="large",[`${I}-rtl`]:M==="rtl"},b==null?void 0:b.input,N.input,B),variant:Be({[`${I}-${ve}`]:Me},jm(I,Q)),affixWrapper:Be({[`${I}-affix-wrapper-sm`]:H==="small",[`${I}-affix-wrapper-lg`]:H==="large",[`${I}-affix-wrapper-rtl`]:M==="rtl"},B),wrapper:Be({[`${I}-group-rtl`]:M==="rtl"},B),groupWrapper:Be({[`${I}-group-wrapper-sm`]:H==="small",[`${I}-group-wrapper-lg`]:H==="large",[`${I}-group-wrapper-rtl`]:M==="rtl",[`${I}-group-wrapper-${ve}`]:Me},jm(`${I}-group-wrapper`,Q,K),B)})}))))});var met={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"},vet=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:met}))},CSe=C.forwardRef(vet),yet={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},bet=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:yet}))},MSe=C.forwardRef(bet),xet={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"}}]},name:"swap-right",theme:"outlined"},_et=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:xet}))},wet=C.forwardRef(_et);function Eet(n,e,r){return r!==void 0?r:e==="year"&&n.lang.yearPlaceholder?n.lang.yearPlaceholder:e==="quarter"&&n.lang.quarterPlaceholder?n.lang.quarterPlaceholder:e==="month"&&n.lang.monthPlaceholder?n.lang.monthPlaceholder:e==="week"&&n.lang.weekPlaceholder?n.lang.weekPlaceholder:e==="time"&&n.timePickerLocale.placeholder?n.timePickerLocale.placeholder:n.lang.placeholder}function Cet(n,e,r){return r!==void 0?r:e==="year"&&n.lang.yearPlaceholder?n.lang.rangeYearPlaceholder:e==="quarter"&&n.lang.quarterPlaceholder?n.lang.rangeQuarterPlaceholder:e==="month"&&n.lang.monthPlaceholder?n.lang.rangeMonthPlaceholder:e==="week"&&n.lang.weekPlaceholder?n.lang.rangeWeekPlaceholder:e==="time"&&n.timePickerLocale.placeholder?n.timePickerLocale.rangePlaceholder:n.lang.rangePlaceholder}function TSe(n,e){const{allowClear:r=!0}=n,{clearIcon:i,removeIcon:a}=pwe(Object.assign(Object.assign({},n),{prefixCls:e,componentName:"DatePicker"}));return[C.useMemo(()=>r===!1?!1:Object.assign({clearIcon:i},r===!0?{}:r),[r,i]),a]}const[Met,Tet]=["week","WeekPicker"],[Aet,Ret]=["month","MonthPicker"],[Pet,Net]=["year","YearPicker"],[Oet,Iet]=["quarter","QuarterPicker"],[ASe,cae]=["time","TimePicker"],Det=n=>C.createElement(ms,Object.assign({size:"small",type:"primary"},n));function RSe(n){return C.useMemo(()=>Object.assign({button:Det},n),[n])}var Let=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const ket=n=>C.forwardRef((r,i)=>{var a;const{prefixCls:o,getPopupContainer:s,components:l,className:c,style:u,placement:d,size:f,disabled:h,bordered:p=!0,placeholder:g,popupClassName:m,dropdownClassName:v,status:y,rootClassName:b,variant:x,picker:_}=r,S=Let(r,["prefixCls","getPopupContainer","components","className","style","placement","size","disabled","bordered","placeholder","popupClassName","dropdownClassName","status","rootClassName","variant","picker"]),M=C.useRef(null),{getPrefixCls:E,direction:T,getPopupContainer:P,rangePicker:A}=C.useContext(yr),N=E("picker",o),{compactSize:O,compactItemClassnames:I}=ov(N,T),D=E(),[k,$]=U_("rangePicker",x,p),B=Qc(N),[F,G,z]=mSe(N,B),[U]=TSe(r,N),H=RSe(l),X=af(J=>{var pe;return(pe=f??O)!==null&&pe!==void 0?pe:J}),V=C.useContext(ju),W=h??V,K=C.useContext(Xs),{hasFeedback:q,status:Q,feedbackIcon:ie}=K,oe=C.createElement(C.Fragment,null,_===ASe?C.createElement(MSe,null):C.createElement(CSe,null),q&&ie);C.useImperativeHandle(i,()=>M.current);const[ue]=Wp("Calendar",AN),le=Object.assign(Object.assign({},ue),r.locale),[me]=dM("DatePicker",(a=r.popupStyle)===null||a===void 0?void 0:a.zIndex);return F(C.createElement(Gm,{space:!0},C.createElement(iJe,Object.assign({separator:C.createElement("span",{"aria-label":"to",className:`${N}-separator`},C.createElement(wet,null)),disabled:W,ref:M,placement:d,placeholder:Cet(le,_,g),suffixIcon:oe,prevIcon:C.createElement("span",{className:`${N}-prev-icon`}),nextIcon:C.createElement("span",{className:`${N}-next-icon`}),superPrevIcon:C.createElement("span",{className:`${N}-super-prev-icon`}),superNextIcon:C.createElement("span",{className:`${N}-super-next-icon`}),transitionName:`${D}-slide-up`,picker:_},S,{className:Be({[`${N}-${X}`]:X,[`${N}-${k}`]:$},jm(N,ky(Q,y),q),G,I,c,A==null?void 0:A.className,z,B,b),style:Object.assign(Object.assign({},A==null?void 0:A.style),u),locale:le.lang,prefixCls:N,getPopupContainer:s||P,generateConfig:n,components:H,direction:T,classNames:{popup:Be(G,m||v,z,B,b)},styles:{popup:Object.assign(Object.assign({},r.popupStyle),{zIndex:me})},allowClear:U}))))});var Fet=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const $et=n=>{const e=(c,u)=>{const d=u===cae?"timePicker":"datePicker";return C.forwardRef((h,p)=>{var g;const{prefixCls:m,getPopupContainer:v,components:y,style:b,className:x,rootClassName:_,size:S,bordered:M,placement:E,placeholder:T,popupClassName:P,dropdownClassName:A,disabled:N,status:O,variant:I,onCalendarChange:D}=h,k=Fet(h,["prefixCls","getPopupContainer","components","style","className","rootClassName","size","bordered","placement","placeholder","popupClassName","dropdownClassName","disabled","status","variant","onCalendarChange"]),{getPrefixCls:$,direction:B,getPopupContainer:F,[d]:G}=C.useContext(yr),z=$("picker",m),{compactSize:U,compactItemClassnames:H}=ov(z,B),X=C.useRef(null),[V,W]=U_("datePicker",I,M),K=Qc(z),[q,Q,ie]=mSe(z,K);C.useImperativeHandle(p,()=>X.current);const oe={showToday:!0},ue=c||h.picker,le=$(),{onSelect:me,multiple:J}=k,pe=me&&c==="time"&&!J,ve=(Ge,We,Ze)=>{D==null||D(Ge,We,Ze),pe&&me(Ge)},[Me,Re]=TSe(h,z),Xe=RSe(y),He=af(Ge=>{var We;return(We=S??U)!==null&&We!==void 0?We:Ge}),ee=C.useContext(ju),Y=N??ee,ce=C.useContext(Xs),{hasFeedback:_e,status:Ae,feedbackIcon:Ce}=ce,et=C.createElement(C.Fragment,null,ue==="time"?C.createElement(MSe,null):C.createElement(CSe,null),_e&&Ce),[Ve]=Wp("DatePicker",AN),qe=Object.assign(Object.assign({},Ve),h.locale),[dt]=dM("DatePicker",(g=h.popupStyle)===null||g===void 0?void 0:g.zIndex);return q(C.createElement(Gm,{space:!0},C.createElement(uJe,Object.assign({ref:X,placeholder:Eet(qe,ue,T),suffixIcon:et,placement:E,prevIcon:C.createElement("span",{className:`${z}-prev-icon`}),nextIcon:C.createElement("span",{className:`${z}-next-icon`}),superPrevIcon:C.createElement("span",{className:`${z}-super-prev-icon`}),superNextIcon:C.createElement("span",{className:`${z}-super-next-icon`}),transitionName:`${le}-slide-up`,picker:c,onCalendarChange:ve},oe,k,{locale:qe.lang,className:Be({[`${z}-${He}`]:He,[`${z}-${V}`]:W},jm(z,ky(Ae,O),_e),Q,H,G==null?void 0:G.className,x,ie,K,_),style:Object.assign(Object.assign({},G==null?void 0:G.style),b),prefixCls:z,getPopupContainer:v||F,generateConfig:n,components:Xe,direction:B,disabled:Y,classNames:{popup:Be(Q,ie,K,_,P||A)},styles:{popup:Object.assign(Object.assign({},h.popupStyle),{zIndex:dt})},allowClear:Me,removeIcon:Re}))))})},r=e(),i=e(Met,Tet),a=e(Aet,Ret),o=e(Pet,Net),s=e(Oet,Iet),l=e(ASe,cae);return{DatePicker:r,WeekPicker:i,MonthPicker:a,YearPicker:o,TimePicker:l,QuarterPicker:s}},PSe=n=>{const{DatePicker:e,WeekPicker:r,MonthPicker:i,YearPicker:a,TimePicker:o,QuarterPicker:s}=$et(n),l=ket(n),c=e;return c.WeekPicker=r,c.MonthPicker=i,c.YearPicker=a,c.RangePicker=l,c.TimePicker=o,c.QuarterPicker=s,c},W_=PSe(fQe),Bet=TY(W_,"popupAlign",void 0,"picker");W_._InternalPanelDoNotUseOrYouWillBeFired=Bet;const zet=TY(W_.RangePicker,"popupAlign",void 0,"picker");W_._InternalRangePanelDoNotUseOrYouWillBeFired=zet;W_.generatePicker=PSe;function uae(n){return["small","middle","large"].includes(n)}function dae(n){return n?typeof n=="number"&&!Number.isNaN(n):!1}const NSe=Je.createContext({latestIndex:0}),Uet=NSe.Provider,Vet=n=>{let{className:e,index:r,children:i,split:a,style:o}=n;const{latestIndex:s}=C.useContext(NSe);return i==null?null:C.createElement(C.Fragment,null,C.createElement("div",{className:e,style:o},i),r<s&&a&&C.createElement("span",{className:`${e}-split`},a))};var Get=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const jet=C.forwardRef((n,e)=>{var r;const{getPrefixCls:i,direction:a,size:o,className:s,style:l,classNames:c,styles:u}=Zu("space"),{size:d=o??"small",align:f,className:h,rootClassName:p,children:g,direction:m="horizontal",prefixCls:v,split:y,style:b,wrap:x=!1,classNames:_,styles:S}=n,M=Get(n,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[E,T]=Array.isArray(d)?d:[d,d],P=uae(T),A=uae(E),N=dae(T),O=dae(E),I=Bm(g,{keepEmpty:!0}),D=f===void 0&&m==="horizontal"?"center":f,k=i("space",v),[$,B,F]=a_e(k),G=Be(k,s,B,`${k}-${m}`,{[`${k}-rtl`]:a==="rtl",[`${k}-align-${D}`]:D,[`${k}-gap-row-${T}`]:P,[`${k}-gap-col-${E}`]:A},h,p,F),z=Be(`${k}-item`,(r=_==null?void 0:_.item)!==null&&r!==void 0?r:c.item);let U=0;const H=I.map((W,K)=>{var q;W!=null&&(U=K);const Q=(W==null?void 0:W.key)||`${z}-${K}`;return C.createElement(Vet,{className:z,key:Q,index:K,split:y,style:(q=S==null?void 0:S.item)!==null&&q!==void 0?q:u.item},W)}),X=C.useMemo(()=>({latestIndex:U}),[U]);if(I.length===0)return null;const V={};return x&&(V.flexWrap="wrap"),!A&&O&&(V.columnGap=E),!P&&N&&(V.rowGap=T),$(C.createElement("div",Object.assign({ref:e,className:G,style:Object.assign(Object.assign(Object.assign({},V),l),b)},M),C.createElement(Uet,{value:X},H)))}),OSe=jet;OSe.Compact=GHe;function VN(n){const[e,r]=C.useState(n);return C.useEffect(()=>{const i=setTimeout(()=>{r(n)},n.length?0:10);return()=>{clearTimeout(i)}},[n]),e}const Het=n=>{const{componentCls:e}=n,r=`${e}-show-help`,i=`${e}-show-help-item`;return{[r]:{transition:`opacity ${n.motionDurationFast} ${n.motionEaseInOut}`,"&-appear, &-enter":{opacity:0,"&-active":{opacity:1}},"&-leave":{opacity:1,"&-active":{opacity:0}},[i]:{overflow:"hidden",transition:`height ${n.motionDurationFast} ${n.motionEaseInOut},
                     opacity ${n.motionDurationFast} ${n.motionEaseInOut},
                     transform ${n.motionDurationFast} ${n.motionEaseInOut} !important`,[`&${i}-appear, &${i}-enter`]:{transform:"translateY(-5px)",opacity:0,"&-active":{transform:"translateY(0)",opacity:1}},[`&${i}-leave-active`]:{transform:"translateY(-5px)"}}}}},Wet=n=>({legend:{display:"block",width:"100%",marginBottom:n.marginLG,padding:0,color:n.colorTextDescription,fontSize:n.fontSizeLG,lineHeight:"inherit",border:0,borderBottom:`${Qe(n.lineWidth)} ${n.lineType} ${n.colorBorder}`},'input[type="search"]':{boxSizing:"border-box"},'input[type="radio"], input[type="checkbox"]':{lineHeight:"normal"},'input[type="file"]':{display:"block"},'input[type="range"]':{display:"block",width:"100%"},"select[multiple], select[size]":{height:"auto"},"input[type='file']:focus,\n  input[type='radio']:focus,\n  input[type='checkbox']:focus":{outline:0,boxShadow:`0 0 0 ${Qe(n.controlOutlineWidth)} ${n.controlOutline}`},output:{display:"block",paddingTop:15,color:n.colorText,fontSize:n.fontSize,lineHeight:n.lineHeight}}),fae=(n,e)=>{const{formItemCls:r}=n;return{[r]:{[`${r}-label > label`]:{height:e},[`${r}-control-input`]:{minHeight:e}}}},qet=n=>{const{componentCls:e}=n;return{[n.componentCls]:Object.assign(Object.assign(Object.assign({},ts(n)),Wet(n)),{[`${e}-text`]:{display:"inline-block",paddingInlineEnd:n.paddingSM},"&-small":Object.assign({},fae(n,n.controlHeightSM)),"&-large":Object.assign({},fae(n,n.controlHeightLG))})}},Yet=n=>{const{formItemCls:e,iconCls:r,rootPrefixCls:i,antCls:a,labelRequiredMarkColor:o,labelColor:s,labelFontSize:l,labelHeight:c,labelColonMarginInlineStart:u,labelColonMarginInlineEnd:d,itemMarginBottom:f}=n;return{[e]:Object.assign(Object.assign({},ts(n)),{marginBottom:f,verticalAlign:"top","&-with-help":{transition:"none"},[`&-hidden,
        &-hidden${a}-row`]:{display:"none"},"&-has-warning":{[`${e}-split`]:{color:n.colorError}},"&-has-error":{[`${e}-split`]:{color:n.colorWarning}},[`${e}-label`]:{flexGrow:0,overflow:"hidden",whiteSpace:"nowrap",textAlign:"end",verticalAlign:"middle","&-left":{textAlign:"start"},"&-wrap":{overflow:"unset",lineHeight:n.lineHeight,whiteSpace:"unset"},"> label":{position:"relative",display:"inline-flex",alignItems:"center",maxWidth:"100%",height:c,color:s,fontSize:l,[`> ${r}`]:{fontSize:n.fontSize,verticalAlign:"top"},[`&${e}-required`]:{"&::before":{display:"inline-block",marginInlineEnd:n.marginXXS,color:o,fontSize:n.fontSize,fontFamily:"SimSun, sans-serif",lineHeight:1,content:'"*"'},[`&${e}-required-mark-hidden, &${e}-required-mark-optional`]:{"&::before":{display:"none"}}},[`${e}-optional`]:{display:"inline-block",marginInlineStart:n.marginXXS,color:n.colorTextDescription,[`&${e}-required-mark-hidden`]:{display:"none"}},[`${e}-tooltip`]:{color:n.colorTextDescription,cursor:"help",writingMode:"horizontal-tb",marginInlineStart:n.marginXXS},"&::after":{content:'":"',position:"relative",marginBlock:0,marginInlineStart:u,marginInlineEnd:d},[`&${e}-no-colon::after`]:{content:'"\\a0"'}}},[`${e}-control`]:{"--ant-display":"flex",flexDirection:"column",flexGrow:1,[`&:first-child:not([class^="'${i}-col-'"]):not([class*="' ${i}-col-'"])`]:{width:"100%"},"&-input":{position:"relative",display:"flex",alignItems:"center",minHeight:n.controlHeight,"&-content":{flex:"auto",maxWidth:"100%"}}},[e]:{"&-additional":{display:"flex",flexDirection:"column"},"&-explain, &-extra":{clear:"both",color:n.colorTextDescription,fontSize:n.fontSize,lineHeight:n.lineHeight},"&-explain-connected":{width:"100%"},"&-extra":{minHeight:n.controlHeightSM,transition:`color ${n.motionDurationMid} ${n.motionEaseOut}`},"&-explain":{"&-error":{color:n.colorError},"&-warning":{color:n.colorWarning}}},[`&-with-help ${e}-explain`]:{height:"auto",opacity:1},[`${e}-feedback-icon`]:{fontSize:n.fontSize,textAlign:"center",visibility:"visible",animationName:yY,animationDuration:n.motionDurationMid,animationTimingFunction:n.motionEaseOutBack,pointerEvents:"none","&-success":{color:n.colorSuccess},"&-error":{color:n.colorError},"&-warning":{color:n.colorWarning},"&-validating":{color:n.colorPrimary}}})}},hae=(n,e)=>{const{formItemCls:r}=n;return{[`${e}-horizontal`]:{[`${r}-label`]:{flexGrow:0},[`${r}-control`]:{flex:"1 1 0",minWidth:0},[`${r}-label[class$='-24'], ${r}-label[class*='-24 ']`]:{[`& + ${r}-control`]:{minWidth:"unset"}}}}},Xet=n=>{const{componentCls:e,formItemCls:r,inlineItemMarginBottom:i}=n;return{[`${e}-inline`]:{display:"flex",flexWrap:"wrap",[r]:{flex:"none",marginInlineEnd:n.margin,marginBottom:i,"&-row":{flexWrap:"nowrap"},[`> ${r}-label,
        > ${r}-control`]:{display:"inline-block",verticalAlign:"top"},[`> ${r}-label`]:{flex:"none"},[`${e}-text`]:{display:"inline-block"},[`${r}-has-feedback`]:{display:"inline-block"}}}}},Od=n=>({padding:n.verticalLabelPadding,margin:n.verticalLabelMargin,whiteSpace:"initial",textAlign:"start","> label":{margin:0,"&::after":{visibility:"hidden"}}}),ISe=n=>{const{componentCls:e,formItemCls:r,rootPrefixCls:i}=n;return{[`${r} ${r}-label`]:Od(n),[`${e}:not(${e}-inline)`]:{[r]:{flexWrap:"wrap",[`${r}-label, ${r}-control`]:{[`&:not([class*=" ${i}-col-xs"])`]:{flex:"0 0 100%",maxWidth:"100%"}}}}}},Ket=n=>{const{componentCls:e,formItemCls:r,antCls:i}=n;return{[`${e}-vertical`]:{[`${r}:not(${r}-horizontal)`]:{[`${r}-row`]:{flexDirection:"column"},[`${r}-label > label`]:{height:"auto"},[`${r}-control`]:{width:"100%"},[`${r}-label,
        ${i}-col-24${r}-label,
        ${i}-col-xl-24${r}-label`]:Od(n)}},[`@media (max-width: ${Qe(n.screenXSMax)})`]:[ISe(n),{[e]:{[`${r}:not(${r}-horizontal)`]:{[`${i}-col-xs-24${r}-label`]:Od(n)}}}],[`@media (max-width: ${Qe(n.screenSMMax)})`]:{[e]:{[`${r}:not(${r}-horizontal)`]:{[`${i}-col-sm-24${r}-label`]:Od(n)}}},[`@media (max-width: ${Qe(n.screenMDMax)})`]:{[e]:{[`${r}:not(${r}-horizontal)`]:{[`${i}-col-md-24${r}-label`]:Od(n)}}},[`@media (max-width: ${Qe(n.screenLGMax)})`]:{[e]:{[`${r}:not(${r}-horizontal)`]:{[`${i}-col-lg-24${r}-label`]:Od(n)}}}}},Zet=n=>{const{formItemCls:e,antCls:r}=n;return{[`${e}-vertical`]:{[`${e}-row`]:{flexDirection:"column"},[`${e}-label > label`]:{height:"auto"},[`${e}-control`]:{width:"100%"}},[`${e}-vertical ${e}-label,
      ${r}-col-24${e}-label,
      ${r}-col-xl-24${e}-label`]:Od(n),[`@media (max-width: ${Qe(n.screenXSMax)})`]:[ISe(n),{[e]:{[`${r}-col-xs-24${e}-label`]:Od(n)}}],[`@media (max-width: ${Qe(n.screenSMMax)})`]:{[e]:{[`${r}-col-sm-24${e}-label`]:Od(n)}},[`@media (max-width: ${Qe(n.screenMDMax)})`]:{[e]:{[`${r}-col-md-24${e}-label`]:Od(n)}},[`@media (max-width: ${Qe(n.screenLGMax)})`]:{[e]:{[`${r}-col-lg-24${e}-label`]:Od(n)}}}},Qet=n=>({labelRequiredMarkColor:n.colorError,labelColor:n.colorTextHeading,labelFontSize:n.fontSize,labelHeight:n.controlHeight,labelColonMarginInlineStart:n.marginXXS/2,labelColonMarginInlineEnd:n.marginXS,itemMarginBottom:n.marginLG,verticalLabelPadding:`0 0 ${n.paddingXS}px`,verticalLabelMargin:0,inlineItemMarginBottom:0}),DSe=(n,e)=>Qr(n,{formItemCls:`${n.componentCls}-item`,rootPrefixCls:e}),tX=Ja("Form",(n,e)=>{let{rootPrefixCls:r}=e;const i=DSe(n,r);return[qet(i),Yet(i),Het(i),hae(i,i.componentCls),hae(i,i.formItemCls),Xet(i),Ket(i),Zet(i),rWe(i),yY]},Qet,{order:-1e3}),pae=[];function K5(n,e,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return{key:typeof n=="string"?n:`${e}-${i}`,error:n,errorStatus:r}}const LSe=n=>{let{help:e,helpStatus:r,errors:i=pae,warnings:a=pae,className:o,fieldId:s,onVisibleChanged:l}=n;const{prefixCls:c}=C.useContext(MY),u=`${c}-item-explain`,d=Qc(c),[f,h,p]=tX(c,d),g=C.useMemo(()=>Vre(c),[c]),m=VN(i),v=VN(a),y=C.useMemo(()=>e!=null?[K5(e,"help",r)]:[].concat(ot(m.map((_,S)=>K5(_,"error","error",S))),ot(v.map((_,S)=>K5(_,"warning","warning",S)))),[e,r,m,v]),b=C.useMemo(()=>{const _={};return y.forEach(S=>{let{key:M}=S;_[M]=(_[M]||0)+1}),y.map((S,M)=>Object.assign(Object.assign({},S),{key:_[S.key]>1?`${S.key}-fallback-${M}`:S.key}))},[y]),x={};return s&&(x.id=`${s}_help`),f(C.createElement(av,{motionDeadline:g.motionDeadline,motionName:`${c}-show-help`,visible:!!b.length,onVisibleChanged:l},_=>{const{className:S,style:M}=_;return C.createElement("div",Object.assign({},x,{className:Be(u,S,p,d,o,h),style:M}),C.createElement(zxe,Object.assign({keys:b},Vre(c),{motionName:`${c}-show-help-item`,component:!1}),E=>{const{key:T,error:P,errorStatus:A,className:N,style:O}=E;return C.createElement("div",{key:T,className:Be(N,{[`${u}-${A}`]:A}),style:O},P)}))}))},Jet=["parentNode"],ett="form_item";function U2(n){return n===void 0||n===!1?[]:Array.isArray(n)?n:[n]}function kSe(n,e){if(!n.length)return;const r=n.join("_");return e?`${e}_${r}`:Jet.includes(r)?`${ett}_${r}`:r}function FSe(n,e,r,i,a,o){let s=i;return o!==void 0?s=o:r.validating?s="validating":n.length?s="error":e.length?s="warning":(r.touched||a&&r.validated)&&(s="success"),s}var ttt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};function gae(n){return U2(n).join("_")}function mae(n,e){const r=e.getFieldInstance(n),i=Pbe(r);if(i)return i;const a=kSe(U2(n),e.__INTERNAL__.name);if(a)return document.getElementById(a)}function $Se(n){const[e]=CY(),r=C.useRef({}),i=C.useMemo(()=>n??Object.assign(Object.assign({},e),{__INTERNAL__:{itemRef:a=>o=>{const s=gae(a);o?r.current[s]=o:delete r.current[s]}},scrollToField:function(a){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{focus:s}=o,l=ttt(o,["focus"]),c=mae(a,i);c&&(jje(c,Object.assign({scrollMode:"if-needed",block:"nearest"},l)),s&&i.focusField(a))},focusField:a=>{var o,s;const l=i.getFieldInstance(a);typeof(l==null?void 0:l.focus)=="function"?l.focus():(s=(o=mae(a,i))===null||o===void 0?void 0:o.focus)===null||s===void 0||s.call(o)},getFieldInstance:a=>{const o=gae(a);return r.current[o]}}),[n,e]);return[i]}var ntt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const rtt=(n,e)=>{const r=C.useContext(ju),{getPrefixCls:i,direction:a,requiredMark:o,colon:s,scrollToFirstError:l,className:c,style:u}=Zu("form"),{prefixCls:d,className:f,rootClassName:h,size:p,disabled:g=r,form:m,colon:v,labelAlign:y,labelWrap:b,labelCol:x,wrapperCol:_,hideRequiredMark:S,layout:M="horizontal",scrollToFirstError:E,requiredMark:T,onFinishFailed:P,name:A,style:N,feedbackIcons:O,variant:I}=n,D=ntt(n,["prefixCls","className","rootClassName","size","disabled","form","colon","labelAlign","labelWrap","labelCol","wrapperCol","hideRequiredMark","layout","scrollToFirstError","requiredMark","onFinishFailed","name","style","feedbackIcons","variant"]),k=af(p),$=C.useContext(hxe),B=C.useMemo(()=>T!==void 0?T:S?!1:o!==void 0?o:!0,[S,T,o]),F=v??s,G=i("form",d),z=Qc(G),[U,H,X]=tX(G,z),V=Be(G,`${G}-${M}`,{[`${G}-hide-required-mark`]:B===!1,[`${G}-rtl`]:a==="rtl",[`${G}-${k}`]:k},X,z,H,c,f,h),[W]=$Se(m),{__INTERNAL__:K}=W;K.name=A;const q=C.useMemo(()=>({name:A,labelAlign:y,labelCol:x,labelWrap:b,wrapperCol:_,vertical:M==="vertical",colon:F,requiredMark:B,itemRef:K.itemRef,form:W,feedbackIcons:O}),[A,y,x,_,M,F,B,W,O]),Q=C.useRef(null);C.useImperativeHandle(e,()=>{var ue;return Object.assign(Object.assign({},W),{nativeElement:(ue=Q.current)===null||ue===void 0?void 0:ue.nativeElement})});const ie=(ue,le)=>{if(ue){let me={block:"nearest"};typeof ue=="object"&&(me=Object.assign(Object.assign({},me),ue)),W.scrollToField(le,me)}},oe=ue=>{if(P==null||P(ue),ue.errorFields.length){const le=ue.errorFields[0].name;if(E!==void 0){ie(E,le);return}l!==void 0&&ie(l,le)}};return U(C.createElement(A_e.Provider,{value:I},C.createElement(lY,{disabled:g},C.createElement(cy.Provider,{value:k},C.createElement(T_e,{validateMessages:$},C.createElement(Ip.Provider,{value:q},C.createElement(F_,Object.assign({id:A},D,{name:A,onFinishFailed:oe,form:W,ref:Q,style:Object.assign(Object.assign({},u),N),className:V}))))))))},itt=C.forwardRef(rtt);function att(n){if(typeof n=="function")return n;const e=Bm(n);return e.length<=1?e[0]:e}const BSe=()=>{const{status:n,errors:e=[],warnings:r=[]}=C.useContext(Xs);return{status:n,errors:e,warnings:r}};BSe.Context=Xs;function ott(n){const[e,r]=C.useState(n),i=C.useRef(null),a=C.useRef([]),o=C.useRef(!1);C.useEffect(()=>(o.current=!1,()=>{o.current=!0,Gr.cancel(i.current),i.current=null}),[]);function s(l){o.current||(i.current===null&&(a.current=[],i.current=Gr(()=>{i.current=null,r(c=>{let u=c;return a.current.forEach(d=>{u=d(u)}),u})})),a.current.push(l))}return[e,s]}function stt(){const{itemRef:n}=C.useContext(Ip),e=C.useRef({});function r(i,a){const o=a&&typeof a=="object"&&lM(a),s=i.join("_");return(e.current.name!==s||e.current.originRef!==o)&&(e.current.name=s,e.current.originRef=o,e.current.ref=hh(n(i),o)),e.current.ref}return r}const ltt=n=>{const{formItemCls:e}=n;return{"@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none)":{[`${e}-control`]:{display:"flex"}}}},ctt=cY(["Form","item-item"],(n,e)=>{let{rootPrefixCls:r}=e;const i=DSe(n,r);return[ltt(i)]});var utt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const dtt=24,ftt=n=>{const{prefixCls:e,status:r,labelCol:i,wrapperCol:a,children:o,errors:s,warnings:l,_internalItemRender:c,extra:u,help:d,fieldId:f,marginBottom:h,onErrorVisibleChanged:p,label:g}=n,m=`${e}-item`,v=C.useContext(Ip),y=C.useMemo(()=>{let D=Object.assign({},a||v.wrapperCol||{});return g===null&&!i&&!a&&v.labelCol&&[void 0,"xs","sm","md","lg","xl","xxl"].forEach($=>{const B=$?[$]:[],F=Lu(v.labelCol,B),G=typeof F=="object"?F:{},z=Lu(D,B),U=typeof z=="object"?z:{};"span"in G&&!("offset"in U)&&G.span<dtt&&(D=Eu(D,[].concat(B,["offset"]),G.span))}),D},[a,v]),b=Be(`${m}-control`,y.className),x=C.useMemo(()=>{const{labelCol:D,wrapperCol:k}=v;return utt(v,["labelCol","wrapperCol"])},[v]),_=C.useRef(null),[S,M]=C.useState(0);Dr(()=>{u&&_.current?M(_.current.clientHeight):M(0)},[u]);const E=C.createElement("div",{className:`${m}-control-input`},C.createElement("div",{className:`${m}-control-input-content`},o)),T=C.useMemo(()=>({prefixCls:e,status:r}),[e,r]),P=h!==null||s.length||l.length?C.createElement(MY.Provider,{value:T},C.createElement(LSe,{fieldId:f,errors:s,warnings:l,help:d,helpStatus:r,className:`${m}-explain-connected`,onVisibleChanged:p})):null,A={};f&&(A.id=`${f}_extra`);const N=u?C.createElement("div",Object.assign({},A,{className:`${m}-extra`,ref:_}),u):null,O=P||N?C.createElement("div",{className:`${m}-additional`,style:h?{minHeight:h+S}:{}},P,N):null,I=c&&c.mark==="pro_table_render"&&c.render?c.render(n,{input:E,errorList:P,extra:N}):C.createElement(C.Fragment,null,E,O);return C.createElement(Ip.Provider,{value:x},C.createElement(ySe,Object.assign({},y,{className:b}),I),C.createElement(ctt,{prefixCls:e}))};var htt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},ptt=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:htt}))},gtt=C.forwardRef(ptt),mtt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};function vtt(n){return n?typeof n=="object"&&!C.isValidElement(n)?n:{title:n}:null}const ytt=n=>{let{prefixCls:e,label:r,htmlFor:i,labelCol:a,labelAlign:o,colon:s,required:l,requiredMark:c,tooltip:u,vertical:d}=n;var f;const[h]=Wp("Form"),{labelAlign:p,labelCol:g,labelWrap:m,colon:v}=C.useContext(Ip);if(!r)return null;const y=a||g||{},b=o||p,x=`${e}-item-label`,_=Be(x,b==="left"&&`${x}-left`,y.className,{[`${x}-wrap`]:!!m});let S=r;const M=s===!0||v!==!1&&s!==!1;M&&!d&&typeof r=="string"&&r.trim()&&(S=r.replace(/[:|：]\s*$/,""));const T=vtt(u);if(T){const{icon:D=C.createElement(gtt,null)}=T,k=mtt(T,["icon"]),$=C.createElement(FY,Object.assign({},k),C.cloneElement(D,{className:`${e}-item-tooltip`,title:"",onClick:B=>{B.preventDefault()},tabIndex:null}));S=C.createElement(C.Fragment,null,S,$)}const P=c==="optional",A=typeof c=="function",N=c===!1;A?S=c(S,{required:!!l}):P&&!l&&(S=C.createElement(C.Fragment,null,S,C.createElement("span",{className:`${e}-item-optional`,title:""},(h==null?void 0:h.optional)||((f=zm.Form)===null||f===void 0?void 0:f.optional))));let O;N?O="hidden":(P||A)&&(O="optional");const I=Be({[`${e}-item-required`]:l,[`${e}-item-required-mark-${O}`]:O,[`${e}-item-no-colon`]:!M});return C.createElement(ySe,Object.assign({},y,{className:_}),C.createElement("label",{htmlFor:i,className:I,title:typeof r=="string"?r:""},S))},btt={success:b4,warning:x4,error:L_,validating:_4};function zSe(n){let{children:e,errors:r,warnings:i,hasFeedback:a,validateStatus:o,prefixCls:s,meta:l,noStyle:c}=n;const u=`${s}-item`,{feedbackIcons:d}=C.useContext(Ip),f=FSe(r,i,l,null,!!a,o),{isFormItemInput:h,status:p,hasFeedback:g,feedbackIcon:m}=C.useContext(Xs),v=C.useMemo(()=>{var y;let b;if(a){const _=a!==!0&&a.icons||d,S=f&&((y=_==null?void 0:_({status:f,errors:r,warnings:i}))===null||y===void 0?void 0:y[f]),M=f&&btt[f];b=S!==!1&&M?C.createElement("span",{className:Be(`${u}-feedback-icon`,`${u}-feedback-icon-${f}`)},S||C.createElement(M,null)):null}const x={status:f||"",errors:r,warnings:i,hasFeedback:!!a,feedbackIcon:b,isFormItemInput:!0};return c&&(x.status=(f??p)||"",x.isFormItemInput=h,x.hasFeedback=!!(a??g),x.feedbackIcon=a!==void 0?x.feedbackIcon:m),x},[f,a,c,h,p]);return C.createElement(Xs.Provider,{value:v},e)}var xtt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};function _tt(n){const{prefixCls:e,className:r,rootClassName:i,style:a,help:o,errors:s,warnings:l,validateStatus:c,meta:u,hasFeedback:d,hidden:f,children:h,fieldId:p,required:g,isRequired:m,onSubItemMetaChange:v,layout:y}=n,b=xtt(n,["prefixCls","className","rootClassName","style","help","errors","warnings","validateStatus","meta","hasFeedback","hidden","children","fieldId","required","isRequired","onSubItemMetaChange","layout"]),x=`${e}-item`,{requiredMark:_,vertical:S}=C.useContext(Ip),M=S||y==="vertical",E=C.useRef(null),T=VN(s),P=VN(l),A=o!=null,N=!!(A||s.length||l.length),O=!!E.current&&S4(E.current),[I,D]=C.useState(null);Dr(()=>{if(N&&E.current){const G=getComputedStyle(E.current);D(parseInt(G.marginBottom,10))}},[N,O]);const k=G=>{G||D(null)},B=function(){let G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const z=G?T:u.errors,U=G?P:u.warnings;return FSe(z,U,u,"",!!d,c)}(),F=Be(x,r,i,{[`${x}-with-help`]:A||T.length||P.length,[`${x}-has-feedback`]:B&&d,[`${x}-has-success`]:B==="success",[`${x}-has-warning`]:B==="warning",[`${x}-has-error`]:B==="error",[`${x}-is-validating`]:B==="validating",[`${x}-hidden`]:f,[`${x}-${y}`]:y});return C.createElement("div",{className:F,style:a,ref:E},C.createElement(DJe,Object.assign({className:`${x}-row`},Qu(b,["_internalItemRender","colon","dependencies","extra","fieldKey","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","label","labelAlign","labelCol","labelWrap","messageVariables","name","normalize","noStyle","preserve","requiredMark","rules","shouldUpdate","trigger","tooltip","validateFirst","validateTrigger","valuePropName","wrapperCol","validateDebounce"])),C.createElement(ytt,Object.assign({htmlFor:p},n,{requiredMark:_,required:g??m,prefixCls:e,vertical:M})),C.createElement(ftt,Object.assign({},n,u,{errors:T,warnings:P,prefixCls:e,status:B,help:o,marginBottom:I,onErrorVisibleChanged:k}),C.createElement(M_e.Provider,{value:v},C.createElement(zSe,{prefixCls:e,meta:u,errors:u.errors,warnings:u.warnings,hasFeedback:d,validateStatus:B},h)))),!!I&&C.createElement("div",{className:`${x}-margin-offset`,style:{marginBottom:-I}}))}const wtt="__SPLIT__";function Stt(n,e){const r=Object.keys(n),i=Object.keys(e);return r.length===i.length&&r.every(a=>{const o=n[a],s=e[a];return o===s||typeof o=="function"||typeof s=="function"})}const Ett=C.memo(n=>{let{children:e}=n;return e},(n,e)=>Stt(n.control,e.control)&&n.update===e.update&&n.childProps.length===e.childProps.length&&n.childProps.every((r,i)=>r===e.childProps[i]));function vae(){return{errors:[],warnings:[],touched:!1,validating:!1,name:[],validated:!1}}function Ctt(n){const{name:e,noStyle:r,className:i,dependencies:a,prefixCls:o,shouldUpdate:s,rules:l,children:c,required:u,label:d,messageVariables:f,trigger:h="onChange",validateTrigger:p,hidden:g,help:m,layout:v}=n,{getPrefixCls:y}=C.useContext(yr),{name:b}=C.useContext(Ip),x=att(c),_=typeof x=="function",S=C.useContext(M_e),{validateTrigger:M}=C.useContext(fy),E=p!==void 0?p:M,T=e!=null,P=y("form",o),A=Qc(P),[N,O,I]=tX(P,A);v4();const D=C.useContext(GE),k=C.useRef(null),[$,B]=ott({}),[F,G]=uy(()=>vae()),z=q=>{const Q=D==null?void 0:D.getKey(q.name);if(G(q.destroy?vae():q,!0),r&&m!==!1&&S){let ie=q.name;if(q.destroy)ie=k.current||ie;else if(Q!==void 0){const[oe,ue]=Q;ie=[oe].concat(ot(ue)),k.current=ie}S(q,ie)}},U=(q,Q)=>{B(ie=>{const oe=Object.assign({},ie),le=[].concat(ot(q.name.slice(0,-1)),ot(Q)).join(wtt);return q.destroy?delete oe[le]:oe[le]=q,oe})},[H,X]=C.useMemo(()=>{const q=ot(F.errors),Q=ot(F.warnings);return Object.values($).forEach(ie=>{q.push.apply(q,ot(ie.errors||[])),Q.push.apply(Q,ot(ie.warnings||[]))}),[q,Q]},[$,F.errors,F.warnings]),V=stt();function W(q,Q,ie){return r&&!g?C.createElement(zSe,{prefixCls:P,hasFeedback:n.hasFeedback,validateStatus:n.validateStatus,meta:F,errors:H,warnings:X,noStyle:!0},q):C.createElement(_tt,Object.assign({key:"row"},n,{className:Be(i,I,A,O),prefixCls:P,fieldId:Q,isRequired:ie,errors:H,warnings:X,meta:F,onSubItemMetaChange:U,layout:v}),q)}if(!T&&!_&&!a)return N(W(x));let K={};return typeof d=="string"?K.label=d:e&&(K.label=String(e)),f&&(K=Object.assign(Object.assign({},K),f)),N(C.createElement(EY,Object.assign({},n,{messageVariables:K,trigger:h,validateTrigger:E,onMetaChange:z}),(q,Q,ie)=>{const oe=U2(e).length&&Q?Q.name:[],ue=kSe(oe,b),le=u!==void 0?u:!!(l!=null&&l.some(pe=>{if(pe&&typeof pe=="object"&&pe.required&&!pe.warningOnly)return!0;if(typeof pe=="function"){const ve=pe(ie);return(ve==null?void 0:ve.required)&&!(ve!=null&&ve.warningOnly)}return!1})),me=Object.assign({},q);let J=null;if(Array.isArray(x)&&T)J=x;else if(!(_&&(!(s||a)||T))){if(!(a&&!_&&!T))if(C.isValidElement(x)){const pe=Object.assign(Object.assign({},x.props),me);if(pe.id||(pe.id=ue),m||H.length>0||X.length>0||n.extra){const Re=[];(m||H.length>0)&&Re.push(`${ue}_help`),n.extra&&Re.push(`${ue}_extra`),pe["aria-describedby"]=Re.join(" ")}H.length>0&&(pe["aria-invalid"]="true"),le&&(pe["aria-required"]="true"),O_(x)&&(pe.ref=V(oe,x)),new Set([].concat(ot(U2(h)),ot(U2(E)))).forEach(Re=>{pe[Re]=function(){for(var Xe,He,ee,Y,ce,_e=arguments.length,Ae=new Array(_e),Ce=0;Ce<_e;Ce++)Ae[Ce]=arguments[Ce];(ee=me[Re])===null||ee===void 0||(Xe=ee).call.apply(Xe,[me].concat(Ae)),(ce=(Y=x.props)[Re])===null||ce===void 0||(He=ce).call.apply(He,[Y].concat(Ae))}});const Me=[pe["aria-required"],pe["aria-invalid"],pe["aria-describedby"]];J=C.createElement(Ett,{control:me,update:x,childProps:Me},Vm(x,pe))}else _&&(s||a)&&!T?J=x(ie):J=x}return W(J,ue,le)}))}const USe=Ctt;USe.useStatus=BSe;var Mtt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const Ttt=n=>{var{prefixCls:e,children:r}=n,i=Mtt(n,["prefixCls","children"]);const{getPrefixCls:a}=C.useContext(yr),o=a("form",e),s=C.useMemo(()=>({prefixCls:o,status:"error"}),[o]);return C.createElement(w_e,Object.assign({},i),(l,c,u)=>C.createElement(MY.Provider,{value:s},r(l.map(d=>Object.assign(Object.assign({},d),{fieldKey:d.key})),c,{errors:u.errors,warnings:u.warnings})))};function Att(){const{form:n}=C.useContext(Ip);return n}const Yd=itt;Yd.Item=USe;Yd.List=Ttt;Yd.ErrorList=LSe;Yd.useForm=$Se;Yd.useFormInstance=Att;Yd.useWatch=C_e;Yd.Provider=T_e;Yd.create=()=>{};var Rtt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},Ptt=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:Rtt}))},Ntt=C.forwardRef(Ptt);const Ott=n=>{const{getPrefixCls:e,direction:r}=C.useContext(yr),{prefixCls:i,className:a}=n,o=e("input-group",i),s=e("input"),[l,c,u]=gSe(s),d=Be(o,u,{[`${o}-lg`]:n.size==="large",[`${o}-sm`]:n.size==="small",[`${o}-compact`]:n.compact,[`${o}-rtl`]:r==="rtl"},c,a),f=C.useContext(Xs),h=C.useMemo(()=>Object.assign(Object.assign({},f),{isFormItemInput:!1}),[f]);return l(C.createElement("span",{className:d,style:n.style,onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,onFocus:n.onFocus,onBlur:n.onBlur},C.createElement(Xs.Provider,{value:h},n.children)))},Itt=n=>{const{componentCls:e,paddingXS:r}=n;return{[e]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:r,[`${e}-input-wrapper`]:{position:"relative",[`${e}-mask-icon`]:{position:"absolute",zIndex:"1",top:"50%",right:"50%",transform:"translate(50%, -50%)",pointerEvents:"none"},[`${e}-mask-input`]:{color:"transparent",caretColor:"var(--ant-color-text)"},[`${e}-mask-input[type=number]::-webkit-inner-spin-button`]:{"-webkit-appearance":"none",margin:0},[`${e}-mask-input[type=number]`]:{"-moz-appearance":"textfield"}},"&-rtl":{direction:"rtl"},[`${e}-input`]:{textAlign:"center",paddingInline:n.paddingXXS},[`&${e}-sm ${e}-input`]:{paddingInline:n.calc(n.paddingXXS).div(2).equal()},[`&${e}-lg ${e}-input`]:{paddingInline:n.paddingXS}}}},Dtt=Ja(["Input","OTP"],n=>{const e=Qr(n,j_(n));return[Itt(e)]},H_);var Ltt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const ktt=C.forwardRef((n,e)=>{const{className:r,value:i,onChange:a,onActiveChange:o,index:s,mask:l}=n,c=Ltt(n,["className","value","onChange","onActiveChange","index","mask"]),{getPrefixCls:u}=C.useContext(yr),d=u("otp"),f=typeof l=="string"?l:i,h=C.useRef(null);C.useImperativeHandle(e,()=>h.current);const p=y=>{a(s,y.target.value)},g=()=>{Gr(()=>{var y;const b=(y=h.current)===null||y===void 0?void 0:y.input;document.activeElement===b&&b&&b.select()})},m=y=>{const{key:b,ctrlKey:x,metaKey:_}=y;b==="ArrowLeft"?o(s-1):b==="ArrowRight"?o(s+1):b==="z"&&(x||_)&&y.preventDefault(),g()},v=y=>{y.key==="Backspace"&&!i&&o(s-1),g()};return C.createElement("span",{className:`${d}-input-wrapper`,role:"presentation"},l&&i!==""&&i!==void 0&&C.createElement("span",{className:`${d}-mask-icon`,"aria-hidden":"true"},f),C.createElement(V4,Object.assign({"aria-label":`OTP Input ${s+1}`,type:l===!0?"password":"text"},c,{ref:h,value:i,onInput:p,onFocus:g,onKeyDown:m,onKeyUp:v,onMouseDown:g,onMouseUp:g,className:Be(r,{[`${d}-mask-input`]:l})})))});var Ftt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};function I3(n){return(n||"").split("")}const $tt=n=>{const{index:e,prefixCls:r,separator:i}=n,a=typeof i=="function"?i(e):i;return a?C.createElement("span",{className:`${r}-separator`},a):null},Btt=C.forwardRef((n,e)=>{const{prefixCls:r,length:i=6,size:a,defaultValue:o,value:s,onChange:l,formatter:c,separator:u,variant:d,disabled:f,status:h,autoFocus:p,mask:g,type:m,onInput:v,inputMode:y}=n,b=Ftt(n,["prefixCls","length","size","defaultValue","value","onChange","formatter","separator","variant","disabled","status","autoFocus","mask","type","onInput","inputMode"]),{getPrefixCls:x,direction:_}=C.useContext(yr),S=x("otp",r),M=Hu(b,{aria:!0,data:!0,attr:!0}),[E,T,P]=Dtt(S),A=af(V=>a??V),N=C.useContext(Xs),O=ky(N.status,h),I=C.useMemo(()=>Object.assign(Object.assign({},N),{status:O,hasFeedback:!1,feedbackIcon:null}),[N,O]),D=C.useRef(null),k=C.useRef({});C.useImperativeHandle(e,()=>({focus:()=>{var V;(V=k.current[0])===null||V===void 0||V.focus()},blur:()=>{var V;for(let W=0;W<i;W+=1)(V=k.current[W])===null||V===void 0||V.blur()},nativeElement:D.current}));const $=V=>c?c(V):V,[B,F]=C.useState(()=>I3($(o||"")));C.useEffect(()=>{s!==void 0&&F(I3(s))},[s]);const G=Lr(V=>{F(V),v&&v(V),l&&V.length===i&&V.every(W=>W)&&V.some((W,K)=>B[K]!==W)&&l(V.join(""))}),z=Lr((V,W)=>{let K=ot(B);for(let Q=0;Q<V;Q+=1)K[Q]||(K[Q]="");W.length<=1?K[V]=W:K=K.slice(0,V).concat(I3(W)),K=K.slice(0,i);for(let Q=K.length-1;Q>=0&&!K[Q];Q-=1)K.pop();const q=$(K.map(Q=>Q||" ").join(""));return K=I3(q).map((Q,ie)=>Q===" "&&!K[ie]?K[ie]:Q),K}),U=(V,W)=>{var K;const q=z(V,W),Q=Math.min(V+W.length,i-1);Q!==V&&q[V]!==void 0&&((K=k.current[Q])===null||K===void 0||K.focus()),G(q)},H=V=>{var W;(W=k.current[V])===null||W===void 0||W.focus()},X={variant:d,disabled:f,status:O,mask:g,type:m,inputMode:y};return E(C.createElement("div",Object.assign({},M,{ref:D,className:Be(S,{[`${S}-sm`]:A==="small",[`${S}-lg`]:A==="large",[`${S}-rtl`]:_==="rtl"},P,T),role:"group"}),C.createElement(Xs.Provider,{value:I},Array.from({length:i}).map((V,W)=>{const K=`otp-${W}`,q=B[W]||"";return C.createElement(C.Fragment,{key:K},C.createElement(ktt,Object.assign({ref:Q=>{k.current[W]=Q},index:W,size:A,htmlSize:1,className:`${S}-input`,onChange:U,value:q,onActiveChange:H,autoFocus:W===0&&p},X)),W<i-1&&C.createElement($tt,{separator:u,index:W,prefixCls:S}))}))))});var ztt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},Utt=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:ztt}))},Vtt=C.forwardRef(Utt),Gtt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const jtt=n=>n?C.createElement(Ntt,null):C.createElement(Vtt,null),Htt={click:"onClick",hover:"onMouseOver"},Wtt=C.forwardRef((n,e)=>{const{disabled:r,action:i="click",visibilityToggle:a=!0,iconRender:o=jtt}=n,s=C.useContext(ju),l=r??s,c=typeof a=="object"&&a.visible!==void 0,[u,d]=C.useState(()=>c?a.visible:!1),f=C.useRef(null);C.useEffect(()=>{c&&d(a.visible)},[c,a]);const h=ESe(f),p=()=>{var A;if(l)return;u&&h();const N=!u;d(N),typeof a=="object"&&((A=a.onVisibleChange)===null||A===void 0||A.call(a,N))},g=A=>{const N=Htt[i]||"",O=o(u),I={[N]:p,className:`${A}-icon`,key:"passwordIcon",onMouseDown:D=>{D.preventDefault()},onMouseUp:D=>{D.preventDefault()}};return C.cloneElement(C.isValidElement(O)?O:C.createElement("span",null,O),I)},{className:m,prefixCls:v,inputPrefixCls:y,size:b}=n,x=Gtt(n,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:_}=C.useContext(yr),S=_("input",y),M=_("input-password",v),E=a&&g(M),T=Be(M,m,{[`${M}-${b}`]:!!b}),P=Object.assign(Object.assign({},Qu(x,["suffix","iconRender","visibilityToggle"])),{type:u?"text":"password",className:T,prefixCls:S,suffix:E});return b&&(P.size=b),C.createElement(V4,Object.assign({ref:hh(e,f)},P))});var qtt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const Ytt=C.forwardRef((n,e)=>{const{prefixCls:r,inputPrefixCls:i,className:a,size:o,suffix:s,enterButton:l=!1,addonAfter:c,loading:u,disabled:d,onSearch:f,onChange:h,onCompositionStart:p,onCompositionEnd:g}=n,m=qtt(n,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:v,direction:y}=C.useContext(yr),b=C.useRef(!1),x=v("input-search",r),_=v("input",i),{compactSize:S}=ov(x,y),M=af(U=>{var H;return(H=o??S)!==null&&H!==void 0?H:U}),E=C.useRef(null),T=U=>{U!=null&&U.target&&U.type==="click"&&f&&f(U.target.value,U,{source:"clear"}),h==null||h(U)},P=U=>{var H;document.activeElement===((H=E.current)===null||H===void 0?void 0:H.input)&&U.preventDefault()},A=U=>{var H,X;f&&f((X=(H=E.current)===null||H===void 0?void 0:H.input)===null||X===void 0?void 0:X.value,U,{source:"input"})},N=U=>{b.current||u||A(U)},O=typeof l=="boolean"?C.createElement(hwe,null):null,I=`${x}-button`;let D;const k=l||{},$=k.type&&k.type.__ANT_BUTTON===!0;$||k.type==="button"?D=Vm(k,Object.assign({onMouseDown:P,onClick:U=>{var H,X;(X=(H=k==null?void 0:k.props)===null||H===void 0?void 0:H.onClick)===null||X===void 0||X.call(H,U),A(U)},key:"enterButton"},$?{className:I,size:M}:{})):D=C.createElement(ms,{className:I,type:l?"primary":void 0,size:M,disabled:d,key:"enterButton",onMouseDown:P,onClick:A,loading:u,icon:O},l),c&&(D=[D,Vm(c,{key:"addonAfter"})]);const B=Be(x,{[`${x}-rtl`]:y==="rtl",[`${x}-${M}`]:!!M,[`${x}-with-button`]:!!l},a),F=Object.assign(Object.assign({},m),{className:B,prefixCls:_,type:"search"}),G=U=>{b.current=!0,p==null||p(U)},z=U=>{b.current=!1,g==null||g(U)};return C.createElement(V4,Object.assign({ref:hh(E,e),onPressEnter:N},F,{size:M,onCompositionStart:G,onCompositionEnd:z,addonAfter:D,suffix:s,onChange:T,disabled:d}))});var Xtt=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,Ktt=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],Z5={},gc;function Ztt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=n.getAttribute("id")||n.getAttribute("data-reactid")||n.getAttribute("name");if(e&&Z5[r])return Z5[r];var i=window.getComputedStyle(n),a=i.getPropertyValue("box-sizing")||i.getPropertyValue("-moz-box-sizing")||i.getPropertyValue("-webkit-box-sizing"),o=parseFloat(i.getPropertyValue("padding-bottom"))+parseFloat(i.getPropertyValue("padding-top")),s=parseFloat(i.getPropertyValue("border-bottom-width"))+parseFloat(i.getPropertyValue("border-top-width")),l=Ktt.map(function(u){return"".concat(u,":").concat(i.getPropertyValue(u))}).join(";"),c={sizingStyle:l,paddingSize:o,borderSize:s,boxSizing:a};return e&&r&&(Z5[r]=c),c}function Qtt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;gc||(gc=document.createElement("textarea"),gc.setAttribute("tab-index","-1"),gc.setAttribute("aria-hidden","true"),gc.setAttribute("name","hiddenTextarea"),document.body.appendChild(gc)),n.getAttribute("wrap")?gc.setAttribute("wrap",n.getAttribute("wrap")):gc.removeAttribute("wrap");var a=Ztt(n,e),o=a.paddingSize,s=a.borderSize,l=a.boxSizing,c=a.sizingStyle;gc.setAttribute("style","".concat(c,";").concat(Xtt)),gc.value=n.value||n.placeholder||"";var u=void 0,d=void 0,f,h=gc.scrollHeight;if(l==="border-box"?h+=s:l==="content-box"&&(h-=o),r!==null||i!==null){gc.value=" ";var p=gc.scrollHeight-o;r!==null&&(u=p*r,l==="border-box"&&(u=u+o+s),h=Math.max(u,h)),i!==null&&(d=p*i,l==="border-box"&&(d=d+o+s),f=h>d?"":"hidden",h=Math.min(d,h))}var g={height:h,overflowY:f,resize:"none"};return u&&(g.minHeight=u),d&&(g.maxHeight=d),g}var Jtt=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],Q5=0,J5=1,eF=2,ent=C.forwardRef(function(n,e){var r=n,i=r.prefixCls,a=r.defaultValue,o=r.value,s=r.autoSize,l=r.onResize,c=r.className,u=r.style,d=r.disabled,f=r.onChange;r.onInternalAutoSize;var h=ir(r,Jtt),p=es(a,{value:o,postState:function(V){return V??""}}),g=fe(p,2),m=g[0],v=g[1],y=function(V){v(V.target.value),f==null||f(V)},b=C.useRef();C.useImperativeHandle(e,function(){return{textArea:b.current}});var x=C.useMemo(function(){return s&&vn(s)==="object"?[s.minRows,s.maxRows]:[]},[s]),_=fe(x,2),S=_[0],M=_[1],E=!!s,T=function(){try{if(document.activeElement===b.current){var V=b.current,W=V.selectionStart,K=V.selectionEnd,q=V.scrollTop;b.current.setSelectionRange(W,K),b.current.scrollTop=q}}catch{}},P=C.useState(eF),A=fe(P,2),N=A[0],O=A[1],I=C.useState(),D=fe(I,2),k=D[0],$=D[1],B=function(){O(Q5)};Dr(function(){E&&B()},[o,S,M,E]),Dr(function(){if(N===Q5)O(J5);else if(N===J5){var X=Qtt(b.current,!1,S,M);O(eF),$(X)}else T()},[N]);var F=C.useRef(),G=function(){Gr.cancel(F.current)},z=function(V){N===eF&&(l==null||l(V),s&&(G(),F.current=Gr(function(){B()})))};C.useEffect(function(){return G},[]);var U=E?k:null,H=se(se({},u),U);return(N===Q5||N===J5)&&(H.overflowY="hidden",H.overflowX="hidden"),C.createElement(ph,{onResize:z,disabled:!(s||l)},C.createElement("textarea",Mt({},h,{ref:b,style:H,className:Be(i,c,re({},"".concat(i,"-disabled"),d)),disabled:d,value:m,onChange:y})))}),tnt=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],nnt=Je.forwardRef(function(n,e){var r,i=n.defaultValue,a=n.value,o=n.onFocus,s=n.onBlur,l=n.onChange,c=n.allowClear,u=n.maxLength,d=n.onCompositionStart,f=n.onCompositionEnd,h=n.suffix,p=n.prefixCls,g=p===void 0?"rc-textarea":p,m=n.showCount,v=n.count,y=n.className,b=n.style,x=n.disabled,_=n.hidden,S=n.classNames,M=n.styles,E=n.onResize,T=n.onClear,P=n.onPressEnter,A=n.readOnly,N=n.autoSize,O=n.onKeyDown,I=ir(n,tnt),D=es(i,{value:a,defaultValue:i}),k=fe(D,2),$=k[0],B=k[1],F=$==null?"":String($),G=Je.useState(!1),z=fe(G,2),U=z[0],H=z[1],X=Je.useRef(!1),V=Je.useState(null),W=fe(V,2),K=W[0],q=W[1],Q=C.useRef(null),ie=C.useRef(null),oe=function(){var Ie;return(Ie=ie.current)===null||Ie===void 0?void 0:Ie.textArea},ue=function(){oe().focus()};C.useImperativeHandle(e,function(){var Ze;return{resizableTextArea:ie.current,focus:ue,blur:function(){oe().blur()},nativeElement:((Ze=Q.current)===null||Ze===void 0?void 0:Ze.nativeElement)||oe()}}),C.useEffect(function(){H(function(Ze){return!x&&Ze})},[x]);var le=Je.useState(null),me=fe(le,2),J=me[0],pe=me[1];Je.useEffect(function(){if(J){var Ze;(Ze=oe()).setSelectionRange.apply(Ze,ot(J))}},[J]);var ve=xSe(v,m),Me=(r=ve.max)!==null&&r!==void 0?r:u,Re=Number(Me)>0,Xe=ve.strategy(F),He=!!Me&&Xe>Me,ee=function(Ie,De){var bt=De;!X.current&&ve.exceedFormatter&&ve.max&&ve.strategy(De)>ve.max&&(bt=ve.exceedFormatter(De,{max:ve.max}),De!==bt&&pe([oe().selectionStart||0,oe().selectionEnd||0])),B(bt),UN(Ie.currentTarget,Ie,l,bt)},Y=function(Ie){X.current=!0,d==null||d(Ie)},ce=function(Ie){X.current=!1,ee(Ie,Ie.currentTarget.value),f==null||f(Ie)},_e=function(Ie){ee(Ie,Ie.target.value)},Ae=function(Ie){Ie.key==="Enter"&&P&&P(Ie),O==null||O(Ie)},Ce=function(Ie){H(!0),o==null||o(Ie)},et=function(Ie){H(!1),s==null||s(Ie)},Ve=function(Ie){B(""),ue(),UN(oe(),Ie,l)},qe=h,dt;ve.show&&(ve.showFormatter?dt=ve.showFormatter({value:F,count:Xe,maxLength:Me}):dt="".concat(Xe).concat(Re?" / ".concat(Me):""),qe=Je.createElement(Je.Fragment,null,qe,Je.createElement("span",{className:Be("".concat(g,"-data-count"),S==null?void 0:S.count),style:M==null?void 0:M.count},dt)));var Ge=function(Ie){var De;E==null||E(Ie),(De=oe())!==null&&De!==void 0&&De.style.height&&q(!0)},We=!N&&!m&&!c;return Je.createElement(eX,{ref:Q,value:F,allowClear:c,handleReset:Ve,suffix:qe,prefixCls:g,classNames:se(se({},S),{},{affixWrapper:Be(S==null?void 0:S.affixWrapper,re(re({},"".concat(g,"-show-count"),m),"".concat(g,"-textarea-allow-clear"),c))}),disabled:x,focused:U,className:Be(y,He&&"".concat(g,"-out-of-range")),style:se(se({},b),K&&!We?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof dt=="string"?dt:void 0}},hidden:_,readOnly:A,onClear:T},Je.createElement(ent,Mt({},I,{autoSize:N,maxLength:u,onKeyDown:Ae,onChange:_e,onFocus:Ce,onBlur:et,onCompositionStart:Y,onCompositionEnd:ce,className:Be(S==null?void 0:S.textarea),style:se(se({},M==null?void 0:M.textarea),{},{resize:b==null?void 0:b.resize}),disabled:x,prefixCls:g,onResize:Ge,ref:ie,readOnly:A})))});const rnt=n=>{const{componentCls:e,paddingLG:r}=n,i=`${e}-textarea`;return{[`textarea${e}`]:{maxWidth:"100%",height:"auto",minHeight:n.controlHeight,lineHeight:n.lineHeight,verticalAlign:"bottom",transition:`all ${n.motionDurationSlow}`,resize:"vertical",[`&${e}-mouse-active`]:{transition:`all ${n.motionDurationSlow}, height 0s, width 0s`}},[`${e}-textarea-affix-wrapper-resize-dirty`]:{width:"auto"},[i]:{position:"relative","&-show-count":{[`${e}-data-count`]:{position:"absolute",bottom:n.calc(n.fontSize).mul(n.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:n.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${e},
        &-affix-wrapper${i}-has-feedback ${e}
      `]:{paddingInlineEnd:r},[`&-affix-wrapper${e}-affix-wrapper`]:{padding:0,[`> textarea${e}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent",minHeight:n.calc(n.controlHeight).sub(n.calc(n.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:"none !important"}},[`${e}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${e}-clear-icon`]:{position:"absolute",insetInlineEnd:n.paddingInline,insetBlockStart:n.paddingXS},[`${i}-suffix`]:{position:"absolute",top:0,insetInlineEnd:n.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${e}-affix-wrapper-rtl`]:{[`${e}-suffix`]:{[`${e}-data-count`]:{direction:"ltr",insetInlineStart:0}}},[`&-affix-wrapper${e}-affix-wrapper-sm`]:{[`${e}-suffix`]:{[`${e}-clear-icon`]:{insetInlineEnd:n.paddingInlineSM}}}}}},int=Ja(["Input","TextArea"],n=>{const e=Qr(n,j_(n));return[rnt(e)]},H_,{resetFont:!1});var ant=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const ont=C.forwardRef((n,e)=>{var r;const{prefixCls:i,bordered:a=!0,size:o,disabled:s,status:l,allowClear:c,classNames:u,rootClassName:d,className:f,style:h,styles:p,variant:g,showCount:m,onMouseDown:v,onResize:y}=n,b=ant(n,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant","showCount","onMouseDown","onResize"]),{getPrefixCls:x,direction:_,allowClear:S,autoComplete:M,className:E,style:T,classNames:P,styles:A}=Zu("textArea"),N=C.useContext(ju),O=s??N,{status:I,hasFeedback:D,feedbackIcon:k}=C.useContext(Xs),$=ky(I,l),B=C.useRef(null);C.useImperativeHandle(e,()=>{var ve;return{resizableTextArea:(ve=B.current)===null||ve===void 0?void 0:ve.resizableTextArea,focus:Me=>{var Re,Xe;JY((Xe=(Re=B.current)===null||Re===void 0?void 0:Re.resizableTextArea)===null||Xe===void 0?void 0:Xe.textArea,Me)},blur:()=>{var Me;return(Me=B.current)===null||Me===void 0?void 0:Me.blur()}}});const F=x("input",i),G=Qc(F),[z,U,H]=pSe(F,d),[X]=int(F,G),{compactSize:V,compactItemClassnames:W}=ov(F,_),K=af(ve=>{var Me;return(Me=o??V)!==null&&Me!==void 0?Me:ve}),[q,Q]=U_("textArea",g,a),ie=SSe(c??S),[oe,ue]=C.useState(!1),[le,me]=C.useState(!1),J=ve=>{ue(!0),v==null||v(ve);const Me=()=>{ue(!1),document.removeEventListener("mouseup",Me)};document.addEventListener("mouseup",Me)},pe=ve=>{var Me,Re;if(y==null||y(ve),oe&&typeof getComputedStyle=="function"){const Xe=(Re=(Me=B.current)===null||Me===void 0?void 0:Me.nativeElement)===null||Re===void 0?void 0:Re.querySelector("textarea");Xe&&getComputedStyle(Xe).resize==="both"&&me(!0)}};return z(X(C.createElement(nnt,Object.assign({autoComplete:M},b,{style:Object.assign(Object.assign({},T),h),styles:Object.assign(Object.assign({},A),p),disabled:O,allowClear:ie,className:Be(H,G,f,d,W,E,le&&`${F}-textarea-affix-wrapper-resize-dirty`),classNames:Object.assign(Object.assign(Object.assign({},u),P),{textarea:Be({[`${F}-sm`]:K==="small",[`${F}-lg`]:K==="large"},U,u==null?void 0:u.textarea,P.textarea,oe&&`${F}-mouse-active`),variant:Be({[`${F}-${q}`]:Q},jm(F,$)),affixWrapper:Be(`${F}-textarea-affix-wrapper`,{[`${F}-affix-wrapper-rtl`]:_==="rtl",[`${F}-affix-wrapper-sm`]:K==="small",[`${F}-affix-wrapper-lg`]:K==="large",[`${F}-textarea-show-count`]:m||((r=n.count)===null||r===void 0?void 0:r.show)},U)}),prefixCls:F,suffix:D&&C.createElement("span",{className:`${F}-textarea-suffix`},k),showCount:m,ref:B,onResize:pe,onMouseDown:J}))))}),py=V4;py.Group=Ott;py.Search=Ytt;py.TextArea=ont;py.Password=Wtt;py.OTP=Btt;const GN=100,VSe=GN/5,GSe=GN/2-VSe/2,tF=GSe*2*Math.PI,yae=50,bae=n=>{const{dotClassName:e,style:r,hasCircleCls:i}=n;return C.createElement("circle",{className:Be(`${e}-circle`,{[`${e}-circle-bg`]:i}),r:GSe,cx:yae,cy:yae,strokeWidth:VSe,style:r})},snt=n=>{let{percent:e,prefixCls:r}=n;const i=`${r}-dot`,a=`${i}-holder`,o=`${a}-hidden`,[s,l]=C.useState(!1);Dr(()=>{e!==0&&l(!0)},[e!==0]);const c=Math.max(Math.min(e,100),0);if(!s)return null;const u={strokeDashoffset:`${tF/4}`,strokeDasharray:`${tF*c/100} ${tF*(100-c)/100}`};return C.createElement("span",{className:Be(a,`${i}-progress`,c<=0&&o)},C.createElement("svg",{viewBox:`0 0 ${GN} ${GN}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":c},C.createElement(bae,{dotClassName:i,hasCircleCls:!0}),C.createElement(bae,{dotClassName:i,style:u})))};function lnt(n){const{prefixCls:e,percent:r=0}=n,i=`${e}-dot`,a=`${i}-holder`,o=`${a}-hidden`;return C.createElement(C.Fragment,null,C.createElement("span",{className:Be(a,r>0&&o)},C.createElement("span",{className:Be(i,`${e}-dot-spin`)},[1,2,3,4].map(s=>C.createElement("i",{className:`${e}-dot-item`,key:s})))),C.createElement(snt,{prefixCls:e,percent:r}))}function cnt(n){const{prefixCls:e,indicator:r,percent:i}=n,a=`${e}-dot`;return r&&C.isValidElement(r)?Vm(r,{className:Be(r.props.className,a),percent:i}):C.createElement(lnt,{prefixCls:e,percent:i})}const unt=new qr("antSpinMove",{to:{opacity:1}}),dnt=new qr("antRotate",{to:{transform:"rotate(405deg)"}}),fnt=n=>{const{componentCls:e,calc:r}=n;return{[e]:Object.assign(Object.assign({},ts(n)),{position:"absolute",display:"none",color:n.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${n.motionDurationSlow} ${n.motionEaseInOutCirc}`,"&-spinning":{position:"relative",display:"inline-block",opacity:1},[`${e}-text`]:{fontSize:n.fontSize,paddingTop:r(r(n.dotSize).sub(n.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:n.colorBgMask,zIndex:n.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${n.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[e]:{[`${e}-dot-holder`]:{color:n.colorWhite},[`${e}-text`]:{color:n.colorTextLightSolid}}},"&-nested-loading":{position:"relative",[`> div > ${e}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:n.contentHeight,[`${e}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:r(n.dotSize).mul(-1).div(2).equal()},[`${e}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${n.colorBgContainer}`},[`&${e}-show-text ${e}-dot`]:{marginTop:r(n.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${e}-dot`]:{margin:r(n.dotSizeSM).mul(-1).div(2).equal()},[`${e}-text`]:{paddingTop:r(r(n.dotSizeSM).sub(n.fontSize)).div(2).add(2).equal()},[`&${e}-show-text ${e}-dot`]:{marginTop:r(n.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${e}-dot`]:{margin:r(n.dotSizeLG).mul(-1).div(2).equal()},[`${e}-text`]:{paddingTop:r(r(n.dotSizeLG).sub(n.fontSize)).div(2).add(2).equal()},[`&${e}-show-text ${e}-dot`]:{marginTop:r(n.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${e}-container`]:{position:"relative",transition:`opacity ${n.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:n.colorBgContainer,opacity:0,transition:`all ${n.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${e}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:n.spinDotDefault},[`${e}-dot-holder`]:{width:"1em",height:"1em",fontSize:n.dotSize,display:"inline-block",transition:`transform ${n.motionDurationSlow} ease, opacity ${n.motionDurationSlow} ease`,transformOrigin:"50% 50%",lineHeight:1,color:n.colorPrimary,"&-hidden":{transform:"scale(0.3)",opacity:0}},[`${e}-dot-progress`]:{position:"absolute",inset:0},[`${e}-dot`]:{position:"relative",display:"inline-block",fontSize:n.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:r(n.dotSize).sub(r(n.marginXXS).div(2)).div(2).equal(),height:r(n.dotSize).sub(r(n.marginXXS).div(2)).div(2).equal(),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:unt,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:dnt,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map(i=>`${i} ${n.motionDurationSlow} ease`).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:n.colorFillSecondary}},[`&-sm ${e}-dot`]:{"&, &-holder":{fontSize:n.dotSizeSM}},[`&-sm ${e}-dot-holder`]:{i:{width:r(r(n.dotSizeSM).sub(r(n.marginXXS).div(2))).div(2).equal(),height:r(r(n.dotSizeSM).sub(r(n.marginXXS).div(2))).div(2).equal()}},[`&-lg ${e}-dot`]:{"&, &-holder":{fontSize:n.dotSizeLG}},[`&-lg ${e}-dot-holder`]:{i:{width:r(r(n.dotSizeLG).sub(n.marginXXS)).div(2).equal(),height:r(r(n.dotSizeLG).sub(n.marginXXS)).div(2).equal()}},[`&${e}-show-text ${e}-text`]:{display:"block"}})}},hnt=n=>{const{controlHeightLG:e,controlHeight:r}=n;return{contentHeight:400,dotSize:e/2,dotSizeSM:e*.35,dotSizeLG:r}},pnt=Ja("Spin",n=>{const e=Qr(n,{spinDotDefault:n.colorTextDescription});return[fnt(e)]},hnt),gnt=200,xae=[[30,.05],[70,.03],[96,.01]];function mnt(n,e){const[r,i]=C.useState(0),a=C.useRef(null),o=e==="auto";return C.useEffect(()=>(o&&n&&(i(0),a.current=setInterval(()=>{i(s=>{const l=100-s;for(let c=0;c<xae.length;c+=1){const[u,d]=xae[c];if(s<=u)return s+l*d}return s})},gnt)),()=>{clearInterval(a.current)}),[o,n]),o?r:e}var vnt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};let jSe;function ynt(n,e){return!!n&&!!e&&!Number.isNaN(Number(e))}const nX=n=>{var e;const{prefixCls:r,spinning:i=!0,delay:a=0,className:o,rootClassName:s,size:l="default",tip:c,wrapperClassName:u,style:d,children:f,fullscreen:h=!1,indicator:p,percent:g}=n,m=vnt(n,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen","indicator","percent"]),{getPrefixCls:v,direction:y,className:b,style:x,indicator:_}=Zu("spin"),S=v("spin",r),[M,E,T]=pnt(S),[P,A]=C.useState(()=>i&&!ynt(i,a)),N=mnt(P,g);C.useEffect(()=>{if(i){const F=RJe(a,()=>{A(!0)});return F(),()=>{var G;(G=F==null?void 0:F.cancel)===null||G===void 0||G.call(F)}}A(!1)},[a,i]);const O=C.useMemo(()=>typeof f<"u"&&!h,[f,h]),I=Be(S,b,{[`${S}-sm`]:l==="small",[`${S}-lg`]:l==="large",[`${S}-spinning`]:P,[`${S}-show-text`]:!!c,[`${S}-rtl`]:y==="rtl"},o,!h&&s,E,T),D=Be(`${S}-container`,{[`${S}-blur`]:P}),k=(e=p??_)!==null&&e!==void 0?e:jSe,$=Object.assign(Object.assign({},x),d),B=C.createElement("div",Object.assign({},m,{style:$,className:I,"aria-live":"polite","aria-busy":P}),C.createElement(cnt,{prefixCls:S,indicator:k,percent:N}),c&&(O||h)?C.createElement("div",{className:`${S}-text`},c):null);return M(O?C.createElement("div",Object.assign({},m,{className:Be(`${S}-nested-loading`,u,E,T)}),P&&C.createElement("div",{key:"loading"},B),C.createElement("div",{className:D,key:"container"},f)):h?C.createElement("div",{className:Be(`${S}-fullscreen`,{[`${S}-fullscreen-show`]:P},s,E,T)},B):B)};nX.setDefaultIndicator=n=>{jSe=n};let Su=null,R0=n=>n(),WE=[],qE={};function _ae(){const{getContainer:n,duration:e,rtl:r,maxCount:i,top:a}=qE,o=(n==null?void 0:n())||document.body;return{getContainer:()=>o,duration:e,rtl:r,maxCount:i,top:a}}const bnt=Je.forwardRef((n,e)=>{const{messageConfig:r,sync:i}=n,{getPrefixCls:a}=C.useContext(yr),o=qE.prefixCls||a("message"),s=C.useContext(fXe),[l,c]=r_e(Object.assign(Object.assign(Object.assign({},r),{prefixCls:o}),s.message));return Je.useImperativeHandle(e,()=>{const u=Object.assign({},l);return Object.keys(u).forEach(d=>{u[d]=function(){return i(),l[d].apply(l,arguments)}}),{instance:u,sync:i}}),c}),xnt=Je.forwardRef((n,e)=>{const[r,i]=Je.useState(_ae),a=()=>{i(_ae)};Je.useEffect(a,[]);const o=jxe(),s=o.getRootPrefixCls(),l=o.getIconPrefixCls(),c=o.getTheme(),u=Je.createElement(bnt,{ref:e,sync:a,messageConfig:r});return Je.createElement(rf,{prefixCls:s,iconPrefixCls:l,theme:c},o.holderRender?o.holderRender(u):u)});function G4(){if(!Su){const n=document.createDocumentFragment(),e={fragment:n};Su=e,R0(()=>{hY()(Je.createElement(xnt,{ref:i=>{const{instance:a,sync:o}=i||{};Promise.resolve().then(()=>{!e.instance&&a&&(e.instance=a,e.sync=o,G4())})}}),n)});return}Su.instance&&(WE.forEach(n=>{const{type:e,skipped:r}=n;if(!r)switch(e){case"open":{R0(()=>{const i=Su.instance.open(Object.assign(Object.assign({},qE),n.config));i==null||i.then(n.resolve),n.setCloseFn(i)});break}case"destroy":R0(()=>{Su==null||Su.instance.destroy(n.key)});break;default:R0(()=>{var i;const a=(i=Su.instance)[e].apply(i,ot(n.args));a==null||a.then(n.resolve),n.setCloseFn(a)})}}),WE=[])}function _nt(n){qE=Object.assign(Object.assign({},qE),n),R0(()=>{var e;(e=Su==null?void 0:Su.sync)===null||e===void 0||e.call(Su)})}function wnt(n){const e=fY(r=>{let i;const a={type:"open",config:n,resolve:r,setCloseFn:o=>{i=o}};return WE.push(a),()=>{i?R0(()=>{i()}):a.skipped=!0}});return G4(),e}function Snt(n,e){const r=fY(i=>{let a;const o={type:n,args:e,resolve:i,setCloseFn:s=>{a=s}};return WE.push(o),()=>{a?R0(()=>{a()}):o.skipped=!0}});return G4(),r}const Ent=n=>{WE.push({type:"destroy",key:n}),G4()},Cnt=["success","info","warning","error","loading"],Mnt={open:wnt,destroy:Ent,config:_nt,useMessage:vHe,_InternalPanelDoNotUseOrYouWillBeFired:cHe},lp=Mnt;Cnt.forEach(n=>{lp[n]=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return Snt(n,r)}});var Tnt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const Ant=n=>{const{prefixCls:e,className:r,closeIcon:i,closable:a,type:o,title:s,children:l,footer:c}=n,u=Tnt(n,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:d}=C.useContext(yr),f=d(),h=e||d("modal"),p=Qc(f),[g,m,v]=D_e(h,p),y=`${h}-confirm`;let b={};return o?b={closable:a??!1,title:"",footer:"",children:C.createElement(k_e,Object.assign({},n,{prefixCls:h,confirmPrefixCls:y,rootPrefixCls:f,content:l}))}:b={closable:a??!0,title:s,footer:c!==null&&C.createElement(P_e,Object.assign({},n)),children:l},g(C.createElement(m_e,Object.assign({prefixCls:h,className:Be(m,`${h}-pure-panel`,o&&y,o&&`${y}-${o}`,r,v,p)},u,{closeIcon:R_e(h,i),closable:a},b)))},Rnt=H_e(Ant);function HSe(n){return mM(z_e(n))}const Ju=L_e;Ju.useModal=dXe;Ju.info=function(e){return mM(U_e(e))};Ju.success=function(e){return mM(V_e(e))};Ju.error=function(e){return mM(G_e(e))};Ju.warning=HSe;Ju.warn=HSe;Ju.confirm=function(e){return mM(j_e(e))};Ju.destroyAll=function(){for(;T0.length;){const e=T0.pop();e&&e()}};Ju.config=oXe;Ju._InternalPanelDoNotUseOrYouWillBeFired=Rnt;function c0(n,e){var r=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=h4(n))||e){r&&(n=r);var i=0,a=function(){};return{s:a,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,s=!0,l=!1;return{s:function(){r=r.call(n)},n:function(){var u=r.next();return s=u.done,u},e:function(u){l=!0,o=u},f:function(){try{s||r.return==null||r.return()}finally{if(l)throw o}}}}var Pnt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},Nnt=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:Pnt}))},Ont=C.forwardRef(Nnt),Int={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},Dnt=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:Int}))},Lnt=C.forwardRef(Dnt),knt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"}}]},name:"undo",theme:"outlined"},Fnt=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:knt}))},$nt=C.forwardRef(Fnt),Bnt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M955.7 856l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zM480 416c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v184c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V416zm32 352a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"warning",theme:"filled"},znt=function(e,r){return C.createElement(Na,Mt({},e,{ref:r,icon:Bnt}))},Unt=C.forwardRef(znt);const Vnt=()=>C.createElement("svg",{width:"252",height:"294"},C.createElement("title",null,"No Found"),C.createElement("defs",null,C.createElement("path",{d:"M0 .387h251.772v251.772H0z"})),C.createElement("g",{fill:"none",fillRule:"evenodd"},C.createElement("g",{transform:"translate(0 .012)"},C.createElement("mask",{fill:"#fff"}),C.createElement("path",{d:"M0 127.32v-2.095C0 56.279 55.892.387 124.838.387h2.096c68.946 0 124.838 55.892 124.838 124.838v2.096c0 68.946-55.892 124.838-124.838 124.838h-2.096C55.892 252.16 0 196.267 0 127.321",fill:"#E4EBF7",mask:"url(#b)"})),C.createElement("path",{d:"M39.755 130.84a8.276 8.276 0 1 1-16.468-1.66 8.276 8.276 0 0 1 16.468 1.66",fill:"#FFF"}),C.createElement("path",{d:"M36.975 134.297l10.482 5.943M48.373 146.508l-12.648 10.788",stroke:"#FFF",strokeWidth:"2"}),C.createElement("path",{d:"M39.875 159.352a5.667 5.667 0 1 1-11.277-1.136 5.667 5.667 0 0 1 11.277 1.136M57.588 143.247a5.708 5.708 0 1 1-11.358-1.145 5.708 5.708 0 0 1 11.358 1.145M99.018 26.875l29.82-.014a4.587 4.587 0 1 0-.003-9.175l-29.82.013a4.587 4.587 0 1 0 .003 9.176M110.424 45.211l29.82-.013a4.588 4.588 0 0 0-.004-9.175l-29.82.013a4.587 4.587 0 1 0 .004 9.175",fill:"#FFF"}),C.createElement("path",{d:"M112.798 26.861v-.002l15.784-.006a4.588 4.588 0 1 0 .003 9.175l-15.783.007v-.002a4.586 4.586 0 0 0-.004-9.172M184.523 135.668c-.553 5.485-5.447 9.483-10.931 8.93-5.485-.553-9.483-5.448-8.93-10.932.552-5.485 5.447-9.483 10.932-8.93 5.485.553 9.483 5.447 8.93 10.932",fill:"#FFF"}),C.createElement("path",{d:"M179.26 141.75l12.64 7.167M193.006 156.477l-15.255 13.011",stroke:"#FFF",strokeWidth:"2"}),C.createElement("path",{d:"M184.668 170.057a6.835 6.835 0 1 1-13.6-1.372 6.835 6.835 0 0 1 13.6 1.372M203.34 153.325a6.885 6.885 0 1 1-13.7-1.382 6.885 6.885 0 0 1 13.7 1.382",fill:"#FFF"}),C.createElement("path",{d:"M151.931 192.324a2.222 2.222 0 1 1-4.444 0 2.222 2.222 0 0 1 4.444 0zM225.27 116.056a2.222 2.222 0 1 1-4.445 0 2.222 2.222 0 0 1 4.444 0zM216.38 151.08a2.223 2.223 0 1 1-4.446-.001 2.223 2.223 0 0 1 4.446 0zM176.917 107.636a2.223 2.223 0 1 1-4.445 0 2.223 2.223 0 0 1 4.445 0zM195.291 92.165a2.223 2.223 0 1 1-4.445 0 2.223 2.223 0 0 1 4.445 0zM202.058 180.711a2.223 2.223 0 1 1-4.446 0 2.223 2.223 0 0 1 4.446 0z",stroke:"#FFF",strokeWidth:"2"}),C.createElement("path",{stroke:"#FFF",strokeWidth:"2",d:"M214.404 153.302l-1.912 20.184-10.928 5.99M173.661 174.792l-6.356 9.814h-11.36l-4.508 6.484M174.941 125.168v-15.804M220.824 117.25l-12.84 7.901-15.31-7.902V94.39"}),C.createElement("path",{d:"M166.588 65.936h-3.951a4.756 4.756 0 0 1-4.743-4.742 4.756 4.756 0 0 1 4.743-4.743h3.951a4.756 4.756 0 0 1 4.743 4.743 4.756 4.756 0 0 1-4.743 4.742",fill:"#FFF"}),C.createElement("path",{d:"M174.823 30.03c0-16.281 13.198-29.48 29.48-29.48 16.28 0 29.48 13.199 29.48 29.48 0 16.28-13.2 29.48-29.48 29.48-16.282 0-29.48-13.2-29.48-29.48",fill:"#1677ff"}),C.createElement("path",{d:"M205.952 38.387c.5.5.785 1.142.785 1.928s-.286 1.465-.785 1.964c-.572.5-1.214.75-2 .75-.785 0-1.429-.285-1.929-.785-.572-.5-.82-1.143-.82-1.929s.248-1.428.82-1.928c.5-.5 1.144-.75 1.93-.75.785 0 1.462.25 1.999.75m4.285-19.463c1.428 1.249 2.143 2.963 2.143 5.142 0 1.712-.427 3.13-1.219 4.25-.067.096-.137.18-.218.265-.416.429-1.41 1.346-2.956 2.699a5.07 5.07 0 0 0-1.428 1.75 5.207 5.207 0 0 0-.536 2.357v.5h-4.107v-.5c0-1.357.215-2.536.714-3.5.464-.964 1.857-2.464 4.178-4.536l.43-.5c.643-.785.964-1.643.964-2.535 0-1.18-.358-2.108-1-2.785-.678-.68-1.643-1.001-2.858-1.001-1.536 0-2.642.464-3.357 1.43-.37.5-.621 1.135-.76 1.904a1.999 1.999 0 0 1-1.971 1.63h-.004c-1.277 0-2.257-1.183-1.98-2.43.337-1.518 1.02-2.78 2.073-3.784 1.536-1.5 3.607-2.25 6.25-2.25 2.32 0 4.214.607 5.642 1.894",fill:"#FFF"}),C.createElement("path",{d:"M52.04 76.131s21.81 5.36 27.307 15.945c5.575 10.74-6.352 9.26-15.73 4.935-10.86-5.008-24.7-11.822-11.577-20.88",fill:"#FFB594"}),C.createElement("path",{d:"M90.483 67.504l-.449 2.893c-.753.49-4.748-2.663-4.748-2.663l-1.645.748-1.346-5.684s6.815-4.589 8.917-5.018c2.452-.501 9.884.94 10.7 2.278 0 0 1.32.486-2.227.69-3.548.203-5.043.447-6.79 3.132-1.747 2.686-2.412 3.624-2.412 3.624",fill:"#FFC6A0"}),C.createElement("path",{d:"M128.055 111.367c-2.627-7.724-6.15-13.18-8.917-15.478-3.5-2.906-9.34-2.225-11.366-4.187-1.27-1.231-3.215-1.197-3.215-1.197s-14.98-3.158-16.828-3.479c-2.37-.41-2.124-.714-6.054-1.405-1.57-1.907-2.917-1.122-2.917-1.122l-7.11-1.383c-.853-1.472-2.423-1.023-2.423-1.023l-2.468-.897c-1.645 9.976-7.74 13.796-7.74 13.796 1.795 1.122 15.703 8.3 15.703 8.3l5.107 37.11s-3.321 5.694 1.346 9.109c0 0 19.883-3.743 34.921-.329 0 0 3.047-2.546.972-8.806.523-3.01 1.394-8.263 1.736-11.622.385.772 2.019 1.918 3.14 3.477 0 0 9.407-7.365 11.052-14.012-.832-.723-1.598-1.585-2.267-2.453-.567-.736-.358-2.056-.765-2.717-.669-1.084-1.804-1.378-1.907-1.682",fill:"#FFF"}),C.createElement("path",{d:"M101.09 289.998s4.295 2.041 7.354 1.021c2.821-.94 4.53.668 7.08 1.178 2.55.51 6.874 1.1 11.686-1.26-.103-5.51-6.889-3.98-11.96-6.713-2.563-1.38-3.784-4.722-3.598-8.799h-9.402s-1.392 10.52-1.16 14.573",fill:"#CBD1D1"}),C.createElement("path",{d:"M101.067 289.826s2.428 1.271 6.759.653c3.058-.437 3.712.481 7.423 1.031 3.712.55 10.724-.069 11.823-.894.413 1.1-.343 2.063-.343 2.063s-1.512.603-4.812.824c-2.03.136-5.8.291-7.607-.503-1.787-1.375-5.247-1.903-5.728-.241-3.918.95-7.355-.286-7.355-.286l-.16-2.647z",fill:"#2B0849"}),C.createElement("path",{d:"M108.341 276.044h3.094s-.103 6.702 4.536 8.558c-4.64.618-8.558-2.303-7.63-8.558",fill:"#A4AABA"}),C.createElement("path",{d:"M57.542 272.401s-2.107 7.416-4.485 12.306c-1.798 3.695-4.225 7.492 5.465 7.492 6.648 0 8.953-.48 7.423-6.599-1.53-6.12.266-13.199.266-13.199h-8.669z",fill:"#CBD1D1"}),C.createElement("path",{d:"M51.476 289.793s2.097 1.169 6.633 1.169c6.083 0 8.249-1.65 8.249-1.65s.602 1.114-.619 2.165c-.993.855-3.597 1.591-7.39 1.546-4.145-.048-5.832-.566-6.736-1.168-.825-.55-.687-1.58-.137-2.062",fill:"#2B0849"}),C.createElement("path",{d:"M58.419 274.304s.033 1.519-.314 2.93c-.349 1.42-1.078 3.104-1.13 4.139-.058 1.151 4.537 1.58 5.155.034.62-1.547 1.294-6.427 1.913-7.252.619-.825-4.903-2.119-5.624.15",fill:"#A4AABA"}),C.createElement("path",{d:"M99.66 278.514l13.378.092s1.298-54.52 1.853-64.403c.554-9.882 3.776-43.364 1.002-63.128l-12.547-.644-22.849.78s-.434 3.966-1.195 9.976c-.063.496-.682.843-.749 1.365-.075.585.423 1.354.32 1.966-2.364 14.08-6.377 33.104-8.744 46.677-.116.666-1.234 1.009-1.458 2.691-.04.302.211 1.525.112 1.795-6.873 18.744-10.949 47.842-14.277 61.885l14.607-.014s2.197-8.57 4.03-16.97c2.811-12.886 23.111-85.01 23.111-85.01l3.016-.521 1.043 46.35s-.224 1.234.337 2.02c.56.785-.56 1.123-.392 2.244l.392 1.794s-.449 7.178-.898 11.89c-.448 4.71-.092 39.165-.092 39.165",fill:"#7BB2F9"}),C.createElement("path",{d:"M76.085 221.626c1.153.094 4.038-2.019 6.955-4.935M106.36 225.142s2.774-1.11 6.103-3.883",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M107.275 222.1s2.773-1.11 6.102-3.884",stroke:"#648BD8",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M74.74 224.767s2.622-.591 6.505-3.365M86.03 151.634c-.27 3.106.3 8.525-4.336 9.123M103.625 149.88s.11 14.012-1.293 15.065c-2.219 1.664-2.99 1.944-2.99 1.944M99.79 150.438s.035 12.88-1.196 24.377M93.673 175.911s7.212-1.664 9.431-1.664M74.31 205.861a212.013 212.013 0 0 1-.979 4.56s-1.458 1.832-1.009 3.776c.449 1.944-.947 2.045-4.985 15.355-1.696 5.59-4.49 18.591-6.348 27.597l-.231 1.12M75.689 197.807a320.934 320.934 0 0 1-.882 4.754M82.591 152.233L81.395 162.7s-1.097.15-.5 2.244c.113 1.346-2.674 15.775-5.18 30.43M56.12 274.418h13.31",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M116.241 148.22s-17.047-3.104-35.893.2c.158 2.514-.003 4.15-.003 4.15s14.687-2.818 35.67-.312c.252-2.355.226-4.038.226-4.038",fill:"#192064"}),C.createElement("path",{d:"M106.322 151.165l.003-4.911a.81.81 0 0 0-.778-.815c-2.44-.091-5.066-.108-7.836-.014a.818.818 0 0 0-.789.815l-.003 4.906a.81.81 0 0 0 .831.813c2.385-.06 4.973-.064 7.73.017a.815.815 0 0 0 .842-.81",fill:"#FFF"}),C.createElement("path",{d:"M105.207 150.233l.002-3.076a.642.642 0 0 0-.619-.646 94.321 94.321 0 0 0-5.866-.01.65.65 0 0 0-.63.647v3.072a.64.64 0 0 0 .654.644 121.12 121.12 0 0 1 5.794.011c.362.01.665-.28.665-.642",fill:"#192064"}),C.createElement("path",{d:"M100.263 275.415h12.338M101.436 270.53c.006 3.387.042 5.79.111 6.506M101.451 264.548a915.75 915.75 0 0 0-.015 4.337M100.986 174.965l.898 44.642s.673 1.57-.225 2.692c-.897 1.122 2.468.673.898 2.243-1.57 1.57.897 1.122 0 3.365-.596 1.489-.994 21.1-1.096 35.146",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M46.876 83.427s-.516 6.045 7.223 5.552c11.2-.712 9.218-9.345 31.54-21.655-.786-2.708-2.447-4.744-2.447-4.744s-11.068 3.11-22.584 8.046c-6.766 2.9-13.395 6.352-13.732 12.801M104.46 91.057l.941-5.372-8.884-11.43-5.037 5.372-1.74 7.834a.321.321 0 0 0 .108.32c.965.8 6.5 5.013 14.347 3.544a.332.332 0 0 0 .264-.268",fill:"#FFC6A0"}),C.createElement("path",{d:"M93.942 79.387s-4.533-2.853-2.432-6.855c1.623-3.09 4.513 1.133 4.513 1.133s.52-3.642 3.121-3.642c.52-1.04 1.561-4.162 1.561-4.162s11.445 2.601 13.526 3.121c0 5.203-2.304 19.424-7.84 19.861-8.892.703-12.449-9.456-12.449-9.456",fill:"#FFC6A0"}),C.createElement("path",{d:"M113.874 73.446c2.601-2.081 3.47-9.722 3.47-9.722s-2.479-.49-6.64-2.05c-4.683-2.081-12.798-4.747-17.48.976-9.668 3.223-2.05 19.823-2.05 19.823l2.713-3.021s-3.935-3.287-2.08-6.243c2.17-3.462 3.92 1.073 3.92 1.073s.637-2.387 3.581-3.342c.355-.71 1.036-2.674 1.432-3.85a1.073 1.073 0 0 1 1.263-.704c2.4.558 8.677 2.019 11.356 2.662.522.125.871.615.82 1.15l-.305 3.248z",fill:"#520038"}),C.createElement("path",{d:"M104.977 76.064c-.103.61-.582 1.038-1.07.956-.489-.083-.801-.644-.698-1.254.103-.61.582-1.038 1.07-.956.488.082.8.644.698 1.254M112.132 77.694c-.103.61-.582 1.038-1.07.956-.488-.083-.8-.644-.698-1.254.103-.61.582-1.038 1.07-.956.488.082.8.643.698 1.254",fill:"#552950"}),C.createElement("path",{stroke:"#DB836E",strokeWidth:"1.118",strokeLinecap:"round",strokeLinejoin:"round",d:"M110.13 74.84l-.896 1.61-.298 4.357h-2.228"}),C.createElement("path",{d:"M110.846 74.481s1.79-.716 2.506.537",stroke:"#5C2552",strokeWidth:"1.118",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M92.386 74.282s.477-1.114 1.113-.716c.637.398 1.274 1.433.558 1.99-.717.556.159 1.67.159 1.67",stroke:"#DB836E",strokeWidth:"1.118",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M103.287 72.93s1.83 1.113 4.137.954",stroke:"#5C2552",strokeWidth:"1.118",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M103.685 81.762s2.227 1.193 4.376 1.193M104.64 84.308s.954.398 1.511.318M94.693 81.205s2.308 7.4 10.424 7.639",stroke:"#DB836E",strokeWidth:"1.118",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M81.45 89.384s.45 5.647-4.935 12.787M69 82.654s-.726 9.282-8.204 14.206",stroke:"#E4EBF7",strokeWidth:"1.101",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M129.405 122.865s-5.272 7.403-9.422 10.768",stroke:"#E4EBF7",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M119.306 107.329s.452 4.366-2.127 32.062",stroke:"#E4EBF7",strokeWidth:"1.101",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M150.028 151.232h-49.837a1.01 1.01 0 0 1-1.01-1.01v-31.688c0-.557.452-1.01 1.01-1.01h49.837c.558 0 1.01.453 1.01 1.01v31.688a1.01 1.01 0 0 1-1.01 1.01",fill:"#F2D7AD"}),C.createElement("path",{d:"M150.29 151.232h-19.863v-33.707h20.784v32.786a.92.92 0 0 1-.92.92",fill:"#F4D19D"}),C.createElement("path",{d:"M123.554 127.896H92.917a.518.518 0 0 1-.425-.816l6.38-9.113c.193-.277.51-.442.85-.442h31.092l-7.26 10.371z",fill:"#F2D7AD"}),C.createElement("path",{fill:"#CC9B6E",d:"M123.689 128.447H99.25v-.519h24.169l7.183-10.26.424.298z"}),C.createElement("path",{d:"M158.298 127.896h-18.669a2.073 2.073 0 0 1-1.659-.83l-7.156-9.541h19.965c.49 0 .95.23 1.244.622l6.69 8.92a.519.519 0 0 1-.415.83",fill:"#F4D19D"}),C.createElement("path",{fill:"#CC9B6E",d:"M157.847 128.479h-19.384l-7.857-10.475.415-.31 7.7 10.266h19.126zM130.554 150.685l-.032-8.177.519-.002.032 8.177z"}),C.createElement("path",{fill:"#CC9B6E",d:"M130.511 139.783l-.08-21.414.519-.002.08 21.414zM111.876 140.932l-.498-.143 1.479-5.167.498.143zM108.437 141.06l-2.679-2.935 2.665-3.434.41.318-2.397 3.089 2.384 2.612zM116.607 141.06l-.383-.35 2.383-2.612-2.397-3.089.41-.318 2.665 3.434z"}),C.createElement("path",{d:"M154.316 131.892l-3.114-1.96.038 3.514-1.043.092c-1.682.115-3.634.23-4.789.23-1.902 0-2.693 2.258 2.23 2.648l-2.645-.596s-2.168 1.317.504 2.3c0 0-1.58 1.217.561 2.58-.584 3.504 5.247 4.058 7.122 3.59 1.876-.47 4.233-2.359 4.487-5.16.28-3.085-.89-5.432-3.35-7.238",fill:"#FFC6A0"}),C.createElement("path",{d:"M153.686 133.577s-6.522.47-8.36.372c-1.836-.098-1.904 2.19 2.359 2.264 3.739.15 5.451-.044 5.451-.044",stroke:"#DB836E",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M145.16 135.877c-1.85 1.346.561 2.355.561 2.355s3.478.898 6.73.617",stroke:"#DB836E",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M151.89 141.71s-6.28.111-6.73-2.132c-.223-1.346.45-1.402.45-1.402M146.114 140.868s-1.103 3.16 5.44 3.533M151.202 129.932v3.477M52.838 89.286c3.533-.337 8.423-1.248 13.582-7.754",stroke:"#DB836E",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M168.567 248.318a6.647 6.647 0 0 1-6.647-6.647v-66.466a6.647 6.647 0 1 1 13.294 0v66.466a6.647 6.647 0 0 1-6.647 6.647",fill:"#5BA02E"}),C.createElement("path",{d:"M176.543 247.653a6.647 6.647 0 0 1-6.646-6.647v-33.232a6.647 6.647 0 1 1 13.293 0v33.232a6.647 6.647 0 0 1-6.647 6.647",fill:"#92C110"}),C.createElement("path",{d:"M186.443 293.613H158.92a3.187 3.187 0 0 1-3.187-3.187v-46.134a3.187 3.187 0 0 1 3.187-3.187h27.524a3.187 3.187 0 0 1 3.187 3.187v46.134a3.187 3.187 0 0 1-3.187 3.187",fill:"#F2D7AD"}),C.createElement("path",{d:"M88.979 89.48s7.776 5.384 16.6 2.842",stroke:"#E4EBF7",strokeWidth:"1.101",strokeLinecap:"round",strokeLinejoin:"round"}))),Gnt=()=>C.createElement("svg",{width:"254",height:"294"},C.createElement("title",null,"Server Error"),C.createElement("defs",null,C.createElement("path",{d:"M0 .335h253.49v253.49H0z"}),C.createElement("path",{d:"M0 293.665h253.49V.401H0z"})),C.createElement("g",{fill:"none",fillRule:"evenodd"},C.createElement("g",{transform:"translate(0 .067)"},C.createElement("mask",{fill:"#fff"}),C.createElement("path",{d:"M0 128.134v-2.11C0 56.608 56.273.334 125.69.334h2.11c69.416 0 125.69 56.274 125.69 125.69v2.11c0 69.417-56.274 125.69-125.69 125.69h-2.11C56.273 253.824 0 197.551 0 128.134",fill:"#E4EBF7",mask:"url(#b)"})),C.createElement("path",{d:"M39.989 132.108a8.332 8.332 0 1 1-16.581-1.671 8.332 8.332 0 0 1 16.58 1.671",fill:"#FFF"}),C.createElement("path",{d:"M37.19 135.59l10.553 5.983M48.665 147.884l-12.734 10.861",stroke:"#FFF",strokeWidth:"2"}),C.createElement("path",{d:"M40.11 160.816a5.706 5.706 0 1 1-11.354-1.145 5.706 5.706 0 0 1 11.354 1.145M57.943 144.6a5.747 5.747 0 1 1-11.436-1.152 5.747 5.747 0 0 1 11.436 1.153M99.656 27.434l30.024-.013a4.619 4.619 0 1 0-.004-9.238l-30.024.013a4.62 4.62 0 0 0 .004 9.238M111.14 45.896l30.023-.013a4.62 4.62 0 1 0-.004-9.238l-30.024.013a4.619 4.619 0 1 0 .004 9.238",fill:"#FFF"}),C.createElement("path",{d:"M113.53 27.421v-.002l15.89-.007a4.619 4.619 0 1 0 .005 9.238l-15.892.007v-.002a4.618 4.618 0 0 0-.004-9.234M150.167 70.091h-3.979a4.789 4.789 0 0 1-4.774-4.775 4.788 4.788 0 0 1 4.774-4.774h3.979a4.789 4.789 0 0 1 4.775 4.774 4.789 4.789 0 0 1-4.775 4.775",fill:"#FFF"}),C.createElement("path",{d:"M171.687 30.234c0-16.392 13.289-29.68 29.681-29.68 16.392 0 29.68 13.288 29.68 29.68 0 16.393-13.288 29.681-29.68 29.681s-29.68-13.288-29.68-29.68",fill:"#FF603B"}),C.createElement("path",{d:"M203.557 19.435l-.676 15.035a1.514 1.514 0 0 1-3.026 0l-.675-15.035a2.19 2.19 0 1 1 4.377 0m-.264 19.378c.513.477.77 1.1.77 1.87s-.257 1.393-.77 1.907c-.55.476-1.21.733-1.943.733a2.545 2.545 0 0 1-1.87-.77c-.55-.514-.806-1.136-.806-1.87 0-.77.256-1.393.806-1.87.513-.513 1.137-.733 1.87-.733.77 0 1.43.22 1.943.733",fill:"#FFF"}),C.createElement("path",{d:"M119.3 133.275c4.426-.598 3.612-1.204 4.079-4.778.675-5.18-3.108-16.935-8.262-25.118-1.088-10.72-12.598-11.24-12.598-11.24s4.312 4.895 4.196 16.199c1.398 5.243.804 14.45.804 14.45s5.255 11.369 11.78 10.487",fill:"#FFB594"}),C.createElement("path",{d:"M100.944 91.61s1.463-.583 3.211.582c8.08 1.398 10.368 6.706 11.3 11.368 1.864 1.282 1.864 2.33 1.864 3.496.365.777 1.515 3.03 1.515 3.03s-7.225 1.748-10.954 6.758c-1.399-6.41-6.936-25.235-6.936-25.235",fill:"#FFF"}),C.createElement("path",{d:"M94.008 90.5l1.019-5.815-9.23-11.874-5.233 5.581-2.593 9.863s8.39 5.128 16.037 2.246",fill:"#FFB594"}),C.createElement("path",{d:"M82.931 78.216s-4.557-2.868-2.445-6.892c1.632-3.107 4.537 1.139 4.537 1.139s.524-3.662 3.139-3.662c.523-1.046 1.569-4.184 1.569-4.184s11.507 2.615 13.6 3.138c-.001 5.23-2.317 19.529-7.884 19.969-8.94.706-12.516-9.508-12.516-9.508",fill:"#FFC6A0"}),C.createElement("path",{d:"M102.971 72.243c2.616-2.093 3.489-9.775 3.489-9.775s-2.492-.492-6.676-2.062c-4.708-2.092-12.867-4.771-17.575.982-9.54 4.41-2.062 19.93-2.062 19.93l2.729-3.037s-3.956-3.304-2.092-6.277c2.183-3.48 3.943 1.08 3.943 1.08s.64-2.4 3.6-3.36c.356-.714 1.04-2.69 1.44-3.872a1.08 1.08 0 0 1 1.27-.707c2.41.56 8.723 2.03 11.417 2.676.524.126.876.619.825 1.156l-.308 3.266z",fill:"#520038"}),C.createElement("path",{d:"M101.22 76.514c-.104.613-.585 1.044-1.076.96-.49-.082-.805-.646-.702-1.26.104-.613.585-1.044 1.076-.961.491.083.805.647.702 1.26M94.26 75.074c-.104.613-.585 1.044-1.076.96-.49-.082-.805-.646-.702-1.26.104-.613.585-1.044 1.076-.96.491.082.805.646.702 1.26",fill:"#552950"}),C.createElement("path",{stroke:"#DB836E",strokeWidth:"1.063",strokeLinecap:"round",strokeLinejoin:"round",d:"M99.206 73.644l-.9 1.62-.3 4.38h-2.24"}),C.createElement("path",{d:"M99.926 73.284s1.8-.72 2.52.54",stroke:"#5C2552",strokeWidth:"1.117",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M81.367 73.084s.48-1.12 1.12-.72c.64.4 1.28 1.44.56 2s.16 1.68.16 1.68",stroke:"#DB836E",strokeWidth:"1.117",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M92.326 71.724s1.84 1.12 4.16.96",stroke:"#5C2552",strokeWidth:"1.117",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M92.726 80.604s2.24 1.2 4.4 1.2M93.686 83.164s.96.4 1.52.32M83.687 80.044s1.786 6.547 9.262 7.954",stroke:"#DB836E",strokeWidth:"1.063",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M95.548 91.663s-1.068 2.821-8.298 2.105c-7.23-.717-10.29-5.044-10.29-5.044",stroke:"#E4EBF7",strokeWidth:"1.136",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M78.126 87.478s6.526 4.972 16.47 2.486c0 0 9.577 1.02 11.536 5.322 5.36 11.77.543 36.835 0 39.962 3.496 4.055-.466 8.483-.466 8.483-15.624-3.548-35.81-.6-35.81-.6-4.849-3.546-1.223-9.044-1.223-9.044L62.38 110.32c-2.485-15.227.833-19.803 3.549-20.743 3.03-1.049 8.04-1.282 8.04-1.282.496-.058 1.08-.076 1.37-.233 2.36-1.282 2.787-.583 2.787-.583",fill:"#FFF"}),C.createElement("path",{d:"M65.828 89.81s-6.875.465-7.59 8.156c-.466 8.857 3.03 10.954 3.03 10.954s6.075 22.102 16.796 22.957c8.39-2.176 4.758-6.702 4.661-11.42-.233-11.304-7.108-16.897-7.108-16.897s-4.212-13.75-9.789-13.75",fill:"#FFC6A0"}),C.createElement("path",{d:"M71.716 124.225s.855 11.264 9.828 6.486c4.765-2.536 7.581-13.828 9.789-22.568 1.456-5.768 2.58-12.197 2.58-12.197l-4.973-1.709s-2.408 5.516-7.769 12.275c-4.335 5.467-9.144 11.11-9.455 17.713",fill:"#FFC6A0"}),C.createElement("path",{d:"M108.463 105.191s1.747 2.724-2.331 30.535c2.376 2.216 1.053 6.012-.233 7.51",stroke:"#E4EBF7",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M123.262 131.527s-.427 2.732-11.77 1.981c-15.187-1.006-25.326-3.25-25.326-3.25l.933-5.8s.723.215 9.71-.068c11.887-.373 18.714-6.07 24.964-1.022 4.039 3.263 1.489 8.16 1.489 8.16",fill:"#FFC6A0"}),C.createElement("path",{d:"M70.24 90.974s-5.593-4.739-11.054 2.68c-3.318 7.223.517 15.284 2.664 19.578-.31 3.729 2.33 4.311 2.33 4.311s.108.895 1.516 2.68c4.078-7.03 6.72-9.166 13.711-12.546-.328-.656-1.877-3.265-1.825-3.767.175-1.69-1.282-2.623-1.282-2.623s-.286-.156-1.165-2.738c-.788-2.313-2.036-5.177-4.895-7.575",fill:"#FFF"}),C.createElement("path",{d:"M90.232 288.027s4.855 2.308 8.313 1.155c3.188-1.063 5.12.755 8.002 1.331 2.881.577 7.769 1.243 13.207-1.424-.117-6.228-7.786-4.499-13.518-7.588-2.895-1.56-4.276-5.336-4.066-9.944H91.544s-1.573 11.89-1.312 16.47",fill:"#CBD1D1"}),C.createElement("path",{d:"M90.207 287.833s2.745 1.437 7.639.738c3.456-.494 3.223.66 7.418 1.282 4.195.621 13.092-.194 14.334-1.126.466 1.242-.388 2.33-.388 2.33s-1.709.682-5.438.932c-2.295.154-8.098.276-10.14-.621-2.02-1.554-4.894-1.515-6.06-.234-4.427 1.075-7.184-.31-7.184-.31l-.181-2.991z",fill:"#2B0849"}),C.createElement("path",{d:"M98.429 272.257h3.496s-.117 7.574 5.127 9.671c-5.244.7-9.672-2.602-8.623-9.671",fill:"#A4AABA"}),C.createElement("path",{d:"M44.425 272.046s-2.208 7.774-4.702 12.899c-1.884 3.874-4.428 7.854 5.729 7.854 6.97 0 9.385-.503 7.782-6.917-1.604-6.415.279-13.836.279-13.836h-9.088z",fill:"#CBD1D1"}),C.createElement("path",{d:"M38.066 290.277s2.198 1.225 6.954 1.225c6.376 0 8.646-1.73 8.646-1.73s.63 1.168-.649 2.27c-1.04.897-3.77 1.668-7.745 1.621-4.347-.05-6.115-.593-7.062-1.224-.864-.577-.72-1.657-.144-2.162",fill:"#2B0849"}),C.createElement("path",{d:"M45.344 274.041s.035 1.592-.329 3.07c-.365 1.49-1.13 3.255-1.184 4.34-.061 1.206 4.755 1.657 5.403.036.65-1.622 1.357-6.737 2.006-7.602.648-.865-5.14-2.222-5.896.156",fill:"#A4AABA"}),C.createElement("path",{d:"M89.476 277.57l13.899.095s1.349-56.643 1.925-66.909c.576-10.267 3.923-45.052 1.042-65.585l-13.037-.669-23.737.81s-.452 4.12-1.243 10.365c-.065.515-.708.874-.777 1.417-.078.608.439 1.407.332 2.044-2.455 14.627-5.797 32.736-8.256 46.837-.121.693-1.282 1.048-1.515 2.796-.042.314.22 1.584.116 1.865-7.14 19.473-12.202 52.601-15.66 67.19l15.176-.015s2.282-10.145 4.185-18.871c2.922-13.389 24.012-88.32 24.012-88.32l3.133-.954-.158 48.568s-.233 1.282.35 2.098c.583.815-.581 1.167-.408 2.331l.408 1.864s-.466 7.458-.932 12.352c-.467 4.895 1.145 40.69 1.145 40.69",fill:"#7BB2F9"}),C.createElement("path",{d:"M64.57 218.881c1.197.099 4.195-2.097 7.225-5.127M96.024 222.534s2.881-1.152 6.34-4.034",stroke:"#648BD8",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M96.973 219.373s2.882-1.153 6.34-4.034",stroke:"#648BD8",strokeWidth:"1.032",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M63.172 222.144s2.724-.614 6.759-3.496M74.903 146.166c-.281 3.226.31 8.856-4.506 9.478M93.182 144.344s.115 14.557-1.344 15.65c-2.305 1.73-3.107 2.02-3.107 2.02M89.197 144.923s.269 13.144-1.01 25.088M83.525 170.71s6.81-1.051 9.116-1.051M46.026 270.045l-.892 4.538M46.937 263.289l-.815 4.157M62.725 202.503c-.33 1.618-.102 1.904-.449 3.438 0 0-2.756 1.903-2.29 3.923.466 2.02-.31 3.424-4.505 17.252-1.762 5.807-4.233 18.922-6.165 28.278-.03.144-.521 2.646-1.14 5.8M64.158 194.136c-.295 1.658-.6 3.31-.917 4.938M71.33 146.787l-1.244 10.877s-1.14.155-.519 2.33c.117 1.399-2.778 16.39-5.382 31.615M44.242 273.727H58.07",stroke:"#648BD8",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M106.18 142.117c-3.028-.489-18.825-2.744-36.219.2a.625.625 0 0 0-.518.644c.063 1.307.044 2.343.015 2.995a.617.617 0 0 0 .716.636c3.303-.534 17.037-2.412 35.664-.266.347.04.66-.214.692-.56.124-1.347.16-2.425.17-3.029a.616.616 0 0 0-.52-.62",fill:"#192064"}),C.createElement("path",{d:"M96.398 145.264l.003-5.102a.843.843 0 0 0-.809-.847 114.104 114.104 0 0 0-8.141-.014.85.85 0 0 0-.82.847l-.003 5.097c0 .476.388.857.864.845 2.478-.064 5.166-.067 8.03.017a.848.848 0 0 0 .876-.843",fill:"#FFF"}),C.createElement("path",{d:"M95.239 144.296l.002-3.195a.667.667 0 0 0-.643-.672c-1.9-.061-3.941-.073-6.094-.01a.675.675 0 0 0-.654.672l-.002 3.192c0 .376.305.677.68.669 1.859-.042 3.874-.043 6.02.012.376.01.69-.291.691-.668",fill:"#192064"}),C.createElement("path",{d:"M90.102 273.522h12.819M91.216 269.761c.006 3.519-.072 5.55 0 6.292M90.923 263.474c-.009 1.599-.016 2.558-.016 4.505M90.44 170.404l.932 46.38s.7 1.631-.233 2.796c-.932 1.166 2.564.7.932 2.33-1.63 1.633.933 1.166 0 3.497-.618 1.546-1.031 21.921-1.138 36.513",stroke:"#648BD8",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M73.736 98.665l2.214 4.312s2.098.816 1.865 2.68l.816 2.214M64.297 116.611c.233-.932 2.176-7.147 12.585-10.488M77.598 90.042s7.691 6.137 16.547 2.72",stroke:"#E4EBF7",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M91.974 86.954s5.476-.816 7.574-4.545c1.297-.345.72 2.212-.33 3.671-.7.971-1.01 1.554-1.01 1.554s.194.31.155.816c-.053.697-.175.653-.272 1.048-.081.335.108.657 0 1.049-.046.17-.198.5-.382.878-.12.249-.072.687-.2.948-.231.469-1.562 1.87-2.622 2.855-3.826 3.554-5.018 1.644-6.001-.408-.894-1.865-.661-5.127-.874-6.875-.35-2.914-2.622-3.03-1.923-4.429.343-.685 2.87.69 3.263 1.748.757 2.04 2.952 1.807 2.622 1.69",fill:"#FFC6A0"}),C.createElement("path",{d:"M99.8 82.429c-.465.077-.35.272-.97 1.243-.622.971-4.817 2.932-6.39 3.224-2.589.48-2.278-1.56-4.254-2.855-1.69-1.107-3.562-.638-1.398 1.398.99.932.932 1.107 1.398 3.205.335 1.506-.64 3.67.7 5.593",stroke:"#DB836E",strokeWidth:".774",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M79.543 108.673c-2.1 2.926-4.266 6.175-5.557 8.762",stroke:"#E59788",strokeWidth:".774",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M87.72 124.768s-2.098-1.942-5.127-2.719c-3.03-.777-3.574-.155-5.516.078-1.942.233-3.885-.932-3.652.7.233 1.63 5.05 1.01 5.206 2.097.155 1.087-6.37 2.796-8.313 2.175-.777.777.466 1.864 2.02 2.175.233 1.554 2.253 1.554 2.253 1.554s.699 1.01 2.641 1.088c2.486 1.32 8.934-.7 10.954-1.554 2.02-.855-.466-5.594-.466-5.594",fill:"#FFC6A0"}),C.createElement("path",{d:"M73.425 122.826s.66 1.127 3.167 1.418c2.315.27 2.563.583 2.563.583s-2.545 2.894-9.07 2.272M72.416 129.274s3.826.097 4.933-.718M74.98 130.75s1.961.136 3.36-.505M77.232 131.916s1.748.019 2.914-.505M73.328 122.321s-.595-1.032 1.262-.427c1.671.544 2.833.055 5.128.155 1.389.061 3.067-.297 3.982.15 1.606.784 3.632 2.181 3.632 2.181s10.526 1.204 19.033-1.127M78.864 108.104s-8.39 2.758-13.168 12.12",stroke:"#E59788",strokeWidth:".774",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M109.278 112.533s3.38-3.613 7.575-4.662",stroke:"#E4EBF7",strokeWidth:"1.085",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M107.375 123.006s9.697-2.745 11.445-.88",stroke:"#E59788",strokeWidth:".774",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M194.605 83.656l3.971-3.886M187.166 90.933l3.736-3.655M191.752 84.207l-4.462-4.56M198.453 91.057l-4.133-4.225M129.256 163.074l3.718-3.718M122.291 170.039l3.498-3.498M126.561 163.626l-4.27-4.27M132.975 170.039l-3.955-3.955",stroke:"#BFCDDD",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M190.156 211.779h-1.604a4.023 4.023 0 0 1-4.011-4.011V175.68a4.023 4.023 0 0 1 4.01-4.01h1.605a4.023 4.023 0 0 1 4.011 4.01v32.088a4.023 4.023 0 0 1-4.01 4.01",fill:"#A3B4C6"}),C.createElement("path",{d:"M237.824 212.977a4.813 4.813 0 0 1-4.813 4.813h-86.636a4.813 4.813 0 0 1 0-9.626h86.636a4.813 4.813 0 0 1 4.813 4.813",fill:"#A3B4C6"}),C.createElement("mask",{fill:"#fff"}),C.createElement("path",{fill:"#A3B4C6",mask:"url(#d)",d:"M154.098 190.096h70.513v-84.617h-70.513z"}),C.createElement("path",{d:"M224.928 190.096H153.78a3.219 3.219 0 0 1-3.208-3.209V167.92a3.219 3.219 0 0 1 3.208-3.21h71.148a3.219 3.219 0 0 1 3.209 3.21v18.967a3.219 3.219 0 0 1-3.21 3.209M224.928 130.832H153.78a3.218 3.218 0 0 1-3.208-3.208v-18.968a3.219 3.219 0 0 1 3.208-3.209h71.148a3.219 3.219 0 0 1 3.209 3.21v18.967a3.218 3.218 0 0 1-3.21 3.208",fill:"#BFCDDD",mask:"url(#d)"}),C.createElement("path",{d:"M159.563 120.546a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M166.98 120.546a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M174.397 120.546a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M222.539 120.546h-22.461a.802.802 0 0 1-.802-.802v-3.208c0-.443.359-.803.802-.803h22.46c.444 0 .803.36.803.803v3.208c0 .443-.36.802-.802.802",fill:"#FFF",mask:"url(#d)"}),C.createElement("path",{d:"M224.928 160.464H153.78a3.218 3.218 0 0 1-3.208-3.209v-18.967a3.219 3.219 0 0 1 3.208-3.209h71.148a3.219 3.219 0 0 1 3.209 3.209v18.967a3.218 3.218 0 0 1-3.21 3.209",fill:"#BFCDDD",mask:"url(#d)"}),C.createElement("path",{d:"M173.455 130.832h49.301M164.984 130.832h6.089M155.952 130.832h6.75M173.837 160.613h49.3M165.365 160.613h6.089M155.57 160.613h6.751",stroke:"#7C90A5",strokeWidth:"1.124",strokeLinecap:"round",strokeLinejoin:"round",mask:"url(#d)"}),C.createElement("path",{d:"M159.563 151.038a2.407 2.407 0 1 1 0-4.814 2.407 2.407 0 0 1 0 4.814M166.98 151.038a2.407 2.407 0 1 1 0-4.814 2.407 2.407 0 0 1 0 4.814M174.397 151.038a2.407 2.407 0 1 1 .001-4.814 2.407 2.407 0 0 1 0 4.814M222.539 151.038h-22.461a.802.802 0 0 1-.802-.802v-3.209c0-.443.359-.802.802-.802h22.46c.444 0 .803.36.803.802v3.209c0 .443-.36.802-.802.802M159.563 179.987a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M166.98 179.987a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M174.397 179.987a2.407 2.407 0 1 1 0-4.813 2.407 2.407 0 0 1 0 4.813M222.539 179.987h-22.461a.802.802 0 0 1-.802-.802v-3.209c0-.443.359-.802.802-.802h22.46c.444 0 .803.36.803.802v3.209c0 .443-.36.802-.802.802",fill:"#FFF",mask:"url(#d)"}),C.createElement("path",{d:"M203.04 221.108h-27.372a2.413 2.413 0 0 1-2.406-2.407v-11.448a2.414 2.414 0 0 1 2.406-2.407h27.372a2.414 2.414 0 0 1 2.407 2.407V218.7a2.413 2.413 0 0 1-2.407 2.407",fill:"#BFCDDD",mask:"url(#d)"}),C.createElement("path",{d:"M177.259 207.217v11.52M201.05 207.217v11.52",stroke:"#A3B4C6",strokeWidth:"1.124",strokeLinecap:"round",strokeLinejoin:"round",mask:"url(#d)"}),C.createElement("path",{d:"M162.873 267.894a9.422 9.422 0 0 1-9.422-9.422v-14.82a9.423 9.423 0 0 1 18.845 0v14.82a9.423 9.423 0 0 1-9.423 9.422",fill:"#5BA02E",mask:"url(#d)"}),C.createElement("path",{d:"M171.22 267.83a9.422 9.422 0 0 1-9.422-9.423v-3.438a9.423 9.423 0 0 1 18.845 0v3.438a9.423 9.423 0 0 1-9.422 9.423",fill:"#92C110",mask:"url(#d)"}),C.createElement("path",{d:"M181.31 293.666h-27.712a3.209 3.209 0 0 1-3.209-3.21V269.79a3.209 3.209 0 0 1 3.209-3.21h27.711a3.209 3.209 0 0 1 3.209 3.21v20.668a3.209 3.209 0 0 1-3.209 3.209",fill:"#F2D7AD",mask:"url(#d)"}))),jnt=n=>{const{componentCls:e,lineHeightHeading3:r,iconCls:i,padding:a,paddingXL:o,paddingXS:s,paddingLG:l,marginXS:c,lineHeight:u}=n;return{[e]:{padding:`${Qe(n.calc(l).mul(2).equal())} ${Qe(o)}`,"&-rtl":{direction:"rtl"}},[`${e} ${e}-image`]:{width:n.imageWidth,height:n.imageHeight,margin:"auto"},[`${e} ${e}-icon`]:{marginBottom:l,textAlign:"center",[`& > ${i}`]:{fontSize:n.iconFontSize}},[`${e} ${e}-title`]:{color:n.colorTextHeading,fontSize:n.titleFontSize,lineHeight:r,marginBlock:c,textAlign:"center"},[`${e} ${e}-subtitle`]:{color:n.colorTextDescription,fontSize:n.subtitleFontSize,lineHeight:u,textAlign:"center"},[`${e} ${e}-content`]:{marginTop:l,padding:`${Qe(l)} ${Qe(n.calc(a).mul(2.5).equal())}`,backgroundColor:n.colorFillAlter},[`${e} ${e}-extra`]:{margin:n.extraMargin,textAlign:"center","& > *":{marginInlineEnd:s,"&:last-child":{marginInlineEnd:0}}}}},Hnt=n=>{const{componentCls:e,iconCls:r}=n;return{[`${e}-success ${e}-icon > ${r}`]:{color:n.resultSuccessIconColor},[`${e}-error ${e}-icon > ${r}`]:{color:n.resultErrorIconColor},[`${e}-info ${e}-icon > ${r}`]:{color:n.resultInfoIconColor},[`${e}-warning ${e}-icon > ${r}`]:{color:n.resultWarningIconColor}}},Wnt=n=>[jnt(n),Hnt(n)],qnt=n=>Wnt(n),Ynt=n=>({titleFontSize:n.fontSizeHeading3,subtitleFontSize:n.fontSize,iconFontSize:n.fontSizeHeading3*3,extraMargin:`${n.paddingLG}px 0 0 0`}),Xnt=Ja("Result",n=>{const e=n.colorInfo,r=n.colorError,i=n.colorSuccess,a=n.colorWarning,o=Qr(n,{resultInfoIconColor:e,resultErrorIconColor:r,resultSuccessIconColor:i,resultWarningIconColor:a,imageWidth:250,imageHeight:295});return[qnt(o)]},Ynt),Knt=()=>C.createElement("svg",{width:"251",height:"294"},C.createElement("title",null,"Unauthorized"),C.createElement("g",{fill:"none",fillRule:"evenodd"},C.createElement("path",{d:"M0 129.023v-2.084C0 58.364 55.591 2.774 124.165 2.774h2.085c68.574 0 124.165 55.59 124.165 124.165v2.084c0 68.575-55.59 124.166-124.165 124.166h-2.085C55.591 253.189 0 197.598 0 129.023",fill:"#E4EBF7"}),C.createElement("path",{d:"M41.417 132.92a8.231 8.231 0 1 1-16.38-1.65 8.231 8.231 0 0 1 16.38 1.65",fill:"#FFF"}),C.createElement("path",{d:"M38.652 136.36l10.425 5.91M49.989 148.505l-12.58 10.73",stroke:"#FFF",strokeWidth:"2"}),C.createElement("path",{d:"M41.536 161.28a5.636 5.636 0 1 1-11.216-1.13 5.636 5.636 0 0 1 11.216 1.13M59.154 145.261a5.677 5.677 0 1 1-11.297-1.138 5.677 5.677 0 0 1 11.297 1.138M100.36 29.516l29.66-.013a4.562 4.562 0 1 0-.004-9.126l-29.66.013a4.563 4.563 0 0 0 .005 9.126M111.705 47.754l29.659-.013a4.563 4.563 0 1 0-.004-9.126l-29.66.013a4.563 4.563 0 1 0 .005 9.126",fill:"#FFF"}),C.createElement("path",{d:"M114.066 29.503V29.5l15.698-.007a4.563 4.563 0 1 0 .004 9.126l-15.698.007v-.002a4.562 4.562 0 0 0-.004-9.122M185.405 137.723c-.55 5.455-5.418 9.432-10.873 8.882-5.456-.55-9.432-5.418-8.882-10.873.55-5.455 5.418-9.432 10.873-8.882 5.455.55 9.432 5.418 8.882 10.873",fill:"#FFF"}),C.createElement("path",{d:"M180.17 143.772l12.572 7.129M193.841 158.42L178.67 171.36",stroke:"#FFF",strokeWidth:"2"}),C.createElement("path",{d:"M185.55 171.926a6.798 6.798 0 1 1-13.528-1.363 6.798 6.798 0 0 1 13.527 1.363M204.12 155.285a6.848 6.848 0 1 1-13.627-1.375 6.848 6.848 0 0 1 13.626 1.375",fill:"#FFF"}),C.createElement("path",{d:"M152.988 194.074a2.21 2.21 0 1 1-4.42 0 2.21 2.21 0 0 1 4.42 0zM225.931 118.217a2.21 2.21 0 1 1-4.421 0 2.21 2.21 0 0 1 4.421 0zM217.09 153.051a2.21 2.21 0 1 1-4.421 0 2.21 2.21 0 0 1 4.42 0zM177.84 109.842a2.21 2.21 0 1 1-4.422 0 2.21 2.21 0 0 1 4.421 0zM196.114 94.454a2.21 2.21 0 1 1-4.421 0 2.21 2.21 0 0 1 4.421 0zM202.844 182.523a2.21 2.21 0 1 1-4.42 0 2.21 2.21 0 0 1 4.42 0z",stroke:"#FFF",strokeWidth:"2"}),C.createElement("path",{stroke:"#FFF",strokeWidth:"2",d:"M215.125 155.262l-1.902 20.075-10.87 5.958M174.601 176.636l-6.322 9.761H156.98l-4.484 6.449M175.874 127.28V111.56M221.51 119.404l-12.77 7.859-15.228-7.86V96.668"}),C.createElement("path",{d:"M180.68 29.32C180.68 13.128 193.806 0 210 0c16.193 0 29.32 13.127 29.32 29.32 0 16.194-13.127 29.322-29.32 29.322-16.193 0-29.32-13.128-29.32-29.321",fill:"#A26EF4"}),C.createElement("path",{d:"M221.45 41.706l-21.563-.125a1.744 1.744 0 0 1-1.734-1.754l.071-12.23a1.744 1.744 0 0 1 1.754-1.734l21.562.125c.964.006 1.74.791 1.735 1.755l-.071 12.229a1.744 1.744 0 0 1-1.754 1.734",fill:"#FFF"}),C.createElement("path",{d:"M215.106 29.192c-.015 2.577-2.049 4.654-4.543 4.64-2.494-.014-4.504-2.115-4.489-4.693l.04-6.925c.016-2.577 2.05-4.654 4.543-4.64 2.494.015 4.504 2.116 4.49 4.693l-.04 6.925zm-4.53-14.074a6.877 6.877 0 0 0-6.916 6.837l-.043 7.368a6.877 6.877 0 0 0 13.754.08l.042-7.368a6.878 6.878 0 0 0-6.837-6.917zM167.566 68.367h-3.93a4.73 4.73 0 0 1-4.717-4.717 4.73 4.73 0 0 1 4.717-4.717h3.93a4.73 4.73 0 0 1 4.717 4.717 4.73 4.73 0 0 1-4.717 4.717",fill:"#FFF"}),C.createElement("path",{d:"M168.214 248.838a6.611 6.611 0 0 1-6.61-6.611v-66.108a6.611 6.611 0 0 1 13.221 0v66.108a6.611 6.611 0 0 1-6.61 6.61",fill:"#5BA02E"}),C.createElement("path",{d:"M176.147 248.176a6.611 6.611 0 0 1-6.61-6.61v-33.054a6.611 6.611 0 1 1 13.221 0v33.053a6.611 6.611 0 0 1-6.61 6.611",fill:"#92C110"}),C.createElement("path",{d:"M185.994 293.89h-27.376a3.17 3.17 0 0 1-3.17-3.17v-45.887a3.17 3.17 0 0 1 3.17-3.17h27.376a3.17 3.17 0 0 1 3.17 3.17v45.886a3.17 3.17 0 0 1-3.17 3.17",fill:"#F2D7AD"}),C.createElement("path",{d:"M81.972 147.673s6.377-.927 17.566-1.28c11.729-.371 17.57 1.086 17.57 1.086s3.697-3.855.968-8.424c1.278-12.077 5.982-32.827.335-48.273-1.116-1.339-3.743-1.512-7.536-.62-1.337.315-7.147-.149-7.983-.1l-15.311-.347s-3.487-.17-8.035-.508c-1.512-.113-4.227-1.683-5.458-.338-.406.443-2.425 5.669-1.97 16.077l8.635 35.642s-3.141 3.61 1.219 7.085",fill:"#FFF"}),C.createElement("path",{d:"M75.768 73.325l-.9-6.397 11.982-6.52s7.302-.118 8.038 1.205c.737 1.324-5.616.993-5.616.993s-1.836 1.388-2.615 2.5c-1.654 2.363-.986 6.471-8.318 5.986-1.708.284-2.57 2.233-2.57 2.233",fill:"#FFC6A0"}),C.createElement("path",{d:"M52.44 77.672s14.217 9.406 24.973 14.444c1.061.497-2.094 16.183-11.892 11.811-7.436-3.318-20.162-8.44-21.482-14.496-.71-3.258 2.543-7.643 8.401-11.76M141.862 80.113s-6.693 2.999-13.844 6.876c-3.894 2.11-10.137 4.704-12.33 7.988-6.224 9.314 3.536 11.22 12.947 7.503 6.71-2.651 28.999-12.127 13.227-22.367",fill:"#FFB594"}),C.createElement("path",{d:"M76.166 66.36l3.06 3.881s-2.783 2.67-6.31 5.747c-7.103 6.195-12.803 14.296-15.995 16.44-3.966 2.662-9.754 3.314-12.177-.118-3.553-5.032.464-14.628 31.422-25.95",fill:"#FFC6A0"}),C.createElement("path",{d:"M64.674 85.116s-2.34 8.413-8.912 14.447c.652.548 18.586 10.51 22.144 10.056 5.238-.669 6.417-18.968 1.145-20.531-.702-.208-5.901-1.286-8.853-2.167-.87-.26-1.611-1.71-3.545-.936l-1.98-.869zM128.362 85.826s5.318 1.956 7.325 13.734c-.546.274-17.55 12.35-21.829 7.805-6.534-6.94-.766-17.393 4.275-18.61 4.646-1.121 5.03-1.37 10.23-2.929",fill:"#FFF"}),C.createElement("path",{d:"M78.18 94.656s.911 7.41-4.914 13.078",stroke:"#E4EBF7",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M87.397 94.68s3.124 2.572 10.263 2.572c7.14 0 9.074-3.437 9.074-3.437",stroke:"#E4EBF7",strokeWidth:".932",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M117.184 68.639l-6.781-6.177s-5.355-4.314-9.223-.893c-3.867 3.422 4.463 2.083 5.653 4.165 1.19 2.082.848 1.143-2.083.446-5.603-1.331-2.082.893 2.975 5.355 2.091 1.845 6.992.955 6.992.955l2.467-3.851z",fill:"#FFC6A0"}),C.createElement("path",{d:"M105.282 91.315l-.297-10.937-15.918-.027-.53 10.45c-.026.403.17.788.515.999 2.049 1.251 9.387 5.093 15.799.424.287-.21.443-.554.431-.91",fill:"#FFB594"}),C.createElement("path",{d:"M107.573 74.24c.817-1.147.982-9.118 1.015-11.928a1.046 1.046 0 0 0-.965-1.055l-4.62-.365c-7.71-1.044-17.071.624-18.253 6.346-5.482 5.813-.421 13.244-.421 13.244s1.963 3.566 4.305 6.791c.756 1.041.398-3.731 3.04-5.929 5.524-4.594 15.899-7.103 15.899-7.103",fill:"#5C2552"}),C.createElement("path",{d:"M88.426 83.206s2.685 6.202 11.602 6.522c7.82.28 8.973-7.008 7.434-17.505l-.909-5.483c-6.118-2.897-15.478.54-15.478.54s-.576 2.044-.19 5.504c-2.276 2.066-1.824 5.618-1.824 5.618s-.905-1.922-1.98-2.321c-.86-.32-1.897.089-2.322 1.98-1.04 4.632 3.667 5.145 3.667 5.145",fill:"#FFC6A0"}),C.createElement("path",{stroke:"#DB836E",strokeWidth:"1.145",strokeLinecap:"round",strokeLinejoin:"round",d:"M100.843 77.099l1.701-.928-1.015-4.324.674-1.406"}),C.createElement("path",{d:"M105.546 74.092c-.022.713-.452 1.279-.96 1.263-.51-.016-.904-.607-.882-1.32.021-.713.452-1.278.96-1.263.51.016.904.607.882 1.32M97.592 74.349c-.022.713-.452 1.278-.961 1.263-.509-.016-.904-.607-.882-1.32.022-.713.452-1.279.961-1.263.51.016.904.606.882 1.32",fill:"#552950"}),C.createElement("path",{d:"M91.132 86.786s5.269 4.957 12.679 2.327",stroke:"#DB836E",strokeWidth:"1.145",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M99.776 81.903s-3.592.232-1.44-2.79c1.59-1.496 4.897-.46 4.897-.46s1.156 3.906-3.457 3.25",fill:"#DB836E"}),C.createElement("path",{d:"M102.88 70.6s2.483.84 3.402.715M93.883 71.975s2.492-1.144 4.778-1.073",stroke:"#5C2552",strokeWidth:"1.526",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M86.32 77.374s.961.879 1.458 2.106c-.377.48-1.033 1.152-.236 1.809M99.337 83.719s1.911.151 2.509-.254",stroke:"#DB836E",strokeWidth:"1.145",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M87.782 115.821l15.73-3.012M100.165 115.821l10.04-2.008",stroke:"#E4EBF7",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M66.508 86.763s-1.598 8.83-6.697 14.078",stroke:"#E4EBF7",strokeWidth:"1.114",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M128.31 87.934s3.013 4.121 4.06 11.785",stroke:"#E4EBF7",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M64.09 84.816s-6.03 9.912-13.607 9.903",stroke:"#DB836E",strokeWidth:".795",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M112.366 65.909l-.142 5.32s5.993 4.472 11.945 9.202c4.482 3.562 8.888 7.455 10.985 8.662 4.804 2.766 8.9 3.355 11.076 1.808 4.071-2.894 4.373-9.878-8.136-15.263-4.271-1.838-16.144-6.36-25.728-9.73",fill:"#FFC6A0"}),C.createElement("path",{d:"M130.532 85.488s4.588 5.757 11.619 6.214",stroke:"#DB836E",strokeWidth:".75",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M121.708 105.73s-.393 8.564-1.34 13.612",stroke:"#E4EBF7",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M115.784 161.512s-3.57-1.488-2.678-7.14",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M101.52 290.246s4.326 2.057 7.408 1.03c2.842-.948 4.564.673 7.132 1.186 2.57.514 6.925 1.108 11.772-1.269-.104-5.551-6.939-4.01-12.048-6.763-2.582-1.39-3.812-4.757-3.625-8.863h-9.471s-1.402 10.596-1.169 14.68",fill:"#CBD1D1"}),C.createElement("path",{d:"M101.496 290.073s2.447 1.281 6.809.658c3.081-.44 3.74.485 7.479 1.039 3.739.554 10.802-.07 11.91-.9.415 1.108-.347 2.077-.347 2.077s-1.523.608-4.847.831c-2.045.137-5.843.293-7.663-.507-1.8-1.385-5.286-1.917-5.77-.243-3.947.958-7.41-.288-7.41-.288l-.16-2.667z",fill:"#2B0849"}),C.createElement("path",{d:"M108.824 276.19h3.116s-.103 6.751 4.57 8.62c-4.673.624-8.62-2.32-7.686-8.62",fill:"#A4AABA"}),C.createElement("path",{d:"M57.65 272.52s-2.122 7.47-4.518 12.396c-1.811 3.724-4.255 7.548 5.505 7.548 6.698 0 9.02-.483 7.479-6.648-1.541-6.164.268-13.296.268-13.296H57.65z",fill:"#CBD1D1"}),C.createElement("path",{d:"M51.54 290.04s2.111 1.178 6.682 1.178c6.128 0 8.31-1.662 8.31-1.662s.605 1.122-.624 2.18c-1 .862-3.624 1.603-7.444 1.559-4.177-.049-5.876-.57-6.786-1.177-.831-.554-.692-1.593-.138-2.078",fill:"#2B0849"}),C.createElement("path",{d:"M58.533 274.438s.034 1.529-.315 2.95c-.352 1.431-1.087 3.127-1.139 4.17-.058 1.16 4.57 1.592 5.194.035.623-1.559 1.303-6.475 1.927-7.306.622-.831-4.94-2.135-5.667.15",fill:"#A4AABA"}),C.createElement("path",{d:"M100.885 277.015l13.306.092s1.291-54.228 1.843-64.056c.552-9.828 3.756-43.13.997-62.788l-12.48-.64-22.725.776s-.433 3.944-1.19 9.921c-.062.493-.677.838-.744 1.358-.075.582.42 1.347.318 1.956-2.35 14.003-6.343 32.926-8.697 46.425-.116.663-1.227 1.004-1.45 2.677-.04.3.21 1.516.112 1.785-6.836 18.643-10.89 47.584-14.2 61.551l14.528-.014s2.185-8.524 4.008-16.878c2.796-12.817 22.987-84.553 22.987-84.553l3-.517 1.037 46.1s-.223 1.228.334 2.008c.558.782-.556 1.117-.39 2.233l.39 1.784s-.446 7.14-.892 11.826c-.446 4.685-.092 38.954-.092 38.954",fill:"#7BB2F9"}),C.createElement("path",{d:"M77.438 220.434c1.146.094 4.016-2.008 6.916-4.91M107.55 223.931s2.758-1.103 6.069-3.862",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M108.459 220.905s2.759-1.104 6.07-3.863",stroke:"#648BD8",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M76.099 223.557s2.608-.587 6.47-3.346M87.33 150.82c-.27 3.088.297 8.478-4.315 9.073M104.829 149.075s.11 13.936-1.286 14.983c-2.207 1.655-2.975 1.934-2.975 1.934M101.014 149.63s.035 12.81-1.19 24.245M94.93 174.965s7.174-1.655 9.38-1.655M75.671 204.754c-.316 1.55-.64 3.067-.973 4.535 0 0-1.45 1.822-1.003 3.756.446 1.934-.943 2.034-4.96 15.273-1.686 5.559-4.464 18.49-6.313 27.447-.078.38-4.018 18.06-4.093 18.423M77.043 196.743a313.269 313.269 0 0 1-.877 4.729M83.908 151.414l-1.19 10.413s-1.091.148-.496 2.23c.111 1.34-2.66 15.692-5.153 30.267M57.58 272.94h13.238",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}),C.createElement("path",{d:"M117.377 147.423s-16.955-3.087-35.7.199c.157 2.501-.002 4.128-.002 4.128s14.607-2.802 35.476-.31c.251-2.342.226-4.017.226-4.017",fill:"#192064"}),C.createElement("path",{d:"M107.511 150.353l.004-4.885a.807.807 0 0 0-.774-.81c-2.428-.092-5.04-.108-7.795-.014a.814.814 0 0 0-.784.81l-.003 4.88c0 .456.371.82.827.808a140.76 140.76 0 0 1 7.688.017.81.81 0 0 0 .837-.806",fill:"#FFF"}),C.createElement("path",{d:"M106.402 149.426l.002-3.06a.64.64 0 0 0-.616-.643 94.135 94.135 0 0 0-5.834-.009.647.647 0 0 0-.626.643l-.001 3.056c0 .36.291.648.651.64 1.78-.04 3.708-.041 5.762.012.36.009.662-.279.662-.64",fill:"#192064"}),C.createElement("path",{d:"M101.485 273.933h12.272M102.652 269.075c.006 3.368.04 5.759.11 6.47M102.667 263.125c-.009 1.53-.015 2.98-.016 4.313M102.204 174.024l.893 44.402s.669 1.561-.224 2.677c-.892 1.116 2.455.67.893 2.231-1.562 1.562.893 1.116 0 3.347-.592 1.48-.988 20.987-1.09 34.956",stroke:"#648BD8",strokeWidth:"1.051",strokeLinecap:"round",strokeLinejoin:"round"}))),Znt={success:b4,error:L_,info:x4,warning:Unt},bM={404:Vnt,500:Gnt,403:Knt},Qnt=Object.keys(bM),Jnt=n=>{let{prefixCls:e,icon:r,status:i}=n;const a=Be(`${e}-icon`);if(Qnt.includes(`${i}`)){const s=bM[i];return C.createElement("div",{className:`${a} ${e}-image`},C.createElement(s,null))}const o=C.createElement(Znt[i]);return r===null||r===!1?null:C.createElement("div",{className:a},r||o)},ert=n=>{let{prefixCls:e,extra:r}=n;return r?C.createElement("div",{className:`${e}-extra`},r):null},j4=n=>{let{prefixCls:e,className:r,rootClassName:i,subTitle:a,title:o,style:s,children:l,status:c="info",icon:u,extra:d}=n;const{getPrefixCls:f,direction:h,result:p}=C.useContext(yr),g=f("result",e),[m,v,y]=Xnt(g),b=Be(g,`${g}-${c}`,r,p==null?void 0:p.className,i,{[`${g}-rtl`]:h==="rtl"},v,y),x=Object.assign(Object.assign({},p==null?void 0:p.style),s);return m(C.createElement("div",{className:b,style:x},C.createElement(Jnt,{prefixCls:g,status:c,icon:u}),C.createElement("div",{className:`${g}-title`},o),a&&C.createElement("div",{className:`${g}-subtitle`},a),C.createElement(ert,{prefixCls:g,extra:d}),l&&C.createElement("div",{className:`${g}-content`},l)))};j4.PRESENTED_IMAGE_403=bM[403];j4.PRESENTED_IMAGE_404=bM[404];j4.PRESENTED_IMAGE_500=bM[500];const hu=(n,e)=>new Zr(n).setA(e).toRgbString(),R1=(n,e)=>new Zr(n).lighten(e).toHexString(),trt=n=>{const e=ly(n,{theme:"dark"});return{1:e[0],2:e[1],3:e[2],4:e[3],5:e[6],6:e[5],7:e[4],8:e[6],9:e[5],10:e[4]}},nrt=(n,e)=>{const r=n||"#000",i=e||"#fff";return{colorBgBase:r,colorTextBase:i,colorText:hu(i,.85),colorTextSecondary:hu(i,.65),colorTextTertiary:hu(i,.45),colorTextQuaternary:hu(i,.25),colorFill:hu(i,.18),colorFillSecondary:hu(i,.12),colorFillTertiary:hu(i,.08),colorFillQuaternary:hu(i,.04),colorBgSolid:hu(i,.95),colorBgSolidHover:hu(i,1),colorBgSolidActive:hu(i,.9),colorBgElevated:R1(r,12),colorBgContainer:R1(r,8),colorBgLayout:R1(r,0),colorBgSpotlight:R1(r,26),colorBgBlur:hu(i,.04),colorBorder:R1(r,26),colorBorderSecondary:R1(r,19)}},rrt=(n,e)=>{const r=Object.keys(oY).map(a=>{const o=ly(n[a],{theme:"dark"});return Array.from({length:10},()=>1).reduce((s,l,c)=>(s[`${a}-${c+1}`]=o[c],s[`${a}${c+1}`]=o[c],s),{})}).reduce((a,o)=>(a=Object.assign(Object.assign({},a),o),a),{}),i=e??sY(n);return Object.assign(Object.assign(Object.assign({},i),r),yxe(n,{generateColorPalettes:trt,generateNeutralColorPalettes:nrt}))},wae={defaultSeed:PN.token,defaultAlgorithm:sY,darkAlgorithm:rrt};var irt=function(){var n=document.getSelection();if(!n.rangeCount)return function(){};for(var e=document.activeElement,r=[],i=0;i<n.rangeCount;i++)r.push(n.getRangeAt(i));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return n.removeAllRanges(),function(){n.type==="Caret"&&n.removeAllRanges(),n.rangeCount||r.forEach(function(a){n.addRange(a)}),e&&e.focus()}},art=irt,Sae={"text/plain":"Text","text/html":"Url",default:"Text"},ort="Copy to clipboard: #{key}, Enter";function srt(n){var e=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return n.replace(/#{\s*key\s*}/g,e)}function lrt(n,e){var r,i,a,o,s,l,c=!1;e||(e={}),r=e.debug||!1;try{a=art(),o=document.createRange(),s=document.getSelection(),l=document.createElement("span"),l.textContent=n,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",function(d){if(d.stopPropagation(),e.format)if(d.preventDefault(),typeof d.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var f=Sae[e.format]||Sae.default;window.clipboardData.setData(f,n)}else d.clipboardData.clearData(),d.clipboardData.setData(e.format,n);e.onCopy&&(d.preventDefault(),e.onCopy(d.clipboardData))}),document.body.appendChild(l),o.selectNodeContents(l),s.addRange(o);var u=document.execCommand("copy");if(!u)throw new Error("copy command was unsuccessful");c=!0}catch(d){r&&console.error("unable to copy using execCommand: ",d),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",n),e.onCopy&&e.onCopy(window.clipboardData),c=!0}catch(f){r&&console.error("unable to copy using clipboardData: ",f),r&&console.error("falling back to prompt"),i=srt("message"in e?e.message:ort),window.prompt(i,n)}}finally{s&&(typeof s.removeRange=="function"?s.removeRange(o):s.removeAllRanges()),l&&document.body.removeChild(l),a()}return c}var crt=lrt;const WSe=n=>{const{t:e}=Hp(),r=zq(),{source:i="404"}=n;return bn("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:bn(j4,{status:"404",title:e(i==="404"?"页面未找到":"参数错误"),subTitle:e(i==="404"?"Page Not Found":"Parameter Error"),extra:bn(ms,{type:"primary",onClick:()=>r("/"),children:e("goHome")})})})};var qSe={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function o(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new i:delete c._events[u]}function l(){this._events=new i,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,p,g){var m=r?r+u:u;if(!this._events[m])return!1;var v=this._events[m],y=arguments.length,b,x;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,p),!0;case 6:return v.fn.call(v.context,d,f,h,p,g),!0}for(x=1,b=new Array(y-1);x<y;x++)b[x-1]=arguments[x];v.fn.apply(v.context,b)}else{var _=v.length,S;for(x=0;x<_;x++)switch(v[x].once&&this.removeListener(u,v[x].fn,void 0,!0),y){case 1:v[x].fn.call(v[x].context);break;case 2:v[x].fn.call(v[x].context,d);break;case 3:v[x].fn.call(v[x].context,d,f);break;case 4:v[x].fn.call(v[x].context,d,f,h);break;default:if(!b)for(S=1,b=new Array(y-1);S<y;S++)b[S-1]=arguments[S];v[x].fn.apply(v[x].context,b)}}return!0},l.prototype.on=function(u,d,f){return o(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return o(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return s(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&s(this,p);else{for(var m=0,v=[],y=g.length;m<y;m++)(g[m].fn!==d||h&&!g[m].once||f&&g[m].context!==f)&&v.push(g[m]);v.length?this._events[p]=v.length===1?v[0]:v:s(this,p)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&s(this,d)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,n.exports=l})(qSe);var urt=qSe.exports;const YSe=Sl(urt);var Ji=1e-6,go=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function XSe(){var n=new go(9);return go!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function drt(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],n}function frt(n,e,r,i,a,o,s,l,c){var u=new go(9);return u[0]=n,u[1]=e,u[2]=r,u[3]=i,u[4]=a,u[5]=o,u[6]=s,u[7]=l,u[8]=c,u}function $i(){var n=new go(16);return go!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function KSe(n){var e=new go(16);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}function Bx(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function ZSe(n,e,r,i,a,o,s,l,c,u,d,f,h,p,g,m){var v=new go(16);return v[0]=n,v[1]=e,v[2]=r,v[3]=i,v[4]=a,v[5]=o,v[6]=s,v[7]=l,v[8]=c,v[9]=u,v[10]=d,v[11]=f,v[12]=h,v[13]=p,v[14]=g,v[15]=m,v}function uj(n,e,r,i,a,o,s,l,c,u,d,f,h,p,g,m,v){return n[0]=e,n[1]=r,n[2]=i,n[3]=a,n[4]=o,n[5]=s,n[6]=l,n[7]=c,n[8]=u,n[9]=d,n[10]=f,n[11]=h,n[12]=p,n[13]=g,n[14]=m,n[15]=v,n}function Hm(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function QSe(n,e){if(n===e){var r=e[1],i=e[2],a=e[3],o=e[6],s=e[7],l=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=r,n[6]=e[9],n[7]=e[13],n[8]=i,n[9]=o,n[11]=e[14],n[12]=a,n[13]=s,n[14]=l}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15];return n}function $f(n,e){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=e[9],h=e[10],p=e[11],g=e[12],m=e[13],v=e[14],y=e[15],b=r*l-i*s,x=r*c-a*s,_=r*u-o*s,S=i*c-a*l,M=i*u-o*l,E=a*u-o*c,T=d*m-f*g,P=d*v-h*g,A=d*y-p*g,N=f*v-h*m,O=f*y-p*m,I=h*y-p*v,D=b*I-x*O+_*N+S*A-M*P+E*T;return D?(D=1/D,n[0]=(l*I-c*O+u*N)*D,n[1]=(a*O-i*I-o*N)*D,n[2]=(m*E-v*M+y*S)*D,n[3]=(h*M-f*E-p*S)*D,n[4]=(c*A-s*I-u*P)*D,n[5]=(r*I-a*A+o*P)*D,n[6]=(v*_-g*E-y*x)*D,n[7]=(d*E-h*_+p*x)*D,n[8]=(s*O-l*A+u*T)*D,n[9]=(i*A-r*O-o*T)*D,n[10]=(g*M-m*_+y*b)*D,n[11]=(f*_-d*M-p*b)*D,n[12]=(l*P-s*N-c*T)*D,n[13]=(r*N-i*P+a*T)*D,n[14]=(m*x-g*S-v*b)*D,n[15]=(d*S-f*x+h*b)*D,n):null}function hrt(n,e){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=e[9],h=e[10],p=e[11],g=e[12],m=e[13],v=e[14],y=e[15];return n[0]=l*(h*y-p*v)-f*(c*y-u*v)+m*(c*p-u*h),n[1]=-(i*(h*y-p*v)-f*(a*y-o*v)+m*(a*p-o*h)),n[2]=i*(c*y-u*v)-l*(a*y-o*v)+m*(a*u-o*c),n[3]=-(i*(c*p-u*h)-l*(a*p-o*h)+f*(a*u-o*c)),n[4]=-(s*(h*y-p*v)-d*(c*y-u*v)+g*(c*p-u*h)),n[5]=r*(h*y-p*v)-d*(a*y-o*v)+g*(a*p-o*h),n[6]=-(r*(c*y-u*v)-s*(a*y-o*v)+g*(a*u-o*c)),n[7]=r*(c*p-u*h)-s*(a*p-o*h)+d*(a*u-o*c),n[8]=s*(f*y-p*m)-d*(l*y-u*m)+g*(l*p-u*f),n[9]=-(r*(f*y-p*m)-d*(i*y-o*m)+g*(i*p-o*f)),n[10]=r*(l*y-u*m)-s*(i*y-o*m)+g*(i*u-o*l),n[11]=-(r*(l*p-u*f)-s*(i*p-o*f)+d*(i*u-o*l)),n[12]=-(s*(f*v-h*m)-d*(l*v-c*m)+g*(l*h-c*f)),n[13]=r*(f*v-h*m)-d*(i*v-a*m)+g*(i*h-a*f),n[14]=-(r*(l*v-c*m)-s*(i*v-a*m)+g*(i*c-a*l)),n[15]=r*(l*h-c*f)-s*(i*h-a*f)+d*(i*c-a*l),n}function JSe(n){var e=n[0],r=n[1],i=n[2],a=n[3],o=n[4],s=n[5],l=n[6],c=n[7],u=n[8],d=n[9],f=n[10],h=n[11],p=n[12],g=n[13],m=n[14],v=n[15],y=e*s-r*o,b=e*l-i*o,x=e*c-a*o,_=r*l-i*s,S=r*c-a*s,M=i*c-a*l,E=u*g-d*p,T=u*m-f*p,P=u*v-h*p,A=d*m-f*g,N=d*v-h*g,O=f*v-h*m;return y*O-b*N+x*A+_*P-S*T+M*E}function Vs(n,e,r){var i=e[0],a=e[1],o=e[2],s=e[3],l=e[4],c=e[5],u=e[6],d=e[7],f=e[8],h=e[9],p=e[10],g=e[11],m=e[12],v=e[13],y=e[14],b=e[15],x=r[0],_=r[1],S=r[2],M=r[3];return n[0]=x*i+_*l+S*f+M*m,n[1]=x*a+_*c+S*h+M*v,n[2]=x*o+_*u+S*p+M*y,n[3]=x*s+_*d+S*g+M*b,x=r[4],_=r[5],S=r[6],M=r[7],n[4]=x*i+_*l+S*f+M*m,n[5]=x*a+_*c+S*h+M*v,n[6]=x*o+_*u+S*p+M*y,n[7]=x*s+_*d+S*g+M*b,x=r[8],_=r[9],S=r[10],M=r[11],n[8]=x*i+_*l+S*f+M*m,n[9]=x*a+_*c+S*h+M*v,n[10]=x*o+_*u+S*p+M*y,n[11]=x*s+_*d+S*g+M*b,x=r[12],_=r[13],S=r[14],M=r[15],n[12]=x*i+_*l+S*f+M*m,n[13]=x*a+_*c+S*h+M*v,n[14]=x*o+_*u+S*p+M*y,n[15]=x*s+_*d+S*g+M*b,n}function cx(n,e,r){var i=r[0],a=r[1],o=r[2],s,l,c,u,d,f,h,p,g,m,v,y;return e===n?(n[12]=e[0]*i+e[4]*a+e[8]*o+e[12],n[13]=e[1]*i+e[5]*a+e[9]*o+e[13],n[14]=e[2]*i+e[6]*a+e[10]*o+e[14],n[15]=e[3]*i+e[7]*a+e[11]*o+e[15]):(s=e[0],l=e[1],c=e[2],u=e[3],d=e[4],f=e[5],h=e[6],p=e[7],g=e[8],m=e[9],v=e[10],y=e[11],n[0]=s,n[1]=l,n[2]=c,n[3]=u,n[4]=d,n[5]=f,n[6]=h,n[7]=p,n[8]=g,n[9]=m,n[10]=v,n[11]=y,n[12]=s*i+d*a+g*o+e[12],n[13]=l*i+f*a+m*o+e[13],n[14]=c*i+h*a+v*o+e[14],n[15]=u*i+p*a+y*o+e[15]),n}function e2e(n,e,r){var i=r[0],a=r[1],o=r[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*a,n[5]=e[5]*a,n[6]=e[6]*a,n[7]=e[7]*a,n[8]=e[8]*o,n[9]=e[9]*o,n[10]=e[10]*o,n[11]=e[11]*o,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function prt(n,e,r,i){var a=i[0],o=i[1],s=i[2],l=Math.hypot(a,o,s),c,u,d,f,h,p,g,m,v,y,b,x,_,S,M,E,T,P,A,N,O,I,D,k;return l<Ji?null:(l=1/l,a*=l,o*=l,s*=l,c=Math.sin(r),u=Math.cos(r),d=1-u,f=e[0],h=e[1],p=e[2],g=e[3],m=e[4],v=e[5],y=e[6],b=e[7],x=e[8],_=e[9],S=e[10],M=e[11],E=a*a*d+u,T=o*a*d+s*c,P=s*a*d-o*c,A=a*o*d-s*c,N=o*o*d+u,O=s*o*d+a*c,I=a*s*d+o*c,D=o*s*d-a*c,k=s*s*d+u,n[0]=f*E+m*T+x*P,n[1]=h*E+v*T+_*P,n[2]=p*E+y*T+S*P,n[3]=g*E+b*T+M*P,n[4]=f*A+m*N+x*O,n[5]=h*A+v*N+_*O,n[6]=p*A+y*N+S*O,n[7]=g*A+b*N+M*O,n[8]=f*I+m*D+x*k,n[9]=h*I+v*D+_*k,n[10]=p*I+y*D+S*k,n[11]=g*I+b*D+M*k,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n)}function t2e(n,e,r){var i=Math.sin(r),a=Math.cos(r),o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],h=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=o*a+u*i,n[5]=s*a+d*i,n[6]=l*a+f*i,n[7]=c*a+h*i,n[8]=u*a-o*i,n[9]=d*a-s*i,n[10]=f*a-l*i,n[11]=h*a-c*i,n}function n2e(n,e,r){var i=Math.sin(r),a=Math.cos(r),o=e[0],s=e[1],l=e[2],c=e[3],u=e[8],d=e[9],f=e[10],h=e[11];return e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=o*a-u*i,n[1]=s*a-d*i,n[2]=l*a-f*i,n[3]=c*a-h*i,n[8]=o*i+u*a,n[9]=s*i+d*a,n[10]=l*i+f*a,n[11]=c*i+h*a,n}function grt(n,e,r){var i=Math.sin(r),a=Math.cos(r),o=e[0],s=e[1],l=e[2],c=e[3],u=e[4],d=e[5],f=e[6],h=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=o*a+u*i,n[1]=s*a+d*i,n[2]=l*a+f*i,n[3]=c*a+h*i,n[4]=u*a-o*i,n[5]=d*a-s*i,n[6]=f*a-l*i,n[7]=h*a-c*i,n}function jg(n,e){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n}function u0(n,e){return n[0]=e[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=e[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=e[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function r2e(n,e,r){var i=r[0],a=r[1],o=r[2],s=Math.hypot(i,a,o),l,c,u;return s<Ji?null:(s=1/s,i*=s,a*=s,o*=s,l=Math.sin(e),c=Math.cos(e),u=1-c,n[0]=i*i*u+c,n[1]=a*i*u+o*l,n[2]=o*i*u-a*l,n[3]=0,n[4]=i*a*u-o*l,n[5]=a*a*u+c,n[6]=o*a*u+i*l,n[7]=0,n[8]=i*o*u+a*l,n[9]=a*o*u-i*l,n[10]=o*o*u+c,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}function i2e(n,e){var r=Math.sin(e),i=Math.cos(e);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=i,n[6]=r,n[7]=0,n[8]=0,n[9]=-r,n[10]=i,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function a2e(n,e){var r=Math.sin(e),i=Math.cos(e);return n[0]=i,n[1]=0,n[2]=-r,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=r,n[9]=0,n[10]=i,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function dj(n,e){var r=Math.sin(e),i=Math.cos(e);return n[0]=i,n[1]=r,n[2]=0,n[3]=0,n[4]=-r,n[5]=i,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function o2e(n,e,r){var i=e[0],a=e[1],o=e[2],s=e[3],l=i+i,c=a+a,u=o+o,d=i*l,f=i*c,h=i*u,p=a*c,g=a*u,m=o*u,v=s*l,y=s*c,b=s*u;return n[0]=1-(p+m),n[1]=f+b,n[2]=h-y,n[3]=0,n[4]=f-b,n[5]=1-(d+m),n[6]=g+v,n[7]=0,n[8]=h+y,n[9]=g-v,n[10]=1-(d+p),n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function mrt(n,e){var r=new go(3),i=-e[0],a=-e[1],o=-e[2],s=e[3],l=e[4],c=e[5],u=e[6],d=e[7],f=i*i+a*a+o*o+s*s;return f>0?(r[0]=(l*s+d*i+c*o-u*a)*2/f,r[1]=(c*s+d*a+u*i-l*o)*2/f,r[2]=(u*s+d*o+l*a-c*i)*2/f):(r[0]=(l*s+d*i+c*o-u*a)*2,r[1]=(c*s+d*a+u*i-l*o)*2,r[2]=(u*s+d*o+l*a-c*i)*2),o2e(n,e,r),n}function jN(n,e){return n[0]=e[12],n[1]=e[13],n[2]=e[14],n}function zx(n,e){var r=e[0],i=e[1],a=e[2],o=e[4],s=e[5],l=e[6],c=e[8],u=e[9],d=e[10];return n[0]=Math.hypot(r,i,a),n[1]=Math.hypot(o,s,l),n[2]=Math.hypot(c,u,d),n}function HN(n,e){var r=new go(3);zx(r,e);var i=1/r[0],a=1/r[1],o=1/r[2],s=e[0]*i,l=e[1]*a,c=e[2]*o,u=e[4]*i,d=e[5]*a,f=e[6]*o,h=e[8]*i,p=e[9]*a,g=e[10]*o,m=s+d+g,v=0;return m>0?(v=Math.sqrt(m+1)*2,n[3]=.25*v,n[0]=(f-p)/v,n[1]=(h-c)/v,n[2]=(l-u)/v):s>d&&s>g?(v=Math.sqrt(1+s-d-g)*2,n[3]=(f-p)/v,n[0]=.25*v,n[1]=(l+u)/v,n[2]=(h+c)/v):d>g?(v=Math.sqrt(1+d-s-g)*2,n[3]=(h-c)/v,n[0]=(l+u)/v,n[1]=.25*v,n[2]=(f+p)/v):(v=Math.sqrt(1+g-s-d)*2,n[3]=(l-u)/v,n[0]=(h+c)/v,n[1]=(f+p)/v,n[2]=.25*v),n}function vrt(n,e,r,i){var a=e[0],o=e[1],s=e[2],l=e[3],c=a+a,u=o+o,d=s+s,f=a*c,h=a*u,p=a*d,g=o*u,m=o*d,v=s*d,y=l*c,b=l*u,x=l*d,_=i[0],S=i[1],M=i[2];return n[0]=(1-(g+v))*_,n[1]=(h+x)*_,n[2]=(p-b)*_,n[3]=0,n[4]=(h-x)*S,n[5]=(1-(f+v))*S,n[6]=(m+y)*S,n[7]=0,n[8]=(p+b)*M,n[9]=(m-y)*M,n[10]=(1-(f+g))*M,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function V2(n,e,r,i,a){var o=e[0],s=e[1],l=e[2],c=e[3],u=o+o,d=s+s,f=l+l,h=o*u,p=o*d,g=o*f,m=s*d,v=s*f,y=l*f,b=c*u,x=c*d,_=c*f,S=i[0],M=i[1],E=i[2],T=a[0],P=a[1],A=a[2],N=(1-(m+y))*S,O=(p+_)*S,I=(g-x)*S,D=(p-_)*M,k=(1-(h+y))*M,$=(v+b)*M,B=(g+x)*E,F=(v-b)*E,G=(1-(h+m))*E;return n[0]=N,n[1]=O,n[2]=I,n[3]=0,n[4]=D,n[5]=k,n[6]=$,n[7]=0,n[8]=B,n[9]=F,n[10]=G,n[11]=0,n[12]=r[0]+T-(N*T+D*P+B*A),n[13]=r[1]+P-(O*T+k*P+F*A),n[14]=r[2]+A-(I*T+$*P+G*A),n[15]=1,n}function rX(n,e){var r=e[0],i=e[1],a=e[2],o=e[3],s=r+r,l=i+i,c=a+a,u=r*s,d=i*s,f=i*l,h=a*s,p=a*l,g=a*c,m=o*s,v=o*l,y=o*c;return n[0]=1-f-g,n[1]=d+y,n[2]=h-v,n[3]=0,n[4]=d-y,n[5]=1-u-g,n[6]=p+m,n[7]=0,n[8]=h+v,n[9]=p-m,n[10]=1-u-f,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function yrt(n,e,r,i,a,o,s){var l=1/(r-e),c=1/(a-i),u=1/(o-s);return n[0]=o*2*l,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o*2*c,n[6]=0,n[7]=0,n[8]=(r+e)*l,n[9]=(a+i)*c,n[10]=(s+o)*u,n[11]=-1,n[12]=0,n[13]=0,n[14]=s*o*2*u,n[15]=0,n}function s2e(n,e,r,i,a){var o=1/Math.tan(e/2),s;return n[0]=o/r,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,a!=null&&a!==1/0?(s=1/(i-a),n[10]=(a+i)*s,n[14]=2*a*i*s):(n[10]=-1,n[14]=-2*i),n}var brt=s2e;function xrt(n,e,r,i,a){var o=1/Math.tan(e/2),s;return n[0]=o/r,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,a!=null&&a!==1/0?(s=1/(i-a),n[10]=a*s,n[14]=a*i*s):(n[10]=-1,n[14]=-i),n}function _rt(n,e,r,i){var a=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),l=Math.tan(e.rightDegrees*Math.PI/180),c=2/(s+l),u=2/(a+o);return n[0]=c,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=u,n[6]=0,n[7]=0,n[8]=-((s-l)*c*.5),n[9]=(a-o)*u*.5,n[10]=i/(r-i),n[11]=-1,n[12]=0,n[13]=0,n[14]=i*r/(r-i),n[15]=0,n}function l2e(n,e,r,i,a,o,s){var l=1/(e-r),c=1/(i-a),u=1/(o-s);return n[0]=-2*l,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*u,n[11]=0,n[12]=(e+r)*l,n[13]=(a+i)*c,n[14]=(s+o)*u,n[15]=1,n}var c2e=l2e;function u2e(n,e,r,i,a,o,s){var l=1/(e-r),c=1/(i-a),u=1/(o-s);return n[0]=-2*l,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=u,n[11]=0,n[12]=(e+r)*l,n[13]=(a+i)*c,n[14]=o*u,n[15]=1,n}function d2e(n,e,r,i){var a,o,s,l,c,u,d,f,h,p,g=e[0],m=e[1],v=e[2],y=i[0],b=i[1],x=i[2],_=r[0],S=r[1],M=r[2];return Math.abs(g-_)<Ji&&Math.abs(m-S)<Ji&&Math.abs(v-M)<Ji?Hm(n):(d=g-_,f=m-S,h=v-M,p=1/Math.hypot(d,f,h),d*=p,f*=p,h*=p,a=b*h-x*f,o=x*d-y*h,s=y*f-b*d,p=Math.hypot(a,o,s),p?(p=1/p,a*=p,o*=p,s*=p):(a=0,o=0,s=0),l=f*s-h*o,c=h*a-d*s,u=d*o-f*a,p=Math.hypot(l,c,u),p?(p=1/p,l*=p,c*=p,u*=p):(l=0,c=0,u=0),n[0]=a,n[1]=l,n[2]=d,n[3]=0,n[4]=o,n[5]=c,n[6]=f,n[7]=0,n[8]=s,n[9]=u,n[10]=h,n[11]=0,n[12]=-(a*g+o*m+s*v),n[13]=-(l*g+c*m+u*v),n[14]=-(d*g+f*m+h*v),n[15]=1,n)}function wrt(n,e,r,i){var a=e[0],o=e[1],s=e[2],l=i[0],c=i[1],u=i[2],d=a-r[0],f=o-r[1],h=s-r[2],p=d*d+f*f+h*h;p>0&&(p=1/Math.sqrt(p),d*=p,f*=p,h*=p);var g=c*h-u*f,m=u*d-l*h,v=l*f-c*d;return p=g*g+m*m+v*v,p>0&&(p=1/Math.sqrt(p),g*=p,m*=p,v*=p),n[0]=g,n[1]=m,n[2]=v,n[3]=0,n[4]=f*v-h*m,n[5]=h*g-d*v,n[6]=d*m-f*g,n[7]=0,n[8]=d,n[9]=f,n[10]=h,n[11]=0,n[12]=a,n[13]=o,n[14]=s,n[15]=1,n}function Srt(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"}function Ert(n){return Math.hypot(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])}function Crt(n,e,r){return n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n[3]=e[3]+r[3],n[4]=e[4]+r[4],n[5]=e[5]+r[5],n[6]=e[6]+r[6],n[7]=e[7]+r[7],n[8]=e[8]+r[8],n[9]=e[9]+r[9],n[10]=e[10]+r[10],n[11]=e[11]+r[11],n[12]=e[12]+r[12],n[13]=e[13]+r[13],n[14]=e[14]+r[14],n[15]=e[15]+r[15],n}function f2e(n,e,r){return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],n[3]=e[3]-r[3],n[4]=e[4]-r[4],n[5]=e[5]-r[5],n[6]=e[6]-r[6],n[7]=e[7]-r[7],n[8]=e[8]-r[8],n[9]=e[9]-r[9],n[10]=e[10]-r[10],n[11]=e[11]-r[11],n[12]=e[12]-r[12],n[13]=e[13]-r[13],n[14]=e[14]-r[14],n[15]=e[15]-r[15],n}function Mrt(n,e,r){return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n[3]=e[3]*r,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*r,n[9]=e[9]*r,n[10]=e[10]*r,n[11]=e[11]*r,n[12]=e[12]*r,n[13]=e[13]*r,n[14]=e[14]*r,n[15]=e[15]*r,n}function Trt(n,e,r,i){return n[0]=e[0]+r[0]*i,n[1]=e[1]+r[1]*i,n[2]=e[2]+r[2]*i,n[3]=e[3]+r[3]*i,n[4]=e[4]+r[4]*i,n[5]=e[5]+r[5]*i,n[6]=e[6]+r[6]*i,n[7]=e[7]+r[7]*i,n[8]=e[8]+r[8]*i,n[9]=e[9]+r[9]*i,n[10]=e[10]+r[10]*i,n[11]=e[11]+r[11]*i,n[12]=e[12]+r[12]*i,n[13]=e[13]+r[13]*i,n[14]=e[14]+r[14]*i,n[15]=e[15]+r[15]*i,n}function fj(n,e){return n[0]===e[0]&&n[1]===e[1]&&n[2]===e[2]&&n[3]===e[3]&&n[4]===e[4]&&n[5]===e[5]&&n[6]===e[6]&&n[7]===e[7]&&n[8]===e[8]&&n[9]===e[9]&&n[10]===e[10]&&n[11]===e[11]&&n[12]===e[12]&&n[13]===e[13]&&n[14]===e[14]&&n[15]===e[15]}function Art(n,e){var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],l=n[5],c=n[6],u=n[7],d=n[8],f=n[9],h=n[10],p=n[11],g=n[12],m=n[13],v=n[14],y=n[15],b=e[0],x=e[1],_=e[2],S=e[3],M=e[4],E=e[5],T=e[6],P=e[7],A=e[8],N=e[9],O=e[10],I=e[11],D=e[12],k=e[13],$=e[14],B=e[15];return Math.abs(r-b)<=Ji*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-x)<=Ji*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-_)<=Ji*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(o-S)<=Ji*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(s-M)<=Ji*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(l-E)<=Ji*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(c-T)<=Ji*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(u-P)<=Ji*Math.max(1,Math.abs(u),Math.abs(P))&&Math.abs(d-A)<=Ji*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(f-N)<=Ji*Math.max(1,Math.abs(f),Math.abs(N))&&Math.abs(h-O)<=Ji*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(p-I)<=Ji*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(g-D)<=Ji*Math.max(1,Math.abs(g),Math.abs(D))&&Math.abs(m-k)<=Ji*Math.max(1,Math.abs(m),Math.abs(k))&&Math.abs(v-$)<=Ji*Math.max(1,Math.abs(v),Math.abs($))&&Math.abs(y-B)<=Ji*Math.max(1,Math.abs(y),Math.abs(B))}var h2e=Vs,Rrt=f2e;const Prt=Object.freeze(Object.defineProperty({__proto__:null,add:Crt,adjoint:hrt,clone:KSe,copy:Bx,create:$i,determinant:JSe,equals:Art,exactEquals:fj,frob:Ert,fromQuat:rX,fromQuat2:mrt,fromRotation:r2e,fromRotationTranslation:o2e,fromRotationTranslationScale:vrt,fromRotationTranslationScaleOrigin:V2,fromScaling:u0,fromTranslation:jg,fromValues:ZSe,fromXRotation:i2e,fromYRotation:a2e,fromZRotation:dj,frustum:yrt,getRotation:HN,getScaling:zx,getTranslation:jN,identity:Hm,invert:$f,lookAt:d2e,mul:h2e,multiply:Vs,multiplyScalar:Mrt,multiplyScalarAndAdd:Trt,ortho:c2e,orthoNO:l2e,orthoZO:u2e,perspective:brt,perspectiveFromFieldOfView:_rt,perspectiveNO:s2e,perspectiveZO:xrt,rotate:prt,rotateX:t2e,rotateY:n2e,rotateZ:grt,scale:e2e,set:uj,str:Srt,sub:Rrt,subtract:f2e,targetTo:wrt,translate:cx,transpose:QSe},Symbol.toStringTag,{value:"Module"}));function Nr(){var n=new go(3);return go!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function Vh(n){var e=new go(3);return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}function Zh(n){var e=n[0],r=n[1],i=n[2];return Math.hypot(e,r,i)}function ji(n,e,r){var i=new go(3);return i[0]=n,i[1]=e,i[2]=r,i}function Bf(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}function zs(n,e,r,i){return n[0]=e,n[1]=r,n[2]=i,n}function Sm(n,e,r){return n[0]=e[0]+r[0],n[1]=e[1]+r[1],n[2]=e[2]+r[2],n}function hj(n,e,r){return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],n}function Nrt(n,e,r){return n[0]=e[0]*r[0],n[1]=e[1]*r[1],n[2]=e[2]*r[2],n}function Ort(n,e,r){return n[0]=Math.min(e[0],r[0]),n[1]=Math.min(e[1],r[1]),n[2]=Math.min(e[2],r[2]),n}function Irt(n,e,r){return n[0]=Math.max(e[0],r[0]),n[1]=Math.max(e[1],r[1]),n[2]=Math.max(e[2],r[2]),n}function WN(n,e,r){return n[0]=e[0]*r,n[1]=e[1]*r,n[2]=e[2]*r,n}function Drt(n,e){var r=e[0]-n[0],i=e[1]-n[1],a=e[2]-n[2];return Math.hypot(r,i,a)}function U0(n,e){var r=e[0],i=e[1],a=e[2],o=r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),n[0]=e[0]*o,n[1]=e[1]*o,n[2]=e[2]*o,n}function zf(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function mP(n,e,r){var i=e[0],a=e[1],o=e[2],s=r[0],l=r[1],c=r[2];return n[0]=a*c-o*l,n[1]=o*s-i*c,n[2]=i*l-a*s,n}function pj(n,e,r,i){var a=e[0],o=e[1],s=e[2];return n[0]=a+i*(r[0]-a),n[1]=o+i*(r[1]-o),n[2]=s+i*(r[2]-s),n}function Gs(n,e,r){var i=e[0],a=e[1],o=e[2],s=r[3]*i+r[7]*a+r[11]*o+r[15];return s=s||1,n[0]=(r[0]*i+r[4]*a+r[8]*o+r[12])/s,n[1]=(r[1]*i+r[5]*a+r[9]*o+r[13])/s,n[2]=(r[2]*i+r[6]*a+r[10]*o+r[14])/s,n}function Lrt(n,e,r){var i=e[0],a=e[1],o=e[2];return n[0]=i*r[0]+a*r[3]+o*r[6],n[1]=i*r[1]+a*r[4]+o*r[7],n[2]=i*r[2]+a*r[5]+o*r[8],n}function krt(n,e,r){var i=r[0],a=r[1],o=r[2],s=r[3],l=e[0],c=e[1],u=e[2],d=a*u-o*c,f=o*l-i*u,h=i*c-a*l,p=a*h-o*f,g=o*d-i*h,m=i*f-a*d,v=s*2;return d*=v,f*=v,h*=v,p*=2,g*=2,m*=2,n[0]=l+d+p,n[1]=c+f+g,n[2]=u+h+m,n}function lS(n,e){var r=n[0],i=n[1],a=n[2],o=e[0],s=e[1],l=e[2];return Math.abs(r-o)<=Ji*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=Ji*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-l)<=Ji*Math.max(1,Math.abs(a),Math.abs(l))}var Frt=hj,Eae=Drt,p2e=Zh;(function(){var n=Nr();return function(e,r,i,a,o,s){var l,c;for(r||(r=3),i||(i=0),a?c=Math.min(a*r+i,e.length):c=e.length,l=i;l<c;l+=r)n[0]=e[l],n[1]=e[l+1],n[2]=e[l+2],o(n,n,s),e[l]=n[0],e[l+1]=n[1],e[l+2]=n[2];return e}})();function Uf(){var n=new go(4);return go!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function n2(n,e,r,i){var a=new go(4);return a[0]=n,a[1]=e,a[2]=r,a[3]=i,a}function $rt(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}function Brt(n,e,r,i,a){return n[0]=e,n[1]=r,n[2]=i,n[3]=a,n}function zrt(n,e){var r=e[0],i=e[1],a=e[2],o=e[3],s=r*r+i*i+a*a+o*o;return s>0&&(s=1/Math.sqrt(s)),n[0]=r*s,n[1]=i*s,n[2]=a*s,n[3]=o*s,n}function cp(n,e,r){var i=e[0],a=e[1],o=e[2],s=e[3];return n[0]=r[0]*i+r[4]*a+r[8]*o+r[12]*s,n[1]=r[1]*i+r[5]*a+r[9]*o+r[13]*s,n[2]=r[2]*i+r[6]*a+r[10]*o+r[14]*s,n[3]=r[3]*i+r[7]*a+r[11]*o+r[15]*s,n}(function(){var n=Uf();return function(e,r,i,a,o,s){var l,c;for(r||(r=4),i||(i=0),a?c=Math.min(a*r+i,e.length):c=e.length,l=i;l<c;l+=r)n[0]=e[l],n[1]=e[l+1],n[2]=e[l+2],n[3]=e[l+3],o(n,n,s),e[l]=n[0],e[l+1]=n[1],e[l+2]=n[2],e[l+3]=n[3];return e}})();function Ao(){var n=new go(4);return go!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function nm(n,e,r){r=r*.5;var i=Math.sin(r);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(r),n}function Em(n,e,r){var i=e[0],a=e[1],o=e[2],s=e[3],l=r[0],c=r[1],u=r[2],d=r[3];return n[0]=i*d+s*l+a*u-o*c,n[1]=a*d+s*c+o*l-i*u,n[2]=o*d+s*u+i*c-a*l,n[3]=s*d-i*l-a*c-o*u,n}function nF(n,e,r,i){var a=e[0],o=e[1],s=e[2],l=e[3],c=r[0],u=r[1],d=r[2],f=r[3],h,p,g,m,v;return p=a*c+o*u+s*d+l*f,p<0&&(p=-p,c=-c,u=-u,d=-d,f=-f),1-p>Ji?(h=Math.acos(p),g=Math.sin(h),m=Math.sin((1-i)*h)/g,v=Math.sin(i*h)/g):(m=1-i,v=i),n[0]=m*a+v*c,n[1]=m*o+v*u,n[2]=m*s+v*d,n[3]=m*l+v*f,n}function rF(n,e){var r=e[0],i=e[1],a=e[2],o=e[3],s=r*r+i*i+a*a+o*o,l=s?1/s:0;return n[0]=-r*l,n[1]=-i*l,n[2]=-a*l,n[3]=o*l,n}function Urt(n,e){var r=e[0]+e[4]+e[8],i;if(r>0)i=Math.sqrt(r+1),n[3]=.5*i,i=.5/i,n[0]=(e[5]-e[7])*i,n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[a*3+a]&&(a=2);var o=(a+1)%3,s=(a+2)%3;i=Math.sqrt(e[a*3+a]-e[o*3+o]-e[s*3+s]+1),n[a]=.5*i,i=.5/i,n[3]=(e[o*3+s]-e[s*3+o])*i,n[o]=(e[o*3+a]+e[a*3+o])*i,n[s]=(e[s*3+a]+e[a*3+s])*i}return n}function D3(n,e,r,i){var a=.5*Math.PI/180;e*=a,r*=a,i*=a;var o=Math.sin(e),s=Math.cos(e),l=Math.sin(r),c=Math.cos(r),u=Math.sin(i),d=Math.cos(i);return n[0]=o*c*d-s*l*u,n[1]=s*l*d+o*c*u,n[2]=s*c*u-o*l*d,n[3]=s*c*d+o*l*u,n}var Vrt=n2,L3=$rt,Cae=Brt,Mae=Em,qN=zrt;(function(){var n=Nr(),e=ji(1,0,0),r=ji(0,1,0);return function(i,a,o){var s=zf(a,o);return s<-.999999?(mP(n,e,a),p2e(n)<1e-6&&mP(n,r,a),U0(n,n),nm(i,n,Math.PI),i):s>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(mP(n,a,o),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+s,qN(i,i))}})();(function(){var n=Ao(),e=Ao();return function(r,i,a,o,s,l){return nF(n,i,s,l),nF(e,a,o,l),nF(r,n,e,2*l*(1-l)),r}})();(function(){var n=XSe();return function(e,r,i,a){return n[0]=i[0],n[3]=i[1],n[6]=i[2],n[1]=a[0],n[4]=a[1],n[7]=a[2],n[2]=-r[0],n[5]=-r[1],n[8]=-r[2],qN(e,Urt(e,n))}})();function iX(){var n=new go(2);return go!=Float32Array&&(n[0]=0,n[1]=0),n}function Grt(n,e){return n[0]=e[0],n[1]=e[1],n}function jrt(n,e,r){return n[0]=e,n[1]=r,n}function Hrt(n,e){var r=e[0],i=e[1],a=r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),n[0]=e[0]*a,n[1]=e[1]*a,n}function Wrt(n,e){return n[0]*e[0]+n[1]*e[1]}function qrt(n,e){return n[0]===e[0]&&n[1]===e[1]}(function(){var n=iX();return function(e,r,i,a,o,s){var l,c;for(r||(r=2),i||(i=0),a?c=Math.min(a*r+i,e.length):c=e.length,l=i;l<c;l+=r)n[0]=e[l],n[1]=e[l+1],o(n,n,s),e[l]=n[0],e[l+1]=n[1];return e}})();var YE=function(n){return n!==null&&typeof n!="function"&&isFinite(n.length)},Yrt=function(n,e){return YE(n)?n.indexOf(e)>-1:!1},Xrt=function(n,e){if(!YE(n))return n;for(var r=[],i=0;i<n.length;i++){var a=n[i];e(a,i)&&r.push(a)}return r},Krt=function(n,e){return e===void 0&&(e=[]),Xrt(n,function(r){return!Yrt(e,r)})};function cn(n){return typeof n=="function"}function Nn(n){return n==null}function Jc(n){return Array.isArray(n)}const Xa=function(n){var e=typeof n;return n!==null&&e==="object"||e==="function"};function g2e(n,e){if(n){var r;if(Jc(n))for(var i=0,a=n.length;i<a&&(r=e(n[i],i),r!==!1);i++);else if(Xa(n)){for(var o in n)if(n.hasOwnProperty(o)&&(r=e(n[o],o),r===!1))break}}}var gj=function(n){return typeof n=="object"&&n!==null},Zrt={}.toString,m2e=function(n,e){return Zrt.call(n)==="[object "+e+"]"},Ux=function(n){if(!gj(n)||!m2e(n,"Object"))return!1;if(Object.getPrototypeOf(n)===null)return!0;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e};function YN(n){if(!Array.isArray(n))return-1/0;var e=n.length;if(!e)return-1/0;for(var r=n[0],i=1;i<e;i++)r=Math.max(r,n[i]);return r}const XN=function(n){if(Jc(n))return n.reduce(function(e,r){return Math.min(e,r)},n[0])};var Qrt=function(n,e,r){if(!Jc(n)&&!Ux(n))return n;var i=r;return g2e(n,function(a,o){i=e(i,a,o)}),i};function Kr(n){return typeof n=="string"}function Jrt(n,e){e===void 0&&(e=new Map);var r=[];if(Array.isArray(n))for(var i=0,a=n.length;i<a;i++){var o=n[i];e.has(o)||(r.push(o),e.set(o,!0))}return r}var eit=Object.prototype.hasOwnProperty;function H4(n,e){if(!e||!Jc(n))return{};for(var r={},i=cn(e)?e:function(l){return l[e]},a,o=0;o<n.length;o++){var s=n[o];a=i(s),eit.call(r,a)?r[a].push(s):r[a]=[s]}return r}var Ta=function(n,e,r){return n<e?e:n>r?r:n};function on(n){return typeof n=="number"}var tit=1e-5;function G2(n,e,r){return r===void 0&&(r=tit),n===e||Math.abs(n-e)<r}const nit=function(n,e){if(Jc(n)){for(var r,i=-1/0,a=0;a<n.length;a++){var o=n[a],s=cn(e)?e(o):o[e];s>i&&(r=o,i=s)}return r}},rit=function(n,e){if(Jc(n)){for(var r,i=1/0,a=0;a<n.length;a++){var o=n[a],s=cn(e)?e(o):o[e];s<i&&(r=o,i=s)}return r}};var v2e=function(n,e){return(n%e+e)%e};const y2e=function(n){return Nn(n)?"":n.toString()};var iit=function(n){var e=y2e(n);return e.charAt(0).toLowerCase()+e.substring(1)};function ait(n,e){return!n||!e?n:n.replace(/\\?\{([^{}]+)\}/g,function(r,i){return r.charAt(0)==="\\"?r.slice(1):e[i]===void 0?"":e[i]})}var KN=function(n){var e=y2e(n);return e.charAt(0).toUpperCase()+e.substring(1)},oit={}.toString,sit=function(n){return oit.call(n).replace(/^\[object /,"").replace(/]$/,"")},XE=function(n){return m2e(n,"Boolean")};function lit(n){return n instanceof Date}function cit(n){return n===null}var uit=Object.prototype,dit=function(n){var e=n&&n.constructor,r=typeof e=="function"&&e.prototype||uit;return n===r},Kn=function(n){return n===void 0},Wm=function(n){if(typeof n!="object"||n===null)return n;var e;if(Jc(n)){e=[];for(var r=0,i=n.length;r<i;r++)typeof n[r]=="object"&&n[r]!=null?e[r]=Wm(n[r]):e[r]=n[r]}else{e={};for(var a in n)typeof n[a]=="object"&&n[a]!=null?e[a]=Wm(n[a]):e[a]=n[a]}return e};function xM(n,e,r){var i;return function(){var a=this,o=arguments,s=function(){i=null,n.apply(a,o)};clearTimeout(i),i=setTimeout(s,e)}}function fit(n){var e,r,i,a=n||1;function o(l,c){++e>a&&(i=r,s(1),++e),r[l]=c}function s(l){e=0,r=Object.create(null),l||(i=Object.create(null))}return s(),{clear:s,has:function(l){return r[l]!==void 0||i[l]!==void 0},get:function(l){var c=r[l];if(c!==void 0)return c;if((c=i[l])!==void 0)return o(l,c),c},set:function(l,c){r[l]!==void 0?r[l]=c:o(l,c)}}}var iF=new Map;function mj(n,e,r){r===void 0&&(r=128);var i=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var s=e?e.apply(this,a):a[0];iF.has(n)||iF.set(n,fit(r));var l=iF.get(n);if(l.has(s))return l.get(s);var c=n.apply(this,a);return l.set(s,c),c};return i}var hit=5;function pit(n,e){if(Object.hasOwn)return Object.hasOwn(n,e);if(n==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(n),e)}function b2e(n,e,r,i){r=r||0,i=i||hit;for(var a in e)if(pit(e,a)){var o=e[a];o!==null&&Ux(o)?(Ux(n[a])||(n[a]={}),r<i?b2e(n[a],o,r+1,i):n[a]=e[a]):Jc(o)?(n[a]=[],n[a]=n[a].concat(o)):o!==void 0&&(n[a]=o)}}var xl=function(n){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var i=0;i<e.length;i+=1)b2e(n,e[i]);return n},git=Object.prototype.hasOwnProperty;function Df(n){if(Nn(n))return!0;if(YE(n))return!n.length;var e=sit(n);if(e==="Map"||e==="Set")return!n.size;if(dit(n))return!Object.keys(n).length;for(var r in n)if(git.call(n,r))return!1;return!0}var Ra=function(n,e){if(n===e)return!0;if(!n||!e||Kr(n)||Kr(e))return!1;if(YE(n)||YE(e)){if(n.length!==e.length)return!1;for(var r=!0,i=0;i<n.length&&(r=Ra(n[i],e[i]),!!r);i++);return r}if(gj(n)||gj(e)){var a=Object.keys(n),o=Object.keys(e);if(a.length!==o.length)return!1;for(var r=!0,i=0;i<a.length&&(r=Ra(n[a[i]],e[a[i]]),!!r);i++);return r}return!1};const cl=function(n,e,r){for(var i=0,a=Kr(e)?e.split("."):e;n&&i<a.length;)n=n[a[i++]];return n===void 0||i<a.length?r:n},KE=function(n,e,r){var i=n,a=Kr(e)?e.split("."):e;return a.forEach(function(o,s){s<a.length-1?(Xa(i[o])||(i[o]=on(a[s+1])?[]:{}),i=i[o]):i[o]=r}),n};var mit=Object.prototype.hasOwnProperty;const gy=function(n,e){if(n===null||!Ux(n))return{};var r={};return g2e(e,function(i){mit.call(n,i)&&(r[i]=n[i])}),r},aX=function(n,e){return Qrt(n,function(r,i,a){return e.includes(a)||(r[a]=i),r},{})},x2e=function(n,e,r){var i,a,o,s,l=0;r||(r={});var c=function(){l=r.leading===!1?0:Date.now(),i=null,s=n.apply(a,o),i||(a=o=null)},u=function(){var d=Date.now();!l&&r.leading===!1&&(l=d);var f=e-(d-l);return a=this,o=arguments,f<=0||f>e?(i&&(clearTimeout(i),i=null),l=d,s=n.apply(a,o),i||(a=o=null)):!i&&r.trailing!==!1&&(i=setTimeout(c,f)),s};return u.cancel=function(){clearTimeout(i),l=0,i=a=o=null},u};var k3={};const vit=function(n){return n=n||"g",k3[n]?k3[n]+=1:k3[n]=1,n+k3[n]},aF=function(){},vj=function(n){return n};var yj=function(n,e){return yj=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},yj(n,e)};function br(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");yj(n,e);function r(){this.constructor=n}n.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var xt=function(){return xt=Object.assign||function(e){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},xt.apply(this,arguments)};function $a(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r}function vr(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})}function _M(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],i=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function he(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var i=r.call(n),a,o=[],s;try{for(;(e===void 0||e-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(l){s={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o}function yit(){for(var n=0,e=0,r=arguments.length;e<r;e++)n+=arguments[e].length;for(var i=Array(n),a=0,e=0;e<r;e++)for(var o=arguments[e],s=0,l=o.length;s<l;s++,a++)i[a]=o[s];return i}function nn(n,e,r){if(r||arguments.length===2)for(var i=0,a=e.length,o;i<a;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return n.concat(o||Array.prototype.slice.call(e))}function oF(n,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(n):i?i.value:e.get(n)}var _2e={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function bit(n,e,r){if(n[r].length>7){n[r].shift();for(var i=n[r],a=r;i.length;)e[r]="A",n.splice(a+=1,0,["C"].concat(i.splice(0,6)));n.splice(r,1)}}var j2={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function w2e(n){return Array.isArray(n)&&n.every(function(e){var r=e[0].toLowerCase();return j2[r]===e.length-1&&"achlmqstvz".includes(r)})}function S2e(n){return w2e(n)&&n.every(function(e){var r=e[0];return r===r.toUpperCase()})}function E2e(n){return S2e(n)&&n.every(function(e){var r=e[0];return"ACLMQZ".includes(r)})}function Tae(n){for(var e=n.pathValue[n.segmentStart],r=e.toLowerCase(),i=n.data;i.length>=j2[r]&&(r==="m"&&i.length>2?(n.segments.push([e].concat(i.splice(0,2))),r="l",e=e==="m"?"l":"L"):n.segments.push([e].concat(i.splice(0,j2[r]))),!!j2[r]););}function xit(n){var e=n.index,r=n.pathValue,i=r.charCodeAt(e);if(i===48){n.param=0,n.index+=1;return}if(i===49){n.param=1,n.index+=1;return}n.err='[path-util]: invalid Arc flag "'.concat(r[e],'", expecting 0 or 1 at index ').concat(e)}function _it(n){return n>=48&&n<=57||n===43||n===45||n===46}function P1(n){return n>=48&&n<=57}function wit(n){var e=n.max,r=n.pathValue,i=n.index,a=i,o=!1,s=!1,l=!1,c=!1,u;if(a>=e){n.err="[path-util]: Invalid path value at index ".concat(a,', "pathValue" is missing param');return}if(u=r.charCodeAt(a),(u===43||u===45)&&(a+=1,u=r.charCodeAt(a)),!P1(u)&&u!==46){n.err="[path-util]: Invalid path value at index ".concat(a,', "').concat(r[a],'" is not a number');return}if(u!==46){if(o=u===48,a+=1,u=r.charCodeAt(a),o&&a<e&&u&&P1(u)){n.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(r[i],'" illegal number');return}for(;a<e&&P1(r.charCodeAt(a));)a+=1,s=!0;u=r.charCodeAt(a)}if(u===46){for(c=!0,a+=1;P1(r.charCodeAt(a));)a+=1,l=!0;u=r.charCodeAt(a)}if(u===101||u===69){if(c&&!s&&!l){n.err="[path-util]: Invalid path value at index ".concat(a,', "').concat(r[a],'" invalid float exponent');return}if(a+=1,u=r.charCodeAt(a),(u===43||u===45)&&(a+=1),a<e&&P1(r.charCodeAt(a)))for(;a<e&&P1(r.charCodeAt(a));)a+=1;else{n.err="[path-util]: Invalid path value at index ".concat(a,', "').concat(r[a],'" invalid integer exponent');return}}n.index=a,n.param=+n.pathValue.slice(i,a)}function Sit(n){var e=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return n===10||n===13||n===8232||n===8233||n===32||n===9||n===11||n===12||n===160||n>=5760&&e.includes(n)}function vP(n){for(var e=n.pathValue,r=n.max;n.index<r&&Sit(e.charCodeAt(n.index));)n.index+=1}function Eit(n){switch(n|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function Cit(n){return(n|32)===97}function Mit(n){var e=n.max,r=n.pathValue,i=n.index,a=r.charCodeAt(i),o=j2[r[i].toLowerCase()];if(n.segmentStart=i,!Eit(a)){n.err='[path-util]: Invalid path value "'.concat(r[i],'" is not a path command');return}if(n.index+=1,vP(n),n.data=[],!o){Tae(n);return}for(;;){for(var s=o;s>0;s-=1){if(Cit(a)&&(s===3||s===4)?xit(n):wit(n),n.err.length)return;n.data.push(n.param),vP(n),n.index<e&&r.charCodeAt(n.index)===44&&(n.index+=1,vP(n))}if(n.index>=n.max||!_it(r.charCodeAt(n.index)))break}Tae(n)}var Tit=function(){function n(e){this.pathValue=e,this.segments=[],this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return n}();function Ait(n){if(w2e(n))return[].concat(n);var e=new Tit(n);for(vP(e);e.index<e.max&&!e.err.length;)Mit(e);return e.err?e.err:e.segments}function Rit(n){if(S2e(n))return[].concat(n);var e=Ait(n),r=0,i=0,a=0,o=0;return e.map(function(s){var l=s.slice(1).map(Number),c=s[0],u=c.toUpperCase();if(c==="M")return r=l[0],i=l[1],a=r,o=i,["M",r,i];var d;if(c!==u)switch(u){case"A":d=[u,l[0],l[1],l[2],l[3],l[4],l[5]+r,l[6]+i];break;case"V":d=[u,l[0]+i];break;case"H":d=[u,l[0]+r];break;default:{var f=l.map(function(p,g){return p+(g%2?i:r)});d=[u].concat(f)}}else d=[u].concat(l);var h=d.length;switch(u){case"Z":r=a,i=o;break;case"H":r=d[1];break;case"V":i=d[1];break;default:r=d[h-2],i=d[h-1],u==="M"&&(a=r,o=i)}return d})}function Pit(n,e){var r=n[0],i=e.x1,a=e.y1,o=e.x2,s=e.y2,l=n.slice(1).map(Number),c=n;if("TQ".includes(r)||(e.qx=null,e.qy=null),r==="H")c=["L",n[1],a];else if(r==="V")c=["L",i,n[1]];else if(r==="S"){var u=i*2-o,d=a*2-s;e.x1=u,e.y1=d,c=["C",u,d].concat(l)}else if(r==="T"){var f=i*2-e.qx,h=a*2-e.qy;e.qx=f,e.qy=h,c=["Q",f,h].concat(l)}else if(r==="Q"){var p=l[0],g=l[1];e.qx=p,e.qy=g}return c}function ZN(n){if(E2e(n))return[].concat(n);for(var e=Rit(n),r=xt({},_2e),i=0;i<e.length;i+=1){e[i]=Pit(e[i],r);var a=e[i],o=a.length;r.x1=+a[o-2],r.y1=+a[o-1],r.x2=+a[o-4]||r.x1,r.y2=+a[o-3]||r.y1}return e}function Nit(n){return E2e(n)&&n.every(function(e){var r=e[0];return"MC".includes(r)})}function F3(n,e,r){var i=n*Math.cos(r)-e*Math.sin(r),a=n*Math.sin(r)+e*Math.cos(r);return{x:i,y:a}}function oX(n,e,r,i,a,o,s,l,c,u){var d=n,f=e,h=r,p=i,g=l,m=c,v=Math.PI*120/180,y=Math.PI/180*(+a||0),b=[],x,_,S,M,E;if(u)_=u[0],S=u[1],M=u[2],E=u[3];else{x=F3(d,f,-y),d=x.x,f=x.y,x=F3(g,m,-y),g=x.x,m=x.y;var T=(d-g)/2,P=(f-m)/2,A=T*T/(h*h)+P*P/(p*p);A>1&&(A=Math.sqrt(A),h*=A,p*=A);var N=h*h,O=p*p,I=(o===s?-1:1)*Math.sqrt(Math.abs((N*O-N*P*P-O*T*T)/(N*P*P+O*T*T)));M=I*h*P/p+(d+g)/2,E=I*-p*T/h+(f+m)/2,_=Math.asin(((f-E)/p*Math.pow(10,9)>>0)/Math.pow(10,9)),S=Math.asin(((m-E)/p*Math.pow(10,9)>>0)/Math.pow(10,9)),_=d<M?Math.PI-_:_,S=g<M?Math.PI-S:S,_<0&&(_=Math.PI*2+_),S<0&&(S=Math.PI*2+S),s&&_>S&&(_-=Math.PI*2),!s&&S>_&&(S-=Math.PI*2)}var D=S-_;if(Math.abs(D)>v){var k=S,$=g,B=m;S=_+v*(s&&S>_?1:-1),g=M+h*Math.cos(S),m=E+p*Math.sin(S),b=oX(g,m,h,p,a,0,s,$,B,[S,k,M,E])}D=S-_;var F=Math.cos(_),G=Math.sin(_),z=Math.cos(S),U=Math.sin(S),H=Math.tan(D/4),X=4/3*h*H,V=4/3*p*H,W=[d,f],K=[d+X*G,f-V*F],q=[g+X*U,m-V*z],Q=[g,m];if(K[0]=2*W[0]-K[0],K[1]=2*W[1]-K[1],u)return K.concat(q,Q,b);b=K.concat(q,Q,b);for(var ie=[],oe=0,ue=b.length;oe<ue;oe+=1)ie[oe]=oe%2?F3(b[oe-1],b[oe],y).y:F3(b[oe],b[oe+1],y).x;return ie}function Oit(n,e,r,i,a,o){var s=.3333333333333333,l=2/3;return[s*n+l*r,s*e+l*i,s*a+l*r,s*o+l*i,a,o]}function zg(n,e,r){var i=n[0],a=n[1],o=e[0],s=e[1];return[i+(o-i)*r,a+(s-a)*r]}var Aae=function(n,e,r,i){var a=.5,o=zg([n,e],[r,i],a);return nn(nn([],o,!0),[r,i,r,i],!1)};function Iit(n,e){var r=n[0],i=n.slice(1).map(Number),a=i[0],o=i[1],s,l=e.x1,c=e.y1,u=e.x,d=e.y;switch("TQ".includes(r)||(e.qx=null,e.qy=null),r){case"M":return e.x=a,e.y=o,n;case"A":return s=[l,c].concat(i),["C"].concat(oX(s[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7],s[8],s[9]));case"Q":return e.qx=a,e.qy=o,s=[l,c].concat(i),["C"].concat(Oit(s[0],s[1],s[2],s[3],s[4],s[5]));case"L":return["C"].concat(Aae(l,c,a,o));case"Z":return l===u&&c===d?["C",l,c,u,d,u,d]:["C"].concat(Aae(l,c,u,d))}return n}function bj(n,e){if(e===void 0&&(e=!1),Nit(n)){var r=[].concat(n);return e?[r,[]]:r}for(var i=ZN(n),a=xt({},_2e),o=[],s="",l=i.length,c,u,d=[],f=0;f<l;f+=1){i[f]&&(s=i[f][0]),o[f]=s;var h=Iit(i[f],a);i[f]=h,bit(i,o,f),l=i.length,s==="Z"&&d.push(f),c=i[f],u=c.length,a.x1=+c[u-2],a.y1=+c[u-1],a.x2=+c[u-4]||a.x1,a.y2=+c[u-3]||a.y1}return e?[i,d]:i}function Dit(n){return n.map(function(e){return Array.isArray(e)?[].concat(e):e})}function Lit(n){var e=n.slice(1).map(function(r,i,a){return i?a[i-1].slice(-2).concat(r.slice(1)):n[0].slice(1).concat(r.slice(1))}).map(function(r){return r.map(function(i,a){return r[r.length-a-2*(1-a%2)]})}).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map(function(r){return["C"].concat(r.slice(2))}))}function Fl(n,e){return Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]))}function xj(n,e,r,i,a){var o=Fl([n,e],[r,i]),s={x:0,y:0};if(typeof a=="number")if(a<=0)s={x:n,y:e};else if(a>=o)s={x:r,y:i};else{var l=zg([n,e],[r,i],a/o),c=l[0],u=l[1];s={x:c,y:u}}return{length:o,point:s,min:{x:Math.min(n,r),y:Math.min(e,i)},max:{x:Math.max(n,r),y:Math.max(e,i)}}}function Rae(n,e){var r=n.x,i=n.y,a=e.x,o=e.y,s=r*a+i*o,l=Math.sqrt((Math.pow(r,2)+Math.pow(i,2))*(Math.pow(a,2)+Math.pow(o,2))),c=r*o-i*a<0?-1:1,u=c*Math.acos(s/l);return u}function kit(n,e,r,i,a,o,s,l,c,u){var d=Math.abs,f=Math.sin,h=Math.cos,p=Math.sqrt,g=Math.PI,m=d(r),v=d(i),y=(a%360+360)%360,b=y*(g/180);if(n===l&&e===c)return{x:n,y:e};if(m===0||v===0)return xj(n,e,l,c,u).point;var x=(n-l)/2,_=(e-c)/2,S={x:h(b)*x+f(b)*_,y:-f(b)*x+h(b)*_},M=Math.pow(S.x,2)/Math.pow(m,2)+Math.pow(S.y,2)/Math.pow(v,2);M>1&&(m*=p(M),v*=p(M));var E=Math.pow(m,2)*Math.pow(v,2)-Math.pow(m,2)*Math.pow(S.y,2)-Math.pow(v,2)*Math.pow(S.x,2),T=Math.pow(m,2)*Math.pow(S.y,2)+Math.pow(v,2)*Math.pow(S.x,2),P=E/T;P=P<0?0:P;var A=(o!==s?1:-1)*p(P),N={x:A*(m*S.y/v),y:A*(-(v*S.x)/m)},O={x:h(b)*N.x-f(b)*N.y+(n+l)/2,y:f(b)*N.x+h(b)*N.y+(e+c)/2},I={x:(S.x-N.x)/m,y:(S.y-N.y)/v},D=Rae({x:1,y:0},I),k={x:(-S.x-N.x)/m,y:(-S.y-N.y)/v},$=Rae(I,k);!s&&$>0?$-=2*g:s&&$<0&&($+=2*g),$%=2*g;var B=D+$*u,F=m*h(B),G=v*f(B),z={x:h(b)*F-f(b)*G+O.x,y:f(b)*F+h(b)*G+O.y};return z}function Fit(n,e,r,i,a,o,s,l,c,u,d){var f,h=d.bbox,p=h===void 0?!0:h,g=d.length,m=g===void 0?!0:g,v=d.sampleSize,y=v===void 0?30:v,b=typeof u=="number",x=n,_=e,S=0,M=[x,_,S],E=[x,_],T=0,P={x:0,y:0},A=[{x,y:_}];b&&u<=0&&(P={x,y:_});for(var N=0;N<=y;N+=1){if(T=N/y,f=kit(n,e,r,i,a,o,s,l,c,T),x=f.x,_=f.y,p&&A.push({x,y:_}),m&&(S+=Fl(E,[x,_])),E=[x,_],b&&S>=u&&u>M[2]){var O=(S-u)/(S-M[2]);P={x:E[0]*(1-O)+M[0]*O,y:E[1]*(1-O)+M[1]*O}}M=[x,_,S]}return b&&u>=S&&(P={x:l,y:c}),{length:S,point:P,min:{x:Math.min.apply(null,A.map(function(I){return I.x})),y:Math.min.apply(null,A.map(function(I){return I.y}))},max:{x:Math.max.apply(null,A.map(function(I){return I.x})),y:Math.max.apply(null,A.map(function(I){return I.y}))}}}function $it(n,e,r,i,a,o,s,l,c){var u=1-c;return{x:Math.pow(u,3)*n+3*Math.pow(u,2)*c*r+3*u*Math.pow(c,2)*a+Math.pow(c,3)*s,y:Math.pow(u,3)*e+3*Math.pow(u,2)*c*i+3*u*Math.pow(c,2)*o+Math.pow(c,3)*l}}function C2e(n,e,r,i,a,o,s,l,c,u){var d,f=u.bbox,h=f===void 0?!0:f,p=u.length,g=p===void 0?!0:p,m=u.sampleSize,v=m===void 0?10:m,y=typeof c=="number",b=n,x=e,_=0,S=[b,x,_],M=[b,x],E=0,T={x:0,y:0},P=[{x:b,y:x}];y&&c<=0&&(T={x:b,y:x});for(var A=0;A<=v;A+=1){if(E=A/v,d=$it(n,e,r,i,a,o,s,l,E),b=d.x,x=d.y,h&&P.push({x:b,y:x}),g&&(_+=Fl(M,[b,x])),M=[b,x],y&&_>=c&&c>S[2]){var N=(_-c)/(_-S[2]);T={x:M[0]*(1-N)+S[0]*N,y:M[1]*(1-N)+S[1]*N}}S=[b,x,_]}return y&&c>=_&&(T={x:s,y:l}),{length:_,point:T,min:{x:Math.min.apply(null,P.map(function(O){return O.x})),y:Math.min.apply(null,P.map(function(O){return O.y}))},max:{x:Math.max.apply(null,P.map(function(O){return O.x})),y:Math.max.apply(null,P.map(function(O){return O.y}))}}}function Bit(n,e,r,i,a,o,s){var l=1-s;return{x:Math.pow(l,2)*n+2*l*s*r+Math.pow(s,2)*a,y:Math.pow(l,2)*e+2*l*s*i+Math.pow(s,2)*o}}function zit(n,e,r,i,a,o,s,l){var c,u=l.bbox,d=u===void 0?!0:u,f=l.length,h=f===void 0?!0:f,p=l.sampleSize,g=p===void 0?10:p,m=typeof s=="number",v=n,y=e,b=0,x=[v,y,b],_=[v,y],S=0,M={x:0,y:0},E=[{x:v,y}];m&&s<=0&&(M={x:v,y});for(var T=0;T<=g;T+=1){if(S=T/g,c=Bit(n,e,r,i,a,o,S),v=c.x,y=c.y,d&&E.push({x:v,y}),h&&(b+=Fl(_,[v,y])),_=[v,y],m&&b>=s&&s>x[2]){var P=(b-s)/(b-x[2]);M={x:_[0]*(1-P)+x[0]*P,y:_[1]*(1-P)+x[1]*P}}x=[v,y,b]}return m&&s>=b&&(M={x:a,y:o}),{length:b,point:M,min:{x:Math.min.apply(null,E.map(function(A){return A.x})),y:Math.min.apply(null,E.map(function(A){return A.y}))},max:{x:Math.max.apply(null,E.map(function(A){return A.x})),y:Math.max.apply(null,E.map(function(A){return A.y}))}}}function M2e(n,e,r){for(var i,a,o,s,l,c,u=ZN(n),d=typeof e=="number",f,h=[],p,g=0,m=0,v=0,y=0,b,x=[],_=[],S=0,M={x:0,y:0},E=M,T=M,P=M,A=0,N=0,O=u.length;N<O;N+=1)b=u[N],p=b[0],f=p==="M",h=f?h:[g,m].concat(b.slice(1)),f?(v=b[1],y=b[2],M={x:v,y},E=M,S=0,d&&e<.001&&(P=M)):p==="L"?(i=xj(h[0],h[1],h[2],h[3],(e||0)-A),S=i.length,M=i.min,E=i.max,T=i.point):p==="A"?(a=Fit(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],(e||0)-A,r||{}),S=a.length,M=a.min,E=a.max,T=a.point):p==="C"?(o=C2e(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],(e||0)-A,r||{}),S=o.length,M=o.min,E=o.max,T=o.point):p==="Q"?(s=zit(h[0],h[1],h[2],h[3],h[4],h[5],(e||0)-A,r||{}),S=s.length,M=s.min,E=s.max,T=s.point):p==="Z"&&(h=[g,m,v,y],l=xj(h[0],h[1],h[2],h[3],(e||0)-A),S=l.length,M=l.min,E=l.max,T=l.point),d&&A<e&&A+S>=e&&(P=T),_.push(E),x.push(M),A+=S,c=p!=="Z"?b.slice(-2):[v,y],g=c[0],m=c[1];return d&&e>=A&&(P={x:g,y:m}),{length:A,point:P,min:{x:Math.min.apply(null,x.map(function(I){return I.x})),y:Math.min.apply(null,x.map(function(I){return I.y}))},max:{x:Math.max.apply(null,_.map(function(I){return I.x})),y:Math.max.apply(null,_.map(function(I){return I.y}))}}}function Uit(n,e){return M2e(n,void 0,xt(xt({},e),{bbox:!1,length:!0})).length}function Vit(n){var e=n.length,r=e-1;return n.map(function(i,a){return n.map(function(o,s){var l=a+s,c;return s===0||n[l]&&n[l][0]==="M"?(c=n[l],["M"].concat(c.slice(-2))):(l>=e&&(l-=r),n[l])})})}function Git(n,e){var r=n.length-1,i=[],a=0,o=0,s=Vit(n);return s.forEach(function(l,c){n.slice(1).forEach(function(u,d){o+=Fl(n[(c+d)%r].slice(-2),e[d%r].slice(-2))}),i[c]=o,o=0}),a=i.indexOf(Math.min.apply(null,i)),s[a]}function jit(n,e,r,i,a,o,s,l){return 3*((l-e)*(r+a)-(s-n)*(i+o)+i*(n-a)-r*(e-o)+l*(a+n/3)-s*(o+e/3))/20}function Hit(n){var e=0,r=0,i=0;return bj(n).map(function(a){var o;switch(a[0]){case"M":return e=a[1],r=a[2],0;default:var s=a.slice(1),l=s[0],c=s[1],u=s[2],d=s[3],f=s[4],h=s[5];return i=jit(e,r,l,c,u,d,f,h),o=a.slice(-2),e=o[0],r=o[1],i}}).reduce(function(a,o){return a+o},0)}function Pae(n){return Hit(n)>=0}function Wit(n,e,r){return M2e(n,e,xt(xt({},r),{bbox:!1,length:!0})).point}function qit(n,e){e===void 0&&(e=.5);var r=n.slice(0,2),i=n.slice(2,4),a=n.slice(4,6),o=n.slice(6,8),s=zg(r,i,e),l=zg(i,a,e),c=zg(a,o,e),u=zg(s,l,e),d=zg(l,c,e),f=zg(u,d,e);return[["C"].concat(s,u,f),["C"].concat(d,c,o)]}function Nae(n){return n.map(function(e,r,i){var a=r&&i[r-1].slice(-2).concat(e.slice(1)),o=r?C2e(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],{bbox:!1}).length:0,s;return r?s=o?qit(a):[e,e]:s=[e],{s:e,ss:s,l:o}})}function T2e(n,e,r){var i=Nae(n),a=Nae(e),o=i.length,s=a.length,l=i.filter(function(v){return v.l}).length,c=a.filter(function(v){return v.l}).length,u=i.filter(function(v){return v.l}).reduce(function(v,y){var b=y.l;return v+b},0)/l||0,d=a.filter(function(v){return v.l}).reduce(function(v,y){var b=y.l;return v+b},0)/c||0,f=r||Math.max(o,s),h=[u,d],p=[f-o,f-s],g=0,m=[i,a].map(function(v,y){return v.l===f?v.map(function(b){return b.s}):v.map(function(b,x){return g=x&&p[y]&&b.l>=h[y],p[y]-=g?1:0,g?b.ss:[b.s]}).flat()});return m[0].length===m[1].length?m:T2e(m[0],m[1],f)}function _j(n){var e=document.createElement("div");e.innerHTML=n;var r=e.childNodes[0];return r&&e.contains(r)&&e.removeChild(r),r}function Yit(n,e){for(;!{}.hasOwnProperty.call(n,e)&&(n=Op(n))!==null;);return n}function wj(){return wj=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,e,r){var i=Yit(n,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?n:r):a.value}},wj.apply(null,arguments)}function Oae(n,e,r,i){var a=wj(Op(n.prototype),e,r);return typeof a=="function"?function(o){return a.apply(r,o)}:a}function xp(n,e,r,i){var a=n-r,o=e-i;return Math.sqrt(a*a+o*o)}function A2e(n,e){var r=Math.min.apply(Math,nn([],he(n),!1)),i=Math.min.apply(Math,nn([],he(e),!1)),a=Math.max.apply(Math,nn([],he(n),!1)),o=Math.max.apply(Math,nn([],he(e),!1));return{x:r,y:i,width:a-r,height:o-i}}function Xit(n,e,r){return Math.atan(-e/n*Math.tan(r))}function Kit(n,e,r){return Math.atan(e/(n*Math.tan(r)))}function Zit(n,e,r,i,a,o){return r*Math.cos(a)*Math.cos(o)-i*Math.sin(a)*Math.sin(o)+n}function Qit(n,e,r,i,a,o){return r*Math.sin(a)*Math.cos(o)+i*Math.cos(a)*Math.sin(o)+e}function Jit(n,e,r,i,a,o,s){for(var l=Xit(r,i,a),c=1/0,u=-1/0,d=[o,s],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var h=l+f;o<s?o<h&&h<s&&d.push(h):s<h&&h<o&&d.push(h)}for(var f=0;f<d.length;f++){var p=Zit(n,e,r,i,a,d[f]);p<c&&(c=p),p>u&&(u=p)}for(var g=Kit(r,i,a),m=1/0,v=-1/0,y=[o,s],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var b=g+f;o<s?o<b&&b<s&&y.push(b):s<b&&b<o&&y.push(b)}for(var f=0;f<y.length;f++){var x=Qit(n,e,r,i,a,y[f]);x<m&&(m=x),x>v&&(v=x)}return{x:c,y:m,width:u-c,height:v-m}}var eat=1e-4;function R2e(n,e,r,i,a,o){var s=-1,l=1/0,c=[r,i],u=20;o&&o>200&&(u=o/10);for(var d=1/u,f=d/10,h=0;h<=u;h++){var p=h*d,g=[a.apply(void 0,nn([],he(n.concat([p])),!1)),a.apply(void 0,nn([],he(e.concat([p])),!1))],m=xp(c[0],c[1],g[0],g[1]);m<l&&(s=p,l=m)}if(s===0)return{x:n[0],y:e[0]};if(s===1){var v=n.length;return{x:n[v-1],y:e[v-1]}}l=1/0;for(var h=0;h<32&&!(f<eat);h++){var y=s-f,b=s+f,g=[a.apply(void 0,nn([],he(n.concat([y])),!1)),a.apply(void 0,nn([],he(e.concat([y])),!1))],m=xp(c[0],c[1],g[0],g[1]);if(y>=0&&m<l)s=y,l=m;else{var x=[a.apply(void 0,nn([],he(n.concat([b])),!1)),a.apply(void 0,nn([],he(e.concat([b])),!1))],_=xp(c[0],c[1],x[0],x[1]);b<=1&&_<l?(s=b,l=_):f*=.5}}return{x:a.apply(void 0,nn([],he(n.concat([s])),!1)),y:a.apply(void 0,nn([],he(e.concat([s])),!1))}}function P2e(n,e,r,i){return xp(n,e,r,i)}function N2e(n,e,r,i,a){return{x:(1-a)*n+a*r,y:(1-a)*e+a*i}}function tat(n,e,r,i,a,o){var s=[r-n,i-e];if(qrt(s,[0,0]))return Math.sqrt((a-n)*(a-n)+(o-e)*(o-e));var l=[-s[1],s[0]];Hrt(l,l);var c=[a-n,o-e];return Math.abs(Wrt(c,l))}function Sj(n,e,r,i,a){var o=1-a;return o*o*o*n+3*e*a*o*o+3*r*a*a*o+i*a*a*a}function Iae(n,e,r,i){var a=-3*n+9*e-9*r+3*i,o=6*n-12*e+6*r,s=3*e-3*n,l=[],c,u,d;if(G2(a,0))G2(o,0)||(c=-s/o,c>=0&&c<=1&&l.push(c));else{var f=o*o-4*a*s;G2(f,0)?l.push(-o/(2*a)):f>0&&(d=Math.sqrt(f),c=(-o+d)/(2*a),u=(-o-d)/(2*a),c>=0&&c<=1&&l.push(c),u>=0&&u<=1&&l.push(u))}return l}function nat(n,e,r,i,a,o,s,l){for(var c=[n,s],u=[e,l],d=Iae(n,r,a,s),f=Iae(e,i,o,l),h=0;h<d.length;h++)c.push(Sj(n,r,a,s,d[h]));for(var h=0;h<f.length;h++)u.push(Sj(e,i,o,l,f[h]));return A2e(c,u)}function rat(n,e,r,i,a,o,s,l,c,u,d){return R2e([n,r,a,s],[e,i,o,l],c,u,Sj,d)}function Dae(n,e,r,i,a,o,s,l,c,u,d){var f=rat(n,e,r,i,a,o,s,l,c,u,d);return xp(f.x,f.y,c,u)}function iat(n){if(n.length<2)return 0;for(var e=0,r=0;r<n.length-1;r++){var i=n[r],a=n[r+1];e+=xp(i[0],i[1],a[0],a[1])}return e}function aat(n){return iat(n)}function Ej(n,e,r,i){var a=1-i;return a*a*n+2*i*a*e+i*i*r}function Lae(n,e,r){var i=n+r-2*e;if(G2(i,0))return[.5];var a=(n-e)/i;return a<=1&&a>=0?[a]:[]}function oat(n,e,r,i,a,o){var s=Lae(n,r,a)[0],l=Lae(e,i,o)[0],c=[n,a],u=[e,o];return s!==void 0&&c.push(Ej(n,r,a,s)),l!==void 0&&u.push(Ej(e,i,o,l)),A2e(c,u)}function sat(n,e,r,i,a,o,s,l){return R2e([n,r,a],[e,i,o],s,l,Ej)}function lat(n,e,r,i,a,o,s,l){var c=sat(n,e,r,i,a,o,s,l);return xp(c.x,c.y,s,l)}/*!
 * @antv/g-lite
 * @description A core module for rendering engine implements DOM API.
 * @version 2.2.18
 * @date 4/14/2025, 2:53:27 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var cat=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},O2e={exports:{}};(function(n,e){(function(r,i){n.exports=i()})(cat,function(){function r(S,M,E,T,P){i(S,M,E||0,T||S.length-1,P||o)}function i(S,M,E,T,P){for(;T>E;){if(T-E>600){var A=T-E+1,N=M-E+1,O=Math.log(A),I=.5*Math.exp(2*O/3),D=.5*Math.sqrt(O*I*(A-I)/A)*(N-A/2<0?-1:1),k=Math.max(E,Math.floor(M-N*I/A+D)),$=Math.min(T,Math.floor(M+(A-N)*I/A+D));i(S,M,k,$,P)}var B=S[M],F=E,G=T;for(a(S,E,M),P(S[T],B)>0&&a(S,E,T);F<G;){for(a(S,F,G),F++,G--;P(S[F],B)<0;)F++;for(;P(S[G],B)>0;)G--}P(S[E],B)===0?a(S,E,G):(G++,a(S,G,T)),G<=M&&(E=G+1),M<=G&&(T=G-1)}}function a(S,M,E){var T=S[M];S[M]=S[E],S[E]=T}function o(S,M){return S<M?-1:S>M?1:0}var s=function(M){M===void 0&&(M=9),this._maxEntries=Math.max(4,M),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};s.prototype.all=function(){return this._all(this.data,[])},s.prototype.search=function(M){var E=this.data,T=[];if(!b(M,E))return T;for(var P=this.toBBox,A=[];E;){for(var N=0;N<E.children.length;N++){var O=E.children[N],I=E.leaf?P(O):O;b(M,I)&&(E.leaf?T.push(O):y(M,I)?this._all(O,T):A.push(O))}E=A.pop()}return T},s.prototype.collides=function(M){var E=this.data;if(!b(M,E))return!1;for(var T=[];E;){for(var P=0;P<E.children.length;P++){var A=E.children[P],N=E.leaf?this.toBBox(A):A;if(b(M,N)){if(E.leaf||y(M,N))return!0;T.push(A)}}E=T.pop()}return!1},s.prototype.load=function(M){if(!(M&&M.length))return this;if(M.length<this._minEntries){for(var E=0;E<M.length;E++)this.insert(M[E]);return this}var T=this._build(M.slice(),0,M.length-1,0);if(!this.data.children.length)this.data=T;else if(this.data.height===T.height)this._splitRoot(this.data,T);else{if(this.data.height<T.height){var P=this.data;this.data=T,T=P}this._insert(T,this.data.height-T.height-1,!0)}return this},s.prototype.insert=function(M){return M&&this._insert(M,this.data.height-1),this},s.prototype.clear=function(){return this.data=x([]),this},s.prototype.remove=function(M,E){if(!M)return this;for(var T=this.data,P=this.toBBox(M),A=[],N=[],O,I,D;T||A.length;){if(T||(T=A.pop(),I=A[A.length-1],O=N.pop(),D=!0),T.leaf){var k=l(M,T.children,E);if(k!==-1)return T.children.splice(k,1),A.push(T),this._condense(A),this}!D&&!T.leaf&&y(T,P)?(A.push(T),N.push(O),O=0,I=T,T=T.children[0]):I?(O++,T=I.children[O],D=!1):T=null}return this},s.prototype.toBBox=function(M){return M},s.prototype.compareMinX=function(M,E){return M.minX-E.minX},s.prototype.compareMinY=function(M,E){return M.minY-E.minY},s.prototype.toJSON=function(){return this.data},s.prototype.fromJSON=function(M){return this.data=M,this},s.prototype._all=function(M,E){for(var T=[];M;)M.leaf?E.push.apply(E,M.children):T.push.apply(T,M.children),M=T.pop();return E},s.prototype._build=function(M,E,T,P){var A=T-E+1,N=this._maxEntries,O;if(A<=N)return O=x(M.slice(E,T+1)),c(O,this.toBBox),O;P||(P=Math.ceil(Math.log(A)/Math.log(N)),N=Math.ceil(A/Math.pow(N,P-1))),O=x([]),O.leaf=!1,O.height=P;var I=Math.ceil(A/N),D=I*Math.ceil(Math.sqrt(N));_(M,E,T,D,this.compareMinX);for(var k=E;k<=T;k+=D){var $=Math.min(k+D-1,T);_(M,k,$,I,this.compareMinY);for(var B=k;B<=$;B+=I){var F=Math.min(B+I-1,$);O.children.push(this._build(M,B,F,P-1))}}return c(O,this.toBBox),O},s.prototype._chooseSubtree=function(M,E,T,P){for(;P.push(E),!(E.leaf||P.length-1===T);){for(var A=1/0,N=1/0,O=void 0,I=0;I<E.children.length;I++){var D=E.children[I],k=p(D),$=m(M,D)-k;$<N?(N=$,A=k<A?k:A,O=D):$===N&&k<A&&(A=k,O=D)}E=O||E.children[0]}return E},s.prototype._insert=function(M,E,T){var P=T?M:this.toBBox(M),A=[],N=this._chooseSubtree(P,this.data,E,A);for(N.children.push(M),d(N,P);E>=0&&A[E].children.length>this._maxEntries;)this._split(A,E),E--;this._adjustParentBBoxes(P,A,E)},s.prototype._split=function(M,E){var T=M[E],P=T.children.length,A=this._minEntries;this._chooseSplitAxis(T,A,P);var N=this._chooseSplitIndex(T,A,P),O=x(T.children.splice(N,T.children.length-N));O.height=T.height,O.leaf=T.leaf,c(T,this.toBBox),c(O,this.toBBox),E?M[E-1].children.push(O):this._splitRoot(T,O)},s.prototype._splitRoot=function(M,E){this.data=x([M,E]),this.data.height=M.height+1,this.data.leaf=!1,c(this.data,this.toBBox)},s.prototype._chooseSplitIndex=function(M,E,T){for(var P,A=1/0,N=1/0,O=E;O<=T-E;O++){var I=u(M,0,O,this.toBBox),D=u(M,O,T,this.toBBox),k=v(I,D),$=p(I)+p(D);k<A?(A=k,P=O,N=$<N?$:N):k===A&&$<N&&(N=$,P=O)}return P||T-E},s.prototype._chooseSplitAxis=function(M,E,T){var P=M.leaf?this.compareMinX:f,A=M.leaf?this.compareMinY:h,N=this._allDistMargin(M,E,T,P),O=this._allDistMargin(M,E,T,A);N<O&&M.children.sort(P)},s.prototype._allDistMargin=function(M,E,T,P){M.children.sort(P);for(var A=this.toBBox,N=u(M,0,E,A),O=u(M,T-E,T,A),I=g(N)+g(O),D=E;D<T-E;D++){var k=M.children[D];d(N,M.leaf?A(k):k),I+=g(N)}for(var $=T-E-1;$>=E;$--){var B=M.children[$];d(O,M.leaf?A(B):B),I+=g(O)}return I},s.prototype._adjustParentBBoxes=function(M,E,T){for(var P=T;P>=0;P--)d(E[P],M)},s.prototype._condense=function(M){for(var E=M.length-1,T=void 0;E>=0;E--)M[E].children.length===0?E>0?(T=M[E-1].children,T.splice(T.indexOf(M[E]),1)):this.clear():c(M[E],this.toBBox)};function l(S,M,E){if(!E)return M.indexOf(S);for(var T=0;T<M.length;T++)if(E(S,M[T]))return T;return-1}function c(S,M){u(S,0,S.children.length,M,S)}function u(S,M,E,T,P){P||(P=x(null)),P.minX=1/0,P.minY=1/0,P.maxX=-1/0,P.maxY=-1/0;for(var A=M;A<E;A++){var N=S.children[A];d(P,S.leaf?T(N):N)}return P}function d(S,M){return S.minX=Math.min(S.minX,M.minX),S.minY=Math.min(S.minY,M.minY),S.maxX=Math.max(S.maxX,M.maxX),S.maxY=Math.max(S.maxY,M.maxY),S}function f(S,M){return S.minX-M.minX}function h(S,M){return S.minY-M.minY}function p(S){return(S.maxX-S.minX)*(S.maxY-S.minY)}function g(S){return S.maxX-S.minX+(S.maxY-S.minY)}function m(S,M){return(Math.max(M.maxX,S.maxX)-Math.min(M.minX,S.minX))*(Math.max(M.maxY,S.maxY)-Math.min(M.minY,S.minY))}function v(S,M){var E=Math.max(S.minX,M.minX),T=Math.max(S.minY,M.minY),P=Math.min(S.maxX,M.maxX),A=Math.min(S.maxY,M.maxY);return Math.max(0,P-E)*Math.max(0,A-T)}function y(S,M){return S.minX<=M.minX&&S.minY<=M.minY&&M.maxX<=S.maxX&&M.maxY<=S.maxY}function b(S,M){return M.minX<=S.maxX&&M.minY<=S.maxY&&M.maxX>=S.minX&&M.maxY>=S.minY}function x(S){return{children:S,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(S,M,E,T,P){for(var A=[M,E];A.length;)if(E=A.pop(),M=A.pop(),!(E-M<=T)){var N=M+Math.ceil((E-M)/T/2)*T;r(S,N,M,E,P),A.push(M,N,N,E)}}return s})})(O2e);var uat=O2e.exports,at=function(n){return n.GROUP="g",n.FRAGMENT="fragment",n.CIRCLE="circle",n.ELLIPSE="ellipse",n.IMAGE="image",n.RECT="rect",n.LINE="line",n.POLYLINE="polyline",n.POLYGON="polygon",n.TEXT="text",n.PATH="path",n.HTML="html",n.MESH="mesh",n}({}),yP=function(n){return n[n.ZERO=0]="ZERO",n[n.NEGATIVE_ONE=1]="NEGATIVE_ONE",n}({}),lv=function(){function n(){st(this,n),this.plugins=[]}return lt(n,[{key:"addRenderingPlugin",value:function(r){this.plugins.push(r),this.context.renderingPlugins.push(r)}},{key:"removeAllRenderingPlugins",value:function(){var r=this;this.plugins.forEach(function(i){var a=r.context.renderingPlugins.indexOf(i);a>=0&&r.context.renderingPlugins.splice(a,1)})}}])}(),dat=function(){function n(e){st(this,n),this.clipSpaceNearZ=yP.NEGATIVE_ONE,this.plugins=[],this.config=se({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},e)}return lt(n,[{key:"registerPlugin",value:function(r){var i=this.plugins.findIndex(function(a){return a===r});i===-1&&this.plugins.push(r)}},{key:"unregisterPlugin",value:function(r){var i=this.plugins.findIndex(function(a){return a===r});i>-1&&this.plugins.splice(i,1)}},{key:"getPlugins",value:function(){return this.plugins}},{key:"getPlugin",value:function(r){return this.plugins.find(function(i){return i.name===r})}},{key:"getConfig",value:function(){return this.config}},{key:"setConfig",value:function(r){Object.assign(this.config,r)}}])}(),sF=Sm,N1=Bf,fat=Irt,hat=Ort,kae=WN,lF=Frt,Bi=function(){function n(){st(this,n),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return lt(n,[{key:"update",value:function(r,i){N1(this.center,r),N1(this.halfExtents,i),lF(this.min,this.center,this.halfExtents),sF(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(r,i){sF(this.center,i,r),kae(this.center,this.center,.5),lF(this.halfExtents,i,r),kae(this.halfExtents,this.halfExtents,.5),N1(this.min,r),N1(this.max,i)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(r){if(!n.isEmpty(r)){if(n.isEmpty(this)){this.setMinMax(r.getMin(),r.getMax());return}var i=this.center,a=i[0],o=i[1],s=i[2],l=this.halfExtents,c=l[0],u=l[1],d=l[2],f=a-c,h=a+c,p=o-u,g=o+u,m=s-d,v=s+d,y=r.center,b=y[0],x=y[1],_=y[2],S=r.halfExtents,M=S[0],E=S[1],T=S[2],P=b-M,A=b+M,N=x-E,O=x+E,I=_-T,D=_+T;P<f&&(f=P),A>h&&(h=A),N<p&&(p=N),O>g&&(g=O),I<m&&(m=I),D>v&&(v=D),i[0]=(f+h)*.5,i[1]=(p+g)*.5,i[2]=(m+v)*.5,l[0]=(h-f)*.5,l[1]=(g-p)*.5,l[2]=(v-m)*.5,this.min[0]=f,this.min[1]=p,this.min[2]=m,this.max[0]=h,this.max[1]=g,this.max[2]=v}}},{key:"setFromTransformedAABB",value:function(r,i){var a=this.center,o=this.halfExtents,s=r.center,l=r.halfExtents,c=i[0],u=i[4],d=i[8],f=i[1],h=i[5],p=i[9],g=i[2],m=i[6],v=i[10],y=Math.abs(c),b=Math.abs(u),x=Math.abs(d),_=Math.abs(f),S=Math.abs(h),M=Math.abs(p),E=Math.abs(g),T=Math.abs(m),P=Math.abs(v);a[0]=i[12]+c*s[0]+u*s[1]+d*s[2],a[1]=i[13]+f*s[0]+h*s[1]+p*s[2],a[2]=i[14]+g*s[0]+m*s[1]+v*s[2],o[0]=y*l[0]+b*l[1]+x*l[2],o[1]=_*l[0]+S*l[1]+M*l[2],o[2]=E*l[0]+T*l[1]+P*l[2],lF(this.min,a,o),sF(this.max,a,o)}},{key:"intersects",value:function(r){var i=this.getMax(),a=this.getMin(),o=r.getMax(),s=r.getMin();return a[0]<=o[0]&&i[0]>=s[0]&&a[1]<=o[1]&&i[1]>=s[1]&&a[2]<=o[2]&&i[2]>=s[2]}},{key:"intersection",value:function(r){if(!this.intersects(r))return null;var i=new n,a=fat([0,0,0],this.getMin(),r.getMin()),o=hat([0,0,0],this.getMax(),r.getMax());return i.setMinMax(a,o),i}},{key:"getNegativeFarPoint",value:function(r){return r.pnVertexFlag===273?N1([0,0,0],this.min):r.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:r.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:r.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:r.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:r.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:r.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:"getPositiveFarPoint",value:function(r){return r.pnVertexFlag===273?N1([0,0,0],this.max):r.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:r.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:r.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:r.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:r.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:r.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:"isEmpty",value:function(r){return!r||r.halfExtents[0]===0&&r.halfExtents[1]===0&&r.halfExtents[2]===0}}])}(),pat=function(){function n(e,r){st(this,n),this.distance=e||0,this.normal=r||ji(0,1,0),this.updatePNVertexFlag()}return lt(n,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(r){return zf(r,this.normal)-this.distance}},{key:"normalize",value:function(){var r=1/p2e(this.normal);WN(this.normal,this.normal,r),this.distance*=r}},{key:"intersectsLine",value:function(r,i,a){var o=this.distanceToPoint(r),s=this.distanceToPoint(i),l=o/(o-s),c=l>=0&&l<=1;return c&&a&&pj(a,r,i,l),c}}])}(),O1=function(n){return n[n.OUTSIDE=4294967295]="OUTSIDE",n[n.INSIDE=0]="INSIDE",n[n.INDETERMINATE=2147483647]="INDETERMINATE",n}({}),gat=function(){function n(e){if(st(this,n),this.planes=[],e)this.planes=e;else for(var r=0;r<6;r++)this.planes.push(new pat)}return lt(n,[{key:"extractFromVPMatrix",value:function(r){var i=fe(r,16),a=i[0],o=i[1],s=i[2],l=i[3],c=i[4],u=i[5],d=i[6],f=i[7],h=i[8],p=i[9],g=i[10],m=i[11],v=i[12],y=i[13],b=i[14],x=i[15];zs(this.planes[0].normal,l-a,f-c,m-h),this.planes[0].distance=x-v,zs(this.planes[1].normal,l+a,f+c,m+h),this.planes[1].distance=x+v,zs(this.planes[2].normal,l+o,f+u,m+p),this.planes[2].distance=x+y,zs(this.planes[3].normal,l-o,f-u,m-p),this.planes[3].distance=x-y,zs(this.planes[4].normal,l-s,f-d,m-g),this.planes[4].distance=x-b,zs(this.planes[5].normal,l+s,f+d,m+g),this.planes[5].distance=x+b,this.planes.forEach(function(_){_.normalize(),_.updatePNVertexFlag()})}}])}(),hs=function(){function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;st(this,n),this.x=0,this.y=0,this.x=e,this.y=r}return lt(n,[{key:"clone",value:function(){return new n(this.x,this.y)}},{key:"copyFrom",value:function(r){this.x=r.x,this.y=r.y}}])}(),Vx=function(){function n(e,r,i,a){st(this,n),this.x=e,this.y=r,this.width=i,this.height=a,this.left=e,this.right=e+i,this.top=r,this.bottom=r+a}return lt(n,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(r){return new n(r.x,r.y,r.width,r.height)}},{key:"applyTransform",value:function(r,i){var a=n2(r.x,r.y,0,1),o=n2(r.x+r.width,r.y,0,1),s=n2(r.x,r.y+r.height,0,1),l=n2(r.x+r.width,r.y+r.height,0,1),c=Uf(),u=Uf(),d=Uf(),f=Uf();cp(c,a,i),cp(u,o,i),cp(d,s,i),cp(f,l,i);var h=Math.min(c[0],u[0],d[0],f[0]),p=Math.min(c[1],u[1],d[1],f[1]),g=Math.max(c[0],u[0],d[0],f[0]),m=Math.max(c[1],u[1],d[1],f[1]);return n.fromRect({x:h,y:p,width:g-h,height:m-p})}}])}(),_i="Method not implemented.",I1="Use document.documentElement instead.",mat="Cannot append a destroyed element.";function ux(n){return n===void 0?0:n>360||n<-360?n%360:n}var cF=Nr();function sl(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return Array.isArray(n)&&n.length===3?i?Vh(n):Bf(cF,n):on(n)?i?ji(n,e,r):zs(cF,n,e,r):i?ji(n[0],n[1]||e,n[2]||r):zs(cF,n[0],n[1]||e,n[2]||r)}var vat=Math.PI/180;function wi(n){return n*vat}var yat=180/Math.PI;function $l(n){return n*yat}function bat(n){return 360*n}var QN=Math.PI/2;function xat(n,e){var r=e[0],i=e[1],a=e[2],o=e[3],s=r*r,l=i*i,c=a*a,u=o*o,d=s+l+c+u,f=r*o-i*a;return f>.499995*d?(n[0]=QN,n[1]=2*Math.atan2(i,r),n[2]=0):f<-.499995*d?(n[0]=-QN,n[1]=2*Math.atan2(i,r),n[2]=0):(n[0]=Math.asin(2*(r*a-o*i)),n[1]=Math.atan2(2*(r*o+i*a),1-2*(c+u)),n[2]=Math.atan2(2*(r*i+a*o),1-2*(l+c))),n}function _at(n,e){var r,i,a=zx(Nr(),e),o=fe(a,3),s=o[0],l=o[1],c=o[2],u=Math.asin(-e[2]/s);return u<QN?u>-QN?(r=Math.atan2(e[6]/l,e[10]/c),i=Math.atan2(e[1]/s,e[0]/s)):(i=0,r=-Math.atan2(e[4]/l,e[5]/l)):(i=0,r=Math.atan2(e[4]/l,e[5]/l)),n[0]=r,n[1]=u,n[2]=i,n}function uF(n,e){return e.length===16?_at(n,e):xat(n,e)}function wat(n,e,r,i,a){var o=Math.cos(n),s=Math.sin(n);return frt(i*o,a*s,0,-i*s,a*o,0,e,r,1)}function Sat(n,e,r,i,a,o,s){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,c=2*o,u=r-e,d=i-a,f=c/u,h=c/d,p=(r+e)/u,g=(i+a)/d,m,v,y=s-o,b=s*o;return l?(m=-s/y,v=-b/y):(m=-(s+o)/y,v=-2*b/y),n[0]=f,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=h,n[6]=0,n[7]=0,n[8]=p,n[9]=g,n[10]=m,n[11]=-1,n[12]=0,n[13]=0,n[14]=v,n[15]=0,n}function Fae(n){var e=n[0],r=n[1],i=n[3],a=n[4],o=Math.sqrt(e*e+r*r),s=Math.sqrt(i*i+a*a),l=e*a-r*i;if(l<0&&(e<a?o=-o:s=-s),o){var c=1/o;e*=c,r*=c}if(s){var u=1/s;i*=u,a*=u}var d=Math.atan2(r,e),f=$l(d);return[n[6],n[7],o,s,f]}var bf=$i(),fd=$i(),cS=Uf(),Wn=[Nr(),Nr(),Nr()],$ae=Nr();function Eat(n,e,r,i,a,o){if(!Cat(bf,n)||(Bx(fd,bf),fd[3]=0,fd[7]=0,fd[11]=0,fd[15]=1,Math.abs(JSe(fd))<1e-8))return!1;var s=bf[3],l=bf[7],c=bf[11],u=bf[12],d=bf[13],f=bf[14],h=bf[15];if(s!==0||l!==0||c!==0){cS[0]=s,cS[1]=l,cS[2]=c,cS[3]=h;var p=$f(fd,fd);if(!p)return!1;QSe(fd,fd),cp(a,cS,fd)}else a[0]=a[1]=a[2]=0,a[3]=1;if(e[0]=u,e[1]=d,e[2]=f,Mat(Wn,bf),r[0]=Zh(Wn[0]),U0(Wn[0],Wn[0]),i[0]=zf(Wn[0],Wn[1]),dF(Wn[1],Wn[1],Wn[0],1,-i[0]),r[1]=Zh(Wn[1]),U0(Wn[1],Wn[1]),i[0]/=r[1],i[1]=zf(Wn[0],Wn[2]),dF(Wn[2],Wn[2],Wn[0],1,-i[1]),i[2]=zf(Wn[1],Wn[2]),dF(Wn[2],Wn[2],Wn[1],1,-i[2]),r[2]=Zh(Wn[2]),U0(Wn[2],Wn[2]),i[1]/=r[2],i[2]/=r[2],mP($ae,Wn[1],Wn[2]),zf(Wn[0],$ae)<0)for(var g=0;g<3;g++)r[g]*=-1,Wn[g][0]*=-1,Wn[g][1]*=-1,Wn[g][2]*=-1;return o[0]=.5*Math.sqrt(Math.max(1+Wn[0][0]-Wn[1][1]-Wn[2][2],0)),o[1]=.5*Math.sqrt(Math.max(1-Wn[0][0]+Wn[1][1]-Wn[2][2],0)),o[2]=.5*Math.sqrt(Math.max(1-Wn[0][0]-Wn[1][1]+Wn[2][2],0)),o[3]=.5*Math.sqrt(Math.max(1+Wn[0][0]+Wn[1][1]+Wn[2][2],0)),Wn[2][1]>Wn[1][2]&&(o[0]=-o[0]),Wn[0][2]>Wn[2][0]&&(o[1]=-o[1]),Wn[1][0]>Wn[0][1]&&(o[2]=-o[2]),!0}function Cat(n,e){var r=e[15];if(r===0)return!1;for(var i=1/r,a=0;a<16;a++)n[a]=e[a]*i;return!0}function Mat(n,e){n[0][0]=e[0],n[0][1]=e[1],n[0][2]=e[2],n[1][0]=e[4],n[1][1]=e[5],n[1][2]=e[6],n[2][0]=e[8],n[2][1]=e[9],n[2][2]=e[10]}function dF(n,e,r,i,a){n[0]=e[0]*i+r[0]*a,n[1]=e[1]*i+r[1]*a,n[2]=e[2]*i+r[2]*a}var bi=function(n){return n[n.ORBITING=0]="ORBITING",n[n.EXPLORING=1]="EXPLORING",n[n.TRACKING=2]="TRACKING",n}({}),Cj=function(n){return n[n.DEFAULT=0]="DEFAULT",n[n.ROTATIONAL=1]="ROTATIONAL",n[n.TRANSLATIONAL=2]="TRANSLATIONAL",n[n.CINEMATIC=3]="CINEMATIC",n}({}),bu=function(n){return n[n.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",n[n.PERSPECTIVE=1]="PERSPECTIVE",n}({}),I2e={UPDATED:"updated"},Bae=2e-4,D2e=function(){function n(){st(this,n),this.clipSpaceNearZ=yP.NEGATIVE_ONE,this.eventEmitter=new YSe,this.matrix=$i(),this.right=ji(1,0,0),this.up=ji(0,1,0),this.forward=ji(0,0,1),this.position=ji(0,0,1),this.focalPoint=ji(0,0,0),this.distanceVector=ji(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=$i(),this.projectionMatrixInverse=$i(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=bi.EXPLORING,this.trackingMode=Cj.DEFAULT,this.projectionMode=bu.PERSPECTIVE,this.frustum=new gat,this.orthoMatrix=$i()}return lt(n,[{key:"isOrtho",value:function(){return this.projectionMode===bu.ORTHOGRAPHIC}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getDollyingStep",value:function(){return this.dollyingStep}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getZoom",value:function(){return this.zoom}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix}},{key:"getView",value:function(){return this.view}},{key:"setEnableUpdate",value:function(r){this.enableUpdate=r}},{key:"setType",value:function(r,i){return this.type=r,this.type===bi.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===bi.TRACKING&&i!==void 0&&this.setTrackingMode(i),this}},{key:"setProjectionMode",value:function(r){return this.projectionMode=r,this}},{key:"setTrackingMode",value:function(r){if(this.type!==bi.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=r,this}},{key:"setWorldRotation",value:function(r){return this.rotateWorld=r,this._getAngles(),this}},{key:"getViewTransform",value:function(){return $f($i(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"jitterProjectionMatrix",value:function(r,i){var a=jg($i(),[r,i,0]);this.jitteredProjectionMatrix=Vs($i(),a,this.projectionMatrix)}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0}},{key:"setMatrix",value:function(r){return this.matrix=r,this._update(),this}},{key:"setProjectionMatrix",value:function(r){this.projectionMatrix=r}},{key:"setFov",value:function(r){return this.setPerspective(this.near,this.far,r,this.aspect),this}},{key:"setAspect",value:function(r){return this.setPerspective(this.near,this.far,this.fov,r),this}},{key:"setNear",value:function(r){return this.projectionMode===bu.PERSPECTIVE?this.setPerspective(r,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,r,this.far),this}},{key:"setFar",value:function(r){return this.projectionMode===bu.PERSPECTIVE?this.setPerspective(this.near,r,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,r),this}},{key:"setViewOffset",value:function(r,i,a,o,s,l){return this.aspect=r/i,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=i,this.view.offsetX=a,this.view.offsetY=o,this.view.width=s,this.view.height=l,this.projectionMode===bu.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===bu.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setZoom",value:function(r){return this.zoom=r,this.projectionMode===bu.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===bu.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:"setZoomByViewportPoint",value:function(r,i){var a=this.canvas.viewport2Canvas({x:i[0],y:i[1]}),o=a.x,s=a.y,l=this.roll;this.rotate(0,0,-l),this.setPosition(o,s),this.setFocalPoint(o,s),this.setZoom(r),this.rotate(0,0,l);var c=this.canvas.viewport2Canvas({x:i[0],y:i[1]}),u=c.x,d=c.y,f=ji(u-o,d-s,0),h=zf(f,this.right)/Zh(this.right),p=zf(f,this.up)/Zh(this.up),g=this.getPosition(),m=fe(g,2),v=m[0],y=m[1],b=this.getFocalPoint(),x=fe(b,2),_=x[0],S=x[1];return this.setPosition(v-h,y-p),this.setFocalPoint(_-h,S-p),this}},{key:"setPerspective",value:function(r,i,a,o){var s;this.projectionMode=bu.PERSPECTIVE,this.fov=a,this.near=r,this.far=i,this.aspect=o;var l=this.near*Math.tan(wi(.5*this.fov))/this.zoom,c=2*l,u=this.aspect*c,d=-.5*u;if((s=this.view)!==null&&s!==void 0&&s.enabled){var f=this.view.fullWidth,h=this.view.fullHeight;d+=this.view.offsetX*u/f,l-=this.view.offsetY*c/h,u*=this.view.width/f,c*=this.view.height/h}return Sat(this.projectionMatrix,d,d+u,l-c,l,r,this.far,this.clipSpaceNearZ===yP.ZERO),$f(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:"setOrthographic",value:function(r,i,a,o,s,l){var c;this.projectionMode=bu.ORTHOGRAPHIC,this.rright=i,this.left=r,this.top=a,this.bottom=o,this.near=s,this.far=l;var u=(this.rright-this.left)/(2*this.zoom),d=(this.top-this.bottom)/(2*this.zoom),f=(this.rright+this.left)/2,h=(this.top+this.bottom)/2,p=f-u,g=f+u,m=h+d,v=h-d;if((c=this.view)!==null&&c!==void 0&&c.enabled){var y=(this.rright-this.left)/this.view.fullWidth/this.zoom,b=(this.top-this.bottom)/this.view.fullHeight/this.zoom;p+=y*this.view.offsetX,g=p+y*this.view.width,m-=b*this.view.offsetY,v=m-b*this.view.height}return this.clipSpaceNearZ===yP.NEGATIVE_ONE?c2e(this.projectionMatrix,p,g,m,v,s,l):u2e(this.projectionMatrix,p,g,m,v,s,l),$f(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:"setPosition",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.position[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.position[2],o=sl(r,i,a);return this._setPosition(o),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:"setFocalPoint",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.focalPoint[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.focalPoint[2],o=ji(0,1,0);if(this.focalPoint=sl(r,i,a),this.trackingMode===Cj.CINEMATIC){var s=hj(Nr(),this.focalPoint,this.position);r=s[0],i=s[1],a=s[2];var l=Zh(s),c=$l(Math.asin(i/l)),u=90+$l(Math.atan2(a,r)),d=$i();n2e(d,d,wi(u)),t2e(d,d,wi(c)),o=Gs(Nr(),[0,1,0],d)}return $f(this.matrix,d2e($i(),this.position,this.focalPoint,o)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:"getDistance",value:function(){return this.distance}},{key:"getDistanceVector",value:function(){return this.distanceVector}},{key:"setDistance",value:function(r){if(this.distance===r||r<0)return this;this.distance=r,this.distance<Bae&&(this.distance=Bae),this.dollyingStep=this.distance/100;var i=Nr();r=this.distance;var a=this.forward,o=this.focalPoint;return i[0]=r*a[0]+o[0],i[1]=r*a[1]+o[1],i[2]=r*a[2]+o[2],this._setPosition(i),this.triggerUpdate(),this}},{key:"setMaxDistance",value:function(r){return this.maxDistance=r,this}},{key:"setMinDistance",value:function(r){return this.minDistance=r,this}},{key:"setAzimuth",value:function(r){return this.azimuth=ux(r),this.computeMatrix(),this._getAxes(),this.type===bi.ORBITING||this.type===bi.EXPLORING?this._getPosition():this.type===bi.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(r){return this.elevation=ux(r),this.computeMatrix(),this._getAxes(),this.type===bi.ORBITING||this.type===bi.EXPLORING?this._getPosition():this.type===bi.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getElevation",value:function(){return this.elevation}},{key:"setRoll",value:function(r){return this.roll=ux(r),this.computeMatrix(),this._getAxes(),this.type===bi.ORBITING||this.type===bi.EXPLORING?this._getPosition():this.type===bi.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getRoll",value:function(){return this.roll}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:"computeMatrix",value:function(){var r=nm(Ao(),[0,0,1],wi(this.roll));Hm(this.matrix);var i=nm(Ao(),[1,0,0],wi((this.rotateWorld&&this.type!==bi.TRACKING||this.type===bi.TRACKING?1:-1)*this.elevation)),a=nm(Ao(),[0,1,0],wi((this.rotateWorld&&this.type!==bi.TRACKING||this.type===bi.TRACKING?1:-1)*this.azimuth)),o=Em(Ao(),a,i);o=Em(Ao(),o,r);var s=rX($i(),o);this.type===bi.ORBITING||this.type===bi.EXPLORING?(cx(this.matrix,this.matrix,this.focalPoint),Vs(this.matrix,this.matrix,s),cx(this.matrix,this.matrix,[0,0,this.distance])):this.type===bi.TRACKING&&(cx(this.matrix,this.matrix,this.position),Vs(this.matrix,this.matrix,s))}},{key:"_setPosition",value:function(r,i,a){this.position=sl(r,i,a);var o=this.matrix;o[12]=this.position[0],o[13]=this.position[1],o[14]=this.position[2],o[15]=1,this._getOrthoMatrix()}},{key:"_getAxes",value:function(){Bf(this.right,sl(cp(Uf(),[1,0,0,0],this.matrix))),Bf(this.up,sl(cp(Uf(),[0,1,0,0],this.matrix))),Bf(this.forward,sl(cp(Uf(),[0,0,1,0],this.matrix))),U0(this.right,this.right),U0(this.up,this.up),U0(this.forward,this.forward)}},{key:"_getAngles",value:function(){var r=this.distanceVector[0],i=this.distanceVector[1],a=this.distanceVector[2],o=Zh(this.distanceVector);if(o===0){this.elevation=0,this.azimuth=0;return}this.type===bi.TRACKING?(this.elevation=$l(Math.asin(i/o)),this.azimuth=$l(Math.atan2(-r,-a))):this.rotateWorld?(this.elevation=$l(Math.asin(i/o)),this.azimuth=$l(Math.atan2(-r,-a))):(this.elevation=-$l(Math.asin(i/o)),this.azimuth=-$l(Math.atan2(-r,-a)))}},{key:"_getPosition",value:function(){Bf(this.position,sl(cp(Uf(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){Lrt(this.distanceVector,[0,0,-this.distance],drt(XSe(),this.matrix)),Sm(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=hj(Nr(),this.focalPoint,this.position),this.distance=Zh(this.distanceVector),this.dollyingStep=this.distance/100}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===bu.ORTHOGRAPHIC){var r=this.position,i=nm(Ao(),[0,0,1],-this.roll*Math.PI/180);V2(this.orthoMatrix,i,ji((this.rright-this.left)/2-r[0],(this.top-this.bottom)/2-r[1],0),ji(this.zoom,this.zoom,1),r)}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var r=this.getViewTransform(),i=Vs($i(),this.getPerspective(),r);this.getFrustum().extractFromVPMatrix(i),this.eventEmitter.emit(I2e.UPDATED)}}},{key:"rotate",value:function(r,i,a){throw new Error(_i)}},{key:"pan",value:function(r,i){throw new Error(_i)}},{key:"dolly",value:function(r){throw new Error(_i)}},{key:"createLandmark",value:function(r,i){throw new Error(_i)}},{key:"gotoLandmark",value:function(r,i){throw new Error(_i)}},{key:"cancelLandmarkAnimation",value:function(){throw new Error(_i)}}])}(),Tat=function(n){return n[n.Standard=0]="Standard",n}({}),JN=function(n){return n[n.ADDED=0]="ADDED",n[n.REMOVED=1]="REMOVED",n[n.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",n}({}),L2e={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Vx(0,0,0,0)},qt=function(n){return n.COORDINATE="<coordinate>",n.COLOR="<color>",n.PAINT="<paint>",n.NUMBER="<number>",n.ANGLE="<angle>",n.OPACITY_VALUE="<opacity-value>",n.SHADOW_BLUR="<shadow-blur>",n.LENGTH="<length>",n.PERCENTAGE="<percentage>",n.LENGTH_PERCENTAGE="<length> | <percentage>",n.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",n.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",n.LIST_OF_POINTS="<list-of-points>",n.PATH="<path>",n.FILTER="<filter>",n.Z_INDEX="<z-index>",n.OFFSET_DISTANCE="<offset-distance>",n.DEFINED_PATH="<defined-path>",n.MARKER="<marker>",n.TRANSFORM="<transform>",n.TRANSFORM_ORIGIN="<transform-origin>",n.TEXT="<text>",n.TEXT_TRANSFORM="<text-transform>",n}({});function sX(n,e,r){n.prototype=e.prototype=r,r.constructor=n}function k2e(n,e){var r=Object.create(n.prototype);for(var i in e)r[i]=e[i];return r}function wM(){}var ZE=.7,eO=1/ZE,dx="\\s*([+-]?\\d+)\\s*",QE="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Aat=/^#([0-9a-f]{3,8})$/,Rat=new RegExp(`^rgb\\(${dx},${dx},${dx}\\)$`),Pat=new RegExp(`^rgb\\(${Zf},${Zf},${Zf}\\)$`),Nat=new RegExp(`^rgba\\(${dx},${dx},${dx},${QE}\\)$`),Oat=new RegExp(`^rgba\\(${Zf},${Zf},${Zf},${QE}\\)$`),Iat=new RegExp(`^hsl\\(${QE},${Zf},${Zf}\\)$`),Dat=new RegExp(`^hsla\\(${QE},${Zf},${Zf},${QE}\\)$`),zae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sX(wM,W4,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:Uae,formatHex:Uae,formatHex8:Lat,formatHsl:kat,formatRgb:Vae,toString:Vae});function Uae(){return this.rgb().formatHex()}function Lat(){return this.rgb().formatHex8()}function kat(){return F2e(this).formatHsl()}function Vae(){return this.rgb().formatRgb()}function W4(n){var e,r;return n=(n+"").trim().toLowerCase(),(e=Aat.exec(n))?(r=e[1].length,e=parseInt(e[1],16),r===6?Gae(e):r===3?new ql(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?$3(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?$3(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Rat.exec(n))?new ql(e[1],e[2],e[3],1):(e=Pat.exec(n))?new ql(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Nat.exec(n))?$3(e[1],e[2],e[3],e[4]):(e=Oat.exec(n))?$3(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Iat.exec(n))?Wae(e[1],e[2]/100,e[3]/100,1):(e=Dat.exec(n))?Wae(e[1],e[2]/100,e[3]/100,e[4]):zae.hasOwnProperty(n)?Gae(zae[n]):n==="transparent"?new ql(NaN,NaN,NaN,0):null}function Gae(n){return new ql(n>>16&255,n>>8&255,n&255,1)}function $3(n,e,r,i){return i<=0&&(n=e=r=NaN),new ql(n,e,r,i)}function Fat(n){return n instanceof wM||(n=W4(n)),n?(n=n.rgb(),new ql(n.r,n.g,n.b,n.opacity)):new ql}function $at(n,e,r,i){return arguments.length===1?Fat(n):new ql(n,e,r,i??1)}function ql(n,e,r,i){this.r=+n,this.g=+e,this.b=+r,this.opacity=+i}sX(ql,$at,k2e(wM,{brighter(n){return n=n==null?eO:Math.pow(eO,n),new ql(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?ZE:Math.pow(ZE,n),new ql(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new ql(V0(this.r),V0(this.g),V0(this.b),tO(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jae,formatHex:jae,formatHex8:Bat,formatRgb:Hae,toString:Hae}));function jae(){return`#${P0(this.r)}${P0(this.g)}${P0(this.b)}`}function Bat(){return`#${P0(this.r)}${P0(this.g)}${P0(this.b)}${P0((isNaN(this.opacity)?1:this.opacity)*255)}`}function Hae(){const n=tO(this.opacity);return`${n===1?"rgb(":"rgba("}${V0(this.r)}, ${V0(this.g)}, ${V0(this.b)}${n===1?")":`, ${n})`}`}function tO(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function V0(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function P0(n){return n=V0(n),(n<16?"0":"")+n.toString(16)}function Wae(n,e,r,i){return i<=0?n=e=r=NaN:r<=0||r>=1?n=e=NaN:e<=0&&(n=NaN),new Id(n,e,r,i)}function F2e(n){if(n instanceof Id)return new Id(n.h,n.s,n.l,n.opacity);if(n instanceof wM||(n=W4(n)),!n)return new Id;if(n instanceof Id)return n;n=n.rgb();var e=n.r/255,r=n.g/255,i=n.b/255,a=Math.min(e,r,i),o=Math.max(e,r,i),s=NaN,l=o-a,c=(o+a)/2;return l?(e===o?s=(r-i)/l+(r<i)*6:r===o?s=(i-e)/l+2:s=(e-r)/l+4,l/=c<.5?o+a:2-o-a,s*=60):l=c>0&&c<1?0:s,new Id(s,l,c,n.opacity)}function zat(n,e,r,i){return arguments.length===1?F2e(n):new Id(n,e,r,i??1)}function Id(n,e,r,i){this.h=+n,this.s=+e,this.l=+r,this.opacity=+i}sX(Id,zat,k2e(wM,{brighter(n){return n=n==null?eO:Math.pow(eO,n),new Id(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?ZE:Math.pow(ZE,n),new Id(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,a=2*r-i;return new ql(fF(n>=240?n-240:n+120,a,i),fF(n,a,i),fF(n<120?n+240:n-120,a,i),this.opacity)},clamp(){return new Id(qae(this.h),B3(this.s),B3(this.l),tO(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=tO(this.opacity);return`${n===1?"hsl(":"hsla("}${qae(this.h)}, ${B3(this.s)*100}%, ${B3(this.l)*100}%${n===1?")":`, ${n})`}`}}));function qae(n){return n=(n||0)%360,n<0?n+360:n}function B3(n){return Math.max(0,Math.min(1,n||0))}function fF(n,e,r){return(n<60?e+(r-e)*n/60:n<180?r:n<240?e+(r-e)*(240-n)/60:e)*255}function mo(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var r=function(){for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];var l=e?e.apply(this,o):o[0],c=r.cache;if(c.has(l))return c.get(l);var u=n.apply(this,o);return r.cache=c.set(l,u)||c,u};return r.cache=new(mo.Cache||Map),mo.cacheList.push(r.cache),r}mo.Cache=Map;mo.cacheList=[];mo.clearCache=function(){mo.cacheList.forEach(function(n){return n.clear()})};var Yt=function(n){return n[n.kUnknown=0]="kUnknown",n[n.kNumber=1]="kNumber",n[n.kPercentage=2]="kPercentage",n[n.kEms=3]="kEms",n[n.kPixels=4]="kPixels",n[n.kRems=5]="kRems",n[n.kDegrees=6]="kDegrees",n[n.kRadians=7]="kRadians",n[n.kGradians=8]="kGradians",n[n.kTurns=9]="kTurns",n[n.kMilliseconds=10]="kMilliseconds",n[n.kSeconds=11]="kSeconds",n[n.kInteger=12]="kInteger",n}({}),Ad=function(n){return n[n.kUNumber=0]="kUNumber",n[n.kUPercent=1]="kUPercent",n[n.kULength=2]="kULength",n[n.kUAngle=3]="kUAngle",n[n.kUTime=4]="kUTime",n[n.kUOther=5]="kUOther",n}({}),Uat=function(n){return n[n.kYes=0]="kYes",n[n.kNo=1]="kNo",n}({}),Vat=function(n){return n[n.kYes=0]="kYes",n[n.kNo=1]="kNo",n}({}),Gat=[{name:"em",unit_type:Yt.kEms},{name:"px",unit_type:Yt.kPixels},{name:"deg",unit_type:Yt.kDegrees},{name:"rad",unit_type:Yt.kRadians},{name:"grad",unit_type:Yt.kGradians},{name:"ms",unit_type:Yt.kMilliseconds},{name:"s",unit_type:Yt.kSeconds},{name:"rem",unit_type:Yt.kRems},{name:"turn",unit_type:Yt.kTurns}],Gx=function(n){return n[n.kUnknownType=0]="kUnknownType",n[n.kUnparsedType=1]="kUnparsedType",n[n.kKeywordType=2]="kKeywordType",n[n.kUnitType=3]="kUnitType",n[n.kSumType=4]="kSumType",n[n.kProductType=5]="kProductType",n[n.kNegateType=6]="kNegateType",n[n.kInvertType=7]="kInvertType",n[n.kMinType=8]="kMinType",n[n.kMaxType=9]="kMaxType",n[n.kClampType=10]="kClampType",n[n.kTransformType=11]="kTransformType",n[n.kPositionType=12]="kPositionType",n[n.kURLImageType=13]="kURLImageType",n[n.kColorType=14]="kColorType",n[n.kUnsupportedColorType=15]="kUnsupportedColorType",n}({}),jat=function(e){return Gat.find(function(r){return r.name===e}).unit_type},Hat=function(e){return e?e==="number"?Yt.kNumber:e==="percent"||e==="%"?Yt.kPercentage:jat(e):Yt.kUnknown},Wat=function(e){switch(e){case Yt.kNumber:case Yt.kInteger:return Ad.kUNumber;case Yt.kPercentage:return Ad.kUPercent;case Yt.kPixels:return Ad.kULength;case Yt.kMilliseconds:case Yt.kSeconds:return Ad.kUTime;case Yt.kDegrees:case Yt.kRadians:case Yt.kGradians:case Yt.kTurns:return Ad.kUAngle;default:return Ad.kUOther}},qat=function(e){switch(e){case Ad.kUNumber:return Yt.kNumber;case Ad.kULength:return Yt.kPixels;case Ad.kUPercent:return Yt.kPercentage;case Ad.kUTime:return Yt.kSeconds;case Ad.kUAngle:return Yt.kDegrees;default:return Yt.kUnknown}},Yae=function(e){var r=1;switch(e){case Yt.kPixels:case Yt.kDegrees:case Yt.kSeconds:break;case Yt.kMilliseconds:r=.001;break;case Yt.kRadians:r=180/Math.PI;break;case Yt.kGradians:r=.9;break;case Yt.kTurns:r=360;break}return r},Mj=function(e){switch(e){case Yt.kNumber:case Yt.kInteger:return"";case Yt.kPercentage:return"%";case Yt.kEms:return"em";case Yt.kRems:return"rem";case Yt.kPixels:return"px";case Yt.kDegrees:return"deg";case Yt.kRadians:return"rad";case Yt.kGradians:return"grad";case Yt.kMilliseconds:return"ms";case Yt.kSeconds:return"s";case Yt.kTurns:return"turn"}return""},q4=function(){function n(){st(this,n)}return lt(n,[{key:"toString",value:function(){return this.buildCSSText(Uat.kNo,Vat.kNo,"")}},{key:"isNumericValue",value:function(){return this.getType()>=Gx.kUnitType&&this.getType()<=Gx.kClampType}}],[{key:"isAngle",value:function(r){return r===Yt.kDegrees||r===Yt.kRadians||r===Yt.kGradians||r===Yt.kTurns}},{key:"isLength",value:function(r){return r>=Yt.kEms&&r<Yt.kDegrees}},{key:"isRelativeUnit",value:function(r){return r===Yt.kPercentage||r===Yt.kEms||r===Yt.kRems}},{key:"isTime",value:function(r){return r===Yt.kSeconds||r===Yt.kMilliseconds}}])}(),Yat=function(n){function e(r){var i;return st(this,e),i=dr(this,e),i.colorSpace=r,i}return $n(e,n),lt(e,[{key:"getType",value:function(){return Gx.kColorType}},{key:"to",value:function(i){return this}}])}(q4),rm=function(n){return n[n.Constant=0]="Constant",n[n.LinearGradient=1]="LinearGradient",n[n.RadialGradient=2]="RadialGradient",n}({}),z3=function(n){function e(r,i){var a;return st(this,e),a=dr(this,e),a.type=r,a.value=i,a}return $n(e,n),lt(e,[{key:"clone",value:function(){return new e(this.type,this.value)}},{key:"buildCSSText",value:function(i,a,o){return o}},{key:"getType",value:function(){return Gx.kColorType}}])}(q4),ed=function(n){function e(r){var i;return st(this,e),i=dr(this,e),i.value=r,i}return $n(e,n),lt(e,[{key:"clone",value:function(){return new e(this.value)}},{key:"getType",value:function(){return Gx.kKeywordType}},{key:"buildCSSText",value:function(i,a,o){return o+this.value}}])}(q4),Xat=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i="";return Number.isFinite(e)?i="NaN":e>0?i="infinity":i="-infinity",i+=r},Tj=function(e){return qat(Wat(e))},Xo=function(n){function e(r){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yt.kNumber;st(this,e),i=dr(this,e);var o;return typeof a=="string"?o=Hat(a):o=a,i.unit=o,i.value=r,i}return $n(e,n),lt(e,[{key:"clone",value:function(){return new e(this.value,this.unit)}},{key:"equals",value:function(i){var a=i;return this.value===a.value&&this.unit===a.unit}},{key:"getType",value:function(){return Gx.kUnitType}},{key:"convertTo",value:function(i){if(this.unit===i)return new e(this.value,this.unit);var a=Tj(this.unit);if(a!==Tj(i)||a===Yt.kUnknown)return null;var o=Yae(this.unit)/Yae(i);return new e(this.value*o,i)}},{key:"buildCSSText",value:function(i,a,o){var s;switch(this.unit){case Yt.kUnknown:break;case Yt.kInteger:s=Number(this.value).toFixed(0);break;case Yt.kNumber:case Yt.kPercentage:case Yt.kEms:case Yt.kRems:case Yt.kPixels:case Yt.kDegrees:case Yt.kRadians:case Yt.kGradians:case Yt.kMilliseconds:case Yt.kSeconds:case Yt.kTurns:{var l=-999999,c=999999,u=this.value,d=Mj(this.unit);if(u<l||u>c){var f=Mj(this.unit);!Number.isFinite(u)||Number.isNaN(u)?s=Xat(u,f):s=u+(f||"")}else s="".concat(u).concat(d)}}return o+=s,o}}])}(q4),yd=new Xo(0,"px");new Xo(1,"px");var my=new Xo(0,"deg"),lX=function(n){function e(r,i,a){var o,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return st(this,e),o=dr(this,e,["rgb"]),o.r=r,o.g=i,o.b=a,o.alpha=s,o.isNone=l,o}return $n(e,n),lt(e,[{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.alpha)}},{key:"buildCSSText",value:function(i,a,o){return"".concat(o,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")}}])}(Yat),Xae=new ed("unset"),Kat=new ed("initial"),Zat=new ed("inherit"),hF={"":Xae,unset:Xae,initial:Kat,inherit:Zat},Qat=function(e){return hF[e]||(hF[e]=new ed(e)),hF[e]},$2e=new lX(0,0,0,0,!0),B2e=new lX(0,0,0,0),Jat=mo(function(n,e,r,i){return new lX(n,e,r,i)},function(n,e,r,i){return"rgba(".concat(n,",").concat(e,",").concat(r,",").concat(i,")")}),ia=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yt.kNumber;return new Xo(e,r)};new Xo(50,"%");function eot(n){var e=n.type,r=n.value;return e==="hex"?"#".concat(r):e==="literal"?r:e==="rgb"?"rgb(".concat(r.join(","),")"):"rgba(".concat(r.join(","),")")}var tot=function(){var n={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},e="";function r(B){throw new Error("".concat(e,": ").concat(B))}function i(){var B=a();return e.length>0&&r("Invalid input not EOF"),B}function a(){return x(o)}function o(){return s("linear-gradient",n.linearGradient,c)||s("repeating-linear-gradient",n.repeatingLinearGradient,c)||s("radial-gradient",n.radialGradient,f)||s("repeating-radial-gradient",n.repeatingRadialGradient,f)||s("conic-gradient",n.conicGradient,f)}function s(B,F,G){return l(F,function(z){var U=G();return U&&(k(n.comma)||r("Missing comma before color stops")),{type:B,orientation:U,colorStops:x(_)}})}function l(B,F){var G=k(B);if(G){k(n.startCall)||r("Missing (");var z=F(G);return k(n.endCall)||r("Missing )"),z}}function c(){return u()||d()}function u(){return D("directional",n.sideOrCorner,1)}function d(){return D("angular",n.angleValue,1)}function f(){var B,F=h(),G;return F&&(B=[],B.push(F),G=e,k(n.comma)&&(F=h(),F?B.push(F):e=G)),B}function h(){var B=p()||g();if(B)B.at=v();else{var F=m();if(F){B=F;var G=v();G&&(B.at=G)}else{var z=y();z&&(B={type:"default-radial",at:z})}}return B}function p(){var B=D("shape",/^(circle)/i,0);return B&&(B.style=I()||m()),B}function g(){var B=D("shape",/^(ellipse)/i,0);return B&&(B.style=N()||m()),B}function m(){return D("extent-keyword",n.extentKeywords,1)}function v(){if(D("position",/^at/,0)){var B=y();return B||r("Missing positioning value"),B}}function y(){var B=b();if(B.x||B.y)return{type:"position",value:B}}function b(){return{x:N(),y:N()}}function x(B){var F=B(),G=[];if(F)for(G.push(F);k(n.comma);)F=B(),F?G.push(F):r("One extra comma");return G}function _(){var B=S();return B||r("Expected color definition"),B.length=N(),B}function S(){return E()||P()||T()||M()}function M(){return D("literal",n.literalColor,0)}function E(){return D("hex",n.hexColor,1)}function T(){return l(n.rgbColor,function(){return{type:"rgb",value:x(A)}})}function P(){return l(n.rgbaColor,function(){return{type:"rgba",value:x(A)}})}function A(){return k(n.number)[1]}function N(){return D("%",n.percentageValue,1)||O()||I()}function O(){return D("position-keyword",n.positionKeywords,1)}function I(){return D("px",n.pixelValue,1)||D("em",n.emValue,1)}function D(B,F,G){var z=k(F);if(z)return{type:B,value:z[G]}}function k(B){var F=/^[\n\r\t\s]+/.exec(e);F&&$(F[0].length);var G=B.exec(e);return G&&$(G[0].length),G}function $(B){e=e.substring(B)}return function(B){return e=B,i()}}();function not(n,e,r,i){var a=wi(i.value),o=0,s=0,l=o+e/2,c=s+r/2,u=Math.abs(e*Math.cos(a))+Math.abs(r*Math.sin(a)),d=n[0]+l-Math.cos(a)*u/2,f=n[1]+c-Math.sin(a)*u/2,h=n[0]+l+Math.cos(a)*u/2,p=n[1]+c+Math.sin(a)*u/2;return{x1:d,y1:f,x2:h,y2:p}}function rot(n,e,r,i,a,o){var s=i.value,l=a.value;i.unit===Yt.kPercentage&&(s=i.value/100*e),a.unit===Yt.kPercentage&&(l=a.value/100*r);var c=Math.max(Fl([0,0],[s,l]),Fl([0,r],[s,l]),Fl([e,r],[s,l]),Fl([e,0],[s,l]));return o&&(o instanceof Xo?c=o.value:o instanceof ed&&(o.value==="closest-side"?c=Math.min(s,e-s,l,r-l):o.value==="farthest-side"?c=Math.max(s,e-s,l,r-l):o.value==="closest-corner"&&(c=Math.min(Fl([0,0],[s,l]),Fl([0,r],[s,l]),Fl([e,r],[s,l]),Fl([e,0],[s,l]))))),{x:s+n[0],y:l+n[1],r:c}}var iot=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,aot=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,oot=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,z2e=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function sot(n){var e,r=n.length;if(n[r-1].length=(e=n[r-1].length)!==null&&e!==void 0?e:{type:"%",value:"100"},r>1){var i;n[0].length=(i=n[0].length)!==null&&i!==void 0?i:{type:"%",value:"0"}}for(var a=0,o=Number(n[0].length.value),s=1;s<r;s++){var l,c=(l=n[s].length)===null||l===void 0?void 0:l.value;if(!Nn(c)&&!Nn(o)){for(var u=1;u<s-a;u++)n[a+u].length={type:"%",value:"".concat(o+(Number(c)-o)*u/(s-a))};a=s,o=Number(c)}}}var lot={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},cot=mo(function(n){var e;return n.type==="angular"?e=Number(n.value):e=lot[n.value]||0,ia(e,"deg")}),uot=mo(function(n){var e=50,r=50,i="%",a="%";if((n==null?void 0:n.type)==="position"){var o=n.value,s=o.x,l=o.y;(s==null?void 0:s.type)==="position-keyword"&&(s.value==="left"?e=0:s.value==="center"?e=50:s.value==="right"?e=100:s.value==="top"?r=0:s.value==="bottom"&&(r=100)),(l==null?void 0:l.type)==="position-keyword"&&(l.value==="left"?e=0:l.value==="center"?r=50:l.value==="right"?e=100:l.value==="top"?r=0:l.value==="bottom"&&(r=100)),((s==null?void 0:s.type)==="px"||(s==null?void 0:s.type)==="%"||(s==null?void 0:s.type)==="em")&&(i=s==null?void 0:s.type,e=Number(s.value)),((l==null?void 0:l.type)==="px"||(l==null?void 0:l.type)==="%"||(l==null?void 0:l.type)==="em")&&(a=l==null?void 0:l.type,r=Number(l.value))}return{cx:ia(e,i),cy:ia(r,a)}}),dot=mo(function(n){if(n.indexOf("linear")>-1||n.indexOf("radial")>-1){var e=tot(n);return e.map(function(l){var c=l.type,u=l.orientation,d=l.colorStops;sot(d);var f=d.map(function(x){return{offset:ia(Number(x.length.value),"%"),color:eot(x)}});if(c==="linear-gradient")return new z3(rm.LinearGradient,{angle:u?cot(u):my,steps:f});if(c==="radial-gradient"&&(u||(u=[{type:"shape",value:"circle"}]),u[0].type==="shape"&&u[0].value==="circle")){var h=uot(u[0].at),p=h.cx,g=h.cy,m;if(u[0].style){var v=u[0].style,y=v.type,b=v.value;y==="extent-keyword"?m=Qat(b):m=ia(b,y)}return new z3(rm.RadialGradient,{cx:p,cy:g,size:m,steps:f})}})}var r=n[0];if(n[1]==="("||n[2]==="("){if(r==="l"){var i=iot.exec(n);if(i){var a,o=((a=i[2].match(z2e))===null||a===void 0?void 0:a.map(function(l){return l.split(":")}))||[];return[new z3(rm.LinearGradient,{angle:ia(parseFloat(i[1]),"deg"),steps:o.map(function(l){var c=fe(l,2),u=c[0],d=c[1];return{offset:ia(Number(u)*100,"%"),color:d}})})]}}else if(r==="r"){var s=fot(n);if(s)if(Kr(s))n=s;else return[new z3(rm.RadialGradient,s)]}else if(r==="p")return hot(n)}});function fot(n){var e=aot.exec(n);if(e){var r,i=((r=e[4].match(z2e))===null||r===void 0?void 0:r.map(function(a){return a.split(":")}))||[];return{cx:ia(50,"%"),cy:ia(50,"%"),steps:i.map(function(a){var o=fe(a,2),s=o[0],l=o[1];return{offset:ia(Number(s)*100,"%"),color:l}})}}return null}function hot(n){var e=oot.exec(n);if(e){var r=e[1],i=e[2];switch(r){case"a":r="repeat";break;case"x":r="repeat-x";break;case"y":r="repeat-y";break;case"n":r="no-repeat";break;default:r="no-repeat"}return{image:i,repetition:r}}return null}function vy(n){return n&&!!n.image}function nO(n){return n&&!Nn(n.r)&&!Nn(n.g)&&!Nn(n.b)}var H2=mo(function(n){if(vy(n))return se({repetition:"repeat"},n);if(Nn(n)&&(n=""),n==="transparent")return B2e;if(n==="currentColor")n="black";else if(n==="none")return $2e;var e=dot(n);if(e)return e;var r=W4(n),i=[0,0,0,0];return r!==null&&(i[0]=r.r||0,i[1]=r.g||0,i[2]=r.b||0,i[3]=r.opacity),Jat.apply(void 0,i)});function pot(n,e){if(!(!nO(n)||!nO(e)))return[[Number(n.r),Number(n.g),Number(n.b),Number(n.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(r){var i=r.slice();if(i[3])for(var a=0;a<3;a++)i[a]=Math.round(Ta(i[a],0,255));return i[3]=Ta(i[3],0,1),"rgba(".concat(i.join(","),")")}]}function SM(n,e){if(Nn(e))return ia(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(n)>=0)return ia(Number(e),"px");if("deg".search(n)>=0)return ia(Number(e),"deg")}var r=[];e=e.replace(n,function(a){return r.push(a),"U".concat(a)});var i="U(".concat(n.source,")");return r.map(function(a){return ia(Number(e.replace(new RegExp("U".concat(a),"g"),"").replace(new RegExp(i,"g"),"*0")),a)})[0]}var U2e=function(e){return SM(new RegExp("px","g"),e)},got=mo(U2e),mot=function(e){return SM(new RegExp("%","g"),e)};mo(mot);var V2e=function(e){return on(e)||isFinite(Number(e))?ia(Number(e)||0,"px"):SM(new RegExp("px|%|em|rem","g"),e)},Aj=mo(V2e),G2e=function(e){return SM(new RegExp("deg|rad|grad|turn","g"),e)},vot=mo(G2e);function yot(n,e,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,o="",s=n.value||0,l=e.value||0,c=Tj(n.unit),u=n.convertTo(c),d=e.convertTo(c);return u&&d?(s=u.value,l=d.value,o=Mj(n.unit)):(Xo.isLength(n.unit)||Xo.isLength(e.unit))&&(s=Sc(n,a,r),l=Sc(e,a,r),o="px"),[s,l,function(f){return f+o}]}function Bl(n){var e=0;return n.unit===Yt.kDegrees?e=n.value:n.unit===Yt.kRadians?e=$l(Number(n.value)):n.unit===Yt.kTurns?e=bat(Number(n.value)):n.value&&(e=n.value),e}function Kae(n,e){var r;return Array.isArray(n)?r=n.map(function(i){return Number(i)}):Kr(n)?r=n.split(" ").map(function(i){return Number(i)}):on(n)&&(r=[n]),e===2?r.length===1?[r[0],r[0]]:[r[0],r[1]]:e===4?r.length===1?[r[0],r[0],r[0],r[0]]:r.length===2?[r[0],r[1],r[0],r[1]]:r.length===3?[r[0],r[1],r[2],r[1]]:[r[0],r[1],r[2],r[3]]:e==="even"&&r.length%2===1?[].concat(ot(r),ot(r)):r}function Sc(n,e,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(n.unit===Yt.kPixels)return Number(n.value);if(n.unit===Yt.kPercentage&&r){var a=r.nodeName===at.GROUP?r.getLocalBounds():r.getGeometryBounds();return(i?a.min[e]:0)+n.value/100*a.halfExtents[e]*2}return 0}var bot=function(e){return SM(/deg|rad|grad|turn|px|%/g,e)},xot=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function _ot(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(n=n.toLowerCase().trim(),n==="none")return[];for(var e=/\s*([\w-]+)\(([^)]*)\)/g,r=[],i,a=0;i=e.exec(n);){if(i.index!==a)return[];if(a=i.index+i[0].length,xot.indexOf(i[1])>-1&&r.push({name:i[1],params:i[2].split(" ").map(function(o){return bot(o)||H2(o)})}),e.lastIndex===n.length)return r}return[]}function j2e(n){return n.toString()}var H2e=function(e){return typeof e=="number"?ia(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?ia(Number(e)):ia(0)},Rj=mo(H2e);mo(function(n){return Kr(n)?n.split(" ").map(Rj):n.map(Rj)});function cX(n,e){return[n,e,j2e]}function uX(n,e){return function(r,i){return[r,i,function(a){return j2e(Ta(a,n,e))}]}}function W2e(n,e){if(n.length===e.length)return[n,e,function(r){return r}]}function Pj(n){return n.parsedStyle.d.totalLength===0&&(n.parsedStyle.d.totalLength=Uit(n.parsedStyle.d.absolutePath)),n.parsedStyle.d.totalLength}function wot(n){return n.parsedStyle.points.totalLength===0&&(n.parsedStyle.points.totalLength=aat(n.parsedStyle.points.points)),n.parsedStyle.points.totalLength}function Sot(n){for(var e=0;e<n.length;e++){var r=n[e-1],i=n[e],a=i[0];if(a==="M"&&r){var o=r[0],s=[i[1],i[2]],l=void 0;o==="L"||o==="M"?l=[r[1],r[2]]:(o==="C"||o==="A"||o==="Q")&&(l=[r[r.length-2],r[r.length-1]]),l&&rO(s,l)&&(n.splice(e,1),e--)}}}function Eot(n){for(var e=!1,r=n.length,i=0;i<r;i++){var a=n[i],o=a[0];if(o==="C"||o==="A"||o==="Q"){e=!0;break}}return e}function Cot(n){for(var e=[],r=[],i=[],a=0;a<n.length;a++){var o=n[a],s=o[0];s==="M"?(i.length&&(r.push(i),i=[]),i.push([o[1],o[2]])):s==="Z"?i.length&&(e.push(i),i=[]):i.push([o[1],o[2]])}return i.length>0&&r.push(i),{polygons:e,polylines:r}}function rO(n,e){return n[0]===e[0]&&n[1]===e[1]}function Mot(n,e){for(var r=[],i=[],a=[],o=0;o<n.length;o++){var s=n[o],l=s.currentPoint,c=s.params,u=s.prePoint,d=void 0;switch(s.command){case"Q":d=oat(u[0],u[1],c[1],c[2],c[3],c[4]);break;case"C":d=nat(u[0],u[1],c[1],c[2],c[3],c[4],c[5],c[6]);break;case"A":var f=s.arcParams;d=Jit(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:r.push(l[0]),i.push(l[1]);break}d&&(s.box=d,r.push(d.x,d.x+d.width),i.push(d.y,d.y+d.height))}r=r.filter(function(_){return!Number.isNaN(_)&&_!==1/0&&_!==-1/0}),i=i.filter(function(_){return!Number.isNaN(_)&&_!==1/0&&_!==-1/0});var h=XN(r),p=XN(i),g=YN(r),m=YN(i);if(a.length===0)return{x:h,y:p,width:g-h,height:m-p};for(var v=0;v<a.length;v++){var y=a[v],b=y.currentPoint,x=void 0;b[0]===h?(x=U3(y,e),h-=x.xExtra):b[0]===g&&(x=U3(y,e),g+=x.xExtra),b[1]===p?(x=U3(y,e),p-=x.yExtra):b[1]===m&&(x=U3(y,e),m+=x.yExtra)}return{x:h,y:p,width:g-h,height:m-p}}function U3(n,e){var r=n.prePoint,i=n.currentPoint,a=n.nextPoint,o=Math.pow(i[0]-r[0],2)+Math.pow(i[1]-r[1],2),s=Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2),l=Math.pow(r[0]-a[0],2)+Math.pow(r[1]-a[1],2),c=Math.acos((o+s-l)/(2*Math.sqrt(o)*Math.sqrt(s)));if(!c||Math.sin(c)===0||G2(c,0))return{xExtra:0,yExtra:0};var u=Math.abs(Math.atan2(a[1]-i[1],a[0]-i[0])),d=Math.abs(Math.atan2(a[0]-i[0],a[1]-i[1]));u=u>Math.PI/2?Math.PI-u:u,d=d>Math.PI/2?Math.PI-d:d;var f={xExtra:Math.cos(c/2-u)*(e/2*(1/Math.sin(c/2)))-e/2||0,yExtra:Math.cos(d-c/2)*(e/2*(1/Math.sin(c/2)))-e/2||0};return f}function Zae(n,e){return[e[0]+(e[0]-n[0]),e[1]+(e[1]-n[1])]}var Qae=function(e,r){var i=e.x*r.x+e.y*r.y,a=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(r.x,2)+Math.pow(r.y,2))),o=e.x*r.y-e.y*r.x<0?-1:1,s=o*Math.acos(i/a);return s},Jae=function(e,r,i,a,o,s,l,c){r=Math.abs(r),i=Math.abs(i),a=v2e(a,360);var u=wi(a);if(e.x===l.x&&e.y===l.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(r===0||i===0)return{x:0,y:0,ellipticalArcAngle:0};var d=(e.x-l.x)/2,f=(e.y-l.y)/2,h={x:Math.cos(u)*d+Math.sin(u)*f,y:-Math.sin(u)*d+Math.cos(u)*f},p=Math.pow(h.x,2)/Math.pow(r,2)+Math.pow(h.y,2)/Math.pow(i,2);p>1&&(r*=Math.sqrt(p),i*=Math.sqrt(p));var g=Math.pow(r,2)*Math.pow(i,2)-Math.pow(r,2)*Math.pow(h.y,2)-Math.pow(i,2)*Math.pow(h.x,2),m=Math.pow(r,2)*Math.pow(h.y,2)+Math.pow(i,2)*Math.pow(h.x,2),v=g/m;v=v<0?0:v;var y=(o!==s?1:-1)*Math.sqrt(v),b={x:y*(r*h.y/i),y:y*(-(i*h.x)/r)},x={x:Math.cos(u)*b.x-Math.sin(u)*b.y+(e.x+l.x)/2,y:Math.sin(u)*b.x+Math.cos(u)*b.y+(e.y+l.y)/2},_={x:(h.x-b.x)/r,y:(h.y-b.y)/i},S=Qae({x:1,y:0},_),M={x:(-h.x-b.x)/r,y:(-h.y-b.y)/i},E=Qae(_,M);!s&&E>0?E-=2*Math.PI:s&&E<0&&(E+=2*Math.PI),E%=2*Math.PI;var T=S+E*c,P=r*Math.cos(T),A=i*Math.sin(T),N={x:Math.cos(u)*P-Math.sin(u)*A+x.x,y:Math.sin(u)*P+Math.cos(u)*A+x.y,ellipticalArcStartAngle:S,ellipticalArcEndAngle:S+E,ellipticalArcAngle:T,ellipticalArcCenter:x,resultantRx:r,resultantRy:i};return N};function Tot(n){for(var e=[],r=null,i=null,a=null,o=0,s=n.length,l=0;l<s;l++){var c=n[l];i=n[l+1];var u=c[0],d={command:u,prePoint:r,params:c,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(u){case"M":a=[c[1],c[2]],o=l;break;case"A":var f=Aot(r,c);d.arcParams=f;break}if(u==="Z")r=a,i=n[o+1];else{var h=c.length;r=[c[h-2],c[h-1]]}i&&i[0]==="Z"&&(i=n[o],e[o]&&(e[o].prePoint=r)),d.currentPoint=r,e[o]&&rO(r,e[o].currentPoint)&&(e[o].prePoint=d.prePoint);var p=i?[i[i.length-2],i[i.length-1]]:null;d.nextPoint=p;var g=d.prePoint;if(["L","H","V"].includes(u))d.startTangent=[g[0]-r[0],g[1]-r[1]],d.endTangent=[r[0]-g[0],r[1]-g[1]];else if(u==="Q"){var m=[c[1],c[2]];d.startTangent=[g[0]-m[0],g[1]-m[1]],d.endTangent=[r[0]-m[0],r[1]-m[1]]}else if(u==="T"){var v=e[l-1],y=Zae(v.currentPoint,g);v.command==="Q"?(d.command="Q",d.startTangent=[g[0]-y[0],g[1]-y[1]],d.endTangent=[r[0]-y[0],r[1]-y[1]]):(d.command="TL",d.startTangent=[g[0]-r[0],g[1]-r[1]],d.endTangent=[r[0]-g[0],r[1]-g[1]])}else if(u==="C"){var b=[c[1],c[2]],x=[c[3],c[4]];d.startTangent=[g[0]-b[0],g[1]-b[1]],d.endTangent=[r[0]-x[0],r[1]-x[1]],d.startTangent[0]===0&&d.startTangent[1]===0&&(d.startTangent=[b[0]-x[0],b[1]-x[1]]),d.endTangent[0]===0&&d.endTangent[1]===0&&(d.endTangent=[x[0]-b[0],x[1]-b[1]])}else if(u==="S"){var _=e[l-1],S=Zae(_.currentPoint,g),M=[c[1],c[2]];_.command==="C"?(d.command="C",d.startTangent=[g[0]-S[0],g[1]-S[1]],d.endTangent=[r[0]-M[0],r[1]-M[1]]):(d.command="SQ",d.startTangent=[g[0]-M[0],g[1]-M[1]],d.endTangent=[r[0]-M[0],r[1]-M[1]])}else if(u==="A"){var E=eoe(d,0),T=E.x,P=E.y,A=eoe(d,1,!1),N=A.x,O=A.y;d.startTangent=[T,P],d.endTangent=[N,O]}e.push(d)}return e}function eoe(n,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=n.arcParams,a=i.rx,o=a===void 0?0:a,s=i.ry,l=s===void 0?0:s,c=i.xRotation,u=i.arcFlag,d=i.sweepFlag,f=Jae({x:n.prePoint[0],y:n.prePoint[1]},o,l,c,!!u,!!d,{x:n.currentPoint[0],y:n.currentPoint[1]},e),h=Jae({x:n.prePoint[0],y:n.prePoint[1]},o,l,c,!!u,!!d,{x:n.currentPoint[0],y:n.currentPoint[1]},r?e+.005:e-.005),p=h.x-f.x,g=h.y-f.y,m=Math.sqrt(p*p+g*g);return{x:-p/m,y:-g/m}}function V3(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function Nj(n,e){return V3(n)*V3(e)?(n[0]*e[0]+n[1]*e[1])/(V3(n)*V3(e)):1}function toe(n,e){return(n[0]*e[1]<n[1]*e[0]?-1:1)*Math.acos(Nj(n,e))}function Aot(n,e){var r=e[1],i=e[2],a=v2e(wi(e[3]),Math.PI*2),o=e[4],s=e[5],l=n[0],c=n[1],u=e[6],d=e[7],f=Math.cos(a)*(l-u)/2+Math.sin(a)*(c-d)/2,h=-1*Math.sin(a)*(l-u)/2+Math.cos(a)*(c-d)/2,p=f*f/(r*r)+h*h/(i*i);p>1&&(r*=Math.sqrt(p),i*=Math.sqrt(p));var g=r*r*(h*h)+i*i*(f*f),m=g?Math.sqrt((r*r*(i*i)-g)/g):1;o===s&&(m*=-1),isNaN(m)&&(m=0);var v=i?m*r*h/i:0,y=r?m*-i*f/r:0,b=(l+u)/2+Math.cos(a)*v-Math.sin(a)*y,x=(c+d)/2+Math.sin(a)*v+Math.cos(a)*y,_=[(f-v)/r,(h-y)/i],S=[(-1*f-v)/r,(-1*h-y)/i],M=toe([1,0],_),E=toe(_,S);return Nj(_,S)<=-1&&(E=Math.PI),Nj(_,S)>=1&&(E=0),s===0&&E>0&&(E-=2*Math.PI),s===1&&E<0&&(E+=2*Math.PI),{cx:b,cy:x,rx:rO(n,[u,d])?0:r,ry:rO(n,[u,d])?0:i,startAngle:M,endAngle:M+E,xRotation:a,arcFlag:o,sweepFlag:s}}var q2e=function(e){if(e===""||Array.isArray(e)&&e.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var r;try{r=ZN(e)}catch{r=ZN(""),console.error("[g]: Invalid SVG Path definition: ".concat(e))}Sot(r);var i=Eot(r),a=Cot(r),o=a.polygons,s=a.polylines,l=Tot(r),c=Mot(l,0),u=c.x,d=c.y,f=c.width,h=c.height;return{absolutePath:r,hasArc:i,segments:l,polygons:o,polylines:s,totalLength:0,rect:{x:Number.isFinite(u)?u:0,y:Number.isFinite(d)?d:0,width:Number.isFinite(f)?f:0,height:Number.isFinite(h)?h:0}}},Rot=mo(q2e);function Y2e(n){return Kr(n)?Rot(n):q2e(n)}function Pot(n,e,r){var i=n.curve,a=e.curve;(!i||i.length===0)&&(i=bj(n.absolutePath,!1),n.curve=i),(!a||a.length===0)&&(a=bj(e.absolutePath,!1),e.curve=a);var o=[i,a];i.length!==a.length&&(o=T2e(i,a));var s=Pae(o[0])!==Pae(o[1])?Lit(o[0]):Dit(o[0]);return[s,Git(o[1],s),function(l){return l}]}function Not(n,e){var r;return Kr(n)?r=n.split(" ").map(function(i){var a=i.split(","),o=fe(a,2),s=o[0],l=o[1];return[Number(s),Number(l)]}):r=n,{points:r,totalLength:0,segments:[]}}function Oot(n,e){return[n.points,e.points,function(r){return r}]}var Sa=null,fx=/\s*(\w+)\(([^)]*)\)/g;function Nl(n){return function(e){var r=0;return n.map(function(i){return i===Sa?e[r++]:i})}}function kv(n){return n}var JE={matrix:["NNNNNN",[Sa,Sa,0,0,Sa,Sa,0,0,0,0,1,0,Sa,Sa,0,1],kv],matrix3d:["NNNNNNNNNNNNNNNN",kv],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",Nl([Sa,Sa,new Xo(1)]),kv],scaleX:["N",Nl([Sa,new Xo(1),new Xo(1)]),Nl([Sa,new Xo(1)])],scaleY:["N",Nl([new Xo(1),Sa,new Xo(1)]),Nl([new Xo(1),Sa])],scaleZ:["N",Nl([new Xo(1),new Xo(1),Sa])],scale3d:["NNN",kv],skew:["Aa",null,kv],skewX:["A",null,Nl([Sa,my])],skewY:["A",null,Nl([my,Sa])],translate:["Tt",Nl([Sa,Sa,yd]),kv],translateX:["T",Nl([Sa,yd,yd]),Nl([Sa,yd])],translateY:["T",Nl([yd,Sa,yd]),Nl([yd,Sa])],translateZ:["L",Nl([yd,yd,Sa])],translate3d:["TTL",kv]};function X2e(n){for(var e=[],r=n.length,i=0;i<r;i++){var a=n[i],o=a[0],s=a.slice(1);o==="translate"||o==="skew"?s.length===1&&s.push(0):o==="scale"&&s.length===1&&s.push(s[0]);var l=JE[o];if(!l)return[];var c=s.map(function(u){return ia(u)});e.push({t:o,d:c})}return e}function K2e(n){if(Array.isArray(n))return X2e(n);if(n=(n||"none").trim(),n==="none")return[];var e=[],r,i=0;for(fx.lastIndex=0;r=fx.exec(n);){if(r.index!==i)return[];i=r.index+r[0].length;var a=r[1],o=JE[a];if(!o)return[];var s=r[2].split(","),l=o[0];if(l.length<s.length)return[];for(var c=[],u=0;u<l.length;u++){var d=s[u],f=l[u],h=void 0;if(d?h={A:function(g){return g.trim()==="0"?my:vot(g)},N:Rj,T:Aj,L:got}[f.toUpperCase()](d):h={a:my,n:c[0],t:yd}[f],h===void 0)return[];c.push(h)}if(e.push({t:a,d:c}),fx.lastIndex===n.length)return e}return[]}function Iot(n){if(Array.isArray(n))return X2e(n);if(n=(n||"none").trim(),n==="none")return[];var e=[],r,i=0;for(fx.lastIndex=0;r=fx.exec(n);){if(r.index!==i)return[];i=r.index+r[0].length;var a=r[1],o=JE[a];if(!o)return[];var s=r[2].split(","),l=o[0];if(l.length<s.length)return[];for(var c=[],u=0;u<l.length;u++){var d=s[u],f=l[u],h=void 0;if(d?h={A:function(g){return g.trim()==="0"?my:G2e(g)},N:H2e,T:V2e,L:U2e}[f.toUpperCase()](d):h={a:my,n:c[0],t:yd}[f],h===void 0)return[];c.push(h)}if(e.push({t:a,d:c}),fx.lastIndex===n.length)return e}return[]}function Dot(n){var e,r,i,a;switch(n.t){case"rotateX":return a=wi(Bl(n.d[0])),[1,0,0,0,0,Math.cos(a),Math.sin(a),0,0,-Math.sin(a),Math.cos(a),0,0,0,0,1];case"rotateY":return a=wi(Bl(n.d[0])),[Math.cos(a),0,-Math.sin(a),0,0,1,0,0,Math.sin(a),0,Math.cos(a),0,0,0,0,1];case"rotate":case"rotateZ":return a=wi(Bl(n.d[0])),[Math.cos(a),Math.sin(a),0,0,-Math.sin(a),Math.cos(a),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=n.d[0].value,r=n.d[1].value,i=n.d[2].value,a=wi(Bl(n.d[3]));var o=e*e+r*r+i*i;if(o===0)e=1,r=0,i=0;else if(o!==1){var s=Math.sqrt(o);e/=s,r/=s,i/=s}var l=Math.sin(a/2),c=l*Math.cos(a/2),u=l*l;return[1-2*(r*r+i*i)*u,2*(e*r*u+i*c),2*(e*i*u-r*c),0,2*(e*r*u-i*c),1-2*(e*e+i*i)*u,2*(r*i*u+e*c),0,2*(e*i*u+r*c),2*(r*i*u-e*c),1-2*(e*e+r*r)*u,0,0,0,0,1];case"scale":return[n.d[0].value,0,0,0,0,n.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[n.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,n.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,n.d[0].value,0,0,0,0,1];case"scale3d":return[n.d[0].value,0,0,0,0,n.d[1].value,0,0,0,0,n.d[2].value,0,0,0,0,1];case"skew":var d=wi(Bl(n.d[0])),f=wi(Bl(n.d[1]));return[1,Math.tan(f),0,0,Math.tan(d),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return a=wi(Bl(n.d[0])),[1,0,0,0,Math.tan(a),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return a=wi(Bl(n.d[0])),[1,Math.tan(a),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return e=Sc(n.d[0],0,null)||0,r=Sc(n.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,r,0,1];case"translateX":return e=Sc(n.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,0,0,1];case"translateY":return r=Sc(n.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,r,0,1];case"translateZ":return i=Sc(n.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,i,1];case"translate3d":return e=Sc(n.d[0],0,null)||0,r=Sc(n.d[1],0,null)||0,i=Sc(n.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,r,i,1];case"perspective":var h=Sc(n.d[0],0,null)||0,p=h?-1/h:0;return[1,0,0,0,0,1,0,0,0,0,1,p,0,0,0,1];case"matrix":return[n.d[0].value,n.d[1].value,0,0,n.d[2].value,n.d[3].value,0,0,0,0,1,0,n.d[4].value,n.d[5].value,0,1];case"matrix3d":return n.d.map(function(g){return g.value})}}function Lot(n,e){return[n[0]*e[0]+n[4]*e[1]+n[8]*e[2]+n[12]*e[3],n[1]*e[0]+n[5]*e[1]+n[9]*e[2]+n[13]*e[3],n[2]*e[0]+n[6]*e[1]+n[10]*e[2]+n[14]*e[3],n[3]*e[0]+n[7]*e[1]+n[11]*e[2]+n[15]*e[3],n[0]*e[4]+n[4]*e[5]+n[8]*e[6]+n[12]*e[7],n[1]*e[4]+n[5]*e[5]+n[9]*e[6]+n[13]*e[7],n[2]*e[4]+n[6]*e[5]+n[10]*e[6]+n[14]*e[7],n[3]*e[4]+n[7]*e[5]+n[11]*e[6]+n[15]*e[7],n[0]*e[8]+n[4]*e[9]+n[8]*e[10]+n[12]*e[11],n[1]*e[8]+n[5]*e[9]+n[9]*e[10]+n[13]*e[11],n[2]*e[8]+n[6]*e[9]+n[10]*e[10]+n[14]*e[11],n[3]*e[8]+n[7]*e[9]+n[11]*e[10]+n[15]*e[11],n[0]*e[12]+n[4]*e[13]+n[8]*e[14]+n[12]*e[15],n[1]*e[12]+n[5]*e[13]+n[9]*e[14]+n[13]*e[15],n[2]*e[12]+n[6]*e[13]+n[10]*e[14]+n[14]*e[15],n[3]*e[12]+n[7]*e[13]+n[11]*e[14]+n[15]*e[15]]}function kot(n){return n.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:n.map(Dot).reduce(Lot)}function noe(n){var e=[0,0,0],r=[1,1,1],i=[0,0,0],a=[0,0,0,1],o=[0,0,0,1];return Eat(kot(n),e,r,i,a,o),[[e,r,i,o,a]]}var Fot=function(){function n(i,a){for(var o=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],s=0;s<4;s++)for(var l=0;l<4;l++)for(var c=0;c<4;c++)o[s][l]+=a[s][c]*i[c][l];return o}function e(i){return i[0][2]===0&&i[0][3]===0&&i[1][2]===0&&i[1][3]===0&&i[2][0]===0&&i[2][1]===0&&i[2][2]===1&&i[2][3]===0&&i[3][2]===0&&i[3][3]===1}function r(i,a,o,s,l){for(var c=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],u=0;u<4;u++)c[u][3]=l[u];for(var d=0;d<3;d++)for(var f=0;f<3;f++)c[3][d]+=i[f]*c[f][d];var h=s[0],p=s[1],g=s[2],m=s[3],v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];v[0][0]=1-2*(p*p+g*g),v[0][1]=2*(h*p-g*m),v[0][2]=2*(h*g+p*m),v[1][0]=2*(h*p+g*m),v[1][1]=1-2*(h*h+g*g),v[1][2]=2*(p*g-h*m),v[2][0]=2*(h*g-p*m),v[2][1]=2*(p*g+h*m),v[2][2]=1-2*(h*h+p*p),c=n(c,v);var y=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];o[2]&&(y[2][1]=o[2],c=n(c,y)),o[1]&&(y[2][1]=0,y[2][0]=o[0],c=n(c,y)),o[0]&&(y[2][0]=0,y[1][0]=o[0],c=n(c,y));for(var b=0;b<3;b++)for(var x=0;x<3;x++)c[b][x]*=a[b];return e(c)?[c[0][0],c[0][1],c[1][0],c[1][1],c[3][0],c[3][1]]:c[0].concat(c[1],c[2],c[3])}return r}();function $ot(n){return n.toFixed(6).replace(".000000","")}function pF(n,e){var r,i;return n.decompositionPair!==e&&(n.decompositionPair=e,r=noe(n)),e.decompositionPair!==n&&(e.decompositionPair=n,i=noe(e)),r[0]===null||i[0]===null?[[!1],[!0],function(a){return a?e[0].d:n[0].d}]:(r[0].push(0),i[0].push(1),[r,i,function(a){var o=zot(r[0][3],i[0][3],a[5]),s=Fot(a[0],a[1],a[2],o,a[4]),l=s.map($ot).join(",");return l}])}function Bot(n,e){for(var r=0,i=0;i<n.length;i++)r+=n[i]*e[i];return r}function zot(n,e,r){var i=Bot(n,e);i=Ta(i,-1,1);var a=[];if(i===1)a=n;else for(var o=Math.acos(i),s=Math.sin(r*o)*1/Math.sqrt(1-i*i),l=0;l<4;l++)a.push(n[l]*(Math.cos(r*o)-i*s)+e[l]*s);return a}function gF(n){return n.replace(/[XY]/,"")}function mF(n){return n.replace(/(X|Y|Z|3d)?$/,"3d")}var Uot=function(e,r){return e==="perspective"&&r==="perspective"||(e==="matrix"||e==="matrix3d")&&(r==="matrix"||r==="matrix3d")};function Vot(n,e,r){var i=!1;if(!n.length||!e.length){n.length||(i=!0,n=e,e=[]);for(var a=function(){var N=n[o],O=N.t,I=N.d,D=O.substring(0,5)==="scale"?1:0;e.push({t:O,d:I.map(function(k){return typeof k=="number"?ia(D):ia(D,k.unit)})})},o=0;o<n.length;o++)a()}var s=[],l=[],c=[];if(n.length!==e.length){var u=pF(n,e);s=[u[0]],l=[u[1]],c=[["matrix",[u[2]]]]}else for(var d=0;d<n.length;d++){var f=n[d].t,h=e[d].t,p=n[d].d,g=e[d].d,m=JE[f],v=JE[h],y=void 0;if(Uot(f,h)){var b=pF([n[d]],[e[d]]);s.push(b[0]),l.push(b[1]),c.push(["matrix",[b[2]]]);continue}else if(f===h)y=f;else if(m[2]&&v[2]&&gF(f)===gF(h))y=gF(f),p=m[2](p),g=v[2](g);else if(m[1]&&v[1]&&mF(f)===mF(h))y=mF(f),p=m[1](p),g=v[1](g);else{var x=pF(n,e);s=[x[0]],l=[x[1]],c=[["matrix",[x[2]]]];break}for(var _=[],S=[],M=[],E=0;E<p.length;E++){var T=yot(p[E],g[E],r,!1,E);_[E]=T[0],S[E]=T[1],M.push(T[2])}s.push(_),l.push(S),c.push([y,M])}if(i){var P=s;s=l,l=P}return[s,l,function(A){return A.map(function(N,O){var I=N.map(function(D,k){return c[O][1][k](D)}).join(",");return c[O][0]==="matrix"&&I.split(",").length===16&&(c[O][0]="matrix3d"),c[O][0]==="matrix3d"&&I.split(",").length===6&&(c[O][0]="matrix"),"".concat(c[O][0],"(").concat(I,")")}).join(" ")}]}var Got=mo(function(n){if(Kr(n)){if(n==="text-anchor")return[ia(0,"px"),ia(0,"px")];var e=n.split(" ");return e.length===1&&(e[0]==="top"||e[0]==="bottom"?(e[1]=e[0],e[0]="center"):e[1]="center"),e.length!==2?null:[Aj(roe(e[0])),Aj(roe(e[1]))]}return[ia(n[0]||0,"px"),ia(n[1]||0,"px")]});function roe(n){return n==="center"?"50%":n==="left"||n==="top"?"0%":n==="right"||n==="bottom"?"100%":n}var dX=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:qt.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:qt.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:qt.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:qt.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:qt.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:qt.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:qt.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:qt.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:qt.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:qt.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:qt.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:qt.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:qt.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:qt.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:qt.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:qt.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:qt.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:qt.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:qt.FILTER},{n:"clipPath",syntax:qt.DEFINED_PATH},{n:"textPath",syntax:qt.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:qt.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:qt.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:qt.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:qt.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:qt.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:qt.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:qt.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:qt.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:qt.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:qt.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:qt.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:qt.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:qt.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:qt.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:qt.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:qt.COORDINATE},{n:"y1",int:!0,l:!0,syntax:qt.COORDINATE},{n:"z1",int:!0,l:!0,syntax:qt.COORDINATE},{n:"x2",int:!0,l:!0,syntax:qt.COORDINATE},{n:"y2",int:!0,l:!0,syntax:qt.COORDINATE},{n:"z2",int:!0,l:!0,syntax:qt.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:qt.PATH,p:50},{n:"points",int:!0,l:!0,syntax:qt.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:qt.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:qt.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:qt.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:qt.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:qt.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:qt.NUMBER,d:function(e){return e===at.PATH||e===at.POLYGON||e===at.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:qt.MARKER},{n:"markerEnd",syntax:qt.MARKER},{n:"markerMid",syntax:qt.MARKER},{n:"markerStartOffset",syntax:qt.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:qt.LENGTH,l:!0,int:!0,d:"0"}],jot=new Set(dX.filter(function(n){return!!n.l}).map(function(n){return n.n})),Z2e={},Hot=function(){function n(e){var r=this;st(this,n),this.runtime=e,dX.forEach(function(i){r.registerMetadata(i)})}return lt(n,[{key:"registerMetadata",value:function(r){[r.n].concat(ot(r.a||[])).forEach(function(i){Z2e[i]=r})}},{key:"getPropertySyntax",value:function(r){return this.runtime.CSSPropertySyntaxFactory[r]}},{key:"processProperties",value:function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{forceUpdateGeometry:!1};Object.assign(r.attributes,i);var o=r.parsedStyle.clipPath,s=r.parsedStyle.offsetPath;Wot(r,i);var l=!!a.forceUpdateGeometry;if(!l){for(var c in i)if(jot.has(c)){l=!0;break}}var u=Q2e(r);u.has("fill")&&i.fill&&(r.parsedStyle.fill=H2(i.fill)),u.has("stroke")&&i.stroke&&(r.parsedStyle.stroke=H2(i.stroke)),u.has("shadowColor")&&i.shadowColor&&(r.parsedStyle.shadowColor=H2(i.shadowColor)),u.has("filter")&&i.filter&&(r.parsedStyle.filter=_ot(i.filter)),u.has("radius")&&!Nn(i.radius)&&(r.parsedStyle.radius=Kae(i.radius,4)),u.has("lineDash")&&!Nn(i.lineDash)&&(r.parsedStyle.lineDash=Kae(i.lineDash,"even")),u.has("points")&&i.points&&(r.parsedStyle.points=Not(i.points)),u.has("d")&&i.d===""&&(r.parsedStyle.d=se({},L2e)),u.has("d")&&i.d&&(r.parsedStyle.d=Y2e(i.d)),u.has("textTransform")&&i.textTransform&&this.runtime.CSSPropertySyntaxFactory[qt.TEXT_TRANSFORM].calculator(null,null,{value:i.textTransform},r,null),u.has("clipPath")&&!Kn(i.clipPath)&&this.runtime.CSSPropertySyntaxFactory[qt.DEFINED_PATH].calculator("clipPath",o,i.clipPath,r,this.runtime),u.has("offsetPath")&&i.offsetPath&&this.runtime.CSSPropertySyntaxFactory[qt.DEFINED_PATH].calculator("offsetPath",s,i.offsetPath,r,this.runtime),u.has("transform")&&i.transform&&(r.parsedStyle.transform=K2e(i.transform)),u.has("transformOrigin")&&i.transformOrigin&&(r.parsedStyle.transformOrigin=Got(i.transformOrigin)),u.has("markerStart")&&i.markerStart&&(r.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[qt.MARKER].calculator(null,i.markerStart,i.markerStart,null,null)),u.has("markerEnd")&&i.markerEnd&&(r.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[qt.MARKER].calculator(null,i.markerEnd,i.markerEnd,null,null)),u.has("markerMid")&&i.markerMid&&(r.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[qt.MARKER].calculator("",i.markerMid,i.markerMid,null,null)),u.has("zIndex")&&!Nn(i.zIndex)&&this.runtime.CSSPropertySyntaxFactory[qt.Z_INDEX].postProcessor(r),u.has("offsetDistance")&&!Nn(i.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[qt.OFFSET_DISTANCE].postProcessor(r),u.has("transform")&&i.transform&&this.runtime.CSSPropertySyntaxFactory[qt.TRANSFORM].postProcessor(r),u.has("transformOrigin")&&i.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[qt.TRANSFORM_ORIGIN].postProcessor(r),l&&(r.geometry.dirty=!0,r.renderable.boundsDirty=!0,r.renderable.renderBoundsDirty=!0,a.forceUpdateGeometry||this.runtime.sceneGraphService.dirtifyToRoot(r))}},{key:"updateGeometry",value:function(r){var i=r.nodeName,a=this.runtime.geometryUpdaterFactory[i];if(a){var o=r.geometry;o.contentBounds||(o.contentBounds=new Bi),o.renderBounds||(o.renderBounds=new Bi);var s=r.parsedStyle,l=a.update(s,r),c=l.cx,u=c===void 0?0:c,d=l.cy,f=d===void 0?0:d,h=l.cz,p=h===void 0?0:h,g=l.hwidth,m=g===void 0?0:g,v=l.hheight,y=v===void 0?0:v,b=l.hdepth,x=b===void 0?0:b,_=[Math.abs(m),Math.abs(y),x],S=s.stroke,M=s.lineWidth,E=M===void 0?1:M,T=s.increasedLineWidthForHitTesting,P=T===void 0?0:T,A=s.shadowType,N=A===void 0?"outer":A,O=s.shadowColor,I=s.filter,D=I===void 0?[]:I,k=s.transformOrigin,$=[u,f,p];o.contentBounds.update($,_);var B=i===at.POLYLINE||i===at.POLYGON||i===at.PATH?Math.SQRT2:.5,F=S&&!S.isNone;if(F){var G=((E||0)+(P||0))*B;_[0]+=G,_[1]+=G}if(o.renderBounds.update($,_),O&&N&&N!=="inner"){var z=o.renderBounds,U=z.min,H=z.max,X=s.shadowBlur,V=s.shadowOffsetX,W=s.shadowOffsetY,K=X||0,q=V||0,Q=W||0,ie=U[0]-K+q,oe=H[0]+K+q,ue=U[1]-K+Q,le=H[1]+K+Q;U[0]=Math.min(U[0],ie),H[0]=Math.max(H[0],oe),U[1]=Math.min(U[1],ue),H[1]=Math.max(H[1],le),o.renderBounds.setMinMax(U,H)}D.forEach(function(Me){var Re=Me.name,Xe=Me.params;if(Re==="blur"){var He=Xe[0].value;o.renderBounds.update(o.renderBounds.center,Sm(o.renderBounds.halfExtents,o.renderBounds.halfExtents,[He,He,0]))}else if(Re==="drop-shadow"){var ee=Xe[0].value,Y=Xe[1].value,ce=Xe[2].value,_e=o.renderBounds,Ae=_e.min,Ce=_e.max,et=Ae[0]-ce+ee,Ve=Ce[0]+ce+ee,qe=Ae[1]-ce+Y,dt=Ce[1]+ce+Y;Ae[0]=Math.min(Ae[0],et),Ce[0]=Math.max(Ce[0],Ve),Ae[1]=Math.min(Ae[1],qe),Ce[1]=Math.max(Ce[1],dt),o.renderBounds.setMinMax(Ae,Ce)}}),r.geometry.dirty=!1;var me=m<0,J=y<0,pe=(me?-1:1)*(k?Sc(k[0],0,r,!0):0),ve=(J?-1:1)*(k?Sc(k[1],1,r,!0):0);(pe||ve)&&r.setOrigin(pe,ve)}}},{key:"updateSizeAttenuation",value:function(r,i){r.style.isSizeAttenuation?(r.style.rawLineWidth||(r.style.rawLineWidth=r.style.lineWidth),r.style.lineWidth=(r.style.rawLineWidth||1)/i,r.nodeName===at.CIRCLE&&(r.style.rawR||(r.style.rawR=r.style.r),r.style.r=(r.style.rawR||1)/i)):(r.style.rawLineWidth&&(r.style.lineWidth=r.style.rawLineWidth,delete r.style.rawLineWidth),r.nodeName===at.CIRCLE&&r.style.rawR&&(r.style.r=r.style.rawR,delete r.style.rawR))}}])}();function Wot(n,e){var r=Q2e(n);for(var i in e)r.has(i)&&(n.parsedStyle[i]=e[i])}function Q2e(n){return n.constructor.PARSED_STYLE_LIST}var qot=function(){function n(){st(this,n),this.mixer=cX}return lt(n,[{key:"calculator",value:function(r,i,a,o){return Bl(a)}}])}(),Yot=function(){function n(){st(this,n)}return lt(n,[{key:"calculator",value:function(r,i,a,o,s){return a instanceof ed&&(a=null),s.sceneGraphService.updateDisplayObjectDependency(r,i,a,o),r==="clipPath"&&o.forEach(function(l){l.childNodes.length===0&&s.sceneGraphService.dirtifyToRoot(l)}),a}}])}(),Xot=function(){function n(){st(this,n),this.parser=H2,this.mixer=pot}return lt(n,[{key:"calculator",value:function(r,i,a,o){return a instanceof ed?a.value==="none"?$2e:B2e:a}}])}(),Kot=function(){function n(){st(this,n)}return lt(n,[{key:"calculator",value:function(r,i,a){return a instanceof ed?[]:a}}])}();function ioe(n){var e=n.parsedStyle,r=e.fontSize;return Nn(r)?null:r}var Oj=function(){function n(){st(this,n),this.mixer=cX}return lt(n,[{key:"calculator",value:function(r,i,a,o,s){if(on(a))return a;if(Xo.isRelativeUnit(a.unit)){if(a.unit===Yt.kPercentage)return 0;if(a.unit===Yt.kEms){if(o.parentNode){var l=ioe(o.parentNode);if(l)return l*=a.value,l}return 0}if(a.unit===Yt.kRems){var c;if(o!=null&&(c=o.ownerDocument)!==null&&c!==void 0&&c.documentElement){var u=ioe(o.ownerDocument.documentElement);if(u)return u*=a.value,u}return 0}}else return a.value}}])}(),Zot=function(){function n(){st(this,n),this.mixer=W2e}return lt(n,[{key:"calculator",value:function(r,i,a){return a.map(function(o){return o.value})}}])}(),Qot=function(){function n(){st(this,n),this.mixer=W2e}return lt(n,[{key:"calculator",value:function(r,i,a){return a.map(function(o){return o.value})}}])}(),Jot=function(){function n(){st(this,n)}return lt(n,[{key:"calculator",value:function(r,i,a,o){var s;a instanceof ed&&(a=null);var l=(s=a)===null||s===void 0?void 0:s.cloneNode(!0);return l&&(l.style.isMarker=!0),l}}])}(),est=function(){function n(){st(this,n),this.mixer=cX}return lt(n,[{key:"calculator",value:function(r,i,a){return a.value}}])}(),tst=function(){function n(){st(this,n),this.mixer=uX(0,1)}return lt(n,[{key:"calculator",value:function(r,i,a){return a.value}},{key:"postProcessor",value:function(r){var i=r.parsedStyle,a=i.offsetPath,o=i.offsetDistance;if(a){var s=a.nodeName;if(s===at.LINE||s===at.PATH||s===at.POLYLINE){var l=a.getPoint(o);l&&r.setLocalPosition(l.x,l.y)}}}}])}(),nst=function(){function n(){st(this,n),this.mixer=uX(0,1)}return lt(n,[{key:"calculator",value:function(r,i,a){return a.value}}])}(),rst=function(){function n(){st(this,n),this.parser=Y2e,this.mixer=Pot}return lt(n,[{key:"calculator",value:function(r,i,a){return a instanceof ed&&a.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Vx(0,0,0,0)}:a}}])}(),ist=lt(function n(){st(this,n),this.mixer=Oot}),ast=function(n){function e(){var r;st(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=dr(this,e,[].concat(a)),r.mixer=uX(0,1/0),r}return $n(e,n),lt(e)}(Oj),ost=function(){function n(){st(this,n)}return lt(n,[{key:"calculator",value:function(r,i,a,o){return a instanceof ed?a.value==="unset"?"":a.value:"".concat(a)}},{key:"postProcessor",value:function(r){r.nodeValue="".concat(r.parsedStyle.text)||""}}])}(),sst=function(){function n(){st(this,n)}return lt(n,[{key:"calculator",value:function(r,i,a,o){var s=o.getAttribute("text");if(s){var l=s;a.value==="capitalize"?l=s.charAt(0).toUpperCase()+s.slice(1):a.value==="lowercase"?l=s.toLowerCase():a.value==="uppercase"&&(l=s.toUpperCase()),o.parsedStyle.text=l}return a.value}}])}(),vF=new WeakMap;function lst(n,e,r){if(n){var i=typeof n=="string"?document.getElementById(n):n;vF.has(i)&&vF.get(i).destroy(r),vF.set(i,e)}}var fX=typeof window<"u"&&typeof window.document<"u";function cst(n){return!!n.getAttribute}function ust(n,e){for(var r=0,i=n.length;r<i;){var a=r+i>>>1;J2e(n[a],e)<0?r=a+1:i=a}return r}function J2e(n,e){var r=Number(n.parsedStyle.zIndex||0),i=Number(e.parsedStyle.zIndex||0);if(r===i){var a=n.parentNode;if(a){var o=a.childNodes||[];return o.indexOf(n)-o.indexOf(e)}}return r-i}function eEe(n){var e=n;do{var r,i=(r=e.parsedStyle)===null||r===void 0?void 0:r.clipPath;if(i)return e;e=e.parentElement}while(e!==null);return null}var aoe="px";function dst(n,e,r){fX&&n.style&&(n.style.width=e+aoe,n.style.height=r+aoe)}function tEe(n,e){if(fX)return document.defaultView.getComputedStyle(n,null).getPropertyValue(e)}function fst(n){var e=tEe(n,"width");return e==="auto"?n.offsetWidth:parseFloat(e)}function hst(n){var e=tEe(n,"height");return e==="auto"?n.offsetHeight:parseFloat(e)}var pst=1,gst={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Ij=typeof performance=="object"&&performance.now?performance:Date;function iO(n){return n.nodeName===at.FRAGMENT?!0:n.getRootNode().nodeName===at.FRAGMENT}function By(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"auto",e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=!1,a=!1,o=!!e&&!e.isNone,s=!!r&&!r.isNone;return n==="visiblepainted"||n==="painted"||n==="auto"?(i=o,a=s):n==="visiblefill"||n==="fill"?i=!0:n==="visiblestroke"||n==="stroke"?a=!0:(n==="visible"||n==="all")&&(i=!0,a=!0),[i,a]}var mst=1,vst=function(){return mst++},Qf=typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:{},yst=Date.now(),bst=function(){return Qf.performance&&typeof Qf.performance.now=="function"?Qf.performance.now():Date.now()-yst},r2={},ooe=Date.now(),xst=function(e){if(typeof e!="function")throw new TypeError("".concat(e," is not a function"));var r=Date.now(),i=r-ooe,a=i>16?0:16-i,o=vst();return r2[o]=e,Object.keys(r2).length>1||setTimeout(function(){ooe=r;var s=r2;r2={},Object.keys(s).forEach(function(l){return s[l](bst())})},a),o},_st=function(e){delete r2[e]},wst=["","webkit","moz","ms","o"],nEe=function(e){return typeof e!="string"?xst:e===""?Qf.requestAnimationFrame:Qf["".concat(e,"RequestAnimationFrame")]},Sst=function(e){return typeof e!="string"?_st:e===""?Qf.cancelAnimationFrame:Qf["".concat(e,"CancelAnimationFrame")]||Qf["".concat(e,"CancelRequestAnimationFrame")]},Est=function(e,r){for(var i=0;e[i]!==void 0;){if(r(e[i]))return e[i];i+=1}},rEe=Est(wst,function(n){return!!nEe(n)}),hX=nEe(rEe),iEe=Sst(rEe);Qf.requestAnimationFrame=hX;Qf.cancelAnimationFrame=iEe;var Cst=function(){function n(){st(this,n),this.callbacks=[]}return lt(n,[{key:"getCallbacksNum",value:function(){return this.callbacks.length}},{key:"tapPromise",value:function(r,i){this.callbacks.push(i)}},{key:"promise",value:function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Promise.all(this.callbacks.map(function(o){return o.apply(void 0,i)}))}}])}(),Mst=function(){function n(){st(this,n),this.callbacks=[]}return lt(n,[{key:"tapPromise",value:function(r,i){this.callbacks.push(i)}},{key:"promise",value:function(){var e=bl(pi().mark(function i(){var a,o,s,l,c=arguments;return pi().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!this.callbacks.length){d.next=14;break}return d.next=3,(a=this.callbacks)[0].apply(a,c);case 3:o=d.sent,s=0;case 5:if(!(s<this.callbacks.length-1)){d.next=13;break}return l=this.callbacks[s],d.next=9,l(o);case 9:o=d.sent;case 10:s++,d.next=5;break;case 13:return d.abrupt("return",o);case 14:return d.abrupt("return",null);case 15:case"end":return d.stop()}},i,this)}));function r(){return e.apply(this,arguments)}return r}()}])}(),nl=function(){function n(){st(this,n),this.callbacks=[]}return lt(n,[{key:"tap",value:function(r,i){this.callbacks.push(i)}},{key:"call",value:function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=arguments;this.callbacks.forEach(function(s){s.apply(void 0,o)})}}])}(),yF=function(){function n(){st(this,n),this.callbacks=[]}return lt(n,[{key:"tap",value:function(r,i){this.callbacks.push(i)}},{key:"call",value:function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];if(this.callbacks.length){for(var o=arguments,s=this.callbacks[0].apply(void 0,o),l=0;l<this.callbacks.length-1;l++){var c=this.callbacks[l];s=c(s)}return s}return null}}])}(),Tst=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Ast=/([\"\'])[^\'\"]+\1/;function Rst(n){for(var e=n.fontSize,r=e===void 0?16:e,i=n.fontFamily,a=i===void 0?"sans-serif":i,o=n.fontStyle,s=o===void 0?"normal":o,l=n.fontVariant,c=l===void 0?"normal":l,u=n.fontWeight,d=u===void 0?"normal":u,f=on(r)&&"".concat(r,"px")||"16px",h=a.split(","),p=h.length-1;p>=0;p--){var g=h[p].trim();!Ast.test(g)&&Tst.indexOf(g)<0&&(g='"'.concat(g,'"')),h[p]=g}return"".concat(s," ").concat(c," ").concat(d," ").concat(f," ").concat(h.join(","))}function bF(n,e,r){return Hm(n),n[4]=Math.tan(e),n[1]=Math.tan(r),n}var ja=$i(),Pst=$i(),Nst={scale:function(e){u0(ja,[e[0].value,e[1].value,1])},scaleX:function(e){u0(ja,[e[0].value,1,1])},scaleY:function(e){u0(ja,[1,e[0].value,1])},scaleZ:function(e){u0(ja,[1,1,e[0].value])},scale3d:function(e){u0(ja,[e[0].value,e[1].value,e[2].value])},translate:function(e){jg(ja,[e[0].value,e[1].value,0])},translateX:function(e){jg(ja,[e[0].value,0,0])},translateY:function(e){jg(ja,[0,e[0].value,0])},translateZ:function(e){jg(ja,[0,0,e[0].value])},translate3d:function(e){jg(ja,[e[0].value,e[1].value,e[2].value])},rotate:function(e){dj(ja,wi(Bl(e[0])))},rotateX:function(e){i2e(ja,wi(Bl(e[0])))},rotateY:function(e){a2e(ja,wi(Bl(e[0])))},rotateZ:function(e){dj(ja,wi(Bl(e[0])))},rotate3d:function(e){r2e(ja,wi(Bl(e[3])),[e[0].value,e[1].value,e[2].value])},skew:function(e){bF(ja,wi(e[0].value),wi(e[1].value))},skewX:function(e){bF(ja,wi(e[0].value),0)},skewY:function(e){bF(ja,0,wi(e[0].value))},matrix:function(e){uj(ja,e[0].value,e[1].value,0,0,e[2].value,e[3].value,0,0,0,0,1,0,e[4].value,e[5].value,0,1)},matrix3d:function(e){uj.apply(Prt,[ja].concat(ot(e.map(function(r){return r.value}))))}},Ost=ji(1,1,1),Ist=Nr(),soe={translate:function(e,r){At.sceneGraphService.setLocalScale(e,Ost,!1),At.sceneGraphService.setLocalEulerAngles(e,Ist,void 0,void 0,!1),At.sceneGraphService.setLocalPosition(e,[r[0].value,r[1].value,0],!1),At.sceneGraphService.dirtifyLocal(e,e.transformable)}};function aEe(n,e){if(n.length){if(n.length===1&&soe[n[0].t]){soe[n[0].t](e,n[0].d);return}for(var r=Hm(Pst),i=0;i<n.length;i++){var a=n[i],o=a.t,s=a.d,l=Nst[o];l&&(l(s),h2e(r,r,ja))}e.setLocalTransform(r)}else e.resetLocalTransform();return e.getLocalTransform()}var Dst=function(){function n(){st(this,n),this.parser=Iot,this.mixer=Vot}return lt(n,[{key:"calculator",value:function(r,i,a,o){return a instanceof ed?[]:a}},{key:"postProcessor",value:function(r){aEe(r.parsedStyle.transform,r)}}])}(),Lst=function(){function n(){st(this,n)}return lt(n,[{key:"postProcessor",value:function(r){var i=r.parsedStyle.transformOrigin;i[0].unit===Yt.kPixels&&i[1].unit===Yt.kPixels?r.setOrigin(i[0].value,i[1].value):r.getGeometryBounds()}}])}(),kst=function(){function n(){st(this,n)}return lt(n,[{key:"calculator",value:function(r,i,a,o){return a.value}},{key:"postProcessor",value:function(r){if(r.parentNode){var i=r.parentNode,a=i.renderable,o=i.sortable;a&&(a.dirty=!0),o&&(o.dirty=!0,o.dirtyReason=JN.Z_INDEX_CHANGED)}}}])}(),Fst=function(){function n(){st(this,n)}return lt(n,[{key:"update",value:function(r,i){var a=r.cx,o=a===void 0?0:a,s=r.cy,l=s===void 0?0:s,c=r.r,u=c===void 0?0:c;return{cx:o,cy:l,hwidth:u,hheight:u}}}])}(),$st=function(){function n(){st(this,n)}return lt(n,[{key:"update",value:function(r,i){var a=r.cx,o=a===void 0?0:a,s=r.cy,l=s===void 0?0:s,c=r.rx,u=c===void 0?0:c,d=r.ry,f=d===void 0?0:d;return{cx:o,cy:l,hwidth:u,hheight:f}}}])}(),Bst=function(){function n(){st(this,n)}return lt(n,[{key:"update",value:function(r){var i=r.x1,a=r.y1,o=r.x2,s=r.y2,l=Math.min(i,o),c=Math.max(i,o),u=Math.min(a,s),d=Math.max(a,s),f=c-l,h=d-u,p=f/2,g=h/2;return{cx:l+p,cy:u+g,hwidth:p,hheight:g}}}])}(),zst=function(){function n(){st(this,n)}return lt(n,[{key:"update",value:function(r){var i=r.d,a=i.rect,o=a.x,s=a.y,l=a.width,c=a.height,u=l/2,d=c/2;return{cx:o+u,cy:s+d,hwidth:u,hheight:d}}}])}(),Ust=function(){function n(){st(this,n)}return lt(n,[{key:"update",value:function(r){if(r.points&&Jc(r.points.points)){var i=r.points.points,a=Math.min.apply(Math,ot(i.map(function(h){return h[0]}))),o=Math.max.apply(Math,ot(i.map(function(h){return h[0]}))),s=Math.min.apply(Math,ot(i.map(function(h){return h[1]}))),l=Math.max.apply(Math,ot(i.map(function(h){return h[1]}))),c=o-a,u=l-s,d=c/2,f=u/2;return{cx:a+d,cy:s+f,hwidth:d,hheight:f}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),Vst=function(){function n(){st(this,n)}return lt(n,[{key:"update",value:function(r,i){var a=r.x,o=a===void 0?0:a,s=r.y,l=s===void 0?0:s,c=r.src,u=r.width,d=u===void 0?0:u,f=r.height,h=f===void 0?0:f,p=d,g=h;return c&&!Kr(c)&&(p||(p=c.width,r.width=p),g||(g=c.height,r.height=g)),{cx:o+p/2,cy:l+g/2,hwidth:p/2,hheight:g/2}}}])}(),Gst=function(){function n(e){st(this,n),this.globalRuntime=e}return lt(n,[{key:"isReadyToMeasure",value:function(r,i){var a=r.text;return a}},{key:"update",value:function(r,i){var a,o=r.text,s=r.textAlign,l=s===void 0?"start":s,c=r.lineWidth,u=c===void 0?1:c,d=r.textBaseline,f=d===void 0?"alphabetic":d,h=r.dx,p=h===void 0?0:h,g=r.dy,m=g===void 0?0:g,v=r.x,y=v===void 0?0:v,b=r.y,x=b===void 0?0:b;if(!this.isReadyToMeasure(r,i))return r.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var _=(i==null||(a=i.ownerDocument)===null||a===void 0||(a=a.defaultView)===null||a===void 0?void 0:a.getConfig())||{},S=_.offscreenCanvas,M=this.globalRuntime.textService.measureText(o,r,S);r.metrics=M;var E=M.width,T=M.height,P=E/2,A=T/2,N=y+P;l==="center"||l==="middle"?N+=u/2-P:(l==="right"||l==="end")&&(N+=u-P*2);var O=x-A;return f==="middle"?O+=A:f==="top"||f==="hanging"?O+=A*2:f==="alphabetic"||(f==="bottom"||f==="ideographic")&&(O+=0),p&&(N+=p),m&&(O+=m),{cx:N,cy:O,hwidth:P,hheight:A}}}])}(),jst=function(){function n(){st(this,n)}return lt(n,[{key:"update",value:function(r,i){return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),Hst=function(){function n(){st(this,n)}return lt(n,[{key:"update",value:function(r,i){var a=r.x,o=a===void 0?0:a,s=r.y,l=s===void 0?0:s,c=r.width,u=c===void 0?0:c,d=r.height,f=d===void 0?0:d;return{cx:o+u/2,cy:l+f/2,hwidth:u/2,hheight:f/2}}}])}(),Y4=function(){function n(e){st(this,n),this.eventPhase=n.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new hs,this.page=new hs,this.canvas=new hs,this.viewport=new hs,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}return lt(n,[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"composedPath",value:function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"propagationPath",get:function(){return this.composedPath()}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw new Error(_i)}}])}(),oEe=function(n){function e(){var r;st(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=dr(this,e,[].concat(a)),r.client=new hs,r.movement=new hs,r.offset=new hs,r.global=new hs,r.screen=new hs,r}return $n(e,n),lt(e,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getModifierState",value:function(i){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(i)}},{key:"initMouseEvent",value:function(){throw new Error(_i)}}])}(Y4),aO=function(n){function e(){var r;st(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=dr(this,e,[].concat(a)),r.width=0,r.height=0,r.isPrimary=!1,r}return $n(e,n),lt(e,[{key:"getCoalescedEvents",value:function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this)}}])}(oEe),Dj=function(n){function e(){return st(this,e),dr(this,e,arguments)}return $n(e,n),lt(e,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this)}}])}(oEe),so=function(n){function e(r,i){var a;return st(this,e),a=dr(this,e,[null]),a.type=r,a.detail=i,Object.assign(a,i),a}return $n(e,n),lt(e)}(Y4),loe=new WeakMap,sEe=function(){function n(){st(this,n),this.emitter=new YSe}return lt(n,[{key:"on",value:function(r,i,a){return this.addEventListener(r,i,a),this}},{key:"addEventListener",value:function(r,i,a){var o=!1,s=!1;if(XE(a))o=a;else if(a){var l=a.capture;o=l===void 0?!1:l;var c=a.once;s=c===void 0?!1:c}o&&(r+="capture"),i=cn(i)?i:i.handleEvent;var u=cn(i)?void 0:i;return s?this.emitter.once(r,i,u):this.emitter.on(r,i,u),this}},{key:"off",value:function(r,i,a){return r?this.removeEventListener(r,i,a):this.removeAllEventListeners(),this}},{key:"removeAllEventListeners",value:function(){var r;(r=this.emitter)===null||r===void 0||r.removeAllListeners()}},{key:"removeEventListener",value:function(r,i,a){var o;if(!this.emitter)return this;var s=XE(a)?a:a==null?void 0:a.capture;s&&(r+="capture"),i=cn(i)?i:(o=i)===null||o===void 0?void 0:o.handleEvent;var l=cn(i)?void 0:i;return this.emitter.off(r,i,l),this}},{key:"emit",value:function(r,i){this.dispatchEvent(new so(r,i))}},{key:"dispatchEvent",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=loe.get(this);if(!a){var o;this.document?a=this:this.defaultView?a=this.defaultView:a=(o=this.ownerDocument)===null||o===void 0?void 0:o.defaultView,a&&loe.set(this,a)}if(a){if(r.manager=a.getEventService(),!r.manager)return!1;r.defaultPrevented=!1,r.path?r.path.length=0:r.page=[],i||(r.target=this),r.manager.dispatchEvent(r,r.type,i)}else this.emitter.emit(r.type,r);return!r.defaultPrevented}}])}(),da=function(n){function e(){var r;st(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=dr(this,e,[].concat(a)),r.shadow=!1,r.ownerDocument=null,r.isConnected=!1,r.baseURI="",r.childNodes=[],r.nodeType=0,r.nodeName="",r.nodeValue=null,r.parentNode=null,r}return $n(e,n),lt(e,[{key:"textContent",get:function(){var i="";this.nodeName===at.TEXT&&(i+=this.style.text);var a=c0(this.childNodes),o;try{for(a.s();!(o=a.n()).done;){var s=o.value;s.nodeName===at.TEXT?i+=s.nodeValue:i+=s.textContent}}catch(l){a.e(l)}finally{a.f()}return i},set:function(i){var a=this;this.childNodes.slice().forEach(function(o){a.removeChild(o)}),this.nodeName===at.TEXT&&(this.style.text="".concat(i))}},{key:"getRootNode",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(i):i.composed&&this.host?this.host.getRootNode(i):this}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0}},{key:"isDefaultNamespace",value:function(i){throw new Error(_i)}},{key:"lookupNamespaceURI",value:function(i){throw new Error(_i)}},{key:"lookupPrefix",value:function(i){throw new Error(_i)}},{key:"normalize",value:function(){throw new Error(_i)}},{key:"isEqualNode",value:function(i){return this===i}},{key:"isSameNode",value:function(i){return this.isEqualNode(i)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:"compareDocumentPosition",value:function(i){if(i===this)return 0;for(var a=i,o=this,s=[a],l=[o];(c=a.parentNode)!==null&&c!==void 0?c:o.parentNode;){var c;a=a.parentNode?(s.push(a.parentNode),a.parentNode):a,o=o.parentNode?(l.push(o.parentNode),o.parentNode):o}if(a!==o)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var u=s.length>l.length?s:l,d=u===s?l:s;if(u[u.length-d.length]===d[0])return u===s?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var f=u.length-d.length,h=d.length-1;h>=0;h--){var p=d[h],g=u[f+h];if(g!==p){var m=p.parentNode.childNodes;return m.indexOf(p)<m.indexOf(g)?d===s?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:u===s?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING}},{key:"contain",value:function(i){return this.contains(i)}},{key:"contains",value:function(i){for(var a=i;a&&this!==a;)a=a.parentNode;return!!a}},{key:"getAncestor",value:function(i){for(var a=this;i>0&&a;)a=a.parentNode,i--;return a}},{key:"forEach",value:function(i){for(var a=[this];a.length>0;){var o=a.pop(),s=i(o);if(s===!1)break;for(var l=o.childNodes.length-1;l>=0;l--)a.push(o.childNodes[l])}}}],[{key:"isNode",value:function(i){return!!i.childNodes}}])}(sEe);da.DOCUMENT_POSITION_DISCONNECTED=1;da.DOCUMENT_POSITION_PRECEDING=2;da.DOCUMENT_POSITION_FOLLOWING=4;da.DOCUMENT_POSITION_CONTAINS=8;da.DOCUMENT_POSITION_CONTAINED_BY=16;da.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var Wst=2048,qst=function(){function n(e,r){var i=this;st(this,n),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=$i(),this.tmpVec3=Nr(),this.onPointerDown=function(a){var o=i.createPointerEvent(a);if(i.dispatchEvent(o,"pointerdown"),o.pointerType==="touch")i.dispatchEvent(o,"touchstart");else if(o.pointerType==="mouse"||o.pointerType==="pen"){var s=o.button===2;i.dispatchEvent(o,s?"rightdown":"mousedown")}var l=i.trackingData(a.pointerId);l.pressTargetsByButton[a.button]=o.composedPath(),i.freeEvent(o)},this.onPointerUp=function(a){var o=Ij.now(),s=i.createPointerEvent(a,void 0,void 0,i.context.config.alwaysTriggerPointerEventOnCanvas?i.rootTarget:void 0);if(i.dispatchEvent(s,"pointerup"),s.pointerType==="touch")i.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var l=s.button===2;i.dispatchEvent(s,l?"rightup":"mouseup")}var c=i.trackingData(a.pointerId),u=i.findMountedTarget(c.pressTargetsByButton[a.button]),d=u;if(u&&!s.composedPath().includes(u)){for(var f=u;f&&!s.composedPath().includes(f);){if(s.currentTarget=f,i.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")i.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){var h=s.button===2;i.notifyTarget(s,h?"rightupoutside":"mouseupoutside")}da.isNode(f)&&(f=f.parentNode)}delete c.pressTargetsByButton[a.button],d=f}if(d){var p,g=i.clonePointerEvent(s,"click");g.target=d,g.path=[],c.clicksByButton[a.button]||(c.clicksByButton[a.button]={clickCount:0,target:g.target,timeStamp:o});var m=i.context.renderingContext.root.ownerDocument.defaultView,v=c.clicksByButton[a.button];v.target===g.target&&o-v.timeStamp<m.getConfig().dblClickSpeed?++v.clickCount:v.clickCount=1,v.target=g.target,v.timeStamp=o,g.detail=v.clickCount,(p=s.detail)!==null&&p!==void 0&&p.preventClick||(!i.context.config.useNativeClickEvent&&(g.pointerType==="mouse"||g.pointerType==="touch")&&i.dispatchEvent(g,"click"),i.dispatchEvent(g,"pointertap")),i.freeEvent(g)}i.freeEvent(s)},this.onPointerMove=function(a){var o=i.createPointerEvent(a,void 0,void 0,i.context.config.alwaysTriggerPointerEventOnCanvas?i.rootTarget:void 0),s=o.pointerType==="mouse"||o.pointerType==="pen",l=i.trackingData(a.pointerId),c=i.findMountedTarget(l.overTargets);if(l.overTargets&&c!==o.target){var u=a.type==="mousemove"?"mouseout":"pointerout",d=i.createPointerEvent(a,u,c||void 0);if(i.dispatchEvent(d,"pointerout"),s&&i.dispatchEvent(d,"mouseout"),!o.composedPath().includes(c)){var f=i.createPointerEvent(a,"pointerleave",c||void 0);for(f.eventPhase=f.AT_TARGET;f.target&&!o.composedPath().includes(f.target);)f.currentTarget=f.target,i.notifyTarget(f),s&&i.notifyTarget(f,"mouseleave"),da.isNode(f.target)&&(f.target=f.target.parentNode);i.freeEvent(f)}i.freeEvent(d)}if(c!==o.target){var h=a.type==="mousemove"?"mouseover":"pointerover",p=i.clonePointerEvent(o,h);i.dispatchEvent(p,"pointerover"),s&&i.dispatchEvent(p,"mouseover");for(var g=c&&da.isNode(c)&&c.parentNode;g&&g!==(da.isNode(i.rootTarget)&&i.rootTarget.parentNode)&&g!==o.target;)g=g.parentNode;var m=!g||g===(da.isNode(i.rootTarget)&&i.rootTarget.parentNode);if(m){var v=i.clonePointerEvent(o,"pointerenter");for(v.eventPhase=v.AT_TARGET;v.target&&v.target!==c&&v.target!==(da.isNode(i.rootTarget)&&i.rootTarget.parentNode);)v.currentTarget=v.target,i.notifyTarget(v),s&&i.notifyTarget(v,"mouseenter"),da.isNode(v.target)&&(v.target=v.target.parentNode);i.freeEvent(v)}i.freeEvent(p)}i.dispatchEvent(o,"pointermove"),o.pointerType==="touch"&&i.dispatchEvent(o,"touchmove"),s&&(i.dispatchEvent(o,"mousemove"),i.cursor=i.getCursor(o.target)),l.overTargets=o.composedPath(),i.freeEvent(o)},this.onPointerOut=function(a){var o=i.trackingData(a.pointerId);if(o.overTargets){var s=a.pointerType==="mouse"||a.pointerType==="pen",l=i.findMountedTarget(o.overTargets),c=i.createPointerEvent(a,"pointerout",l||void 0);i.dispatchEvent(c),s&&i.dispatchEvent(c,"mouseout");var u=i.createPointerEvent(a,"pointerleave",l||void 0);for(u.eventPhase=u.AT_TARGET;u.target&&u.target!==(da.isNode(i.rootTarget)&&i.rootTarget.parentNode);)u.currentTarget=u.target,i.notifyTarget(u),s&&i.notifyTarget(u,"mouseleave"),da.isNode(u.target)&&(u.target=u.target.parentNode);o.overTargets=null,i.freeEvent(c),i.freeEvent(u)}i.cursor=null},this.onPointerOver=function(a){var o=i.trackingData(a.pointerId),s=i.createPointerEvent(a),l=s.pointerType==="mouse"||s.pointerType==="pen";i.dispatchEvent(s,"pointerover"),l&&i.dispatchEvent(s,"mouseover"),s.pointerType==="mouse"&&(i.cursor=i.getCursor(s.target));var c=i.clonePointerEvent(s,"pointerenter");for(c.eventPhase=c.AT_TARGET;c.target&&c.target!==(da.isNode(i.rootTarget)&&i.rootTarget.parentNode);)c.currentTarget=c.target,i.notifyTarget(c),l&&i.notifyTarget(c,"mouseenter"),da.isNode(c.target)&&(c.target=c.target.parentNode);o.overTargets=s.composedPath(),i.freeEvent(s),i.freeEvent(c)},this.onPointerUpOutside=function(a){var o=i.trackingData(a.pointerId),s=i.findMountedTarget(o.pressTargetsByButton[a.button]),l=i.createPointerEvent(a);if(s){for(var c=s;c;)l.currentTarget=c,i.notifyTarget(l,"pointerupoutside"),l.pointerType==="touch"||(l.pointerType==="mouse"||l.pointerType==="pen")&&i.notifyTarget(l,l.button===2?"rightupoutside":"mouseupoutside"),da.isNode(c)&&(c=c.parentNode);delete o.pressTargetsByButton[a.button]}i.freeEvent(l)},this.onWheel=function(a){var o=i.createWheelEvent(a);i.dispatchEvent(o),i.freeEvent(o)},this.onClick=function(a){if(i.context.config.useNativeClickEvent){var o=i.createPointerEvent(a);i.dispatchEvent(o),i.freeEvent(o)}},this.onPointerCancel=function(a){var o=i.createPointerEvent(a,void 0,void 0,i.context.config.alwaysTriggerPointerEventOnCanvas?i.rootTarget:void 0);i.dispatchEvent(o),i.freeEvent(o)},this.globalRuntime=e,this.context=r}return lt(n,[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:"getScale",value:function(){var r=this.context.contextService.getBoundingClientRect(),i=1,a=1,o=this.context.contextService.getDomElement();if(o&&r){var s=o.offsetWidth,l=o.offsetHeight;s&&l&&(i=r.width/s,a=r.height/l)}return{scaleX:i,scaleY:a,bbox:r}}},{key:"client2Viewport",value:function(r){var i=this.getScale(),a=i.scaleX,o=i.scaleY,s=i.bbox;return new hs((r.x-((s==null?void 0:s.left)||0))/a,(r.y-((s==null?void 0:s.top)||0))/o)}},{key:"viewport2Client",value:function(r){var i=this.getScale(),a=i.scaleX,o=i.scaleY,s=i.bbox;return new hs((r.x+((s==null?void 0:s.left)||0))*a,(r.y+((s==null?void 0:s.top)||0))*o)}},{key:"viewport2Canvas",value:function(r){var i=r.x,a=r.y,o=this.rootTarget.defaultView,s=o.getCamera(),l=this.context.config,c=l.width,u=l.height,d=s.getPerspectiveInverse(),f=s.getWorldTransform(),h=Vs(this.tmpMatrix,f,d),p=zs(this.tmpVec3,i/c*2-1,(1-a/u)*2-1,0);return Gs(p,p,h),new hs(p[0],p[1])}},{key:"canvas2Viewport",value:function(r){var i=this.rootTarget.defaultView,a=i.getCamera(),o=a.getPerspective(),s=a.getViewTransform(),l=Vs(this.tmpMatrix,o,s),c=zs(this.tmpVec3,r.x,r.y,0);Gs(this.tmpVec3,this.tmpVec3,l);var u=this.context.config,d=u.width,f=u.height;return new hs((c[0]+1)/2*d,(1-(c[1]+1)/2)*f)}},{key:"setPickHandler",value:function(r){this.pickHandler=r}},{key:"addEventMapping",value:function(r,i){this.mappingTable[r]||(this.mappingTable[r]=[]),this.mappingTable[r].push({fn:i,priority:0}),this.mappingTable[r].sort(function(a,o){return a.priority-o.priority})}},{key:"mapEvent",value:function(r){if(this.rootTarget){var i=this.mappingTable[r.type];if(i)for(var a=0,o=i.length;a<o;a++)i[a].fn(r);else console.warn("[EventService]: Event mapping not defined for ".concat(r.type))}}},{key:"dispatchEvent",value:function(r,i,a){if(!a)r.propagationStopped=!1,r.propagationImmediatelyStopped=!1,this.propagate(r,i);else{r.eventPhase=r.AT_TARGET;var o=this.rootTarget.defaultView||null;r.currentTarget=o,this.notifyListeners(r,i)}}},{key:"propagate",value:function(r,i){if(r.target){var a=r.composedPath();r.eventPhase=r.CAPTURING_PHASE;for(var o=a.length-1;o>=1;o--)if(r.currentTarget=a[o],this.notifyTarget(r,i),r.propagationStopped||r.propagationImmediatelyStopped)return;if(r.eventPhase=r.AT_TARGET,r.currentTarget=r.target,this.notifyTarget(r,i),!(r.propagationStopped||r.propagationImmediatelyStopped)){var s=a.indexOf(r.currentTarget);r.eventPhase=r.BUBBLING_PHASE;for(var l=s+1;l<a.length;l++)if(r.currentTarget=a[l],this.notifyTarget(r,i),r.propagationStopped||r.propagationImmediatelyStopped)return}}}},{key:"propagationPath",value:function(r){var i=[r],a=this.rootTarget.defaultView||null;if(a&&a===r)return i.unshift(a.document),i;for(var o=0;o<Wst&&r!==this.rootTarget;o++)da.isNode(r)&&r.parentNode&&(i.push(r.parentNode),r=r.parentNode);return a&&i.push(a),i}},{key:"hitTest",value:function(r){var i=r.viewportX,a=r.viewportY,o=this.context.config,s=o.width,l=o.height,c=o.disableHitTesting;return i<0||a<0||i>s||a>l?null:!c&&this.pickHandler(r)||this.rootTarget||null}},{key:"isNativeEventFromCanvas",value:function(r,i){var a,o=i==null?void 0:i.target;if((a=o)!==null&&a!==void 0&&a.shadowRoot&&(o=i.composedPath()[0]),o){if(o===r)return!0;if(r&&r.contains)return r.contains(o)}return i!=null&&i.composedPath?i.composedPath().indexOf(r)>-1:!1}},{key:"getExistedHTML",value:function(r){if(r.nativeEvent.composedPath)for(var i=0,a=r.nativeEvent.composedPath();i<a.length;i++){var o=a[i],s=this.nativeHTMLMap.get(o);if(s)return s}return null}},{key:"pickTarget",value:function(r){return this.hitTest({clientX:r.clientX,clientY:r.clientY,viewportX:r.viewportX,viewportY:r.viewportY,x:r.canvasX,y:r.canvasY})}},{key:"createPointerEvent",value:function(r,i,a,o){var s=this.allocateEvent(aO);this.copyPointerData(r,s),this.copyMouseData(r,s),this.copyData(r,s),s.nativeEvent=r.nativeEvent,s.originalEvent=r;var l=this.getExistedHTML(s),c=this.context.contextService.getDomElement();return s.target=a??(l||this.isNativeEventFromCanvas(c,s.nativeEvent)&&this.pickTarget(s)||o),typeof i=="string"&&(s.type=i),s}},{key:"createWheelEvent",value:function(r){var i=this.allocateEvent(Dj);this.copyWheelData(r,i),this.copyMouseData(r,i),this.copyData(r,i),i.nativeEvent=r.nativeEvent,i.originalEvent=r;var a=this.getExistedHTML(i),o=this.context.contextService.getDomElement();return i.target=a||this.isNativeEventFromCanvas(o,i.nativeEvent)&&this.pickTarget(i),i}},{key:"trackingData",value:function(r){return this.mappingState.trackingData[r]||(this.mappingState.trackingData[r]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[r]}},{key:"cloneWheelEvent",value:function(r){var i=this.allocateEvent(Dj);return i.nativeEvent=r.nativeEvent,i.originalEvent=r.originalEvent,this.copyWheelData(r,i),this.copyMouseData(r,i),this.copyData(r,i),i.target=r.target,i.path=r.composedPath().slice(),i.type=r.type,i}},{key:"clonePointerEvent",value:function(r,i){var a=this.allocateEvent(aO);return a.nativeEvent=r.nativeEvent,a.originalEvent=r.originalEvent,this.copyPointerData(r,a),this.copyMouseData(r,a),this.copyData(r,a),a.target=r.target,a.path=r.composedPath().slice(),a.type=i??a.type,a}},{key:"copyPointerData",value:function(r,i){i.pointerId=r.pointerId,i.width=r.width,i.height=r.height,i.isPrimary=r.isPrimary,i.pointerType=r.pointerType,i.pressure=r.pressure,i.tangentialPressure=r.tangentialPressure,i.tiltX=r.tiltX,i.tiltY=r.tiltY,i.twist=r.twist}},{key:"copyMouseData",value:function(r,i){i.altKey=r.altKey,i.button=r.button,i.buttons=r.buttons,i.ctrlKey=r.ctrlKey,i.metaKey=r.metaKey,i.shiftKey=r.shiftKey,i.client.copyFrom(r.client),i.movement.copyFrom(r.movement),i.canvas.copyFrom(r.canvas),i.screen.copyFrom(r.screen),i.global.copyFrom(r.global),i.offset.copyFrom(r.offset)}},{key:"copyWheelData",value:function(r,i){i.deltaMode=r.deltaMode,i.deltaX=r.deltaX,i.deltaY=r.deltaY,i.deltaZ=r.deltaZ}},{key:"copyData",value:function(r,i){i.isTrusted=r.isTrusted,i.timeStamp=Ij.now(),i.type=r.type,i.detail=r.detail,i.view=r.view,i.page.copyFrom(r.page),i.viewport.copyFrom(r.viewport)}},{key:"allocateEvent",value:function(r){this.eventPool.has(r)||this.eventPool.set(r,[]);var i=this.eventPool.get(r).pop()||new r(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=[],i.target=null,i}},{key:"freeEvent",value:function(r){if(r.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var i=r.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),this.eventPool.get(i).push(r)}},{key:"notifyTarget",value:function(r,i){i=i??r.type;var a=r.eventPhase===r.CAPTURING_PHASE||r.eventPhase===r.AT_TARGET?"".concat(i,"capture"):i;this.notifyListeners(r,a),r.eventPhase===r.AT_TARGET&&this.notifyListeners(r,i)}},{key:"notifyListeners",value:function(r,i){var a=r.currentTarget.emitter,o=a._events[i];if(o)if("fn"in o)o.once&&a.removeListener(i,o.fn,void 0,!0),o.fn.call(r.currentTarget||o.context,r);else for(var s=0;s<o.length&&!r.propagationImmediatelyStopped;s++)o[s].once&&a.removeListener(i,o[s].fn,void 0,!0),o[s].fn.call(r.currentTarget||o[s].context,r)}},{key:"findMountedTarget",value:function(r){if(!r)return null;for(var i=r[r.length-1],a=r.length-2;a>=0;a--){var o=r[a];if(o===this.rootTarget||da.isNode(o)&&o.parentNode===i)i=r[a];else break}return i}},{key:"getCursor",value:function(r){for(var i=r;i;){var a=cst(i)&&i.getAttribute("cursor");if(a)return a;i=da.isNode(i)&&i.parentNode}}}])}(),pX=function(){function n(){st(this,n)}return lt(n,[{key:"getOrCreateCanvas",value:function(r,i){if(this.canvas)return this.canvas;if(r||At.offscreenCanvas)this.canvas=r||At.offscreenCanvas,this.context=this.canvas.getContext("2d",se({willReadFrequently:!0},i));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",se({willReadFrequently:!0},i)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch{this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",se({willReadFrequently:!0},i))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:"getOrCreateContext",value:function(r,i){return this.context?this.context:(this.getOrCreateCanvas(r,i),this.context)}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0)}catch{}try{return document.createElement("canvas")}catch{}return null}}])}(),hx=function(n){return n[n.CAMERA_CHANGED=0]="CAMERA_CHANGED",n[n.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",n[n.NONE=2]="NONE",n}({}),Yst=function(){function n(e,r){st(this,n),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new nl,initAsync:new Cst,dirtycheck:new yF,cull:new yF,beginFrame:new nl,beforeRender:new nl,render:new nl,afterRender:new nl,endFrame:new nl,destroy:new nl,pick:new Mst,pickSync:new yF,pointerDown:new nl,pointerUp:new nl,pointerMove:new nl,pointerOut:new nl,pointerOver:new nl,pointerWheel:new nl,pointerCancel:new nl,click:new nl},this.globalRuntime=e,this.context=r}return lt(n,[{key:"init",value:function(r){var i=this,a=se(se({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(o){o.apply(a,i.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,r()):this.hooks.initAsync.promise().then(function(){i.inited=!0,r()}).catch(function(o){})}},{key:"getStats",value:function(){return this.stats}},{key:"disableDirtyRectangleRendering",value:function(){var r=this.context.config.renderer,i=r.getConfig(),a=i.enableDirtyRectangleRendering;return!a||this.context.renderingContext.renderReasons.has(hx.CAMERA_CHANGED)}},{key:"render",value:function(r,i,a){var o=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var s=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(s.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),s.renderReasons.size&&this.inited){s.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var l=s.renderReasons.size===1&&s.renderReasons.has(hx.CAMERA_CHANGED),c=!r.disableRenderHooks||!(r.disableRenderHooks&&l);c&&this.renderDisplayObject(s.root,r,s),this.hooks.beginFrame.call(i),c&&s.renderListCurrentFrame.forEach(function(u){o.hooks.beforeRender.call(u),o.hooks.render.call(u),o.hooks.afterRender.call(u)}),this.hooks.endFrame.call(i),s.renderListCurrentFrame=[],s.renderReasons.clear(),a()}}},{key:"renderDisplayObject",value:function(r,i,a){var o=this,s=i.renderer.getConfig(),l=s.enableDirtyCheck,c=s.enableCulling;function u(m){var v=m.renderable,y=m.sortable,b=l?v.dirty||a.dirtyRectangleRenderingDisabled?m:null:m;if(b){var x=c?o.hooks.cull.call(b,o.context.camera):b;x&&(o.stats.rendered+=1,a.renderListCurrentFrame.push(x))}v.dirty=!1,y.renderOrder=o.zIndexCounter,o.zIndexCounter+=1,o.stats.total+=1,y.dirty&&(o.sort(m,y),y.dirty=!1,y.dirtyChildren=[],y.dirtyReason=void 0)}for(var d=[r];d.length>0;){var f,h=d.pop();u(h);for(var p=((f=h.sortable)===null||f===void 0||(f=f.sorted)===null||f===void 0?void 0:f.length)>0?h.sortable.sorted:h.childNodes,g=p.length-1;g>=0;g--)d.push(p[g])}}},{key:"sort",value:function(r,i){var a,o;(i==null||(a=i.sorted)===null||a===void 0?void 0:a.length)>0&&i.dirtyReason!==JN.Z_INDEX_CHANGED?i.dirtyChildren.forEach(function(s){var l=i.sorted.indexOf(s);l>-1&&i.sorted.splice(l,1);var c=r.childNodes.indexOf(s);if(c>-1)if(i.sorted.length===0)i.sorted.push(s);else{var u=ust(i.sorted,s);i.sorted.splice(u,0,s)}}):i.sorted=r.childNodes.slice().sort(J2e),((o=i.sorted)===null||o===void 0?void 0:o.length)>0&&r.childNodes.filter(function(s){return s.parsedStyle.zIndex}).length===0&&(i.sorted=[])}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()}},{key:"dirtify",value:function(){this.context.renderingContext.renderReasons.add(hx.DISPLAY_OBJECT_CHANGED)}}])}(),Xst=/\[\s*(.*)=(.*)\s*\]/,Kst=function(){function n(){st(this,n)}return lt(n,[{key:"selectOne",value:function(r,i){var a=this;if(r.startsWith("."))return i.find(function(c){return((c==null?void 0:c.classList)||[]).indexOf(a.getIdOrClassname(r))>-1});if(r.startsWith("#"))return i.find(function(c){return c.id===a.getIdOrClassname(r)});if(r.startsWith("[")){var o=this.getAttribute(r),s=o.name,l=o.value;return s?i.find(function(c){return i!==c&&(s==="name"?c.name===l:a.attributeToString(c,s)===l)}):null}return i.find(function(c){return i!==c&&c.nodeName===r})}},{key:"selectAll",value:function(r,i){var a=this;if(r.startsWith("."))return i.findAll(function(c){return i!==c&&((c==null?void 0:c.classList)||[]).indexOf(a.getIdOrClassname(r))>-1});if(r.startsWith("#"))return i.findAll(function(c){return i!==c&&c.id===a.getIdOrClassname(r)});if(r.startsWith("[")){var o=this.getAttribute(r),s=o.name,l=o.value;return s?i.findAll(function(c){return i!==c&&(s==="name"?c.name===l:a.attributeToString(c,s)===l)}):[]}return i.findAll(function(c){return i!==c&&c.nodeName===r})}},{key:"is",value:function(r,i){if(r.startsWith("."))return i.className===this.getIdOrClassname(r);if(r.startsWith("#"))return i.id===this.getIdOrClassname(r);if(r.startsWith("[")){var a=this.getAttribute(r),o=a.name,s=a.value;return o==="name"?i.name===s:this.attributeToString(i,o)===s}return i.nodeName===r}},{key:"getIdOrClassname",value:function(r){return r.substring(1)}},{key:"getAttribute",value:function(r){var i=r.match(Xst),a="",o="";return i&&i.length>2&&(a=i[1].replace(/"/g,""),o=i[2].replace(/"/g,"")),{name:a,value:o}}},{key:"attributeToString",value:function(r,i){if(!r.getAttribute)return"";var a=r.getAttribute(i);return Nn(a)?"":a.toString?a.toString():""}}])}(),wr=function(n){return n.ATTR_MODIFIED="DOMAttrModified",n.INSERTED="DOMNodeInserted",n.MOUNTED="DOMNodeInsertedIntoDocument",n.REMOVED="removed",n.UNMOUNTED="DOMNodeRemovedFromDocument",n.REPARENT="reparent",n.DESTROY="destroy",n.BOUNDS_CHANGED="bounds-changed",n.CULLED="culled",n}({}),th=function(n){function e(r,i,a,o,s,l,c,u){var d;return st(this,e),d=dr(this,e,[null]),d.relatedNode=i,d.prevValue=a,d.newValue=o,d.attrName=s,d.attrChange=l,d.prevParsedValue=c,d.newParsedValue=u,d.type=r,d}return $n(e,n),lt(e)}(Y4);th.ADDITION=2;th.MODIFICATION=1;th.REMOVAL=3;function coe(n){var e=n.renderable;e&&(e.renderBoundsDirty=!0,e.boundsDirty=!0)}var Zst=new th(wr.REPARENT,null,"","","",0,"",""),Qst=iX(),G3=Nr(),Jst=ji(1,1,1),elt=$i(),tlt=iX(),gg=Nr(),D1=$i(),mg=Ao(),nlt=Nr(),rlt=Ao(),ilt=Nr(),uS=Nr(),Fv=Nr(),j3=$i(),uoe=Ao(),doe=Ao(),H3=Ao(),xF={affectChildren:!0},alt=function(){function n(e){st(this,n),this.pendingEvents=new Map,this.boundsChangedEvent=new so(wr.BOUNDS_CHANGED),this.displayObjectDependencyMap=new WeakMap,this.runtime=e}return lt(n,[{key:"matches",value:function(r,i){return this.runtime.sceneGraphSelector.is(r,i)}},{key:"querySelector",value:function(r,i){return this.runtime.sceneGraphSelector.selectOne(r,i)}},{key:"querySelectorAll",value:function(r,i){return this.runtime.sceneGraphSelector.selectAll(r,i)}},{key:"attach",value:function(r,i,a){var o,s=!1;r.parentNode&&(s=r.parentNode!==i,this.detach(r));var l=r.nodeName===at.FRAGMENT,c=iO(i);r.parentNode=i;var u=l?r.childNodes:[r];on(a)?u.forEach(function(p){i.childNodes.splice(a,0,p),p.parentNode=i}):u.forEach(function(p){i.childNodes.push(p),p.parentNode=i});var d=i,f=d.sortable;if((f!=null&&(o=f.sorted)!==null&&o!==void 0&&o.length||f.dirty||r.parsedStyle.zIndex)&&(f.dirtyChildren.indexOf(r)===-1&&f.dirtyChildren.push(r),f.dirty=!0,f.dirtyReason=JN.ADDED),!c){if(l)this.dirtifyFragment(r);else{var h=r.transformable;h&&this.dirtifyWorld(r,h)}s&&r.dispatchEvent(Zst)}}},{key:"detach",value:function(r){var i,a;if(r.parentNode){var o=r.transformable,s=r.parentNode,l=s.sortable;(l!=null&&(i=l.sorted)!==null&&i!==void 0&&i.length||(a=r.style)!==null&&a!==void 0&&a.zIndex)&&(l.dirtyChildren.indexOf(r)===-1&&l.dirtyChildren.push(r),l.dirty=!0,l.dirtyReason=JN.REMOVED);var c=r.parentNode.childNodes.indexOf(r);c>-1&&r.parentNode.childNodes.splice(c,1),o&&this.dirtifyWorld(r,o),r.parentNode=null}}},{key:"getOrigin",value:function(r){return r.getGeometryBounds(),r.transformable.origin}},{key:"setOrigin",value:function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof i=="number"&&(i=[i,a,o]);var s=r.transformable;if(!(i[0]===s.origin[0]&&i[1]===s.origin[1]&&i[2]===s.origin[2])){var l=s.origin;l[0]=i[0],l[1]=i[1],l[2]=i[2]||0,this.dirtifyLocal(r,s)}}},{key:"rotate",value:function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof i=="number"&&(i=ji(i,a,o));var s=r.transformable;if(r.parentNode===null||!r.parentNode.transformable)this.rotateLocal(r,i);else{var l=mg;D3(l,i[0],i[1],i[2]);var c=this.getRotation(r),u=this.getRotation(r.parentNode);L3(H3,u),rF(H3,H3),Em(l,H3,l),Em(s.localRotation,l,c),qN(s.localRotation,s.localRotation),this.dirtifyLocal(r,s)}}},{key:"rotateLocal",value:function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof i=="number"&&(i=ji(i,a,o));var s=r.transformable;D3(doe,i[0],i[1],i[2]),Mae(s.localRotation,s.localRotation,doe),this.dirtifyLocal(r,s)}},{key:"setEulerAngles",value:function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof i=="number"&&(i=ji(i,a,o));var s=r.transformable;if(r.parentNode===null||!r.parentNode.transformable)this.setLocalEulerAngles(r,i);else{D3(s.localRotation,i[0],i[1],i[2]);var l=this.getRotation(r.parentNode);L3(uoe,rF(mg,l)),Mae(s.localRotation,s.localRotation,uoe),this.dirtifyLocal(r,s)}}},{key:"setLocalEulerAngles",value:function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;typeof i=="number"&&(i=ji(i,a,o));var l=r.transformable;D3(l.localRotation,i[0],i[1],i[2]),s&&this.dirtifyLocal(r,l)}},{key:"translateLocal",value:function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof i=="number"&&(i=ji(i,a,o));var s=r.transformable;lS(i,G3)||(krt(i,i,s.localRotation),Sm(s.localPosition,s.localPosition,i),this.dirtifyLocal(r,s))}},{key:"setPosition",value:function(r,i){var a,o=r.transformable;if(Fv[0]=i[0],Fv[1]=i[1],Fv[2]=(a=i[2])!==null&&a!==void 0?a:0,!lS(this.getPosition(r),Fv)){if(Bf(o.position,Fv),r.parentNode===null||!r.parentNode.transformable)Bf(o.localPosition,Fv);else{var s=r.parentNode.transformable;Bx(j3,s.worldTransform),$f(j3,j3),Gs(o.localPosition,Fv,j3)}this.dirtifyLocal(r,o)}}},{key:"setLocalPosition",value:function(r,i){var a,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=r.transformable;uS[0]=i[0],uS[1]=i[1],uS[2]=(a=i[2])!==null&&a!==void 0?a:0,!lS(s.localPosition,uS)&&(Bf(s.localPosition,uS),o&&this.dirtifyLocal(r,s))}},{key:"scaleLocal",value:function(r,i){var a,o=r.transformable;Nrt(o.localScale,o.localScale,zs(gg,i[0],i[1],(a=i[2])!==null&&a!==void 0?a:1)),this.dirtifyLocal(r,o)}},{key:"setLocalScale",value:function(r,i){var a,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=r.transformable;zs(gg,i[0],i[1],(a=i[2])!==null&&a!==void 0?a:s.localScale[2]),!lS(gg,s.localScale)&&(Bf(s.localScale,gg),o&&this.dirtifyLocal(r,s))}},{key:"translate",value:function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof i=="number"&&(i=zs(gg,i,a,o)),!lS(i,G3)&&(Sm(gg,this.getPosition(r),i),this.setPosition(r,gg))}},{key:"setRotation",value:function(r,i,a,o,s){var l=r.transformable;if(typeof i=="number"&&(i=Vrt(i,a,o,s)),r.parentNode===null||!r.parentNode.transformable)this.setLocalRotation(r,i);else{var c=this.getRotation(r.parentNode);L3(mg,c),rF(mg,mg),Em(l.localRotation,mg,i),qN(l.localRotation,l.localRotation),this.dirtifyLocal(r,l)}}},{key:"setLocalRotation",value:function(r,i,a,o,s){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;typeof i=="number"&&(i=Cae(mg,i,a,o,s));var c=r.transformable;L3(c.localRotation,i),l&&this.dirtifyLocal(r,c)}},{key:"setLocalSkew",value:function(r,i,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;typeof i=="number"&&(i=jrt(tlt,i,a));var s=r.transformable;Grt(s.localSkew,i),o&&this.dirtifyLocal(r,s)}},{key:"dirtifyLocal",value:function(r,i){iO(r)||i.localDirtyFlag||(i.localDirtyFlag=!0,i.dirtyFlag||this.dirtifyWorld(r,i))}},{key:"dirtifyWorld",value:function(r,i){i.dirtyFlag||this.unfreezeParentToRoot(r),this.dirtifyWorldInternal(r,i),this.dirtifyToRoot(r,!0)}},{key:"dirtifyFragment",value:function(r){var i=r.transformable;i&&(i.frozen=!1,i.dirtyFlag=!0,i.localDirtyFlag=!0);var a=r.renderable;a&&(a.renderBoundsDirty=!0,a.boundsDirty=!0,a.dirty=!0);for(var o=r.childNodes.length,s=0;s<o;s++)this.dirtifyFragment(r.childNodes[s]);r.nodeName===at.FRAGMENT&&this.pendingEvents.set(r,!1)}},{key:"triggerPendingEvents",value:function(){var r=this,i=new Set,a=function(s,l){!s.isConnected||i.has(s)||s.nodeName===at.FRAGMENT||(r.boundsChangedEvent.detail=l,r.boundsChangedEvent.target=s,s.isMutationObserved?s.dispatchEvent(r.boundsChangedEvent):s.ownerDocument.defaultView.dispatchEvent(r.boundsChangedEvent,!0),i.add(s))};this.pendingEvents.forEach(function(o,s){s.nodeName!==at.FRAGMENT&&(xF.affectChildren=o,o?s.forEach(function(l){a(l,xF)}):a(s,xF))}),i.clear(),this.clearPendingEvents()}},{key:"clearPendingEvents",value:function(){this.pendingEvents.clear()}},{key:"dirtifyToRoot",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=r;for(a.renderable&&(a.renderable.dirty=!0);a;)coe(a),a=a.parentNode;i&&r.forEach(function(o){coe(o)}),this.informDependentDisplayObjects(r),this.pendingEvents.set(r,i)}},{key:"updateDisplayObjectDependency",value:function(r,i,a,o){if(i&&i!==a){var s=this.displayObjectDependencyMap.get(i);if(s&&s[r]){var l=s[r].indexOf(o);s[r].splice(l,1)}}if(a){var c=this.displayObjectDependencyMap.get(a);c||(this.displayObjectDependencyMap.set(a,{}),c=this.displayObjectDependencyMap.get(a)),c[r]||(c[r]=[]),c[r].push(o)}}},{key:"informDependentDisplayObjects",value:function(r){var i=this,a=this.displayObjectDependencyMap.get(r);a&&Object.keys(a).forEach(function(o){a[o].forEach(function(s){i.dirtifyToRoot(s,!0),s.dispatchEvent(new th(wr.ATTR_MODIFIED,s,i,i,o,th.MODIFICATION,i,i)),s.isCustomElement&&s.isConnected&&s.attributeChangedCallback&&s.attributeChangedCallback(o,i,i)})})}},{key:"getPosition",value:function(r){var i=r.transformable;return jN(i.position,this.getWorldTransform(r,i))}},{key:"getRotation",value:function(r){var i=r.transformable;return HN(i.rotation,this.getWorldTransform(r,i))}},{key:"getScale",value:function(r){var i=r.transformable;return zx(i.scaling,this.getWorldTransform(r,i))}},{key:"getWorldTransform",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:r.transformable;return!i.localDirtyFlag&&!i.dirtyFlag||(r.parentNode&&r.parentNode.transformable&&this.getWorldTransform(r.parentNode),this.sync(r,i)),i.worldTransform}},{key:"getLocalPosition",value:function(r){return r.transformable.localPosition}},{key:"getLocalRotation",value:function(r){return r.transformable.localRotation}},{key:"getLocalScale",value:function(r){return r.transformable.localScale}},{key:"getLocalSkew",value:function(r){return r.transformable.localSkew}},{key:"calcLocalTransform",value:function(r){var i=r.localSkew[0]!==0||r.localSkew[1]!==0;if(i){V2(r.localTransform,r.localRotation,r.localPosition,ji(1,1,1),r.origin),(r.localSkew[0]!==0||r.localSkew[1]!==0)&&(Hm(D1),D1[4]=Math.tan(r.localSkew[0]),D1[1]=Math.tan(r.localSkew[1]),Vs(r.localTransform,r.localTransform,D1));var a=V2(D1,Cae(mg,0,0,0,1),zs(gg,1,1,1),r.localScale,r.origin);Vs(r.localTransform,r.localTransform,a)}else{var o=r.localTransform,s=r.localPosition,l=r.localRotation,c=r.localScale,u=r.origin,d=s[0]!==0||s[1]!==0||s[2]!==0,f=l[3]!==1||l[0]!==0||l[1]!==0||l[2]!==0,h=c[0]!==1||c[1]!==1||c[2]!==1,p=u[0]!==0||u[1]!==0||u[2]!==0;!f&&!h&&!p?d?jg(o,s):Hm(o):V2(o,l,s,c,u)}}},{key:"getLocalTransform",value:function(r){var i=r.transformable;return i.localDirtyFlag&&(this.calcLocalTransform(i),i.localDirtyFlag=!1),i.localTransform}},{key:"setLocalTransform",value:function(r,i){var a=jN(nlt,i),o=HN(rlt,i),s=zx(ilt,i);this.setLocalScale(r,s,!1),this.setLocalPosition(r,a,!1),this.setLocalRotation(r,o,void 0,void 0,void 0,!1),this.dirtifyLocal(r,r.transformable)}},{key:"resetLocalTransform",value:function(r){this.setLocalScale(r,Jst,!1),this.setLocalPosition(r,G3,!1),this.setLocalEulerAngles(r,G3,void 0,void 0,!1),this.setLocalSkew(r,Qst,void 0,!1),this.dirtifyLocal(r,r.transformable)}},{key:"getTransformedGeometryBounds",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2?arguments[2]:void 0,o=this.getGeometryBounds(r,i);if(!Bi.isEmpty(o)){var s=a||new Bi;return s.setFromTransformedAABB(o,this.getWorldTransform(r)),s}return null}},{key:"getGeometryBounds",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=r,o=a.geometry;o.dirty&&At.styleValueRegistry.updateGeometry(r);var s=i?o.renderBounds:o.contentBounds||null;return s||new Bi}},{key:"getBounds",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=r,s=o.renderable;if(!s.boundsDirty&&!a&&s.bounds)return s.bounds;if(!s.renderBoundsDirty&&a&&s.renderBounds)return s.renderBounds;var l=a?s.renderBounds:s.bounds,c=this.getTransformedGeometryBounds(r,a,l),u=r.childNodes;if(u.forEach(function(h){var p=i.getBounds(h,a);p&&(c?c.add(p):(c=l||new Bi,c.update(p.center,p.halfExtents)))}),c||(c=new Bi),a){var d=eEe(r);if(d){var f=d.parsedStyle.clipPath.getBounds(a);c?f&&(c=f.intersection(c)):c.update(f.center,f.halfExtents)}}return a?(s.renderBounds=c,s.renderBoundsDirty=!1):(s.bounds=c,s.boundsDirty=!1),c}},{key:"getLocalBounds",value:function(r){if(r.parentNode){var i=elt;r.parentNode.transformable&&(i=$f(D1,this.getWorldTransform(r.parentNode)));var a=this.getBounds(r);if(!Bi.isEmpty(a)){var o=new Bi;return o.setFromTransformedAABB(a,i),o}}return this.getBounds(r)}},{key:"getBoundingClientRect",value:function(r){var i,a,o=this.getGeometryBounds(r);Bi.isEmpty(o)||(a=new Bi,a.setFromTransformedAABB(o,this.getWorldTransform(r)));var s=(i=r.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0?void 0:i.getContextService().getBoundingClientRect();if(a){var l=a.getMin(),c=fe(l,2),u=c[0],d=c[1],f=a.getMax(),h=fe(f,2),p=h[0],g=h[1];return new Vx(u+((s==null?void 0:s.left)||0),d+((s==null?void 0:s.top)||0),p-u,g-d)}return new Vx((s==null?void 0:s.left)||0,(s==null?void 0:s.top)||0,0,0)}},{key:"dirtifyWorldInternal",value:function(r,i){var a=this;if(!i.dirtyFlag){i.dirtyFlag=!0,i.frozen=!1,r.childNodes.forEach(function(l){var c=l.transformable;c.dirtyFlag||a.dirtifyWorldInternal(l,c)});var o=r,s=o.renderable;s&&(s.renderBoundsDirty=!0,s.boundsDirty=!0,s.dirty=!0)}}},{key:"syncHierarchy",value:function(r){var i=r.transformable;if(!i.frozen){i.frozen=!0,(i.localDirtyFlag||i.dirtyFlag)&&this.sync(r,i);for(var a=r.childNodes,o=0;o<a.length;o++)this.syncHierarchy(a[o])}}},{key:"sync",value:function(r,i){if(i.localDirtyFlag&&(this.calcLocalTransform(i),i.localDirtyFlag=!1),i.dirtyFlag){var a=r.parentNode,o=a&&a.transformable;a===null||!o?Bx(i.worldTransform,i.localTransform):Vs(i.worldTransform,o.worldTransform,i.localTransform),i.dirtyFlag=!1}}},{key:"unfreezeParentToRoot",value:function(r){for(var i=r.parentNode;i;){var a=i.transformable;a&&(a.frozen=!1),i=i.parentNode}}}])}(),$v={MetricsString:"|ÉqÅ",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},foe=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,olt=/[!%),.:;?\]}¢°·'""†‡›℃∶、。〃〆〕〗〞﹚﹜！＂％＇），．：；？！］｝～]/,slt=/[$(£¥·'"〈《「『【〔〖〝﹙﹛＄（．［｛￡￥]/,llt=/[!),.:;?\]}¢·–—'"•"、。〆〞〕〉》」︰︱︲︳﹐﹑﹒﹓﹔﹕﹖﹘﹚﹜！），．：；？︶︸︺︼︾﹀﹂﹗］｜｝､]/,clt=/[([{£¥'"‵〈《「『〔〝︴﹙﹛（｛︵︷︹︻︽︿﹁﹃﹏]/,ult=/[)\]｝〕〉》」』】〙〗〟'"｠»ヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻‐゠–〜?!‼⁇⁈⁉・、:;,。.]/,dlt=/[([｛〔〈《「『【〘〖〝'"｟«—...‥〳〴〵]/,flt=/[!%),.:;?\]}¢°'"†‡℃〆〈《「『〕！％），．：；？］｝]/,hlt=/[$([{£¥'"々〇〉》」〔＄（［｛｠￥￦#]/,plt=new RegExp("".concat(olt.source,"|").concat(llt.source,"|").concat(ult.source,"|").concat(flt.source)),glt=new RegExp("".concat(slt.source,"|").concat(clt.source,"|").concat(dlt.source,"|").concat(hlt.source)),mlt=function(){function n(e){var r=this;st(this,n),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(i,a){return r.isBreakingSpace(a)?!1:!!(i&&(glt.exec(a)||plt.exec(i)))},this.trimByKinsokuShorui=function(i){var a=ot(i),o=a[a.length-2];if(!o)return i;var s=o[o.length-1];return a[a.length-2]=o.slice(0,-1),a[a.length-1]=s+a[a.length-1],a},this.runtime=e}return lt(n,[{key:"measureFont",value:function(r,i){if(this.fontMetricsCache[r])return this.fontMetricsCache[r];var a={ascent:0,descent:0,fontSize:0},o=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(i),s=this.runtime.offscreenCanvasCreator.getOrCreateContext(i,{willReadFrequently:!0});s.font=r;var l=$v.MetricsString+$v.BaselineSymbol,c=Math.ceil(s.measureText(l).width),u=Math.ceil(s.measureText($v.BaselineSymbol).width),d=$v.HeightMultiplier*u;u=u*$v.BaselineMultiplier|0,o.width=c,o.height=d,s.fillStyle="#f00",s.fillRect(0,0,c,d),s.font=r,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(l,0,u);var f=s.getImageData(0,0,c||1,d||1).data,h=f.length,p=c*4,g=0,m=0,v=!1;for(g=0;g<u;++g){for(var y=0;y<p;y+=4)if(f[m+y]!==255){v=!0;break}if(!v)m+=p;else break}for(a.ascent=u-g,m=h-p,v=!1,g=d;g>u;--g){for(var b=0;b<p;b+=4)if(f[m+b]!==255){v=!0;break}if(!v)m-=p;else break}return a.descent=g-u,a.fontSize=a.ascent+a.descent,this.fontMetricsCache[r]=a,a}},{key:"measureText",value:function(r,i,a){var o=i.fontSize,s=o===void 0?16:o,l=i.wordWrap,c=l===void 0?!1:l,u=i.lineHeight,d=i.lineWidth,f=d===void 0?1:d,h=i.textBaseline,p=h===void 0?"alphabetic":h,g=i.textAlign,m=g===void 0?"start":g,v=i.letterSpacing,y=v===void 0?0:v,b=i.textPath;i.textPathSide,i.textPathStartOffset;var x=i.leading,_=x===void 0?0:x,S=Rst(i),M=this.measureFont(S,a);M.fontSize===0&&(M.fontSize=s,M.ascent=s);var E=this.runtime.offscreenCanvasCreator.getOrCreateContext(a);E.font=S,i.isOverflowing=!1;var T=c?this.wordWrap(r,i,a):r,P=T.split(/(?:\r\n|\r|\n)/),A=new Array(P.length),N=0;if(b){b.getTotalLength();for(var O=0;O<P.length;O++)E.measureText(P[O]).width+(P[O].length-1)*y}else{for(var I=0;I<P.length;I++){var D=E.measureText(P[I]).width+(P[I].length-1)*y;A[I]=D,N=Math.max(N,D)}var k=N+f,$=u||M.fontSize+f,B=Math.max($,M.fontSize+f)+(P.length-1)*($+_);$+=_;var F=0;return p==="middle"?F=-B/2:p==="bottom"||p==="alphabetic"||p==="ideographic"?F=-B:(p==="top"||p==="hanging")&&(F=0),{font:S,width:k,height:B,lines:P,lineWidths:A,lineHeight:$,maxLineWidth:N,fontProperties:M,lineMetrics:A.map(function(G,z){var U=0;return m==="center"||m==="middle"?U-=G/2:(m==="right"||m==="end")&&(U-=G),new Vx(U-f/2,F+z*$,G+f,$)})}}}},{key:"wordWrap",value:function(r,i,a){var o=this,s=this,l=i.wordWrapWidth,c=l===void 0?0:l,u=i.letterSpacing,d=u===void 0?0:u,f=i.maxLines,h=f===void 0?1/0:f,p=i.textOverflow,g=this.runtime.offscreenCanvasCreator.getOrCreateContext(a),m=c+d,v="";p==="ellipsis"?v="...":p&&p!=="clip"&&(v=p);var y=Array.from(r),b=[],x=0,_=0,S=0,M={},E=function(F){return o.getFromCache(F,d,M,g)},T=E(v);function P(B,F,G,z){for(;E(B)<z&&F<y.length-1&&!s.isNewline(y[F+1]);)F+=1,B+=y[F];for(;E(B)>z&&F>G;)F-=1,B=B.slice(0,-1);return{lineTxt:B,txtLastCharIndex:F}}function A(B,F){if(!(T<=0||T>m)){if(!b[B]){b[B]=v;return}var G=P(b[B],F,S+1,m-T);b[B]=G.lineTxt+v}}for(var N=0;N<y.length;N++){var O=y[N],I=y[N-1],D=y[N+1],k=E(O);if(this.isNewline(O)){if(x+1>=h){i.isOverflowing=!0,N<y.length-1&&A(x,N-1);break}S=N-1,x+=1,_=0,b[x]="";continue}if(_>0&&_+k>m){var $=P(b[x],N-1,S+1,m);if($.txtLastCharIndex!==N-1){if(b[x]=$.lineTxt,$.txtLastCharIndex===y.length-1)break;N=$.txtLastCharIndex+1,O=y[N],I=y[N-1],D=y[N+1],k=E(O)}if(x+1>=h){i.isOverflowing=!0,A(x,N-1);break}if(S=N-1,x+=1,_=0,b[x]="",this.isBreakingSpace(O))continue;this.canBreakInLastChar(O)||(b=this.trimToBreakable(b),_=this.sumTextWidthByCache(b[x]||"",E)),this.shouldBreakByKinsokuShorui(O,D)&&(b=this.trimByKinsokuShorui(b),_+=E(I||""))}_+=k,b[x]=(b[x]||"")+O}return b.join(`
`)}},{key:"isBreakingSpace",value:function(r){return typeof r!="string"?!1:$v.BreakingSpaces.indexOf(r.charCodeAt(0))>=0}},{key:"isNewline",value:function(r){return typeof r!="string"?!1:$v.Newlines.indexOf(r.charCodeAt(0))>=0}},{key:"trimToBreakable",value:function(r){var i=ot(r),a=i[i.length-2],o=this.findBreakableIndex(a);if(o===-1||!a)return i;var s=a.slice(o,o+1),l=this.isBreakingSpace(s),c=o+1,u=o+(l?0:1);return i[i.length-1]+=a.slice(c,a.length),i[i.length-2]=a.slice(0,u),i}},{key:"canBreakInLastChar",value:function(r){return!(r&&foe.test(r))}},{key:"sumTextWidthByCache",value:function(r,i){return r.split("").reduce(function(a,o){return a+i(o)},0)}},{key:"findBreakableIndex",value:function(r){for(var i=r.length-1;i>=0;i--)if(!foe.test(r[i]))return i;return-1}},{key:"getFromCache",value:function(r,i,a,o){var s=a[r];if(typeof s!="number"){var l=r.length*i,c=o.measureText(r);s=c.width+l,a[r]=s}return s}}])}(),At={},vlt=function(n){var e=new Vst,r=new Ust;return n={},re(re(re(re(re(re(re(re(re(re(n,at.FRAGMENT,null),at.CIRCLE,new Fst),at.ELLIPSE,new $st),at.RECT,e),at.IMAGE,e),at.GROUP,new jst),at.LINE,new Bst),at.TEXT,new Gst(At)),at.POLYLINE,r),at.POLYGON,r),re(re(re(n,at.PATH,new zst),at.HTML,new Hst),at.MESH,null)}(),ylt=function(n){var e=new Xot,r=new Oj;return n={},re(re(re(re(re(re(re(re(re(re(n,qt.PERCENTAGE,null),qt.NUMBER,new est),qt.ANGLE,new qot),qt.DEFINED_PATH,new Yot),qt.PAINT,e),qt.COLOR,e),qt.FILTER,new Kot),qt.LENGTH,r),qt.LENGTH_PERCENTAGE,r),qt.LENGTH_PERCENTAGE_12,new Zot),re(re(re(re(re(re(re(re(re(re(n,qt.LENGTH_PERCENTAGE_14,new Qot),qt.COORDINATE,new Oj),qt.OFFSET_DISTANCE,new tst),qt.OPACITY_VALUE,new nst),qt.PATH,new rst),qt.LIST_OF_POINTS,new ist),qt.SHADOW_BLUR,new ast),qt.TEXT,new ost),qt.TEXT_TRANSFORM,new sst),qt.TRANSFORM,new Dst),re(re(re(n,qt.TRANSFORM_ORIGIN,new Lst),qt.Z_INDEX,new kst),qt.MARKER,new Jot)}(),blt=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}};At.CameraContribution=D2e;At.AnimationTimeline=null;At.EasingFunction=null;At.offscreenCanvasCreator=new pX;At.sceneGraphSelector=new Kst;At.sceneGraphService=new alt(At);At.textService=new mlt(At);At.geometryUpdaterFactory=vlt;At.CSSPropertySyntaxFactory=ylt;At.styleValueRegistry=new Hot(At);At.layoutRegistry=null;At.globalThis=blt();At.enableStyleSyntax=!0;At.enableSizeAttenuation=!1;var xlt=0,Lj=new th(wr.INSERTED,null,"","","",0,"",""),kj=new th(wr.REMOVED,null,"","","",0,"",""),lEe=new so(wr.DESTROY),_lt=function(n){function e(){var r;st(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=dr(this,e,[].concat(a)),r.entity=xlt++,r.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},r.cullable={strategy:Tat.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},r.transformable={dirtyFlag:!1,localDirtyFlag:!1,frozen:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},r.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},r.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},r.rBushNode={aabb:void 0},r.namespaceURI="g",r.scrollLeft=0,r.scrollTop=0,r.clientTop=0,r.clientLeft=0,r.destroyed=!1,r.style={},r.computedStyle={},r.parsedStyle={},r.attributes={},r}return $n(e,n),lt(e,[{key:"className",get:function(){return this.getAttribute("class")||""},set:function(i){this.setAttribute("class",i)}},{key:"classList",get:function(){return this.className.split(" ").filter(function(i){return i!==""})}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){if(this.parentNode){var i=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[i+1]||null}return null}},{key:"previousSibling",get:function(){if(this.parentNode){var i=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[i-1]||null}return null}},{key:"cloneNode",value:function(i){throw new Error(_i)}},{key:"appendChild",value:function(i,a){var o;if(i.destroyed)throw new Error(mat);return At.sceneGraphService.attach(i,this,a),(o=this.ownerDocument)!==null&&o!==void 0&&o.defaultView&&(!iO(this)&&i.nodeName===at.FRAGMENT?this.ownerDocument.defaultView.mountFragment(i):this.ownerDocument.defaultView.mountChildren(i)),this.isMutationObserved&&(Lj.relatedNode=this,i.dispatchEvent(Lj)),i}},{key:"insertBefore",value:function(i,a){if(!a)this.appendChild(i);else{i.parentElement&&i.parentElement.removeChild(i);var o=this.childNodes.indexOf(a);o===-1?this.appendChild(i):this.appendChild(i,o)}return i}},{key:"replaceChild",value:function(i,a){var o=this.childNodes.indexOf(a);return this.removeChild(a),this.appendChild(i,o),a}},{key:"removeChild",value:function(i){var a;return kj.relatedNode=this,i.dispatchEvent(kj),(a=i.ownerDocument)!==null&&a!==void 0&&a.defaultView&&i.ownerDocument.defaultView.unmountChildren(i),At.sceneGraphService.detach(i),i}},{key:"removeChildren",value:function(){for(var i=this.childNodes.length-1;i>=0;i--){var a=this.childNodes[i];this.removeChild(a)}}},{key:"destroyChildren",value:function(){for(var i=this.childNodes.length-1;i>=0;i--){var a=this.childNodes[i];a.childNodes.length>0&&a.destroyChildren(),a.destroy()}}},{key:"matches",value:function(i){return At.sceneGraphService.matches(i,this)}},{key:"getElementById",value:function(i){return At.sceneGraphService.querySelector("#".concat(i),this)}},{key:"getElementsByName",value:function(i){return At.sceneGraphService.querySelectorAll('[name="'.concat(i,'"]'),this)}},{key:"getElementsByClassName",value:function(i){return At.sceneGraphService.querySelectorAll(".".concat(i),this)}},{key:"getElementsByTagName",value:function(i){return At.sceneGraphService.querySelectorAll(i,this)}},{key:"querySelector",value:function(i){return At.sceneGraphService.querySelector(i,this)}},{key:"querySelectorAll",value:function(i){return At.sceneGraphService.querySelectorAll(i,this)}},{key:"closest",value:function(i){var a=this;do{if(At.sceneGraphService.matches(i,a))return a;a=a.parentElement}while(a!==null);return null}},{key:"find",value:function(i){var a=this,o=null;return this.forEach(function(s){return s!==a&&i(s)?(o=s,!1):!0}),o}},{key:"findAll",value:function(i){var a=this,o=[];return this.forEach(function(s){s!==a&&i(s)&&o.push(s)}),o}},{key:"after",value:function(){var i=this;if(this.parentNode){for(var a=this.parentNode.childNodes.indexOf(this),o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];s.forEach(function(c,u){var d;return(d=i.parentNode)===null||d===void 0?void 0:d.appendChild(c,a+u+1)})}}},{key:"before",value:function(){if(this.parentNode){for(var i,a=this.parentNode.childNodes.indexOf(this),o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];var c=s[0],u=s.slice(1);this.parentNode.appendChild(c,a),(i=c).after.apply(i,ot(u))}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove()}},{key:"append",value:function(){for(var i=this,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];o.forEach(function(l){return i.appendChild(l)})}},{key:"prepend",value:function(){for(var i=this,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];o.forEach(function(l,c){return i.appendChild(l,c)})}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:"destroy",value:function(){this.destroyChildren(),this.dispatchEvent(lEe),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:"getGeometryBounds",value:function(){return At.sceneGraphService.getGeometryBounds(this)}},{key:"getRenderBounds",value:function(){return At.sceneGraphService.getBounds(this,!0)}},{key:"getBounds",value:function(){return At.sceneGraphService.getBounds(this)}},{key:"getLocalBounds",value:function(){return At.sceneGraphService.getLocalBounds(this)}},{key:"getBoundingClientRect",value:function(){return At.sceneGraphService.getBoundingClientRect(this)}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle))}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes)}},{key:"getAttribute",value:function(i){if(typeof i!="symbol"){var a=this.attributes[i];return a}}},{key:"hasAttribute",value:function(i){return this.getAttributeNames().includes(i)}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length}},{key:"removeAttribute",value:function(i){this.setAttribute(i,null),delete this.attributes[i]}},{key:"setAttribute",value:function(i,a,o,s){this.attributes[i]=a}},{key:"getAttributeNS",value:function(i,a){throw new Error(_i)}},{key:"getAttributeNode",value:function(i){throw new Error(_i)}},{key:"getAttributeNodeNS",value:function(i,a){throw new Error(_i)}},{key:"hasAttributeNS",value:function(i,a){throw new Error(_i)}},{key:"removeAttributeNS",value:function(i,a){throw new Error(_i)}},{key:"removeAttributeNode",value:function(i){throw new Error(_i)}},{key:"setAttributeNS",value:function(i,a,o){throw new Error(_i)}},{key:"setAttributeNode",value:function(i){throw new Error(_i)}},{key:"setAttributeNodeNS",value:function(i){throw new Error(_i)}},{key:"toggleAttribute",value:function(i,a){throw new Error(_i)}}])}(da);function Xr(n){return!!(n!=null&&n.nodeName)}var wlt=At.globalThis.Proxy?At.globalThis.Proxy:function(){},Sf=new th(wr.ATTR_MODIFIED,null,null,null,null,th.MODIFICATION,null,null),dS=Nr(),Slt=Ao(),qi=function(n){function e(r){var i;return st(this,e),i=dr(this,e),i.isCustomElement=!1,i.isMutationObserved=!1,i.activeAnimations=[],i.config=r,i.id=r.id||"",i.name=r.name||"",(r.className||r.class)&&(i.className=r.className||r.class),i.nodeName=r.type||at.GROUP,r.initialParsedStyle&&Object.assign(i.parsedStyle,r.initialParsedStyle),i.initAttributes(r.style),At.enableStyleSyntax&&(i.style=new wlt({setProperty:function(o,s){i.setAttribute(o,s)},getPropertyValue:function(o){return i.getAttribute(o)},removeProperty:function(o){i.removeAttribute(o)},item:function(){return""}},{get:function(o,s){return o[s]!==void 0?o[s]:i.getAttribute(s)},set:function(o,s,l){return i.setAttribute(s,l),!0}})),i}return $n(e,n),lt(e,[{key:"destroy",value:function(){Oae(e,"destroy",this)([]),this.getAnimations().forEach(function(i){i.cancel()})}},{key:"cloneNode",value:function(i,a){var o=se({},this.attributes);for(var s in o){var l=o[s];Xr(l)&&s!=="clipPath"&&s!=="offsetPath"&&s!=="textPath"&&(o[s]=l.cloneNode(i)),a&&(o[s]=a(s,l))}var c=new this.constructor(se(se({},this.config),{},{style:o}));return c.setLocalTransform(this.getLocalTransform()),i&&this.children.forEach(function(u){if(!u.style.isMarker){var d=u.cloneNode(i);c.appendChild(d)}}),c}},{key:"initAttributes",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a={forceUpdateGeometry:!0};At.styleValueRegistry.processProperties(this,i,a),this.renderable.dirty=!0}},{key:"setAttribute",value:function(i,a){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;Kn(a)||(o||a!==this.attributes[i])&&(this.internalSetAttribute(i,a,{memoize:s}),Oae(e,"setAttribute",this)([i,a]))}},{key:"internalSetAttribute",value:function(i,a){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.renderable,l=this.attributes[i],c=this.parsedStyle[i];At.styleValueRegistry.processProperties(this,re({},i,a),o),s.dirty=!0;var u=this.parsedStyle[i];if(this.isConnected&&(Sf.relatedNode=this,Sf.prevValue=l,Sf.newValue=a,Sf.attrName=i,Sf.prevParsedValue=c,Sf.newParsedValue=u,this.isMutationObserved?this.dispatchEvent(Sf):(Sf.target=this,this.ownerDocument.defaultView.dispatchEvent(Sf,!0))),this.isCustomElement&&this.isConnected||!this.isCustomElement){var d,f;(d=(f=this).attributeChangedCallback)===null||d===void 0||d.call(f,i,l,a,c,u)}}},{key:"getBBox",value:function(){var i=this.getBounds(),a=i.getMin(),o=fe(a,2),s=o[0],l=o[1],c=i.getMax(),u=fe(c,2),d=u[0],f=u[1];return new Vx(s,l,d-s,f-l)}},{key:"setOrigin",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return At.sceneGraphService.setOrigin(this,sl(i,a,o,!1)),this}},{key:"getOrigin",value:function(){return At.sceneGraphService.getOrigin(this)}},{key:"setPosition",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return At.sceneGraphService.setPosition(this,sl(i,a,o,!1)),this}},{key:"setLocalPosition",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return At.sceneGraphService.setLocalPosition(this,sl(i,a,o,!1)),this}},{key:"translate",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return At.sceneGraphService.translate(this,sl(i,a,o,!1)),this}},{key:"translateLocal",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return At.sceneGraphService.translateLocal(this,sl(i,a,o,!1)),this}},{key:"getPosition",value:function(){return At.sceneGraphService.getPosition(this)}},{key:"getLocalPosition",value:function(){return At.sceneGraphService.getLocalPosition(this)}},{key:"scale",value:function(i,a,o){return this.scaleLocal(i,a,o)}},{key:"scaleLocal",value:function(i,a,o){return typeof i=="number"&&(a=a||i,o=o||i,i=sl(i,a,o,!1)),At.sceneGraphService.scaleLocal(this,i),this}},{key:"setLocalScale",value:function(i,a,o){return typeof i=="number"&&(a=a||i,o=o||i,i=sl(i,a,o,!1)),At.sceneGraphService.setLocalScale(this,i),this}},{key:"getLocalScale",value:function(){return At.sceneGraphService.getLocalScale(this)}},{key:"getScale",value:function(){return At.sceneGraphService.getScale(this)}},{key:"getEulerAngles",value:function(){var i=uF(dS,At.sceneGraphService.getWorldTransform(this)),a=fe(i,3),o=a[2];return $l(o)}},{key:"getLocalEulerAngles",value:function(){var i=uF(dS,At.sceneGraphService.getLocalRotation(this)),a=fe(i,3),o=a[2];return $l(o)}},{key:"setEulerAngles",value:function(i){return At.sceneGraphService.setEulerAngles(this,0,0,i),this}},{key:"setLocalEulerAngles",value:function(i){return At.sceneGraphService.setLocalEulerAngles(this,0,0,i),this}},{key:"rotateLocal",value:function(i,a,o){return Nn(a)&&Nn(o)?At.sceneGraphService.rotateLocal(this,0,0,i):At.sceneGraphService.rotateLocal(this,i,a,o),this}},{key:"rotate",value:function(i,a,o){return Nn(a)&&Nn(o)?At.sceneGraphService.rotate(this,0,0,i):At.sceneGraphService.rotate(this,i,a,o),this}},{key:"setRotation",value:function(i,a,o,s){return At.sceneGraphService.setRotation(this,i,a,o,s),this}},{key:"setLocalRotation",value:function(i,a,o,s){return At.sceneGraphService.setLocalRotation(this,i,a,o,s),this}},{key:"setLocalSkew",value:function(i,a){return At.sceneGraphService.setLocalSkew(this,i,a),this}},{key:"getRotation",value:function(){return At.sceneGraphService.getRotation(this)}},{key:"getLocalRotation",value:function(){return At.sceneGraphService.getLocalRotation(this)}},{key:"getLocalSkew",value:function(){return At.sceneGraphService.getLocalSkew(this)}},{key:"getLocalTransform",value:function(){return At.sceneGraphService.getLocalTransform(this)}},{key:"getWorldTransform",value:function(){return At.sceneGraphService.getWorldTransform(this)}},{key:"setLocalTransform",value:function(i){return At.sceneGraphService.setLocalTransform(this,i),this}},{key:"resetLocalTransform",value:function(){At.sceneGraphService.resetLocalTransform(this)}},{key:"getAnimations",value:function(){return this.activeAnimations}},{key:"animate",value:function(i,a){var o,s=(o=this.ownerDocument)===null||o===void 0?void 0:o.timeline;return s?s.play(this,i,a):null}},{key:"isVisible",value:function(){var i;return((i=this.parsedStyle)===null||i===void 0?void 0:i.visibility)!=="hidden"}},{key:"interactive",get:function(){return this.isInteractive()},set:function(i){this.style.pointerEvents=i?"auto":"none"}},{key:"isInteractive",value:function(){var i;return((i=this.parsedStyle)===null||i===void 0?void 0:i.pointerEvents)!=="none"}},{key:"isCulled",value:function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,ot(this.parentNode.children.map(function(i){return Number(i.style.zIndex)})))+1),this}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,ot(this.parentNode.children.map(function(i){return Number(i.style.zIndex)})))-1),this}},{key:"getConfig",value:function(){return this.config}},{key:"attr",value:function(){for(var i=this,a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];var l=o[0],c=o[1];return l?Xa(l)?(Object.keys(l).forEach(function(u){i.setAttribute(u,l[u])}),this):o.length===2?(this.setAttribute(l,c),this):this.attributes[l]:this.attributes}},{key:"getMatrix",value:function(i){var a=i||this.getWorldTransform(),o=jN(dS,a),s=fe(o,2),l=s[0],c=s[1],u=zx(dS,a),d=fe(u,2),f=d[0],h=d[1],p=HN(Slt,a),g=uF(dS,p),m=fe(g,3),v=m[0],y=m[2];return wat(v||y,l,c,f,h)}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform())}},{key:"setMatrix",value:function(i){var a=Fae(i),o=fe(a,5),s=o[0],l=o[1],c=o[2],u=o[3],d=o[4];this.setEulerAngles(d).setPosition(s,l).setLocalScale(c,u)}},{key:"setLocalMatrix",value:function(i){var a=Fae(i),o=fe(a,5),s=o[0],l=o[1],c=o[2],u=o[3],d=o[4];this.setLocalEulerAngles(d).setLocalPosition(s,l).setLocalScale(c,u)}},{key:"show",value:function(){this.forEach(function(i){i.style.visibility="visible"})}},{key:"hide",value:function(){this.forEach(function(i){i.style.visibility="hidden"})}},{key:"getCount",value:function(){return this.childElementCount}},{key:"getParent",value:function(){return this.parentElement}},{key:"getChildren",value:function(){return this.children}},{key:"getFirst",value:function(){return this.firstElementChild}},{key:"getLast",value:function(){return this.lastElementChild}},{key:"getChildByIndex",value:function(i){return this.children[i]||null}},{key:"add",value:function(i,a){return this.appendChild(i,a)}},{key:"set",value:function(i,a){this.config[i]=a}},{key:"get",value:function(i){return this.config[i]}},{key:"moveTo",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(i,a,o),this}},{key:"move",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(i,a,o),this}},{key:"setZIndex",value:function(i){return this.style.zIndex=i,this}}])}(_lt);qi.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var qp=function(n){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return st(this,e),dr(this,e,[se({type:at.CIRCLE},r)])}return $n(e,n),lt(e)}(qi);qp.PARSED_STYLE_LIST=new Set([].concat(ot(qi.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var Elt=["style"],gX=function(n){function e(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=i.style,o=ir(i,Elt);return st(this,e),r=dr(this,e,[se({style:a},o)]),r.isCustomElement=!0,r}return $n(e,n),lt(e)}(qi);gX.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var EM=function(n){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return st(this,e),dr(this,e,[se({type:at.ELLIPSE},r)])}return $n(e,n),lt(e)}(qi);EM.PARSED_STYLE_LIST=new Set([].concat(ot(qi.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"]));var Clt=function(n){function e(){return st(this,e),dr(this,e,[{type:at.FRAGMENT}])}return $n(e,n),lt(e)}(qi);Clt.PARSED_STYLE_LIST=new Set(["class","className"]);var Bo=function(n){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return st(this,e),dr(this,e,[se({type:at.GROUP},r)])}return $n(e,n),lt(e)}(qi);Bo.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var Mlt=["style"],CM=function(n){function e(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=i.style,o=ir(i,Mlt);return st(this,e),r=dr(this,e,[se({type:at.HTML,style:a},o)]),r.cullable.enable=!1,r}return $n(e,n),lt(e,[{key:"getDomElement",value:function(){return this.parsedStyle.$el}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"getLocalBounds",value:function(){if(this.parentNode){var i=$f($i(),this.parentNode.getWorldTransform()),a=this.getBounds();if(!Bi.isEmpty(a)){var o=new Bi;return o.setFromTransformedAABB(a,i),o}}return this.getBounds()}}])}(qi);CM.PARSED_STYLE_LIST=new Set([].concat(ot(qi.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var MM=function(n){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return st(this,e),dr(this,e,[se({type:at.IMAGE},r)])}return $n(e,n),lt(e)}(qi);MM.PARSED_STYLE_LIST=new Set([].concat(ot(qi.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var Tlt=["style"],yy=function(n){function e(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=i.style,o=ir(i,Tlt);st(this,e),r=dr(this,e,[se({type:at.LINE,style:se({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},a)},o)]),r.markerStartAngle=0,r.markerEndAngle=0;var s=r.parsedStyle,l=s.markerStart,c=s.markerEnd;return l&&Xr(l)&&(r.markerStartAngle=l.getLocalEulerAngles(),r.appendChild(l)),c&&Xr(c)&&(r.markerEndAngle=c.getLocalEulerAngles(),r.appendChild(c)),r.transformMarker(!0),r.transformMarker(!1),r}return $n(e,n),lt(e,[{key:"attributeChangedCallback",value:function(i,a,o,s,l){i==="x1"||i==="y1"||i==="x2"||i==="y2"||i==="markerStartOffset"||i==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):i==="markerStart"?(s&&Xr(s)&&(this.markerStartAngle=0,s.remove()),l&&Xr(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):i==="markerEnd"&&(s&&Xr(s)&&(this.markerEndAngle=0,s.remove()),l&&Xr(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1)))}},{key:"transformMarker",value:function(i){var a=this.parsedStyle,o=a.markerStart,s=a.markerEnd,l=a.markerStartOffset,c=a.markerEndOffset,u=a.x1,d=a.x2,f=a.y1,h=a.y2,p=i?o:s;if(!(!p||!Xr(p))){var g=0,m,v,y,b,x,_;i?(y=u,b=f,m=d-u,v=h-f,x=l||0,_=this.markerStartAngle):(y=d,b=h,m=u-d,v=f-h,x=c||0,_=this.markerEndAngle),g=Math.atan2(v,m),p.setLocalEulerAngles(g*180/Math.PI+_),p.setLocalPosition(y+Math.cos(g)*x,b+Math.sin(g)*x)}}},{key:"getPoint",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=this.parsedStyle,s=o.x1,l=o.y1,c=o.x2,u=o.y2,d=N2e(s,l,c,u,i),f=d.x,h=d.y,p=Gs(Nr(),ji(f,h,0),a?this.getWorldTransform():this.getLocalTransform());return new hs(p[0],p[1])}},{key:"getPointAtLength",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(i/this.getTotalLength(),a)}},{key:"getTotalLength",value:function(){var i=this.parsedStyle,a=i.x1,o=i.y1,s=i.x2,l=i.y2;return P2e(a,o,s,l)}}])}(qi);yy.PARSED_STYLE_LIST=new Set([].concat(ot(qi.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var Alt=["style"],Lc=function(n){function e(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=i.style,o=ir(i,Alt);st(this,e),r=dr(this,e,[se({type:at.PATH,style:a,initialParsedStyle:{miterLimit:4,d:se({},L2e)}},o)]),r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var s=r.parsedStyle,l=s.markerStart,c=s.markerEnd,u=s.markerMid;return l&&Xr(l)&&(r.markerStartAngle=l.getLocalEulerAngles(),r.appendChild(l)),u&&Xr(u)&&r.placeMarkerMid(u),c&&Xr(c)&&(r.markerEndAngle=c.getLocalEulerAngles(),r.appendChild(c)),r.transformMarker(!0),r.transformMarker(!1),r}return $n(e,n),lt(e,[{key:"attributeChangedCallback",value:function(i,a,o,s,l){i==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):i==="markerStartOffset"||i==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):i==="markerStart"?(s&&Xr(s)&&(this.markerStartAngle=0,s.remove()),l&&Xr(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):i==="markerEnd"?(s&&Xr(s)&&(this.markerEndAngle=0,s.remove()),l&&Xr(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1))):i==="markerMid"&&this.placeMarkerMid(l)}},{key:"transformMarker",value:function(i){var a=this.parsedStyle,o=a.markerStart,s=a.markerEnd,l=a.markerStartOffset,c=a.markerEndOffset,u=i?o:s;if(!(!u||!Xr(u))){var d=0,f,h,p,g,m,v;if(i){var y=this.getStartTangent(),b=fe(y,2),x=b[0],_=b[1];p=_[0],g=_[1],f=x[0]-_[0],h=x[1]-_[1],m=l||0,v=this.markerStartAngle}else{var S=this.getEndTangent(),M=fe(S,2),E=M[0],T=M[1];p=T[0],g=T[1],f=E[0]-T[0],h=E[1]-T[1],m=c||0,v=this.markerEndAngle}d=Math.atan2(h,f),u.setLocalEulerAngles(d*180/Math.PI+v),u.setLocalPosition(p+Math.cos(d)*m,g+Math.sin(d)*m)}}},{key:"placeMarkerMid",value:function(i){var a=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(d){d.remove()}),i&&Xr(i))for(var o=1;o<a.length-1;o++){var s=fe(a[o].currentPoint,2),l=s[0],c=s[1],u=o===1?i:i.cloneNode(!0);this.markerMidList.push(u),this.appendChild(u),u.setLocalPosition(l,c)}}},{key:"getTotalLength",value:function(){return Pj(this)}},{key:"getPointAtLength",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=this.parsedStyle.d.absolutePath,s=Wit(o,i),l=s.x,c=s.y,u=Gs(Nr(),ji(l,c,0),a?this.getWorldTransform():this.getLocalTransform());return new hs(u[0],u[1])}},{key:"getPoint",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPointAtLength(i*Pj(this),a)}},{key:"getStartTangent",value:function(){var i=this.parsedStyle.d.segments,a=[];if(i.length>1){var o=i[0].currentPoint,s=i[1].currentPoint,l=i[1].startTangent;a=[],l?(a.push([o[0]-l[0],o[1]-l[1]]),a.push([o[0],o[1]])):(a.push([s[0],s[1]]),a.push([o[0],o[1]]))}return a}},{key:"getEndTangent",value:function(){var i=this.parsedStyle.d.segments,a=i.length,o=[];if(a>1){var s=i[a-2].currentPoint,l=i[a-1].currentPoint,c=i[a-1].endTangent;o=[],c?(o.push([l[0]-c[0],l[1]-c[1]]),o.push([l[0],l[1]])):(o.push([s[0],s[1]]),o.push([l[0],l[1]]))}return o}}])}(qi);Lc.PARSED_STYLE_LIST=new Set([].concat(ot(qi.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var Rlt=["style"],zy=function(n){function e(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=i.style,o=ir(i,Rlt);st(this,e),r=dr(this,e,[se({type:at.POLYGON,style:a,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},o)]),r.markerStartAngle=0,r.markerEndAngle=0,r.markerMidList=[];var s=r.parsedStyle,l=s.markerStart,c=s.markerEnd,u=s.markerMid;return l&&Xr(l)&&(r.markerStartAngle=l.getLocalEulerAngles(),r.appendChild(l)),u&&Xr(u)&&r.placeMarkerMid(u),c&&Xr(c)&&(r.markerEndAngle=c.getLocalEulerAngles(),r.appendChild(c)),r.transformMarker(!0),r.transformMarker(!1),r}return $n(e,n),lt(e,[{key:"attributeChangedCallback",value:function(i,a,o,s,l){i==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):i==="markerStartOffset"||i==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):i==="markerStart"?(s&&Xr(s)&&(this.markerStartAngle=0,s.remove()),l&&Xr(l)&&(this.markerStartAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!0))):i==="markerEnd"?(s&&Xr(s)&&(this.markerEndAngle=0,s.remove()),l&&Xr(l)&&(this.markerEndAngle=l.getLocalEulerAngles(),this.appendChild(l),this.transformMarker(!1))):i==="markerMid"&&this.placeMarkerMid(l)}},{key:"transformMarker",value:function(i){var a=this.parsedStyle,o=a.markerStart,s=a.markerEnd,l=a.markerStartOffset,c=a.markerEndOffset,u=a.points,d=u||{},f=d.points,h=i?o:s;if(!(!h||!Xr(h)||!f)){var p=0,g,m,v,y,b,x;if(v=f[0][0],y=f[0][1],i)g=f[1][0]-f[0][0],m=f[1][1]-f[0][1],b=l||0,x=this.markerStartAngle;else{var _=f.length;this.parsedStyle.isClosed?(g=f[_-1][0]-f[0][0],m=f[_-1][1]-f[0][1]):(v=f[_-1][0],y=f[_-1][1],g=f[_-2][0]-f[_-1][0],m=f[_-2][1]-f[_-1][1]),b=c||0,x=this.markerEndAngle}p=Math.atan2(m,g),h.setLocalEulerAngles(p*180/Math.PI+x),h.setLocalPosition(v+Math.cos(p)*b,y+Math.sin(p)*b)}}},{key:"placeMarkerMid",value:function(i){var a=this.parsedStyle.points,o=a||{},s=o.points;if(this.markerMidList.forEach(function(f){f.remove()}),this.markerMidList=[],i&&Xr(i)&&s)for(var l=1;l<(this.parsedStyle.isClosed?s.length:s.length-1);l++){var c=s[l][0],u=s[l][1],d=l===1?i:i.cloneNode(!0);this.markerMidList.push(d),this.appendChild(d),d.setLocalPosition(c,u)}}}])}(qi);zy.PARSED_STYLE_LIST=new Set([].concat(ot(qi.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var Plt=["style"],X4=function(n){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=ir(r,Plt);return st(this,e),dr(this,e,[se({type:at.POLYLINE,style:i,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},a)])}return $n(e,n),lt(e,[{key:"getTotalLength",value:function(){return wot(this)}},{key:"getPointAtLength",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(i/this.getTotalLength(),a)}},{key:"getPoint",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var s=[],l=0,c,u,d=this.getTotalLength();o.forEach(function(y,b){o[b+1]&&(c=[0,0],c[0]=l/d,u=P2e(y[0],y[1],o[b+1][0],o[b+1][1]),l+=u,c[1]=l/d,s.push(c))}),this.parsedStyle.points.segments=s}var f=0,h=0;this.parsedStyle.points.segments.forEach(function(y,b){i>=y[0]&&i<=y[1]&&(f=(i-y[0])/(y[1]-y[0]),h=b)});var p=N2e(o[h][0],o[h][1],o[h+1][0],o[h+1][1],f),g=p.x,m=p.y,v=Gs(Nr(),ji(g,m,0),a?this.getWorldTransform():this.getLocalTransform());return new hs(v[0],v[1])}},{key:"getStartTangent",value:function(){var i=this.parsedStyle.points.points,a=[];return a.push([i[1][0],i[1][1]]),a.push([i[0][0],i[0][1]]),a}},{key:"getEndTangent",value:function(){var i=this.parsedStyle.points.points,a=i.length-1,o=[];return o.push([i[a-1][0],i[a-1][1]]),o.push([i[a][0],i[a][1]]),o}}])}(zy);X4.PARSED_STYLE_LIST=new Set([].concat(ot(zy.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var ws=function(n){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return st(this,e),dr(this,e,[se({type:at.RECT},r)])}return $n(e,n),lt(e)}(qi);ws.PARSED_STYLE_LIST=new Set([].concat(ot(qi.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var Nlt=["style"],Uy=function(n){function e(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=ir(r,Nlt);return st(this,e),dr(this,e,[se({type:at.TEXT,style:se({fill:"black"},i)},a)])}return $n(e,n),lt(e,[{key:"getComputedTextLength",value:function(){var i;return this.getGeometryBounds(),((i=this.parsedStyle.metrics)===null||i===void 0?void 0:i.maxLineWidth)||0}},{key:"getLineBoundingRects",value:function(){var i;return this.getGeometryBounds(),((i=this.parsedStyle.metrics)===null||i===void 0?void 0:i.lineMetrics)||[]}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])}(qi);Uy.PARSED_STYLE_LIST=new Set([].concat(ot(qi.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textPathSide","textPathStartOffset","metrics","dx","dy"]));var Olt=function(){function n(){st(this,n),this.registry={},this.define(at.CIRCLE,qp),this.define(at.ELLIPSE,EM),this.define(at.RECT,ws),this.define(at.IMAGE,MM),this.define(at.LINE,yy),this.define(at.GROUP,Bo),this.define(at.PATH,Lc),this.define(at.POLYGON,zy),this.define(at.POLYLINE,X4),this.define(at.TEXT,Uy),this.define(at.HTML,CM)}return lt(n,[{key:"define",value:function(r,i){this.registry[r]=i}},{key:"get",value:function(r){return this.registry[r]}}])}(),cEe=function(n){function e(){var r;st(this,e),r=dr(this,e),r.defaultView=null,r.ownerDocument=null,r.nodeName="document";try{r.timeline=new At.AnimationTimeline(r)}catch{}var i={};return dX.forEach(function(a){var o=a.n,s=a.inh,l=a.d;s&&l&&(i[o]=cn(l)?l(at.GROUP):l)}),r.documentElement=new Bo({id:"g-root",style:i}),r.documentElement.ownerDocument=r,r.documentElement.parentNode=r,r.childNodes=[r.documentElement],r}return $n(e,n),lt(e,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"createElement",value:function(i,a){if(i==="svg")return this.documentElement;var o=this.defaultView.customElements.get(i);o||(console.warn("Unsupported tagName: ",i),o=i==="tspan"?Uy:Bo);var s=new o(a);return s.ownerDocument=this,s}},{key:"createElementNS",value:function(i,a,o){return this.createElement(a,o)}},{key:"cloneNode",value:function(i){throw new Error(_i)}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch{}}},{key:"elementsFromBBox",value:function(i,a,o,s){var l=this.defaultView.context.rBushRoot,c=l.search({minX:i,minY:a,maxX:o,maxY:s}),u=[];return c.forEach(function(d){var f=d.displayObject,h=f.parsedStyle.pointerEvents,p=h===void 0?"auto":h,g=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(p);(!g||g&&f.isVisible())&&!f.isCulled()&&f.isInteractive()&&u.push(f)}),u.sort(function(d,f){return f.sortable.renderOrder-d.sortable.renderOrder}),u}},{key:"elementFromPointSync",value:function(i,a){var o=this.defaultView.canvas2Viewport({x:i,y:a}),s=o.x,l=o.y,c=this.defaultView.getConfig(),u=c.width,d=c.height;if(s<0||l<0||s>u||l>d)return null;var f=this.defaultView.viewport2Client({x:s,y:l}),h=f.x,p=f.y,g=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:i,y:a,viewportX:s,viewportY:l,clientX:h,clientY:p},picked:[]}),m=g.picked;return m&&m[0]||this.documentElement}},{key:"elementFromPoint",value:function(){var r=bl(pi().mark(function a(o,s){var l,c,u,d,f,h,p,g,m,v,y;return pi().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(l=this.defaultView.canvas2Viewport({x:o,y:s}),c=l.x,u=l.y,d=this.defaultView.getConfig(),f=d.width,h=d.height,!(c<0||u<0||c>f||u>h)){x.next=4;break}return x.abrupt("return",null);case 4:return p=this.defaultView.viewport2Client({x:c,y:u}),g=p.x,m=p.y,x.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:o,y:s,viewportX:c,viewportY:u,clientX:g,clientY:m},picked:[]});case 7:return v=x.sent,y=v.picked,x.abrupt("return",y&&y[0]||this.documentElement);case 10:case"end":return x.stop()}},a,this)}));function i(a,o){return r.apply(this,arguments)}return i}()},{key:"elementsFromPointSync",value:function(i,a){var o=this.defaultView.canvas2Viewport({x:i,y:a}),s=o.x,l=o.y,c=this.defaultView.getConfig(),u=c.width,d=c.height;if(s<0||l<0||s>u||l>d)return[];var f=this.defaultView.viewport2Client({x:s,y:l}),h=f.x,p=f.y,g=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:i,y:a,viewportX:s,viewportY:l,clientX:h,clientY:p},picked:[]}),m=g.picked;return m[m.length-1]!==this.documentElement&&m.push(this.documentElement),m}},{key:"elementsFromPoint",value:function(){var r=bl(pi().mark(function a(o,s){var l,c,u,d,f,h,p,g,m,v,y;return pi().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(l=this.defaultView.canvas2Viewport({x:o,y:s}),c=l.x,u=l.y,d=this.defaultView.getConfig(),f=d.width,h=d.height,!(c<0||u<0||c>f||u>h)){x.next=4;break}return x.abrupt("return",[]);case 4:return p=this.defaultView.viewport2Client({x:c,y:u}),g=p.x,m=p.y,x.next=7,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:o,y:s,viewportX:c,viewportY:u,clientX:g,clientY:m},picked:[]});case 7:return v=x.sent,y=v.picked,y[y.length-1]!==this.documentElement&&y.push(this.documentElement),x.abrupt("return",y);case 11:case"end":return x.stop()}},a,this)}));function i(a,o){return r.apply(this,arguments)}return i}()},{key:"appendChild",value:function(i,a){throw new Error(I1)}},{key:"insertBefore",value:function(i,a){throw new Error(I1)}},{key:"removeChild",value:function(i,a){throw new Error(I1)}},{key:"replaceChild",value:function(i,a,o){throw new Error(I1)}},{key:"append",value:function(){throw new Error(I1)}},{key:"prepend",value:function(){throw new Error(I1)}},{key:"getElementById",value:function(i){return this.documentElement.getElementById(i)}},{key:"getElementsByName",value:function(i){return this.documentElement.getElementsByName(i)}},{key:"getElementsByTagName",value:function(i){return this.documentElement.getElementsByTagName(i)}},{key:"getElementsByClassName",value:function(i){return this.documentElement.getElementsByClassName(i)}},{key:"querySelector",value:function(i){return this.documentElement.querySelector(i)}},{key:"querySelectorAll",value:function(i){return this.documentElement.querySelectorAll(i)}},{key:"find",value:function(i){return this.documentElement.find(i)}},{key:"findAll",value:function(i){return this.documentElement.findAll(i)}}])}(da),uEe=function(){function n(e){st(this,n),this.strategies=e}return lt(n,[{key:"apply",value:function(r){var i=r.camera,a=r.renderingService,o=r.renderingContext,s=this.strategies;a.hooks.cull.tap(n.tag,function(l){if(l){var c=l.cullable;return s.length===0?c.visible=o.unculledEntities.indexOf(l.entity)>-1:c.visible=s.every(function(u){return u.isVisible(i,l)}),!l.isCulled()&&l.isVisible()?l:(l.dispatchEvent(new so(wr.CULLED)),null)}return l}),a.hooks.afterRender.tap(n.tag,function(l){l.cullable.visibilityPlaneMask=-1})}}])}();uEe.tag="Culling";var dEe=function(){function n(){var e=this;st(this,n),this.autoPreventDefault=!1,this.rootPointerEvent=new aO(null),this.rootWheelEvent=new Dj(null),this.onPointerMove=function(r){var i,a=(i=e.context.renderingContext.root)===null||i===void 0||(i=i.ownerDocument)===null||i===void 0?void 0:i.defaultView;if(!(a.supportsTouchEvents&&r.pointerType==="touch")){var o=e.normalizeToPointerEvent(r,a),s=c0(o),l;try{for(s.s();!(l=s.n()).done;){var c=l.value,u=e.bootstrapEvent(e.rootPointerEvent,c,a,r);e.context.eventService.mapEvent(u)}}catch(d){s.e(d)}finally{s.f()}e.setCursor(e.context.eventService.cursor)}},this.onClick=function(r){var i,a=(i=e.context.renderingContext.root)===null||i===void 0||(i=i.ownerDocument)===null||i===void 0?void 0:i.defaultView,o=e.normalizeToPointerEvent(r,a),s=c0(o),l;try{for(s.s();!(l=s.n()).done;){var c=l.value,u=e.bootstrapEvent(e.rootPointerEvent,c,a,r);e.context.eventService.mapEvent(u)}}catch(d){s.e(d)}finally{s.f()}e.setCursor(e.context.eventService.cursor)}}return lt(n,[{key:"apply",value:function(r){var i=this;this.context=r;var a=r.renderingService,o=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(s){var l=i.context.renderingService.hooks.pickSync.call({position:s,picked:[],topmost:!0}),c=l.picked;return c[0]||null}),a.hooks.pointerWheel.tap(n.tag,function(s){var l=i.normalizeWheelEvent(s);i.context.eventService.mapEvent(l)}),a.hooks.pointerDown.tap(n.tag,function(s){if(!(o.supportsTouchEvents&&s.pointerType==="touch")){var l=i.normalizeToPointerEvent(s,o);if(i.autoPreventDefault&&l[0].isNormalized){var c=s.cancelable||!("cancelable"in s);c&&s.preventDefault()}var u=c0(l),d;try{for(u.s();!(d=u.n()).done;){var f=d.value,h=i.bootstrapEvent(i.rootPointerEvent,f,o,s);i.context.eventService.mapEvent(h)}}catch(p){u.e(p)}finally{u.f()}i.setCursor(i.context.eventService.cursor)}}),a.hooks.pointerUp.tap(n.tag,function(s){if(!(o.supportsTouchEvents&&s.pointerType==="touch")){var l=i.context.contextService.getDomElement(),c=i.context.eventService.isNativeEventFromCanvas(l,s),u=c?"":"outside",d=i.normalizeToPointerEvent(s,o),f=c0(d),h;try{for(f.s();!(h=f.n()).done;){var p=h.value,g=i.bootstrapEvent(i.rootPointerEvent,p,o,s);g.type+=u,i.context.eventService.mapEvent(g)}}catch(m){f.e(m)}finally{f.f()}i.setCursor(i.context.eventService.cursor)}}),a.hooks.pointerMove.tap(n.tag,this.onPointerMove),a.hooks.pointerOver.tap(n.tag,this.onPointerMove),a.hooks.pointerOut.tap(n.tag,this.onPointerMove),a.hooks.click.tap(n.tag,this.onClick),a.hooks.pointerCancel.tap(n.tag,function(s){var l=i.normalizeToPointerEvent(s,o),c=c0(l),u;try{for(c.s();!(u=c.n()).done;){var d=u.value,f=i.bootstrapEvent(i.rootPointerEvent,d,o,s);i.context.eventService.mapEvent(f)}}catch(h){c.e(h)}finally{c.f()}i.setCursor(i.context.eventService.cursor)})}},{key:"bootstrapEvent",value:function(r,i,a,o){r.view=a,r.originalEvent=null,r.nativeEvent=o,r.pointerId=i.pointerId,r.width=i.width,r.height=i.height,r.isPrimary=i.isPrimary,r.pointerType=i.pointerType,r.pressure=i.pressure,r.tangentialPressure=i.tangentialPressure,r.tiltX=i.tiltX,r.tiltY=i.tiltY,r.twist=i.twist,this.transferMouseData(r,i);var s=this.context.eventService.client2Viewport({x:i.clientX,y:i.clientY}),l=s.x,c=s.y;r.viewport.x=l,r.viewport.y=c;var u=this.context.eventService.viewport2Canvas(r.viewport),d=u.x,f=u.y;return r.canvas.x=d,r.canvas.y=f,r.global.copyFrom(r.canvas),r.offset.copyFrom(r.canvas),r.isTrusted=o.isTrusted,r.type==="pointerleave"&&(r.type="pointerout"),r.type.startsWith("mouse")&&(r.type=r.type.replace("mouse","pointer")),r.type.startsWith("touch")&&(r.type=gst[r.type]||r.type),r}},{key:"normalizeWheelEvent",value:function(r){var i=this.rootWheelEvent;this.transferMouseData(i,r),i.deltaMode=r.deltaMode,i.deltaX=r.deltaX,i.deltaY=r.deltaY,i.deltaZ=r.deltaZ;var a=this.context.eventService.client2Viewport({x:r.clientX,y:r.clientY}),o=a.x,s=a.y;i.viewport.x=o,i.viewport.y=s;var l=this.context.eventService.viewport2Canvas(i.viewport),c=l.x,u=l.y;return i.canvas.x=c,i.canvas.y=u,i.global.copyFrom(i.canvas),i.offset.copyFrom(i.canvas),i.nativeEvent=r,i.type=r.type,i}},{key:"transferMouseData",value:function(r,i){r.isTrusted=i.isTrusted,r.srcElement=i.srcElement,r.timeStamp=Ij.now(),r.type=i.type,r.altKey=i.altKey,r.metaKey=i.metaKey,r.shiftKey=i.shiftKey,r.ctrlKey=i.ctrlKey,r.button=i.button,r.buttons=i.buttons,r.client.x=i.clientX,r.client.y=i.clientY,r.movement.x=i.movementX,r.movement.y=i.movementY,r.page.x=i.pageX,r.page.y=i.pageY,r.screen.x=i.screenX,r.screen.y=i.screenY,r.relatedTarget=null}},{key:"setCursor",value:function(r){this.context.contextService.applyCursorStyle(r||this.context.config.cursor||"default")}},{key:"normalizeToPointerEvent",value:function(r,i){var a=[];if(i.isTouchEvent(r))for(var o=0;o<r.changedTouches.length;o++){var s=r.changedTouches[o];Kn(s.button)&&(s.button=0),Kn(s.buttons)&&(s.buttons=1),Kn(s.isPrimary)&&(s.isPrimary=r.touches.length===1&&r.type==="touchstart"),Kn(s.width)&&(s.width=s.radiusX||1),Kn(s.height)&&(s.height=s.radiusY||1),Kn(s.tiltX)&&(s.tiltX=0),Kn(s.tiltY)&&(s.tiltY=0),Kn(s.pointerType)&&(s.pointerType="touch"),Kn(s.pointerId)&&(s.pointerId=s.identifier||0),Kn(s.pressure)&&(s.pressure=s.force||.5),Kn(s.twist)&&(s.twist=0),Kn(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,s.type=r.type,a.push(s)}else if(i.isMouseEvent(r)){var l=r;Kn(l.isPrimary)&&(l.isPrimary=!0),Kn(l.width)&&(l.width=1),Kn(l.height)&&(l.height=1),Kn(l.tiltX)&&(l.tiltX=0),Kn(l.tiltY)&&(l.tiltY=0),Kn(l.pointerType)&&(l.pointerType="mouse"),Kn(l.pointerId)&&(l.pointerId=pst),Kn(l.pressure)&&(l.pressure=.5),Kn(l.twist)&&(l.twist=0),Kn(l.tangentialPressure)&&(l.tangentialPressure=0),l.isNormalized=!0,a.push(l)}else a.push(r);return a}}])}();dEe.tag="Event";var Ilt=[at.CIRCLE,at.ELLIPSE,at.IMAGE,at.RECT,at.LINE,at.POLYLINE,at.POLYGON,at.TEXT,at.PATH,at.HTML],Dlt=function(){function n(){st(this,n)}return lt(n,[{key:"isVisible",value:function(r,i){var a,o=i.cullable;if(!o.enable)return!0;var s=i.getRenderBounds();if(Bi.isEmpty(s))return!1;var l=r.getFrustum(),c=(a=i.parentNode)===null||a===void 0||(a=a.cullable)===null||a===void 0?void 0:a.visibilityPlaneMask;return o.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(i,s,c||O1.INDETERMINATE,l.planes),o.visible=o.visibilityPlaneMask!==O1.OUTSIDE,o.visible}},{key:"computeVisibilityWithPlaneMask",value:function(r,i,a,o){if(a===O1.OUTSIDE||a===O1.INSIDE)return a;for(var s=O1.INSIDE,l=Ilt.indexOf(r.nodeName)>-1,c=0,u=o.length;c<u;++c){var d=1<<c;if(a&d&&!(l&&(c===4||c===5))){var f=o[c],h=f.normal,p=f.distance;if(zf(h,i.getPositiveFarPoint(o[c]))+p<0)return O1.OUTSIDE;zf(h,i.getNegativeFarPoint(o[c]))+p<0&&(s|=d)}}return s}}])}(),fEe=function(){function n(){st(this,n),this.syncTasks=new Map,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return lt(n,[{key:"apply",value:function(r){var i=this,a,o=r.renderingService,s=r.renderingContext,l=r.rBushRoot,c=s.root.ownerDocument.defaultView;this.rBush=l;var u=function(m){var v=m.target;v.renderable.dirty=!0,o.dirtify()},d=function(m){i.syncTasks.set(m.target,m.detail.affectChildren),o.dirtify()},f=function(m){var v=m.target;At.enableSizeAttenuation&&At.styleValueRegistry.updateSizeAttenuation(v,c.getCamera().getZoom())},h=function(m){var v=m.target,y=v.rBushNode;y.aabb&&i.rBush.remove(y.aabb),i.syncTasks.delete(v),At.sceneGraphService.dirtifyToRoot(v),o.dirtify()};o.hooks.init.tap(n.tag,function(){c.addEventListener(wr.MOUNTED,f),c.addEventListener(wr.UNMOUNTED,h),c.addEventListener(wr.ATTR_MODIFIED,u),c.addEventListener(wr.BOUNDS_CHANGED,d)}),o.hooks.destroy.tap(n.tag,function(){c.removeEventListener(wr.MOUNTED,f),c.removeEventListener(wr.UNMOUNTED,h),c.removeEventListener(wr.ATTR_MODIFIED,u),c.removeEventListener(wr.BOUNDS_CHANGED,d),i.syncTasks.clear()});var p=(a=At.globalThis.requestIdleCallback)!==null&&a!==void 0?a:hX.bind(At.globalThis);o.hooks.endFrame.tap(n.tag,function(){i.isFirstTimeRendering?(i.isFirstTimeRendering=!1,i.syncing=!0,p(function(){i.syncRTree(!0),i.isFirstTimeRenderingFinished=!0})):i.syncRTree()})}},{key:"syncNode",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r.isConnected){var a=r.rBushNode;a.aabb&&this.rBush.remove(a.aabb);var o=r.getRenderBounds();if(o){var s=r.renderable;i&&(s.dirtyRenderBounds||(s.dirtyRenderBounds=new Bi),s.dirtyRenderBounds.update(o.center,o.halfExtents));var l=o.getMin(),c=fe(l,2),u=c[0],d=c[1],f=o.getMax(),h=fe(f,2),p=h[0],g=h[1];a.aabb||(a.aabb={}),a.aabb.displayObject=r,a.aabb.minX=u,a.aabb.minY=d,a.aabb.maxX=p,a.aabb.maxY=g}if(a.aabb&&!isNaN(a.aabb.maxX)&&!isNaN(a.aabb.maxX)&&!isNaN(a.aabb.minX)&&!isNaN(a.aabb.minY))return a.aabb}}},{key:"syncRTree",value:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!i&&(this.syncing||this.syncTasks.size===0))){this.syncing=!0;var a=[],o=new Set,s=function(c){if(!o.has(c)&&c.renderable){var u=r.syncNode(c,i);u&&(a.push(u),o.add(c))}};this.syncTasks.forEach(function(l,c){l&&c.forEach(s);for(var u=c;u;)s(u),u=u.parentElement}),this.rBush.load(a),a.length=0,this.syncing=!1}}}])}();fEe.tag="Prepare";var Rc=function(n){return n.READY="ready",n.BEFORE_RENDER="beforerender",n.RERENDER="rerender",n.AFTER_RENDER="afterrender",n.BEFORE_DESTROY="beforedestroy",n.AFTER_DESTROY="afterdestroy",n.RESIZE="resize",n.DIRTY_RECTANGLE="dirtyrectangle",n.RENDERER_CHANGED="rendererchanged",n}({}),hoe=500,Llt=.1,klt=1e3,W3=new so(wr.MOUNTED),q3=new so(wr.UNMOUNTED),_F=new so(Rc.BEFORE_RENDER),poe=new so(Rc.RERENDER),wF=new so(Rc.AFTER_RENDER),Fj=function(n){function e(r){var i;st(this,e),i=dr(this,e),i.Element=qi,i.inited=!1,i.context={};var a=r.container,o=r.canvas,s=r.renderer,l=r.width,c=r.height,u=r.background,d=r.cursor,f=r.supportsMutipleCanvasesInOneContainer,h=r.cleanUpOnDestroy,p=h===void 0?!0:h,g=r.offscreenCanvas,m=r.devicePixelRatio,v=r.requestAnimationFrame,y=r.cancelAnimationFrame,b=r.createImage,x=r.supportsTouchEvents,_=r.supportsPointerEvents,S=r.isTouchEvent,M=r.isMouseEvent,E=r.dblClickSpeed,T=l,P=c,A=m||fX&&window.devicePixelRatio||1;return A=A>=1?Math.ceil(A):1,o&&(T=l||fst(o)||o.width/A,P=c||hst(o)||o.height/A),i.customElements=new Olt,i.devicePixelRatio=A,i.requestAnimationFrame=v??hX.bind(At.globalThis),i.cancelAnimationFrame=y??iEe.bind(At.globalThis),i.supportsTouchEvents=x??"ontouchstart"in At.globalThis,i.supportsPointerEvents=_??!!At.globalThis.PointerEvent,i.isTouchEvent=S??function(N){return i.supportsTouchEvents&&N instanceof At.globalThis.TouchEvent},i.isMouseEvent=M??function(N){return!At.globalThis.MouseEvent||N instanceof At.globalThis.MouseEvent&&(!i.supportsPointerEvents||!(N instanceof At.globalThis.PointerEvent))},g&&(At.offscreenCanvas=g),i.document=new cEe,i.document.defaultView=i,f||lst(a,i,p),i.initRenderingContext(se(se({},r),{},{width:T,height:P,background:u??"transparent",cursor:d??"default",cleanUpOnDestroy:p,devicePixelRatio:A,requestAnimationFrame:i.requestAnimationFrame,cancelAnimationFrame:i.cancelAnimationFrame,supportsTouchEvents:i.supportsTouchEvents,supportsPointerEvents:i.supportsPointerEvents,isTouchEvent:i.isTouchEvent,isMouseEvent:i.isMouseEvent,dblClickSpeed:E??200,createImage:b??function(){return new window.Image}})),i.initDefaultCamera(T,P,s.clipSpaceNearZ),i.initRenderer(s,!0),i}return $n(e,n),lt(e,[{key:"initRenderingContext",value:function(i){this.context.config=i,this.context.renderingContext={root:this.document.documentElement,renderListCurrentFrame:[],unculledEntities:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:"initDefaultCamera",value:function(i,a,o){var s=this,l=new At.CameraContribution;l.clipSpaceNearZ=o,l.setType(bi.EXPLORING,Cj.DEFAULT).setPosition(i/2,a/2,hoe).setFocalPoint(i/2,a/2,0).setOrthographic(i/-2,i/2,a/2,a/-2,Llt,klt),l.canvas=this,l.eventEmitter.on(I2e.UPDATED,function(){s.context.renderingContext.renderReasons.add(hx.CAMERA_CHANGED),At.enableSizeAttenuation&&s.getConfig().renderer.getConfig().enableSizeAttenuation&&s.updateSizeAttenuation()}),this.context.camera=l}},{key:"updateSizeAttenuation",value:function(){var i=this.getCamera().getZoom();this.document.documentElement.forEach(function(a){At.styleValueRegistry.updateSizeAttenuation(a,i)})}},{key:"getConfig",value:function(){return this.context.config}},{key:"getRoot",value:function(){return this.document.documentElement}},{key:"getCamera",value:function(){return this.context.camera}},{key:"getContextService",value:function(){return this.context.contextService}},{key:"getEventService",value:function(){return this.context.eventService}},{key:"getRenderingService",value:function(){return this.context.renderingService}},{key:"getRenderingContext",value:function(){return this.context.renderingContext}},{key:"getStats",value:function(){return this.getRenderingService().getStats()}},{key:"ready",get:function(){var i=this;return this.readyPromise||(this.readyPromise=new Promise(function(a){i.resolveReadyPromise=function(){a(i)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:"destroy",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,a=arguments.length>1?arguments[1]:void 0;mo.clearCache(),a||this.dispatchEvent(new so(Rc.BEFORE_DESTROY)),this.frameId&&this.cancelAnimationFrame(this.frameId);var o=this.getRoot();i&&(this.unmountChildren(o),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),this.context.rBushRoot&&this.context.rBushRoot.clear(),a||this.dispatchEvent(new so(Rc.AFTER_DESTROY));var s=function(c){c.currentTarget=null,c.manager=null,c.target=null,c.relatedNode=null};s(W3),s(q3),s(_F),s(poe),s(wF),s(Sf),s(Lj),s(kj),s(lEe)}},{key:"changeSize",value:function(i,a){this.resize(i,a)}},{key:"resize",value:function(i,a){var o=this.context.config;o.width=i,o.height=a,this.getContextService().resize(i,a);var s=this.context.camera,l=s.getProjectionMode();s.setPosition(i/2,a/2,hoe).setFocalPoint(i/2,a/2,0),l===bu.ORTHOGRAPHIC?s.setOrthographic(i/-2,i/2,a/2,a/-2,s.getNear(),s.getFar()):s.setAspect(i/a),this.dispatchEvent(new so(Rc.RESIZE,{width:i,height:a}))}},{key:"appendChild",value:function(i,a){return this.document.documentElement.appendChild(i,a)}},{key:"insertBefore",value:function(i,a){return this.document.documentElement.insertBefore(i,a)}},{key:"removeChild",value:function(i){return this.document.documentElement.removeChild(i)}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren()}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren()}},{key:"render",value:function(i){var a=this;i&&(_F.detail=i,wF.detail=i),this.dispatchEvent(_F);var o=this.getRenderingService();o.render(this.getConfig(),i,function(){a.dispatchEvent(poe)}),this.dispatchEvent(wF)}},{key:"run",value:function(){var i=this,a=function(s,l){i.render(l),i.frameId=i.requestAnimationFrame(a)};a()}},{key:"initRenderer",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!i)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new uat,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new dEe,new fEe,new uEe([new Dlt])),this.loadRendererContainerModule(i),this.context.contextService=new this.context.ContextService(se(se({},At),this.context)),this.context.renderingService=new Yst(At,this.context),this.context.eventService=new qst(At,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(i,o,!0)):this.context.contextService.initAsync().then(function(){a.initRenderingService(i,o)}).catch(function(s){console.error(s)})}},{key:"initRenderingService",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.context.renderingService.init(function(){a.inited=!0,o?s?a.requestAnimationFrame(function(){a.dispatchEvent(new so(Rc.READY))}):a.dispatchEvent(new so(Rc.READY)):a.dispatchEvent(new so(Rc.RENDERER_CHANGED)),a.readyPromise&&a.resolveReadyPromise(),o||a.getRoot().forEach(function(l){var c=l,u=c.renderable;u&&(u.renderBoundsDirty=!0,u.boundsDirty=!0,u.dirty=!0)}),a.mountChildren(a.getRoot()),i.getConfig().enableAutoRendering&&a.run()})}},{key:"loadRendererContainerModule",value:function(i){var a=this,o=i.getPlugins();o.forEach(function(s){s.context=a.context,s.init(At)})}},{key:"setRenderer",value:function(i){var a=this.getConfig();if(a.renderer!==i){var o=a.renderer;a.renderer=i,this.destroy(!1,!0),ot((o==null?void 0:o.getPlugins())||[]).reverse().forEach(function(s){s.destroy(At)}),this.initRenderer(i)}}},{key:"setCursor",value:function(i){var a=this.getConfig();a.cursor=i,this.getContextService().applyCursorStyle(i)}},{key:"unmountChildren",value:function(i){var a=this;i.childNodes.forEach(function(o){a.unmountChildren(o)}),this.inited&&(i.isMutationObserved?i.dispatchEvent(q3):(q3.target=i,this.dispatchEvent(q3,!0)),i!==this.document.documentElement&&(i.ownerDocument=null),i.isConnected=!1),i.isCustomElement&&i.disconnectedCallback&&i.disconnectedCallback()}},{key:"mountChildren",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:iO(i);this.inited?i.isConnected||(i.ownerDocument=this.document,i.isConnected=!0,o||(i.isMutationObserved?i.dispatchEvent(W3):(W3.target=i,this.dispatchEvent(W3,!0)))):console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",i.nodeName),i.childNodes.forEach(function(s){a.mountChildren(s,o)}),i.isCustomElement&&i.connectedCallback&&i.connectedCallback()}},{key:"mountFragment",value:function(i){this.mountChildren(i,!1)}},{key:"client2Viewport",value:function(i){return this.getEventService().client2Viewport(i)}},{key:"viewport2Client",value:function(i){return this.getEventService().viewport2Client(i)}},{key:"viewport2Canvas",value:function(i){return this.getEventService().viewport2Canvas(i)}},{key:"canvas2Viewport",value:function(i){return this.getEventService().canvas2Viewport(i)}},{key:"getPointByClient",value:function(i,a){return this.client2Viewport({x:i,y:a})}},{key:"getClientByPoint",value:function(i,a){return this.viewport2Client({x:i,y:a})}}])}(sEe);/*!
 * @antv/g-camera-api
 * @description A simple implementation of Camera API.
 * @version 2.0.37
 * @date 4/14/2025, 2:53:44 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Flt=function(n){function e(){var r;st(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=dr(this,e,[].concat(a)),r.landmarks=[],r}return $n(e,n),lt(e,[{key:"rotate",value:function(i,a,o){if(this.relElevation=ux(a),this.relAzimuth=ux(i),this.relRoll=ux(o),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===bi.EXPLORING){var s=nm(Ao(),[1,0,0],wi((this.rotateWorld?1:-1)*this.relElevation)),l=nm(Ao(),[0,1,0],wi((this.rotateWorld?1:-1)*this.relAzimuth)),c=nm(Ao(),[0,0,1],wi(this.relRoll)),u=Em(Ao(),l,s);u=Em(Ao(),u,c);var d=rX($i(),u);cx(this.matrix,this.matrix,[0,0,-this.distance]),Vs(this.matrix,this.matrix,d),cx(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===bi.ORBITING||this.type===bi.EXPLORING?this._getPosition():this.type===bi.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(i,a){var o=sl(i,a,0),s=Vh(this.position);return Sm(s,s,WN(Nr(),this.right,o[0])),Sm(s,s,WN(Nr(),this.up,o[1])),this._setPosition(s),this.triggerUpdate(),this}},{key:"dolly",value:function(i){var a=this.forward,o=Vh(this.position),s=i*this.dollyingStep,l=this.distance+i*this.dollyingStep;return s=Math.max(Math.min(l,this.maxDistance),this.minDistance)-this.distance,o[0]+=s*a[0],o[1]+=s*a[1],o[2]+=s*a[2],this._setPosition(o),this.type===bi.ORBITING||this.type===bi.EXPLORING?this._getDistance():this.type===bi.TRACKING&&Sm(this.focalPoint,o,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(i){var a,o,s,l,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=c.position,d=u===void 0?this.position:u,f=c.focalPoint,h=f===void 0?this.focalPoint:f,p=c.roll,g=c.zoom,m=new At.CameraContribution;m.setType(this.type,void 0),m.setPosition(d[0],(a=d[1])!==null&&a!==void 0?a:this.position[1],(o=d[2])!==null&&o!==void 0?o:this.position[2]),m.setFocalPoint(h[0],(s=h[1])!==null&&s!==void 0?s:this.focalPoint[1],(l=h[2])!==null&&l!==void 0?l:this.focalPoint[2]),m.setRoll(p??this.roll),m.setZoom(g??this.zoom);var v={name:i,matrix:KSe(m.getWorldTransform()),right:Vh(m.right),up:Vh(m.up),forward:Vh(m.forward),position:Vh(m.getPosition()),focalPoint:Vh(m.getFocalPoint()),distanceVector:Vh(m.getDistanceVector()),distance:m.getDistance(),dollyingStep:m.getDollyingStep(),azimuth:m.getAzimuth(),elevation:m.getElevation(),roll:m.getRoll(),relAzimuth:m.relAzimuth,relElevation:m.relElevation,relRoll:m.relRoll,zoom:m.getZoom()};return this.landmarks.push(v),v}},{key:"gotoLandmark",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Kr(i)?this.landmarks.find(function(N){return N.name===i}):i;if(s){var l=on(o)?{duration:o}:o,c=l.easing,u=c===void 0?"linear":c,d=l.duration,f=d===void 0?100:d,h=l.easingFunction,p=h===void 0?void 0:h,g=l.onfinish,m=g===void 0?void 0:g,v=l.onframe,y=v===void 0?void 0:v,b=.01;this.cancelLandmarkAnimation();var x=s.position,_=s.focalPoint,S=s.zoom,M=s.roll,E=p||At.EasingFunction(u),T,P=function(){a.setFocalPoint(_),a.setPosition(x),a.setRoll(M),a.setZoom(S),a.computeMatrix(),a.triggerUpdate(),m==null||m()};if(f===0)return P();var A=function(O){T===void 0&&(T=O);var I=O-T;if(I>=f){P();return}var D=E(I/f),k=Nr(),$=Nr(),B=1,F=0;pj(k,a.focalPoint,_,D),pj($,a.position,x,D),F=a.roll*(1-D)+M*D,B=a.zoom*(1-D)+S*D,a.setFocalPoint(k),a.setPosition($),a.setRoll(F),a.setZoom(B);var G=Eae(k,_)+Eae($,x);if(G<=b&&S===void 0&&M===void 0)return P();a.computeMatrix(),a.triggerUpdate(),I<f&&(y==null||y(D),a.landmarkAnimationID=a.canvas.requestAnimationFrame(A))};this.canvas.requestAnimationFrame(A)}}}])}(D2e);At.CameraContribution=Flt;/*!
 * @antv/g-web-animations-api
 * @description A simple implementation of Web Animations API.
 * @version 2.1.23
 * @date 4/14/2025, 2:55:29 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var SF=function(n){function e(r,i,a,o){var s;return st(this,e),s=dr(this,e,[r]),s.currentTime=a,s.timelineTime=o,s.target=i,s.type="finish",s.bubbles=!1,s.currentTarget=i,s.defaultPrevented=!1,s.eventPhase=s.AT_TARGET,s.timeStamp=Date.now(),s.currentTime=a,s.timelineTime=o,s}return $n(e,n),lt(e)}(Y4),$lt=0,Blt=function(){function n(e,r){var i;st(this,n),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=e,e.animation=this,this.timeline=r,this.id="".concat($lt++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((i=this.effect)===null||i===void 0?void 0:i.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return lt(n,[{key:"pending",get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var r=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(i,a){r.resolveReadyPromise=function(){i(r)},r.rejectReadyPromise=function(){a(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var r=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(i,a){r.resolveFinishedPromise=function(){i(r)},r.rejectFinishedPromise=function(){a(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(r){if(r=Number(r),!isNaN(r)){if(this.timeline.restart(),!this._paused&&this._startTime!==null){var i;this._startTime=Number((i=this.timeline)===null||i===void 0?void 0:i.currentTime)-r/this.playbackRate}this.currentTimePending=!1,this._currentTime!==r&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(r,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(r){if(r!==null){if(this.updatePromises(),r=Number(r),isNaN(r)||this._paused||this._idle)return;this._startTime=r,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(r){if(r!==this._playbackRate){this.updatePromises();var i=this.currentTime;this._playbackRate=r,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),i!==null&&(this.currentTime=i),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||this.playState==="running"||!this._finishedFlag}},{key:"updatePromises",value:function(){var r=this.oldPlayState,i=this.pending?"pending":this.playState;return this.readyPromise&&i!==r&&(i==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):r==="pending"?this.resolveReadyPromise():i==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&i!==r&&(i==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):i==="finished"?this.resolveFinishedPromise():r==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=i,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var r=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var i=new SF(null,this,this.currentTime,null);setTimeout(function(){r.oncancel(i)})}}},{key:"reverse",value:function(){this.updatePromises();var r=this.currentTime;this.playbackRate*=-1,this.play(),r!==null&&(this.currentTime=r),this.updatePromises()}},{key:"updatePlaybackRate",value:function(r){this.playbackRate=r}},{key:"targetAnimations",value:function(){var r,i=(r=this.effect)===null||r===void 0?void 0:r.target;return i.getAnimations()}},{key:"markTarget",value:function(){var r=this.targetAnimations();r.indexOf(this)===-1&&r.push(this)}},{key:"unmarkTarget",value:function(){var r=this.targetAnimations(),i=r.indexOf(this);i!==-1&&r.splice(i,1)}},{key:"tick",value:function(r,i){!this._idle&&!this._paused&&(this._startTime===null?i&&(this.startTime=r-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((r-this._startTime)*this.playbackRate)),i&&(this.currentTimePending=!1,this.fireEvents(r))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")}},{key:"persist",value:function(){throw new Error(_i)}},{key:"addEventListener",value:function(r,i,a){throw new Error(_i)}},{key:"removeEventListener",value:function(r,i,a){throw new Error(_i)}},{key:"dispatchEvent",value:function(r){throw new Error(_i)}},{key:"commitStyles",value:function(){throw new Error(_i)}},{key:"ensureAlive",value:function(){if(this.playbackRate<0&&this.currentTime===0){var r;this._inEffect=!!((r=this.effect)!==null&&r!==void 0&&r.update(-1))}else{var i;this._inEffect=!!((i=this.effect)!==null&&i!==void 0&&i.update(this.currentTime))}!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(r,i){r!==this._currentTime&&(this._currentTime=r,this._isFinished&&!i&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(r){var i=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var a=new SF(null,this,this.currentTime,r);setTimeout(function(){i.onfinish&&i.onfinish(a)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var o=new SF(null,this,this.currentTime,r);this.onframe(o)}this._finishedFlag=!1}}}])}(),zlt=4,Ult=.001,Vlt=1e-7,Glt=10,i2=11,Y3=1/(i2-1),jlt=typeof Float32Array=="function",hEe=function(e,r){return 1-3*r+3*e},pEe=function(e,r){return 3*r-6*e},gEe=function(e){return 3*e},oO=function(e,r,i){return((hEe(r,i)*e+pEe(r,i))*e+gEe(r))*e},mEe=function(e,r,i){return 3*hEe(r,i)*e*e+2*pEe(r,i)*e+gEe(r)},Hlt=function(e,r,i,a,o){var s,l,c=0;do l=r+(i-r)/2,s=oO(l,a,o)-e,s>0?i=l:r=l;while(Math.abs(s)>Vlt&&++c<Glt);return l},Wlt=function(e,r,i,a){for(var o=0;o<zlt;++o){var s=mEe(r,i,a);if(s===0)return r;var l=oO(r,i,a)-e;r-=l/s}return r},mX=function(e,r,i,a){if(!(e>=0&&e<=1&&i>=0&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===r&&i===a)return function(c){return c};for(var o=jlt?new Float32Array(i2):new Array(i2),s=0;s<i2;++s)o[s]=oO(s*Y3,e,i);var l=function(u){for(var d=0,f=1,h=i2-1;f!==h&&o[f]<=u;++f)d+=Y3;--f;var p=(u-o[f])/(o[f+1]-o[f]),g=d+p*Y3,m=mEe(g,e,i);return m>=Ult?Wlt(u,g,e,i):m===0?g:Hlt(u,d,d+Y3,e,i)};return function(c){return c===0||c===1?c:oO(l(c),r,a)}},qlt=function(e){return e=e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())}),e.charAt(0)==="-"?e.substring(1):e},X3=function(e){return Math.pow(e,2)},K3=function(e){return Math.pow(e,3)},Z3=function(e){return Math.pow(e,4)},Q3=function(e){return Math.pow(e,5)},J3=function(e){return Math.pow(e,6)},eA=function(e){return 1-Math.cos(e*Math.PI/2)},tA=function(e){return 1-Math.sqrt(1-e*e)},nA=function(e){return e*e*(3*e-2)},rA=function(e){for(var r,i=4;e<((r=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((r*3-2)/22-e,2)},iA=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=fe(r,2),a=i[0],o=a===void 0?1:a,s=i[1],l=s===void 0?.5:s,c=Ta(Number(o),1,10),u=Ta(Number(l),.1,2);return e===0||e===1?e:-c*Math.pow(2,10*(e-1))*Math.sin((e-1-u/(Math.PI*2)*Math.asin(1/c))*(Math.PI*2)/u)},fS=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=fe(r,4),o=a[0],s=o===void 0?1:o,l=a[1],c=l===void 0?100:l,u=a[2],d=u===void 0?10:u,f=a[3],h=f===void 0?0:f;s=Ta(s,.1,1e3),c=Ta(c,.1,1e3),d=Ta(d,.1,1e3),h=Ta(h,.1,1e3);var p=Math.sqrt(c/s),g=d/(2*Math.sqrt(c*s)),m=g<1?p*Math.sqrt(1-g*g):0,v=1,y=g<1?(g*p+-h)/m:-h+p,b=i?i*e/1e3:e;return g<1?b=Math.exp(-b*g*p)*(v*Math.cos(m*b)+y*Math.sin(m*b)):b=(v+y*b)*Math.exp(-b*p),e===0||e===1?e:1-b},EF=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=r,a=fe(i,2),o=a[0],s=o===void 0?10:o,l=a[1],c=l==="start"?Math.ceil:Math.floor;return c(Ta(e,0,1)*s)/s},goe=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=fe(r,4),a=i[0],o=i[1],s=i[2],l=i[3];return mX(a,o,s,l)(e)},aA=mX(.42,0,1,1),pu=function(e){return function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;return 1-e(1-r,i,a)}},gu=function(e){return function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;return r<.5?e(r*2,i,a)/2:1-e(r*-2+2,i,a)/2}},mu=function(e){return function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0;return r<.5?(1-e(1-r*2,i,a))/2:(e(r*2-1,i,a)+1)/2}},moe={steps:EF,"step-start":function(e){return EF(e,[1,"start"])},"step-end":function(e){return EF(e,[1,"end"])},linear:function(e){return e},"cubic-bezier":goe,ease:function(e){return goe(e,[.25,.1,.25,1])},in:aA,out:pu(aA),"in-out":gu(aA),"out-in":mu(aA),"in-quad":X3,"out-quad":pu(X3),"in-out-quad":gu(X3),"out-in-quad":mu(X3),"in-cubic":K3,"out-cubic":pu(K3),"in-out-cubic":gu(K3),"out-in-cubic":mu(K3),"in-quart":Z3,"out-quart":pu(Z3),"in-out-quart":gu(Z3),"out-in-quart":mu(Z3),"in-quint":Q3,"out-quint":pu(Q3),"in-out-quint":gu(Q3),"out-in-quint":mu(Q3),"in-expo":J3,"out-expo":pu(J3),"in-out-expo":gu(J3),"out-in-expo":mu(J3),"in-sine":eA,"out-sine":pu(eA),"in-out-sine":gu(eA),"out-in-sine":mu(eA),"in-circ":tA,"out-circ":pu(tA),"in-out-circ":gu(tA),"out-in-circ":mu(tA),"in-back":nA,"out-back":pu(nA),"in-out-back":gu(nA),"out-in-back":mu(nA),"in-bounce":rA,"out-bounce":pu(rA),"in-out-bounce":gu(rA),"out-in-bounce":mu(rA),"in-elastic":iA,"out-elastic":pu(iA),"in-out-elastic":gu(iA),"out-in-elastic":mu(iA),spring:fS,"spring-in":fS,"spring-out":pu(fS),"spring-in-out":gu(fS),"spring-out-in":mu(fS)},Ylt=function(e){return qlt(e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},Xlt=function(e){return moe[Ylt(e)]||moe.linear},Klt=function(e){return e},Zlt=1,Qlt=.5,voe=0;function yoe(n,e){return function(r){if(r>=1)return 1;var i=1/n;return r+=e*i,r-r%i}}var oA="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",Jlt=new RegExp("cubic-bezier\\(".concat(oA,",").concat(oA,",").concat(oA,",").concat(oA,"\\)")),ect=/steps\(\s*(\d+)\s*\)/,tct=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function vX(n){var e=Jlt.exec(n);if(e)return mX.apply(void 0,ot(e.slice(1).map(Number)));var r=ect.exec(n);if(r)return yoe(Number(r[1]),voe);var i=tct.exec(n);return i?yoe(Number(i[1]),{start:Zlt,middle:Qlt,end:voe}[i[2]]):Xlt(n)}function nct(n){return Math.abs(rct(n)/(n.playbackRate||1))}function rct(n){var e;return n.duration===0||n.iterations===0?0:(n.duration==="auto"?0:Number(n.duration))*((e=n.iterations)!==null&&e!==void 0?e:1)}var vEe=0,yX=1,K4=2,yEe=3;function ict(n,e,r){if(e===null)return vEe;var i=r.endTime;return e<Math.min(r.delay,i)?yX:e>=Math.min(r.delay+n+r.endDelay,i)?K4:yEe}function act(n,e,r,i,a){switch(i){case yX:return e==="backwards"||e==="both"?0:null;case yEe:return r-a;case K4:return e==="forwards"||e==="both"?n:null;case vEe:return null}}function oct(n,e,r,i,a){var o=a;return n===0?e!==yX&&(o+=r):o+=i/n,o}function sct(n,e,r,i,a,o){var s=n===1/0?e%1:n%1;return s===0&&r===K4&&i!==0&&(a!==0||o===0)&&(s=1),s}function lct(n,e,r,i){return n===K4&&e===1/0?1/0:r===1?Math.floor(i)-1:Math.floor(i)}function cct(n,e,r){var i=n;if(n!=="normal"&&n!=="reverse"){var a=e;n==="alternate-reverse"&&(a+=1),i="normal",a!==1/0&&a%2!==0&&(i="reverse")}return i==="normal"?r:1-r}function uct(n,e,r){var i=ict(n,e,r),a=act(n,r.fill,e,i,r.delay);if(a===null)return null;var o=r.duration==="auto"?0:r.duration,s=oct(o,i,r.iterations,a,r.iterationStart),l=sct(s,r.iterationStart,i,r.iterations,a,o),c=lct(i,r.iterations,l,s),u=cct(r.direction,c,l);return r.currentIteration=c,r.progress=u,r.easingFunction(u)}function dct(n,e,r){var i=fct(n,e),a=hct(i,r);return function(o,s){if(s!==null)a.filter(function(c){return s>=c.applyFrom&&s<c.applyTo}).forEach(function(c){var u=s-c.startOffset,d=c.endOffset-c.startOffset,f=d===0?0:u/d;o.setAttribute(c.property,c.interpolation(f),!1,!1)});else for(var l in i)bEe(l)&&o.setAttribute(l,null)}}function bEe(n){return n!=="offset"&&n!=="easing"&&n!=="composite"&&n!=="computedOffset"}function fct(n,e){for(var r={},i=0;i<n.length;i++)for(var a in n[i])if(bEe(a)){var o={offset:n[i].offset,computedOffset:n[i].computedOffset,easing:n[i].easing,easingFunction:vX(n[i].easing)||e.easingFunction,value:n[i][a]};r[a]=r[a]||[],r[a].push(o)}return r}function hct(n,e){var r=[];for(var i in n)for(var a=n[i],o=0;o<a.length-1;o++){var s=o,l=o+1,c=a[s].computedOffset,u=a[l].computedOffset,d=c,f=u;o===0&&(d=-1/0,u===0&&(l=s)),o===a.length-2&&(f=1/0,c===1&&(s=l)),r.push({applyFrom:d,applyTo:f,startOffset:a[s].computedOffset,endOffset:a[l].computedOffset,easingFunction:a[s].easingFunction,property:i,interpolation:pct(i,a[s].value,a[l].value,e)})}return r.sort(function(h,p){return h.startOffset-p.startOffset}),r}var boe=function(e,r,i){return function(a){var o=xEe(e,r,a);return on(o)?o:i(o)}};function pct(n,e,r,i){var a=Z2e[n];if(a&&a.syntax&&a.int){var o=At.styleValueRegistry.getPropertySyntax(a.syntax);if(o){var s=o.parser,l=s?s(e,i):e,c=s?s(r,i):r,u=o.mixer(l,c,i);if(u){var d=boe.apply(void 0,ot(u));return function(f){return f===0?e:f===1?r:d(f)}}}}return boe(!1,!0,function(f){return f?r:e})}function xEe(n,e,r){if(typeof n=="number"&&typeof e=="number")return n*(1-r)+e*r;if(typeof n=="boolean"&&typeof e=="boolean"||typeof n=="string"&&typeof e=="string")return r<.5?n:e;if(Array.isArray(n)&&Array.isArray(e)){for(var i=n.length,a=e.length,o=Math.max(i,a),s=[],l=0;l<o;l++)s.push(xEe(n[l<i?l:i-1],e[l<a?l:a-1],r));return s}throw new Error("Mismatched interpolation arguments ".concat(n,":").concat(e))}var gct=function(){function n(){st(this,n),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=Klt,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return lt(n,[{key:"easing",get:function(){return this._easing},set:function(r){this.easingFunction=vX(r),this._easing=r}}])}();function mct(n){var e=[];for(var r in n)if(!(r in["easing","offset","composite"])){var i=n[r];Array.isArray(i)||(i=[i]);for(var a=i.length,o=0;o<a;o++){if(!e[o]){var s={};"offset"in n&&(s.offset=Number(n.offset)),"easing"in n&&(s.easing=n.easing),"composite"in n&&(s.composite=n.composite),e[o]=s}i[o]!==void 0&&i[o]!==null&&(e[o][r]=i[o])}}return e.sort(function(l,c){return(l.computedOffset||0)-(c.computedOffset||0)}),e}function xoe(n,e){if(n===null)return[];Array.isArray(n)||(n=mct(n));for(var r=n.map(function(c){var u={};e!=null&&e.composite&&(u.composite="auto");for(var d in c){var f=c[d];if(d==="offset"){if(f!==null){if(f=Number(f),!isFinite(f))throw new Error("Keyframe offsets must be numbers.");if(f<0||f>1)throw new Error("Keyframe offsets must be between 0 and 1.");u.computedOffset=f}}else if(d==="composite"&&["replace","add","accumulate","auto"].indexOf(f)===-1)throw new Error("".concat(f," compositing is not supported"));u[d]=f}return u.offset===void 0&&(u.offset=null),u.easing===void 0&&(u.easing=(e==null?void 0:e.easing)||"linear"),u.composite===void 0&&(u.composite="auto"),u}),i=!0,a=-1/0,o=0;o<r.length;o++){var s=r[o].offset;if(Nn(s))i=!1;else{if(s<a)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");a=s}}r=r.filter(function(c){return Number(c.offset)>=0&&Number(c.offset)<=1});function l(){var c,u=r,d=u.length;if(r[d-1].computedOffset=Number((c=r[d-1].offset)!==null&&c!==void 0?c:1),d>1){var f;r[0].computedOffset=Number((f=r[0].offset)!==null&&f!==void 0?f:0)}for(var h=0,p=Number(r[0].computedOffset),g=1;g<d;g++){var m=r[g].computedOffset;if(!Nn(m)&&!Nn(p)){for(var v=1;v<g-h;v++)r[h+v].computedOffset=p+(Number(m)-p)*v/(g-h);h=g,p=Number(m)}}}return i||l(),r}var vct="backwards|forwards|both|none".split("|"),yct="reverse|alternate|alternate-reverse".split("|");function bct(n,e){var r=new gct;return typeof n=="number"&&!isNaN(n)?r.duration=n:n!==void 0&&Object.keys(n).forEach(function(i){if(n[i]!==void 0&&n[i]!==null&&n[i]!=="auto"){if((typeof r[i]=="number"||i==="duration")&&(typeof n[i]!="number"||isNaN(n[i]))||i==="fill"&&vct.indexOf(n[i])===-1||i==="direction"&&yct.indexOf(n[i])===-1)return;r[i]=n[i]}}),r}function xct(n,e){return n=_ct(n??{duration:"auto"}),bct(n)}function _ct(n){return typeof n=="number"&&(isNaN(n)?n={duration:"auto"}:n={duration:n}),n}var wct=function(){function n(e,r,i){var a=this;st(this,n),this.composite="replace",this.iterationComposite="replace",this.target=e,this.timing=xct(i),this.timing.effect=this,this.timing.activeDuration=nct(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=xoe(r,this.timing),this.interpolations=dct(this.normalizedKeyframes,this.timing,this.target);var o=At.globalThis.Proxy;this.computedTiming=o?new o(this.timing,{get:function(l,c){return c==="duration"?l.duration==="auto"?0:l.duration:c==="fill"?l.fill==="auto"?"none":l.fill:c==="localTime"?a.animation&&a.animation.currentTime||null:c==="currentIteration"?!a.animation||a.animation.playState!=="running"?null:l.currentIteration||0:c==="progress"?!a.animation||a.animation.playState!=="running"?null:l.progress||0:l[c]},set:function(){return!0}}):this.timing}return lt(n,[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(r){return r===null?!1:(this.timeFraction=uct(this.timing.activeDuration,r,this.timing),this.timeFraction!==null)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(r){this.normalizedKeyframes=xoe(r)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(r){var i=this;Object.keys(r||{}).forEach(function(a){i.timing[a]=r[a]})}}])}();function _oe(n,e){return Number(n.id)-Number(e.id)}var Sct=function(){function n(e){var r=this;st(this,n),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(i){r.currentTime=i,r.discardAnimations(),r.animations.length===0?r.timelineTicking=!1:r.requestAnimationFrame(r.webAnimationsNextTick)},this.processRafCallbacks=function(i){var a=r.rafCallbacks;r.rafCallbacks=[],i<Number(r.currentTime)&&(i=Number(r.currentTime)),r.animations.sort(_oe),r.animations=r.tick(i,!0,r.animations)[0],a.forEach(function(o){o[1](i)}),r.applyPendingEffects()},this.document=e}return lt(n,[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(r,i,a){var o=new wct(r,i,a),s=new Blt(o,this);return this.animations.push(s),this.restartWebAnimationsNextTick(),s.updatePromises(),s.play(),s.updatePromises(),s}},{key:"applyDirtiedAnimation",value:function(r){var i=this;if(!this.inTick){r.markTarget();var a=r.targetAnimations();a.sort(_oe);var o=this.tick(Number(this.currentTime),!1,a.slice())[1];o.forEach(function(s){var l=i.animations.indexOf(s);l!==-1&&i.animations.splice(l,1)}),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach(function(r){r==null||r.applyInterpolations()}),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(r){return r.updatePromises()})}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(r){return r.playState!=="finished"&&r.playState!=="idle"})}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(r){var i=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([i,r]),i}},{key:"requestAnimationFrame",value:function(r){var i=this;return this.rAF(function(a){i.updateAnimationsPromises(),r(a),i.updateAnimationsPromises()})}},{key:"tick",value:function(r,i,a){var o=this,s,l;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=r,this.ticking=!1;var c=[],u=[],d=[],f=[];return a.forEach(function(h){h.tick(r,i),h._inEffect?(u.push(h.effect),h.markTarget()):(c.push(h.effect),h.unmarkTarget()),h._needsTick&&(o.ticking=!0);var p=h._inEffect||h._needsTick;h._inTimeline=p,p?d.push(h):f.push(h)}),(s=this.pendingEffects).push.apply(s,c),(l=this.pendingEffects).push.apply(l,u),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[d,f]}}])}();At.EasingFunction=vX;At.AnimationTimeline=Sct;const Ect={duration:500},Cct={duration:1e3,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",iterations:1,fill:"both"};var Qi;(function(n){n.NodeAdded="NodeAdded",n.NodeUpdated="NodeUpdated",n.NodeRemoved="NodeRemoved",n.EdgeAdded="EdgeAdded",n.EdgeUpdated="EdgeUpdated",n.EdgeRemoved="EdgeRemoved",n.ComboAdded="ComboAdded",n.ComboUpdated="ComboUpdated",n.ComboRemoved="ComboRemoved"})(Qi||(Qi={}));var kl;(function(n){n.DRAW="draw",n.COLLAPSE="collapse",n.EXPAND="expand",n.TRANSFORM="transform"})(kl||(kl={}));var Xd;(function(n){n.CLICK="canvas:click",n.DBLCLICK="canvas:dblclick",n.POINTER_OVER="canvas:pointerover",n.POINTER_LEAVE="canvas:pointerleave",n.POINTER_ENTER="canvas:pointerenter",n.POINTER_MOVE="canvas:pointermove",n.POINTER_OUT="canvas:pointerout",n.POINTER_DOWN="canvas:pointerdown",n.POINTER_UP="canvas:pointerup",n.CONTEXT_MENU="canvas:contextmenu",n.DRAG_START="canvas:dragstart",n.DRAG="canvas:drag",n.DRAG_END="canvas:dragend",n.DRAG_ENTER="canvas:dragenter",n.DRAG_OVER="canvas:dragover",n.DRAG_LEAVE="canvas:dragleave",n.DROP="canvas:drop",n.WHEEL="canvas:wheel"})(Xd||(Xd={}));var N0;(function(n){n.CLICK="combo:click",n.DBLCLICK="combo:dblclick",n.POINTER_OVER="combo:pointerover",n.POINTER_LEAVE="combo:pointerleave",n.POINTER_ENTER="combo:pointerenter",n.POINTER_MOVE="combo:pointermove",n.POINTER_OUT="combo:pointerout",n.POINTER_DOWN="combo:pointerdown",n.POINTER_UP="combo:pointerup",n.CONTEXT_MENU="combo:contextmenu",n.DRAG_START="combo:dragstart",n.DRAG="combo:drag",n.DRAG_END="combo:dragend",n.DRAG_ENTER="combo:dragenter",n.DRAG_OVER="combo:dragover",n.DRAG_LEAVE="combo:dragleave",n.DROP="combo:drop"})(N0||(N0={}));var it;(function(n){n.CLICK="click",n.DBLCLICK="dblclick",n.POINTER_OVER="pointerover",n.POINTER_LEAVE="pointerleave",n.POINTER_ENTER="pointerenter",n.POINTER_MOVE="pointermove",n.POINTER_OUT="pointerout",n.POINTER_DOWN="pointerdown",n.POINTER_UP="pointerup",n.CONTEXT_MENU="contextmenu",n.DRAG_START="dragstart",n.DRAG="drag",n.DRAG_END="dragend",n.DRAG_ENTER="dragenter",n.DRAG_OVER="dragover",n.DRAG_LEAVE="dragleave",n.DROP="drop",n.KEY_DOWN="keydown",n.KEY_UP="keyup",n.WHEEL="wheel",n.PINCH="pinch"})(it||(it={}));var zb;(function(n){n.KEY_DOWN="keydown",n.KEY_UP="keyup"})(zb||(zb={}));var sO;(function(n){n.CLICK="edge:click",n.DBLCLICK="edge:dblclick",n.POINTER_OVER="edge:pointerover",n.POINTER_LEAVE="edge:pointerleave",n.POINTER_ENTER="edge:pointerenter",n.POINTER_MOVE="edge:pointermove",n.POINTER_OUT="edge:pointerout",n.POINTER_DOWN="edge:pointerdown",n.POINTER_UP="edge:pointerup",n.CONTEXT_MENU="edge:contextmenu",n.DRAG_ENTER="edge:dragenter",n.DRAG_OVER="edge:dragover",n.DRAG_LEAVE="edge:dragleave",n.DROP="edge:drop"})(sO||(sO={}));var Ut;(function(n){n.BEFORE_CANVAS_INIT="beforecanvasinit",n.AFTER_CANVAS_INIT="aftercanvasinit",n.BEFORE_SIZE_CHANGE="beforesizechange",n.AFTER_SIZE_CHANGE="aftersizechange",n.BEFORE_ELEMENT_CREATE="beforeelementcreate",n.AFTER_ELEMENT_CREATE="afterelementcreate",n.BEFORE_ELEMENT_UPDATE="beforeelementupdate",n.AFTER_ELEMENT_UPDATE="afterelementupdate",n.BEFORE_ELEMENT_DESTROY="beforeelementdestroy",n.AFTER_ELEMENT_DESTROY="afterelementdestroy",n.BEFORE_ELEMENT_TRANSLATE="beforeelementtranslate",n.AFTER_ELEMENT_TRANSLATE="afterelementtranslate",n.BEFORE_DRAW="beforedraw",n.AFTER_DRAW="afterdraw",n.BEFORE_RENDER="beforerender",n.AFTER_RENDER="afterrender",n.BEFORE_ANIMATE="beforeanimate",n.AFTER_ANIMATE="afteranimate",n.BEFORE_LAYOUT="beforelayout",n.AFTER_LAYOUT="afterlayout",n.BEFORE_STAGE_LAYOUT="beforestagelayout",n.AFTER_STAGE_LAYOUT="afterstagelayout",n.BEFORE_TRANSFORM="beforetransform",n.AFTER_TRANSFORM="aftertransform",n.BATCH_START="batchstart",n.BATCH_END="batchend",n.BEFORE_DESTROY="beforedestroy",n.AFTER_DESTROY="afterdestroy",n.BEFORE_RENDERER_CHANGE="beforerendererchange",n.AFTER_RENDERER_CHANGE="afterrendererchange"})(Ut||(Ut={}));var Rd;(function(n){n.UNDO="undo",n.REDO="redo",n.CANCEL="cancel",n.ADD="add",n.CLEAR="clear",n.CHANGE="change"})(Rd||(Rd={}));var Ru;(function(n){n.CLICK="node:click",n.DBLCLICK="node:dblclick",n.POINTER_OVER="node:pointerover",n.POINTER_LEAVE="node:pointerleave",n.POINTER_ENTER="node:pointerenter",n.POINTER_MOVE="node:pointermove",n.POINTER_OUT="node:pointerout",n.POINTER_DOWN="node:pointerdown",n.POINTER_UP="node:pointerup",n.CONTEXT_MENU="node:contextmenu",n.DRAG_START="node:dragstart",n.DRAG="node:drag",n.DRAG_END="node:dragend",n.DRAG_ENTER="node:dragenter",n.DRAG_OVER="node:dragover",n.DRAG_LEAVE="node:dragleave",n.DROP="node:drop"})(Ru||(Ru={}));const Ni="combo",Pc="tree";var jx;(function(n){n.NODE="node",n.EDGE="edge",n.COMBO="combo",n.THEME="theme",n.PALETTE="palette",n.LAYOUT="layout",n.BEHAVIOR="behavior",n.PLUGIN="plugin",n.ANIMATION="animation",n.TRANSFORM="transform",n.SHAPE="shape"})(jx||(jx={}));const $j={animation:{},behavior:{},combo:{},edge:{},layout:{},node:{},palette:{},theme:{},plugin:{},transform:{},shape:{}};function Dp(n,e){var r;const i=(r=$j[n])===null||r===void 0?void 0:r[e];if(i)return i}const Mct="5.0.45",Tct="G6";function up(n){return`[${Tct} v${Mct}] ${n}`}const gh={mute:!1,debug:n=>{console.debug(up(n))},info:n=>{console.info(up(n))},warn:n=>{console.warn(up(n))},error:n=>{console.error(up(n))}};function _Ee(n){const{theme:e}=n;if(!e)return{};const r=Dp(jx.THEME,e);return r||(gh.warn(`The theme of ${e} is not registered.`),{})}function bX(n,e){if(Array.isArray(n)&&n.length===0)return null;const r=Array.isArray(n)?n[0]:n,i=Array.isArray(n)?n.slice(1):e||[];return new Proxy(r,{get(a,o){return typeof a[o]=="function"&&!["onframe","onfinish"].includes(o)?(...s)=>{a[o](...s),i.forEach(l=>{var c;return(c=l[o])===null||c===void 0?void 0:c.call(l,...s)})}:o==="finished"?Promise.all([r.finished,...i.map(s=>s.finished)]):Reflect.get(a,o)},set(a,o,s){return["onframe","onfinish"].includes(o)||i.forEach(l=>{l[o]=s}),Reflect.set(a,o,s)}})}function Bj(n){const e=n.reduce((i,a)=>(Object.entries(a).forEach(([o,s])=>{i[o]===void 0?i[o]=[s]:i[o].push(s)}),i),{});Object.entries(e).forEach(([i,a])=>{(a.length!==n.length||a.some(o=>Nn(o))||a.every(o=>!["sourceNode","targetNode","childrenNode"].includes(i)&&Ra(o,a[0])))&&delete e[i]});const r=Object.entries(e).reduce((i,[a,o])=>(o.forEach((s,l)=>{i[l]?i[l][a]=s:i[l]={[a]:s}}),i),[]);return n.length!==0&&r.length===0&&r.push({_:0},{_:0}),r}function eC(n){switch(n){case"opacity":return 1;case"x":case"y":case"z":case"zIndex":return 0;case"visibility":return"visible";case"collapsed":return!1;case"states":return[];default:return}}function wEe(n,e){const{animation:r}=n;if(r===!1||e===!1)return!1;const i=Object.assign({},Ect);return Xa(r)&&Object.assign(i,r),Xa(e)&&Object.assign(i,e),i}function Act(n){if(typeof n=="string"){const e=Dp(jx.ANIMATION,n);return e||(gh.warn(`The animation of ${n} is not registered.`),[])}return n}function Rct(n,e,r,i){var a,o;const{animation:s}=n;if(s===!1||i===!1)return[];const l=(a=n==null?void 0:n[e])===null||a===void 0?void 0:a.animation;if(l===!1)return[];const c=l==null?void 0:l[r];if(c===!1)return[];const u=(o=_Ee(n)[e])===null||o===void 0?void 0:o.animation,d=(h=[])=>Act(h).map(p=>Object.assign(Object.assign(Object.assign(Object.assign({},Cct),Xa(s)&&s),p),Xa(i)&&i));if(c)return d(c);if(!u)return[];const f=u[r];return f===!1?[]:d(f)}function SEe(n,e,r,i=[]){if(!i&&n===0&&e===0&&r===0)return null;if(Array.isArray(i)){let o=-1;const s=[];for(let l=0;l<i.length;l++){const c=i[l];if(c[0]==="translate"){if(c[1]===n&&c[2]===e)return null;o=l,s.push(["translate",n,e])}else if(c[0]==="translate3d"){if(c[1]===n&&c[2]===e&&c[3]===r)return null;o=l,s.push(["translate3d",n,e,r??0])}else s.push(c)}return o===-1&&s.splice(0,0,on(r)?["translate3d",n,e,r??0]:["translate",n,e]),s.length===0?null:s}const a=i?i.replace(/translate(3d)?\([^)]*\)/g,""):"";return r===0?`translate(${n}, ${e})${a}`:`translate3d(${n}, ${e}, ${r})${a}`}var Pct=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const Nct=(n,e,r)=>{if(!r.length)return null;const[i,a]=e,o=u=>{var d;if(u){const f=n.getShape(u);if(!f)return null;const h=`get${KN(u)}Style`,p=((d=n==null?void 0:n[h])===null||d===void 0?void 0:d.bind(n))||(v=>v),g=(p==null?void 0:p(i))||{},m=(p==null?void 0:p(a))||{};return{shape:f,fromStyle:g,toStyle:m}}else return{shape:n,fromStyle:i,toStyle:a}};let s;const l=r.map(u=>{var{fields:d,shape:f,states:h}=u,p=Pct(u,["fields","shape","states"]);const g=o(f);if(!g)return null;const{shape:m,fromStyle:v,toStyle:y}=g,b=[{},{}];if(d.forEach(_=>{var S,M;Object.assign(b[0],{[_]:(S=v[_])!==null&&S!==void 0?S:eC(_)}),Object.assign(b[1],{[_]:(M=y[_])!==null&&M!==void 0?M:eC(_)})}),b.some(_=>Object.keys(_).some(S=>["x","y","z"].includes(S)))){const{x:_=0,y:S=0,z:M,transform:E=""}=m.attributes||{};b.forEach(T=>{var P,A,N;T.transform=SEe((P=T.x)!==null&&P!==void 0?P:_,(A=T.y)!==null&&A!==void 0?A:S,(N=T.z)!==null&&N!==void 0?N:M,E)})}const x=m.animate(Bj(b),p);return f===void 0&&(s=x),x}).filter(Boolean),c=s||(l==null?void 0:l[0]);return c?bX(c,l.filter(u=>u!==u)):null},Oct=[{fields:["opacity"]}],Ict=[{fields:["x","y"]}],EEe=[{fields:["x","y"]}],Dct=EEe,CEe=[{fields:["sourceNode","targetNode"]}],Lct=CEe,MEe=[{fields:["childrenNode","x","y"]}],kct=MEe;function Fct(n){return"source"in n&&"target"in n}function $ct(n){return n.length===2}function Hx(n){return n instanceof Float32Array?!0:Array.isArray(n)&&(n.length===2||n.length===3)?n.every(e=>typeof e=="number"):!1}function nh(n,e,r){return n>=e&&n<=r}function mh(n=0){if(Array.isArray(n)){const[e=0,r=e,i=e,a=r]=n;return[e,r,i,a]}return[n,n,n,n]}function Bct(n=0){const e=mh(n);return e[0]+e[2]}function vh(n){return n.max[0]-n.min[0]}function yh(n){return n.max[1]-n.min[1]}function cv(n){return[vh(n),yh(n)]}function im(n,e){const r=Hx(n)?xX(n):n.getShape("key").getBounds();return e?uv(r,e):r}function xX(n){const[e,r,i=0]=n,a=new Bi;return a.setMinMax([e,r,i],[e,r,i]),a}function uv(n,e){const[r,i,a,o]=mh(e),[s,l,c]=n.min,[u,d,f]=n.max,h=new Bi;return h.setMinMax([s-o,l-r,c],[u+i,d+a,f]),h}function TM(n){if(n.length===0)return new Bi;if(n.length===1)return n[0];const e=new Bi;e.setMinMax(n[0].min,n[0].max);for(let r=1;r<n.length;r++){const i=n[r];e.setMinMax([Math.min(e.min[0],i.min[0]),Math.min(e.min[1],i.min[1]),Math.min(e.min[2],i.min[2])],[Math.max(e.max[0],i.max[0]),Math.max(e.max[1],i.max[1]),Math.max(e.max[2],i.max[2])])}return e}function zct(n,e){const[r,i]=n.min,[a,o]=n.max,[s,l]=e.min,[c,u]=e.max;return r>=s&&a<=c&&i>=l&&o<=u}function Kd(n,e){return nh(n[0],e.min[0],e.max[0])&&nh(n[1],e.min[1],e.max[1])}function TEe(n,e,r=!1){const{min:[i,a],max:[o,s]}=e,l=(n[1]===a||n[1]===s)&&(r||nh(n[0],i,o)),c=(n[0]===i||n[0]===o)&&(r||nh(n[1],a,s));return l||c}function Uct(n,e){return!Kd(n,e)}function lO(n,e){const{center:r}=e;return n[0]===r[0]&&n[1]===r[1]}function W2(n,e){const[r,i]=n,[a,o]=e.min,[s,l]=e.max,c=r-a,u=s-r,d=i-o,f=l-i,h=Math.min(c,u,d,f);return h===c?"left":h===u?"right":h===d?"top":h===f?"bottom":"left"}function G0(n,e){const r=Wm(n);if(Kd(n,e))switch(W2(n,e)){case"left":r[0]=e.min[0];break;case"right":r[0]=e.max[0];break;case"top":r[1]=e.min[1];break;case"bottom":r[1]=e.max[1];break}else{const[i,a]=n,[o,s]=e.min,[l,c]=e.max;r[0]=nh(i,o,l)?i:i<o?o:l,r[1]=nh(a,s,c)?a:a<s?s:c}return r}function Vct(n,e){const{center:r}=n,[i,a]=cv(n),o=e==="up"||e==="down"?r[0]:e==="right"?r[0]-i/6:r[0]+i/6,s=e==="left"||e==="right"?r[1]:e==="down"?r[1]-a/6:r[1]+a/6;return[o,s]}function Gct(n,e){let[r,i]=cv(n);return[r,i]=e==="up"||e==="down"?[r,i]:[i,r],(Math.pow(i,2)-Math.pow(Math.sqrt(Math.pow(r/2,2)+Math.pow(i,2))-r/2,2))/(2*i)}function jct(n){const{min:[e,r],max:[i,a]}=n,o=[e,a],s=[i,a],l=[i,r],c=[e,r];return[[o,s],[s,l],[l,c],[c,o]]}var Hct=function(e,r){return e===r},woe=function(){function n(e,r){r===void 0&&(r=null),this.value=e,this.next=r}return n.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},n}(),Wct=function(){function n(e){e===void 0&&(e=Hct),this.head=null,this.tail=null,this.compare=e}return n.prototype.prepend=function(e){var r=new woe(e,this.head);return this.head=r,this.tail||(this.tail=r),this},n.prototype.append=function(e){var r=new woe(e);return this.head?(this.tail.next=r,this.tail=r,this):(this.head=r,this.tail=r,this)},n.prototype.delete=function(e){if(!this.head)return null;for(var r=null;this.head&&this.compare(this.head.value,e);)r=this.head,this.head=this.head.next;var i=this.head;if(i!==null)for(;i.next;)this.compare(i.next.value,e)?(r=i.next,i.next=i.next.next):i=i.next;return this.compare(this.tail.value,e)&&(this.tail=i),r},n.prototype.find=function(e){var r=e.value,i=r===void 0?void 0:r,a=e.callback,o=a===void 0?void 0:a;if(!this.head)return null;for(var s=this.head;s;){if(o&&o(s.value)||i!==void 0&&this.compare(s.value,i))return s;s=s.next}return null},n.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var r=this.head;r.next;)r.next.next?r=r.next:r.next=null;return this.tail=r,e},n.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},n.prototype.fromArray=function(e){var r=this;return e.forEach(function(i){return r.append(i)}),this},n.prototype.toArray=function(){for(var e=[],r=this.head;r;)e.push(r),r=r.next;return e},n.prototype.reverse=function(){for(var e=this.head,r=null,i=null;e;)i=e.next,e.next=r,r=e,e=i;this.tail=this.head,this.head=r},n.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(r){return r.toString(e)}).toString()},n}(),qct=function(e,r,i){r===void 0&&(r=[]);var a=r.filter(function(c){return c.source===e||c.target===e});if(i==="target"){var o=function(u){return u.source===e};return a.filter(o).map(function(c){return c.target})}if(i==="source"){var s=function(u){return u.target===e};return a.filter(s).map(function(c){return c.source})}var l=function(u){return u.source===e?u.target:u.source};return a.map(l)},Yct=function(e,r){return r.filter(function(i){return i.source===e})},Xct=function(e,r){return r.filter(function(i){return i.source===e||i.target===e})},Kct=function(e){var r={},i=e.nodes,a=i===void 0?[]:i,o=e.edges,s=o===void 0?[]:o;return a.forEach(function(l){r[l.id]={degree:0,inDegree:0,outDegree:0}}),s.forEach(function(l){r[l.source].degree++,r[l.source].outDegree++,r[l.target].degree++,r[l.target].inDegree++}),r},Zct={}.toString,_X=function(n,e){return Zct.call(n)==="[object "+e+"]"};const AEe=function(n){return _X(n,"Function")},REe=function(n){return Array.isArray?Array.isArray(n):_X(n,"Array")},Qct=function(n){var e=typeof n;return n!==null&&e==="object"||e==="function"};function Jct(n,e){if(n){var r;if(REe(n))for(var i=0,a=n.length;i<a&&(r=e(n[i],i),r!==!1);i++);else if(Qct(n)){for(var o in n)if(n.hasOwnProperty(o)&&(r=e(n[o],o),r===!1))break}}}const eut=function(n){return _X(n,"String")};var tut=Object.values?function(n){return Object.values(n)}:function(n){var e=[];return Jct(n,function(r,i){AEe(n)&&i==="prototype"||e.push(r)}),e};const nut=function(n,e){if(!AEe(n))throw new TypeError("Expected a function");var r=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e?e.apply(this,i):i[0],s=r.cache;if(s.has(o))return s.get(o);var l=n.apply(this,i);return s.set(o,l),l};return r.cache=new Map,r};var sA;nut(function(n,e){e===void 0&&(e={});var r=e.fontSize,i=e.fontFamily,a=e.fontWeight,o=e.fontStyle,s=e.fontVariant;return sA||(sA=document.createElement("canvas").getContext("2d")),sA.font=[o,s,a,r+"px",i].join(" "),sA.measureText(eut(n)?n:"").width},function(n,e){return e===void 0&&(e={}),yit([n],tut(e)).join("")});var rut=function(e,r,i){for(var a=1/0,o,s=0;s<r.length;s++){var l=r[s].id;!i[l]&&e[l]<=a&&(a=e[l],o=r[s])}return o},iut=function(e,r,i,a){var o=e.nodes,s=o===void 0?[]:o,l=e.edges,c=l===void 0?[]:l,u={},d={},f={};s.forEach(function(b,x){var _=b.id;d[_]=1/0,_===r&&(d[_]=0)});for(var h=s.length,p=function(x){var _=rut(d,s,u),S=_.id;if(u[S]=!0,d[S]===1/0)return"continue";var M=[];i?M=Yct(S,c):M=Xct(S,c),M.forEach(function(E){var T=E.target,P=E.source,A=T===S?P:T,N=a&&E[a]?E[a]:1;d[A]>d[_.id]+N?(d[A]=d[_.id]+N,f[A]=[_.id]):d[A]===d[_.id]+N&&f[A].push(_.id)})},g=0;g<h;g++)p();f[r]=[r];var m={};for(var v in d)d[v]!==1/0&&PEe(r,v,f,m);var y={};for(var v in m)y[v]=m[v][0];return{length:d,path:y,allPath:m}};function PEe(n,e,r,i){if(n===e)return[n];if(i[e])return i[e];for(var a=[],o=0,s=r[e];o<s.length;o++){var l=s[o],c=PEe(n,l,r,i);if(!c)return;for(var u=0,d=c;u<d.length;u++){var f=d[u];REe(f)?a.push(nn(nn([],f,!0),[e],!1)):a.push([f,e])}}return i[e]=a,i[e]}var NEe=function(e,r,i,a,o){var s=iut(e,r,a,o),l=s.length,c=s.path,u=s.allPath;return{length:l[i],path:c[i],allPath:u[i]}},Soe;(function(n){n.EuclideanDistance="euclideanDistance"})(Soe||(Soe={}));var aut=function(e,r,i){typeof r!="number"&&(r=1e-6),typeof i!="number"&&(i=.85);for(var a=1,o=0,s=1e3,l=e.nodes,c=l===void 0?[]:l,u=e.edges,d=u===void 0?[]:u,f=c.length,h,p={},g={},m=0;m<f;++m){var v=c[m],y=v.id;p[y]=1/f,g[y]=1/f}for(var b=Kct(e);s>0&&a>r;){o=0;for(var m=0;m<f;++m){var v=c[m],y=v.id;if(h=0,b[v.id].inDegree===0)p[y]=0;else{for(var x=qct(y,d,"source"),_=0;_<x.length;++_){var S=x[_],M=b[S].outDegree;M>0&&(h+=g[S]/M)}p[y]=i*h,o+=p[y]}}o=(1-o)/f,a=0;for(var m=0;m<f;++m){var v=c[m],y=v.id;h=p[y]+o,a+=Math.abs(h-g[y]),g[y]=h}s-=1}return g};(function(){function n(e){e===void 0&&(e=10),this.linkedList=new Wct,this.maxStep=e}return Object.defineProperty(n.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),n.prototype.isEmpty=function(){return!this.linkedList.head},n.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},n.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},n.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},n.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},n.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},n.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},n})();function Fe(n){if(n.id!==void 0)return n.id;if(n.source!==void 0&&n.target!==void 0)return`${n.source}-${n.target}`;throw new Error(up("The datum does not have available id."))}function lA(n){return n.combo}function OEe(n,e){const r={nodes:(n.nodes||[]).map(Fe),edges:(n.edges||[]).map(Fe),combos:(n.combos||[]).map(Fe)};return e?Object.values(r).flat():r}const IEe=(n,e,r)=>{var i;switch(r.type){case"degree":{const a=new Map;return(i=n.nodes)===null||i===void 0||i.forEach(o=>{const s=e(Fe(o),r.direction).length;a.set(Fe(o),s)}),a}case"betweenness":return out(n,r.directed,r.weightPropertyName);case"closeness":return sut(n,r.directed,r.weightPropertyName);case"eigenvector":return cut(n,r.directed);case"pagerank":return lut(n,r.epsilon,r.linkProb);default:return DEe(n)}},DEe=n=>{var e;const r=new Map;return(e=n.nodes)===null||e===void 0||e.forEach(i=>{r.set(Fe(i),0)}),r},out=(n,e,r)=>{const i=DEe(n),{nodes:a=[]}=n;return a.forEach(o=>{a.forEach(s=>{if(o!==s){const{allPath:l}=NEe(n,Fe(o),Fe(s),e,r),c=l.length;l.flat().forEach(u=>{u!==Fe(o)&&u!==Fe(s)&&i.set(u,i.get(u)+1/c)})}})}),i},sut=(n,e,r)=>{const i=new Map,{nodes:a=[]}=n;return a.forEach(o=>{const s=a.reduce((l,c)=>{if(o!==c){const{length:u}=NEe(n,Fe(o),Fe(c),e,r);l+=u}return l},0);i.set(Fe(o),1/s)}),i},lut=(n,e,r)=>{var i;const a=new Map,o=aut(n,e,r);return(i=n.nodes)===null||i===void 0||i.forEach(s=>{a.set(Fe(s),o[Fe(s)])}),a},cut=(n,e)=>{const{nodes:r=[]}=n,i=uut(n,e),a=dut(i,r.length),o=new Map;return r.forEach((s,l)=>{o.set(Fe(s),a[l])}),o},uut=(n,e)=>{const{nodes:r=[],edges:i=[]}=n,a=Array(r.length).fill(null).map(()=>Array(r.length).fill(0));return i.forEach(({source:o,target:s})=>{const l=r.findIndex(u=>Fe(u)===o),c=r.findIndex(u=>Fe(u)===s);e?a[l][c]=1:(a[l][c]=1,a[c][l]=1)}),a},dut=(n,e,r=100,i=1e-6)=>{let a=Array(e).fill(1),o=1/0;for(let s=0;s<r&&o>i;s++){const l=Array(e).fill(0);for(let u=0;u<e;u++)for(let d=0;d<e;d++)l[u]+=n[u][d]*a[d];const c=Math.sqrt(l.reduce((u,d)=>u+d*d,0));for(let u=0;u<e;u++)l[u]/=c;o=Math.sqrt(l.reduce((u,d,f)=>u+(d-a[f])*d,0)),a=l}return a};function Cm(n,e,r,i=Ra){const a=new Map(n.map(h=>[r(h),h])),o=new Map(e.map(h=>[r(h),h])),s=new Set(a.keys()),l=new Set(o.keys()),c=[],u=[],d=[],f=[];return l.forEach(h=>{s.has(h)?i(a.get(h),o.get(h))?f.push(o.get(h)):u.push(o.get(h)):c.push(o.get(h))}),s.forEach(h=>{l.has(h)||d.push(a.get(h))}),{enter:c,exit:d,keep:f,update:u}}function by(n,e,r){const i=a=>{r&&!r(a)||(a.style.visibility=e)};n.forEach(a=>{i(a)})}function fut(n,e,r){const i={},a=o=>(o in i||(i[o]=0),`${e}-${o}-${i[o]++}`);return r.map(o=>typeof o=="string"?{type:o,key:a(o)}:typeof o=="function"?o.call(n):o.key?o:Object.assign(Object.assign({},o),{key:a(o.type)}))}class wX{constructor(e){this.extensions=[],this.extensionMap={},this.context=e}setExtensions(e){const r=fut(this.context.graph,this.category,e),{enter:i,update:a,exit:o,keep:s}=Cm(this.extensions,r,l=>l.key);this.createExtensions(i),this.updateExtensions([...a,...s]),this.destroyExtensions(o),this.extensions=r}createExtension(e){const{category:r}=this,{key:i,type:a}=e,o=Dp(r,a);if(!o)return gh.warn(`The extension ${a} of ${r} is not registered.`);const s=new o(this.context,e);this.extensionMap[i]=s}createExtensions(e){e.forEach(r=>this.createExtension(r))}updateExtension(e){const{key:r}=e,i=this.extensionMap[r];i&&i.update(e)}updateExtensions(e){e.forEach(r=>this.updateExtension(r))}destroyExtension(e){const r=this.extensionMap[e];r&&(r.destroy(),delete this.extensionMap[e])}destroyExtensions(e){e.forEach(({key:r})=>this.destroyExtension(r))}destroy(){Object.values(this.extensionMap).forEach(e=>e.destroy()),this.context={},this.extensions=[],this.extensionMap={}}}class SX{constructor(e,r){this.events=[],this.destroyed=!1,this.context=e,this.options=r}update(e){this.options=Object.assign(this.options,e)}destroy(){this.context={},this.options={},this.destroyed=!0}}class ac extends SX{}class Z4 extends ac{constructor(e,r){super(e,Object.assign({},Z4.defaultOptions,r)),this.isOverlapping=(i,a)=>a.some(o=>i.intersects(o)),this.occupiedBounds=[],this.detectLabelCollision=i=>{const a=this.context.viewport,o={show:[],hide:[]};return this.occupiedBounds=[],i.forEach(s=>{const l=s.getShape("label").getRenderBounds();a.isInViewport(l,!0)&&!this.isOverlapping(l,this.occupiedBounds)?(o.show.push(s),this.occupiedBounds.push(uv(l,this.options.padding))):o.hide.push(s)}),o},this.hideLabelIfExceedViewport=(i,a)=>{const{exit:o}=Cm(i,a,s=>s.id);o==null||o.forEach(this.hideLabel)},this.nodeCentralities=new Map,this.sortNodesByCentrality=(i,a)=>{const{model:o}=this.context,s=o.getData(),l=o.getRelatedEdgesData.bind(o);return i.map(u=>(this.nodeCentralities.has(u.id)||(this.nodeCentralities=IEe(s,l,a)),{node:u,centrality:this.nodeCentralities.get(u.id)})).sort((u,d)=>d.centrality-u.centrality).map(u=>u.node)},this.sortLabelElementsInView=i=>{const{sort:a,sortNode:o,sortCombo:s,sortEdge:l}=this.options,{model:c}=this.context;if(cn(a))return i.sort((m,v)=>a(c.getElementDataById(m.id),c.getElementDataById(v.id)));const{node:u=[],edge:d=[],combo:f=[]}=H4(i,m=>m.type),h=cn(s)?f.sort((m,v)=>s(...c.getComboData([m.id,v.id]))):f,p=cn(o)?u.sort((m,v)=>o(...c.getNodeData([m.id,v.id]))):this.sortNodesByCentrality(u,o),g=cn(l)?d.sort((m,v)=>l(...c.getEdgeData([m.id,v.id]))):d;return[...h,...p,...g]},this.labelElementsInView=[],this.isFirstRender=!0,this.onToggleVisibility=i=>{var a;if(((a=i.data)===null||a===void 0?void 0:a.stage)==="zIndex")return;if(!this.validate(i)){this.hiddenElements.size>0&&(this.hiddenElements.forEach(this.showLabel),this.hiddenElements.clear());return}const o=this.isFirstRender?this.getLabelElements():this.getLabelElementsInView();this.hideLabelIfExceedViewport(this.labelElementsInView,o),this.labelElementsInView=o;const s=this.sortLabelElementsInView(this.labelElementsInView),{show:l,hide:c}=this.detectLabelCollision(s);for(let u=l.length-1;u>=0;u--)this.showLabel(l[u]);c.forEach(this.hideLabel)},this.hiddenElements=new Map,this.hideLabel=i=>{const a=i.getShape("label");a&&by(a,"hidden"),this.hiddenElements.set(i.id,i)},this.showLabel=i=>{const a=i.getShape("label");a&&by(a,"visible"),i.toFront(),this.hiddenElements.delete(i.id)},this.onTransform=x2e(this.onToggleVisibility,this.options.throttle,{leading:!0}),this.enableToggle=!0,this.toggle=i=>{this.enableToggle&&this.onToggleVisibility(i)},this.onBeforeRender=()=>{this.enableToggle=!1},this.onAfterRender=i=>{this.onToggleVisibility(i),this.enableToggle=!0},this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents(),this.onToggleVisibility({})}getLabelElements(){const{elementMap:e}=this.context.element,r=[];for(const i in e){const a=e[i];a.isVisible()&&a.getShape("label")&&r.push(a)}return r}getLabelElementsInView(){const e=this.context.viewport;return this.getLabelElements().filter(r=>e.isInViewport(r.getShape("key").getRenderBounds()))}bindEvents(){const{graph:e}=this.context;e.on(Ut.BEFORE_RENDER,this.onBeforeRender),e.on(Ut.AFTER_RENDER,this.onAfterRender),e.on(Ut.AFTER_DRAW,this.toggle),e.on(Ut.AFTER_LAYOUT,this.toggle),e.on(Ut.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:e}=this.context;e.off(Ut.BEFORE_RENDER,this.onBeforeRender),e.off(Ut.AFTER_RENDER,this.onAfterRender),e.off(Ut.AFTER_DRAW,this.toggle),e.off(Ut.AFTER_LAYOUT,this.toggle),e.off(Ut.AFTER_TRANSFORM,this.onTransform)}validate(e){if(this.destroyed)return!1;const{enable:r}=this.options;return cn(r)?r(e):!!r}destroy(){this.unbindEvents(),super.destroy()}}Z4.defaultOptions={enable:!0,throttle:100,padding:0,sortNode:{type:"degree"}};const Eoe=[0,0,0];function Jn(n,e){return n.map((r,i)=>r+e[i])}function Ci(n,e){return n.map((r,i)=>r-e[i])}function Dd(n,e){return typeof e=="number"?n.map(r=>r*e):n.map((r,i)=>r*e[i])}function Zd(n,e){return typeof e=="number"?n.map(r=>r/e):n.map((r,i)=>r/e[i])}function hut(n,e){return n.reduce((r,i,a)=>r+i*e[a],0)}function put(n,e){const r=tC(n),i=tC(e);return[r[1]*i[2]-r[2]*i[1],r[2]*i[0]-r[0]*i[2],r[0]*i[1]-r[1]*i[0]]}function am(n,e){return n.map(r=>r*e)}function Wi(n,e){return Math.sqrt(n.reduce((r,i,a)=>r+Math.pow(i-e[a]||0,2),0))}function cO(n,e){return n.reduce((r,i,a)=>r+Math.abs(i-e[a]),0)}function _p(n){const e=n.reduce((r,i)=>r+Math.pow(i,2),0);return n.map(r=>r/Math.sqrt(e))}function EX(n,e,r=!1){const i=n[0]*e[1]-n[1]*e[0];let a=Math.acos(Dd(n,e).reduce((o,s)=>o+s,0)/(Wi(n,Eoe)*Wi(e,Eoe)));return r&&i<0&&(a=2*Math.PI-a),a}function Q4(n,e=!0){return e?[-n[1],n[0]]:[n[1],-n[0]]}function CF(n,e){return n.map(r=>r%e)}function xy(n){return[n[0],n[1]]}function tC(n){return $ct(n)?[n[0],n[1],0]:n}function LEe(n){const[e,r]=n;return!e&&!r?0:Math.atan2(r,e)}function kEe(n,e){const[r,i]=n,[a,o]=e,s=Ci(r,i),l=Ci(a,o);return put(s,l).every(c=>c===0)}function CX(n,e,r=!1){if(kEe(n,e))return;const[i,a]=n,[o,s]=e,l=((i[0]-o[0])*(o[1]-s[1])-(i[1]-o[1])*(o[0]-s[0]))/((i[0]-a[0])*(o[1]-s[1])-(i[1]-a[1])*(o[0]-s[0])),c=s[0]-o[0]?(i[0]-o[0]+l*(a[0]-i[0]))/(s[0]-o[0]):(i[1]-o[1]+l*(a[1]-i[1]))/(s[1]-o[1]);if(!(!r&&(!nh(l,0,1)||!nh(c,0,1))))return[i[0]+l*(a[0]-i[0]),i[1]+l*(a[1]-i[1])]}function FEe(n){if(Array.isArray(n))return nh(n[0],0,1)&&nh(n[1],0,1)?n:[.5,.5];const e=n.split("-"),r=e.includes("left")?0:e.includes("right")?1:.5,i=e.includes("top")?0:e.includes("bottom")?1:.5;return[r,i]}function Po(n){const{x:e=0,y:r=0,z:i=0}=n.style||{};return[+e,+r,+i]}function gut(n){const{x:e,y:r,z:i}=n.style||{};return e!==void 0||r!==void 0||i!==void 0}function mut(n,e){const[r,i]=e,{min:a,max:o}=n;return[a[0]+r*(o[0]-a[0]),a[1]+i*(o[1]-a[1])]}function Qh(n,e="center"){const r=FEe(e);return mut(n,r)}function ps(n){var e;return[n.x,n.y,(e=n.z)!==null&&e!==void 0?e:0]}function Ld(n){var e;return{x:n[0],y:n[1],z:(e=n[2])!==null&&e!==void 0?e:0}}function hS(n,e=0){return n.map(r=>parseFloat(r.toFixed(e)))}function Mm(n,e,r,i=!1){if(Ra(n,e))return n;const a=i?Ci(n,e):Ci(e,n),o=_p(a),s=[o[0]*r,o[1]*r];return Jn(xy(n),s)}function $Ee(n,e){return n[1]===e[1]}function vut(n,e){return n[0]===e[0]}function yut(n,e){return $Ee(n,e)||vut(n,e)}function BEe(n,e,r){return kEe([n,e],[e,r])}function zEe(n,e){return[2*e[0]-n[0],2*e[1]-n[1]]}function UEe(n,e,r,i=!0,a=!1){for(let o=0;o<r.length;o++){let s=r[o],l=r[(o+1)%r.length];i&&(s=Jn(e,s),l=Jn(e,l));const c=a?zEe(n,e):n,u=CX([e,c],[s,l]);if(u)return{point:u,line:[s,l]}}return{point:e,line:void 0}}function but(n,e,r,i){const a=n[0],o=n[1];let s=!1;r===void 0&&(r=0),i===void 0&&(i=e.length);const l=i-r;for(let c=0,u=l-1;c<l;u=c++){const d=e[c+r][0],f=e[c+r][1],h=e[u+r][0],p=e[u+r][1];f>o!=p>o&&a<(h-d)*(o-f)/(p-f)+d&&(s=!s)}return s}function xut(n,e,r=!1){const i=Qh(e,"center"),a=[Qh(e,"left-top"),Qh(e,"right-top"),Qh(e,"right-bottom"),Qh(e,"left-bottom")];return UEe(n,i,a,!1,r).point}function J4(n,e,r=!1){const i=e.center,a=r?zEe(n,i):n,o=Ci(a,e.center),s=Math.atan2(o[1],o[0]);if(isNaN(s))return i;const l=vh(e)/2,c=yh(e)/2,u=i[0]+l*Math.cos(s),d=i[1]+c*Math.sin(s);return[u,d]}function _ut(n,e){let r=1/0,i=[n[0],e[0]];return n.forEach(a=>{e.forEach(o=>{const s=Wi(a,o);s<r&&(r=s,i=[a,o])})}),i}function wut(n,e){let r=1/0,i=[[0,0],[0,0]];return e.forEach(a=>{const o=Sut(n,a);o<r&&(r=o,i=a)}),i}function Sut(n,e){const r=VEe(n,e);return Wi(n,r)}function VEe(n,e){const[r,i]=e[0],[a,o]=e[1],[s,l]=n,c=a-r,u=o-i;if(c===0&&u===0)return[r,i];let d=((s-r)*c+(l-i)*u)/(c*c+u*u);d>1?d=1:d<0&&(d=0);const f=r+d*c,h=i+d*u;return[f,h]}function Eut(n){const e=n.reduce((r,i)=>Jn(r,i),[0,0]);return Zd(e,n.length)}function MX(n,e=!0){const r=Eut(n);return n.sort(([i,a],[o,s])=>{const l=Math.atan2(a-r[1],i-r[0]),c=Math.atan2(s-r[1],o-r[0]);return e?c-l:l-c})}function Coe(n,e){return[n,[n[0],e[1]],e,[e[0],n[1]]]}class Wa{constructor(e,r,i){if(this.phase=r,this.pointerByTouch=[],this.initialDistance=null,this.emitter=e,Wa.instance)return Wa.callbacks[this.phase].push(i),Wa.instance;this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.bindEvents(),Wa.instance=this,Wa.callbacks[this.phase].push(i)}bindEvents(){const{emitter:e}=this;e.on(it.POINTER_DOWN,this.onPointerDown),e.on(it.POINTER_MOVE,this.onPointerMove),e.on(it.POINTER_UP,this.onPointerUp)}updatePointerPosition(e,r,i){const a=this.pointerByTouch.findIndex(o=>o.pointerId===e);a>=0&&(this.pointerByTouch[a]={x:r,y:i,pointerId:e})}onPointerDown(e){const{x:r,y:i}=e.client||{};if(!(r===void 0||i===void 0)&&(this.pointerByTouch.push({x:r,y:i,pointerId:e.pointerId}),e.pointerType==="touch"&&this.pointerByTouch.length===2)){Wa.isPinching=!0;const a=this.pointerByTouch[0].x-this.pointerByTouch[1].x,o=this.pointerByTouch[0].y-this.pointerByTouch[1].y;this.initialDistance=Math.sqrt(a*a+o*o),Wa.callbacks.pinchstart.forEach(s=>s(e,{scale:0}))}}onPointerMove(e){if(this.pointerByTouch.length!==2||this.initialDistance===null)return;const{x:r,y:i}=e.client||{};if(r===void 0||i===void 0)return;this.updatePointerPosition(e.pointerId,r,i);const a=this.pointerByTouch[0].x-this.pointerByTouch[1].x,o=this.pointerByTouch[0].y-this.pointerByTouch[1].y,l=Math.sqrt(a*a+o*o)/this.initialDistance;Wa.callbacks.pinchmove.forEach(c=>c(e,{scale:(l-1)*5}))}onPointerUp(e){var r;Wa.callbacks.pinchend.forEach(i=>i(e,{scale:0})),Wa.isPinching=!1,this.initialDistance=null,this.pointerByTouch=[],(r=Wa.instance)===null||r===void 0||r.tryDestroy()}destroy(){this.emitter.off(it.POINTER_DOWN,this.onPointerDown),this.emitter.off(it.POINTER_MOVE,this.onPointerMove),this.emitter.off(it.POINTER_UP,this.onPointerUp),Wa.instance=null}off(e,r){const i=Wa.callbacks[e].indexOf(r);i>-1&&Wa.callbacks[e].splice(i,1),this.tryDestroy()}tryDestroy(){Object.values(Wa.callbacks).every(e=>e.length===0)&&this.destroy()}}Wa.isPinching=!1;Wa.instance=null;Wa.callbacks={pinchstart:[],pinchmove:[],pinchend:[]};const Moe=n=>n.map(e=>Kr(e)?e.toLocaleLowerCase():e);class q_{constructor(e){this.map=new Map,this.boundHandlePinch=()=>{},this.recordKey=new Set,this.onKeyDown=r=>{r!=null&&r.key&&(this.recordKey.add(r.key),this.trigger(r))},this.onKeyUp=r=>{r!=null&&r.key&&this.recordKey.delete(r.key)},this.onWheel=r=>{this.triggerExtendKey(it.WHEEL,r)},this.onDrag=r=>{this.triggerExtendKey(it.DRAG,r)},this.handlePinch=(r,i)=>{this.triggerExtendKey(it.PINCH,Object.assign(Object.assign({},r),i))},this.onFocus=()=>{this.recordKey.clear()},this.emitter=e,this.bindEvents()}bind(e,r){e.length!==0&&(e.includes(it.PINCH)&&!this.pinchHandler&&(this.boundHandlePinch=this.handlePinch.bind(this),this.pinchHandler=new Wa(this.emitter,"pinchmove",this.boundHandlePinch)),this.map.set(e,r))}unbind(e,r){this.map.forEach((i,a)=>{Ra(a,e)&&(!r||r===i)&&this.map.delete(a)})}unbindAll(){this.map.clear()}match(e){const r=Moe(Array.from(this.recordKey)).sort(),i=Moe(e).sort();return Ra(r,i)}bindEvents(){var e;const{emitter:r}=this;r.on(it.KEY_DOWN,this.onKeyDown),r.on(it.KEY_UP,this.onKeyUp),r.on(it.WHEEL,this.onWheel),r.on(it.DRAG,this.onDrag),(e=globalThis.addEventListener)===null||e===void 0||e.call(globalThis,"focus",this.onFocus)}trigger(e){this.map.forEach((r,i)=>{this.match(i)&&r(e)})}triggerExtendKey(e,r){this.map.forEach((i,a)=>{a.includes(e)&&Ra(Array.from(this.recordKey),a.filter(o=>o!==e))&&i(r)})}destroy(){var e,r;this.unbindAll(),this.emitter.off(it.KEY_DOWN,this.onKeyDown),this.emitter.off(it.KEY_UP,this.onKeyUp),this.emitter.off(it.WHEEL,this.onWheel),this.emitter.off(it.DRAG,this.onDrag),(e=this.pinchHandler)===null||e===void 0||e.off("pinchmove",this.boundHandlePinch),(r=globalThis.removeEventListener)===null||r===void 0||r.call(globalThis,"blur",this.onFocus)}}class AM extends ac{constructor(e,r){super(e,xl({},AM.defaultOptions,r)),this.shortcut=new q_(e.graph),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.clearStates=this.clearStates.bind(this),this.bindEvents()}onPointerDown(e){if(!this.validate(e)||!this.isKeydown()||this.startPoint)return;const{canvas:r,graph:i}=this.context,a=Object.assign({},this.options.style);this.options.style.lineWidth&&(a.lineWidth=+this.options.style.lineWidth/i.getZoom()),this.rectShape=new ws({id:"g6-brush-select",style:a}),r.appendChild(this.rectShape),this.startPoint=[e.canvas.x,e.canvas.y]}onPointerMove(e){var r;if(!this.startPoint)return;const{immediately:i,mode:a}=this.options;this.endPoint=uO(e),(r=this.rectShape)===null||r===void 0||r.attr({x:Math.min(this.endPoint[0],this.startPoint[0]),y:Math.min(this.endPoint[1],this.startPoint[1]),width:Math.abs(this.endPoint[0]-this.startPoint[0]),height:Math.abs(this.endPoint[1]-this.startPoint[1])}),i&&a==="default"&&this.updateElementsStates(Coe(this.startPoint,this.endPoint))}onPointerUp(e){if(this.startPoint){if(!this.endPoint){this.clearBrush();return}this.endPoint=uO(e),this.updateElementsStates(Coe(this.startPoint,this.endPoint)),this.clearBrush()}}clearStates(){this.endPoint||this.clearElementsStates()}clearElementsStates(){const{graph:e}=this.context,r=Object.values(e.getData()).reduce((i,a)=>Object.assign({},i,a.reduce((o,s)=>(o[Fe(s)]=[],o),{})),{});e.setElementState(r,this.options.animation)}updateElementsStates(e){const{graph:r}=this.context,{enableElements:i,state:a,mode:o,onSelect:s}=this.options,l=this.selector(r,e,i);let c={};switch(o){case"union":l.forEach(u=>{c[u]=[...r.getElementState(u),a]});break;case"diff":l.forEach(u=>{const d=r.getElementState(u);c[u]=d.includes(a)?d.filter(f=>f!==a):[...d,a]});break;case"intersect":l.forEach(u=>{const d=r.getElementState(u);c[u]=d.includes(a)?[a]:[]});break;case"default":default:l.forEach(u=>{c[u]=[a]});break}cn(s)&&(c=s(c)),r.setElementState(c,this.options.animation)}selector(e,r,i){if(!i||i.length===0)return[];const a=[],o=e.getData();if(i.forEach(s=>{o[`${s}s`].forEach(l=>{const c=Fe(l);e.getElementVisibility(c)!=="hidden"&&but(e.getElementPosition(c),r)&&a.push(c)})}),i.includes("edge")){const s=o.edges;s==null||s.forEach(l=>{const{source:c,target:u}=l;a.includes(c)&&a.includes(u)&&a.push(Fe(l))})}return a}clearBrush(){var e;(e=this.rectShape)===null||e===void 0||e.remove(),this.rectShape=void 0,this.startPoint=void 0,this.endPoint=void 0}isKeydown(){const{trigger:e}=this.options,r=Array.isArray(e)?e:[e];return this.shortcut.match(r.filter(i=>i!=="drag"))}validate(e){if(this.destroyed)return!1;const{enable:r}=this.options;return cn(r)?r(e):!!r}bindEvents(){const{graph:e}=this.context;e.on(it.POINTER_DOWN,this.onPointerDown),e.on(it.POINTER_MOVE,this.onPointerMove),e.on(it.POINTER_UP,this.onPointerUp),e.on(Xd.CLICK,this.clearStates)}unbindEvents(){const{graph:e}=this.context;e.off(it.POINTER_DOWN,this.onPointerDown),e.off(it.POINTER_MOVE,this.onPointerMove),e.off(it.POINTER_UP,this.onPointerUp),e.off(Xd.CLICK,this.clearStates)}update(e){this.unbindEvents(),this.options=xl(this.options,e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}AM.defaultOptions={animation:!1,enable:!0,enableElements:["node","combo","edge"],immediately:!1,mode:"default",state:"selected",trigger:["shift"],style:{width:0,height:0,lineWidth:1,fill:"#1677FF",stroke:"#1677FF",fillOpacity:.1,zIndex:2,pointerEvents:"none"}};const uO=n=>[n.canvas.x,n.canvas.y],Lp=.8,_y=["node","edge","combo"];function px(n,e,r,i,a=0){i==="TB"&&e(n,a);const o=r(n);if(o)for(const s of o)px(s,e,r,i,a+1);i==="BT"&&e(n,a)}function Cut(n,e,r){const i=[[n,0]];for(;i.length;){const[a,o]=i.shift();e(a,o);const s=r(a);if(s)for(const l of s)i.push([l,o+1])}}function GEe(n,e,r,i,a="both"){if(e==="combo"||e==="node")return MF(n,r,i,a);const o=n.getEdgeData(r);if(!o)return[];const s=MF(n,o.source,i-1,a),l=MF(n,o.target,i-1,a);return Array.from(new Set([...s,...l,r]))}function MF(n,e,r,i="both"){const a=new Set,o=new Set,s=new Set;return Cut(e,(l,c)=>{c>r||(s.add(l),n.getRelatedEdgesData(l,i).forEach(u=>{const d=Fe(u);!o.has(d)&&c<r&&(s.add(d),o.add(d))}))},l=>n.getRelatedEdgesData(l,i).map(c=>c.source===l?c.target:c.source).filter(c=>a.has(c)?!1:(a.add(c),!0))),Array.from(s)}function TF(n){return n.states||[]}var cA=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};class eD extends ac{constructor(e,r){super(e,Object.assign({},eD.defaultOptions,r)),this.onClickSelect=i=>cA(this,void 0,void 0,function*(){var a,o;this.validate(i)&&(yield this.updateState(i),(o=(a=this.options).onClick)===null||o===void 0||o.call(a,i))}),this.onClickCanvas=i=>cA(this,void 0,void 0,function*(){var a,o;this.validate(i)&&(yield this.clearState(),(o=(a=this.options).onClick)===null||o===void 0||o.call(a,i))}),this.shortcut=new q_(e.graph),this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),_y.forEach(r=>{e.on(`${r}:${it.CLICK}`,this.onClickSelect)}),e.on(Xd.CLICK,this.onClickCanvas)}get isMultipleSelect(){const{multiple:e,trigger:r}=this.options;return e&&this.shortcut.match(r)}getNeighborIds(e){const{target:r,targetType:i}=e,{graph:a}=this.context,{degree:o}=this.options;return GEe(a,i,r.id,typeof o=="function"?o(e):o).filter(s=>s!==r.id)}updateState(e){return cA(this,void 0,void 0,function*(){const{state:r,unselectedState:i,neighborState:a,animation:o}=this.options;if(!r&&!a&&!i)return;const{target:s}=e,{graph:l}=this.context,c=l.getElementData(s.id),u=TF(c).includes(r)?"unselect":"select",d={},f=this.isMultipleSelect,h=[s.id],p=this.getNeighborIds(e);if(f)if(Object.assign(d,this.getDataStates()),u==="select"){const g=(m,v)=>{m.forEach(y=>{const b=new Set(l.getElementState(y));b.add(v),b.delete(i),d[y]=Array.from(b)})};g(h,r),g(p,a),i&&Object.keys(d).forEach(m=>{const v=d[m];!v.includes(r)&&!v.includes(a)&&!v.includes(i)&&d[m].push(i)})}else{const g=d[s.id];d[s.id]=g.filter(m=>m!==r&&m!==a),g.includes(i)||d[s.id].push(i),p.forEach(m=>{d[m]=d[m].filter(v=>v!==a),d[m].includes(r)||d[m].push(i)})}else if(u==="select"){Object.assign(d,this.getClearStates(!!i));const g=(m,v)=>{m.forEach(y=>{d[y]||(d[y]=l.getElementState(y)),d[y].push(v)})};g(h,r),g(p,a),i&&Object.keys(d).forEach(m=>{!h.includes(m)&&!p.includes(m)&&d[m].push(i)})}else Object.assign(d,this.getClearStates());yield l.setElementState(d,o)})}getDataStates(){const{graph:e}=this.context,{nodes:r,edges:i,combos:a}=e.getData(),o={};return[...r,...i,...a].forEach(s=>{o[Fe(s)]=TF(s)}),o}getClearStates(e=!1){const{graph:r}=this.context,{state:i,unselectedState:a,neighborState:o}=this.options,s=new Set([i,a,o]),{nodes:l,edges:c,combos:u}=r.getData(),d={};return[...l,...c,...u].forEach(f=>{const h=TF(f),p=h.filter(g=>!s.has(g));(e||p.length!==h.length)&&(d[Fe(f)]=p)}),d}clearState(){return cA(this,void 0,void 0,function*(){const{graph:e}=this.context;yield e.setElementState(this.getClearStates(),this.options.animation)})}validate(e){if(this.destroyed)return!1;const{enable:r}=this.options;return cn(r)?r(e):!!r}unbindEvents(){const{graph:e}=this.context;_y.forEach(r=>{e.off(`${r}:${it.CLICK}`,this.onClickSelect)}),e.off(Xd.CLICK,this.onClickCanvas)}destroy(){this.unbindEvents(),super.destroy()}}eD.defaultOptions={animation:!0,enable:!0,multiple:!1,trigger:["shift"],state:"selected",neighborState:"selected",unselectedState:void 0,degree:0};function Hl(n){var e;return!!(!((e=n.style)===null||e===void 0)&&e.collapsed)}function dO(n,e){if(!n.startsWith(e))return!1;const r=n[e.length];return r>="A"&&r<="Z"}function Mut(n,e){return`${e}${KN(n)}`}function Tut(n,e,r=!0){if(!e||!dO(n,e))return n;const i=n.slice(e.length);return r?iit(i):i}function fo(n,e){const r=Object.entries(n).reduce((i,[a,o])=>(a==="className"||a==="class"||dO(a,e)&&Object.assign(i,{[Tut(a,e)]:o}),i),{});if("opacity"in n){const i=Mut("opacity",e),a=n.opacity;if(i in n){const o=n[i];Object.assign(r,{opacity:a*o})}else Object.assign(r,{opacity:a})}return r}function zj(n,e){const r=e.length;return Object.keys(n).reduce((i,a)=>{if(a.startsWith(e)){const o=a.slice(r);i[o]=n[a]}return i},{})}function jEe(n,e){const r=typeof e=="string"?[e]:e,i={};return Object.keys(n).forEach(a=>{r.find(o=>a.startsWith(o))||(i[a]=n[a])}),i}function Uc(n=0){if(typeof n=="number")return[n,n,n];const[e,r=e,i=e]=n;return[e,r,i]}var Aut=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};function Toe(n,e){const{datum:r,graph:i}=e;return typeof n=="function"?n.call(i,r):Object.fromEntries(Object.entries(n).map(([a,o])=>typeof o=="function"?[a,o.call(i,r)]:[a,o]))}function is(n,e){const r=(n==null?void 0:n.style)||{},i=(e==null?void 0:e.style)||{};for(const a in r)a in i||(i[a]=r[a]);return Object.assign({},n,e,{style:i})}function Rut(n){const{x:e,y:r,z:i,class:a,className:o,transform:s,transformOrigin:l,zIndex:c,visibility:u}=n;return Aut(n,["x","y","z","class","className","transform","transformOrigin","zIndex","visibility"])}function Put(n,e){const r=Uc(n);let i={};return e.text&&!e.fontSize&&(i={fontSize:Math.min(...r)*.5}),e.src&&(!e.width||!e.height)&&(i={width:r[0]*.5,height:r[1]*.5}),i}function Aoe(n){if(n)return typeof n=="string"||typeof n=="function"||Array.isArray(n)?{type:"group",field:e=>e.id,color:n,invert:!1}:n}function Nut(n,e){if(!e)return{};const{type:r,color:i,field:a,invert:o}=e,s=c=>{const u=typeof i=="string"?Dp("palette",i):i;if(typeof u=="function"){const d={};return c.forEach(([f,h])=>{d[f]=u(o?1-h:h)}),d}else if(Array.isArray(u)){const d=o?[...u].reverse():u,f={};return c.forEach(([h,p])=>{f[h]=d[p%u.length]}),f}return{}},l=(c,u)=>{var d;return typeof c=="string"?(d=u.data)===null||d===void 0?void 0:d[c]:c==null?void 0:c(u)};if(r==="group"){const c=H4(n,h=>{if(!a)return"default";const p=l(a,h);return p?String(p):"default"}),u=Object.keys(c),d=s(u.map((h,p)=>[h,p])),f={};return Object.entries(c).forEach(([h,p])=>{p.forEach(g=>{f[Fe(g)]=d[h]})}),f}else if(r==="value"){const[c,u]=n.reduce(([f,h],p)=>{const g=l(a,p);if(typeof g!="number")throw new Error(up(`Palette field ${a} is not a number`));return[Math.min(f,g),Math.max(h,g)]},[1/0,-1/0]),d=u-c;return s(n.map(f=>[f.id,(l(a,f)-c)/d]))}}function HEe(n){const e=typeof n=="string"?Dp("palette",n):n;if(typeof e!="function")return e}function WEe(n,e){let r=2*n;return typeof e=="string"?r=n*Number(e.replace("%",""))/100:typeof e=="number"&&(r=e),isNaN(r)&&(r=2*n),r}function qEe(n,e,r=1,i=!1){const a=i?r:1,o=(n.max[0]-n.min[0])*a;return WEe(o,e)}function Out(n,e,r=1){const i=Wi(n[0],n[1])*r;return WEe(i,e)}class RM extends gX{constructor(e){Roe(e.style),super(e),this.shapeMap={},this.animateMap={},this.render(this.attributes,this),this.setVisibility(),this.bindEvents()}get parsedAttributes(){return this.attributes}upsert(e,r,i,a,o){var s,l,c,u,d,f,h,p;const g=this.shapeMap[e];if(i===!1){g&&((s=o==null?void 0:o.beforeDestroy)===null||s===void 0||s.call(o,g),a.removeChild(g),delete this.shapeMap[e],(l=o==null?void 0:o.afterDestroy)===null||l===void 0||l.call(o,g));return}const m=typeof r=="string"?Dp(jx.SHAPE,r):r;if(!m)throw new Error(up(`Shape ${r} not found`));if(!g||g.destroyed||!(g instanceof m)){g&&((c=o==null?void 0:o.beforeDestroy)===null||c===void 0||c.call(o,g),g==null||g.destroy(),(u=o==null?void 0:o.afterDestroy)===null||u===void 0||u.call(o,g)),(d=o==null?void 0:o.beforeCreate)===null||d===void 0||d.call(o);const v=new m({className:e,style:i});return a.appendChild(v),this.shapeMap[e]=v,(f=o==null?void 0:o.afterCreate)===null||f===void 0||f.call(o,v),v}return(h=o==null?void 0:o.beforeUpdate)===null||h===void 0||h.call(o,g),Yj(g,i),(p=o==null?void 0:o.afterUpdate)===null||p===void 0||p.call(o,g),g}update(e={}){const r=Object.assign({},this.attributes,e);Roe(r),Tft(this,r),this.render(r,this),this.setVisibility()}bindEvents(){}getGraphicStyle(e){return Rut(e)}get compositeShapes(){return[["badges","badge-"],["ports","port-"]]}animate(e,r){if(e.length===0)return null;const i=[];if(e[0].x!==void 0||e[0].y!==void 0||e[0].z!==void 0){const{x:o=0,y:s=0,z:l=0}=this.attributes;e.forEach(c=>{const{x:u=o,y:d=s,z:f=l}=c;Object.assign(c,{transform:f?[["translate3d",u,d,f]]:[["translate",u,d]]})})}const a=super.animate(e,r);if(a&&(AF(this,a),i.push(a)),Array.isArray(e)&&e.length>0){const o=["transform","transformOrigin","x","y","z","zIndex"];if(Object.keys(e[0]).some(s=>!o.includes(s))){Object.entries(this.shapeMap).forEach(([l,c])=>{const u=`get${KN(l)}Style`,d=this[u];if(cn(d)){const f=e.map(p=>d.call(this,Object.assign(Object.assign({},this.attributes),p))),h=c.animate(Bj(f),r);h&&(AF(c,h),i.push(h))}});const s=(l,c)=>{if(!Df(l)){const u=`get${KN(c)}Style`,d=this[u];if(cn(d)){const f=e.map(h=>d.call(this,Object.assign(Object.assign({},this.attributes),h)));Object.entries(f[0]).map(([h])=>{const p=f.map(m=>m[h]),g=l[h];if(g){const m=g.animate(Bj(p),r);m&&(AF(g,m),i.push(m))}})}}};this.compositeShapes.forEach(([l,c])=>{const u=zj(this.shapeMap,c);s(u,l)})}}return bX(i)}getShape(e){return this.shapeMap[e]}setVisibility(){const{visibility:e}=this.attributes;by(this,e)}destroy(){this.shapeMap={},this.animateMap={},super.destroy()}}function AF(n,e){e==null||e.finished.then(()=>{const r=n.activeAnimations.findIndex(i=>i===e);r>-1&&n.activeAnimations.splice(r,1)})}function Roe(n){if(!n)return{};if("x"in n||"y"in n||"z"in n){const{x:e=0,y:r=0,z:i,transform:a}=n,o=SEe(e,r,i,a);o&&(n.transform=o)}return n}var Iut=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};class dv extends RM{constructor(e){super(is({style:dv.defaultStyleProps},e))}isTextStyle(e){return dO(e,"label")}isBackgroundStyle(e){return dO(e,"background")}getTextStyle(e){const r=this.getGraphicStyle(e),{padding:i}=r,a=Iut(r,["padding"]);return jEe(a,"background")}getBackgroundStyle(e){if(e.background===!1)return!1;const r=this.getGraphicStyle(e),{wordWrap:i,wordWrapWidth:a,padding:o}=r,s=fo(r,"background"),{min:[l,c],center:[u,d],halfExtents:[f,h]}=this.shapeMap.text.getGeometryBounds(),[p,g,m,v]=mh(o),y=f*2+v+g,{width:b,height:x}=s;b&&x?Object.assign(s,{x:u-Number(b)/2,y:d-Number(x)/2}):Object.assign(s,{x:l-v,y:c-p,width:i?Math.min(y,a+v+g):y,height:h*2+p+m});const{radius:_}=s;if(typeof _=="string"&&_.endsWith("%")){const S=Number(_.replace("%",""))/100;s.radius=Math.min(+s.width,+s.height)*S}return s}render(e=this.parsedAttributes,r=this){this.upsert("text",Uy,this.getTextStyle(e),r),this.upsert("background",ws,this.getBackgroundStyle(e),r)}getGeometryBounds(){return(this.getShape("background")||this.getShape("text")).getGeometryBounds()}}dv.defaultStyleProps={padding:0,fontSize:12,fontFamily:"system-ui, sans-serif",wordWrap:!0,maxLines:1,wordWrapWidth:128,textOverflow:"...",textBaseline:"middle",backgroundOpacity:.75,backgroundZIndex:-1,backgroundLineWidth:0};class Y_ extends RM{constructor(e){super(is({style:Y_.defaultStyleProps},e))}getBadgeStyle(e){return this.getGraphicStyle(e)}render(e=this.parsedAttributes,r=this){this.upsert("label",dv,this.getBadgeStyle(e),r)}getGeometryBounds(){const e=this.getShape("label");return(e.getShape("background")||e.getShape("text")).getGeometryBounds()}}Y_.defaultStyleProps={padding:[2,4,2,4],fontSize:10,wordWrap:!1,backgroundRadius:"50%",backgroundOpacity:1};function Dut(n,e=!0){const r=[];return n.forEach((i,a)=>{r.push([a===0?"M":"L",...i])}),e&&r.push(["Z"]),r}const Poe={M:["x","y"],m:["dx","dy"],H:["x"],h:["dx"],V:["y"],v:["dy"],L:["x","y"],l:["dx","dy"],Z:[],z:[],C:["x1","y1","x2","y2","x","y"],c:["dx1","dy1","dx2","dy2","dx","dy"],S:["x2","y2","x","y"],s:["dx2","dy2","dx","dy"],Q:["x1","y1","x","y"],q:["dx1","dy1","dx","dy"],T:["x","y"],t:["dx","dy"],A:["rx","ry","rotation","large-arc","sweep","x","y"],a:["rx","ry","rotation","large-arc","sweep","dx","dy"]};function Lut(n){const e=n.replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").trim().split(/\s*,|\s+/),r=[];let i="",a={};for(;e.length>0;){let o=e.shift();o in Poe?i=o:e.unshift(o),a={type:i},Poe[i].forEach(c=>{o=e.shift(),a[c]=o}),i==="M"?i="L":i==="m"&&(i="l");const[s,...l]=Object.values(a);r.push([s,...l.map(Number)])}return r}function kut(n){const e=[];return(typeof n=="string"?Lut(n):n).forEach(i=>{const a=i[0];if(a==="Z"){e.push(e[0]);return}if(a!=="A")for(let o=1;o<i.length;o=o+2)e.push([i[o],i[o+1],0]);else{const o=i.length;e.push([i[o-2],i[o-1],0])}}),e}const YEe=n=>{if(n.length<2)return[["M",0,0],["L",0,0]];const e=n[0],r=n[1],i=n[n.length-1],a=n[n.length-2];n.unshift(a,i),n.push(e,r);const o=[["M",i[0],i[1]]];for(let s=1;s<n.length-2;s+=1){const[l,c]=n[s-1],[u,d]=n[s],[f,h]=n[s+1],[p,g]=s!==n.length-2?n[s+2]:[f,h],m=u+(f-l)/6,v=d+(h-c)/6,y=f-(p-u)/6,b=h-(g-d)/6;o.push(["C",m,v,y,b,f,h])}return o};function Fut(n,e,r,i,a,o,s){const[l,c]=Qh(n,e),u={textAlign:e==="left"?"right":e==="right"?"left":"center",textBaseline:e==="top"?"bottom":e==="bottom"?"top":"middle",transform:[["translate",l+r,c+i]]};if(e==="center"||!a)return u;const d=kut(o);if(!d||d.length<=3)return u;const f=d.map((g,m)=>{const v=g,y=d[(m+1)%d.length];return Ra(v,y)?null:[v,y]}).filter(Boolean),h=wut([l,c],f),p=VEe([l,c],h);if(p&&h&&(u.transform=[["translate",p[0]+r,p[1]+i]],s)){const g=Math.atan((h[0][1]-h[1][1])/(h[0][0]-h[1][0]));u.transform.push(["rotate",g/Math.PI*180]),u.textAlign="center",(e==="right"||e==="left")&&(g>0?u.textBaseline=e==="right"?"bottom":"top":u.textBaseline=e==="right"?"top":"bottom")}return u}var $ut=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};class PM extends RM{constructor(e){super(is({style:PM.defaultStyleProps},e))}getLabelStyle(e){if(!e.label||!e.d||e.d.length===0)return!1;const r=fo(this.getGraphicStyle(e),"label"),{maxWidth:i,offsetX:a,offsetY:o,autoRotate:s,placement:l,closeToPath:c}=r,u=$ut(r,["maxWidth","offsetX","offsetY","autoRotate","placement","closeToPath"]),d=this.shapeMap.key,f=d==null?void 0:d.getRenderBounds();return Object.assign(Fut(f,l,a,o,c,e.d,s),{wordWrapWidth:qEe(f,i)},u)}getKeyStyle(e){return this.getGraphicStyle(e)}render(e,r){this.upsert("key",Lc,this.getKeyStyle(e),r),this.upsert("label",dv,this.getLabelStyle(e),r)}}PM.defaultStyleProps={label:!0,labelPlacement:"bottom",labelCloseToPath:!0,labelAutoRotate:!0,labelOffsetX:0,labelOffsetY:0};function But(n){const e=[],r=i=>{i!=null&&i.children.length&&i.children.forEach(a=>{e.push(a),r(a)})};return r(n),e}function zut(n){const e=[];let r=n.parentNode;for(;r;)e.push(r),r=r.parentNode;return e}let TX=class extends MM{constructor(e){super(e),this.onMounted=()=>{this.handleRadius()},this.onAttrModified=()=>{this.handleRadius()},yb=this,this.isMutationObserved=!0,this.addEventListener(wr.MOUNTED,this.onMounted),this.addEventListener(wr.ATTR_MODIFIED,this.onAttrModified)}handleRadius(){const{radius:e,clipPath:r,width:i=0,height:a=0}=this.attributes;if(e&&i&&a){const[o,s]=this.getBounds().min,l={x:o,y:s,radius:e,width:i,height:a};if(r)Object.assign(this.parsedStyle.clipPath.style,l);else{const c=new ws({style:l});this.style.clipPath=c}}else r&&(this.style.clipPath=null)}};const Uj=new WeakMap;let yb=null;const AX=n=>{if(yb&&zut(yb).includes(n)){const e=Uj.get(n);e?e.includes(yb)||e.push(yb):Uj.set(n,[yb])}},RX=n=>{const e=Uj.get(n);e&&e.forEach(r=>r.handleRadius())};class XEe extends RM{constructor(e){super(e)}isImage(){const{src:e}=this.attributes;return!!e}getIconStyle(e=this.attributes){const{width:r=0,height:i=0}=e,a=this.getGraphicStyle(e);return this.isImage()?Object.assign({x:-r/2,y:-i/2},a):Object.assign({textBaseline:"middle",textAlign:"center"},a)}render(e=this.attributes,r=this){this.upsert("icon",this.isImage()?TX:Uy,this.getIconStyle(e),r)}}class KEe extends RM{get context(){return this.config.context}get parsedAttributes(){return this.attributes}onframe(){}animate(e,r){const i=super.animate(e,r);return i&&(i.onframe=()=>this.onframe(),i.finished.then(()=>this.onframe())),i}}var uA=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};class sf extends KEe{constructor(e){super(is({style:sf.defaultStyleProps},e)),this.type="node"}getSize(e=this.attributes){const{size:r}=e;return Uc(r)}getKeyStyle(e){const r=this.getGraphicStyle(e);return Object.assign(jEe(r,["label","halo","icon","badge","port"]))}getLabelStyle(e){if(e.label===!1||!e.labelText)return!1;const r=fo(this.getGraphicStyle(e),"label"),{placement:i,maxWidth:a,offsetX:o,offsetY:s}=r,l=uA(r,["placement","maxWidth","offsetX","offsetY"]),c=this.getShape("key").getLocalBounds();return Object.assign(Woe(c,i,o,s),{wordWrapWidth:qEe(c,a)},l)}getHaloStyle(e){if(e.halo===!1)return!1;const r=this.getKeyStyle(e),{fill:i}=r,a=uA(r,["fill"]),o=fo(this.getGraphicStyle(e),"halo");return Object.assign(Object.assign(Object.assign({},a),{stroke:i}),o)}getIconStyle(e){if(e.icon===!1||!e.iconText&&!e.iconSrc)return!1;const r=fo(this.getGraphicStyle(e),"icon");return Object.assign(Put(e.size,r),r)}getBadgesStyle(e){var r;const i=zj(this.shapeMap,"badge-"),a={};if(Object.keys(i).forEach(f=>{a[f]=!1}),e.badge===!1||!(!((r=e.badges)===null||r===void 0)&&r.length))return a;const{badges:o=[],badgePalette:s,opacity:l=1}=e,c=uA(e,["badges","badgePalette","opacity"]),u=HEe(s),d=fo(this.getGraphicStyle(c),"badge");return o.forEach((f,h)=>{a[h]=Object.assign(Object.assign({backgroundFill:u?u[h%(u==null?void 0:u.length)]:void 0,opacity:l},d),this.getBadgeStyle(f))}),a}getBadgeStyle(e){const r=this.getShape("key"),{placement:i="top",offsetX:a,offsetY:o}=e,s=uA(e,["placement","offsetX","offsetY"]),l=Woe(r.getLocalBounds(),i,a,o,!0);return Object.assign(Object.assign({},l),s)}getPortsStyle(e){var r;const i=this.getPorts(),a={};if(Object.keys(i).forEach(l=>{a[l]=!1}),e.port===!1||!(!((r=e.ports)===null||r===void 0)&&r.length))return a;const o=fo(this.getGraphicStyle(e),"port"),{ports:s=[]}=e;return s.forEach((l,c)=>{const u=l.key||c,d=Object.assign(Object.assign({},o),l);if(bCe(d))a[u]=!1;else{const[f,h]=this.getPortXY(e,l);a[u]=Object.assign({transform:[["translate",f,h]]},d)}}),a}getPortXY(e,r){const{placement:i="left"}=r,a=this.getShape("key");return DX(Uut(this.context,a),i)}getPorts(){return zj(this.shapeMap,"port-")}getCenter(){return this.getShape("key").getBounds().center}getIntersectPoint(e,r=!1){const i=this.getShape("key").getBounds();return xut(e,i,r)}drawHaloShape(e,r){const i=this.getHaloStyle(e),a=this.getShape("key");this.upsert("halo",a.constructor,i,r)}drawIconShape(e,r){const i=this.getIconStyle(e);this.upsert("icon",XEe,i,r),AX(this)}drawBadgeShapes(e,r){const i=this.getBadgesStyle(e);Object.keys(i).forEach(a=>{const o=i[a];this.upsert(`badge-${a}`,Y_,o,r)})}drawPortShapes(e,r){const i=this.getPortsStyle(e);Object.keys(i).forEach(a=>{const o=i[a],s=`port-${a}`;this.upsert(s,qp,o,r)})}drawLabelShape(e,r){const i=this.getLabelStyle(e);this.upsert("label",dv,i,r)}_drawKeyShape(e,r){return this.drawKeyShape(e,r)}render(e=this.parsedAttributes,r=this){this._drawKeyShape(e,r),this.getShape("key")&&(this.drawHaloShape(e,r),this.drawIconShape(e,r),this.drawBadgeShapes(e,r),this.drawLabelShape(e,r),this.drawPortShapes(e,r))}update(e){super.update(e),e&&("x"in e||"y"in e||"z"in e)&&RX(this)}onframe(){this.drawBadgeShapes(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this)}}sf.defaultStyleProps={x:0,y:0,size:32,droppable:!0,draggable:!0,port:!0,ports:[],portZIndex:2,portLinkToCenter:!1,badge:!0,badges:[],badgeZIndex:3,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloStrokeOpacity:.25,haloPointerEvents:"none",haloZIndex:-1,icon:!0,iconZIndex:1,label:!0,labelIsBillboard:!0,labelMaxWidth:"200%",labelPlacement:"bottom",labelWordWrap:!1,labelZIndex:0};function Uut(n,e){if(!n)return e.getLocalBounds();const r=n.canvas.getLayer(),i=e.cloneNode();by(i,"hidden"),r.appendChild(i);const a=i.getLocalBounds();return i.destroy(),a}let NM=class ZEe extends sf{constructor(e){super(is({style:ZEe.defaultStyleProps},e))}drawKeyShape(e,r){return this.upsert("key",qp,this.getKeyStyle(e),r)}getKeyStyle(e){const r=super.getKeyStyle(e);return Object.assign(Object.assign({},r),{r:Math.min(...this.getSize(e))/2})}getIconStyle(e){const r=super.getIconStyle(e),{r:i}=this.getShape("key").attributes,a=i*2*Lp;return r?Object.assign({width:a,height:a},r):!1}getIntersectPoint(e,r=!1){const i=this.getShape("key").getBounds();return J4(e,i,r)}};NM.defaultStyleProps={size:32};class tD extends sf{constructor(e){super(e)}get parsedAttributes(){return this.attributes}drawKeyShape(e,r){return this.upsert("key",zy,this.getKeyStyle(e),r)}getKeyStyle(e){const r=super.getKeyStyle(e);return Object.assign(Object.assign({},r),{points:this.getPoints(e)})}getIntersectPoint(e,r=!1){var i,a;const{points:o}=this.getShape("key").attributes,s=[+(((i=this.attributes)===null||i===void 0?void 0:i.x)||0),+(((a=this.attributes)===null||a===void 0?void 0:a.y)||0)];return UEe(e,s,o,!0,r).point}}class Vut extends tD{constructor(e){super(e)}getPoints(e){const[r,i]=this.getSize(e);return Cft(r,i)}}var Gut=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};class nD extends NM{constructor(e){super(is({style:nD.defaultStyleProps},e))}parseOuterR(){const{size:e}=this.parsedAttributes;return Math.min(...Uc(e))/2}parseInnerR(){const{innerR:e}=this.parsedAttributes;return Kr(e)?parseInt(e)/100*this.parseOuterR():e}drawDonutShape(e,r){const{donuts:i}=e;if(!(i!=null&&i.length))return;const a=i.map(f=>on(f)?{value:f}:f),o=fo(this.getGraphicStyle(e),"donut"),s=HEe(e.donutPalette);if(!s)return;const l=a.reduce((f,h)=>{var p;return f+((p=h.value)!==null&&p!==void 0?p:0)},0),c=this.parseOuterR(),u=this.parseInnerR();let d=0;a.forEach((f,h)=>{const{value:p=0,color:g=s[h%s.length]}=f,m=Gut(f,["value","color"]),v=(l===0?1/a.length:p/l)*360;this.upsert(`round${h}`,Lc,Object.assign(Object.assign(Object.assign({},o),{d:Wut(c,u,d,d+v),fill:g}),m),r),d+=v})}render(e,r=this){super.render(e,r),this.drawDonutShape(e,r)}}nD.defaultStyleProps={innerR:"50%",donuts:[],donutPalette:"tableau"};const dA=(n,e,r,i)=>[n+Math.sin(i)*r,e-Math.cos(i)*r],jut=(n,e,r,i)=>i<=0||r<=i?[["M",n-r,e],["A",r,r,0,1,1,n+r,e],["A",r,r,0,1,1,n-r,e],["Z"]]:[["M",n-r,e],["A",r,r,0,1,1,n+r,e],["A",r,r,0,1,1,n-r,e],["Z"],["M",n+i,e],["A",i,i,0,1,0,n-i,e],["A",i,i,0,1,0,n+i,e],["Z"]],Hut=(n,e,r,i,a,o)=>{const[s,l]=[a/360*2*Math.PI,o/360*2*Math.PI],c=[dA(n,e,i,s),dA(n,e,r,s),dA(n,e,r,l),dA(n,e,i,l)],u=l-s>Math.PI?1:0;return[["M",c[0][0],c[0][1]],["L",c[1][0],c[1][1]],["A",r,r,0,u,1,c[2][0],c[2][1]],["L",c[3][0],c[3][1]],["A",i,i,0,u,0,c[0][0],c[0][1]],["Z"]]},Wut=(n=0,e=0,r,i)=>{const[a,o]=[0,0];return Math.abs(r-i)%360<1e-6?jut(a,o,n,e):Hut(a,o,n,e,r,i)};class rD extends sf{constructor(e){super(is({style:rD.defaultStyleProps},e))}drawKeyShape(e,r){return this.upsert("key",EM,this.getKeyStyle(e),r)}getKeyStyle(e){const r=super.getKeyStyle(e),[i,a]=this.getSize(e);return Object.assign(Object.assign({},r),{rx:i/2,ry:a/2})}getIconStyle(e){const r=super.getIconStyle(e),{rx:i,ry:a}=this.getShape("key").attributes,o=Math.min(+i,+a)*2*Lp;return r?Object.assign({width:o,height:o},r):!1}getIntersectPoint(e,r=!1){const i=this.getShape("key").getBounds();return J4(e,i,r)}}rD.defaultStyleProps={size:[45,35]};class qut extends tD{constructor(e){super(e)}getOuterR(e){return e.outerR||Math.min(...this.getSize(e))/2}getPoints(e){return Aft(this.getOuterR(e))}getIconStyle(e){const r=super.getIconStyle(e),i=this.getOuterR(e)*Lp;return r?Object.assign({width:i,height:i},r):!1}}/*!
 * @antv/g-plugin-canvas-path-generator
 * @description A G plugin of path generator with Canvas2D API
 * @version 2.1.18
 * @date 4/14/2025, 2:54:31 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */function Yut(n,e){var r=e.cx,i=r===void 0?0:r,a=e.cy,o=a===void 0?0:a,s=e.r;n.arc(i,o,s,0,Math.PI*2,!1)}function Xut(n,e){var r=e.cx,i=r===void 0?0:r,a=e.cy,o=a===void 0?0:a,s=e.rx,l=e.ry;if(n.ellipse)n.ellipse(i,o,s,l,0,0,Math.PI*2,!1);else{var c=s>l?s:l,u=s>l?1:s/l,d=s>l?l/s:1;n.save(),n.scale(u,d),n.arc(i,o,c,0,Math.PI*2)}}function Kut(n,e){var r=e.x1,i=e.y1,a=e.x2,o=e.y2,s=e.markerStart,l=e.markerEnd,c=e.markerStartOffset,u=e.markerEndOffset,d=0,f=0,h=0,p=0,g=0,m,v;s&&Xr(s)&&c&&(m=a-r,v=o-i,g=Math.atan2(v,m),d=Math.cos(g)*(c||0),f=Math.sin(g)*(c||0)),l&&Xr(l)&&u&&(m=r-a,v=i-o,g=Math.atan2(v,m),h=Math.cos(g)*(u||0),p=Math.sin(g)*(u||0)),n.moveTo(r+d,i+f),n.lineTo(a+h,o+p)}function Zut(n,e){var r=e.markerStart,i=e.markerEnd,a=e.markerStartOffset,o=e.markerEndOffset,s=e.d,l=s.absolutePath,c=s.segments,u=0,d=0,f=0,h=0,p=0,g,m;if(r&&Xr(r)&&a){var v=r.parentNode.getStartTangent(),y=fe(v,2),b=y[0],x=y[1];g=b[0]-x[0],m=b[1]-x[1],p=Math.atan2(m,g),u=Math.cos(p)*(a||0),d=Math.sin(p)*(a||0)}if(i&&Xr(i)&&o){var _=i.parentNode.getEndTangent(),S=fe(_,2),M=S[0],E=S[1];g=M[0]-E[0],m=M[1]-E[1],p=Math.atan2(m,g),f=Math.cos(p)*(o||0),h=Math.sin(p)*(o||0)}for(var T=0;T<l.length;T++){var P=l[T],A=P[0],N=l[T+1],O=T===0&&(u!==0||d!==0),I=(T===l.length-1||N&&(N[0]==="M"||N[0]==="Z"))&&f!==0&&h!==0,D=O?[u,d]:[0,0],k=fe(D,2),$=k[0],B=k[1],F=I?[f,h]:[0,0],G=fe(F,2),z=G[0],U=G[1];switch(A){case"M":n.moveTo(P[1]+$,P[2]+B);break;case"L":n.lineTo(P[1]+z,P[2]+U);break;case"Q":n.quadraticCurveTo(P[1],P[2],P[3]+z,P[4]+U);break;case"C":n.bezierCurveTo(P[1],P[2],P[3],P[4],P[5]+z,P[6]+U);break;case"A":{var H=c[T].arcParams,X=H.cx,V=H.cy,W=H.rx,K=H.ry,q=H.startAngle,Q=H.endAngle,ie=H.xRotation,oe=H.sweepFlag;if(n.ellipse)n.ellipse(X,V,W,K,ie,q,Q,!!(1-oe));else{var ue=W>K?W:K,le=W>K?1:W/K,me=W>K?K/W:1;n.translate(X,V),n.rotate(ie),n.scale(le,me),n.arc(0,0,ue,q,Q,!!(1-oe)),n.scale(1/le,1/me),n.rotate(-ie),n.translate(-X,-V)}I&&n.lineTo(P[6]+f,P[7]+h);break}case"Z":n.closePath();break}}}function Qut(n,e){var r=e.markerStart,i=e.markerEnd,a=e.markerStartOffset,o=e.markerEndOffset,s=e.points.points,l=s.length,c=s[0][0],u=s[0][1],d=s[l-1][0],f=s[l-1][1],h=0,p=0,g=0,m=0,v=0,y,b;r&&Xr(r)&&a&&(y=s[1][0]-s[0][0],b=s[1][1]-s[0][1],v=Math.atan2(b,y),h=Math.cos(v)*(a||0),p=Math.sin(v)*(a||0)),i&&Xr(i)&&o&&(y=s[l-1][0]-s[0][0],b=s[l-1][1]-s[0][1],v=Math.atan2(b,y),g=Math.cos(v)*(o||0),m=Math.sin(v)*(o||0)),n.moveTo(c+(h||g),u+(p||m));for(var x=1;x<l-1;x++){var _=s[x];n.lineTo(_[0],_[1])}n.lineTo(d,f)}function Jut(n,e){var r=e.markerStart,i=e.markerEnd,a=e.markerStartOffset,o=e.markerEndOffset,s=e.points.points,l=s.length,c=s[0][0],u=s[0][1],d=s[l-1][0],f=s[l-1][1],h=0,p=0,g=0,m=0,v=0,y,b;r&&Xr(r)&&a&&(y=s[1][0]-s[0][0],b=s[1][1]-s[0][1],v=Math.atan2(b,y),h=Math.cos(v)*(a||0),p=Math.sin(v)*(a||0)),i&&Xr(i)&&o&&(y=s[l-2][0]-s[l-1][0],b=s[l-2][1]-s[l-1][1],v=Math.atan2(b,y),g=Math.cos(v)*(o||0),m=Math.sin(v)*(o||0)),n.moveTo(c+h,u+p);for(var x=1;x<l-1;x++){var _=s[x];n.lineTo(_[0],_[1])}n.lineTo(d+g,f+m)}function edt(n,e){var r=e.x,i=r===void 0?0:r,a=e.y,o=a===void 0?0:a,s=e.radius,l=e.width,c=e.height,u=l,d=c,f=s&&s.some(function(S){return S!==0});if(!f)n.rect(i,o,u,d);else{var h=l>0?1:-1,p=c>0?1:-1,g=h+p===0,m=s.map(function(S){return Ta(S,0,Math.min(Math.abs(u)/2,Math.abs(d)/2))}),v=fe(m,4),y=v[0],b=v[1],x=v[2],_=v[3];n.moveTo(h*y+i,o),n.lineTo(u-h*b+i,o),b!==0&&n.arc(u-h*b+i,p*b+o,b,-p*Math.PI/2,h>0?0:Math.PI,g),n.lineTo(u+i,d-p*x+o),x!==0&&n.arc(u-h*x+i,d-p*x+o,x,h>0?0:Math.PI,p>0?Math.PI/2:1.5*Math.PI,g),n.lineTo(h*_+i,d+o),_!==0&&n.arc(h*_+i,d-p*_+o,_,p>0?Math.PI/2:-Math.PI/2,h>0?Math.PI:0,g),n.lineTo(i,p*y+o),y!==0&&n.arc(h*y+i,p*y+o,y,h>0?Math.PI:0,p>0?Math.PI*1.5:Math.PI/2,g)}}var tdt=function(n){function e(){var r;st(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=dr(this,e,[].concat(a)),r.name="canvas-path-generator",r}return $n(e,n),lt(e,[{key:"init",value:function(){var i,a=(i={},re(re(re(re(re(re(re(re(re(re(i,at.CIRCLE,Yut),at.ELLIPSE,Xut),at.RECT,edt),at.LINE,Kut),at.POLYLINE,Jut),at.POLYGON,Qut),at.PATH,Zut),at.TEXT,void 0),at.GROUP,void 0),at.IMAGE,void 0),re(re(re(i,at.HTML,void 0),at.MESH,void 0),at.FRAGMENT,void 0));this.context.pathGeneratorFactory=a}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])}(lv);/*!
 * @antv/g-plugin-canvas-picker
 * @description A G plugin for picking in canvas
 * @version 2.1.21
 * @date 4/14/2025, 2:56:35 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var ndt=Nr(),rdt=Nr(),idt=Nr(),adt=$i(),QEe=function(){function n(){var e=this;st(this,n),this.isHit=function(r,i,a,o){var s=e.context.pointInPathPickerFactory[r.nodeName];if(s){var l=$f(adt,a),c=Gs(rdt,zs(idt,i[0],i[1],0),l);if(s(r,new hs(c[0],c[1]),o,e.isPointInPath,e.context,e.runtime))return!0}return!1},this.isPointInPath=function(r,i){var a=e.runtime.offscreenCanvasCreator.getOrCreateContext(e.context.config.offscreenCanvas),o=e.context.pathGeneratorFactory[r.nodeName];return o&&(a.beginPath(),o(a,r.parsedStyle),a.closePath()),a.isPointInPath(i.x,i.y)}}return lt(n,[{key:"apply",value:function(r,i){var a,o=this,s=r.renderingService,l=r.renderingContext;this.context=r,this.runtime=i;var c=(a=l.root)===null||a===void 0?void 0:a.ownerDocument;s.hooks.pick.tapPromise(n.tag,function(){var u=bl(pi().mark(function d(f){return pi().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",o.pick(c,f));case 1:case"end":return p.stop()}},d)}));return function(d){return u.apply(this,arguments)}}()),s.hooks.pickSync.tap(n.tag,function(u){return o.pick(c,u)})}},{key:"pick",value:function(r,i){var a=i.topmost,o=i.position,s=o.x,l=o.y,c=zs(ndt,s,l,0),u=r.elementsFromBBox(c[0],c[1],c[0],c[1]),d=[],f=c0(u),h;try{for(f.s();!(h=f.n()).done;){var p=h.value,g=p.getWorldTransform(),m=this.isHit(p,c,g,!1);if(m){var v=eEe(p);if(v){var y=v.parsedStyle.clipPath,b=this.isHit(y,c,y.getWorldTransform(),!0);if(b){if(a)return i.picked=[p],i;d.push(p)}}else{if(a)return i.picked=[p],i;d.push(p)}}}}catch(x){f.e(x)}finally{f.f()}return i.picked=d,i}}])}();QEe.tag="CanvasPicker";function odt(n,e,r){var i=n.parsedStyle,a=i.cx,o=a===void 0?0:a,s=i.cy,l=s===void 0?0:s,c=i.r,u=i.fill,d=i.stroke,f=i.lineWidth,h=f===void 0?1:f,p=i.increasedLineWidthForHitTesting,g=p===void 0?0:p,m=i.pointerEvents,v=m===void 0?"auto":m,y=(h+g)/2,b=xp(o,l,e.x,e.y),x=By(v,u,d),_=fe(x,2),S=_[0],M=_[1];return S&&M||r?b<=c+y:S?b<=c:M?b>=c-y&&b<=c+y:!1}function fA(n,e,r,i){return n/(r*r)+e/(i*i)}function sdt(n,e,r){var i=n.parsedStyle,a=i.cx,o=a===void 0?0:a,s=i.cy,l=s===void 0?0:s,c=i.rx,u=i.ry,d=i.fill,f=i.stroke,h=i.lineWidth,p=h===void 0?1:h,g=i.increasedLineWidthForHitTesting,m=g===void 0?0:g,v=i.pointerEvents,y=v===void 0?"auto":v,b=e.x,x=e.y,_=By(y,d,f),S=fe(_,2),M=S[0],E=S[1],T=(p+m)/2,P=(b-o)*(b-o),A=(x-l)*(x-l);return M&&E||r?fA(P,A,c+T,u+T)<=1:M?fA(P,A,c,u)<=1:E?fA(P,A,c-T,u-T)>=1&&fA(P,A,c+T,u+T)<=1:!1}function O0(n,e,r,i,a,o){return a>=n&&a<=n+r&&o>=e&&o<=e+i}function ldt(n,e,r,i,a,o,s){var l=a/2;return O0(n-l,e-l,r,a,o,s)||O0(n+r-l,e-l,a,i,o,s)||O0(n+l,e+i-l,r,a,o,s)||O0(n-l,e+l,a,i,o,s)}function hA(n,e,r,i,a,o,s,l){var c=(Math.atan2(l-e,s-n)+Math.PI*2)%(Math.PI*2),u={x:n+r*Math.cos(c),y:e+r*Math.sin(c)};return xp(u.x,u.y,s,l)<=o/2}function om(n,e,r,i,a,o,s){var l=Math.min(n,r),c=Math.max(n,r),u=Math.min(e,i),d=Math.max(e,i),f=a/2;return o>=l-f&&o<=c+f&&s>=u-f&&s<=d+f?tat(n,e,r,i,o,s)<=a/2:!1}function JEe(n,e,r,i,a){var o=n.length;if(o<2)return!1;for(var s=0;s<o-1;s++){var l=n[s][0],c=n[s][1],u=n[s+1][0],d=n[s+1][1];if(om(l,c,u,d,e,r,i))return!0}if(a){var f=n[0],h=n[o-1];if(om(f[0],f[1],h[0],h[1],e,r,i))return!0}return!1}var cdt=1e-6;function RF(n){return Math.abs(n)<cdt?0:n<0?-1:1}function udt(n,e,r){return(r[0]-n[0])*(e[1]-n[1])===(e[0]-n[0])*(r[1]-n[1])&&Math.min(n[0],e[0])<=r[0]&&r[0]<=Math.max(n[0],e[0])&&Math.min(n[1],e[1])<=r[1]&&r[1]<=Math.max(n[1],e[1])}function eCe(n,e,r){var i=!1,a=n.length;if(a<=2)return!1;for(var o=0;o<a;o++){var s=n[o],l=n[(o+1)%a];if(udt(s,l,[e,r]))return!0;RF(s[1]-r)>0!=RF(l[1]-r)>0&&RF(e-(r-s[1])*(s[0]-l[0])/(s[1]-l[1])-s[0])<0&&(i=!i)}return i}function Noe(n,e,r){for(var i=!1,a=0;a<n.length;a++){var o=n[a];if(i=eCe(o,e,r),i)break}return i}function ddt(n,e,r){var i=n.parsedStyle,a=i.x1,o=i.y1,s=i.x2,l=i.y2,c=i.lineWidth,u=c===void 0?1:c,d=i.increasedLineWidthForHitTesting,f=d===void 0?0:d,h=i.pointerEvents,p=h===void 0?"auto":h,g=i.fill,m=i.stroke,v=By(p,g,m),y=fe(v,2),b=y[1];return!b&&!r||!u?!1:om(a,o,s,l,u+f,e.x,e.y)}function fdt(n,e,r,i,a){for(var o=!1,s=e/2,l=0;l<n.length;l++){var c=n[l],u=c.currentPoint,d=c.params,f=c.prePoint,h=c.box;if(!(h&&!O0(h.x-s,h.y-s,h.width+e,h.height+e,r,i)))switch(c.command){case"L":case"Z":if(o=om(f[0],f[1],u[0],u[1],e,r,i),o)return!0;break;case"Q":var p=lat(f[0],f[1],d[1],d[2],d[3],d[4],r,i);if(o=p<=e/2,o)return!0;break;case"C":var g=Dae(f[0],f[1],d[1],d[2],d[3],d[4],d[5],d[6],r,i,a);if(o=g<=e/2,o)return!0;break;case"A":c.cubicParams||(c.cubicParams=oX(f[0],f[1],d[1],d[2],d[3],d[4],d[5],d[6],d[7],void 0));for(var m=c.cubicParams,v=f,y=0;y<m.length;y+=6){var b=Dae(v[0],v[1],m[y],m[y+1],m[y+2],m[y+3],m[y+4],m[y+5],r,i,a);if(v=[m[y+4],m[y+5]],o=b<=e/2,o)return!0}break}}return o}function hdt(n,e,r,i,a,o){var s=n.parsedStyle,l=s.lineWidth,c=l===void 0?1:l,u=s.increasedLineWidthForHitTesting,d=u===void 0?0:u,f=s.stroke,h=s.fill,p=s.d,g=s.pointerEvents,m=g===void 0?"auto":g,v=p.segments,y=p.hasArc,b=p.polylines,x=p.polygons,_=By(m,(x==null?void 0:x.length)&&h,f),S=fe(_,2),M=S[0],E=S[1],T=Pj(n),P=!1;return M||r?(y?P=i(n,e):P=Noe(x,e.x,e.y)||Noe(b,e.x,e.y),P):((E||r)&&(P=fdt(v,c+d,e.x,e.y,T)),P)}function pdt(n,e,r){var i=n.parsedStyle,a=i.stroke,o=i.fill,s=i.lineWidth,l=s===void 0?1:s,c=i.increasedLineWidthForHitTesting,u=c===void 0?0:c,d=i.points,f=i.pointerEvents,h=f===void 0?"auto":f,p=By(h,o,a),g=fe(p,2),m=g[0],v=g[1],y=!1;return(v||r)&&(y=JEe(d.points,l+u,e.x,e.y,!0)),!y&&(m||r)&&(y=eCe(d.points,e.x,e.y)),y}function gdt(n,e,r){var i=n.parsedStyle,a=i.lineWidth,o=a===void 0?1:a,s=i.increasedLineWidthForHitTesting,l=s===void 0?0:s,c=i.points,u=i.pointerEvents,d=u===void 0?"auto":u,f=i.fill,h=i.stroke,p=By(d,f,h),g=fe(p,2),m=g[1];return!m&&!r||!o?!1:JEe(c.points,o+l,e.x,e.y,!1)}function mdt(n,e,r,i,a){var o=n.parsedStyle,s=o.radius,l=o.fill,c=o.stroke,u=o.lineWidth,d=u===void 0?1:u,f=o.increasedLineWidthForHitTesting,h=f===void 0?0:f,p=o.x,g=p===void 0?0:p,m=o.y,v=m===void 0?0:m,y=o.width,b=o.height,x=o.pointerEvents,_=x===void 0?"auto":x,S=By(_,l,c),M=fe(S,2),E=M[0],T=M[1],P=s&&s.some(function(I){return I!==0}),A=d+h;if(P){var O=!1;return(T||r)&&(O=vdt(g,v,y,b,s.map(function(I){return Ta(I,0,Math.min(Math.abs(y)/2,Math.abs(b)/2))}),A,e.x,e.y)),!O&&(E||r)&&(O=i(n,e)),O}else{var N=A/2;if(E&&T||r)return O0(g-N,v-N,y+N,b+N,e.x,e.y);if(E)return O0(g,v,y,b,e.x,e.y);if(T)return ldt(g,v,y,b,A,e.x,e.y)}return!1}function vdt(n,e,r,i,a,o,s,l){var c=fe(a,4),u=c[0],d=c[1],f=c[2],h=c[3];return om(n+u,e,n+r-d,e,o,s,l)||om(n+r,e+d,n+r,e+i-f,o,s,l)||om(n+r-f,e+i,n+h,e+i,o,s,l)||om(n,e+i-h,n,e+u,o,s,l)||hA(n+r-d,e+d,d,1.5*Math.PI,2*Math.PI,o,s,l)||hA(n+r-f,e+i-f,f,0,.5*Math.PI,o,s,l)||hA(n+h,e+i-h,h,.5*Math.PI,Math.PI,o,s,l)||hA(n+u,e+u,u,Math.PI,1.5*Math.PI,o,s,l)}function ydt(n,e,r,i,a,o){var s=n.parsedStyle,l=s.pointerEvents,c=l===void 0?"auto":l,u=s.x,d=u===void 0?0:u,f=s.y,h=f===void 0?0:f,p=s.width,g=s.height;if(c==="non-transparent-pixel"){var m=a.config.offscreenCanvas,v=o.offscreenCanvasCreator.getOrCreateCanvas(m),y=o.offscreenCanvasCreator.getOrCreateContext(m,{willReadFrequently:!0});v.width=p,v.height=g,a.defaultStyleRendererFactory[at.IMAGE].render(y,se(se({},n.parsedStyle),{},{x:0,y:0}),n,void 0,void 0,void 0);var b=y.getImageData(e.x-d,e.y-h,1,1).data;return b.every(function(x){return x!==0})}return!0}function bdt(n,e,r,i){var a=n.getGeometryBounds();return e.x>=a.min[0]&&e.y>=a.min[1]&&e.x<=a.max[0]&&e.y<=a.max[1]}var xdt=function(n){function e(){var r;st(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=dr(this,e,[].concat(a)),r.name="canvas-picker",r}return $n(e,n),lt(e,[{key:"init",value:function(){var i,a=(i={},re(re(re(re(re(re(re(re(re(re(i,at.CIRCLE,odt),at.ELLIPSE,sdt),at.RECT,mdt),at.LINE,ddt),at.POLYLINE,gdt),at.POLYGON,pdt),at.PATH,hdt),at.TEXT,bdt),at.GROUP,null),at.IMAGE,ydt),re(re(i,at.HTML,null),at.MESH,null));this.context.pointInPathPickerFactory=a,this.addRenderingPlugin(new QEe)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])}(lv);function xf(n,e){if(!{}.hasOwnProperty.call(n,e))throw new TypeError("attempted to use private field on non-instance");return n}var _dt=0;function wdt(n){return"__private_"+_dt+++"_"+n}/*!
 * @antv/g-plugin-image-loader
 * @description A G plugin for loading image
 * @version 2.1.21
 * @date 4/14/2025, 2:54:58 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Sdt=function(){function n(){st(this,n),this.cacheStore=new Map}return lt(n,[{key:"onRefAdded",value:function(r){}},{key:"has",value:function(r){return this.cacheStore.has(r)}},{key:"put",value:function(r,i,a){return this.cacheStore.has(r)?!1:(this.cacheStore.set(r,{value:i,counter:new Set([a])}),this.onRefAdded(a),!0)}},{key:"get",value:function(r,i){var a=this.cacheStore.get(r);return a?(a.counter.has(i)||(a.counter.add(i),this.onRefAdded(i)),a.value):null}},{key:"update",value:function(r,i,a){var o=this.cacheStore.get(r);return o?(o.value=se(se({},o.value),i),o.counter.has(a)||(o.counter.add(a),this.onRefAdded(a)),!0):!1}},{key:"release",value:function(r,i){var a=this.cacheStore.get(r);return a?(a.counter.delete(i),a.counter.size<=0&&this.cacheStore.delete(r),!0):!1}},{key:"releaseRef",value:function(r){var i=this;Array.from(this.cacheStore.keys()).forEach(function(a){i.release(a,r)})}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])}(),PF=[],NF=[],Vj=function(){function n(){st(this,n)}return lt(n,null,[{key:"stop",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n.api;n.rafId&&(r.cancelAnimationFrame(n.rafId),n.rafId=null)}},{key:"executeTask",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n.api;PF.length<=0&&NF.length<=0||(NF.forEach(function(i){return i()}),NF=PF.splice(0,n.TASK_NUM_PER_FRAME),n.rafId=r.requestAnimationFrame(function(){n.executeTask(r)}))}},{key:"sliceImage",value:function(r,i,a,o){for(var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:n.api,c=r.naturalWidth||r.width,u=r.naturalHeight||r.height,d=i-s,f=a-s,h=Math.ceil(c/d),p=Math.ceil(u/f),g={tileSize:[i,a],gridSize:[p,h],tiles:Array(p).fill(null).map(function(){return Array(h).fill(null)})},m=function(b){for(var x=function(M){PF.push(function(){var E=M*d,T=b*f,P=[Math.min(i,c-E),Math.min(a,u-T)],A=P[0],N=P[1],O=l.createCanvas();O.width=i,O.height=a;var I=O.getContext("2d");I.drawImage(r,E,T,A,N,0,0,A,N),g.tiles[b][M]={x:E,y:T,tileX:M,tileY:b,data:O},o()})},_=0;_<h;_++)x(_)},v=0;v<p;v++)m(v);return n.stop(),n.executeTask(),g}}])}();Vj.TASK_NUM_PER_FRAME=10;var xc=new Sdt;xc.onRefAdded=function(e){var r=this;e.addEventListener(wr.DESTROY,function(){r.releaseRef(e)},{once:!0})};var PX=function(){function n(e,r){st(this,n),this.gradientCache={},this.patternCache={},this.context=e,this.runtime=r}return lt(n,[{key:"getImageSync",value:function(r,i,a){var o=Kr(r)?r:r.src;if(xc.has(o)){var s=xc.get(o,i);if(s.img.complete)return a==null||a(s),s}return this.getOrCreateImage(r,i).then(function(l){a==null||a(l)}).catch(function(l){console.error(l)}),null}},{key:"getOrCreateImage",value:function(r,i){var a=this,o=Kr(r)?r:r.src;if(!Kr(r)&&!xc.has(o)){var s={img:r,size:[r.naturalWidth||r.width,r.naturalHeight||r.height],tileSize:pA(r)};xc.put(o,s,i)}if(xc.has(o)){var l=xc.get(o,i);return l.img.complete?Promise.resolve(l):new Promise(function(c,u){l.img.addEventListener("load",function(){l.size=[l.img.naturalWidth||l.img.width,l.img.naturalHeight||l.img.height],l.tileSize=pA(l.img),c(l)}),l.img.addEventListener("error",function(d){u(d)})})}return new Promise(function(c,u){var d=a.context.config.createImage();if(d){var f={img:d,size:[0,0],tileSize:pA(d)};xc.put(o,f,i),d.onload=function(){f.size=[d.naturalWidth||d.width,d.naturalHeight||d.height],f.tileSize=pA(f.img),c(f)},d.onerror=function(h){u(h)},d.crossOrigin="Anonymous",d.src=o}})}},{key:"createDownSampledImage",value:function(){var e=bl(pi().mark(function i(a,o){var s,l,c,u,d,f,h,p,g,m,v,y,b,x;return pi().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,this.getOrCreateImage(a,o);case 2:if(s=S.sent,!(typeof s.downSamplingRate<"u")){S.next=5;break}return S.abrupt("return",s);case 5:if(l=this.context.config.enableLargeImageOptimization,c=typeof l=="boolean"?{}:l,u=c.maxDownSampledImageSize,d=u===void 0?2048:u,f=c.downSamplingRateThreshold,h=f===void 0?.5:f,p=this.runtime.globalThis.createImageBitmap,g=fe(s.size,2),m=g[0],v=g[1],y=s.img,b=Math.min((d+d)/(m+v),Math.max(.01,Math.min(h,.5))),x=se(se({},s),{},{downSamplingRate:b}),xc.update(s.img.src,x,o),!p){S.next=25;break}return S.prev=14,S.next=17,p(s.img,{resizeWidth:m*b,resizeHeight:v*b});case 17:y=S.sent,S.next=23;break;case 20:S.prev=20,S.t0=S.catch(14),b=1;case 23:S.next=26;break;case 25:b=1;case 26:return x=se(se({},this.getImageSync(a,o)),{},{downSampled:y,downSamplingRate:b}),xc.update(s.img.src,x,o),S.abrupt("return",x);case 29:case"end":return S.stop()}},i,this,[[14,20]])}));function r(i,a){return e.apply(this,arguments)}return r}()},{key:"createImageTiles",value:function(){var e=bl(pi().mark(function i(a,o,s,l){var c,u,d,f,h;return pi().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,this.getOrCreateImage(a,l);case 2:return c=g.sent,u=l.ownerDocument.defaultView,d=u.requestAnimationFrame,f=u.cancelAnimationFrame,Vj.api={requestAnimationFrame:d,cancelAnimationFrame:f,createCanvas:function(){return pX.createCanvas()}},h=se(se({},c),Vj.sliceImage(c.img,c.tileSize[0],c.tileSize[0],s)),xc.update(c.img.src,h,l),g.abrupt("return",h);case 8:case"end":return g.stop()}},i,this)}));function r(i,a,o,s){return e.apply(this,arguments)}return r}()},{key:"releaseImage",value:function(r,i){xc.release(Kr(r)?r:r.src,i)}},{key:"releaseImageRef",value:function(r){xc.releaseRef(r)}},{key:"getOrCreatePatternSync",value:function(r,i,a,o,s,l,c){var u=this.generatePatternKey(i);if(u&&this.patternCache[u])return this.patternCache[u];var d=i.image,f=i.repetition,h=i.transform,p,g=!1;if(Kr(d)){var m=this.getImageSync(d,r,c);p=m==null?void 0:m.img}else o?(p=o,g=!0):p=d;var v=p&&a.createPattern(p,f);if(v){var y;h?y=aEe(K2e(h),new qi({})):y=Hm($i()),g&&e2e(y,y,[1/s,1/s,1]),v.setTransform({a:y[0],b:y[1],c:y[4],d:y[5],e:y[12]+l[0],f:y[13]+l[1]})}return u&&v&&(this.patternCache[u]=v),v}},{key:"getOrCreateGradient",value:function(r,i){var a=this.generateGradientKey(r),o=r.type,s=r.steps,l=r.min,c=r.width,u=r.height,d=r.angle,f=r.cx,h=r.cy,p=r.size;if(this.gradientCache[a])return this.gradientCache[a];var g=null;if(o===rm.LinearGradient){var m=not(l,c,u,d),v=m.x1,y=m.y1,b=m.x2,x=m.y2;g=i.createLinearGradient(v,y,b,x)}else if(o===rm.RadialGradient){var _=rot(l,c,u,f,h,p),S=_.x,M=_.y,E=_.r;g=i.createRadialGradient(S,M,0,S,M,E)}return g&&(s.forEach(function(T){var P=T.offset,A=T.color;if(P.unit===Yt.kPercentage){var N;(N=g)===null||N===void 0||N.addColorStop(P.value/100,A.toString())}}),this.gradientCache[a]=g),this.gradientCache[a]}},{key:"generateGradientKey",value:function(r){var i=r.type,a=r.min,o=r.width,s=r.height,l=r.steps,c=r.angle,u=r.cx,d=r.cy,f=r.size;return"gradient-".concat(i,"-").concat((c==null?void 0:c.toString())||0,"-").concat((u==null?void 0:u.toString())||0,"-").concat((d==null?void 0:d.toString())||0,"-").concat((f==null?void 0:f.toString())||0,"-").concat(a[0],"-").concat(a[1],"-").concat(o,"-").concat(s,"-").concat(l.map(function(h){var p=h.offset,g=h.color;return"".concat(p).concat(g)}).join("-"))}},{key:"generatePatternKey",value:function(r){var i=r.image,a=r.repetition;if(Kr(i))return"pattern-".concat(i,"-").concat(a);if(i.nodeName==="rect")return"pattern-".concat(i.entity,"-").concat(a)}}])}();PX.isSupportTile=!!pX.createCanvas();function pA(n){if(!n.complete)return[0,0];var e=n.naturalWidth||n.width,r=n.naturalHeight||n.height,i=256;return[256,512].forEach(function(a){var o=Math.ceil(r/a),s=Math.ceil(e/a);o*s<1e3&&(i=a)}),[i,i]}var tCe=function(){function n(){st(this,n)}return lt(n,[{key:"apply",value:function(r){var i=r.renderingService,a=r.renderingContext,o=r.imagePool,s=a.root.ownerDocument.defaultView,l=function(f,h,p){var g=f.parsedStyle,m=g.width,v=g.height;m&&!v?f.setAttribute("height",p/h*m):!m&&v&&f.setAttribute("width",h/p*v)},c=function(f){var h=f.target,p=h.nodeName,g=h.attributes;if(p===at.IMAGE){var m=g.src,v=g.keepAspectRatio;o.getImageSync(m,h,function(y){var b=y.img,x=b.width,_=b.height;v&&l(h,x,_),h.renderable.dirty=!0,i.dirtify()})}},u=function(f){var h=f.target,p=f.attrName,g=f.prevValue,m=f.newValue;h.nodeName!==at.IMAGE||p!=="src"||(g!==m&&o.releaseImage(g,h),Kr(m)&&o.getOrCreateImage(m,h).then(function(v){var y=v.img,b=y.width,x=y.height;h.attributes.keepAspectRatio&&l(h,b,x),h.renderable.dirty=!0,i.dirtify()}).catch(function(){}))};i.hooks.init.tap(n.tag,function(){s.addEventListener(wr.MOUNTED,c),s.addEventListener(wr.ATTR_MODIFIED,u)}),i.hooks.destroy.tap(n.tag,function(){s.removeEventListener(wr.MOUNTED,c),s.removeEventListener(wr.ATTR_MODIFIED,u)})}}])}();tCe.tag="LoadImage";var Edt=function(n){function e(){var r;st(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=dr(this,e,[].concat(a)),r.name="image-loader",r}return $n(e,n),lt(e,[{key:"init",value:function(i){this.context.imagePool=new PX(this.context,i),this.addRenderingPlugin(new tCe)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(lv);/*!
 * @antv/g-plugin-canvas-renderer
 * @description A G plugin of renderer implementation with Canvas2D API
 * @version 2.2.21
 * @date 4/14/2025, 2:55:44 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Ga=wdt("renderState"),nCe=function(){function n(e){st(this,n),this.removedRBushNodeAABBs=[],this.renderQueue=[],Object.defineProperty(this,Ga,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=$i(),this.dprMatrix=$i(),this.tmpMat4=$i(),this.vec3a=Nr(),this.vec3b=Nr(),this.vec3c=Nr(),this.vec3d=Nr(),this.canvasRendererPluginOptions=e}return lt(n,[{key:"apply",value:function(r,i){var a=this;this.context=r;var o=this.context,s=o.config,l=o.camera,c=o.renderingService,u=o.renderingContext,d=o.rBushRoot,f=o.pathGeneratorFactory,h=s.renderer.getConfig().enableRenderingOptimization;s.renderer.getConfig().enableDirtyCheck=!1,s.renderer.getConfig().enableDirtyRectangleRendering=!1,this.rBush=d,this.pathGeneratorFactory=f;var p=r.contextService,g=u.root.ownerDocument.defaultView,m=function(x){var _=x.target,S=_.rBushNode;S.aabb&&a.removedRBushNodeAABBs.push(S.aabb)},v=function(x){var _=x.target,S=_.rBushNode;S.aabb&&a.removedRBushNodeAABBs.push(S.aabb)};c.hooks.init.tap(n.tag,function(){g.addEventListener(wr.UNMOUNTED,m),g.addEventListener(wr.CULLED,v);var b=p.getDPR(),x=s.width,_=s.height,S=p.getContext();a.clearRect(S,0,0,x*b,_*b,s.background)}),c.hooks.destroy.tap(n.tag,function(){g.removeEventListener(wr.UNMOUNTED,m),g.removeEventListener(wr.CULLED,v),a.renderQueue=[],a.removedRBushNodeAABBs=[],xf(a,Ga)[Ga]={restoreStack:[],prevObject:null,currentContext:null}}),c.hooks.beginFrame.tap(n.tag,function(){var b,x=p.getContext(),_=p.getDPR(),S=s.width,M=s.height,E=a.canvasRendererPluginOptions,T=E.dirtyObjectNumThreshold,P=E.dirtyObjectRatioThreshold,A=c.getStats(),N=A.total,O=A.rendered,I=O/N;a.clearFullScreen=a.clearFullScreenLastFrame||!((b=g.context.renderingPlugins[1])!==null&&b!==void 0&&b.isFirstTimeRenderingFinished)||c.disableDirtyRectangleRendering()||O>T&&I>P,x&&(typeof x.resetTransform=="function"?x.resetTransform():x.setTransform(1,0,0,1,0,0),a.clearFullScreen&&a.clearRect(x,0,0,S*_,M*_,s.background))});var y=function(x,_){for(var S=[x];S.length>0;){var M,E=S.pop();E.isVisible()&&!E.isCulled()&&(h?a.renderDisplayObjectOptimized(E,_,a.context,xf(a,Ga)[Ga],i):a.renderDisplayObject(E,_,a.context,xf(a,Ga)[Ga],i));for(var T=((M=E.sortable)===null||M===void 0||(M=M.sorted)===null||M===void 0?void 0:M.length)>0?E.sortable.sorted:E.childNodes,P=T.length-1;P>=0;P--)S.push(T[P])}};c.hooks.endFrame.tap(n.tag,function(){if(u.root.childNodes.length===0){a.clearFullScreenLastFrame=!0;return}h=s.renderer.getConfig().enableRenderingOptimization,xf(a,Ga)[Ga]={restoreStack:[],prevObject:null,currentContext:xf(a,Ga)[Ga].currentContext},xf(a,Ga)[Ga].currentContext.clear(),a.clearFullScreenLastFrame=!1;var b=p.getContext(),x=p.getDPR();if(u0(a.dprMatrix,[x,x,1]),Vs(a.vpMatrix,a.dprMatrix,l.getOrthoMatrix()),a.clearFullScreen)h?(b.save(),y(u.root,b),b.restore()):y(u.root,b),a.removedRBushNodeAABBs=[];else{var _=a.safeMergeAABB.apply(a,[a.mergeDirtyAABBs(a.renderQueue)].concat(ot(a.removedRBushNodeAABBs.map(function(W){var K=W.minX,q=W.minY,Q=W.maxX,ie=W.maxY,oe=new Bi;return oe.setMinMax([K,q,0],[Q,ie,0]),oe}))));if(a.removedRBushNodeAABBs=[],Bi.isEmpty(_)){a.renderQueue=[];return}var S=a.convertAABB2Rect(_),M=S.x,E=S.y,T=S.width,P=S.height,A=Gs(a.vec3a,[M,E,0],a.vpMatrix),N=Gs(a.vec3b,[M+T,E,0],a.vpMatrix),O=Gs(a.vec3c,[M,E+P,0],a.vpMatrix),I=Gs(a.vec3d,[M+T,E+P,0],a.vpMatrix),D=Math.min(A[0],N[0],I[0],O[0]),k=Math.min(A[1],N[1],I[1],O[1]),$=Math.max(A[0],N[0],I[0],O[0]),B=Math.max(A[1],N[1],I[1],O[1]),F=Math.floor(D),G=Math.floor(k),z=Math.ceil($-D),U=Math.ceil(B-k);b.save(),a.clearRect(b,F,G,z,U,s.background),b.beginPath(),b.rect(F,G,z,U),b.clip(),b.setTransform(a.vpMatrix[0],a.vpMatrix[1],a.vpMatrix[4],a.vpMatrix[5],a.vpMatrix[12],a.vpMatrix[13]);var H=s.renderer.getConfig(),X=H.enableDirtyRectangleRenderingDebug;X&&g.dispatchEvent(new so(Rc.DIRTY_RECTANGLE,{dirtyRect:{x:F,y:G,width:z,height:U}}));var V=a.searchDirtyObjects(_);V.sort(function(W,K){return W.sortable.renderOrder-K.sortable.renderOrder}).forEach(function(W){W&&W.isVisible()&&!W.isCulled()&&a.renderDisplayObject(W,b,a.context,xf(a,Ga)[Ga],i)}),b.restore(),a.renderQueue.forEach(function(W){a.saveDirtyAABB(W)}),a.renderQueue=[]}xf(a,Ga)[Ga].restoreStack.forEach(function(){b.restore()}),xf(a,Ga)[Ga].restoreStack=[]}),c.hooks.render.tap(n.tag,function(b){a.clearFullScreen||a.renderQueue.push(b)})}},{key:"clearRect",value:function(r,i,a,o,s,l){r.clearRect(i,a,o,s),l&&(r.fillStyle=l,r.fillRect(i,a,o,s))}},{key:"renderDisplayObjectOptimized",value:function(r,i,a,o,s){var l=r.nodeName,c=!1,u=!1,d=this.context.styleRendererFactory[l],f=this.pathGeneratorFactory[l],h=r.parsedStyle.clipPath;if(h){c=!o.prevObject||!fj(h.getWorldTransform(),o.prevObject.getWorldTransform()),c&&(this.applyWorldTransform(i,h),o.prevObject=null);var p=this.pathGeneratorFactory[h.nodeName];p&&(i.save(),u=!0,i.beginPath(),p(i,h.parsedStyle),i.closePath(),i.clip())}if(d){c=!o.prevObject||!fj(r.getWorldTransform(),o.prevObject.getWorldTransform()),c&&this.applyWorldTransform(i,r);var g=!o.prevObject;if(!g){var m=o.prevObject.nodeName;l===at.TEXT?g=m!==at.TEXT:l===at.IMAGE?g=m!==at.IMAGE:g=m===at.TEXT||m===at.IMAGE}d.applyStyleToContext(i,r,g,o),o.prevObject=r}f&&(i.beginPath(),f(i,r.parsedStyle),l!==at.LINE&&l!==at.PATH&&l!==at.POLYLINE&&i.closePath()),d&&d.drawToContext(i,r,xf(this,Ga)[Ga],this,s),u&&i.restore(),r.renderable.dirty=!1}},{key:"renderDisplayObject",value:function(r,i,a,o,s){var l=r.nodeName,c=o.restoreStack[o.restoreStack.length-1];c&&!(r.compareDocumentPosition(c)&da.DOCUMENT_POSITION_CONTAINS)&&(i.restore(),o.restoreStack.pop());var u=this.context.styleRendererFactory[l],d=this.pathGeneratorFactory[l],f=r.parsedStyle.clipPath;if(f){this.applyWorldTransform(i,f);var h=this.pathGeneratorFactory[f.nodeName];h&&(i.save(),o.restoreStack.push(r),i.beginPath(),h(i,f.parsedStyle),i.closePath(),i.clip())}u&&(this.applyWorldTransform(i,r),i.save(),this.applyAttributesToContext(i,r)),d&&(i.beginPath(),d(i,r.parsedStyle),l!==at.LINE&&l!==at.PATH&&l!==at.POLYLINE&&i.closePath()),u&&(u.render(i,r.parsedStyle,r,a,this,s),i.restore()),r.renderable.dirty=!1}},{key:"applyAttributesToContext",value:function(r,i){var a=i.parsedStyle,o=a.stroke,s=a.fill,l=a.opacity,c=a.lineDash,u=a.lineDashOffset;c&&r.setLineDash(c),Nn(u)||(r.lineDashOffset=u),Nn(l)||(r.globalAlpha*=l),!Nn(o)&&!Array.isArray(o)&&!o.isNone&&(r.strokeStyle=i.attributes.stroke),!Nn(s)&&!Array.isArray(s)&&!s.isNone&&(r.fillStyle=i.attributes.fill)}},{key:"convertAABB2Rect",value:function(r){var i=r.getMin(),a=r.getMax(),o=Math.floor(i[0]),s=Math.floor(i[1]),l=Math.ceil(a[0]),c=Math.ceil(a[1]),u=l-o,d=c-s;return{x:o,y:s,width:u,height:d}}},{key:"mergeDirtyAABBs",value:function(r){var i=new Bi;return r.forEach(function(a){var o=a.getRenderBounds();i.add(o);var s=a.renderable.dirtyRenderBounds;s&&i.add(s)}),i}},{key:"searchDirtyObjects",value:function(r){var i=r.getMin(),a=fe(i,2),o=a[0],s=a[1],l=r.getMax(),c=fe(l,2),u=c[0],d=c[1],f=this.rBush.search({minX:o,minY:s,maxX:u,maxY:d});return f.map(function(h){var p=h.displayObject;return p})}},{key:"saveDirtyAABB",value:function(r){var i=r.renderable;i.dirtyRenderBounds||(i.dirtyRenderBounds=new Bi);var a=r.getRenderBounds();a&&i.dirtyRenderBounds.update(a.center,a.halfExtents)}},{key:"applyWorldTransform",value:function(r,i,a){a?(Bx(this.tmpMat4,i.getLocalTransform()),Vs(this.tmpMat4,a,this.tmpMat4),Vs(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(Bx(this.tmpMat4,i.getWorldTransform()),Vs(this.tmpMat4,this.vpMatrix,this.tmpMat4)),r.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var r=new Bi,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return a.forEach(function(s){r.add(s)}),r}}])}();nCe.tag="CanvasRenderer";function fO(n,e,r,i,a,o,s){var l,c;if(n.image.nodeName==="rect"){var u=n.image.parsedStyle,d=u.width,f=u.height;c=i.contextService.getDPR();var h=i.config.offscreenCanvas;l=o.offscreenCanvasCreator.getOrCreateCanvas(h),l.width=d*c,l.height=f*c;var p=o.offscreenCanvasCreator.getOrCreateContext(h),g={restoreStack:[],prevObject:null,currentContext:new Map};n.image.forEach(function(v){a.renderDisplayObject(v,p,i,g,o)}),g.restoreStack.forEach(function(){p.restore()})}var m=s.getOrCreatePatternSync(e,n,r,l,c,e.getGeometryBounds().min,function(){e.renderable.dirty=!0,i.renderingService.dirtify()});return m}function hO(n,e,r,i){var a;if(n.type===rm.LinearGradient||n.type===rm.RadialGradient){var o=e.getGeometryBounds(),s=o&&o.halfExtents[0]*2||1,l=o&&o.halfExtents[1]*2||1,c=o&&o.min||[0,0];a=i.getOrCreateGradient(se(se({type:n.type},n.value),{},{min:c,width:s,height:l}),r)}return a}var gA=["shadowBlur","shadowOffsetX","shadowOffsetY"],Ooe=["lineCap","lineJoin","miterLimit"],to={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},Ioe={};function _a(n,e,r,i){var a=i.has(e)?i.get(e):to[e];return a!==r&&(e==="lineDash"?n.setLineDash(r):n[e]=r,i.set(e,r)),a}var Cdt=function(){function n(e){st(this,n),this.imagePool=e}return lt(n,[{key:"applyAttributesToContext",value:function(r,i){}},{key:"render",value:function(r,i,a,o,s,l){}},{key:"applyCommonStyleToContext",value:function(r,i,a,o){var s=a?Ioe:o.prevObject.parsedStyle,l=i.parsedStyle;(a||l.opacity!==s.opacity)&&_a(r,"globalAlpha",Nn(l.opacity)?to.globalAlpha:l.opacity,o.currentContext),(a||l.blend!==s.blend)&&_a(r,"globalCompositeOperation",Nn(l.blend)?to.globalCompositeOperation:l.blend,o.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(r,i,a,o){var s=a?Ioe:o.prevObject.parsedStyle,l=i.parsedStyle,c=l.lineWidth,u=c===void 0?to.lineWidth:c,d=l.fill&&!l.fill.isNone,f=l.stroke&&!l.stroke.isNone&&u>0;if(f){if(a||i.attributes.stroke!==o.prevObject.attributes.stroke){var h=!Nn(l.stroke)&&!Array.isArray(l.stroke)&&!l.stroke.isNone?i.attributes.stroke:to.strokeStyle;_a(r,"strokeStyle",h,o.currentContext)}(a||l.lineWidth!==s.lineWidth)&&_a(r,"lineWidth",Nn(l.lineWidth)?to.lineWidth:l.lineWidth,o.currentContext),(a||l.lineDash!==s.lineDash)&&_a(r,"lineDash",l.lineDash||to.lineDash,o.currentContext),(a||l.lineDashOffset!==s.lineDashOffset)&&_a(r,"lineDashOffset",Nn(l.lineDashOffset)?to.lineDashOffset:l.lineDashOffset,o.currentContext);for(var p=0;p<Ooe.length;p++){var g=Ooe[p];(a||l[g]!==s[g])&&_a(r,g,Nn(l[g])?to[g]:l[g],o.currentContext)}}if(d&&(a||i.attributes.fill!==o.prevObject.attributes.fill)){var m=!Nn(l.fill)&&!Array.isArray(l.fill)&&!l.fill.isNone?i.attributes.fill:to.fillStyle;_a(r,"fillStyle",m,o.currentContext)}}},{key:"applyStyleToContext",value:function(r,i,a,o){var s=i.nodeName;this.applyCommonStyleToContext(r,i,a,o),s===at.IMAGE||this.applyStrokeFillStyleToContext(r,i,a,o)}},{key:"applyShadowAndFilterStyleToContext",value:function(r,i,a,o){var s=i.parsedStyle;if(a){_a(r,"shadowColor",s.shadowColor.toString(),o.currentContext);for(var l=0;l<gA.length;l++){var c=gA[l];_a(r,c,s[c]||to[c],o.currentContext)}}s.filter&&s.filter.length&&_a(r,"filter",i.attributes.filter,o.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(r,i,a,o){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(i){_a(r,"shadowColor",to.shadowColor,o.currentContext);for(var l=0;l<gA.length;l++){var c=gA[l];_a(r,c,to[c],o.currentContext)}}if(a)if(i&&s){var u=r.filter;!Nn(u)&&u.indexOf("drop-shadow")>-1&&_a(r,"filter",u.replace(/drop-shadow\([^)]*\)/,"").trim()||to.filter,o.currentContext)}else _a(r,"filter",to.filter,o.currentContext)}},{key:"fillToContext",value:function(r,i,a,o,s){var l=this,c=i.parsedStyle,u=c.fill,d=c.fillRule,f=null;if(Array.isArray(u)&&u.length>0)u.forEach(function(p){var g=_a(r,"fillStyle",hO(p,i,r,l.imagePool),a.currentContext);f=f??g,d?r.fill(d):r.fill()});else{if(vy(u)){var h=fO(u,i,r,i.ownerDocument.defaultView.context,o,s,this.imagePool);h&&(r.fillStyle=h,f=!0)}d?r.fill(d):r.fill()}f!==null&&_a(r,"fillStyle",f,a.currentContext)}},{key:"strokeToContext",value:function(r,i,a,o,s){var l=this,c=i.parsedStyle.stroke,u=null;if(Array.isArray(c)&&c.length>0)c.forEach(function(h){var p=_a(r,"strokeStyle",hO(h,i,r,l.imagePool),a.currentContext);u=u??p,r.stroke()});else{if(vy(c)){var d=fO(c,i,r,i.ownerDocument.defaultView.context,o,s,this.imagePool);if(d){var f=_a(r,"strokeStyle",d,a.currentContext);u=u??f}}r.stroke()}u!==null&&_a(r,"strokeStyle",u,a.currentContext)}},{key:"drawToContext",value:function(r,i,a,o,s){var l,c=i.nodeName,u=i.parsedStyle,d=u.opacity,f=d===void 0?to.globalAlpha:d,h=u.fillOpacity,p=h===void 0?to.fillOpacity:h,g=u.strokeOpacity,m=g===void 0?to.strokeOpacity:g,v=u.lineWidth,y=v===void 0?to.lineWidth:v,b=u.fill&&!u.fill.isNone,x=u.stroke&&!u.stroke.isNone&&y>0;if(!(!b&&!x)){var _=!Nn(u.shadowColor)&&u.shadowBlur>0,S=u.shadowType==="inner",M=((l=u.fill)===null||l===void 0?void 0:l.alpha)===0,E=!!(u.filter&&u.filter.length),T=_&&x&&(c===at.PATH||c===at.LINE||c===at.POLYLINE||M||S),P=null;if(b){T||this.applyShadowAndFilterStyleToContext(r,i,_,a);var A=f*p;P=_a(r,"globalAlpha",A,a.currentContext),this.fillToContext(r,i,a,o,s),T||this.clearShadowAndFilterStyleForContext(r,_,E,a)}if(x){var N=!1,O=f*m,I=_a(r,"globalAlpha",O,a.currentContext);if(P=b?P:I,T&&(this.applyShadowAndFilterStyleToContext(r,i,_,a),N=!0,S)){var D=r.globalCompositeOperation;r.globalCompositeOperation="source-atop",this.strokeToContext(r,i,a,o,s),r.globalCompositeOperation=D,this.clearShadowAndFilterStyleForContext(r,_,E,a,!0)}this.strokeToContext(r,i,a,o,s),N&&this.clearShadowAndFilterStyleForContext(r,_,E,a)}P!==null&&_a(r,"globalAlpha",P,a.currentContext)}}}])}(),NX=function(n){function e(){return st(this,e),dr(this,e,arguments)}return $n(e,n),lt(e,[{key:"render",value:function(i,a,o,s,l,c){var u=a.fill,d=a.fillRule,f=a.opacity,h=f===void 0?1:f,p=a.fillOpacity,g=p===void 0?1:p,m=a.stroke,v=a.strokeOpacity,y=v===void 0?1:v,b=a.lineWidth,x=b===void 0?1:b,_=a.lineCap,S=a.lineJoin,M=a.shadowType,E=a.shadowColor,T=a.shadowBlur,P=a.filter,A=a.miterLimit,N=u&&!u.isNone,O=m&&!m.isNone&&x>0,I=(u==null?void 0:u.alpha)===0,D=!!(P&&P.length),k=!Nn(E)&&T>0,$=o.nodeName,B=M==="inner",F=O&&k&&($===at.PATH||$===at.LINE||$===at.POLYLINE||I||B);N&&(i.globalAlpha=h*g,F||pO(o,i,k),rCe(i,o,u,d,s,l,c,this.imagePool),F||this.clearShadowAndFilter(i,D,k)),O&&(i.globalAlpha=h*y,i.lineWidth=x,Nn(A)||(i.miterLimit=A),Nn(_)||(i.lineCap=_),Nn(S)||(i.lineJoin=S),F&&(B&&(i.globalCompositeOperation="source-atop"),pO(o,i,!0),B&&(Gj(i,o,m,s,l,c,this.imagePool),i.globalCompositeOperation=to.globalCompositeOperation,this.clearShadowAndFilter(i,D,!0))),Gj(i,o,m,s,l,c,this.imagePool))}},{key:"clearShadowAndFilter",value:function(i,a,o){if(o&&(i.shadowColor="transparent",i.shadowBlur=0),a){var s=i.filter;!Nn(s)&&s.indexOf("drop-shadow")>-1&&(i.filter=s.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])}(Cdt);function pO(n,e,r){var i=n.parsedStyle,a=i.filter,o=i.shadowColor,s=i.shadowBlur,l=i.shadowOffsetX,c=i.shadowOffsetY;a&&a.length&&(e.filter=n.style.filter),r&&(e.shadowColor=o.toString(),e.shadowBlur=s||0,e.shadowOffsetX=l||0,e.shadowOffsetY=c||0)}function rCe(n,e,r,i,a,o,s,l){var c=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1;Array.isArray(r)?r.forEach(function(u){n.fillStyle=hO(u,e,n,l),c||(i?n.fill(i):n.fill())}):(vy(r)&&(n.fillStyle=fO(r,e,n,a,o,s,l)),c||(i?n.fill(i):n.fill()))}function Gj(n,e,r,i,a,o,s){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;Array.isArray(r)?r.forEach(function(c){n.strokeStyle=hO(c,e,n,s),l||n.stroke()}):(vy(r)&&(n.strokeStyle=fO(r,e,n,i,a,o,s)),l||n.stroke())}function Mdt(n,e){var r=fe(n,4),i=r[0],a=r[1],o=r[2],s=r[3],l=fe(e,4),c=l[0],u=l[1],d=l[2],f=l[3],h=Math.max(i,c),p=Math.max(a,u),g=Math.min(i+o,c+d),m=Math.min(a+s,u+f);return g<=h||m<=p?null:[h,p,g-h,m-p]}function Tdt(n,e){var r=Gs(Nr(),[n[0],n[1],0],e),i=Gs(Nr(),[n[0]+n[2],n[1],0],e),a=Gs(Nr(),[n[0],n[1]+n[3],0],e),o=Gs(Nr(),[n[0]+n[2],n[1]+n[3],0],e);return[Math.min(r[0],i[0],a[0],o[0]),Math.min(r[1],i[1],a[1],o[1]),Math.max(r[0],i[0],a[0],o[0])-Math.min(r[0],i[0],a[0],o[0]),Math.max(r[1],i[1],a[1],o[1])-Math.min(r[1],i[1],a[1],o[1])]}var Adt=function(n){function e(){return st(this,e),dr(this,e,arguments)}return $n(e,n),lt(e,[{key:"renderDownSampled",value:function(i,a,o,s){var l=s.src,c=s.imageCache;if(!c.downSampled){this.imagePool.createDownSampledImage(l,o).then(function(){o.ownerDocument&&(o.renderable.dirty=!0,o.ownerDocument.defaultView.context.renderingService.dirtify())}).catch(function(u){console.error(u)});return}i.drawImage(c.downSampled,Math.floor(s.drawRect[0]),Math.floor(s.drawRect[1]),Math.ceil(s.drawRect[2]),Math.ceil(s.drawRect[3]))}},{key:"renderTile",value:function(i,a,o,s){var l=s.src,c=s.imageCache,u=s.imageRect,d=s.drawRect,f=c.size,h=i.getTransform(),p=h.a,g=h.b,m=h.c,v=h.d,y=h.e,b=h.f;if(i.resetTransform(),!(c!=null&&c.gridSize)){this.imagePool.createImageTiles(l,[],function(){o.ownerDocument&&(o.renderable.dirty=!0,o.ownerDocument.defaultView.context.renderingService.dirtify())},o).catch(function(k){console.error(k)});return}for(var x=[f[0]/u[2],f[1]/u[3]],_=[c.tileSize[0]/x[0],c.tileSize[1]/x[1]],S=[Math.floor((d[0]-u[0])/_[0]),Math.ceil((d[0]+d[2]-u[0])/_[0])],M=S[0],E=S[1],T=[Math.floor((d[1]-u[1])/_[1]),Math.ceil((d[1]+d[3]-u[1])/_[1])],P=T[0],A=T[1],N=P;N<=A;N++)for(var O=M;O<=E;O++){var I=c.tiles[N][O];if(I){var D=[Math.floor(u[0]+I.tileX*_[0]),Math.floor(u[1]+I.tileY*_[1]),Math.ceil(_[0]),Math.ceil(_[1])];i.drawImage(I.data,D[0],D[1],D[2],D[3])}}i.setTransform(p,g,m,v,y,b)}},{key:"render",value:function(i,a,o){var s=a.x,l=s===void 0?0:s,c=a.y,u=c===void 0?0:c,d=a.width,f=a.height,h=a.src,p=a.shadowColor,g=a.shadowBlur,m=this.imagePool.getImageSync(h,o),v=m==null?void 0:m.img,y=d,b=f;if(v){y||(y=v.width),b||(b=v.height);var x=!Nn(p)&&g>0;pO(o,i,x);try{var _=o.ownerDocument.defaultView.getContextService().getDomElement(),S=_.width,M=_.height,E=i.getTransform(),T=E.a,P=E.b,A=E.c,N=E.d,O=E.e,I=E.f,D=ZSe(T,A,0,0,P,N,0,0,0,0,1,0,O,I,0,1),k=Tdt([l,u,y,b],D),$=Mdt([0,0,S,M],k);if(!$)return;if(!o.ownerDocument.defaultView.getConfig().enableLargeImageOptimization){e.renderFull(i,a,o,{image:v,drawRect:[l,u,y,b]});return}var B=k[2]/m.size[0];if(B<(m.downSamplingRate||.5)){this.renderDownSampled(i,a,o,{src:h,imageCache:m,drawRect:[l,u,y,b]});return}if(!PX.isSupportTile){e.renderFull(i,a,o,{image:v,drawRect:[l,u,y,b]});return}this.renderTile(i,a,o,{src:h,imageCache:m,imageRect:k,drawRect:$})}catch{}}}},{key:"drawToContext",value:function(i,a,o,s,l){this.render(i,a.parsedStyle,a)}}],[{key:"renderFull",value:function(i,a,o,s){i.drawImage(s.image,Math.floor(s.drawRect[0]),Math.floor(s.drawRect[1]),Math.ceil(s.drawRect[2]),Math.ceil(s.drawRect[3]))}}])}(NX),Rdt=function(n){function e(){return st(this,e),dr(this,e,arguments)}return $n(e,n),lt(e,[{key:"render",value:function(i,a,o,s,l,c){o.getBounds();var u=a.lineWidth,d=u===void 0?1:u,f=a.textAlign,h=f===void 0?"start":f,p=a.textBaseline,g=p===void 0?"alphabetic":p,m=a.lineJoin,v=m===void 0?"miter":m,y=a.miterLimit,b=y===void 0?10:y,x=a.letterSpacing,_=x===void 0?0:x,S=a.stroke,M=a.fill,E=a.fillRule,T=a.fillOpacity,P=T===void 0?1:T,A=a.strokeOpacity,N=A===void 0?1:A,O=a.opacity,I=O===void 0?1:O,D=a.metrics,k=a.x,$=k===void 0?0:k,B=a.y,F=B===void 0?0:B,G=a.dx,z=a.dy,U=a.shadowColor,H=a.shadowBlur,X=D.font,V=D.lines,W=D.height,K=D.lineHeight,q=D.lineMetrics;i.font=X,i.lineWidth=d,i.textAlign=h==="middle"?"center":h;var Q=g;Q==="alphabetic"&&(Q="bottom"),i.lineJoin=v,Nn(b)||(i.miterLimit=b);var ie=F;g==="middle"?ie+=-W/2-K/2:g==="bottom"||g==="alphabetic"||g==="ideographic"?ie+=-W:(g==="top"||g==="hanging")&&(ie+=-K);var oe=$+(G||0);ie+=z||0,V.length===1&&(Q==="bottom"?(Q="middle",ie-=.5*W):Q==="top"&&(Q="middle",ie+=.5*W)),i.textBaseline=Q;var ue=!Nn(U)&&H>0;pO(o,i,ue);for(var le=0;le<V.length;le++){var me=d/2+oe;ie+=K,!Nn(S)&&!S.isNone&&d&&this.drawLetterSpacing(i,o,V[le],q[le],h,me,ie,_,M,E,P,S,N,I,!0,s,l,c),Nn(M)||this.drawLetterSpacing(i,o,V[le],q[le],h,me,ie,_,M,E,P,S,N,I,!1,s,l,c)}}},{key:"drawLetterSpacing",value:function(i,a,o,s,l,c,u,d,f,h,p,g,m,v,y,b,x,_){if(d===0){y?this.strokeText(i,a,o,c,u,g,m,b,x,_):this.fillText(i,a,o,c,u,f,h,p,v,b,x,_);return}var S=i.textAlign;i.textAlign="left";var M=c;l==="center"||l==="middle"?M=c-s.width/2:(l==="right"||l==="end")&&(M=c-s.width);for(var E=Array.from(o),T=i.measureText(o).width,P=0,A=0;A<E.length;++A){var N=E[A];y?this.strokeText(i,a,N,M,u,g,m,b,x,_):this.fillText(i,a,N,M,u,f,h,p,v,b,x,_),P=i.measureText(o.substring(A+1)).width,M+=T-P+d,T=P}i.textAlign=S}},{key:"fillText",value:function(i,a,o,s,l,c,u,d,f,h,p,g){rCe(i,a,c,u,h,p,g,this.imagePool,!0);var m,v=!Nn(d)&&d!==1;v&&(m=i.globalAlpha,i.globalAlpha=d*f),i.fillText(o,s,l),v&&(i.globalAlpha=m)}},{key:"strokeText",value:function(i,a,o,s,l,c,u,d,f,h){Gj(i,a,c,d,f,h,this.imagePool,!0);var p,g=!Nn(u)&&u!==1;g&&(p=i.globalAlpha,i.globalAlpha=u),i.strokeText(o,s,l),g&&(i.globalAlpha=p)}},{key:"drawToContext",value:function(i,a,o,s,l){this.render(i,a.parsedStyle,a,a.ownerDocument.defaultView.context,s,l)}}])}(NX),Pdt=function(n){function e(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return st(this,e),r=dr(this,e),r.name="canvas-renderer",r.options=i,r}return $n(e,n),lt(e,[{key:"init",value:function(){var i,a=se({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),o=this.context.imagePool,s=new NX(o),l=(i={},re(re(re(re(re(re(re(re(re(re(i,at.CIRCLE,s),at.ELLIPSE,s),at.RECT,s),at.IMAGE,new Adt(o)),at.TEXT,new Rdt(o)),at.LINE,s),at.POLYLINE,s),at.POLYGON,s),at.PATH,s),at.GROUP,void 0),re(re(re(i,at.HTML,void 0),at.MESH,void 0),at.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=l,this.context.styleRendererFactory=l,this.addRenderingPlugin(new nCe(a))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])}(lv);/*!
 * @antv/g-plugin-dom-interaction
 * @description A G plugin
 * @version 2.1.23
 * @date 4/14/2025, 2:54:44 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var iCe=function(){function n(){st(this,n)}return lt(n,[{key:"apply",value:function(r,i){var a=this,o=r.renderingService,s=r.renderingContext,l=r.config;this.context=r;var c=s.root.ownerDocument.defaultView,u=function(T){o.hooks.pointerMove.call(T)},d=function(T){o.hooks.pointerUp.call(T)},f=function(T){o.hooks.pointerDown.call(T)},h=function(T){o.hooks.pointerOver.call(T)},p=function(T){o.hooks.pointerOut.call(T)},g=function(T){o.hooks.pointerCancel.call(T)},m=function(T){o.hooks.pointerWheel.call(T)},v=function(T){o.hooks.click.call(T)},y=function(T){i.globalThis.document.addEventListener("pointermove",u,!0),T.addEventListener("pointerdown",f,!0),T.addEventListener("pointerleave",p,!0),T.addEventListener("pointerover",h,!0),i.globalThis.addEventListener("pointerup",d,!0),i.globalThis.addEventListener("pointercancel",g,!0)},b=function(T){T.addEventListener("touchstart",f,!0),T.addEventListener("touchend",d,!0),T.addEventListener("touchmove",u,!0),T.addEventListener("touchcancel",g,!0)},x=function(T){i.globalThis.document.addEventListener("mousemove",u,!0),T.addEventListener("mousedown",f,!0),T.addEventListener("mouseout",p,!0),T.addEventListener("mouseover",h,!0),i.globalThis.addEventListener("mouseup",d,!0)},_=function(T){i.globalThis.document.removeEventListener("pointermove",u,!0),T.removeEventListener("pointerdown",f,!0),T.removeEventListener("pointerleave",p,!0),T.removeEventListener("pointerover",h,!0),i.globalThis.removeEventListener("pointerup",d,!0),i.globalThis.removeEventListener("pointercancel",g,!0)},S=function(T){T.removeEventListener("touchstart",f,!0),T.removeEventListener("touchend",d,!0),T.removeEventListener("touchmove",u,!0),T.removeEventListener("touchcancel",g,!0)},M=function(T){i.globalThis.document.removeEventListener("mousemove",u,!0),T.removeEventListener("mousedown",f,!0),T.removeEventListener("mouseout",p,!0),T.removeEventListener("mouseover",h,!0),i.globalThis.removeEventListener("mouseup",d,!0)};o.hooks.init.tap(n.tag,function(){var E=a.context.contextService.getDomElement();i.globalThis.navigator.msPointerEnabled?(E.style.msContentZooming="none",E.style.msTouchAction="none"):c.supportsPointerEvents&&(E.style.touchAction="none"),c.supportsPointerEvents?y(E):x(E),c.supportsTouchEvents&&b(E),l.useNativeClickEvent&&E.addEventListener("click",v,!0),E.addEventListener("wheel",m,{passive:!0,capture:!0})}),o.hooks.destroy.tap(n.tag,function(){var E=a.context.contextService.getDomElement();i.globalThis.navigator.msPointerEnabled?(E.style.msContentZooming="",E.style.msTouchAction=""):c.supportsPointerEvents&&(E.style.touchAction=""),c.supportsPointerEvents?_(E):M(E),c.supportsTouchEvents&&S(E),l.useNativeClickEvent&&E.removeEventListener("click",v,!0),E.removeEventListener("wheel",m,!0)})}}])}();iCe.tag="DOMInteraction";var Ndt=function(n){function e(){var r;st(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=dr(this,e,[].concat(a)),r.name="dom-interaction",r}return $n(e,n),lt(e,[{key:"init",value:function(){this.addRenderingPlugin(new iCe)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(lv);/*!
 * @antv/g-plugin-html-renderer
 * @description A G plugin for rendering HTML
 * @version 2.1.23
 * @date 4/14/2025, 2:54:54 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Odt="g-canvas-camera",aCe=function(){function n(){st(this,n),this.displayObjectHTMLElementMap=new WeakMap}return lt(n,[{key:"joinTransformMatrix",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return"matrix(".concat([r[0],r[1],r[4],r[5],r[12]+i[0],r[13]+i[1]].join(","),")")}},{key:"apply",value:function(r,i){var a=this,o=r.camera,s=r.renderingContext,l=r.renderingService;this.context=r;var c=s.root.ownerDocument.defaultView,u=c.context.eventService.nativeHTMLMap,d=function(y,b){b.style.transform=a.joinTransformMatrix(y.getWorldTransform(),y.getOrigin())},f=function(y){var b=y.target;if(b.nodeName===at.HTML){a.$camera||(a.$camera=a.createCamera(o));var x=a.getOrCreateEl(b);a.$camera.appendChild(x),Object.keys(b.attributes).forEach(function(_){a.updateAttribute(_,b)}),d(b,x),u.set(x,b)}},h=function(y){var b=y.target;if(b.nodeName===at.HTML&&a.$camera){var x=a.getOrCreateEl(b);x&&(x.remove(),u.delete(x))}},p=function(y){var b=y.target;if(b.nodeName===at.HTML){var x=y.attrName;a.updateAttribute(x,b)}},g=function(y){var b=y.target,x=b.nodeName===at.FRAGMENT?b.childNodes:[b];x.forEach(function(_){if(_.nodeName===at.HTML){var S=a.getOrCreateEl(_);d(_,S)}})},m=function(){if(a.$camera){var y=a.context.config,b=y.width,x=y.height;a.$camera.parentElement.style.width="".concat(b||0,"px"),a.$camera.parentElement.style.height="".concat(x||0,"px")}};l.hooks.init.tap(n.tag,function(){c.addEventListener(Rc.RESIZE,m),c.addEventListener(wr.MOUNTED,f),c.addEventListener(wr.UNMOUNTED,h),c.addEventListener(wr.ATTR_MODIFIED,p),c.addEventListener(wr.BOUNDS_CHANGED,g)}),l.hooks.endFrame.tap(n.tag,function(){a.$camera&&s.renderReasons.has(hx.CAMERA_CHANGED)&&(a.$camera.style.transform=a.joinTransformMatrix(o.getOrthoMatrix()))}),l.hooks.destroy.tap(n.tag,function(){a.$camera&&a.$camera.remove(),c.removeEventListener(Rc.RESIZE,m),c.removeEventListener(wr.MOUNTED,f),c.removeEventListener(wr.UNMOUNTED,h),c.removeEventListener(wr.ATTR_MODIFIED,p),c.removeEventListener(wr.BOUNDS_CHANGED,g)})}},{key:"createCamera",value:function(r){var i=this.context.config,a=i.document,o=i.width,s=i.height,l=this.context.contextService.getDomElement(),c=l.parentNode;if(c){var u=Odt,d=c.querySelector("#".concat(u));if(!d){var f=(a||document).createElement("div");f.style.overflow="hidden",f.style.pointerEvents="none",f.style.position="absolute",f.style.left="0px",f.style.top="0px",f.style.width="".concat(o||0,"px"),f.style.height="".concat(s||0,"px");var h=(a||document).createElement("div");d=h,h.id=u,h.style.position="absolute",h.style.left="".concat(l.offsetLeft||0,"px"),h.style.top="".concat(l.offsetTop||0,"px"),h.style.transformOrigin="left top",h.style.transform=this.joinTransformMatrix(r.getOrthoMatrix()),h.style.pointerEvents="none",h.style.width="100%",h.style.height="100%",f.appendChild(h),c.appendChild(f)}return d}return null}},{key:"getOrCreateEl",value:function(r){var i=this.context.config.document,a=this.displayObjectHTMLElementMap.get(r);return a||(a=(i||document).createElement("div"),r.parsedStyle.$el=a,this.displayObjectHTMLElementMap.set(r,a),r.id&&(a.id=r.id),r.name&&a.setAttribute("name",r.name),r.className&&(a.className=r.className),a.style.position="absolute",a.style["will-change"]="transform",a.style.transform=this.joinTransformMatrix(r.getWorldTransform(),r.getOrigin())),a}},{key:"updateAttribute",value:function(r,i){var a=this.getOrCreateEl(i);switch(r){case"innerHTML":var o=i.parsedStyle.innerHTML;Kr(o)?a.innerHTML=o:(a.innerHTML="",a.appendChild(o));break;case"x":a.style.left="".concat(i.parsedStyle.x,"px");break;case"y":a.style.top="".concat(i.parsedStyle.y,"px");break;case"transformOrigin":var s=i.parsedStyle.transformOrigin;a.style["transform-origin"]="".concat(s[0].buildCSSText(null,null,"")," ").concat(s[1].buildCSSText(null,null,""));break;case"width":var l=i.parsedStyle.width;a.style.width=on(l)?"".concat(l,"px"):l.toString();break;case"height":var c=i.parsedStyle.height;a.style.height=on(c)?"".concat(c,"px"):c.toString();break;case"zIndex":var u=i.parsedStyle.zIndex;a.style["z-index"]="".concat(u);break;case"visibility":var d=i.parsedStyle.visibility;a.style.visibility=d;break;case"pointerEvents":var f=i.parsedStyle.pointerEvents,h=f===void 0?"auto":f;a.style.pointerEvents=h;break;case"opacity":var p=i.parsedStyle.opacity;a.style.opacity="".concat(p);break;case"fill":var g=i.parsedStyle.fill,m="";nO(g)?g.isNone?m="transparent":m=i.getAttribute("fill"):Array.isArray(g)?m=i.getAttribute("fill"):vy(g),a.style.background=m;break;case"stroke":var v=i.parsedStyle.stroke,y="";nO(v)?v.isNone?y="transparent":y=i.getAttribute("stroke"):Array.isArray(v)?y=i.getAttribute("stroke"):vy(v),a.style["border-color"]=y,a.style["border-style"]="solid";break;case"lineWidth":var b=i.parsedStyle.lineWidth;a.style["border-width"]="".concat(b||0,"px");break;case"lineDash":a.style["border-style"]="dashed";break;case"filter":var x=i.style.filter;a.style.filter=x;break;default:!Nn(i.style[r])&&i.style[r]!==""&&(a.style[r]=i.style[r])}}}])}();aCe.tag="HTMLRendering";var Idt=function(n){function e(){var r;st(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=dr(this,e,[].concat(a)),r.name="html-renderer",r}return $n(e,n),lt(e,[{key:"init",value:function(){this.addRenderingPlugin(new aCe)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(lv);/*!
 * @antv/g-canvas
 * @description A renderer implemented by Canvas 2D API
 * @version 2.0.42
 * @date 4/14/2025, 2:57:21 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Ddt=function(){function n(e){st(this,n),this.renderingContext=e.renderingContext,this.canvasConfig=e.config}return lt(n,[{key:"init",value:function(){var r=this.canvasConfig,i=r.container,a=r.canvas;if(a)this.$canvas=a,i&&a.parentElement!==i&&i.appendChild(a),this.$container=a.parentElement,this.canvasConfig.container=this.$container;else if(i&&(this.$container=Kr(i)?document.getElementById(i):i,this.$container)){var o=document.createElement("canvas");this.$container.appendChild(o),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=o}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(r,i){var a=this.canvasConfig.devicePixelRatio;this.dpr=a,this.$canvas&&(this.$canvas.width=this.dpr*r,this.$canvas.height=this.dpr*i,dst(this.$canvas,r,i)),this.renderingContext.renderReasons.add(hx.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(r){this.$container&&this.$container.style&&(this.$container.style.cursor=r)}},{key:"toDataURL",value:function(){var e=bl(pi().mark(function i(){var a,o,s,l=arguments;return pi().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=l.length>0&&l[0]!==void 0?l[0]:{},o=a.type,s=a.encoderOptions,u.abrupt("return",this.context.canvas.toDataURL(o,s));case 3:case"end":return u.stop()}},i,this)}));function r(){return e.apply(this,arguments)}return r}()}])}(),Ldt=function(n){function e(){var r;st(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return r=dr(this,e,[].concat(a)),r.name="canvas-context-register",r}return $n(e,n),lt(e,[{key:"init",value:function(){this.context.ContextService=Ddt}},{key:"destroy",value:function(){delete this.context.ContextService}}])}(lv),nC=function(n){function e(r){var i;return st(this,e),i=dr(this,e,[r]),i.registerPlugin(new Ldt),i.registerPlugin(new Edt),i.registerPlugin(new tdt),i.registerPlugin(new Pdt),i.registerPlugin(new Ndt),i.registerPlugin(new xdt),i.registerPlugin(new Idt),i}return $n(e,n),lt(e)}(dat),kdt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};class iD extends sf{constructor(e){super(Object.assign(Object.assign({},e),{style:Object.assign({},iD.defaultStyleProps,e.style)})),this.rootPointerEvent=new aO(null),this.forwardEvents=r=>{const i=this.context.canvas,a=i.context.renderingContext.root.ownerDocument.defaultView;this.normalizeToPointerEvent(r,a).forEach(s=>{const l=this.bootstrapEvent(this.rootPointerEvent,s,a,r);KE(i.context.eventService,"mappingTable.pointerupoutside",[]),i.context.eventService.mapEvent(l)})}}get eventService(){return this.context.canvas.context.eventService}get events(){return[it.CLICK,it.POINTER_DOWN,it.POINTER_MOVE,it.POINTER_UP,it.POINTER_OVER,it.POINTER_LEAVE]}getDomElement(){return this.getShape("key").getDomElement()}render(e=this.parsedAttributes,r=this){this.drawKeyShape(e,r),this.drawPortShapes(e,r)}getKeyStyle(e){const r=gy(e,["dx","dy","innerHTML","pointerEvents","cursor"]),{dx:i=0,dy:a=0}=r,o=kdt(r,["dx","dy"]),[s,l]=this.getSize(e);return Object.assign(Object.assign({x:i,y:a},o),{width:s,height:l})}drawKeyShape(e,r){const i=this.getKeyStyle(e),{x:a,y:o,width:s=0,height:l=0}=i,c=this.upsert("key-container",ws,{x:a,y:o,width:s,height:l,opacity:0},r);return this.upsert("key",CM,i,c)}connectedCallback(){if(!(this.context.canvas.getRenderer("main")instanceof nC))return;const i=this.getDomElement();this.events.forEach(a=>{i.addEventListener(a,this.forwardEvents)})}attributeChangedCallback(e,r,i){e==="zIndex"&&r!==i&&(this.getDomElement().style.zIndex=i)}destroy(){const e=this.getDomElement();this.events.forEach(r=>{e.removeEventListener(r,this.forwardEvents)}),super.destroy()}normalizeToPointerEvent(e,r){const i=[];if(r.isTouchEvent(e))for(let a=0;a<e.changedTouches.length;a++){const o=e.changedTouches[a];Kn(o.button)&&(o.button=0),Kn(o.buttons)&&(o.buttons=1),Kn(o.isPrimary)&&(o.isPrimary=e.touches.length===1&&e.type==="touchstart"),Kn(o.width)&&(o.width=o.radiusX||1),Kn(o.height)&&(o.height=o.radiusY||1),Kn(o.tiltX)&&(o.tiltX=0),Kn(o.tiltY)&&(o.tiltY=0),Kn(o.pointerType)&&(o.pointerType="touch"),Kn(o.pointerId)&&(o.pointerId=o.identifier||0),Kn(o.pressure)&&(o.pressure=o.force||.5),Kn(o.twist)&&(o.twist=0),Kn(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,o.type=e.type,i.push(o)}else if(r.isMouseEvent(e)){const a=e;Kn(a.isPrimary)&&(a.isPrimary=!0),Kn(a.width)&&(a.width=1),Kn(a.height)&&(a.height=1),Kn(a.tiltX)&&(a.tiltX=0),Kn(a.tiltY)&&(a.tiltY=0),Kn(a.pointerType)&&(a.pointerType="mouse"),Kn(a.pointerId)&&(a.pointerId=1),Kn(a.pressure)&&(a.pressure=.5),Kn(a.twist)&&(a.twist=0),Kn(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,i.push(a)}else i.push(e);return i}transferMouseData(e,r){e.isTrusted=r.isTrusted,e.srcElement=r.srcElement,e.timeStamp=performance.now(),e.type=r.type,e.altKey=r.altKey,e.metaKey=r.metaKey,e.shiftKey=r.shiftKey,e.ctrlKey=r.ctrlKey,e.button=r.button,e.buttons=r.buttons,e.client.x=r.clientX,e.client.y=r.clientY,e.movement.x=r.movementX,e.movement.y=r.movementY,e.page.x=r.pageX,e.page.y=r.pageY,e.screen.x=r.screenX,e.screen.y=r.screenY,e.relatedTarget=null}bootstrapEvent(e,r,i,a){e.view=i,e.originalEvent=null,e.nativeEvent=a,e.pointerId=r.pointerId,e.width=r.width,e.height=r.height,e.isPrimary=r.isPrimary,e.pointerType=r.pointerType,e.pressure=r.pressure,e.tangentialPressure=r.tangentialPressure,e.tiltX=r.tiltX,e.tiltY=r.tiltY,e.twist=r.twist,this.transferMouseData(e,r);const{x:o,y:s}=this.getViewportXY(r);e.viewport.x=o,e.viewport.y=s;const[l,c]=this.context.canvas.getCanvasByViewport([o,s]);return e.canvas.x=l,e.canvas.y=c,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=a.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e}getViewportXY(e){let r,i;const{offsetX:a,offsetY:o,clientX:s,clientY:l}=e;if(!Nn(a)&&!Nn(o))r=a,i=o;else{const c=this.eventService.client2Viewport({x:s,y:l});r=c.x,i=c.y}return{x:r,y:i}}onframe(){super.onframe();const{opacity:e}=this.attributes;this.getDomElement().style.opacity=`${e}`}}iD.defaultStyleProps={size:[160,80],halo:!1,icon:!1,label:!1,pointerEvents:"auto"};var Doe=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};let oCe=class sCe extends sf{constructor(e){super(is({style:sCe.defaultStyleProps},e))}getKeyStyle(e){const[r,i]=this.getSize(e),a=super.getKeyStyle(e),{fillOpacity:o,opacity:s=o}=a,l=Doe(a,["fillOpacity","opacity"]);return Object.assign(Object.assign({opacity:s},l),{width:r,height:i,x:-r/2,y:-i/2})}getHaloStyle(e){if(e.halo===!1)return!1;const r=this.getShape("key").attributes,{fill:i,stroke:a}=r;Doe(r,["fill","stroke"]);const o=fo(this.getGraphicStyle(e),"halo"),s=Number(o.lineWidth),[l,c]=Jn(this.getSize(e),[s,s]);return Object.assign(Object.assign({},o),{width:l,height:c,fill:"transparent",x:-l/2,y:-c/2})}getIconStyle(e){const r=super.getIconStyle(e),[i,a]=this.getSize(e);return r?Object.assign({width:i*Lp,height:a*Lp},r):!1}drawKeyShape(e,r){const i=this.upsert("key",TX,this.getKeyStyle(e),r);return AX(this),i}drawHaloShape(e,r){this.upsert("halo",ws,this.getHaloStyle(e),r)}update(e){super.update(e),e&&("x"in e||"y"in e||"z"in e)&&RX(this)}};oCe.defaultStyleProps={size:32};class Fdt extends sf{constructor(e){super(e)}getKeyStyle(e){const[r,i]=this.getSize(e);return Object.assign(Object.assign({},super.getKeyStyle(e)),{width:r,height:i,x:-r/2,y:-i/2})}getIconStyle(e){const r=super.getIconStyle(e),{width:i,height:a}=this.getShape("key").attributes;return r?Object.assign({width:i*Lp,height:a*Lp},r):!1}drawKeyShape(e,r){return this.upsert("key",ws,this.getKeyStyle(e),r)}}class $dt extends tD{constructor(e){super(e)}getInnerR(e){return e.innerR||this.getOuterR(e)*3/8}getOuterR(e){return Math.min(...this.getSize(e))/2}getPoints(e){return _ft(this.getOuterR(e),this.getInnerR(e))}getIconStyle(e){const r=super.getIconStyle(e),i=this.getInnerR(e)*2*Lp;return r?Object.assign({width:i,height:i},r):!1}getPortXY(e,r){const{placement:i="top"}=r,a=this.getShape("key").getLocalBounds(),o=wft(this.getOuterR(e),this.getInnerR(e));return DX(a,i,o,!1)}}let lCe=class cCe extends tD{constructor(e){super(is({style:cCe.defaultStyleProps},e))}getPoints(e){const{direction:r}=e,[i,a]=this.getSize(e);return Sft(i,a,r)}getPortXY(e,r){const{direction:i}=e,{placement:a="top"}=r,o=this.getShape("key").getLocalBounds(),[s,l]=this.getSize(e),c=Eft(s,l,i);return DX(o,a,c,!1)}getIconStyle(e){const{icon:r,iconText:i,iconSrc:a,direction:o}=e;if(r===!1||Df(i||a))return!1;const s=fo(this.getGraphicStyle(e),"icon"),l=this.getShape("key").getLocalBounds(),[c,u]=Vct(l,o),d=Gct(l,o)*2*Lp;return Object.assign({x:c,y:u,width:d,height:d},s)}};lCe.defaultStyleProps={size:40,direction:"up"};var Loe=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};class X_ extends sf{constructor(e){super(is({style:X_.defaultStyleProps},e)),this.type="combo",this.updateComboPosition(this.parsedAttributes)}getKeySize(e){const{collapsed:r,childrenNode:i=[]}=e;return i.length===0?this.getEmptyKeySize(e):r?this.getCollapsedKeySize(e):this.getExpandedKeySize(e)}getEmptyKeySize(e){const{padding:r,collapsedSize:i}=e,[a,o,s,l]=mh(r);return Jn(Uc(i),[l+o,a+s,0])}getCollapsedKeySize(e){return Uc(e.collapsedSize)}getExpandedKeySize(e){const r=this.getContentBBox(e);return[vh(r),yh(r),0]}getContentBBox(e){const{childrenNode:r=[],padding:i}=e,a=r.map(s=>this.context.element.getElement(s)).filter(Boolean);if(a.length===0){const s=new Bi,{x:l=0,y:c=0,size:u}=e,[d,f]=Uc(u);return s.setMinMax([l-d/2,c-f/2,0],[l+d/2,c+f/2,0]),s}const o=TM(a.map(s=>s.getBounds()));return i?uv(o,i):o}drawCollapsedMarkerShape(e,r){const i=this.getCollapsedMarkerStyle(e);this.upsert("collapsed-marker",XEe,i,r),AX(this)}getCollapsedMarkerStyle(e){if(!e.collapsed||!e.collapsedMarker)return!1;const r=fo(this.getGraphicStyle(e),"collapsedMarker"),{type:i}=r,a=Loe(r,["type"]),o=this.getShape("key"),[s,l]=Qh(o.getLocalBounds(),"center"),c=Object.assign(Object.assign({},a),{x:s,y:l});if(i){const u=this.getCollapsedMarkerText(i,e);Object.assign(c,{text:u})}return c}getCollapsedMarkerText(e,r){const{childrenData:i=[]}=r,{model:a}=this.context;return e==="descendant-count"?a.getDescendantsData(this.id).length.toString():e==="child-count"?i.length.toString():e==="node-count"?a.getDescendantsData(this.id).filter(o=>a.getElementType(Fe(o))==="node").length.toString():cn(e)?e(i):""}getComboPosition(e){const{x:r=0,y:i=0,collapsed:a,childrenData:o=[]}=e;if(o.length===0)return[+r,+i,0];if(a){const{model:s}=this.context,l=s.getDescendantsData(this.id).filter(c=>!s.isCombo(Fe(c)));if(l.length>0&&l.some(gut)){const c=l.reduce((u,d)=>Jn(u,Po(d)),[0,0,0]);return Zd(c,l.length)}return[+r,+i,0]}return this.getContentBBox(e).center}getComboStyle(e){const[r,i]=this.getComboPosition(e);return{x:r,y:i,transform:[["translate",r,i]]}}updateComboPosition(e){const r=this.getComboStyle(e);Object.assign(this.style,r);const{x:i,y:a}=r;this.context.model.syncNodeLikeDatum({id:this.id,style:{x:i,y:a}}),RX(this)}render(e,r=this){super.render(e,r),this.drawCollapsedMarkerShape(e,r)}update(e={}){super.update(e),this.updateComboPosition(this.parsedAttributes)}onframe(){super.onframe(),this.attributes.collapsed||this.updateComboPosition(this.parsedAttributes),this.drawKeyShape(this.parsedAttributes,this)}animate(e,r){const i=super.animate(this.attributes.collapsed?e:e.map(a=>{var{x:o,y:s,z:l,transform:c}=a,u=Loe(a,["x","y","z","transform"]);return u}),r);return i&&new Proxy(i,{set:(a,o,s)=>(o==="currentTime"&&Promise.resolve().then(()=>this.onframe()),Reflect.set(a,o,s))})}}X_.defaultStyleProps={childrenNode:[],droppable:!0,draggable:!0,collapsed:!1,collapsedSize:32,collapsedMarker:!0,collapsedMarkerZIndex:1,collapsedMarkerFontSize:12,collapsedMarkerTextAlign:"center",collapsedMarkerTextBaseline:"middle",collapsedMarkerType:"child-count"};class Bdt extends X_{constructor(e){super(e)}drawKeyShape(e,r){return this.upsert("key",qp,this.getKeyStyle(e),r)}getKeyStyle(e){const{collapsed:r}=e,i=super.getKeyStyle(e),[a]=this.getKeySize(e);return Object.assign(Object.assign(Object.assign({},i),r&&fo(i,"collapsed")),{r:a/2})}getCollapsedKeySize(e){const[r,i]=Uc(e.collapsedSize),a=Math.max(r,i)/2;return[a*2,a*2,0]}getExpandedKeySize(e){const r=this.getContentBBox(e),[i,a]=cv(r),o=Math.sqrt(Math.pow(i,2)+Math.pow(a,2))/2;return[o*2,o*2,0]}getIntersectPoint(e,r=!1){const i=this.getShape("key").getBounds();return J4(e,i,r)}}class zdt extends X_{constructor(e){super(e)}drawKeyShape(e,r){return this.upsert("key",ws,this.getKeyStyle(e),r)}getKeyStyle(e){const r=super.getKeyStyle(e),[i,a]=this.getKeySize(e);return Object.assign(Object.assign(Object.assign({},r),e.collapsed&&fo(r,"collapsed")),{width:i,height:a,x:-i/2,y:-a/2})}}const Udt={padding:10};function koe(n,e,r,i,a,o){const{padding:s}=Object.assign(Udt,o),l=im(r,s),c=im(i,s),u=[n,...a,e];let d=null;const f=[];for(let h=0,p=u.length;h<p-1;h++){const g=h+1,m=u[h],v=u[g],y=yut(m,v);let b=null;if(h===0)if(g===p-1)if(l.intersects(c))b=OF(m,v,l,c);else if(!lO(m,l)&&!lO(v,c)){const x=G0(m,l),_=G0(v,c);b=$oe(x,_,hl(x,_)),b.points.unshift(x),b.points.push(_)}else y||(b=Gdt(m,v,l,c));else Kd(v,l)?b=OF(m,v,l,im(v,s),d):y||(b=bP(m,v,l));else g===p-1?Kd(m,c)?b=OF(m,v,im(m,s),c,d):y||(b=uCe(m,v,c,d)):y||(b=$oe(m,v,d));b?(f.push(...b.points),d=b.direction):d=hl(m,v),g<p-1&&f.push(v)}return f.map(xy)}const Vdt={N:"S",S:"N",W:"E",E:"W"},Foe={N:-Math.PI/2,S:Math.PI/2,E:0,W:Math.PI};function hl(n,e){const[r,i]=n,[a,o]=e;return r===a?i>o?"N":"S":i===o?r>a?"W":"E":null}function jj(n,e){return e==="N"||e==="S"?yh(n):vh(n)}function $oe(n,e,r){const i=[n[0],e[1]],a=[e[0],n[1]],o=hl(n,i),s=hl(n,a),l=r?Vdt[r]:null,c=o===r||o!==l&&s!==r?i:a;return{points:[c],direction:hl(c,e)}}function bP(n,e,r){if(lO(n,r)){const i=rC(n,e,r);return{points:[i],direction:hl(i,e)}}else{const i=G0(n,r),o=["left","right"].includes(W2(n,r))?[e[0],i[1]]:[i[0],e[1]];return{points:[o],direction:hl(o,e)}}}function uCe(n,e,r,i){const a=lO(e,r)?e:G0(e,r),o=[[a[0],n[1]],[n[0],a[1]]],s=o.filter(c=>Uct(c,r)&&!TEe(c,r,!0)),l=s.filter(c=>hl(c,n)!==i);if(l.length>0){const c=l.find(u=>hl(n,u)===i)||l[0];return{points:[c],direction:hl(c,e)}}else{const c=Krt(o,s)[0],u=Mm(e,c,jj(r,i)/2);return{points:[rC(u,n,r),u],direction:hl(u,e)}}}function Gdt(n,e,r,i){let a=bP(n,e,r);const o=tC(a.points[0]);if(Kd(o,i)){a=bP(e,n,i);const s=tC(a.points[0]);if(Kd(s,r)){const l=Mm(n,o,jj(r,hl(n,o))/2),c=Mm(e,s,jj(i,hl(e,s))/2),u=[(l[0]+c[0])/2,(l[1]+c[1])/2],d=bP(n,u,r),f=uCe(u,e,i,d.direction);a.points=[d.points[0],f.points[0]],a.direction=f.direction}}return a}function OF(n,e,r,i,a){const s=TM([r,i]),l=Wi(e,s.center)>Wi(n,s.center),[c,u]=l?[e,n]:[n,e],d=yh(s)+vh(s);let f;if(a){const g=[c[0]+d*Math.cos(Foe[a]),c[1]+d*Math.sin(Foe[a])];f=Mm(G0(g,s),g,.01)}else f=Mm(G0(c,s),c,-.01);let h=rC(f,u,s),p=[hS(f,2),hS(h,2)];if(Ra(hS(f),hS(h))){const g=EX(Ci(f,c),[1,0,0])+Math.PI/2;h=[u[0]+d*Math.cos(g),u[1]+d*Math.sin(g),0],h=hS(Mm(G0(h,s),u,-.01),2);const m=rC(f,h,s);p=[f,m,h]}return{points:l?p.reverse():p,direction:hl(l?f:h,e)}}function rC(n,e,r){let i=[n[0],e[1]];return Kd(i,r)&&(i=[e[0],n[1]]),i}function dCe(n,e,r,i,a){let c=typeof e=="number"?e:.5;e==="start"&&(c=0),e==="end"&&(c=.99);const u=ps(n.getPoint(c)),d=ps(n.getPoint(c+.01));let f=e==="start"?"left":e==="end"?"right":"center";if($Ee(u,d)||!r){const[y,b]=Boe(n,c,i,a);return{transform:[["translate",y,b]],textAlign:f}}let h=Math.atan2(d[1]-u[1],d[0]-u[0]);d[0]<u[0]&&(f=f==="center"?f:f==="left"?"right":"left",i*=-1,h+=Math.PI);const[g,m]=Boe(n,c,i,a,h),v=[["translate",g,m],["rotate",h/Math.PI*180]];return{textAlign:f,transform:v}}function jdt(n,e,r,i,a){var o,s;const l=((o=n.badge)===null||o===void 0?void 0:o.getGeometryBounds().halfExtents[0])*2||0,c=((s=n.label)===null||s===void 0?void 0:s.getGeometryBounds().halfExtents[0])*2||0;return dCe(n.key,r,!0,(c?(c/2+l/2)*(e==="suffix"?1:-1):0)+i,a)}function Boe(n,e,r,i,a){const[o,s]=ps(n.getPoint(e));let l=r,c=i;return a&&(l=r*Math.cos(a)-i*Math.sin(a),c=r*Math.sin(a)+i*Math.cos(a)),[o+l,s+c]}function Hj(n,e,r,i){if(Ra(n,e))return n;const a=Ci(e,n),o=[n[0]+r*a[0],n[1]+r*a[1]],s=_p(Q4(a,!1));return o[0]+=i*s[0],o[1]+=i*s[1],o}function Hdt(n){return on(n)?[n,-n]:n}function Wdt(n){return on(n)?[n,1-n]:n}function qdt(n,e,r){return[["M",n[0],n[1]],["Q",r[0],r[1],e[0],e[1]]]}function fCe(n,e,r){return[["M",n[0],n[1]],["C",r[0][0],r[0][1],r[1][0],r[1][1],e[0],e[1]]]}function OX(n,e=0,r=!1){const i=n.length-1,a=n[0],o=n[i],s=n.slice(1,i),l=[["M",a[0],a[1]]];return s.forEach((c,u)=>{const d=s[u-1]||a,f=s[u+1]||o;if(!BEe(d,c,f)&&e){const[h,p]=Ydt(d,c,f,e);l.push(["L",h[0],h[1]],["Q",c[0],c[1],p[0],p[1]],["L",p[0],p[1]])}else l.push(["L",c[0],c[1]])}),l.push(["L",o[0],o[1]]),r&&l.push(["Z"]),l}function Ydt(n,e,r,i){const a=cO(n,e),o=cO(r,e),s=Math.min(i,Math.min(a,o)/2),l=[e[0]-s/a*(e[0]-n[0]),e[1]-s/a*(e[1]-n[1])],c=[e[0]-s/o*(e[0]-r[0]),e[1]-s/o*(e[1]-r[1])];return[l,c]}const Xdt=n=>{const e=Math.PI/2,r=yh(n)/2,i=vh(n)/2,a=Math.atan2(r,i)/2,o=Math.atan2(i,r)/2;return{top:[-e-o,-e+o],"top-right":[-e+o,-a],"right-top":[-e+o,-a],right:[-a,a],"bottom-right":[a,e-o],"right-bottom":[a,e-o],bottom:[e-o,e+o],"bottom-left":[e+o,Math.PI-a],"left-bottom":[e+o,Math.PI-a],left:[Math.PI-a,Math.PI+a],"top-left":[Math.PI+a,-e-o],"left-top":[Math.PI+a,-e-o]}};function hCe(n,e,r,i,a){const o=im(n),s=n.getCenter();let l=i&&qm(i),c=a&&qm(a);if(!l||!c){const u=Xdt(o),d=u[e][0],f=u[e][1],[h,p]=cv(o),g=Math.max(h,p),m=Jn(s,[g*Math.cos(d),g*Math.sin(d),0]),v=Jn(s,[g*Math.cos(f),g*Math.sin(f),0]);l=qj(n,m),c=qj(n,v),r||([l,c]=[c,l])}return[l,c]}function Kdt(n,e,r,i,a,o){const s=n.getPorts()[a||o],l=n.getPorts()[o||a];let[c,u]=hCe(n,e,r,s,l);const d=Zdt(n,c,u,i);return s&&(c=iC(s,d[0])),l&&(u=iC(l,d.at(-1))),fCe(c,u,d)}function Zdt(n,e,r,i){const a=n.getCenter();if(Ra(e,r)){const o=Ci(e,a),s=[i*Math.sign(o[0])||i/2,i*Math.sign(o[1])||-i/2,0];return[Jn(e,s),Jn(r,Dd(s,[1,-1,1]))]}return[Mm(a,e,Wi(a,e)+i),Mm(a,r,Wi(a,r)+i)]}function Qdt(n,e,r,i,a,o,s){const l=LX(n),c=l[o||s],u=l[s||o];let[d,f]=hCe(n,r,i,c,u);const h=Jdt(n,d,f,a);return c&&(d=iC(c,h[0])),u&&(f=iC(u,h.at(-1))),OX([d,...h,f],e)}function Jdt(n,e,r,i){const a=[],o=im(n);if(Ra(e,r))switch(W2(e,o)){case"left":a.push([e[0]-i,e[1]]),a.push([e[0]-i,e[1]+i]),a.push([e[0],e[1]+i]);break;case"right":a.push([e[0]+i,e[1]]),a.push([e[0]+i,e[1]+i]),a.push([e[0],e[1]+i]);break;case"top":a.push([e[0],e[1]-i]),a.push([e[0]+i,e[1]-i]),a.push([e[0]+i,e[1]]);break;case"bottom":a.push([e[0],e[1]+i]),a.push([e[0]+i,e[1]+i]),a.push([e[0]+i,e[1]]);break}else{const s=W2(e,o),l=W2(r,o);if(s===l){const c=s;let u,d;switch(c){case"left":u=Math.min(e[0],r[0])-i,a.push([u,e[1]]),a.push([u,r[1]]);break;case"right":u=Math.max(e[0],r[0])+i,a.push([u,e[1]]),a.push([u,r[1]]);break;case"top":d=Math.min(e[1],r[1])-i,a.push([e[0],d]),a.push([r[0],d]);break;case"bottom":d=Math.max(e[1],r[1])+i,a.push([e[0],d]),a.push([r[0],d]);break}}else{const c=(h,p)=>({left:[p[0]-i,p[1]],right:[p[0]+i,p[1]],top:[p[0],p[1]-i],bottom:[p[0],p[1]+i]})[h],u=c(s,e),d=c(l,r),f=rC(u,d,o);a.push(u,f,d)}}return a}function Wj(n,e){const r=new Set,i=new Set,a=new Set;return n.forEach(o=>{e(o).forEach(l=>{r.add(l),n.includes(l.source)&&n.includes(l.target)?i.add(l):a.add(l)})}),{edges:Array.from(r),internal:Array.from(i),external:Array.from(a)}}function zoe(n,e){const r=[];let i=n;for(;i;){r.push(i);const a=e(Fe(i));if(a)i=a;else break}if(r.some(a=>{var o;return(o=a.style)===null||o===void 0?void 0:o.collapsed})){const a=r.reverse().findIndex(Hl);return r[a]||r.at(-1)}return n}function eft(n,e){return e||(n<4?10:n===4?12:n*2.5)}const tft=(n,e)=>{const r=Math.max(n,e)/2;return[["M",-n/2,0],["A",r,r,0,1,0,2*r-n/2,0],["A",r,r,0,1,0,-n/2,0],["Z"]]},pCe=(n,e)=>[["M",-n/2,0],["L",n/2,-e/2],["L",n/2,e/2],["Z"]],nft=(n,e)=>[["M",-n/2,0],["L",0,-e/2],["L",n/2,0],["L",0,e/2],["Z"]],rft=(n,e)=>[["M",-n/2,0],["L",n/2,-e/2],["L",4*n/5-n/2,0],["L",n/2,e/2],["Z"]],ift=(n,e)=>[["M",-n/2,-e/2],["L",n/2,-e/2],["L",n/2,e/2],["L",-n/2,e/2],["Z"]],aft=(n,e)=>{const r=n/2,i=n/7,a=n-i;return[["M",-r,0],["L",0,-e/2],["L",0,e/2],["Z"],["M",a-r,-e/2],["L",a+i-r,-e/2],["L",a+i-r,e/2],["L",a-r,e/2],["Z"]]},oft=(n,e)=>[["M",n/2,-e/2],["L",-n/2,0],["L",n/2,0],["L",-n/2,0],["L",n/2,e/2]],sft=Object.freeze(Object.defineProperty({__proto__:null,circle:tft,diamond:nft,rect:ift,simple:oft,triangle:pCe,triangleRect:aft,vee:rft},Symbol.toStringTag,{value:"Module"}));var mA=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};class fv extends KEe{constructor(e){super(is({style:fv.defaultStyleProps},e)),this.type="edge"}get sourceNode(){const{sourceNode:e}=this.parsedAttributes;return this.context.element.getElement(e)}get targetNode(){const{targetNode:e}=this.parsedAttributes;return this.context.element.getElement(e)}getKeyStyle(e){const r=this.getGraphicStyle(e),{loop:i}=r,a=mA(r,["loop"]),{sourceNode:o,targetNode:s}=this,c={d:i&&vft(o,s)?this.getLoopPath(e):this.getKeyPath(e)};return Lc.PARSED_STYLE_LIST.forEach(u=>{u in a&&(c[u]=a[u])}),c}getLoopPath(e){const{sourcePort:r,targetPort:i}=e,a=this.sourceNode,o=im(a),s=Math.max(vh(o),yh(o)),{placement:l,clockwise:c,dist:u=s}=fo(this.getGraphicStyle(e),"loop");return Kdt(a,l,c,u,r,i)}getEndpoints(e,r=!0,i=[]){const{sourcePort:a,targetPort:o}=e,{sourceNode:s,targetNode:l}=this,[c,u]=bft(s,l,a,o);if(!r){const p=c?qm(c):s.getCenter(),g=u?qm(u):l.getCenter();return[p,g]}const d=typeof i=="function"?i():i,f=Hoe(c||s,d[0]||u||l),h=Hoe(u||l,d[d.length-1]||c||s);return[f,h]}getHaloStyle(e){if(e.halo===!1)return!1;const r=this.getKeyStyle(e),i=fo(this.getGraphicStyle(e),"halo");return Object.assign(Object.assign({},r),i)}getLabelStyle(e){if(e.label===!1||!e.labelText)return!1;const r=fo(this.getGraphicStyle(e),"label"),{placement:i,offsetX:a,offsetY:o,autoRotate:s,maxWidth:l}=r,c=mA(r,["placement","offsetX","offsetY","autoRotate","maxWidth"]),u=dCe(this.shapeMap.key,i,s,a,o),d=this.shapeMap.key.getLocalBounds(),f=Out([d.min,d.max],l);return Object.assign({wordWrapWidth:f},u,c)}getBadgeStyle(e){if(e.badge===!1||!e.badgeText)return!1;const r=fo(e,"badge"),{offsetX:i,offsetY:a,placement:o}=r,s=mA(r,["offsetX","offsetY","placement"]);return Object.assign(s,jdt(this.shapeMap,o,e.labelPlacement,i,a))}drawArrow(e,r){var i;const a=r==="start",s=e[r==="start"?"startArrow":"endArrow"],l=this.shapeMap.key;if(s){const c=this.getArrowStyle(e,a),[u,d,f]=a?["markerStart","markerStartOffset","startArrowOffset"]:["markerEnd","markerEndOffset","endArrowOffset"],h=l.parsedStyle[u];if(h)h.attr(c);else{const p=c.src?MM:Lc,g=new p({style:c});l.style[u]=g}l.style[d]=e[f]||c.width/2+ +c.lineWidth}else{const c=a?"markerStart":"markerEnd";(i=l.style[c])===null||i===void 0||i.destroy(),l.style[c]=null}}getArrowStyle(e,r){const i=this.getShape("key").attributes,a=r?"startArrow":"endArrow",o=fo(this.getGraphicStyle(e),a),{size:s,type:l}=o,c=mA(o,["size","type"]),[u,d]=Uc(eft(i.lineWidth,s)),h=(cn(l)?l:sft[l]||pCe)(u,d);return Object.assign(gy(i,["stroke","strokeOpacity","fillOpacity"]),{width:u,height:d},Object.assign({},h&&{d:h,fill:l==="simple"?"":i.stroke}),c)}drawLabelShape(e,r){const i=this.getLabelStyle(e);this.upsert("label",dv,i,r)}drawHaloShape(e,r){const i=this.getHaloStyle(e);this.upsert("halo",Lc,i,r)}drawBadgeShape(e,r){const i=this.getBadgeStyle(e);this.upsert("badge",Y_,i,r)}drawSourceArrow(e){this.drawArrow(e,"start")}drawTargetArrow(e){this.drawArrow(e,"end")}drawKeyShape(e,r){const i=this.getKeyStyle(e);return this.upsert("key",Lc,i,r)}render(e=this.parsedAttributes,r=this){this.drawKeyShape(e,r),this.getShape("key")&&(this.drawSourceArrow(e),this.drawTargetArrow(e),this.drawLabelShape(e,r),this.drawHaloShape(e,r),this.drawBadgeShape(e,r))}onframe(){this.drawKeyShape(this.parsedAttributes,this),this.drawSourceArrow(this.parsedAttributes),this.drawTargetArrow(this.parsedAttributes),this.drawHaloShape(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this),this.drawBadgeShape(this.parsedAttributes,this)}animate(e,r){const i=super.animate(e,r);return i&&new Proxy(i,{set:(a,o,s)=>(o==="currentTime"&&Promise.resolve().then(()=>this.onframe()),Reflect.set(a,o,s))})}}fv.defaultStyleProps={badge:!0,badgeOffsetX:0,badgeOffsetY:0,badgePlacement:"suffix",isBillboard:!0,label:!0,labelAutoRotate:!0,labelIsBillboard:!0,labelMaxWidth:"80%",labelOffsetX:4,labelOffsetY:0,labelPlacement:"center",labelTextBaseline:"middle",labelWordWrap:!1,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloPointerEvents:"none",haloStrokeOpacity:.25,haloZIndex:-1,loop:!0,startArrow:!1,startArrowLineDash:0,startArrowLineJoin:"round",startArrowLineWidth:1,startArrowTransformOrigin:"center",startArrowType:"vee",endArrow:!1,endArrowLineDash:0,endArrowLineJoin:"round",endArrowLineWidth:1,endArrowTransformOrigin:"center",endArrowType:"vee",loopPlacement:"top",loopClockwise:!0};class Vy extends fv{constructor(e){super(is({style:Vy.defaultStyleProps},e))}getKeyPath(e){const[r,i]=this.getEndpoints(e),{controlPoints:a,curvePosition:o,curveOffset:s}=e,l=this.getControlPoints(r,i,Wdt(o),Hdt(s),a);return fCe(r,i,l)}getControlPoints(e,r,i,a,o){return(o==null?void 0:o.length)===2?o:[Hj(e,r,i[0],a[0]),Hj(e,r,i[1],a[1])]}}Vy.defaultStyleProps={curvePosition:.5,curveOffset:20};class aD extends Vy{constructor(e){super(is({style:aD.defaultStyleProps},e))}getControlPoints(e,r,i,a){const o=r[0]-e[0];return[[e[0]+o*i[0]+a[0],e[1]],[r[0]-o*i[1]+a[1],r[1]]]}}aD.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};class oD extends Vy{constructor(e){super(is({style:oD.defaultStyleProps},e))}get ref(){return this.context.model.getRootsData()[0]}getEndpoints(e){if(this.sourceNode.id===this.ref.id)return super.getEndpoints(e);const r=Po(this.ref),i=this.sourceNode.getIntersectPoint(r,!0),a=this.targetNode.getIntersectPoint(r);return[i,a]}toRadialCoordinate(e){const r=Po(this.ref),i=Wi(e,r),a=LEe(Ci(e,r));return[i,a]}getControlPoints(e,r,i,a){const[o,s]=this.toRadialCoordinate(e),[l]=this.toRadialCoordinate(r),c=l-o;return[[e[0]+(c*i[0]+a[0])*Math.cos(s),e[1]+(c*i[0]+a[0])*Math.sin(s)],[r[0]-(c*i[1]-a[0])*Math.cos(s),r[1]-(c*i[1]-a[0])*Math.sin(s)]]}}oD.defaultStyleProps={curvePosition:.5,curveOffset:20};class sD extends Vy{constructor(e){super(is({style:sD.defaultStyleProps},e))}getControlPoints(e,r,i,a){const o=r[1]-e[1];return[[e[0],e[1]+o*i[0]+a[0]],[r[0],r[1]-o*i[1]+a[1]]]}}sD.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};let gCe=class mCe extends fv{constructor(e){super(is({style:mCe.defaultStyleProps},e))}getKeyPath(e){const[r,i]=this.getEndpoints(e);return[["M",r[0],r[1]],["L",i[0],i[1]]]}};gCe.defaultStyleProps={};const lft={enableObstacleAvoidance:!1,offset:10,maxAllowedDirectionChange:Math.PI/2,maximumLoops:3e3,gridSize:5,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{right:{stepX:1,stepY:0},left:{stepX:-1,stepY:0},bottom:{stepX:0,stepY:1},top:{stepX:0,stepY:-1}},penalties:{0:0,90:0},distFunc:cO},qh=n=>`${Math.round(n[0])}|||${Math.round(n[1])}`;function I0(n,e){const r=i=>Math.round(i/e);return on(n)?r(n):n.map(r)}function cft(n,e){const r=Math.abs(n-e);return r>Math.PI?2*Math.PI-r:r}function Uoe(n,e){const r=e[0]-n[0],i=e[1]-n[1];return!r&&!i?0:Math.atan2(i,r)}function vCe(n,e,r,i){const a=Uoe(n,e),o=r[qh(n)],l=Uoe(o||i,n);return cft(l,a)}const uft=(n,e)=>{const{offset:r,gridSize:i}=e,a={};return n.forEach(o=>{if(!o||o.destroyed||!o.isVisible())return;const s=uv(o.getRenderBounds(),r);for(let l=I0(s.min[0],i);l<=I0(s.max[0],i);l+=1)for(let c=I0(s.min[1],i);c<=I0(s.max[1],i);c+=1)a[`${l}|||${c}`]=!0}),a};function Voe(n,e,r){return Math.min(...e.map(i=>r(n,i)))}function dft(n,e,r){let i=n[0],a=r(n[0],e);for(let o=0;o<n.length;o++){const s=n[o],l=r(s,e);l<a&&(i=s,a=l)}return i}const Goe=(n,e,r,i)=>{if(!e)return[n];const{directionMap:a,offset:o}=i,s=uv(e.getRenderBounds(),o),l=Object.keys(a).reduce((c,u)=>{if(r.includes(u)){const d=a[u],[f,h]=cv(s),p=[n[0]+d.stepX*f,n[1]+d.stepY*h],g=jct(s);for(let m=0;m<g.length;m++){const v=CX([n,p],g[m]);v&&TEe(v,s)&&c.push(v)}}return c},[]);return Kd(n,s)||l.push(n),l.map(c=>I0(c,i.gridSize))},fft=(n,e,r,i,a,o,s)=>{const l=[];let c=[o[0]===i[0]?i[0]:n[0]*s,o[1]===i[1]?i[1]:n[1]*s];l.unshift(c);let u=n,d=e[qh(u)];for(;d;){const p=d,g=u;vCe(p,g,e,r)&&(c=[p[0]===g[0]?c[0]:p[0]*s,p[1]===g[1]?c[1]:p[1]*s],l.unshift(c)),d=e[qh(p)],u=p}const f=a.map(p=>[p[0]*s,p[1]*s]),h=dft(f,c,cO);return l.unshift(h),l};function hft(n,e,r,i){const a=xy(n.getCenter()),o=xy(e.getCenter()),s=Object.assign(lft,i),{gridSize:l}=s,c=s.enableObstacleAvoidance?r:[n,e],u=uft(c,s),d=I0(a,l),f=I0(o,l),h=Goe(a,n,s.startDirections,s),p=Goe(o,e,s.endDirections,s);h.forEach(T=>delete u[qh(T)]),p.forEach(T=>delete u[qh(T)]);const g={},m={},v={},y={},b={},x=new pft;for(let T=0;T<h.length;T++){const P=h[T],A=qh(P);g[A]=P,y[A]=0,b[A]=Voe(P,p,s.distFunc),x.add({id:A,value:b[A]})}const _=p.map(T=>qh(T));let S=s.maximumLoops,M,E=1/0;for(const[T,P]of Object.entries(g))b[T]<=E&&(E=b[T],M=P);for(;Object.keys(g).length>0&&S>0;){const T=x.minId(!1);if(T)M=g[T];else break;const P=qh(M);if(_.includes(P))return fft(M,v,d,o,h,f,l);delete g[P],x.remove(P),m[P]=!0;for(const A of Object.values(s.directionMap)){const N=Jn(M,[A.stepX,A.stepY]),O=qh(N);if(m[O])continue;const I=vCe(M,N,v,d);if(I>s.maxAllowedDirectionChange||u[O])continue;g[O]||(g[O]=N);const D=s.penalties[I],k=s.distFunc(M,N)+(isNaN(D)?l:D),$=y[P]+k,B=y[O];B&&$>=B||(v[O]=M,y[O]=$,b[O]=$+Voe(N,p,s.distFunc),x.add({id:O,value:b[O]}))}S-=1}return[]}class pft{constructor(){this.arr=[],this.map={},this.arr=[],this.map={}}_innerAdd(e,r){let i=0,a=r-1;for(;a-i>1;){const o=Math.floor((i+a)/2);if(this.arr[o].value>e.value)a=o;else if(this.arr[o].value<e.value)i=o;else{this.arr.splice(o,0,e),this.map[e.id]=!0;return}}this.arr.splice(a,0,e),this.map[e.id]=!0}add(e){delete this.map[e.id];const r=this.arr.length;if(!r||this.arr[r-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,r)}remove(e){this.map[e]&&delete this.map[e]}_clearAndGetMinId(){let e;for(let r=this.arr.length-1;r>=0;r--)this.map[this.arr[r].id]?e=this.arr[r].id:this.arr.splice(r,1);return e}_findFirstId(){for(;this.arr.length;){const e=this.arr.shift();if(this.map[e.id])return e.id}}minId(e){return e?this._clearAndGetMinId():this._findFirstId()}}class lD extends fv{constructor(e){super(is({style:lD.defaultStyleProps},e))}getControlPoints(e){const{router:r}=e,{sourceNode:i,targetNode:a}=this,[o,s]=this.getEndpoints(e,!1);let l=[];if(!r)l=e.controlPoints;else if(r.type==="shortest-path"){const c=this.context.element.getNodes();l=hft(i,a,c,r),l.length||(l=koe(o,s,i,a,e.controlPoints,{padding:r.offset}))}else r.type==="orth"&&(l=koe(o,s,i,a,e.controlPoints,r));return l}getPoints(e){const r=this.getControlPoints(e),[i,a]=this.getEndpoints(e,!0,r);return[i,...r,a]}getKeyPath(e){const r=this.getPoints(e);return OX(r,e.radius)}getLoopPath(e){const{sourcePort:r,targetPort:i,radius:a}=e,o=this.sourceNode,s=im(o),l=Math.max(vh(s),yh(s))/4,{placement:c,clockwise:u,dist:d=l}=fo(this.getGraphicStyle(e),"loop");return Qdt(o,a,c,u,d,r,i)}}lD.defaultStyleProps={radius:0,controlPoints:[],router:!1};class cD extends fv{constructor(e){super(is({style:cD.defaultStyleProps},e))}getKeyPath(e){const{curvePosition:r,curveOffset:i}=e,[a,o]=this.getEndpoints(e),s=e.controlPoint||Hj(a,o,r,i);return qdt(a,o,s)}}cD.defaultStyleProps={curvePosition:.5,curveOffset:30};var gft=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};function OM(n){return n instanceof sf&&n.type==="node"}function yCe(n){return n instanceof fv}function IX(n){return n instanceof X_}function mft(n){return OM(n)||yCe(n)||IX(n)}function vft(n,e){return!n||!e?!1:n===e}const yft={top:[.5,0],right:[1,.5],bottom:[.5,1],left:[0,.5],"left-top":[0,0],"top-left":[0,0],"left-bottom":[0,1],"bottom-left":[0,1],"right-top":[1,0],"top-right":[1,0],"right-bottom":[1,1],"bottom-right":[1,1],default:[.5,.5]};function DX(n,e,r=yft,i=!0){const a=[.5,.5],o=Kr(e)?cl(r,e.toLocaleLowerCase(),a):e;if(!i&&Kr(e))return o;const[s,l]=o||a;return[n.min[0]+vh(n)*s,n.min[1]+yh(n)*l]}function LX(n){if(!n)return{};const e=n.getPorts();return(n.attributes.ports||[]).forEach((i,a)=>{var o;const{key:s,placement:l}=i;bCe(i)&&(e[o=s||a]||(e[o]=Qh(n.getShape("key").getBounds(),l)))}),e}function bCe(n){const{r:e}=n;return!e||Number(e)===0}function qm(n){return Hx(n)?n:n.getPosition()}function bft(n,e,r,i){const a=joe(n,e,r,i),o=joe(e,n,i,r);return[a,o]}function joe(n,e,r,i){const a=LX(n);if(r)return a[r];const o=Object.values(a);if(o.length===0)return;const s=o.map(u=>qm(u)),l=xft(e,i),[c]=_ut(s,l);return o.find(u=>qm(u)===c)}function xft(n,e){const r=LX(n);if(e)return[qm(r[e])];const i=Object.values(r);return i.length>0?i.map(a=>qm(a)):[n.getCenter()]}function Hoe(n,e){return IX(n)||OM(n)?qj(n,e):iC(n,e)}function iC(n,e){if(!n||!e)return[0,0,0];if(Hx(n))return n;if(n.attributes.linkToCenter)return n.getPosition();const r=Hx(e)?e:OM(e)?e.getCenter():e.getPosition();return J4(r,n.getBounds())}function qj(n,e){if(!n||!e)return[0,0,0];const r=Hx(e)?e:OM(e)?e.getCenter():e.getPosition();return n.getIntersectPoint(r)||n.getCenter()}function Woe(n,e="bottom",r=0,i=0,a=!1){const o=e.split("-"),[s,l]=Qh(n,e),[c,u]=a?["bottom","top"]:["top","bottom"],d=o.includes("top")?u:o.includes("bottom")?c:"middle",f=o.includes("left")?"right":o.includes("right")?"left":"center";return{transform:[["translate",s+r,l+i]],textBaseline:d,textAlign:f}}function _ft(n,e){return[[0,-n],[e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)],[n*Math.cos(Math.PI/10),-n*Math.sin(Math.PI/10)],[e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[n*Math.cos(3*Math.PI/10),n*Math.sin(3*Math.PI/10)],[0,e],[-n*Math.cos(3*Math.PI/10),n*Math.sin(3*Math.PI/10)],[-e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[-n*Math.cos(Math.PI/10),-n*Math.sin(Math.PI/10)],[-e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)]]}function wft(n,e){const r={};return r.top=[0,-n],r.left=[-n*Math.cos(Math.PI/10),-n*Math.sin(Math.PI/10)],r["left-bottom"]=[-n*Math.cos(3*Math.PI/10),n*Math.sin(3*Math.PI/10)],r.bottom=[0,e],r["right-bottom"]=[n*Math.cos(3*Math.PI/10),n*Math.sin(3*Math.PI/10)],r.right=r.default=[n*Math.cos(Math.PI/10),-n*Math.sin(Math.PI/10)],r}function Sft(n,e,r){const i=e/2,a=n/2,o={up:[[-a,i],[a,i],[0,-i]],left:[[-a,0],[a,i],[a,-i]],right:[[-a,i],[-a,-i],[a,0]],down:[[-a,-i],[a,-i],[0,i]]};return o[r]||o.up}function Eft(n,e,r){const i=e/2,a=n/2,o={};return r==="down"?(o.bottom=o.default=[0,i],o.right=[a,-i],o.left=[-a,-i]):r==="left"?(o.top=[a,-i],o.bottom=[a,i],o.left=o.default=[-a,0]):r==="right"?(o.top=[-a,-i],o.bottom=[-a,i],o.right=o.default=[a,0]):(o.left=[-a,i],o.top=o.default=[0,-i],o.right=[a,i]),o}function Cft(n,e){return[[0,-e/2],[n/2,0],[0,e/2],[-n/2,0]]}function Mft(n){return cl(n,["style","visibility"])!=="hidden"}function Tft(n,e){const{zIndex:r,transform:i,transformOrigin:a,visibility:o,cursor:s,clipPath:l,component:c}=e,u=gft(e,["zIndex","transform","transformOrigin","visibility","cursor","clipPath","component"]);Object.assign(n.attributes,u),i&&n.setAttribute("transform",i),on(r)&&n.setAttribute("zIndex",r),a&&n.setAttribute("transformOrigin",a),o&&n.setAttribute("visibility",o),s&&n.setAttribute("cursor",s),l&&n.setAttribute("clipPath",l),c&&n.setAttribute("component",c)}function Yj(n,e){"update"in n?n.update(e):n.attr(e)}function Aft(n){return[[0,n],[n*Math.sqrt(3)/2,n/2],[n*Math.sqrt(3)/2,-n/2],[0,-n],[-n*Math.sqrt(3)/2,-n/2],[-n*Math.sqrt(3)/2,n/2]]}function Rft(n){KE(n,"__to_be_destroyed__",!0)}function uD(n){return cl(n,"__to_be_destroyed__",!1)}var Pft=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};class dD extends ac{constructor(e,r){super(e,Object.assign({},dD.defaultOptions,r)),this.onCollapseExpand=i=>Pft(this,void 0,void 0,function*(){if(!this.validate(i))return;const{target:a}=i;if(!mft(a))return;const o=a.id,{model:s,graph:l}=this.context,c=s.getElementDataById(o);if(!c)return!1;const{onCollapse:u,onExpand:d,animation:f,align:h}=this.options;Hl(c)?(yield l.expandElement(o,{animation:f,align:h}),d==null||d(o)):(yield l.collapseElement(o,{animation:f,align:h}),u==null||u(o))}),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{graph:e}=this.context,{trigger:r}=this.options;e.on(`node:${r}`,this.onCollapseExpand),e.on(`combo:${r}`,this.onCollapseExpand)}unbindEvents(){const{graph:e}=this.context,{trigger:r}=this.options;e.off(`node:${r}`,this.onCollapseExpand),e.off(`combo:${r}`,this.onCollapseExpand)}validate(e){if(this.destroyed)return!1;const{enable:r}=this.options;return cn(r)?r(e):!!r}destroy(){this.unbindEvents(),super.destroy()}}dD.defaultOptions={enable:!0,animation:!0,trigger:it.DBLCLICK,align:!0};var vA=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};const Nft="g6-create-edge-assist-edge-id",yA="g6-create-edge-assist-node-id";class fD extends ac{constructor(e,r){super(e,Object.assign({},fD.defaultOptions,r)),this.drop=i=>vA(this,void 0,void 0,function*(){const{targetType:a}=i;["combo","node"].includes(a)&&this.source?yield this.handleCreateEdge(i):yield this.cancelEdge()}),this.handleCreateEdge=i=>vA(this,void 0,void 0,function*(){var a,o,s;if(!this.validate(i))return;const{graph:l,canvas:c,batch:u,element:d}=this.context,{style:f}=this.options;if(this.source){this.createEdge(i),yield this.cancelEdge();return}u.startBatch(),c.setCursor("crosshair"),this.source=this.getSelectedNodeIDs([i.target.id])[0];const h=l.getElementData(this.source);l.addNodeData([{id:yA,style:{visibility:"hidden",ports:[{key:"port-1",placement:[.5,.5]}],x:(a=h.style)===null||a===void 0?void 0:a.x,y:(o=h.style)===null||o===void 0?void 0:o.y}}]),l.addEdgeData([{id:Nft,source:this.source,target:yA,style:Object.assign({pointerEvents:"none"},f)}]),yield(s=d.draw({animation:!1}))===null||s===void 0?void 0:s.finished}),this.updateAssistEdge=i=>vA(this,void 0,void 0,function*(){var a;if(!this.source)return;const{model:o,element:s}=this.context;o.translateNodeTo(yA,[i.canvas.x,i.canvas.y]),yield(a=s.draw({animation:!1,silence:!0}))===null||a===void 0?void 0:a.finished}),this.createEdge=i=>{var a,o;const{graph:s}=this.context,{style:l,onFinish:c,onCreate:u}=this.options;if(((a=i.target)===null||a===void 0?void 0:a.id)===void 0||this.source===void 0)return;const f=(o=this.getSelectedNodeIDs([i.target.id]))===null||o===void 0?void 0:o[0],h=`${this.source}-${f}-${vit()}`,p=u({id:h,source:this.source,target:f,style:l});s.addEdgeData([p]),c(p)},this.cancelEdge=()=>vA(this,void 0,void 0,function*(){var i;if(!this.source)return;const{graph:a,element:o,batch:s}=this.context;a.removeNodeData([yA]),this.source=void 0,yield(i=o.draw({animation:!1}))===null||i===void 0?void 0:i.finished,s.endBatch()}),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){const{graph:e}=this.context,{trigger:r}=this.options;this.unbindEvents(),r==="click"?(e.on(Ru.CLICK,this.handleCreateEdge),e.on(N0.CLICK,this.handleCreateEdge),e.on(Xd.CLICK,this.cancelEdge),e.on(sO.CLICK,this.cancelEdge)):(e.on(Ru.DRAG_START,this.handleCreateEdge),e.on(N0.DRAG_START,this.handleCreateEdge),e.on(it.POINTER_UP,this.drop)),e.on(it.POINTER_MOVE,this.updateAssistEdge)}getSelectedNodeIDs(e){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(r=>r.id).concat(e)))}validate(e){if(this.destroyed)return!1;const{enable:r}=this.options;return cn(r)?r(e):!!r}unbindEvents(){const{graph:e}=this.context;e.off(Ru.CLICK,this.handleCreateEdge),e.off(N0.CLICK,this.handleCreateEdge),e.off(Xd.CLICK,this.cancelEdge),e.off(sO.CLICK,this.cancelEdge),e.off(Ru.DRAG_START,this.handleCreateEdge),e.off(N0.DRAG_START,this.handleCreateEdge),e.off(it.POINTER_UP,this.drop),e.off(it.POINTER_MOVE,this.updateAssistEdge)}destroy(){this.unbindEvents(),super.destroy()}}fD.defaultOptions={animation:!0,enable:!0,style:{},trigger:"drag",onCreate:n=>n,onFinish:()=>{}};var qoe=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};class hD extends ac{constructor(e,r){super(e,Object.assign({},hD.defaultOptions,r)),this.isDragging=!1,this.onDragStart=i=>{this.validate(i)&&(this.isDragging=!0,this.context.canvas.setCursor("grabbing"))},this.onDrag=i=>{var a,o,s,l;if(!this.isDragging||Wa.isPinching)return;const c=(o=(a=i.movement)===null||a===void 0?void 0:a.x)!==null&&o!==void 0?o:i.dx,u=(l=(s=i.movement)===null||s===void 0?void 0:s.y)!==null&&l!==void 0?l:i.dy;c|u&&this.translate([c,u],!1)},this.onDragEnd=()=>{var i,a;this.isDragging=!1,this.context.canvas.setCursor(this.defaultCursor),(a=(i=this.options).onFinish)===null||a===void 0||a.call(i)},this.invokeOnFinish=xM(()=>{var i,a;(a=(i=this.options).onFinish)===null||a===void 0||a.call(i)},300),this.shortcut=new q_(e.graph),this.bindEvents(),this.defaultCursor=this.context.canvas.getConfig().cursor||"default"}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{trigger:e}=this.options;if(Xa(e)){const{up:r=[],down:i=[],left:a=[],right:o=[]}=e;this.shortcut.bind(r,s=>this.onTranslate([0,1],s)),this.shortcut.bind(i,s=>this.onTranslate([0,-1],s)),this.shortcut.bind(a,s=>this.onTranslate([1,0],s)),this.shortcut.bind(o,s=>this.onTranslate([-1,0],s))}else{const{graph:r}=this.context;r.on(it.DRAG_START,this.onDragStart),r.on(it.DRAG,this.onDrag),r.on(it.DRAG_END,this.onDragEnd)}}onTranslate(e,r){return qoe(this,void 0,void 0,function*(){if(!this.validate(r))return;const{sensitivity:i}=this.options,a=i*-1;yield this.translate(Dd(e,a),this.options.animation),this.invokeOnFinish()})}translate(e,r){return qoe(this,void 0,void 0,function*(){e=this.clampByDirection(e),e=this.clampByRange(e),yield this.context.graph.translateBy(e,r)})}clampByDirection([e,r]){const{direction:i}=this.options;return i==="x"?r=0:i==="y"&&(e=0),[e,r]}clampByRange([e,r]){const{viewport:i,canvas:a}=this.context,[o,s]=a.getSize(),[l,c,u,d]=mh(this.options.range),f=[s*l,o*c,s*u,o*d],h=uv(xX(i.getCanvasCenter()),f),p=Ci(i.getViewportCenter(),[e,r,0]);if(!Kd(p,h)){const{min:[g,m],max:[v,y]}=h;(p[0]<g&&e>0||p[0]>v&&e<0)&&(e=0),(p[1]<m&&r>0||p[1]>y&&r<0)&&(r=0)}return[e,r]}validate(e){if(this.destroyed)return!1;const{enable:r}=this.options;return typeof r=="function"?r(e):!!r}unbindEvents(){this.shortcut.unbindAll();const{graph:e}=this.context;e.off(it.DRAG_START,this.onDragStart),e.off(it.DRAG,this.onDrag),e.off(it.DRAG_END,this.onDragEnd)}destroy(){this.shortcut.destroy(),this.unbindEvents(),this.context.canvas.setCursor(this.defaultCursor),super.destroy()}}hD.defaultOptions={enable:n=>"targetType"in n?n.targetType==="canvas":!0,sensitivity:10,direction:"both",range:1/0};var Yoe=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};class IM extends ac{constructor(e,r){super(e,Object.assign({},IM.defaultOptions,r)),this.enable=!1,this.enableElements=["node","combo"],this.target=[],this.shadowOrigin=[0,0],this.hiddenEdges=[],this.isDragging=!1,this.onDrop=i=>Yoe(this,void 0,void 0,function*(){var a;if(this.options.dropEffect!=="link")return;const{model:o,element:s}=this.context,l=i.target.id;this.target.forEach(c=>{const u=o.getParentData(c,Ni);u&&Fe(u)===l&&o.refreshComboData(l),o.setParent(c,l,Ni)}),yield(a=s==null?void 0:s.draw({animation:!0}))===null||a===void 0?void 0:a.finished}),this.setCursor=i=>{if(this.isDragging)return;const{type:a}=i,{canvas:o}=this.context,{cursor:s}=this.options;a===it.POINTER_ENTER?o.setCursor((s==null?void 0:s.grab)||"grab"):o.setCursor((s==null?void 0:s.default)||"default")},this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onDrop=this.onDrop.bind(this),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{graph:e,canvas:r}=this.context,i=r.getLayer().getContextService().$canvas;i&&(i.addEventListener("blur",this.onDragEnd),i.addEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(a=>{e.on(`${a}:${it.DRAG_START}`,this.onDragStart),e.on(`${a}:${it.DRAG}`,this.onDrag),e.on(`${a}:${it.DRAG_END}`,this.onDragEnd),e.on(`${a}:${it.POINTER_ENTER}`,this.setCursor),e.on(`${a}:${it.POINTER_LEAVE}`,this.setCursor)}),["link"].includes(this.options.dropEffect)&&(e.on(N0.DROP,this.onDrop),e.on(Xd.DROP,this.onDrop))}getSelectedNodeIDs(e){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(r=>r.id).concat(e)))}getDelta(e){const r=this.context.graph.getZoom();return Zd([e.dx,e.dy],r)}onDragStart(e){var r;if(this.enable=this.validate(e),!this.enable)return;const{batch:i,canvas:a,graph:o}=this.context;a.setCursor(((r=this.options.cursor)===null||r===void 0?void 0:r.grabbing)||"grabbing"),this.isDragging=!0,i.startBatch();const s=e.target.id;o.getElementState(s).includes(this.options.state)?this.target=this.getSelectedNodeIDs([s]):this.target=[s],this.hideEdge(),this.context.graph.frontElement(this.target),this.options.shadow&&this.createShadow(this.target)}onDrag(e){if(!this.enable)return;const r=this.getDelta(e);this.options.shadow?this.moveShadow(r):this.moveElement(this.target,r)}onDragEnd(){var e,r,i;if(this.enable=!1,this.options.shadow){if(!this.shadow)return;this.shadow.style.visibility="hidden";const{x:s=0,y:l=0}=this.shadow.attributes,[c,u]=Ci([+s,+l],this.shadowOrigin);this.moveElement(this.target,[c,u])}this.showEdges(),(r=(e=this.options).onFinish)===null||r===void 0||r.call(e,this.target);const{batch:a,canvas:o}=this.context;a.endBatch(),o.setCursor(((i=this.options.cursor)===null||i===void 0?void 0:i.grab)||"grab"),this.isDragging=!1,this.target=[]}validate(e){if(this.destroyed)return!1;const{enable:r}=this.options;return cn(r)?r(e):!!r}moveElement(e,r){return Yoe(this,void 0,void 0,function*(){const{graph:i,model:a}=this.context,{dropEffect:o}=this.options;o==="move"&&e.forEach(s=>a.refreshComboData(s)),i.translateElementBy(Object.fromEntries(e.map(s=>[s,r])),!1)})}moveShadow(e){if(!this.shadow)return;const{x:r=0,y:i=0}=this.shadow.attributes,[a,o]=e;this.shadow.attr({x:+r+a,y:+i+o})}createShadow(e){const r=fo(this.options,"shadow"),i=TM(e.map(u=>this.context.element.getElement(u).getBounds())),[a,o]=i.min;this.shadowOrigin=[a,o];const[s,l]=cv(i),c={width:s,height:l,x:a,y:o};this.shadow?this.shadow.attr(Object.assign(Object.assign(Object.assign({},r),c),{visibility:"visible"})):(this.shadow=new ws({style:Object.assign(Object.assign(Object.assign({$layer:"transient"},r),c),{pointerEvents:"none"})}),this.context.canvas.appendChild(this.shadow))}showEdges(){this.options.shadow||this.hiddenEdges.length===0||(this.context.graph.showElement(this.hiddenEdges),this.hiddenEdges=[])}hideEdge(){const{hideEdge:e,shadow:r}=this.options;if(e==="none"||r)return;const{graph:i}=this.context;e==="all"?this.hiddenEdges=i.getEdgeData().map(Fe):this.hiddenEdges=Array.from(new Set(this.target.map(a=>i.getRelatedEdgesData(a,e).map(Fe)).flat())),i.hideElement(this.hiddenEdges)}unbindEvents(){const{graph:e,canvas:r}=this.context,i=r.getLayer().getContextService().$canvas;i&&(i.removeEventListener("blur",this.onDragEnd),i.removeEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(a=>{e.off(`${a}:${it.DRAG_START}`,this.onDragStart),e.off(`${a}:${it.DRAG}`,this.onDrag),e.off(`${a}:${it.DRAG_END}`,this.onDragEnd),e.off(`${a}:${it.POINTER_ENTER}`,this.setCursor),e.off(`${a}:${it.POINTER_LEAVE}`,this.setCursor)}),e.off(`combo:${it.DROP}`,this.onDrop),e.off(`canvas:${it.DROP}`,this.onDrop)}destroy(){var e;this.unbindEvents(),(e=this.shadow)===null||e===void 0||e.destroy(),super.destroy()}}IM.defaultOptions={animation:!0,enable:n=>["node","combo"].includes(n.targetType),dropEffect:"move",state:"selected",hideEdge:"none",shadow:!1,shadowZIndex:100,shadowFill:"#F3F9FF",shadowFillOpacity:.5,shadowStroke:"#1890FF",shadowStrokeOpacity:.9,shadowLineDash:[5,5],cursor:{default:"default",grab:"grab",grabbing:"grabbing"}};var Oft="*",pD=function(){function n(){this._events={}}return n.prototype.on=function(e,r,i){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:r,once:!!i}),this},n.prototype.once=function(e,r){return this.on(e,r,!0)},n.prototype.emit=function(e){for(var r=this,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var o=this._events[e]||[],s=this._events[Oft]||[],l=function(c){for(var u=c.length,d=0;d<u;d++)if(c[d]){var f=c[d],h=f.callback,p=f.once;p&&(c.splice(d,1),c.length===0&&delete r._events[e],u--,d--),h.apply(r,i)}};l(o),l(s)},n.prototype.off=function(e,r){if(!e)this._events={};else if(!r)delete this._events[e];else{for(var i=this._events[e]||[],a=i.length,o=0;o<a;o++)i[o].callback===r&&(i.splice(o,1),a--,o--);i.length===0&&delete this._events[e]}return this},n.prototype.getEvents=function(){return this._events},n}();function Xj(n,e,r,i){for(;n.length;){const a=n.shift();if(r(a))return!0;e.add(a.id),i(a.id).forEach(s=>{e.has(s.id)||(e.add(s.id),n.push(s))})}return!1}function gO(n,e,r,i){if(r(n))return!0;e.add(n.id);for(const o of i(n.id))if(!e.has(o.id)&&gO(o,e,r,i))return!0;return!1}const Xoe=()=>!0;let Ift=class{constructor(e){Gi(this,"graph");Gi(this,"nodeFilter");Gi(this,"edgeFilter");Gi(this,"cacheEnabled");Gi(this,"inEdgesMap",new Map);Gi(this,"outEdgesMap",new Map);Gi(this,"bothEdgesMap",new Map);Gi(this,"allNodesMap",new Map);Gi(this,"allEdgesMap",new Map);Gi(this,"clearCache",()=>{this.inEdgesMap.clear(),this.outEdgesMap.clear(),this.bothEdgesMap.clear(),this.allNodesMap.clear(),this.allEdgesMap.clear()});Gi(this,"refreshCache",()=>{this.clearCache(),this.updateCache(this.graph.getAllNodes().map(e=>e.id))});Gi(this,"updateCache",e=>{const r=new Set;e.forEach(i=>{const a=this.bothEdgesMap.get(i);if(a&&a.forEach(o=>r.add(o.id)),!this.hasNode(i))this.inEdgesMap.delete(i),this.outEdgesMap.delete(i),this.bothEdgesMap.delete(i),this.allNodesMap.delete(i);else{const o=this.graph.getRelatedEdges(i,"in").filter(this.edgeFilter),s=this.graph.getRelatedEdges(i,"out").filter(this.edgeFilter),l=Array.from(new Set([...o,...s]));l.forEach(c=>r.add(c.id)),this.inEdgesMap.set(i,o),this.outEdgesMap.set(i,s),this.bothEdgesMap.set(i,l),this.allNodesMap.set(i,this.graph.getNode(i))}}),r.forEach(i=>{this.hasEdge(i)?this.allEdgesMap.set(i,this.graph.getEdge(i)):this.allEdgesMap.delete(i)})});Gi(this,"handleGraphChanged",e=>{const r=new Set;e.changes.forEach(i=>{switch(i.type){case"NodeAdded":r.add(i.value.id);break;case"NodeDataUpdated":r.add(i.id);break;case"EdgeAdded":r.add(i.value.source),r.add(i.value.target);break;case"EdgeUpdated":(i.propertyName==="source"||i.propertyName==="target")&&(r.add(i.oldValue),r.add(i.newValue));break;case"EdgeDataUpdated":if(e.graph.hasEdge(i.id)){const a=e.graph.getEdge(i.id);r.add(a.source),r.add(a.target)}break;case"EdgeRemoved":r.add(i.value.source),r.add(i.value.target);break;case"NodeRemoved":r.add(i.value.id);break}}),this.updateCache(r)});this.graph=e.graph;const r=e.nodeFilter||Xoe,i=e.edgeFilter||Xoe;this.nodeFilter=r,this.edgeFilter=a=>{const{source:o,target:s}=this.graph.getEdgeDetail(a.id);return!r(o)||!r(s)?!1:i(a,o,s)},e.cache==="auto"?(this.cacheEnabled=!0,this.startAutoCache()):e.cache==="manual"?this.cacheEnabled=!0:this.cacheEnabled=!1}startAutoCache(){this.refreshCache(),this.graph.on("changed",this.handleGraphChanged)}stopAutoCache(){this.graph.off("changed",this.handleGraphChanged)}checkNodeExistence(e){this.getNode(e)}hasNode(e){if(!this.graph.hasNode(e))return!1;const r=this.graph.getNode(e);return this.nodeFilter(r)}areNeighbors(e,r){return this.checkNodeExistence(e),this.getNeighbors(r).some(i=>i.id===e)}getNode(e){const r=this.graph.getNode(e);if(!this.nodeFilter(r))throw new Error("Node not found for id: "+e);return r}getRelatedEdges(e,r){return this.checkNodeExistence(e),this.cacheEnabled?r==="in"?this.inEdgesMap.get(e):r==="out"?this.outEdgesMap.get(e):this.bothEdgesMap.get(e):this.graph.getRelatedEdges(e,r).filter(this.edgeFilter)}getDegree(e,r){return this.getRelatedEdges(e,r).length}getSuccessors(e){const i=this.getRelatedEdges(e,"out").map(a=>this.getNode(a.target));return Array.from(new Set(i))}getPredecessors(e){const i=this.getRelatedEdges(e,"in").map(a=>this.getNode(a.source));return Array.from(new Set(i))}getNeighbors(e){const r=this.getPredecessors(e),i=this.getSuccessors(e);return Array.from(new Set([...r,...i]))}hasEdge(e){if(!this.graph.hasEdge(e))return!1;const r=this.graph.getEdge(e);return this.edgeFilter(r)}getEdge(e){const r=this.graph.getEdge(e);if(!this.edgeFilter(r))throw new Error("Edge not found for id: "+e);return r}getEdgeDetail(e){const r=this.getEdge(e);return{edge:r,source:this.getNode(r.source),target:this.getNode(r.target)}}hasTreeStructure(e){return this.graph.hasTreeStructure(e)}getRoots(e){return this.graph.getRoots(e).filter(this.nodeFilter)}getChildren(e,r){return this.checkNodeExistence(e),this.graph.getChildren(e,r).filter(this.nodeFilter)}getParent(e,r){this.checkNodeExistence(e);const i=this.graph.getParent(e,r);return!i||!this.nodeFilter(i)?null:i}getAllNodes(){return this.cacheEnabled?Array.from(this.allNodesMap.values()):this.graph.getAllNodes().filter(this.nodeFilter)}getAllEdges(){return this.cacheEnabled?Array.from(this.allEdgesMap.values()):this.graph.getAllEdges().filter(this.edgeFilter)}bfs(e,r,i="out"){const a={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[i];Xj([this.getNode(e)],new Set,r,a)}dfs(e,r,i="out"){const a={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[i];gO(this.getNode(e),new Set,r,a)}},zo=class xCe extends pD{constructor(r){super();Gi(this,"nodeMap",new Map);Gi(this,"edgeMap",new Map);Gi(this,"inEdgesMap",new Map);Gi(this,"outEdgesMap",new Map);Gi(this,"bothEdgesMap",new Map);Gi(this,"treeIndices",new Map);Gi(this,"changes",[]);Gi(this,"batchCount",0);Gi(this,"onChanged",()=>{});Gi(this,"batch",r=>{this.batchCount+=1,r(),this.batchCount-=1,this.batchCount||this.commit()});r&&(r.nodes&&this.addNodes(r.nodes),r.edges&&this.addEdges(r.edges),r.tree&&this.addTree(r.tree),r.onChanged&&(this.onChanged=r.onChanged))}commit(){const r=this.changes;this.changes=[];const i={graph:this,changes:r};this.emit("changed",i),this.onChanged(i)}reduceChanges(r){let i=[];return r.forEach(a=>{switch(a.type){case"NodeRemoved":{let o=!1;i=i.filter(s=>{if(s.type==="NodeAdded"){const l=s.value.id===a.value.id;return l&&(o=!0),!l}else{if(s.type==="NodeDataUpdated")return s.id!==a.value.id;if(s.type==="TreeStructureChanged")return s.nodeId!==a.value.id}return!0}),o||i.push(a);break}case"EdgeRemoved":{let o=!1;i=i.filter(s=>{if(s.type==="EdgeAdded"){const l=s.value.id===a.value.id;return l&&(o=!0),!l}else if(s.type==="EdgeDataUpdated"||s.type==="EdgeUpdated")return s.id!==a.value.id;return!0}),o||i.push(a);break}case"NodeDataUpdated":case"EdgeDataUpdated":case"EdgeUpdated":{const o=i.findIndex(l=>l.type===a.type&&l.id===a.id&&(a.propertyName===void 0||l.propertyName===a.propertyName)),s=i[o];s?a.propertyName!==void 0?s.newValue=a.newValue:(i.splice(o,1),i.push(a)):i.push(a);break}case"TreeStructureDetached":{i=i.filter(o=>o.type==="TreeStructureAttached"||o.type==="TreeStructureChanged"?o.treeKey!==a.treeKey:!0),i.push(a);break}case"TreeStructureChanged":{const o=i.find(s=>s.type==="TreeStructureChanged"&&s.treeKey===a.treeKey&&s.nodeId===a.nodeId);o?o.newParentId=a.newParentId:i.push(a);break}default:i.push(a);break}}),i}checkNodeExistence(r){this.getNode(r)}hasNode(r){return this.nodeMap.has(r)}areNeighbors(r,i){return this.getNeighbors(i).some(a=>a.id===r)}getNode(r){const i=this.nodeMap.get(r);if(!i)throw new Error("Node not found for id: "+r);return i}getRelatedEdges(r,i){if(this.checkNodeExistence(r),i==="in"){const a=this.inEdgesMap.get(r);return Array.from(a)}else if(i==="out"){const a=this.outEdgesMap.get(r);return Array.from(a)}else{const a=this.bothEdgesMap.get(r);return Array.from(a)}}getDegree(r,i){return this.getRelatedEdges(r,i).length}getSuccessors(r){const a=this.getRelatedEdges(r,"out").map(o=>this.getNode(o.target));return Array.from(new Set(a))}getPredecessors(r){const a=this.getRelatedEdges(r,"in").map(o=>this.getNode(o.source));return Array.from(new Set(a))}getNeighbors(r){const i=this.getPredecessors(r),a=this.getSuccessors(r);return Array.from(new Set([...i,...a]))}doAddNode(r){if(this.hasNode(r.id))throw new Error("Node already exists: "+r.id);this.nodeMap.set(r.id,r),this.inEdgesMap.set(r.id,new Set),this.outEdgesMap.set(r.id,new Set),this.bothEdgesMap.set(r.id,new Set),this.treeIndices.forEach(i=>{i.childrenMap.set(r.id,new Set)}),this.changes.push({type:"NodeAdded",value:r})}addNodes(r){this.batch(()=>{for(const i of r)this.doAddNode(i)})}addNode(r){this.addNodes([r])}doRemoveNode(r){const i=this.getNode(r),a=this.bothEdgesMap.get(r);a==null||a.forEach(o=>this.doRemoveEdge(o.id)),this.nodeMap.delete(r),this.treeIndices.forEach(o=>{var l,c;(l=o.childrenMap.get(r))==null||l.forEach(u=>{o.parentMap.delete(u.id)});const s=o.parentMap.get(r);s&&((c=o.childrenMap.get(s.id))==null||c.delete(i)),o.parentMap.delete(r),o.childrenMap.delete(r)}),this.bothEdgesMap.delete(r),this.inEdgesMap.delete(r),this.outEdgesMap.delete(r),this.changes.push({type:"NodeRemoved",value:i})}removeNodes(r){this.batch(()=>{r.forEach(i=>this.doRemoveNode(i))})}removeNode(r){this.removeNodes([r])}updateNodeDataProperty(r,i,a){const o=this.getNode(r);this.batch(()=>{const s=o.data[i],l=a;o.data[i]=l,this.changes.push({type:"NodeDataUpdated",id:r,propertyName:i,oldValue:s,newValue:l})})}mergeNodeData(r,i){this.batch(()=>{Object.entries(i).forEach(([a,o])=>{this.updateNodeDataProperty(r,a,o)})})}updateNodeData(...r){const i=r[0],a=this.getNode(i);if(typeof r[1]=="string"){this.updateNodeDataProperty(i,r[1],r[2]);return}let o;if(typeof r[1]=="function"){const s=r[1];o=s(a.data)}else typeof r[1]=="object"&&(o=r[1]);this.batch(()=>{const s=a.data,l=o;a.data=o,this.changes.push({type:"NodeDataUpdated",id:i,oldValue:s,newValue:l})})}checkEdgeExistence(r){if(!this.hasEdge(r))throw new Error("Edge not found for id: "+r)}hasEdge(r){return this.edgeMap.has(r)}getEdge(r){return this.checkEdgeExistence(r),this.edgeMap.get(r)}getEdgeDetail(r){const i=this.getEdge(r);return{edge:i,source:this.getNode(i.source),target:this.getNode(i.target)}}doAddEdge(r){if(this.hasEdge(r.id))throw new Error("Edge already exists: "+r.id);this.checkNodeExistence(r.source),this.checkNodeExistence(r.target),this.edgeMap.set(r.id,r);const i=this.inEdgesMap.get(r.target),a=this.outEdgesMap.get(r.source),o=this.bothEdgesMap.get(r.source),s=this.bothEdgesMap.get(r.target);i.add(r),a.add(r),o.add(r),s.add(r),this.changes.push({type:"EdgeAdded",value:r})}addEdges(r){this.batch(()=>{for(const i of r)this.doAddEdge(i)})}addEdge(r){this.addEdges([r])}doRemoveEdge(r){const i=this.getEdge(r),a=this.outEdgesMap.get(i.source),o=this.inEdgesMap.get(i.target),s=this.bothEdgesMap.get(i.source),l=this.bothEdgesMap.get(i.target);a.delete(i),o.delete(i),s.delete(i),l.delete(i),this.edgeMap.delete(r),this.changes.push({type:"EdgeRemoved",value:i})}removeEdges(r){this.batch(()=>{r.forEach(i=>this.doRemoveEdge(i))})}removeEdge(r){this.removeEdges([r])}updateEdgeSource(r,i){const a=this.getEdge(r);this.checkNodeExistence(i);const o=a.source,s=i;this.outEdgesMap.get(o).delete(a),this.bothEdgesMap.get(o).delete(a),this.outEdgesMap.get(s).add(a),this.bothEdgesMap.get(s).add(a),a.source=i,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:r,propertyName:"source",oldValue:o,newValue:s})})}updateEdgeTarget(r,i){const a=this.getEdge(r);this.checkNodeExistence(i);const o=a.target,s=i;this.inEdgesMap.get(o).delete(a),this.bothEdgesMap.get(o).delete(a),this.inEdgesMap.get(s).add(a),this.bothEdgesMap.get(s).add(a),a.target=i,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:r,propertyName:"target",oldValue:o,newValue:s})})}updateEdgeDataProperty(r,i,a){const o=this.getEdge(r);this.batch(()=>{const s=o.data[i],l=a;o.data[i]=l,this.changes.push({type:"EdgeDataUpdated",id:r,propertyName:i,oldValue:s,newValue:l})})}updateEdgeData(...r){const i=r[0],a=this.getEdge(i);if(typeof r[1]=="string"){this.updateEdgeDataProperty(i,r[1],r[2]);return}let o;if(typeof r[1]=="function"){const s=r[1];o=s(a.data)}else typeof r[1]=="object"&&(o=r[1]);this.batch(()=>{const s=a.data,l=o;a.data=o,this.changes.push({type:"EdgeDataUpdated",id:i,oldValue:s,newValue:l})})}mergeEdgeData(r,i){this.batch(()=>{Object.entries(i).forEach(([a,o])=>{this.updateEdgeDataProperty(r,a,o)})})}checkTreeExistence(r){if(!this.hasTreeStructure(r))throw new Error("Tree structure not found for treeKey: "+r)}hasTreeStructure(r){return this.treeIndices.has(r)}attachTreeStructure(r){this.treeIndices.has(r)||(this.treeIndices.set(r,{parentMap:new Map,childrenMap:new Map}),this.batch(()=>{this.changes.push({type:"TreeStructureAttached",treeKey:r})}))}detachTreeStructure(r){this.checkTreeExistence(r),this.treeIndices.delete(r),this.batch(()=>{this.changes.push({type:"TreeStructureDetached",treeKey:r})})}addTree(r,i){this.batch(()=>{this.attachTreeStructure(i);const a=[],o=Array.isArray(r)?r:[r];for(;o.length;){const s=o.shift();a.push(s),s.children&&o.push(...s.children)}this.addNodes(a),a.forEach(s=>{var l;(l=s.children)==null||l.forEach(c=>{this.setParent(c.id,s.id,i)})})})}getRoots(r){return this.checkTreeExistence(r),this.getAllNodes().filter(i=>!this.getParent(i.id,r))}getChildren(r,i){this.checkNodeExistence(r),this.checkTreeExistence(i);const o=this.treeIndices.get(i).childrenMap.get(r);return Array.from(o||[])}getParent(r,i){return this.checkNodeExistence(r),this.checkTreeExistence(i),this.treeIndices.get(i).parentMap.get(r)||null}getAncestors(r,i){const a=[];let o=this.getNode(r),s;for(;s=this.getParent(o.id,i);)a.push(s),o=s;return a}setParent(r,i,a){var d,f;this.checkTreeExistence(a);const o=this.treeIndices.get(a);if(!o)return;const s=this.getNode(r),l=o.parentMap.get(r);if((l==null?void 0:l.id)===i)return;if(i==null){l&&((d=o.childrenMap.get(l.id))==null||d.delete(s)),o.parentMap.delete(r);return}const c=this.getNode(i);o.parentMap.set(r,c),l&&((f=o.childrenMap.get(l.id))==null||f.delete(s));let u=o.childrenMap.get(c.id);u||(u=new Set,o.childrenMap.set(c.id,u)),u.add(s),this.batch(()=>{this.changes.push({type:"TreeStructureChanged",treeKey:a,nodeId:r,oldParentId:l==null?void 0:l.id,newParentId:c.id})})}dfsTree(r,i,a){const o=s=>this.getChildren(s,a);return gO(this.getNode(r),new Set,i,o)}bfsTree(r,i,a){const o=s=>this.getChildren(s,a);return Xj([this.getNode(r)],new Set,i,o)}getAllNodes(){return Array.from(this.nodeMap.values())}getAllEdges(){return Array.from(this.edgeMap.values())}bfs(r,i,a="out"){const o={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[a];return Xj([this.getNode(r)],new Set,i,o)}dfs(r,i,a="out"){const o={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[a];return gO(this.getNode(r),new Set,i,o)}clone(){const r=this.getAllNodes().map(o=>({...o,data:{...o.data}})),i=this.getAllEdges().map(o=>({...o,data:{...o.data}})),a=new xCe({nodes:r,edges:i});return this.treeIndices.forEach(({parentMap:o,childrenMap:s},l)=>{const c=new Map;o.forEach((d,f)=>{c.set(f,a.getNode(d.id))});const u=new Map;s.forEach((d,f)=>{u.set(f,new Set(Array.from(d).map(h=>a.getNode(h.id))))}),a.treeIndices.set(l,{parentMap:c,childrenMap:u})}),a}toJSON(){return JSON.stringify({nodes:this.getAllNodes(),edges:this.getAllEdges()})}createView(r){return new Ift({graph:this,...r})}};class gD{constructor(e,r){this.context=e,this.options=r||{}}}var Dft=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})},Lft=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};function kft(n){const{type:e}=n;return["compact-box","mindmap","dendrogram","indented"].includes(e)}function Fft(n){return!Array.isArray(n)&&(n==null?void 0:n.preLayout)}function xP(n){const{nodes:e,edges:r}=n,i={nodes:[],edges:[],combos:[]};return e.forEach(a=>{const o=a.data._isCombo?i.combos:i.nodes,{x:s,y:l,z:c=0}=a.data;o==null||o.push({id:a.id,style:{x:s,y:l,z:c}})}),r.forEach(a=>{const{id:o,source:s,target:l,data:{points:c=[],controlPoints:u=c.slice(1,c.length-1)}}=a;i.edges.push({id:o,source:s,target:l,style:Object.assign({},u!=null&&u.length?{controlPoints:u.map(ps)}:{})})}),i}function $ft(n,e){class r extends gD{constructor(a,o){if(super(a,o),this.instance=new n({}),this.id=this.instance.id,"stop"in this.instance&&"tick"in this.instance){const s=this.instance;this.stop=s.stop.bind(s),this.tick=l=>{const c=s.tick(l);return xP(c)}}}execute(a,o){return Dft(this,void 0,void 0,function*(){return xP(yield this.instance.execute(this.graphData2LayoutModel(a),this.transformOptions(xl({},this.options,o))))})}transformOptions(a){const{onTick:o}=a;return o&&(a.onTick=s=>o(xP(s))),a}graphData2LayoutModel(a){const{nodes:o=[],edges:s=[],combos:l=[]}=a,c=o.map(p=>{const g=Fe(p),{data:m,style:v,combo:y}=p,b=Lft(p,["data","style","combo"]),x={id:g,data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},m),{data:m}),y?{parentId:y}:{}),{style:v}),b)};return v!=null&&v.x&&Object.assign(x.data,{x:v.x}),v!=null&&v.y&&Object.assign(x.data,{y:v.y}),v!=null&&v.z&&Object.assign(x.data,{z:v.z}),x}),u=new Map(c.map(p=>[p.id,p])),d=s.filter(p=>{const{source:g,target:m}=p;return u.has(g)&&u.has(m)}).map(p=>{const{source:g,target:m,data:v,style:y}=p;return{id:Fe(p),source:g,target:m,data:Object.assign({},v),style:Object.assign({},y)}}),f=l.map(p=>({id:Fe(p),data:Object.assign({_isCombo:!0},p.data),style:Object.assign({},p.style)})),h=new zo({nodes:[...c,...f],edges:d});return e.model.model.hasTreeStructure(Ni)&&(h.attachTreeStructure(Ni),c.forEach(p=>{const g=e.model.model.getParent(p.id,Ni);g&&h.hasNode(g.id)&&h.setParent(p.id,g.id,Ni)})),h}}return r}function IF(n,e,...r){if(e in n)return n[e](...r);if("instance"in n){const i=n.instance;if(e in i)return i[e](...r)}return null}function Koe(n,e){if(e in n)return n[e];if("instance"in n){const r=n.instance;if(e in r)return r[e]}return null}var Bft=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};class zft extends IM{get forceLayoutInstance(){return this.context.layout.getLayoutInstance().find(e=>["d3-force","d3-force-3d"].includes(e==null?void 0:e.id))}validate(e){return this.context.layout?this.forceLayoutInstance?super.validate(e):(gh.warn("DragElementForce only works with d3-force or d3-force-3d layout"),!1):!1}moveElement(e,r){return Bft(this,void 0,void 0,function*(){const i=this.forceLayoutInstance;this.context.graph.getNodeData(e).forEach((a,o)=>{const{x:s=0,y:l=0}=a.style||{};i&&IF(i,"setFixedPosition",e[o],[...Jn([+s,+l],r)])})})}onDragStart(e){if(this.enable=this.validate(e),!this.enable)return;this.target=this.getSelectedNodeIDs([e.target.id]),this.hideEdge(),this.context.graph.frontElement(this.target);const r=this.forceLayoutInstance;r&&Koe(r,"simulation").alphaTarget(.3).restart(),this.context.graph.getNodeData(this.target).forEach(i=>{const{x:a=0,y:o=0}=i.style||{};r&&IF(r,"setFixedPosition",Fe(i),[+a,+o])})}onDrag(e){if(!this.enable)return;const r=this.getDelta(e);this.moveElement(this.target,r)}onDragEnd(){const e=this.forceLayoutInstance;e&&Koe(e,"simulation").alphaTarget(0),!this.options.fixed&&this.context.graph.getNodeData(this.target).forEach(r=>{e&&IF(e,"setFixedPosition",Fe(r),[null,null,null])})}}var Zoe=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};class mD extends ac{constructor(e,r){super(e,Object.assign({},mD.defaultOptions,r)),this.isZoomEvent=i=>!!(i.data&&"scale"in i.data),this.relatedEdgeToUpdate=new Set,this.zoom=this.context.graph.getZoom(),this.fixElementSize=i=>Zoe(this,void 0,void 0,function*(){if(!this.validate(i))return;const{graph:a}=this.context,{state:o,nodeFilter:s,edgeFilter:l,comboFilter:c}=this.options,u=(o?a.getElementDataByState("node",o):a.getNodeData()).filter(s),d=(o?a.getElementDataByState("edge",o):a.getEdgeData()).filter(l),f=(o?a.getElementDataByState("combo",o):a.getComboData()).filter(c),h=this.isZoomEvent(i)?this.zoom=Math.max(.01,Math.min(i.data.scale,10)):this.zoom,p=[...u,...f];p.length>0&&p.forEach(g=>this.fixNodeLike(g,h)),this.updateRelatedEdges(),d.length>0&&d.forEach(g=>this.fixEdge(g,h))}),this.cachedStyles=new Map,this.getOriginalFieldValue=(i,a,o)=>{var s;const l=this.cachedStyles.get(i)||[],c=((s=l.find(u=>u.shape===a))===null||s===void 0?void 0:s.style)||{};return o in c||(c[o]=a.attributes[o],this.cachedStyles.set(i,[...l.filter(u=>u.shape!==a),{shape:a,style:c}])),c[o]},this.scaleEntireElement=(i,a,o)=>{a.setLocalScale(1/o);const s=this.cachedStyles.get(i)||[];s.push({shape:a}),this.cachedStyles.set(i,s)},this.scaleSpecificShapes=(i,a,o)=>{const s=But(i);(Array.isArray(o)?o:[o]).forEach(c=>{const{shape:u,fields:d}=c,f=typeof u=="function"?u(s):i.getShape(u);if(f){if(!d){this.scaleEntireElement(i.id,f,a);return}d.forEach(h=>{const p=this.getOriginalFieldValue(i.id,f,h);on(p)&&(f.style[h]=p/a)})}})},this.skipIfExceedViewport=i=>{const{viewport:a}=this.context;return!(a!=null&&a.isInViewport(i.getRenderBounds(),!1,30))},this.fixNodeLike=(i,a)=>{const o=Fe(i),{element:s,model:l}=this.context,c=s.getElement(o);if(!c||this.skipIfExceedViewport(c))return;l.getRelatedEdgesData(o).forEach(f=>this.relatedEdgeToUpdate.add(Fe(f)));const d=this.options[c.type];if(!d){this.scaleEntireElement(o,c,a);return}this.scaleSpecificShapes(c,a,d)},this.fixEdge=(i,a)=>{const o=Fe(i),s=this.context.element.getElement(o);if(!s||this.skipIfExceedViewport(s))return;const l=this.options.edge;if(!l){s.style.transformOrigin="center",this.scaleEntireElement(o,s,a);return}this.scaleSpecificShapes(s,a,l)},this.updateRelatedEdges=()=>{const{element:i}=this.context;this.relatedEdgeToUpdate.size>0&&this.relatedEdgeToUpdate.forEach(a=>{const o=i.getElement(a);o==null||o.update({})}),this.relatedEdgeToUpdate.clear()},this.resetTransform=i=>Zoe(this,void 0,void 0,function*(){var a;!((a=i.data)===null||a===void 0)&&a.firstRender||(this.options.reset?this.restoreCachedStyles():this.fixElementSize({data:{scale:this.zoom}}))}),this.bindEvents()}restoreCachedStyles(){if(this.cachedStyles.size>0){this.cachedStyles.forEach(a=>{a.forEach(({shape:o,style:s})=>{if(Df(s))o.setLocalScale(1);else{if(this.options.state)return;Object.entries(s).forEach(([l,c])=>o.style[l]=c)}})});const{graph:e,element:r}=this.context,i=Object.keys(Object.fromEntries(this.cachedStyles)).filter(a=>a&&e.getElementType(a)==="node");if(i.length>0){const a=new Set;i.forEach(o=>{e.getRelatedEdgesData(o).forEach(s=>a.add(Fe(s)))}),a.forEach(o=>{const s=r==null?void 0:r.getElement(o);s==null||s.update({})})}}}bindEvents(){const{graph:e}=this.context;e.on(Ut.AFTER_DRAW,this.resetTransform),e.on(Ut.AFTER_TRANSFORM,this.fixElementSize)}unbindEvents(){const{graph:e}=this.context;e.off(Ut.AFTER_DRAW,this.resetTransform),e.off(Ut.AFTER_TRANSFORM,this.fixElementSize)}validate(e){if(this.destroyed)return!1;const{enable:r}=this.options;return cn(r)?r(e):!!r}destroy(){this.unbindEvents(),super.destroy()}}mD.defaultOptions={enable:n=>n.data.scale<1,nodeFilter:()=>!0,edgeFilter:()=>!0,comboFilter:()=>!0,edge:[{shape:"key",fields:["lineWidth"]},{shape:"halo",fields:["lineWidth"]},{shape:"label"}],reset:!1};var Uft=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};class vD extends ac{constructor(e,r){super(e,Object.assign({},vD.defaultOptions,r)),this.focus=i=>Uft(this,void 0,void 0,function*(){if(!this.validate(i))return;const{graph:a}=this.context;yield a.focusElement(i.target.id,this.options.animation)}),this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),_y.forEach(r=>{e.on(`${r}:${it.CLICK}`,this.focus)})}validate(e){if(this.destroyed)return!1;const{enable:r}=this.options;return cn(r)?r(e):!!r}unbindEvents(){const{graph:e}=this.context;_y.forEach(r=>{e.off(`${r}:${it.CLICK}`,this.focus)})}destroy(){this.unbindEvents(),super.destroy()}}vD.defaultOptions={animation:{easing:"ease-in",duration:500},enable:!0};class yD extends ac{constructor(e,r){super(e,Object.assign({},yD.defaultOptions,r)),this.isFrozen=!1,this.toggleFrozen=i=>{this.isFrozen=i.type==="dragstart"},this.hoverElement=i=>{if(!this.validate(i))return;const a=i.type===it.POINTER_ENTER;this.updateElementsState(i,a);const{onHover:o,onHoverEnd:s}=this.options;a?o==null||o(i):s==null||s(i)},this.updateElementsState=(i,a)=>{if(!this.options.state&&!this.options.inactiveState)return;const{graph:o}=this.context,{state:s,animation:l,inactiveState:c}=this.options,u=this.getActiveIds(i),d={};if(s&&Object.assign(d,this.getElementsState(u,s,a)),c){const f=OEe(o.getData(),!0).filter(h=>!u.includes(h));Object.assign(d,this.getElementsState(f,c,a))}o.setElementState(d,l)},this.getElementsState=(i,a,o)=>{const{graph:s}=this.context,l={};return i.forEach(c=>{const u=s.getElementState(c);o?l[c]=u.includes(a)?u:[...u,a]:l[c]=u.filter(d=>d!==a)}),l},this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),_y.forEach(i=>{e.on(`${i}:${it.POINTER_ENTER}`,this.hoverElement),e.on(`${i}:${it.POINTER_LEAVE}`,this.hoverElement)});const r=this.context.canvas.document;r.addEventListener(`${it.DRAG_START}`,this.toggleFrozen),r.addEventListener(`${it.DRAG_END}`,this.toggleFrozen)}getActiveIds(e){const{graph:r}=this.context,{degree:i,direction:a}=this.options,o=e.target.id;return i?GEe(r,e.targetType,o,typeof i=="function"?i(e):i,a):[o]}validate(e){if(this.destroyed||this.isFrozen||uD(e.target)||this.context.graph.isCollapsingExpanding)return!1;const{enable:r}=this.options;return cn(r)?r(e):!!r}unbindEvents(){const{graph:e}=this.context;_y.forEach(i=>{e.off(`${i}:${it.POINTER_ENTER}`,this.hoverElement),e.off(`${i}:${it.POINTER_LEAVE}`,this.hoverElement)});const r=this.context.canvas.document;r.removeEventListener(`${it.DRAG_START}`,this.toggleFrozen),r.removeEventListener(`${it.DRAG_END}`,this.toggleFrozen)}destroy(){this.unbindEvents(),super.destroy()}}yD.defaultOptions={animation:!1,enable:!0,degree:0,direction:"both",state:"active",inactiveState:void 0};class Vft extends AM{onPointerDown(e){if(!super.validate(e)||!super.isKeydown()||this.points)return;const{canvas:r}=this.context;this.pathShape=new Lc({id:"g6-lasso-select",style:this.options.style}),r.appendChild(this.pathShape),this.points=[uO(e)]}onPointerMove(e){var r;if(!this.points)return;const{immediately:i,mode:a}=this.options;this.points.push(uO(e)),(r=this.pathShape)===null||r===void 0||r.setAttribute("d",Dut(this.points)),i&&a==="default"&&this.points.length>2&&super.updateElementsStates(this.points)}onPointerUp(){if(this.points){if(this.points.length<2){this.clearLasso();return}super.updateElementsStates(this.points),this.clearLasso()}}clearLasso(){var e;(e=this.pathShape)===null||e===void 0||e.remove(),this.pathShape=void 0,this.points=void 0}}class bD extends ac{constructor(e,r){super(e,Object.assign({},bD.defaultOptions,r)),this.hiddenShapes=[],this.isVisible=!0,this.setElementsVisibility=(i,a,o)=>{i.filter(Boolean).forEach(s=>{a==="hidden"&&!s.isVisible()?this.hiddenShapes.push(s):a==="visible"&&this.hiddenShapes.includes(s)?this.hiddenShapes.splice(this.hiddenShapes.indexOf(s),1):by(s,a,o)})},this.filterShapes=(i,a)=>{if(cn(a))return s=>!a(i,s);const o=a==null?void 0:a[i];return s=>s.className?!(o!=null&&o.includes(s.className)):!0},this.hideShapes=i=>{if(!this.validate(i)||!this.isVisible)return;const{element:a}=this.context,{shapes:o={}}=this.options;this.setElementsVisibility(a.getNodes(),"hidden",this.filterShapes("node",o)),this.setElementsVisibility(a.getEdges(),"hidden",this.filterShapes("edge",o)),this.setElementsVisibility(a.getCombos(),"hidden",this.filterShapes("combo",o)),this.isVisible=!1},this.showShapes=xM(i=>{if(!this.validate(i)||this.isVisible)return;const{element:a}=this.context;this.setElementsVisibility(a.getNodes(),"visible"),this.setElementsVisibility(a.getEdges(),"visible"),this.setElementsVisibility(a.getCombos(),"visible"),this.isVisible=!0},this.options.debounce),this.bindEvents()}bindEvents(){const{graph:e}=this.context;e.on(Ut.BEFORE_TRANSFORM,this.hideShapes),e.on(Ut.AFTER_TRANSFORM,this.showShapes)}unbindEvents(){const{graph:e}=this.context;e.off(Ut.BEFORE_TRANSFORM,this.hideShapes),e.off(Ut.AFTER_TRANSFORM,this.showShapes)}validate(e){if(this.destroyed)return!1;const{enable:r}=this.options;return cn(r)?r(e):!!r}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}bD.defaultOptions={enable:!0,debounce:200,shapes:n=>n==="node"};var Qoe=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};class xD extends ac{constructor(e,r){super(e,Object.assign({},xD.defaultOptions,r)),this.onWheel=i=>Qoe(this,void 0,void 0,function*(){this.options.preventDefault&&i.preventDefault();const a=i.deltaX,o=i.deltaY;yield this.scroll([-a,-o],i)}),this.shortcut=new q_(e.graph),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){var e,r;const{trigger:i}=this.options;if(this.shortcut.unbindAll(),Xa(i)){(e=this.graphDom)===null||e===void 0||e.removeEventListener(it.WHEEL,this.onWheel);const{up:a=[],down:o=[],left:s=[],right:l=[]}=i;this.shortcut.bind(a,c=>this.scroll([0,-10],c)),this.shortcut.bind(o,c=>this.scroll([0,10],c)),this.shortcut.bind(s,c=>this.scroll([-10,0],c)),this.shortcut.bind(l,c=>this.scroll([10,0],c))}else(r=this.graphDom)===null||r===void 0||r.addEventListener(it.WHEEL,this.onWheel,{passive:!1})}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}formatDisplacement(e){const{sensitivity:r}=this.options;return e=Dd(e,r),e=this.clampByDirection(e),e=this.clampByRange(e),e}clampByDirection([e,r]){const{direction:i}=this.options;return i==="x"?r=0:i==="y"&&(e=0),[e,r]}clampByRange([e,r]){const{viewport:i,canvas:a}=this.context,[o,s]=a.getSize(),[l,c,u,d]=mh(this.options.range),f=[s*l,o*c,s*u,o*d],h=uv(xX(i.getCanvasCenter()),f),p=Ci(i.getViewportCenter(),[e,r,0]);if(!Kd(p,h)){const{min:[g,m],max:[v,y]}=h;(p[0]<g&&e>0||p[0]>v&&e<0)&&(e=0),(p[1]<m&&r>0||p[1]>y&&r<0)&&(r=0)}return[e,r]}scroll(e,r){return Qoe(this,void 0,void 0,function*(){if(!this.validate(r))return;const{onFinish:i}=this.options,a=this.context.graph,o=this.formatDisplacement(e);yield a.translateBy(o,!1),i==null||i()})}validate(e){if(this.destroyed)return!1;const{enable:r}=this.options;return cn(r)?r(e):!!r}destroy(){var e;this.shortcut.destroy(),(e=this.graphDom)===null||e===void 0||e.removeEventListener(it.WHEEL,this.onWheel),super.destroy()}}xD.defaultOptions={enable:!0,sensitivity:1,preventDefault:!0,range:1/0};var Joe=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};class _D extends ac{constructor(e,r){super(e,Object.assign({},_D.defaultOptions,r)),this.zoom=(i,a,o)=>Joe(this,void 0,void 0,function*(){if(!this.validate(a))return;const{graph:s}=this.context;let l;"viewport"in a&&(l=ps(a.viewport));const{sensitivity:c,onFinish:u}=this.options,d=1+Ta(i,-50,50)*c/100,f=s.getZoom();yield s.zoomTo(f*d,o,l),u==null||u()}),this.onReset=()=>Joe(this,void 0,void 0,function*(){yield this.context.graph.zoomTo(1,this.options.animation)}),this.preventDefault=i=>{this.options.preventDefault&&i.preventDefault()},this.shortcut=new q_(e.graph),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){const{trigger:e}=this.options;if(this.shortcut.unbindAll(),Array.isArray(e))if(e.includes(it.PINCH))this.shortcut.bind([it.PINCH],r=>{this.zoom(r.scale,r,!1)});else{const r=this.context.canvas.getContainer();r==null||r.addEventListener(it.WHEEL,this.preventDefault),this.shortcut.bind([...e,it.WHEEL],i=>{const{deltaX:a,deltaY:o}=i;this.zoom(-(o??a),i,!1)})}if(typeof e=="object"){const{zoomIn:r=[],zoomOut:i=[],reset:a=[]}=e;this.shortcut.bind(r,o=>this.zoom(10,o,this.options.animation)),this.shortcut.bind(i,o=>this.zoom(-10,o,this.options.animation)),this.shortcut.bind(a,this.onReset)}}validate(e){if(this.destroyed)return!1;const{enable:r}=this.options;return cn(r)?r(e):!!r}destroy(){var e;this.shortcut.destroy(),(e=this.context.canvas.getContainer())===null||e===void 0||e.removeEventListener(it.WHEEL,this.preventDefault),super.destroy()}}_D.defaultOptions={animation:{duration:200},enable:!0,sensitivity:1,trigger:[],preventDefault:!0};function Gft(n,e,r,i){return i===void 0&&(i="height"),r==="center"?(n[i]+e[i])/2:n.height}var hv={assign:Object.assign,getHeight:Gft},_Ce=hv,kX=18,jft=kX*2,ese=kX,Hft={getId:function(e){return e.id||e.name},getPreH:function(e){return e.preH||0},getPreV:function(e){return e.preV||0},getHGap:function(e){return e.hgap||ese},getVGap:function(e){return e.vgap||ese},getChildren:function(e){return e.children},getHeight:function(e){return e.height||jft},getWidth:function(e){var r=e.label||" ";return e.width||r.split("").length*kX}};function mO(n,e){var r=this;if(r.vgap=r.hgap=0,n instanceof mO)return n;r.data=n;var i=e.getHGap(n),a=e.getVGap(n);return r.preH=e.getPreH(n),r.preV=e.getPreV(n),r.width=e.getWidth(n),r.height=e.getHeight(n),r.width+=r.preH,r.height+=r.preV,r.id=e.getId(n),r.x=r.y=0,r.depth=0,r.children||(r.children=[]),r.addGap(i,a),r}_Ce.assign(mO.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(e,r){var i=this;i.hgap+=e,i.vgap+=r,i.width+=2*e,i.height+=2*r},eachNode:function(e){for(var r=this,i=[r],a;a=i.shift();)e(a),i=a.children.concat(i)},DFTraverse:function(e){this.eachNode(e)},BFTraverse:function(e){for(var r=this,i=[r],a;a=i.shift();)e(a),i=i.concat(a.children)},getBoundingBox:function(){var e={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(r){e.left=Math.min(e.left,r.x),e.top=Math.min(e.top,r.y),e.width=Math.max(e.width,r.x+r.width),e.height=Math.max(e.height,r.y+r.height)}),e},translate:function(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this.eachNode(function(i){i.x+=e,i.y+=r,i.x+=i.preH,i.y+=i.preV})},right2left:function(){var e=this,r=e.getBoundingBox();e.eachNode(function(i){i.x=i.x-(i.x-r.left)*2-i.width}),e.translate(r.width,0)},bottom2top:function(){var e=this,r=e.getBoundingBox();e.eachNode(function(i){i.y=i.y-(i.y-r.top)*2-i.height}),e.translate(0,r.height)}});function Wft(n,e,r){e===void 0&&(e={}),e=_Ce.assign({},Hft,e);var i=new mO(n,e),a=[i],o;if(!r&&!n.collapsed){for(;o=a.shift();)if(!o.data.collapsed){var s=e.getChildren(o.data),l=s?s.length:0;if(o.children=new Array(l),s&&l)for(var c=0;c<l;c++){var u=new mO(s[c],e);o.children[c]=u,a.push(u),u.parent=o,u.depth=o.depth+1}}}return i}var wCe=Wft,qft=wCe,Yft=function(){function n(r,i){i===void 0&&(i={});var a=this;a.options=i,a.rootNode=qft(r,i)}var e=n.prototype;return e.execute=function(){throw new Error("please override this method")},n}(),wD=Yft;function a2(n,e,r,i){i===void 0&&(i=[]);var a=this;a.w=n||0,a.h=e||0,a.y=r||0,a.x=0,a.c=i||[],a.cs=i.length,a.prelim=0,a.mod=0,a.shift=0,a.change=0,a.tl=null,a.tr=null,a.el=null,a.er=null,a.msel=0,a.mser=0}a2.fromNode=function(n,e){if(!n)return null;var r=[];return n.children.forEach(function(i){r.push(a2.fromNode(i,e))}),e?new a2(n.height,n.width,n.x,r):new a2(n.width,n.height,n.y,r)};function SCe(n,e,r){r?n.y+=e:n.x+=e,n.children.forEach(function(i){SCe(i,e,r)})}function ECe(n,e){var r=e?n.y:n.x;return n.children.forEach(function(i){r=Math.min(ECe(i,e),r)}),r}function Xft(n,e){var r=ECe(n,e);SCe(n,-r,e)}function CCe(n,e,r){r?e.y=n.x:e.x=n.x,n.c.forEach(function(i,a){CCe(i,e.children[a],r)})}function MCe(n,e,r){r===void 0&&(r=0),e?(n.x=r,r+=n.width):(n.y=r,r+=n.height),n.children.forEach(function(i){MCe(i,e,r)})}var Kft=function(n,e){e===void 0&&(e={});var r=e.isHorizontal;function i(b){if(b.cs===0){a(b);return}i(b.c[0]);for(var x=v(u(b.c[0].el),0,null),_=1;_<b.cs;++_){i(b.c[_]);var S=u(b.c[_].er);o(b,_,x),x=v(S,_,x)}h(b),a(b)}function a(b){b.cs===0?(b.el=b,b.er=b,b.msel=b.mser=0):(b.el=b.c[0].el,b.msel=b.c[0].msel,b.er=b.c[b.cs-1].er,b.mser=b.c[b.cs-1].mser)}function o(b,x,_){for(var S=b.c[x-1],M=S.mod,E=b.c[x],T=E.mod;S!==null&&E!==null;){u(S)>_.low&&(_=_.nxt);var P=M+S.prelim+S.w-(T+E.prelim);P>0&&(T+=P,s(b,x,_.index,P));var A=u(S),N=u(E);A<=N&&(S=c(S),S!==null&&(M+=S.mod)),A>=N&&(E=l(E),E!==null&&(T+=E.mod))}!S&&E?d(b,x,E,T):S&&!E&&f(b,x,S,M)}function s(b,x,_,S){b.c[x].mod+=S,b.c[x].msel+=S,b.c[x].mser+=S,g(b,x,_,S)}function l(b){return b.cs===0?b.tl:b.c[0]}function c(b){return b.cs===0?b.tr:b.c[b.cs-1]}function u(b){return b.y+b.h}function d(b,x,_,S){var M=b.c[0].el;M.tl=_;var E=S-_.mod-b.c[0].msel;M.mod+=E,M.prelim-=E,b.c[0].el=b.c[x].el,b.c[0].msel=b.c[x].msel}function f(b,x,_,S){var M=b.c[x].er;M.tr=_;var E=S-_.mod-b.c[x].mser;M.mod+=E,M.prelim-=E,b.c[x].er=b.c[x-1].er,b.c[x].mser=b.c[x-1].mser}function h(b){b.prelim=(b.c[0].prelim+b.c[0].mod+b.c[b.cs-1].mod+b.c[b.cs-1].prelim+b.c[b.cs-1].w)/2-b.w/2}function p(b,x){x+=b.mod,b.x=b.prelim+x,m(b);for(var _=0;_<b.cs;_++)p(b.c[_],x)}function g(b,x,_,S){if(_!==x-1){var M=x-_;b.c[_+1].shift+=S/M,b.c[x].shift-=S/M,b.c[x].change-=S-S/M}}function m(b){for(var x=0,_=0,S=0;S<b.cs;S++)x+=b.c[S].shift,_+=x+b.c[S].change,b.c[S].mod+=_}function v(b,x,_){for(;_!==null&&b>=_.low;)_=_.nxt;return{low:b,index:x,nxt:_}}MCe(n,r);var y=a2.fromNode(n,r);return i(y),p(y,0),CCe(y,n,r),Xft(n,r),n},tse=wCe,TCe=function(n,e){for(var r=tse(n.data,e,!0),i=tse(n.data,e,!0),a=n.children.length,o=Math.round(a/2),s=e.getSide||function(d,f){return f<o?"right":"left"},l=0;l<a;l++){var c=n.children[l],u=s(c,l);u==="right"?i.children.push(c):r.children.push(c)}return r.eachNode(function(d){d.isRoot()||(d.side="left")}),i.eachNode(function(d){d.isRoot()||(d.side="right")}),{left:r,right:i}},Zft=TCe,Fg=["LR","RL","TB","BT","H","V"],Qft=["LR","RL","H"],Jft=function(e){return Qft.indexOf(e)>-1},eht=Fg[0],FX=function(n,e,r){var i=e.direction||eht;if(e.isHorizontal=Jft(i),Fg.indexOf(i)===-1)throw new TypeError("Invalid direction: "+i);if(i===Fg[0])r(n,e);else if(i===Fg[1])r(n,e),n.right2left();else if(i===Fg[2])r(n,e);else if(i===Fg[3])r(n,e),n.bottom2top();else if(i===Fg[4]||i===Fg[5]){var a=Zft(n,e),o=a.left,s=a.right;r(o,e),r(s,e),e.isHorizontal?o.right2left():o.bottom2top(),s.translate(o.x-s.x,o.y-s.y),n.x=o.x,n.y=s.y;var l=n.getBoundingBox();e.isHorizontal?l.top<0&&n.translate(0,-l.top):l.left<0&&n.translate(-l.left,0)}var c=e.fixedRoot;return c===void 0&&(c=!0),c&&n.translate(-(n.x+n.width/2+n.hgap),-(n.y+n.height/2+n.vgap)),tht(n,e),n};function tht(n,e){if(e.radial){var r=e.isHorizontal?["x","y"]:["y","x"],i=r[0],a=r[1],o={x:1/0,y:1/0},s={x:-1/0,y:-1/0},l=0;n.DFTraverse(function(d){l++;var f=d.x,h=d.y;o.x=Math.min(o.x,f),o.y=Math.min(o.y,h),s.x=Math.max(s.x,f),s.y=Math.max(s.y,h)});var c=s[a]-o[a];if(c===0)return;var u=Math.PI*2/l;n.DFTraverse(function(d){var f=(d[a]-o[a])/c*(Math.PI*2-u)+u,h=d[i]-n[i];d.x=Math.cos(f)*h,d.y=Math.sin(f)*h})}}function nht(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Kj(n,e)}function Kj(n,e){return Kj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Kj(n,e)}var rht=wD,iht=Kft,aht=FX,oht=hv,sht=function(n){function e(){return n.apply(this,arguments)||this}nht(e,n);var r=e.prototype;return r.execute=function(){var a=this;return aht(a.rootNode,a.options,iht)},e}(rht),lht={};function cht(n,e){return e=oht.assign({},lht,e),new sht(n,e).execute()}var uht=cht,dht=hv;function fht(n,e){e===void 0&&(e=[]);var r=this;r.x=r.y=0,r.leftChild=r.rightChild=null,r.height=0,r.children=e}var hht={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function ACe(n,e,r){r?(e.x=n.x,e.y=n.y):(e.x=n.y,e.y=n.x),n.children.forEach(function(i,a){ACe(i,e.children[a],r)})}var pht=function(n,e){e===void 0&&(e={}),e=dht.assign({},hht,e);var r=0;function i(c){if(!c)return null;c.width=0,c.depth&&c.depth>r&&(r=c.depth);var u=c.children,d=u.length,f=new fht(c.height,[]);return u.forEach(function(h,p){var g=i(h);f.children.push(g),p===0&&(f.leftChild=g),p===d-1&&(f.rightChild=g)}),f.originNode=c,f.isLeaf=c.isLeaf(),f}function a(c){if(c.isLeaf||c.children.length===0)c.drawingDepth=r;else{var u=c.children.map(function(f){return a(f)}),d=Math.min.apply(null,u);c.drawingDepth=d-1}return c.drawingDepth}var o;function s(c){c.x=c.drawingDepth*e.rankSep,c.isLeaf?(c.y=0,o&&(c.y=o.y+o.height+e.nodeSep,c.originNode.parent!==o.originNode.parent&&(c.y+=e.subTreeSep)),o=c):(c.children.forEach(function(u){s(u)}),c.y=(c.leftChild.y+c.rightChild.y)/2)}var l=i(n);return a(l),s(l),ACe(l,n,e.isHorizontal),n};function ght(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Zj(n,e)}function Zj(n,e){return Zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Zj(n,e)}var mht=wD,vht=pht,yht=FX,bht=hv,xht=function(n){function e(){return n.apply(this,arguments)||this}ght(e,n);var r=e.prototype;return r.execute=function(){var a=this;return a.rootNode.width=0,yht(a.rootNode,a.options,vht)},e}(mht),_ht={};function wht(n,e){return e=bht.assign({},_ht,e),new xht(n,e).execute()}var Sht=wht,nse=hv;function Eht(n,e,r,i,a){var o=(typeof r=="function"?r(n):r)*n.depth;if(!i)try{if(n.id===n.parent.children[0].id){n.x+=o,n.y=e?e.y:0;return}}catch{}if(n.x+=o,e){if(n.y=e.y+nse.getHeight(e,n,a),e.parent&&n.parent.id!==e.parent.id){var s=e.parent,l=s.y+nse.getHeight(s,n,a);n.y=l>n.y?l:n.y}}else n.y=0}var Cht=function(n,e,r,i){var a=null;n.eachNode(function(o){Eht(o,a,e,r,i),a=o})};function Mht(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Qj(n,e)}function Qj(n,e){return Qj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Qj(n,e)}var Tht=wD,bA=Cht,Aht=TCe,Rht=hv,o2=["LR","RL","H"],Pht=o2[0],Nht=function(n){function e(){return n.apply(this,arguments)||this}Mht(e,n);var r=e.prototype;return r.execute=function(){var a=this,o=a.options,s=a.rootNode;o.isHorizontal=!0;var l=o.indent,c=l===void 0?20:l,u=o.dropCap,d=u===void 0?!0:u,f=o.direction,h=f===void 0?Pht:f,p=o.align;if(h&&o2.indexOf(h)===-1)throw new TypeError("Invalid direction: "+h);if(h===o2[0])bA(s,c,d,p);else if(h===o2[1])bA(s,c,d,p),s.right2left();else if(h===o2[2]){var g=Aht(s,o),m=g.left,v=g.right;bA(m,c,d,p),m.right2left(),bA(v,c,d,p);var y=m.getBoundingBox();v.translate(y.width,0),s.x=v.x-s.width/2}return s},e}(Tht),Oht={};function Iht(n,e){return e=Rht.assign({},Oht,e),new Nht(n,e).execute()}var Dht=Iht,Lht=hv;function RCe(n,e){var r=0;return n.children.length?n.children.forEach(function(i){r+=RCe(i,e)}):r=n.height,n._subTreeSep=e.getSubTreeSep(n.data),n.totalHeight=Math.max(n.height,r)+2*n._subTreeSep,n.totalHeight}function PCe(n){var e=n.children,r=e.length;if(r){e.forEach(function(c){PCe(c)});var i=e[0],a=e[r-1],o=a.y-i.y+a.height,s=0;if(e.forEach(function(c){s+=c.totalHeight}),o>n.height)n.y=i.y+o/2-n.height/2;else if(e.length!==1||n.height>s){var l=n.y+(n.height-o)/2-i.y;e.forEach(function(c){c.translate(0,l)})}else n.y=(i.y+i.height/2+a.y+a.height/2)/2-n.height/2}}var kht={getSubTreeSep:function(){return 0}},Fht=function(n,e){e===void 0&&(e={}),e=Lht.assign({},kht,e),n.parent={x:0,width:0,height:0,y:0},n.BFTraverse(function(r){r.x=r.parent.x+r.parent.width}),n.parent=null,RCe(n,e),n.startY=0,n.y=n.totalHeight/2-n.height/2,n.eachNode(function(r){var i=r.children,a=i.length;if(a){var o=i[0];if(o.startY=r.startY+r._subTreeSep,a===1)o.y=r.y+r.height/2-o.height/2;else{o.y=o.startY+o.totalHeight/2-o.height/2;for(var s=1;s<a;s++){var l=i[s];l.startY=i[s-1].startY+i[s-1].totalHeight,l.y=l.startY+l.totalHeight/2-l.height/2}}}}),PCe(n)};function $ht(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Jj(n,e)}function Jj(n,e){return Jj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Jj(n,e)}var Bht=wD,zht=Fht,Uht=FX,Vht=hv,Ght=function(n){function e(){return n.apply(this,arguments)||this}$ht(e,n);var r=e.prototype;return r.execute=function(){var a=this;return Uht(a.rootNode,a.options,zht)},e}(Bht),jht={};function Hht(n,e){return e=Vht.assign({},jht,e),new Ght(n,e).execute()}var Wht=Hht,qht={compactBox:uht,dendrogram:Sht,indented:Dht,mindmap:Wht},xA=qht;const Yht=(n,e)=>{if(n!=="next"&&n!=="prev")return e},rse=n=>{n.prev.next=n.next,n.next.prev=n.prev,delete n.next,delete n.prev};let Xht=class{constructor(){const e={};e.prev=e,e.next=e.prev,this.shortcut=e}dequeue(){const e=this.shortcut,r=e.prev;if(r&&r!==e)return rse(r),r}enqueue(e){const r=this.shortcut;e.prev&&e.next&&rse(e),e.next=r.next,r.next.prev=e,r.next=e,e.prev=r}toString(){const e=[],r=this.shortcut;let i=r.prev;for(;i!==r;)e.push(JSON.stringify(i,Yht)),i=i==null?void 0:i.prev;return`[${e.join(", ")}]`}},Kht=class extends Xht{};const Zht=()=>1,Qht=(n,e)=>{var r;if(n.getAllNodes().length<=1)return[];const i=ept(n,e||Zht);return(r=Jht(i.graph,i.buckets,i.zeroIdx).map(o=>n.getRelatedEdges(o.v,"out").filter(({target:s})=>s===o.w)))===null||r===void 0?void 0:r.flat()},Jht=(n,e,r)=>{let i=[];const a=e[e.length-1],o=e[0];let s;for(;n.getAllNodes().length;){for(;s=o.dequeue();)DF(n,e,r,s);for(;s=a.dequeue();)DF(n,e,r,s);if(n.getAllNodes().length){for(let l=e.length-2;l>0;--l)if(s=e[l].dequeue(),s){i=i.concat(DF(n,e,r,s,!0));break}}}return i},DF=(n,e,r,i,a)=>{var o,s;const l=[];return n.hasNode(i.v)&&((o=n.getRelatedEdges(i.v,"in"))===null||o===void 0||o.forEach(c=>{const u=c.data.weight,d=n.getNode(c.source);a&&l.push({v:c.source,w:c.target,in:0,out:0}),d.data.out===void 0&&(d.data.out=0),d.data.out-=u,eH(e,r,Object.assign({v:d.id},d.data))}),(s=n.getRelatedEdges(i.v,"out"))===null||s===void 0||s.forEach(c=>{const u=c.data.weight,d=c.target,f=n.getNode(d);f.data.in===void 0&&(f.data.in=0),f.data.in-=u,eH(e,r,Object.assign({v:f.id},f.data))}),n.removeNode(i.v)),a?l:void 0},ept=(n,e)=>{const r=new zo;let i=0,a=0;n.getAllNodes().forEach(c=>{r.addNode({id:c.id,data:{v:c.id,in:0,out:0}})}),n.getAllEdges().forEach(c=>{const u=r.getRelatedEdges(c.source,"out").find(f=>f.target===c.target),d=(e==null?void 0:e(c))||1;u?r.updateEdgeData(u==null?void 0:u.id,Object.assign(Object.assign({},u.data),{weight:u.data.weight+d})):r.addEdge({id:c.id,source:c.source,target:c.target,data:{weight:d}}),a=Math.max(a,r.getNode(c.source).data.out+=d),i=Math.max(i,r.getNode(c.target).data.in+=d)});const o=[],s=a+i+3;for(let c=0;c<s;c++)o.push(new Kht);const l=i+1;return r.getAllNodes().forEach(c=>{eH(o,l,Object.assign({v:c.id},r.getNode(c.id).data))}),{buckets:o,zeroIdx:l,graph:r}},eH=(n,e,r)=>{r.out?r.in?n[r.out-r.in+e].enqueue(r):n[n.length-1].enqueue(r):n[0].enqueue(r)},tpt=(n,e)=>{const i=Qht(n,(a=>o=>o.data.weight||1)());i==null||i.forEach(a=>{const o=a.data;n.removeEdge(a.id),o.forwardName=a.data.name,o.reversed=!0,n.addEdge({id:a.id,source:a.target,target:a.source,data:Object.assign({},o)})})},npt=n=>{n.getAllEdges().forEach(e=>{const r=e.data;if(r.reversed){n.removeEdge(e.id);const i=r.forwardName;delete r.reversed,delete r.forwardName,n.addEdge({id:e.id,source:e.target,target:e.source,data:Object.assign(Object.assign({},r),{forwardName:i})})}})},rpt=(n,e)=>Number(n)-Number(e),K_=(n,e,r,i)=>{let a;do a=`${i}${Math.random()}`;while(n.hasNode(a));return r.dummy=e,n.addNode({id:a,data:r}),a},ipt=n=>{const e=new zo;return n.getAllNodes().forEach(r=>{e.addNode(Object.assign({},r))}),n.getAllEdges().forEach(r=>{const i=e.getRelatedEdges(r.source,"out").find(a=>a.target===r.target);i?e.updateEdgeData(i==null?void 0:i.id,Object.assign(Object.assign({},i.data),{weight:i.data.weight+r.data.weight||0,minlen:Math.max(i.data.minlen,r.data.minlen||1)})):e.addEdge({id:r.id,source:r.source,target:r.target,data:{weight:r.data.weight||0,minlen:r.data.minlen||1}})}),e},NCe=n=>{const e=new zo;return n.getAllNodes().forEach(r=>{n.getChildren(r.id).length||e.addNode(Object.assign({},r))}),n.getAllEdges().forEach(r=>{e.addEdge(r)}),e},apt=(n,e)=>n==null?void 0:n.reduce((r,i,a)=>(r[i]=e[a],r),{}),ise=(n,e)=>{const r=Number(n.x),i=Number(n.y),a=Number(e.x)-r,o=Number(e.y)-i;let s=Number(n.width)/2,l=Number(n.height)/2;if(!a&&!o)return{x:0,y:0};let c,u;return Math.abs(o)*s>Math.abs(a)*l?(o<0&&(l=-l),c=l*a/o,u=l):(a<0&&(s=-s),c=s,u=s*o/a),{x:r+c,y:i+u}},aC=n=>{const e=[],r=OCe(n)+1;for(let i=0;i<r;i++)e.push([]);n.getAllNodes().forEach(i=>{const a=i.data.rank;a!==void 0&&e[a]&&e[a].push(i.id)});for(let i=0;i<r;i++)e[i]=e[i].sort((a,o)=>rpt(n.getNode(a).data.order,n.getNode(o).data.order));return e},opt=n=>{const e=n.getAllNodes().filter(i=>i.data.rank!==void 0).map(i=>i.data.rank),r=Math.min(...e);n.getAllNodes().forEach(i=>{i.data.hasOwnProperty("rank")&&r!==1/0&&(i.data.rank-=r)})},spt=(n,e=0)=>{const r=n.getAllNodes(),i=r.filter(l=>l.data.rank!==void 0).map(l=>l.data.rank),a=Math.min(...i),o=[];r.forEach(l=>{const c=(l.data.rank||0)-a;o[c]||(o[c]=[]),o[c].push(l.id)});let s=0;for(let l=0;l<o.length;l++){const c=o[l];c===void 0?l%e!==0&&(s-=1):s&&(c==null||c.forEach(u=>{const d=n.getNode(u);d&&(d.data.rank=d.data.rank||0,d.data.rank+=s)}))}},ase=(n,e,r,i)=>{const a={width:0,height:0};return on(r)&&on(i)&&(a.rank=r,a.order=i),K_(n,"border",a,e)},OCe=n=>{let e;return n.getAllNodes().forEach(r=>{const i=r.data.rank;i!==void 0&&(e===void 0||i>e)&&(e=i)}),e||(e=0),e},lpt=(n,e)=>{const r={lhs:[],rhs:[]};return n==null||n.forEach(i=>{e(i)?r.lhs.push(i):r.rhs.push(i)}),r},$X=(n,e)=>n.reduce((r,i)=>{const a=e(r),o=e(i);return a>o?i:r}),ICe=(n,e,r,i,a,o)=>{i.includes(e.id)||(i.push(e.id),r||o.push(e.id),a(e.id).forEach(s=>ICe(n,s,r,i,a,o)),r&&o.push(e.id))},DCe=(n,e,r,i)=>{const a=Array.isArray(e)?e:[e],o=c=>n.getNeighbors(c),s=[],l=[];return a.forEach(c=>{if(n.hasNode(c.id))ICe(n,c,r==="post",l,o,s);else throw new Error(`Graph does not have node: ${c}`)}),s},cpt=n=>{const e=r=>{const i=n.getChildren(r),a=n.getNode(r);if(i!=null&&i.length&&i.forEach(o=>e(o.id)),a.data.hasOwnProperty("minRank")){a.data.borderLeft=[],a.data.borderRight=[];for(let o=a.data.minRank,s=a.data.maxRank+1;o<s;o+=1)ose(n,"borderLeft","_bl",r,a,o),ose(n,"borderRight","_br",r,a,o)}};n.getRoots().forEach(r=>e(r.id))},ose=(n,e,r,i,a,o)=>{const s={rank:o,borderType:e,width:0,height:0},l=a.data[e][o-1],c=K_(n,"border",s,r);a.data[e][o]=c,n.setParent(c,i),l&&n.addEdge({id:`e${Math.random()}`,source:l,target:c,data:{weight:1}})},upt=(n,e)=>{const r=e.toLowerCase();(r==="lr"||r==="rl")&&LCe(n)},dpt=(n,e)=>{const r=e.toLowerCase();(r==="bt"||r==="rl")&&fpt(n),(r==="lr"||r==="rl")&&(hpt(n),LCe(n))},LCe=n=>{n.getAllNodes().forEach(e=>{sse(e)}),n.getAllEdges().forEach(e=>{sse(e)})},sse=n=>{const e=n.data.width;n.data.width=n.data.height,n.data.height=e},fpt=n=>{n.getAllNodes().forEach(e=>{LF(e.data)}),n.getAllEdges().forEach(e=>{var r;(r=e.data.points)===null||r===void 0||r.forEach(i=>LF(i)),e.data.hasOwnProperty("y")&&LF(e.data)})},LF=n=>{n!=null&&n.y&&(n.y=-n.y)},hpt=n=>{n.getAllNodes().forEach(e=>{kF(e.data)}),n.getAllEdges().forEach(e=>{var r;(r=e.data.points)===null||r===void 0||r.forEach(i=>kF(i)),e.data.hasOwnProperty("x")&&kF(e.data)})},kF=n=>{const e=n.x;n.x=n.y,n.y=e},ppt=n=>{const e=K_(n,"root",{},"_root"),r=gpt(n);let i=Math.max(...Object.values(r));Math.abs(i)===1/0&&(i=1);const a=i-1,o=2*a+1;n.getAllEdges().forEach(l=>{l.data.minlen*=o});const s=mpt(n)+1;return n.getRoots().forEach(l=>{kCe(n,e,o,s,a,r,l.id)}),{nestingRoot:e,nodeRankFactor:o}},kCe=(n,e,r,i,a,o,s)=>{const l=n.getChildren(s);if(!(l!=null&&l.length)){s!==e&&n.addEdge({id:`e${Math.random()}`,source:e,target:s,data:{weight:0,minlen:r}});return}const c=ase(n,"_bt"),u=ase(n,"_bb"),d=n.getNode(s);n.setParent(c,s),d.data.borderTop=c,n.setParent(u,s),d.data.borderBottom=u,l==null||l.forEach(f=>{kCe(n,e,r,i,a,o,f.id);const h=f.data.borderTop?f.data.borderTop:f.id,p=f.data.borderBottom?f.data.borderBottom:f.id,g=f.data.borderTop?i:2*i,m=h!==p?1:a-o[s]+1;n.addEdge({id:`e${Math.random()}`,source:c,target:h,data:{minlen:m,weight:g,nestingEdge:!0}}),n.addEdge({id:`e${Math.random()}`,source:p,target:u,data:{minlen:m,weight:g,nestingEdge:!0}})}),n.getParent(s)||n.addEdge({id:`e${Math.random()}`,source:e,target:c,data:{weight:0,minlen:a+o[s]}})},gpt=n=>{const e={},r=(i,a)=>{const o=n.getChildren(i);o==null||o.forEach(s=>r(s.id,a+1)),e[i]=a};return n.getRoots().forEach(i=>r(i.id,1)),e},mpt=n=>{let e=0;return n.getAllEdges().forEach(r=>{e+=r.data.weight}),e},vpt=(n,e)=>{e&&n.removeNode(e),n.getAllEdges().forEach(r=>{r.data.nestingEdge&&n.removeEdge(r.id)})},ypt="edge",FCe="edge-label",bpt=(n,e)=>{n.getAllEdges().forEach(r=>xpt(n,r,e))},xpt=(n,e,r)=>{let i=e.source,a=n.getNode(i).data.rank;const o=e.target,s=n.getNode(o).data.rank,l=e.data.labelRank;if(s===a+1)return;n.removeEdge(e.id);let c,u,d;for(d=0,++a;a<s;++d,++a)e.data.points=[],u={originalEdge:e,width:0,height:0,rank:a},c=K_(n,ypt,u,"_d"),a===l&&(u.width=e.data.width,u.height=e.data.height,u.dummy=FCe,u.labelpos=e.data.labelpos),n.addEdge({id:`e${Math.random()}`,source:i,target:c,data:{weight:e.data.weight}}),d===0&&r.push(c),i=c;n.addEdge({id:`e${Math.random()}`,source:i,target:o,data:{weight:e.data.weight}})},_pt=(n,e)=>{e.forEach(r=>{let i=n.getNode(r);const{data:a}=i,o=a.originalEdge;let s;o&&n.addEdge(o);let l=r;for(;i.data.dummy;)s=n.getSuccessors(l)[0],n.removeNode(l),o.data.points.push({x:i.data.x,y:i.data.y}),i.data.dummy===FCe&&(o.data.x=i.data.x,o.data.y=i.data.y,o.data.width=i.data.width,o.data.height=i.data.height),l=s.id,i=n.getNode(l)})},wpt=(n,e,r)=>{const i={};let a;r==null||r.forEach(o=>{let s=n.getParent(o),l,c;for(;s;){if(l=n.getParent(s.id),l?(c=i[l.id],i[l.id]=s.id):(c=a,a=s.id),c&&c!==s.id){e.hasNode(c)||e.addNode({id:c,data:{}}),e.hasNode(s.id)||e.addNode({id:s.id,data:{}}),e.hasEdge(`e${c}-${s.id}`)||e.addEdge({id:`e${c}-${s.id}`,source:c,target:s.id,data:{}});return}s=l}})},Spt=(n,e,r)=>{const i=Ept(n),a=new zo({tree:[{id:i,children:[],data:{}}]});return n.getAllNodes().forEach(o=>{const s=n.getParent(o.id);(o.data.rank===e||o.data.minRank<=e&&e<=o.data.maxRank)&&(a.hasNode(o.id)||a.addNode(Object.assign({},o)),s!=null&&s.id&&!a.hasNode(s==null?void 0:s.id)&&a.addNode(Object.assign({},s)),a.setParent(o.id,(s==null?void 0:s.id)||i),n.getRelatedEdges(o.id,r).forEach(l=>{const c=l.source===o.id?l.target:l.source;a.hasNode(c)||a.addNode(Object.assign({},n.getNode(c)));const u=a.getRelatedEdges(c,"out").find(({target:f})=>f===o.id),d=u!==void 0?u.data.weight:0;u?a.updateEdgeData(u.id,Object.assign(Object.assign({},u.data),{weight:l.data.weight+d})):a.addEdge({id:l.id,source:c,target:o.id,data:{weight:l.data.weight+d}})}),o.data.hasOwnProperty("minRank")&&a.updateNodeData(o.id,Object.assign(Object.assign({},o.data),{borderLeft:o.data.borderLeft[e],borderRight:o.data.borderRight[e]})))}),a},Ept=n=>{let e;for(;n.hasNode(e=`_root${Math.random()}`););return e},Cpt=(n,e,r)=>{const i=apt(r,r.map((d,f)=>f)),o=e.map(d=>{const f=n.getRelatedEdges(d,"out").map(h=>({pos:i[h.target]||0,weight:h.data.weight}));return f==null?void 0:f.sort((h,p)=>h.pos-p.pos)}).flat().filter(d=>d!==void 0);let s=1;for(;s<r.length;)s<<=1;const l=2*s-1;s-=1;const c=Array(l).fill(0,0,l);let u=0;return o==null||o.forEach(d=>{if(d){let f=d.pos+s;c[f]+=d.weight;let h=0;for(;f>0;)f%2&&(h+=c[f+1]),f=f-1>>1,c[f]+=d.weight;u+=d.weight*h}}),u},lse=(n,e)=>{let r=0;for(let i=1;i<(e==null?void 0:e.length);i+=1)r+=Cpt(n,e[i-1],e[i]);return r},cse=n=>{const e={},r=n.getAllNodes(),i=r.map(u=>{var d;return(d=u.data.rank)!==null&&d!==void 0?d:-1/0}),a=Math.max(...i),o=[];for(let u=0;u<a+1;u++)o.push([]);const s=r.sort((u,d)=>n.getNode(u.id).data.rank-n.getNode(d.id).data.rank),c=s.filter(u=>n.getNode(u.id).data.fixorder!==void 0).sort((u,d)=>n.getNode(u.id).data.fixorder-n.getNode(d.id).data.fixorder);return c==null||c.forEach(u=>{isNaN(n.getNode(u.id).data.rank)||o[n.getNode(u.id).data.rank].push(u.id),e[u.id]=!0}),s==null||s.forEach(u=>n.dfsTree(u.id,d=>{if(e.hasOwnProperty(d.id))return!0;e[d.id]=!0,isNaN(d.data.rank)||o[d.data.rank].push(d.id)})),o},Mpt=(n,e)=>e.map(r=>{const i=n.getRelatedEdges(r,"in");if(!(i!=null&&i.length))return{v:r};const a={sum:0,weight:0};return i==null||i.forEach(o=>{const s=n.getNode(o.source);a.sum+=o.data.weight*s.data.order,a.weight+=o.data.weight}),{v:r,barycenter:a.sum/a.weight,weight:a.weight}}),Tpt=(n,e)=>{var r,i,a;const o={};n==null||n.forEach((l,c)=>{o[l.v]={i:c,indegree:0,in:[],out:[],vs:[l.v]};const u=o[l.v];l.barycenter!==void 0&&(u.barycenter=l.barycenter,u.weight=l.weight)}),(r=e.getAllEdges())===null||r===void 0||r.forEach(l=>{const c=o[l.source],u=o[l.target];c!==void 0&&u!==void 0&&(u.indegree++,c.out.push(o[l.target]))});const s=(a=(i=Object.values(o)).filter)===null||a===void 0?void 0:a.call(i,l=>!l.indegree);return Apt(s)},Apt=n=>{var e,r;const i=[],a=c=>u=>{u.merged||(u.barycenter===void 0||c.barycenter===void 0||u.barycenter>=c.barycenter)&&Rpt(c,u)},o=c=>u=>{u.in.push(c),--u.indegree===0&&n.push(u)};for(;n!=null&&n.length;){const c=n.pop();i.push(c),(e=c.in.reverse())===null||e===void 0||e.forEach(u=>a(c)(u)),(r=c.out)===null||r===void 0||r.forEach(u=>o(c)(u))}const s=i.filter(c=>!c.merged),l=["vs","i","barycenter","weight"];return s.map(c=>{const u={};return l==null||l.forEach(d=>{c[d]!==void 0&&(u[d]=c[d])}),u})},Rpt=(n,e)=>{var r;let i=0,a=0;n.weight&&(i+=n.barycenter*n.weight,a+=n.weight),e.weight&&(i+=e.barycenter*e.weight,a+=e.weight),n.vs=(r=e.vs)===null||r===void 0?void 0:r.concat(n.vs),n.barycenter=i/a,n.weight=a,n.i=Math.min(e.i,n.i),e.merged=!0},Ppt=(n,e,r,i)=>{const a=lpt(n,h=>{const p=h.hasOwnProperty("fixorder")&&!isNaN(h.fixorder);return i?!p&&h.hasOwnProperty("barycenter"):p||h.hasOwnProperty("barycenter")}),o=a.lhs,s=a.rhs.sort((h,p)=>-h.i- -p.i),l=[];let c=0,u=0,d=0;o==null||o.sort(Npt(!!e,!!r)),d=use(l,s,d),o==null||o.forEach(h=>{var p;d+=(p=h.vs)===null||p===void 0?void 0:p.length,l.push(h.vs),c+=h.barycenter*h.weight,u+=h.weight,d=use(l,s,d)});const f={vs:l.flat()};return u&&(f.barycenter=c/u,f.weight=u),f},use=(n,e,r)=>{let i=r,a;for(;e.length&&(a=e[e.length-1]).i<=i;)e.pop(),n==null||n.push(a.vs),i++;return i},Npt=(n,e)=>(r,i)=>{if(r.fixorder!==void 0&&i.fixorder!==void 0)return r.fixorder-i.fixorder;if(r.barycenter<i.barycenter)return-1;if(r.barycenter>i.barycenter)return 1;if(e&&r.order!==void 0&&i.order!==void 0){if(r.order<i.order)return-1;if(r.order>i.order)return 1}return n?i.i-r.i:r.i-i.i},$Ce=(n,e,r,i,a,o)=>{var s,l,c,u;let d=n.getChildren(e).map(b=>b.id);const f=n.getNode(e),h=f?f.data.borderLeft:void 0,p=f?f.data.borderRight:void 0,g={};h&&(d=d==null?void 0:d.filter(b=>b!==h&&b!==p));const m=Mpt(n,d||[]);m==null||m.forEach(b=>{var x;if(!((x=n.getChildren(b.v))===null||x===void 0)&&x.length){const _=$Ce(n,b.v,r,i,o);g[b.v]=_,_.hasOwnProperty("barycenter")&&Ipt(b,_)}});const v=Tpt(m,r);Opt(v,g),(s=v.filter(b=>b.vs.length>0))===null||s===void 0||s.forEach(b=>{const x=n.getNode(b.vs[0]);x&&(b.fixorder=x.data.fixorder,b.order=x.data.order)});const y=Ppt(v,i,a,o);if(h&&(y.vs=[h,y.vs,p].flat(),!((l=n.getPredecessors(h))===null||l===void 0)&&l.length)){const b=n.getNode(((c=n.getPredecessors(h))===null||c===void 0?void 0:c[0].id)||""),x=n.getNode(((u=n.getPredecessors(p))===null||u===void 0?void 0:u[0].id)||"");y.hasOwnProperty("barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+b.data.order+x.data.order)/(y.weight+2),y.weight+=2}return y},Opt=(n,e)=>{n==null||n.forEach(r=>{var i;const a=(i=r.vs)===null||i===void 0?void 0:i.map(o=>e[o]?e[o].vs:o);r.vs=a.flat()})},Ipt=(n,e)=>{n.barycenter!==void 0?(n.barycenter=(n.barycenter*n.weight+e.barycenter*e.weight)/(n.weight+e.weight),n.weight+=e.weight):(n.barycenter=e.barycenter,n.weight=e.weight)},Dpt=(n,e)=>{const r=OCe(n),i=[],a=[];for(let d=1;d<r+1;d++)i.push(d);for(let d=r-1;d>-1;d--)a.push(d);const o=dse(n,i,"in"),s=dse(n,a,"out");let l=cse(n);FF(n,l);let c=Number.POSITIVE_INFINITY,u;for(let d=0,f=0;f<4;++d,++f){fse(d%2?o:s,d%4>=2,!1,e),l=aC(n);const h=lse(n,l);h<c&&(f=0,u=Wm(l),c=h)}l=cse(n),FF(n,l);for(let d=0,f=0;f<4;++d,++f){fse(d%2?o:s,d%4>=2,!0,e),l=aC(n);const h=lse(n,l);h<c&&(f=0,u=Wm(l),c=h)}FF(n,u)},dse=(n,e,r)=>e.map(i=>Spt(n,i,r)),fse=(n,e,r,i)=>{const a=new zo;n==null||n.forEach(o=>{var s;const l=o.getRoots()[0].id,c=$Ce(o,l,a,e,r,i);for(let u=0;u<((s=c.vs)===null||s===void 0?void 0:s.length);u++){const d=o.getNode(c.vs[u]);d&&(d.data.order=u)}wpt(o,a,c.vs)})},FF=(n,e)=>{e==null||e.forEach(r=>{r==null||r.forEach((i,a)=>{n.getNode(i).data.order=a})})},Lpt=(n,e)=>{const i=n.getAllNodes().filter(s=>{var l;return!(!((l=n.getChildren(s.id))===null||l===void 0)&&l.length)}).map(s=>s.data.rank),a=Math.max(...i),o=[];for(let s=0;s<a+1;s++)o[s]=[];e==null||e.forEach(s=>{const l=n.getNode(s);!l||l.data.dummy||isNaN(l.data.rank)||(l.data.fixorder=o[l.data.rank].length,o[l.data.rank].push(s))})},kpt=n=>{const e={};let r=0;const i=a=>{const o=r;n.getChildren(a).forEach(s=>i(s.id)),e[a]={low:o,lim:r++}};return n.getRoots().forEach(a=>i(a.id)),e},Fpt=(n,e,r,i)=>{var a,o;const s=[],l=[],c=Math.min(e[r].low,e[i].low),u=Math.max(e[r].lim,e[i].lim);let d,f;d=r;do d=(a=n.getParent(d))===null||a===void 0?void 0:a.id,s.push(d);while(d&&(e[d].low>c||u>e[d].lim));for(f=d,d=i;d&&d!==f;)l.push(d),d=(o=n.getParent(d))===null||o===void 0?void 0:o.id;return{lca:f,path:s.concat(l.reverse())}},$pt=(n,e)=>{const r=kpt(n);e.forEach(i=>{var a,o;let s=i,l=n.getNode(s);const c=l.data.originalEdge;if(!c)return;const u=Fpt(n,r,c.source,c.target),d=u.path,f=u.lca;let h=0,p=d[h],g=!0;for(;s!==c.target;){if(l=n.getNode(s),g){for(;p!==f&&((a=n.getNode(p))===null||a===void 0?void 0:a.data.maxRank)<l.data.rank;)h++,p=d[h];p===f&&(g=!1)}if(!g){for(;h<d.length-1&&((o=n.getNode(d[h+1]))===null||o===void 0?void 0:o.data.minRank)<=l.data.rank;)h++;p=d[h]}n.hasNode(p)&&n.setParent(s,p),s=n.getSuccessors(s)[0].id}})},Bpt=(n,e)=>{const r={},i=(a,o)=>{let s=0,l=0;const c=a.length,u=o==null?void 0:o[(o==null?void 0:o.length)-1];return o==null||o.forEach((d,f)=>{var h;const p=Upt(n,d),g=p?n.getNode(p.id).data.order:c;(p||d===u)&&((h=o.slice(l,f+1))===null||h===void 0||h.forEach(m=>{var v;(v=n.getPredecessors(m))===null||v===void 0||v.forEach(y=>{var b;const x=n.getNode(y.id),_=x.data.order;(_<s||g<_)&&!(x.data.dummy&&(!((b=n.getNode(m))===null||b===void 0)&&b.data.dummy))&&BCe(r,y.id,m)})}),l=f+1,s=g)}),o};return e!=null&&e.length&&e.reduce(i),r},zpt=(n,e)=>{const r={};function i(l,c,u,d,f){var h,p;let g;for(let m=c;m<u;m++)g=l[m],!((h=n.getNode(g))===null||h===void 0)&&h.data.dummy&&((p=n.getPredecessors(g))===null||p===void 0||p.forEach(v=>{const y=n.getNode(v.id);y.data.dummy&&(y.data.order<d||y.data.order>f)&&BCe(r,v.id,g)}))}function a(l){return JSON.stringify(l.slice(1))}function o(l,c){const u=a(l);c.get(u)||(i(...l),c.set(u,!0))}const s=(l,c)=>{let u=-1,d,f=0;const h=new Map;return c==null||c.forEach((p,g)=>{var m;if(((m=n.getNode(p))===null||m===void 0?void 0:m.data.dummy)==="border"){const v=n.getPredecessors(p)||[];v.length&&(d=n.getNode(v[0].id).data.order,o([c,f,g,u,d],h),f=g,u=d)}o([c,f,c.length,d,l.length],h)}),c};return e!=null&&e.length&&e.reduce(s),r},Upt=(n,e)=>{var r,i;if(!((r=n.getNode(e))===null||r===void 0)&&r.data.dummy)return(i=n.getPredecessors(e))===null||i===void 0?void 0:i.find(a=>n.getNode(a.id).data.dummy)},BCe=(n,e,r)=>{let i=e,a=r;if(i>a){const s=i;i=a,a=s}let o=n[i];o||(n[i]=o={}),o[a]=!0},Vpt=(n,e,r)=>{let i=e,a=r;if(i>a){const o=e;i=a,a=o}return!!n[i]},Gpt=(n,e,r,i)=>{const a={},o={},s={};return e==null||e.forEach(l=>{l==null||l.forEach((c,u)=>{a[c]=c,o[c]=c,s[c]=u})}),e==null||e.forEach(l=>{let c=-1;l==null||l.forEach(u=>{let d=i(u).map(f=>f.id);if(d.length){d=d.sort((h,p)=>s[h]-s[p]);const f=(d.length-1)/2;for(let h=Math.floor(f),p=Math.ceil(f);h<=p;++h){const g=d[h];o[u]===u&&c<s[g]&&!Vpt(r,u,g)&&(o[g]=u,o[u]=a[u]=a[g],c=s[g])}}})}),{root:a,align:o}},jpt=(n,e,r,i,a,o,s)=>{var l;const c={},u=Hpt(n,e,r,a,o,s),d=s?"borderLeft":"borderRight",f=(g,m)=>{let v=u.getAllNodes(),y=v.pop();const b={};for(;y;)b[y.id]?g(y.id):(b[y.id]=!0,v.push(y),v=v.concat(m(y.id))),y=v.pop()},h=g=>{c[g]=(u.getRelatedEdges(g,"in")||[]).reduce((m,v)=>Math.max(m,(c[v.source]||0)+v.data.weight),0)},p=g=>{const m=(u.getRelatedEdges(g,"out")||[]).reduce((y,b)=>Math.min(y,(c[b.target]||0)-b.data.weight),Number.POSITIVE_INFINITY),v=n.getNode(g);m!==Number.POSITIVE_INFINITY&&v.data.borderType!==d&&(c[g]=Math.max(c[g],m))};return f(h,u.getPredecessors.bind(u)),f(p,u.getSuccessors.bind(u)),(l=Object.values(i))===null||l===void 0||l.forEach(g=>{c[g]=c[r[g]]}),c},Hpt=(n,e,r,i,a,o)=>{const s=new zo,l=Xpt(i,a,o);return e==null||e.forEach(c=>{let u;c==null||c.forEach(d=>{const f=r[d];if(s.hasNode(f)||s.addNode({id:f,data:{}}),u){const h=r[u],p=s.getRelatedEdges(h,"out").find(g=>g.target===f);p?s.updateEdgeData(p.id,Object.assign(Object.assign({},p.data),{weight:Math.max(l(n,d,u),p.data.weight||0)})):s.addEdge({id:`e${Math.random()}`,source:h,target:f,data:{weight:Math.max(l(n,d,u),0)}})}u=d})}),s},Wpt=(n,e)=>$X(Object.values(e),r=>{var i;let a=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return(i=Object.keys(r))===null||i===void 0||i.forEach(s=>{const l=r[s],c=Kpt(n,s)/2;a=Math.max(l+c,a),o=Math.min(l-c,o)}),a-o});function qpt(n,e){const r=Object.values(e),i=Math.min(...r),a=Math.max(...r);["u","d"].forEach(o=>{["l","r"].forEach(s=>{const l=o+s,c=n[l];let u;if(c===e)return;const d=Object.values(c);u=s==="l"?i-Math.min(...d):a-Math.max(...d),u&&(n[l]={},Object.keys(c).forEach(f=>{n[l][f]=c[f]+u}))})})}const Ypt=(n,e)=>{const r={};return Object.keys(n.ul).forEach(i=>{if(e)r[i]=n[e.toLowerCase()][i];else{const a=Object.values(n).map(o=>o[i]);r[i]=(a[0]+a[1])/2}}),r},Xpt=(n,e,r)=>(i,a,o)=>{const s=i.getNode(a),l=i.getNode(o);let c=0,u=0;if(c+=s.data.width/2,s.data.hasOwnProperty("labelpos"))switch((s.data.labelpos||"").toLowerCase()){case"l":u=-s.data.width/2;break;case"r":u=s.data.width/2;break}if(u&&(c+=r?u:-u),u=0,c+=(s.data.dummy?e:n)/2,c+=(l.data.dummy?e:n)/2,c+=l.data.width/2,l.data.labelpos)switch((l.data.labelpos||"").toLowerCase()){case"l":u=l.data.width/2;break;case"r":u=-l.data.width/2;break}return u&&(c+=r?u:-u),u=0,c},Kpt=(n,e)=>n.getNode(e).data.width||0,Zpt=(n,e)=>{const{ranksep:r=0}=e||{},i=aC(n);let a=0;i==null||i.forEach(o=>{const s=o.map(c=>n.getNode(c).data.height),l=Math.max(...s,0);o==null||o.forEach(c=>{n.getNode(c).data.y=a+l/2}),a+=l+r})},Qpt=(n,e)=>{const{align:r,nodesep:i=0,edgesep:a=0}=e||{},o=aC(n),s=Object.assign(Bpt(n,o),zpt(n,o)),l={};let c=[];["u","d"].forEach(d=>{c=d==="u"?o:Object.values(o).reverse(),["l","r"].forEach(f=>{f==="r"&&(c=c.map(m=>Object.values(m).reverse()));const h=(d==="u"?n.getPredecessors:n.getSuccessors).bind(n),p=Gpt(n,c,s,h),g=jpt(n,c,p.root,p.align,i,a,f==="r");f==="r"&&Object.keys(g).forEach(m=>g[m]=-g[m]),l[d+f]=g})});const u=Wpt(n,l);return u&&qpt(l,u),Ypt(l,r)},Jpt=(n,e)=>{var r;const i=NCe(n);Zpt(i,e);const a=Qpt(i,e);(r=Object.keys(a))===null||r===void 0||r.forEach(o=>{i.getNode(o).data.x=a[o]})},zCe=n=>{const e={},r=i=>{var a;const o=n.getNode(i);if(!o)return 0;if(e[i])return o.data.rank;e[i]=!0;let s;return(a=n.getRelatedEdges(i,"out"))===null||a===void 0||a.forEach(l=>{const c=r(l.target),u=l.data.minlen,d=c-u;d&&(s===void 0||d<s)&&(s=d)}),s||(s=0),o.data.rank=s,s};n.getAllNodes().filter(i=>n.getRelatedEdges(i.id,"in").length===0).forEach(i=>r(i.id))},egt=n=>{const e={};let r;const i=s=>{var l;const c=n.getNode(s);if(!c)return 0;if(e[s])return c.data.rank;e[s]=!0;let u;return(l=n.getRelatedEdges(s,"out"))===null||l===void 0||l.forEach(d=>{const f=i(d.target),h=d.data.minlen,p=f-h;p&&(u===void 0||p<u)&&(u=p)}),u||(u=0),(r===void 0||u<r)&&(r=u),c.data.rank=u,u};n.getAllNodes().filter(s=>n.getRelatedEdges(s.id,"in").length===0).forEach(s=>{s&&i(s.id)}),r===void 0&&(r=0);const a={},o=(s,l)=>{var c;const u=n.getNode(s),d=isNaN(u.data.layer)?l:u.data.layer;(u.data.rank===void 0||u.data.rank<d)&&(u.data.rank=d),!a[s]&&(a[s]=!0,(c=n.getRelatedEdges(s,"out"))===null||c===void 0||c.forEach(f=>{o(f.target,d+f.data.minlen)}))};n.getAllNodes().forEach(s=>{const l=s.data;l&&(isNaN(l.layer)?l.rank-=r:o(s.id,l.layer))})},Ym=(n,e)=>n.getNode(e.target).data.rank-n.getNode(e.source).data.rank-e.data.minlen,tgt=n=>{const e=new zo({tree:[]}),r=n.getAllNodes()[0],i=n.getAllNodes().length;e.addNode(r);let a,o;for(;ngt(e,n)<i;)a=UCe(e,n),o=e.hasNode(a.source)?Ym(n,a):-Ym(n,a),VCe(e,n,o);return e},ngt=(n,e)=>{const r=i=>{e.getRelatedEdges(i,"both").forEach(a=>{const o=a.source,s=i===o?a.target:o;!n.hasNode(s)&&!Ym(e,a)&&(n.addNode({id:s,data:{}}),n.addEdge({id:a.id,source:i,target:s,data:{}}),r(s))})};return n.getAllNodes().forEach(i=>r(i.id)),n.getAllNodes().length},rgt=n=>{const e=new zo({tree:[]}),r=n.getAllNodes()[0],i=n.getAllNodes().length;e.addNode(r);let a,o;for(;igt(e,n)<i;)a=UCe(e,n),o=e.hasNode(a.source)?Ym(n,a):-Ym(n,a),VCe(e,n,o);return e},igt=(n,e)=>{const r=i=>{var a;(a=e.getRelatedEdges(i,"both"))===null||a===void 0||a.forEach(o=>{const s=o.source,l=i===s?o.target:s;!n.hasNode(l)&&(e.getNode(l).data.layer!==void 0||!Ym(e,o))&&(n.addNode({id:l,data:{}}),n.addEdge({id:o.id,source:i,target:l,data:{}}),r(l))})};return n.getAllNodes().forEach(i=>r(i.id)),n.getAllNodes().length},UCe=(n,e)=>$X(e.getAllEdges(),r=>n.hasNode(r.source)!==n.hasNode(r.target)?Ym(e,r):1/0),VCe=(n,e,r)=>{n.getAllNodes().forEach(i=>{const a=e.getNode(i.id);a.data.rank||(a.data.rank=0),a.data.rank+=r})},agt=n=>{const e=ipt(n);zCe(e);const r=tgt(e);jCe(r),GCe(r,e);let i,a;for(;i=lgt(r);)a=cgt(r,e,i),ugt(r,e,i,a)},GCe=(n,e)=>{let r=DCe(n,n.getAllNodes(),"post");r=r.slice(0,(r==null?void 0:r.length)-1),r.forEach(i=>{ogt(n,e,i)})},ogt=(n,e,r)=>{const a=n.getNode(r).data.parent,o=n.getRelatedEdges(r,"both").find(s=>s.target===a||s.source===a);o.data.cutvalue=sgt(n,e,r)},sgt=(n,e,r)=>{const a=n.getNode(r).data.parent;let o=!0,s=e.getRelatedEdges(r,"out").find(c=>c.target===a),l=0;return s||(o=!1,s=e.getRelatedEdges(a,"out").find(c=>c.target===r)),l=s.data.weight,e.getRelatedEdges(r,"both").forEach(c=>{const u=c.source===r,d=u?c.target:c.source;if(d!==a){const f=u===o,h=c.data.weight;if(l+=f?h:-h,fgt(n,r,d)){const p=n.getRelatedEdges(r,"both").find(g=>g.source===d||g.target===d).data.cutvalue;l+=f?-p:p}}}),l},jCe=(n,e=n.getAllNodes()[0].id)=>{HCe(n,{},1,e)},HCe=(n,e,r,i,a)=>{var o;const s=r;let l=r;const c=n.getNode(i);return e[i]=!0,(o=n.getNeighbors(i))===null||o===void 0||o.forEach(u=>{e[u.id]||(l=HCe(n,e,l,u.id,i))}),c.data.low=s,c.data.lim=l++,a?c.data.parent=a:delete c.data.parent,l},lgt=n=>n.getAllEdges().find(e=>e.data.cutvalue<0),cgt=(n,e,r)=>{let i=r.source,a=r.target;e.getRelatedEdges(i,"out").find(d=>d.target===a)||(i=r.target,a=r.source);const o=n.getNode(i),s=n.getNode(a);let l=o,c=!1;o.data.lim>s.data.lim&&(l=s,c=!0);const u=e.getAllEdges().filter(d=>c===hse(n.getNode(d.source),l)&&c!==hse(n.getNode(d.target),l));return $X(u,d=>Ym(e,d))},ugt=(n,e,r,i)=>{const a=n.getRelatedEdges(r.source,"both").find(o=>o.source===r.target||o.target===r.target);a&&n.removeEdge(a.id),n.addEdge({id:`e${Math.random()}`,source:i.source,target:i.target,data:{}}),jCe(n),GCe(n,e),dgt(n,e)},dgt=(n,e)=>{const r=n.getAllNodes().find(a=>!a.data.parent);let i=DCe(n,r,"pre");i=i.slice(1),i.forEach(a=>{const o=n.getNode(a).data.parent;let s=e.getRelatedEdges(a,"out").find(c=>c.target===o),l=!1;!s&&e.hasNode(o)&&(s=e.getRelatedEdges(o,"out").find(c=>c.target===a),l=!0),e.getNode(a).data.rank=(e.hasNode(o)&&e.getNode(o).data.rank||0)+(l?s==null?void 0:s.data.minlen:-(s==null?void 0:s.data.minlen))})},fgt=(n,e,r)=>n.getRelatedEdges(e,"both").find(i=>i.source===r||i.target===r),hse=(n,e)=>e.data.low<=n.data.lim&&n.data.lim<=e.data.lim,hgt=(n,e)=>{switch(e){case"network-simplex":ggt(n);break;case"tight-tree":pse(n);break;case"longest-path":pgt(n);break;default:pse(n)}},pgt=zCe,pse=n=>{egt(n),rgt(n)},ggt=n=>{agt(n)},mgt=(n,e)=>{const{edgeLabelSpace:r,keepNodeOrder:i,prevGraph:a,rankdir:o,ranksep:s}=e;!i&&a&&ygt(n,a);const l=Egt(n);r&&(e.ranksep=Cgt(l,{rankdir:o,ranksep:s}));let c;try{c=vgt(l,e)}catch(u){if(u.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,u);return}throw u}return bgt(n,l),c},vgt=(n,e)=>{const{ranker:r,rankdir:i="tb",nodeOrder:a,keepNodeOrder:o,align:s,nodesep:l=50,edgesep:c=20,ranksep:u=50}=e;Dgt(n),tpt(n);const{nestingRoot:d,nodeRankFactor:f}=ppt(n);hgt(NCe(n),r),Mgt(n),spt(n,f),vpt(n,d),opt(n),Tgt(n),Agt(n);const h=[];bpt(n,h),$pt(n,h),cpt(n),o&&Lpt(n,a),Dpt(n,o),Lgt(n),upt(n,i),Jpt(n,{align:s,nodesep:l,edgesep:c,ranksep:u}),kgt(n),Igt(n),_pt(n,h),Ngt(n),dpt(n,i);const{width:p,height:g}=Rgt(n);return Pgt(n),Ogt(n),npt(n),{width:p,height:g}},ygt=(n,e)=>{n.getAllNodes().forEach(r=>{const i=n.getNode(r.id);if(e.hasNode(r.id)){const a=e.getNode(r.id);i.data.fixorder=a.data._order,delete a.data._order}else delete i.data.fixorder})},bgt=(n,e)=>{n.getAllNodes().forEach(r=>{var i;const a=n.getNode(r.id);if(a){const o=e.getNode(r.id);a.data.x=o.data.x,a.data.y=o.data.y,a.data._order=o.data.order,a.data._rank=o.data.rank,!((i=e.getChildren(r.id))===null||i===void 0)&&i.length&&(a.data.width=o.data.width,a.data.height=o.data.height)}}),n.getAllEdges().forEach(r=>{const i=n.getEdge(r.id),a=e.getEdge(r.id);i.data.points=a?a.data.points:[],a&&a.data.hasOwnProperty("x")&&(i.data.x=a.data.x,i.data.y=a.data.y)})},xgt=["width","height","layer","fixorder"],_gt={width:0,height:0},wgt=["minlen","weight","width","height","labeloffset"],Sgt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},$F=["labelpos"],Egt=n=>{const e=new zo({tree:[]});return n.getAllNodes().forEach(r=>{const i=mse(n.getNode(r.id).data),a=Object.assign(Object.assign({},_gt),i),o=gse(a,xgt);e.hasNode(r.id)||e.addNode({id:r.id,data:Object.assign({},o)});const s=n.hasTreeStructure("combo")?n.getParent(r.id,"combo"):n.getParent(r.id);Nn(s)||(e.hasNode(s.id)||e.addNode(Object.assign({},s)),e.setParent(r.id,s.id))}),n.getAllEdges().forEach(r=>{const i=mse(n.getEdge(r.id).data),a={};$F==null||$F.forEach(o=>{i[o]!==void 0&&(a[o]=i[o])}),e.addEdge({id:r.id,source:r.source,target:r.target,data:Object.assign({},Sgt,gse(i,wgt),a)})}),e},Cgt=(n,e)=>{const{ranksep:r=0,rankdir:i}=e;return n.getAllNodes().forEach(a=>{isNaN(a.data.layer)||a.data.layer||(a.data.layer=0)}),n.getAllEdges().forEach(a=>{var o;a.data.minlen*=2,((o=a.data.labelpos)===null||o===void 0?void 0:o.toLowerCase())!=="c"&&(i==="TB"||i==="BT"?a.data.width+=a.data.labeloffset:a.data.height+=a.data.labeloffset)}),r/2},Mgt=n=>{n.getAllEdges().forEach(e=>{if(e.data.width&&e.data.height){const r=n.getNode(e.source),i=n.getNode(e.target),a={e,rank:(i.data.rank-r.data.rank)/2+r.data.rank};K_(n,"edge-proxy",a,"_ep")}})},Tgt=n=>{let e=0;return n.getAllNodes().forEach(r=>{var i,a;r.data.borderTop&&(r.data.minRank=(i=n.getNode(r.data.borderTop))===null||i===void 0?void 0:i.data.rank,r.data.maxRank=(a=n.getNode(r.data.borderBottom))===null||a===void 0?void 0:a.data.rank,e=Math.max(e,r.data.maxRank||-1/0))}),e},Agt=n=>{n.getAllNodes().forEach(e=>{e.data.dummy==="edge-proxy"&&(n.getEdge(e.data.e.id).data.labelRank=e.data.rank,n.removeNode(e.id))})},Rgt=(n,e)=>{let r,i=0,a,o=0;const{marginx:s=0,marginy:l=0}={},c=u=>{if(!u.data)return;const d=u.data.x,f=u.data.y,h=u.data.width,p=u.data.height;!isNaN(d)&&!isNaN(h)&&(r===void 0&&(r=d-h/2),r=Math.min(r,d-h/2),i=Math.max(i,d+h/2)),!isNaN(f)&&!isNaN(p)&&(a===void 0&&(a=f-p/2),a=Math.min(a,f-p/2),o=Math.max(o,f+p/2))};return n.getAllNodes().forEach(u=>{c(u)}),n.getAllEdges().forEach(u=>{u!=null&&u.data.hasOwnProperty("x")&&c(u)}),r-=s,a-=l,n.getAllNodes().forEach(u=>{u.data.x-=r,u.data.y-=a}),n.getAllEdges().forEach(u=>{var d;(d=u.data.points)===null||d===void 0||d.forEach(f=>{f.x-=r,f.y-=a}),u.data.hasOwnProperty("x")&&(u.data.x-=r),u.data.hasOwnProperty("y")&&(u.data.y-=a)}),{width:i-r+s,height:o-a+l}},Pgt=n=>{n.getAllEdges().forEach(e=>{const r=n.getNode(e.source),i=n.getNode(e.target);let a,o;e.data.points?(a=e.data.points[0],o=e.data.points[e.data.points.length-1]):(e.data.points=[],a={x:i.data.x,y:i.data.y},o={x:r.data.x,y:r.data.y}),e.data.points.unshift(ise(r.data,a)),e.data.points.push(ise(i.data,o))})},Ngt=n=>{n.getAllEdges().forEach(e=>{if(e.data.hasOwnProperty("x"))switch((e.data.labelpos==="l"||e.data.labelpos==="r")&&(e.data.width-=e.data.labeloffset),e.data.labelpos){case"l":e.data.x-=e.data.width/2+e.data.labeloffset;break;case"r":e.data.x+=e.data.width/2+e.data.labeloffset;break}})},Ogt=n=>{n.getAllEdges().forEach(e=>{var r;e.data.reversed&&((r=e.data.points)===null||r===void 0||r.reverse())})},Igt=n=>{n.getAllNodes().forEach(e=>{var r,i,a;if(!((r=n.getChildren(e.id))===null||r===void 0)&&r.length){const o=n.getNode(e.id),s=n.getNode(o.data.borderTop),l=n.getNode(o.data.borderBottom),c=n.getNode(o.data.borderLeft[((i=o.data.borderLeft)===null||i===void 0?void 0:i.length)-1]),u=n.getNode(o.data.borderRight[((a=o.data.borderRight)===null||a===void 0?void 0:a.length)-1]);o.data.width=Math.abs((u==null?void 0:u.data.x)-(c==null?void 0:c.data.x))||10,o.data.height=Math.abs((l==null?void 0:l.data.y)-(s==null?void 0:s.data.y))||10,o.data.x=((c==null?void 0:c.data.x)||0)+o.data.width/2,o.data.y=((s==null?void 0:s.data.y)||0)+o.data.height/2}}),n.getAllNodes().forEach(e=>{e.data.dummy==="border"&&n.removeNode(e.id)})},Dgt=n=>{n.getAllEdges().forEach(e=>{if(e.source===e.target){const r=n.getNode(e.source);r.data.selfEdges||(r.data.selfEdges=[]),r.data.selfEdges.push(e),n.removeEdge(e.id)}})},Lgt=n=>{const e=aC(n);e==null||e.forEach(r=>{let i=0;r==null||r.forEach((a,o)=>{var s;const l=n.getNode(a);l.data.order=o+i,(s=l.data.selfEdges)===null||s===void 0||s.forEach(c=>{K_(n,"selfedge",{width:c.data.width,height:c.data.height,rank:l.data.rank,order:o+ ++i,e:c},"_se")}),delete l.data.selfEdges})})},kgt=n=>{n.getAllNodes().forEach(e=>{const r=n.getNode(e.id);if(r.data.dummy==="selfedge"){const i=n.getNode(r.data.e.source),a=i.data.x+i.data.width/2,o=i.data.y,s=r.data.x-a,l=i.data.height/2;n.hasEdge(r.data.e.id)?n.updateEdgeData(r.data.e.id,r.data.e.data):n.addEdge({id:r.data.e.id,source:r.data.e.source,target:r.data.e.target,data:r.data.e.data}),n.removeNode(e.id),r.data.e.data.points=[{x:a+2*s/3,y:o-l},{x:a+5*s/6,y:o-l},{y:o,x:a+s},{x:a+5*s/6,y:o+l},{x:a+2*s/3,y:o+l}],r.data.e.data.x=r.data.x,r.data.e.data.y=r.data.y}})},gse=(n,e)=>{const r={};return e==null||e.forEach(i=>{n[i]!==void 0&&(r[i]=+n[i])}),r},mse=(n={})=>{const e={};return Object.keys(n).forEach(r=>{e[r.toLowerCase()]=n[r]}),e},Jh=Array.isArray,WCe=n=>{const e=[],r=n.length;for(let i=0;i<r;i+=1){e[i]=[];for(let a=0;a<r;a+=1)i===a?e[i][a]=0:n[i][a]===0||!n[i][a]?e[i][a]=1/0:e[i][a]=n[i][a]}for(let i=0;i<r;i+=1)for(let a=0;a<r;a+=1)for(let o=0;o<r;o+=1)e[a][o]>e[a][i]+e[i][o]&&(e[a][o]=e[a][i]+e[i][o]);return e},qCe=(n,e)=>{const{nodes:r,edges:i}=n,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach((s,l)=>{o[s.id]=l;const c=[];a.push(c)}),i==null||i.forEach(s=>{const{source:l,target:c}=s,u=o[l],d=o[c];u===void 0||d===void 0||(a[u][d]=1,a[d][u]=1)}),a},Fgt=(n,e)=>{const r=[];return n.forEach(i=>{const a=[];i.forEach(o=>{a.push(o*e)}),r.push(a)}),r},$gt=n=>{let e=1/0,r=1/0,i=-1/0,a=-1/0;return n.forEach(o=>{let s=o.data.size;Jh(s)?s.length===1&&(s=[s[0],s[0]]):on(s)?s=[s,s]:(s===void 0||isNaN(s))&&(s=[30,30]);const l=[s[0]/2,s[1]/2],c=o.data.x-l[0],u=o.data.x+l[0],d=o.data.y-l[1],f=o.data.y+l[1];e>c&&(e=c),r>d&&(r=d),i<u&&(i=u),a<f&&(a=f)}),{minX:e,minY:r,maxX:i,maxY:a}},vse=(n,e)=>Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)),tH=(n,e,r,i="TB",a,o={})=>{if(!(e!=null&&e.length))return;const{stopBranchFn:s,stopAllFn:l}=o;for(let c=0;c<e.length;c++){const u=e[c];if(n.hasNode(u.id)&&!(s!=null&&s(u))){if(l!=null&&l(u))return;i==="TB"&&r(u),tH(n,n.getChildren(u.id,a),r,i,a,o),i!=="TB"&&r(u)}}},nH=n=>{if(n===null)return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof Array){const e=[];return n.forEach(r=>{e.push(r)}),e.map(r=>nH(r))}if(typeof n=="object"){const e={};return Object.keys(n).forEach(r=>{e[r]=nH(n[r])}),e}return n},kc=(n,e)=>{const r=nH(n);return r.data=r.data||{},e&&(on(r.data.x)||(r.data.x=Math.random()*e[0]),on(r.data.y)||(r.data.y=Math.random()*e[1])),r};function DM(n){if(!n)return[0,0,0];if(on(n))return[n,n,n];if(n.length===0)return[0,0,0];const[e,r=e,i=e]=n;return[e,r,i]}function j0(n,e){let r;return cn(e)?r=e:on(e)?r=()=>e:r=()=>n,r}function BX(n,e,r=!0){return!e&&e!==0?i=>{const{size:a}=i.data||{};return a?Array.isArray(a)?r?Math.max(...a)||n:a:Xa(a)&&a.width&&a.height?r?Math.max(a.width,a.height)||n:[a.width,a.height]:a:n}:cn(e)?e:on(e)?()=>e:Array.isArray(e)?()=>r?Math.max(...e)||n:e:Xa(e)&&e.width&&e.height?()=>r?Math.max(e.width,e.height)||n:[e.width,e.height]:()=>n}const zX=(n,e,r=10)=>{let i;const a=typeof e=="function"?e:()=>e||0;return n?Array.isArray(n)?i=s=>n:cn(n)?i=n:i=s=>n:i=s=>{var l,c,u;if(!((l=s.data)===null||l===void 0)&&l.bboxSize)return(c=s.data)===null||c===void 0?void 0:c.bboxSize;if(!((u=s.data)===null||u===void 0)&&u.size){const d=s.data.size;return Array.isArray(d)?d:Xa(d)?[d.width,d.height]:d}return r},s=>{const l=i(s),c=a(s);return Math.max(...DM(l))+c}},Bgt={rankdir:"TB",nodesep:50,ranksep:50,edgeLabelSpace:!0,ranker:"tight-tree",controlPoints:!1,radial:!1,focusNode:null};class zgt{constructor(e={}){this.options=e,this.id="antv-dagre",this.options=Object.assign(Object.assign({},Bgt),e)}execute(e,r){return vr(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,e,r)})}assign(e,r){return vr(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,e,r)})}genericDagreLayout(e,r,i){return vr(this,void 0,void 0,function*(){const a=Object.assign(Object.assign({},this.options),i),{nodeSize:o,align:s,rankdir:l="TB",ranksep:c,nodesep:u,ranksepFunc:d,nodesepFunc:f,edgeLabelSpace:h,ranker:p,nodeOrder:g,begin:m,controlPoints:v,radial:y,sortByCombo:b,preset:x}=a,_=new zo({tree:[]}),S=j0(c||50,d),M=j0(u||50,f);let E=M,T=S;(l==="LR"||l==="RL")&&(E=S,T=M);const P=BX(10,o,!1),A=r.getAllNodes(),N=r.getAllEdges();A.forEach(F=>{const G=DM(P(F)),z=T(F),U=E(F),H=G[0]+2*U,X=G[1]+2*z,V=F.data.layer;on(V)?_.addNode({id:F.id,data:{width:H,height:X,layer:V}}):_.addNode({id:F.id,data:{width:H,height:X}})}),b&&(_.attachTreeStructure("combo"),A.forEach(F=>{const{parentId:G}=F.data;G!==void 0&&_.hasNode(G)&&_.setParent(F.id,G,"combo")})),N.forEach(F=>{_.addEdge({id:F.id,source:F.source,target:F.target,data:{weight:F.data.weight||1}})});let O;x!=null&&x.length&&(O=new zo({nodes:x})),mgt(_,{prevGraph:O,edgeLabelSpace:h,keepNodeOrder:!!g,nodeOrder:g||[],acyclicer:"greedy",ranker:p,rankdir:l,nodesep:u,align:s});const I=[0,0];if(m){let F=1/0,G=1/0;_.getAllNodes().forEach(z=>{F>z.data.x&&(F=z.data.x),G>z.data.y&&(G=z.data.y)}),_.getAllEdges().forEach(z=>{var U;(U=z.data.points)===null||U===void 0||U.forEach(H=>{F>H.x&&(F=H.x),G>H.y&&(G=H.y)})}),I[0]=m[0]-F,I[1]=m[1]-G}const D=l==="LR"||l==="RL";if(!y){const F=new Set,z=l==="BT"||l==="RL"?(V,W)=>W-V:(V,W)=>V-W;_.getAllNodes().forEach(V=>{V.data.x=V.data.x+I[0],V.data.y=V.data.y+I[1],F.add(D?V.data.x:V.data.y)});const U=Array.from(F).sort(z),H=D?(V,W)=>V.x!==W.x:(V,W)=>V.y!==W.y,X=D?(V,W,K)=>{const q=Math.max(W.y,K.y),Q=Math.min(W.y,K.y);return V.filter(ie=>ie.y<=q&&ie.y>=Q)}:(V,W,K)=>{const q=Math.max(W.x,K.x),Q=Math.min(W.x,K.x);return V.filter(ie=>ie.x<=q&&ie.x>=Q)};_.getAllEdges().forEach((V,W)=>{var K;h&&v&&V.data.type!=="loop"&&(V.data.controlPoints=Ugt((K=V.data.points)===null||K===void 0?void 0:K.map(({x:q,y:Q})=>({x:q+I[0],y:Q+I[1]})),_.getNode(V.source),_.getNode(V.target),U,D,H,X))})}let k=[];k=_.getAllNodes().map(F=>kc(F));const $=_.getAllEdges();return e&&(k.forEach(F=>{r.mergeNodeData(F.id,{x:F.data.x,y:F.data.y})}),$.forEach(F=>{r.mergeEdgeData(F.id,{controlPoints:F.data.controlPoints})})),{nodes:k,edges:$}})}}const Ugt=(n,e,r,i,a,o,s)=>{let l=(n==null?void 0:n.slice(1,n.length-1))||[];if(e&&r){let{x:c,y:u}=e.data,{x:d,y:f}=r.data;if(a&&(c=e.data.y,u=e.data.x,d=r.data.y,f=r.data.x),f!==u&&c!==d){const h=i.indexOf(u),p=i[h+1];if(p){const v=l[0],y=a?{x:(u+p)/2,y:(v==null?void 0:v.y)||d}:{x:(v==null?void 0:v.x)||d,y:(u+p)/2};(!v||o(v,y))&&l.unshift(y)}const g=i.indexOf(f),m=Math.abs(g-h);if(m===1)l=s(l,e.data,r.data),l.length||l.push(a?{x:(u+f)/2,y:c}:{x:c,y:(u+f)/2});else if(m>1){const v=i[g-1];if(v){const y=l[l.length-1],b=a?{x:(f+v)/2,y:(y==null?void 0:y.y)||d}:{x:(y==null?void 0:y.x)||c,y:(f+v)/2};(!y||o(y,b))&&l.push(b)}}}}return l},Gy=(n,e,r)=>{const i=n.getAllNodes(),a=n.getAllEdges();if(!(i!=null&&i.length))return{nodes:[],edges:a};if(i.length===1)return e&&n.mergeNodeData(i[0].id,{x:r[0],y:r[1]}),{nodes:[Object.assign(Object.assign({},i[0]),{data:Object.assign(Object.assign({},i[0].data),{x:r[0],y:r[1]})})],edges:a}},Vgt={radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1};class Ggt{constructor(e={}){this.options=e,this.id="circular",this.options=Object.assign(Object.assign({},Vgt),e)}execute(e,r){return vr(this,void 0,void 0,function*(){return this.genericCircularLayout(!1,e,r)})}assign(e,r){return vr(this,void 0,void 0,function*(){yield this.genericCircularLayout(!0,e,r)})}genericCircularLayout(e,r,i){return vr(this,void 0,void 0,function*(){const a=Object.assign(Object.assign({},this.options),i),{width:o,height:s,center:l,divisions:c,startAngle:u=0,endAngle:d=2*Math.PI,angleRatio:f,ordering:h,clockwise:p,nodeSpacing:g,nodeSize:m}=a,v=r.getAllNodes(),y=r.getAllEdges(),[b,x,_]=Hgt(o,s,l),S=v==null?void 0:v.length;if(!S||S===1)return Gy(r,e,_);const M=(d-u)/S;let{radius:E,startRadius:T,endRadius:P}=a;if(g){const D=j0(10,g),k=BX(10,m);let $=-1/0;v.forEach(F=>{const G=k(F);$<G&&($=G)});let B=0;v.forEach((F,G)=>{G===0?B+=$||10:B+=(D(F)||0)+($||10)}),E=B/(2*Math.PI)}else!E&&!T&&!P?E=Math.min(x,b)/2:!T&&P?T=P:T&&!P&&(P=T);const A=M*f;let N=[];h==="topology"?N=yse(r,v):h==="topology-directed"?N=yse(r,v,!0):h==="degree"?N=jgt(r,v):N=v.map(D=>kc(D));const O=Math.ceil(S/c);for(let D=0;D<S;++D){let k=E;!k&&T!==null&&P!==null&&(k=T+D*(P-T)/(S-1)),k||(k=10+D*100/(S-1));let $=u+D%O*A+2*Math.PI/c*Math.floor(D/O);p||($=d-D%O*A-2*Math.PI/c*Math.floor(D/O)),N[D].data.x=_[0]+Math.cos($)*k,N[D].data.y=_[1]+Math.sin($)*k}return e&&N.forEach(D=>{r.mergeNodeData(D.id,{x:D.data.x,y:D.data.y})}),{nodes:N,edges:y}})}}const yse=(n,e,r=!1)=>{const i=[kc(e[0])],a={},o=e.length;a[e[0].id]=!0;let s=0;return e.forEach((l,c)=>{if(c!==0)if((c===o-1||n.getDegree(l.id,"both")!==n.getDegree(e[c+1].id,"both")||n.areNeighbors(i[s].id,l.id))&&!a[l.id])i.push(kc(l)),a[l.id]=!0,s++;else{const u=r?n.getSuccessors(i[s].id):n.getNeighbors(i[s].id);let d=!1;for(let h=0;h<u.length;h++){const p=u[h];if(n.getDegree(p.id)===n.getDegree(l.id)&&!a[p.id]){i.push(kc(p)),a[p.id]=!0,d=!0;break}}let f=0;for(;!d&&(a[e[f].id]||(i.push(kc(e[f])),a[e[f].id]=!0,d=!0),f++,f!==o););}}),i};function jgt(n,e){const r=[];return e.forEach((i,a)=>{r.push(kc(i))}),r.sort((i,a)=>n.getDegree(i.id,"both")-n.getDegree(a.id,"both")),r}const Hgt=(n,e,r)=>{let i=n,a=e,o=r;return!i&&typeof window<"u"&&(i=window.innerWidth),!a&&typeof window<"u"&&(a=window.innerHeight),o||(o=[i/2,a/2]),[i,a,o]},Wgt={nodeSize:30,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"};class rH{constructor(e={}){this.options=e,this.id="concentric",this.options=Object.assign(Object.assign({},Wgt),e)}execute(e,r){return vr(this,void 0,void 0,function*(){return this.genericConcentricLayout(!1,e,r)})}assign(e,r){return vr(this,void 0,void 0,function*(){yield this.genericConcentricLayout(!0,e,r)})}genericConcentricLayout(e,r,i){return vr(this,void 0,void 0,function*(){const a=Object.assign(Object.assign({},this.options),i),{center:o,width:s,height:l,sortBy:c,maxLevelDiff:u,sweep:d,clockwise:f,equidistant:h,preventOverlap:p,startAngle:g=3/2*Math.PI,nodeSize:m,nodeSpacing:v}=a,y=r.getAllNodes(),b=r.getAllEdges(),x=!s&&typeof window<"u"?window.innerWidth:s,_=!l&&typeof window<"u"?window.innerHeight:l,S=o||[x/2,_/2];if(!(y!=null&&y.length)||y.length===1)return Gy(r,e,S);const M=[];let E,T=0;Jh(m)?E=Math.max(m[0],m[1]):cn(m)?(E=-1/0,y.forEach(F=>{const G=Math.max(...DM(m(F)));G>E&&(E=G)})):E=m,Jh(v)?T=Math.max(v[0],v[1]):on(v)&&(T=v),y.forEach(F=>{const G=kc(F);M.push(G);let z=E;const{data:U}=G;Jh(U.size)?z=Math.max(U.size[0],U.size[1]):on(U.size)?z=U.size:Xa(U.size)&&(z=Math.max(U.size.width,U.size.height)),E=Math.max(E,z),cn(v)&&(T=Math.max(v(F),T))});const P={};M.forEach((F,G)=>{P[F.id]=G});let A=c;(!Kr(A)||M[0].data[A]===void 0)&&(A="degree"),A==="degree"?M.sort((F,G)=>r.getDegree(G.id,"both")-r.getDegree(F.id,"both")):M.sort((F,G)=>G.data[A]-F.data[A]);const N=M[0],O=(u||(A==="degree"?r.getDegree(N.id,"both"):N.data[A]))/4,I=[{nodes:[]}];let D=I[0];M.forEach(F=>{if(D.nodes.length>0){const G=Math.abs(A==="degree"?r.getDegree(D.nodes[0].id,"both")-r.getDegree(F.id,"both"):D.nodes[0].data[A]-F.data[A]);O&&G>=O&&(D={nodes:[]},I.push(D))}D.nodes.push(F)});let k=E+T;if(!p){const F=I.length>0&&I[0].nodes.length>1,z=(Math.min(x,_)/2-k)/(I.length+(F?1:0));k=Math.min(k,z)}let $=0;if(I.forEach(F=>{const G=d===void 0?2*Math.PI-2*Math.PI/F.nodes.length:d;if(F.dTheta=G/Math.max(1,F.nodes.length-1),F.nodes.length>1&&p){const z=Math.cos(F.dTheta)-Math.cos(0),U=Math.sin(F.dTheta)-Math.sin(0),H=Math.sqrt(k*k/(z*z+U*U));$=Math.max(H,$)}F.r=$,$+=k}),h){let F=0,G=0;for(let z=0;z<I.length;z++){const H=(I[z].r||0)-G;F=Math.max(F,H)}G=0,I.forEach((z,U)=>{U===0&&(G=z.r||0),z.r=G,G+=F})}return I.forEach(F=>{const G=F.dTheta||0,z=F.r||0;F.nodes.forEach((U,H)=>{const X=g+(f?1:-1)*G*H;U.data.x=S[0]+z*Math.cos(X),U.data.y=S[1]+z*Math.sin(X)})}),e&&M.forEach(F=>r.mergeNodeData(F.id,{x:F.data.x,y:F.data.y})),{nodes:M,edges:b}})}}function qgt(n){const e=+this._x.call(null,n),r=+this._y.call(null,n);return YCe(this.cover(e,r),e,r,n)}function YCe(n,e,r,i){if(isNaN(e)||isNaN(r))return n;var a,o=n._root,s={data:i},l=n._x0,c=n._y0,u=n._x1,d=n._y1,f,h,p,g,m,v,y,b;if(!o)return n._root=s,n;for(;o.length;)if((m=e>=(f=(l+u)/2))?l=f:u=f,(v=r>=(h=(c+d)/2))?c=h:d=h,a=o,!(o=o[y=v<<1|m]))return a[y]=s,n;if(p=+n._x.call(null,o.data),g=+n._y.call(null,o.data),e===p&&r===g)return s.next=o,a?a[y]=s:n._root=s,n;do a=a?a[y]=new Array(4):n._root=new Array(4),(m=e>=(f=(l+u)/2))?l=f:u=f,(v=r>=(h=(c+d)/2))?c=h:d=h;while((y=v<<1|m)===(b=(g>=h)<<1|p>=f));return a[b]=o,a[y]=s,n}function Ygt(n){var e,r,i=n.length,a,o,s=new Array(i),l=new Array(i),c=1/0,u=1/0,d=-1/0,f=-1/0;for(r=0;r<i;++r)isNaN(a=+this._x.call(null,e=n[r]))||isNaN(o=+this._y.call(null,e))||(s[r]=a,l[r]=o,a<c&&(c=a),a>d&&(d=a),o<u&&(u=o),o>f&&(f=o));if(c>d||u>f)return this;for(this.cover(c,u).cover(d,f),r=0;r<i;++r)YCe(this,s[r],l[r],n[r]);return this}function Xgt(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var r=this._x0,i=this._y0,a=this._x1,o=this._y1;if(isNaN(r))a=(r=Math.floor(n))+1,o=(i=Math.floor(e))+1;else{for(var s=a-r||1,l=this._root,c,u;r>n||n>=a||i>e||e>=o;)switch(u=(e<i)<<1|n<r,c=new Array(4),c[u]=l,l=c,s*=2,u){case 0:a=r+s,o=i+s;break;case 1:r=a-s,o=i+s;break;case 2:a=r+s,i=o-s;break;case 3:r=a-s,i=o-s;break}this._root&&this._root.length&&(this._root=l)}return this._x0=r,this._y0=i,this._x1=a,this._y1=o,this}function Kgt(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function Zgt(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ul(n,e,r,i,a){this.node=n,this.x0=e,this.y0=r,this.x1=i,this.y1=a}function Qgt(n,e,r){var i,a=this._x0,o=this._y0,s,l,c,u,d=this._x1,f=this._y1,h=[],p=this._root,g,m;for(p&&h.push(new ul(p,a,o,d,f)),r==null?r=1/0:(a=n-r,o=e-r,d=n+r,f=e+r,r*=r);g=h.pop();)if(!(!(p=g.node)||(s=g.x0)>d||(l=g.y0)>f||(c=g.x1)<a||(u=g.y1)<o))if(p.length){var v=(s+c)/2,y=(l+u)/2;h.push(new ul(p[3],v,y,c,u),new ul(p[2],s,y,v,u),new ul(p[1],v,l,c,y),new ul(p[0],s,l,v,y)),(m=(e>=y)<<1|n>=v)&&(g=h[h.length-1],h[h.length-1]=h[h.length-1-m],h[h.length-1-m]=g)}else{var b=n-+this._x.call(null,p.data),x=e-+this._y.call(null,p.data),_=b*b+x*x;if(_<r){var S=Math.sqrt(r=_);a=n-S,o=e-S,d=n+S,f=e+S,i=p.data}}return i}function Jgt(n){if(isNaN(d=+this._x.call(null,n))||isNaN(f=+this._y.call(null,n)))return this;var e,r=this._root,i,a,o,s=this._x0,l=this._y0,c=this._x1,u=this._y1,d,f,h,p,g,m,v,y;if(!r)return this;if(r.length)for(;;){if((g=d>=(h=(s+c)/2))?s=h:c=h,(m=f>=(p=(l+u)/2))?l=p:u=p,e=r,!(r=r[v=m<<1|g]))return this;if(!r.length)break;(e[v+1&3]||e[v+2&3]||e[v+3&3])&&(i=e,y=v)}for(;r.data!==n;)if(a=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,a?(o?a.next=o:delete a.next,this):e?(o?e[v]=o:delete e[v],(r=e[0]||e[1]||e[2]||e[3])&&r===(e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[y]=r:this._root=r),this):(this._root=o,this)}function emt(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function tmt(){return this._root}function nmt(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function rmt(n){var e=[],r,i=this._root,a,o,s,l,c;for(i&&e.push(new ul(i,this._x0,this._y0,this._x1,this._y1));r=e.pop();)if(!n(i=r.node,o=r.x0,s=r.y0,l=r.x1,c=r.y1)&&i.length){var u=(o+l)/2,d=(s+c)/2;(a=i[3])&&e.push(new ul(a,u,d,l,c)),(a=i[2])&&e.push(new ul(a,o,d,u,c)),(a=i[1])&&e.push(new ul(a,u,s,l,d)),(a=i[0])&&e.push(new ul(a,o,s,u,d))}return this}function imt(n){var e=[],r=[],i;for(this._root&&e.push(new ul(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var a=i.node;if(a.length){var o,s=i.x0,l=i.y0,c=i.x1,u=i.y1,d=(s+c)/2,f=(l+u)/2;(o=a[0])&&e.push(new ul(o,s,l,d,f)),(o=a[1])&&e.push(new ul(o,d,l,c,f)),(o=a[2])&&e.push(new ul(o,s,f,d,u)),(o=a[3])&&e.push(new ul(o,d,f,c,u))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.x1,i.y1);return this}function amt(n){return n[0]}function omt(n){return arguments.length?(this._x=n,this):this._x}function smt(n){return n[1]}function lmt(n){return arguments.length?(this._y=n,this):this._y}function LM(n,e,r){var i=new UX(e??amt,r??smt,NaN,NaN,NaN,NaN);return n==null?i:i.addAll(n)}function UX(n,e,r,i,a,o){this._x=n,this._y=e,this._x0=r,this._y0=i,this._x1=a,this._y1=o,this._root=void 0}function bse(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var Ml=LM.prototype=UX.prototype;Ml.copy=function(){var n=new UX(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=bse(e),n;for(r=[{source:e,target:n._root=new Array(4)}];e=r.pop();)for(var a=0;a<4;++a)(i=e.source[a])&&(i.length?r.push({source:i,target:e.target[a]=new Array(4)}):e.target[a]=bse(i));return n};Ml.add=qgt;Ml.addAll=Ygt;Ml.cover=Xgt;Ml.data=Kgt;Ml.extent=Zgt;Ml.find=Qgt;Ml.remove=Jgt;Ml.removeAll=emt;Ml.root=tmt;Ml.size=nmt;Ml.visit=rmt;Ml.visitAfter=imt;Ml.x=omt;Ml.y=lmt;function cmt(n){const e=+this._x.call(null,n),r=+this._y.call(null,n),i=+this._z.call(null,n);return XCe(this.cover(e,r,i),e,r,i,n)}function XCe(n,e,r,i,a){if(isNaN(e)||isNaN(r)||isNaN(i))return n;var o,s=n._root,l={data:a},c=n._x0,u=n._y0,d=n._z0,f=n._x1,h=n._y1,p=n._z1,g,m,v,y,b,x,_,S,M,E,T;if(!s)return n._root=l,n;for(;s.length;)if((_=e>=(g=(c+f)/2))?c=g:f=g,(S=r>=(m=(u+h)/2))?u=m:h=m,(M=i>=(v=(d+p)/2))?d=v:p=v,o=s,!(s=s[E=M<<2|S<<1|_]))return o[E]=l,n;if(y=+n._x.call(null,s.data),b=+n._y.call(null,s.data),x=+n._z.call(null,s.data),e===y&&r===b&&i===x)return l.next=s,o?o[E]=l:n._root=l,n;do o=o?o[E]=new Array(8):n._root=new Array(8),(_=e>=(g=(c+f)/2))?c=g:f=g,(S=r>=(m=(u+h)/2))?u=m:h=m,(M=i>=(v=(d+p)/2))?d=v:p=v;while((E=M<<2|S<<1|_)===(T=(x>=v)<<2|(b>=m)<<1|y>=g));return o[T]=s,o[E]=l,n}function umt(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e),i=new Float64Array(e),a=new Float64Array(e);let o=1/0,s=1/0,l=1/0,c=-1/0,u=-1/0,d=-1/0;for(let f=0,h,p,g,m;f<e;++f)isNaN(p=+this._x.call(null,h=n[f]))||isNaN(g=+this._y.call(null,h))||isNaN(m=+this._z.call(null,h))||(r[f]=p,i[f]=g,a[f]=m,p<o&&(o=p),p>c&&(c=p),g<s&&(s=g),g>u&&(u=g),m<l&&(l=m),m>d&&(d=m));if(o>c||s>u||l>d)return this;this.cover(o,s,l).cover(c,u,d);for(let f=0;f<e;++f)XCe(this,r[f],i[f],a[f],n[f]);return this}function dmt(n,e,r){if(isNaN(n=+n)||isNaN(e=+e)||isNaN(r=+r))return this;var i=this._x0,a=this._y0,o=this._z0,s=this._x1,l=this._y1,c=this._z1;if(isNaN(i))s=(i=Math.floor(n))+1,l=(a=Math.floor(e))+1,c=(o=Math.floor(r))+1;else{for(var u=s-i||1,d=this._root,f,h;i>n||n>=s||a>e||e>=l||o>r||r>=c;)switch(h=(r<o)<<2|(e<a)<<1|n<i,f=new Array(8),f[h]=d,d=f,u*=2,h){case 0:s=i+u,l=a+u,c=o+u;break;case 1:i=s-u,l=a+u,c=o+u;break;case 2:s=i+u,a=l-u,c=o+u;break;case 3:i=s-u,a=l-u,c=o+u;break;case 4:s=i+u,l=a+u,o=c-u;break;case 5:i=s-u,l=a+u,o=c-u;break;case 6:s=i+u,a=l-u,o=c-u;break;case 7:i=s-u,a=l-u,o=c-u;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=a,this._z0=o,this._x1=s,this._y1=l,this._z1=c,this}function fmt(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function hmt(n){return arguments.length?this.cover(+n[0][0],+n[0][1],+n[0][2]).cover(+n[1][0],+n[1][1],+n[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function zi(n,e,r,i,a,o,s){this.node=n,this.x0=e,this.y0=r,this.z0=i,this.x1=a,this.y1=o,this.z1=s}function pmt(n,e,r,i){var a,o=this._x0,s=this._y0,l=this._z0,c,u,d,f,h,p,g=this._x1,m=this._y1,v=this._z1,y=[],b=this._root,x,_;for(b&&y.push(new zi(b,o,s,l,g,m,v)),i==null?i=1/0:(o=n-i,s=e-i,l=r-i,g=n+i,m=e+i,v=r+i,i*=i);x=y.pop();)if(!(!(b=x.node)||(c=x.x0)>g||(u=x.y0)>m||(d=x.z0)>v||(f=x.x1)<o||(h=x.y1)<s||(p=x.z1)<l))if(b.length){var S=(c+f)/2,M=(u+h)/2,E=(d+p)/2;y.push(new zi(b[7],S,M,E,f,h,p),new zi(b[6],c,M,E,S,h,p),new zi(b[5],S,u,E,f,M,p),new zi(b[4],c,u,E,S,M,p),new zi(b[3],S,M,d,f,h,E),new zi(b[2],c,M,d,S,h,E),new zi(b[1],S,u,d,f,M,E),new zi(b[0],c,u,d,S,M,E)),(_=(r>=E)<<2|(e>=M)<<1|n>=S)&&(x=y[y.length-1],y[y.length-1]=y[y.length-1-_],y[y.length-1-_]=x)}else{var T=n-+this._x.call(null,b.data),P=e-+this._y.call(null,b.data),A=r-+this._z.call(null,b.data),N=T*T+P*P+A*A;if(N<i){var O=Math.sqrt(i=N);o=n-O,s=e-O,l=r-O,g=n+O,m=e+O,v=r+O,a=b.data}}return a}const gmt=(n,e,r,i,a,o)=>Math.sqrt((n-i)**2+(e-a)**2+(r-o)**2);function mmt(n,e,r,i){const a=[],o=n-i,s=e-i,l=r-i,c=n+i,u=e+i,d=r+i;return this.visit((f,h,p,g,m,v,y)=>{if(!f.length)do{const b=f.data;gmt(n,e,r,this._x(b),this._y(b),this._z(b))<=i&&a.push(b)}while(f=f.next);return h>c||p>u||g>d||m<o||v<s||y<l}),a}function vmt(n){if(isNaN(h=+this._x.call(null,n))||isNaN(p=+this._y.call(null,n))||isNaN(g=+this._z.call(null,n)))return this;var e,r=this._root,i,a,o,s=this._x0,l=this._y0,c=this._z0,u=this._x1,d=this._y1,f=this._z1,h,p,g,m,v,y,b,x,_,S,M;if(!r)return this;if(r.length)for(;;){if((b=h>=(m=(s+u)/2))?s=m:u=m,(x=p>=(v=(l+d)/2))?l=v:d=v,(_=g>=(y=(c+f)/2))?c=y:f=y,e=r,!(r=r[S=_<<2|x<<1|b]))return this;if(!r.length)break;(e[S+1&7]||e[S+2&7]||e[S+3&7]||e[S+4&7]||e[S+5&7]||e[S+6&7]||e[S+7&7])&&(i=e,M=S)}for(;r.data!==n;)if(a=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,a?(o?a.next=o:delete a.next,this):e?(o?e[S]=o:delete e[S],(r=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&r===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!r.length&&(i?i[M]=r:this._root=r),this):(this._root=o,this)}function ymt(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function bmt(){return this._root}function xmt(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function _mt(n){var e=[],r,i=this._root,a,o,s,l,c,u,d;for(i&&e.push(new zi(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();)if(!n(i=r.node,o=r.x0,s=r.y0,l=r.z0,c=r.x1,u=r.y1,d=r.z1)&&i.length){var f=(o+c)/2,h=(s+u)/2,p=(l+d)/2;(a=i[7])&&e.push(new zi(a,f,h,p,c,u,d)),(a=i[6])&&e.push(new zi(a,o,h,p,f,u,d)),(a=i[5])&&e.push(new zi(a,f,s,p,c,h,d)),(a=i[4])&&e.push(new zi(a,o,s,p,f,h,d)),(a=i[3])&&e.push(new zi(a,f,h,l,c,u,p)),(a=i[2])&&e.push(new zi(a,o,h,l,f,u,p)),(a=i[1])&&e.push(new zi(a,f,s,l,c,h,p)),(a=i[0])&&e.push(new zi(a,o,s,l,f,h,p))}return this}function wmt(n){var e=[],r=[],i;for(this._root&&e.push(new zi(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=e.pop();){var a=i.node;if(a.length){var o,s=i.x0,l=i.y0,c=i.z0,u=i.x1,d=i.y1,f=i.z1,h=(s+u)/2,p=(l+d)/2,g=(c+f)/2;(o=a[0])&&e.push(new zi(o,s,l,c,h,p,g)),(o=a[1])&&e.push(new zi(o,h,l,c,u,p,g)),(o=a[2])&&e.push(new zi(o,s,p,c,h,d,g)),(o=a[3])&&e.push(new zi(o,h,p,c,u,d,g)),(o=a[4])&&e.push(new zi(o,s,l,g,h,p,f)),(o=a[5])&&e.push(new zi(o,h,l,g,u,p,f)),(o=a[6])&&e.push(new zi(o,s,p,g,h,d,f)),(o=a[7])&&e.push(new zi(o,h,p,g,u,d,f))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function Smt(n){return n[0]}function Emt(n){return arguments.length?(this._x=n,this):this._x}function Cmt(n){return n[1]}function Mmt(n){return arguments.length?(this._y=n,this):this._y}function Tmt(n){return n[2]}function Amt(n){return arguments.length?(this._z=n,this):this._z}function VX(n,e,r,i){var a=new GX(e??Smt,r??Cmt,i??Tmt,NaN,NaN,NaN,NaN,NaN,NaN);return n==null?a:a.addAll(n)}function GX(n,e,r,i,a,o,s,l,c){this._x=n,this._y=e,this._z=r,this._x0=i,this._y0=a,this._z0=o,this._x1=s,this._y1=l,this._z1=c,this._root=void 0}function xse(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var Es=VX.prototype=GX.prototype;Es.copy=function(){var n=new GX(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=xse(e),n;for(r=[{source:e,target:n._root=new Array(8)}];e=r.pop();)for(var a=0;a<8;++a)(i=e.source[a])&&(i.length?r.push({source:i,target:e.target[a]=new Array(8)}):e.target[a]=xse(i));return n};Es.add=cmt;Es.addAll=umt;Es.cover=dmt;Es.data=fmt;Es.extent=hmt;Es.find=pmt;Es.findAllWithinRadius=mmt;Es.remove=vmt;Es.removeAll=ymt;Es.root=bmt;Es.size=xmt;Es.visit=_mt;Es.visitAfter=wmt;Es.x=Emt;Es.y=Mmt;Es.z=Amt;const Rmt=.81,BF=.1;function Pmt(n,e,r,i,a=2){const o=e/r,s=n.getAllNodes(),l=s.map((d,f)=>{const{nodeStrength:h,x:p,y:g,z:m,size:v}=d.data;return{x:p,y:g,z:m,size:v,index:f,id:d.id,vx:0,vy:0,vz:0,weight:o*h}}),c=(a===2?LM(l,d=>d.x,d=>d.y):VX(l,d=>d.x,d=>d.y,d=>d.z)).visitAfter(Nmt),u=new Map;return l.forEach(d=>{u.set(d.id,d),Imt(d,c,a)}),l.map((d,f)=>{const{id:h,data:p}=s[f],{mass:g=1}=p;i[h]={x:d.vx/g,y:d.vy/g,z:d.vz/g}}),i}function Nmt(n){let e=0,r=0,i=0,a=0,o=0;const s=n.length;if(s){for(let l=0;l<s;l++){const c=n[l];c&&c.weight&&(e+=c.weight,r+=c.x*c.weight,i+=c.y*c.weight,a+=c.z*c.weight,o+=c.size*c.weight)}n.x=r/e,n.y=i/e,n.z=a/e,n.size=o/e,n.weight=e}else{const l=n;n.x=l.data.x,n.y=l.data.y,n.z=l.data.z,n.size=l.data.size,n.weight=l.data.weight}}const Omt=(n,e,r,i,a,o,s)=>{var l;if(((l=n.data)===null||l===void 0?void 0:l.id)===o.id)return;const c=[r,i,a][s-1],u=o.x-n.x||BF,d=o.y-n.y||BF,f=o.z-n.z||BF,h=[u,d,f],p=c-e;let g=0;for(let y=0;y<s;y++)g+=h[y]*h[y];const v=Math.sqrt(g)*g;if(p*p*Rmt<g){const y=n.weight/v;return o.vx+=u*y,o.vy+=d*y,o.vz+=f*y,!0}if(n.length)return!1;if(n.data!==o){const y=n.data.weight/v;o.vx+=u*y,o.vy+=d*y,o.vz+=f*y}};function Imt(n,e,r){e.visit((i,a,o,s,l)=>Omt(i,a,o,s,l,n,r))}const Dmt={dimensions:2,maxIteration:500,gravity:10,factor:1,edgeStrength:50,nodeStrength:1e3,coulombDisScale:.005,damping:.9,maxSpeed:200,minMovement:.4,interval:.02,linkDistance:200,clusterNodeStrength:20,preventOverlap:!0,distanceThresholdMode:"mean"};class KCe{constructor(e={}){this.options=e,this.id="force",this.timeInterval=0,this.judgingDistance=0,this.running=!1,this.options=Object.assign(Object.assign({},Dmt),e)}execute(e,r){return vr(this,void 0,void 0,function*(){return this.genericForceLayout(!1,e,r)})}assign(e,r){return vr(this,void 0,void 0,function*(){yield this.genericForceLayout(!0,e,r)})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval),this.running=!1}tick(e=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let i=0;(this.judgingDistance>this.lastOptions.minMovement||i<1)&&i<e;i++)this.runOneStep(this.lastCalcGraph,this.lastGraph,i,this.lastVelMap,this.lastOptions),this.updatePosition(this.lastGraph,this.lastCalcGraph,this.lastVelMap,this.lastOptions);const r={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&r.nodes.forEach(i=>this.lastGraph.mergeNodeData(i.id,{x:i.data.x,y:i.data.y,z:this.options.dimensions===3?i.data.z:void 0})),r}genericForceLayout(e,r,i){return vr(this,void 0,void 0,function*(){const a=Object.assign(Object.assign({},this.options),i),o=r.getAllNodes(),s=r.getAllEdges(),l=this.formatOptions(a,r),{dimensions:c,width:u,height:d,nodeSize:f,getMass:h,nodeStrength:p,edgeStrength:g,linkDistance:m}=l,v=o.map((T,P)=>Object.assign(Object.assign({},T),{data:Object.assign(Object.assign({},T.data),{x:on(T.data.x)?T.data.x:Math.random()*u,y:on(T.data.y)?T.data.y:Math.random()*d,z:on(T.data.z)?T.data.z:Math.random()*Math.sqrt(u*d),size:f(T)||30,mass:h(T),nodeStrength:p(T)})})),y=s.map(T=>Object.assign(Object.assign({},T),{data:Object.assign(Object.assign({},T.data),{edgeStrength:g(T),linkDistance:m(T,r.getNode(T.source),r.getNode(T.target))})}));if(!(o!=null&&o.length))return this.lastResult={nodes:[],edges:s},{nodes:[],edges:s};const b={};o.forEach((T,P)=>{b[T.id]={x:0,y:0,z:0}});const x=new zo({nodes:v,edges:y});this.formatCentripetal(l,x);const{maxIteration:_,minMovement:S,onTick:M}=l;if(this.lastLayoutNodes=v,this.lastLayoutEdges=y,this.lastAssign=e,this.lastGraph=r,this.lastCalcGraph=x,this.lastOptions=l,this.lastVelMap=b,typeof window>"u")return;let E=0;return new Promise(T=>{this.timeInterval=window.setInterval(()=>{(!o||!this.running)&&T({nodes:zF(r,v),edges:s}),this.runOneStep(x,r,E,b,l),this.updatePosition(r,x,b,l),e&&v.forEach(P=>r.mergeNodeData(P.id,{x:P.data.x,y:P.data.y,z:c===3?P.data.z:void 0})),M==null||M({nodes:zF(r,v),edges:s}),E++,(E>=_||this.judgingDistance<S)&&(window.clearInterval(this.timeInterval),T({nodes:zF(r,v),edges:s}))},0),this.running=!0})})}formatOptions(e,r){const i=Object.assign({},e),{width:a,height:o,getMass:s}=e;i.width=!a&&typeof window<"u"?window.innerWidth:a,i.height=!o&&typeof window<"u"?window.innerHeight:o,e.center||(i.center=[i.width/2,i.height/2]),s||(i.getMass=c=>{let u=1;on(c==null?void 0:c.data.mass)&&(u=c==null?void 0:c.data.mass);const d=r.getDegree(c.id,"both");return!d||d<5?u:d*5*u}),i.nodeSize=zX(e.nodeSize,e.nodeSpacing);const l=e.linkDistance?j0(1,e.linkDistance):c=>1+i.nodeSize(r.getNode(c.source))+i.nodeSize(r.getNode(c.target));return i.linkDistance=l,i.nodeStrength=j0(1,e.nodeStrength),i.edgeStrength=j0(1,e.edgeStrength),i}formatCentripetal(e,r){const{dimensions:i,centripetalOptions:a,center:o,clusterNodeStrength:s,leafCluster:l,clustering:c,nodeClusterBy:u}=e,d=r.getAllNodes(),f=a||{leaf:2,single:2,others:1,center:y=>({x:o[0],y:o[1],z:i===3?o[2]:void 0})};typeof s!="function"&&(e.clusterNodeStrength=y=>s);let h,p;if(l&&u&&(h=_se(r,u),p=Array.from(new Set(d==null?void 0:d.map(y=>y.data[u])))||[],e.centripetalOptions=Object.assign(f,{single:100,leaf:y=>{const{siblingLeaves:b,sameTypeLeaves:x}=h[y.id]||{};return(x==null?void 0:x.length)===(b==null?void 0:b.length)||(p==null?void 0:p.length)===1?1:e.clusterNodeStrength(y)},others:1,center:y=>{const b=r.getDegree(y.id,"both");if(!b)return{x:100,y:100,z:0};let x;if(b===1){const{sameTypeLeaves:_=[]}=h[y.id]||{};_.length===1?x=void 0:_.length>1&&(x=wse(_))}else x=void 0;return{x:x==null?void 0:x.x,y:x==null?void 0:x.y,z:x==null?void 0:x.z}}})),c&&u){h||(h=_se(r,u)),p||(p=Array.from(new Set(d.map(b=>b.data[u])))),p=p.filter(b=>b!==void 0);const y={};p.forEach(b=>{const x=d.filter(_=>_.data[u]===b).map(_=>r.getNode(_.id));y[b]=wse(x)}),e.centripetalOptions=Object.assign(f,{single:b=>e.clusterNodeStrength(b),leaf:b=>e.clusterNodeStrength(b),others:b=>e.clusterNodeStrength(b),center:b=>{const x=y[b.data[u]];return{x:x==null?void 0:x.x,y:x==null?void 0:x.y,z:x==null?void 0:x.z}}})}const{leaf:g,single:m,others:v}=e.centripetalOptions||{};g&&typeof g!="function"&&(e.centripetalOptions.leaf=()=>g),m&&typeof m!="function"&&(e.centripetalOptions.single=()=>m),v&&typeof v!="function"&&(e.centripetalOptions.others=()=>v)}runOneStep(e,r,i,a,o){const s={},l=e.getAllNodes(),c=e.getAllEdges();if(!(l!=null&&l.length))return;const{monitor:u}=o;if(this.calRepulsive(e,s,o),c&&this.calAttractive(e,s,o),this.calGravity(e,r,s,o),this.updateVelocity(e,s,a,o),u){const d=this.calTotalEnergy(s,l);u({energy:d,nodes:r.getAllNodes(),edges:r.getAllEdges(),iterations:i})}}calTotalEnergy(e,r){if(!(r!=null&&r.length))return 0;let i=0;return r.forEach((a,o)=>{const s=e[a.id].x,l=e[a.id].y,c=this.options.dimensions===3?e[a.id].z:0,u=s*s+l*l+c*c,{mass:d=1}=a.data;i+=d*u*.5}),i}calRepulsive(e,r,i){const{dimensions:a,factor:o,coulombDisScale:s}=i;Pmt(e,o,s*s,r,a)}calAttractive(e,r,i){const{dimensions:a,nodeSize:o}=i;e.getAllEdges().forEach((s,l)=>{const{source:c,target:u}=s,d=e.getNode(c),f=e.getNode(u);if(!d||!f)return;let h=f.data.x-d.data.x,p=f.data.y-d.data.y,g=a===3?f.data.z-d.data.z:0;!h&&!p&&(h=Math.random()*.01,p=Math.random()*.01,a===3&&!g&&(g=Math.random()*.01));const m=Math.sqrt(h*h+p*p+g*g);if(m<o(d)+o(f))return;const v=h/m,y=p/m,b=g/m,{linkDistance:x=200,edgeStrength:_=200}=s.data||{},M=(x-m)*_,E=d.data.mass||1,T=f.data.mass||1,P=1/E,A=1/T,N=v*M,O=y*M,I=b*M;r[c].x-=N*P,r[c].y-=O*P,r[c].z-=I*P,r[u].x+=N*A,r[u].y+=O*A,r[u].z+=I*A})}calGravity(e,r,i,a){const{getCenter:o}=a,s=e.getAllNodes(),l=r.getAllNodes(),c=r.getAllEdges(),{width:u,height:d,center:f,gravity:h,centripetalOptions:p}=a;s&&s.forEach(g=>{const{id:m,data:v}=g,{mass:y,x:b,y:x,z:_}=v,S=r.getNode(m);let M=0,E=0,T=0,P=h;const A=e.getDegree(m,"in"),N=e.getDegree(m,"out"),O=e.getDegree(m,"both"),I=o==null?void 0:o(S,O);if(I){const[D,k,$]=I;M=b-D,E=x-k,P=$}else M=b-f[0],E=x-f[1],T=_-f[2];if(P&&(i[m].x-=P*M/y,i[m].y-=P*E/y,i[m].z-=P*T/y),p){const{leaf:D,single:k,others:$,center:B}=p,{x:F,y:G,z,centerStrength:U}=(B==null?void 0:B(S,l,c,u,d))||{x:0,y:0,z:0,centerStrength:0};if(!on(F)||!on(G))return;const H=(b-F)/y,X=(x-G)/y,V=(_-z)/y;if(U&&(i[m].x-=U*H,i[m].y-=U*X,i[m].z-=U*V),O===0){const K=k(S);if(!K)return;i[m].x-=K*H,i[m].y-=K*X,i[m].z-=K*V;return}if(A===0||N===0){const K=D(S,l,c);if(!K)return;i[m].x-=K*H,i[m].y-=K*X,i[m].z-=K*V;return}const W=$(S);if(!W)return;i[m].x-=W*H,i[m].y-=W*X,i[m].z-=W*V}})}updateVelocity(e,r,i,a){const{damping:o,maxSpeed:s,interval:l,dimensions:c}=a,u=e.getAllNodes();u!=null&&u.length&&u.forEach(d=>{const{id:f}=d;let h=(i[f].x+r[f].x*l)*o||.01,p=(i[f].y+r[f].y*l)*o||.01,g=c===3?(i[f].z+r[f].z*l)*o||.01:0;const m=Math.sqrt(h*h+p*p+g*g);if(m>s){const v=s/m;h=v*h,p=v*p,g=v*g}i[f]={x:h,y:p,z:g}})}updatePosition(e,r,i,a){const{distanceThresholdMode:o,interval:s,dimensions:l}=a,c=r.getAllNodes();if(!(c!=null&&c.length)){this.judgingDistance=0;return}let u=0;o==="max"?this.judgingDistance=-1/0:o==="min"&&(this.judgingDistance=1/0),c.forEach(d=>{const{id:f}=d,h=e.getNode(f);if(on(h.data.fx)&&on(h.data.fy)){r.mergeNodeData(f,{x:h.data.fx,y:h.data.fy,z:l===3?h.data.fz:void 0});return}const p=i[f].x*s,g=i[f].y*s,m=l===3?i[f].z*s:0;r.mergeNodeData(f,{x:d.data.x+p,y:d.data.y+g,z:d.data.z+m});const v=Math.sqrt(p*p+g*g+m*m);switch(o){case"max":this.judgingDistance<v&&(this.judgingDistance=v);break;case"min":this.judgingDistance>v&&(this.judgingDistance=v);break;default:u=u+v;break}}),(!o||o==="mean")&&(this.judgingDistance=u/c.length)}}const _se=(n,e)=>{const r=n.getAllNodes();if(!(r!=null&&r.length))return{};const i={};return r.forEach((a,o)=>{n.getDegree(a.id,"both")===1&&(i[a.id]=Lmt(n,"leaf",a,e))}),i},Lmt=(n,e,r,i)=>{const a=n.getDegree(r.id,"in"),o=n.getDegree(r.id,"out");let s=r,l=[];a===0?(s=n.getSuccessors(r.id)[0],l=n.getNeighbors(s.id)):o===0&&(s=n.getPredecessors(r.id)[0],l=n.getNeighbors(s.id)),l=l.filter(u=>n.getDegree(u.id,"in")===0||n.getDegree(u.id,"out")===0);const c=kmt(n,e,i,r,l);return{coreNode:s,siblingLeaves:l,sameTypeLeaves:c}},kmt=(n,e,r,i,a)=>{const o=i.data[r]||"";let s=(a==null?void 0:a.filter(l=>l.data[r]===o))||[];return s=s.filter(l=>n.getDegree(l.id,"in")===0||n.getDegree(l.id,"out")===0),s},wse=n=>{const e={x:0,y:0};n.forEach(i=>{const{x:a,y:o}=i.data;e.x+=a||0,e.y+=o||0});const r=n.length||1;return{x:e.x/r,y:e.y/r}},zF=(n,e)=>e.map(r=>{const{id:i,data:a}=r,o=n.getNode(i);return Object.assign(Object.assign({},o),{data:Object.assign(Object.assign({},o.data),{x:a.x,y:a.y,z:a.z})})});var Fr={};const Fmt=Object.prototype.toString;function oC(n){const e=Fmt.call(n);return e.endsWith("Array]")&&!e.includes("Big")}const $mt=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray:oC},Symbol.toStringTag,{value:"Module"})),Bmt=zW($mt);function zmt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!oC(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var r=e.fromIndex,i=r===void 0?0:r,a=e.toIndex,o=a===void 0?n.length:a;if(i<0||i>=n.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=i||o>n.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=n[i],l=i+1;l<o;l++)n[l]>s&&(s=n[l]);return s}function Umt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!oC(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var r=e.fromIndex,i=r===void 0?0:r,a=e.toIndex,o=a===void 0?n.length:a;if(i<0||i>=n.length||!Number.isInteger(i))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=i||o>n.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var s=n[i],l=i+1;l<o;l++)n[l]<s&&(s=n[l]);return s}function Vmt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(oC(n)){if(n.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var r;if(e.output!==void 0){if(!oC(e.output))throw new TypeError("output option must be an array if specified");r=e.output}else r=new Array(n.length);var i=Umt(n),a=zmt(n);if(i===a)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var o=e.min,s=o===void 0?e.autoMinMax?i:0:o,l=e.max,c=l===void 0?e.autoMinMax?a:1:l;if(s>=c)throw new RangeError("min option must be smaller than max option");for(var u=(c-s)/(a-i),d=0;d<n.length;d++)r[d]=(n[d]-i)*u+s;return r}const Gmt=Object.freeze(Object.defineProperty({__proto__:null,default:Vmt},Symbol.toStringTag,{value:"Module"})),jmt=zW(Gmt);Object.defineProperty(Fr,"__esModule",{value:!0});var Vl=Bmt,Sse=jmt;const _A=" ".repeat(2),ZCe=" ".repeat(4);function Hmt(){return QCe(this)}function QCe(n,e={}){const{maxRows:r=15,maxColumns:i=10,maxNumSize:a=8,padMinus:o="auto"}=e;return`${n.constructor.name} {
${_A}[
${ZCe}${Wmt(n,r,i,a,o)}
${_A}]
${_A}rows: ${n.rows}
${_A}columns: ${n.columns}
}`}function Wmt(n,e,r,i,a){const{rows:o,columns:s}=n,l=Math.min(o,e),c=Math.min(s,r),u=[];if(a==="auto"){a=!1;e:for(let d=0;d<l;d++)for(let f=0;f<c;f++)if(n.get(d,f)<0){a=!0;break e}}for(let d=0;d<l;d++){let f=[];for(let h=0;h<c;h++)f.push(qmt(n.get(d,h),i,a));u.push(`${f.join(" ")}`)}return c!==s&&(u[u.length-1]+=` ... ${s-r} more columns`),l!==o&&u.push(`... ${o-e} more rows`),u.join(`
${ZCe}`)}function qmt(n,e,r){return(n>=0&&r?` ${Ese(n,e-1)}`:Ese(n,e)).padEnd(e)}function Ese(n,e){let r=n.toString();if(r.length<=e)return r;let i=n.toFixed(e);if(i.length>e&&(i=n.toFixed(Math.max(0,e-(i.length-e)))),i.length<=e&&!i.startsWith("0.000")&&!i.startsWith("-0.000"))return i;let a=n.toExponential(e);return a.length>e&&(a=n.toExponential(Math.max(0,e-(a.length-e)))),a.slice(0)}function Ymt(n,e){n.prototype.add=function(i){return typeof i=="number"?this.addS(i):this.addM(i)},n.prototype.addS=function(i){for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)+i);return this},n.prototype.addM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)+i.get(a,o));return this},n.add=function(i,a){return new e(i).add(a)},n.prototype.sub=function(i){return typeof i=="number"?this.subS(i):this.subM(i)},n.prototype.subS=function(i){for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)-i);return this},n.prototype.subM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)-i.get(a,o));return this},n.sub=function(i,a){return new e(i).sub(a)},n.prototype.subtract=n.prototype.sub,n.prototype.subtractS=n.prototype.subS,n.prototype.subtractM=n.prototype.subM,n.subtract=n.sub,n.prototype.mul=function(i){return typeof i=="number"?this.mulS(i):this.mulM(i)},n.prototype.mulS=function(i){for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)*i);return this},n.prototype.mulM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)*i.get(a,o));return this},n.mul=function(i,a){return new e(i).mul(a)},n.prototype.multiply=n.prototype.mul,n.prototype.multiplyS=n.prototype.mulS,n.prototype.multiplyM=n.prototype.mulM,n.multiply=n.mul,n.prototype.div=function(i){return typeof i=="number"?this.divS(i):this.divM(i)},n.prototype.divS=function(i){for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)/i);return this},n.prototype.divM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)/i.get(a,o));return this},n.div=function(i,a){return new e(i).div(a)},n.prototype.divide=n.prototype.div,n.prototype.divideS=n.prototype.divS,n.prototype.divideM=n.prototype.divM,n.divide=n.div,n.prototype.mod=function(i){return typeof i=="number"?this.modS(i):this.modM(i)},n.prototype.modS=function(i){for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)%i);return this},n.prototype.modM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)%i.get(a,o));return this},n.mod=function(i,a){return new e(i).mod(a)},n.prototype.modulus=n.prototype.mod,n.prototype.modulusS=n.prototype.modS,n.prototype.modulusM=n.prototype.modM,n.modulus=n.mod,n.prototype.and=function(i){return typeof i=="number"?this.andS(i):this.andM(i)},n.prototype.andS=function(i){for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)&i);return this},n.prototype.andM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)&i.get(a,o));return this},n.and=function(i,a){return new e(i).and(a)},n.prototype.or=function(i){return typeof i=="number"?this.orS(i):this.orM(i)},n.prototype.orS=function(i){for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)|i);return this},n.prototype.orM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)|i.get(a,o));return this},n.or=function(i,a){return new e(i).or(a)},n.prototype.xor=function(i){return typeof i=="number"?this.xorS(i):this.xorM(i)},n.prototype.xorS=function(i){for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)^i);return this},n.prototype.xorM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)^i.get(a,o));return this},n.xor=function(i,a){return new e(i).xor(a)},n.prototype.leftShift=function(i){return typeof i=="number"?this.leftShiftS(i):this.leftShiftM(i)},n.prototype.leftShiftS=function(i){for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)<<i);return this},n.prototype.leftShiftM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)<<i.get(a,o));return this},n.leftShift=function(i,a){return new e(i).leftShift(a)},n.prototype.signPropagatingRightShift=function(i){return typeof i=="number"?this.signPropagatingRightShiftS(i):this.signPropagatingRightShiftM(i)},n.prototype.signPropagatingRightShiftS=function(i){for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)>>i);return this},n.prototype.signPropagatingRightShiftM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)>>i.get(a,o));return this},n.signPropagatingRightShift=function(i,a){return new e(i).signPropagatingRightShift(a)},n.prototype.rightShift=function(i){return typeof i=="number"?this.rightShiftS(i):this.rightShiftM(i)},n.prototype.rightShiftS=function(i){for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)>>>i);return this},n.prototype.rightShiftM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)>>>i.get(a,o));return this},n.rightShift=function(i,a){return new e(i).rightShift(a)},n.prototype.zeroFillRightShift=n.prototype.rightShift,n.prototype.zeroFillRightShiftS=n.prototype.rightShiftS,n.prototype.zeroFillRightShiftM=n.prototype.rightShiftM,n.zeroFillRightShift=n.rightShift,n.prototype.not=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,~this.get(i,a));return this},n.not=function(i){return new e(i).not()},n.prototype.abs=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.abs(this.get(i,a)));return this},n.abs=function(i){return new e(i).abs()},n.prototype.acos=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.acos(this.get(i,a)));return this},n.acos=function(i){return new e(i).acos()},n.prototype.acosh=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.acosh(this.get(i,a)));return this},n.acosh=function(i){return new e(i).acosh()},n.prototype.asin=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.asin(this.get(i,a)));return this},n.asin=function(i){return new e(i).asin()},n.prototype.asinh=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.asinh(this.get(i,a)));return this},n.asinh=function(i){return new e(i).asinh()},n.prototype.atan=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.atan(this.get(i,a)));return this},n.atan=function(i){return new e(i).atan()},n.prototype.atanh=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.atanh(this.get(i,a)));return this},n.atanh=function(i){return new e(i).atanh()},n.prototype.cbrt=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.cbrt(this.get(i,a)));return this},n.cbrt=function(i){return new e(i).cbrt()},n.prototype.ceil=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.ceil(this.get(i,a)));return this},n.ceil=function(i){return new e(i).ceil()},n.prototype.clz32=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.clz32(this.get(i,a)));return this},n.clz32=function(i){return new e(i).clz32()},n.prototype.cos=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.cos(this.get(i,a)));return this},n.cos=function(i){return new e(i).cos()},n.prototype.cosh=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.cosh(this.get(i,a)));return this},n.cosh=function(i){return new e(i).cosh()},n.prototype.exp=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.exp(this.get(i,a)));return this},n.exp=function(i){return new e(i).exp()},n.prototype.expm1=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.expm1(this.get(i,a)));return this},n.expm1=function(i){return new e(i).expm1()},n.prototype.floor=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.floor(this.get(i,a)));return this},n.floor=function(i){return new e(i).floor()},n.prototype.fround=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.fround(this.get(i,a)));return this},n.fround=function(i){return new e(i).fround()},n.prototype.log=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.log(this.get(i,a)));return this},n.log=function(i){return new e(i).log()},n.prototype.log1p=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.log1p(this.get(i,a)));return this},n.log1p=function(i){return new e(i).log1p()},n.prototype.log10=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.log10(this.get(i,a)));return this},n.log10=function(i){return new e(i).log10()},n.prototype.log2=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.log2(this.get(i,a)));return this},n.log2=function(i){return new e(i).log2()},n.prototype.round=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.round(this.get(i,a)));return this},n.round=function(i){return new e(i).round()},n.prototype.sign=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.sign(this.get(i,a)));return this},n.sign=function(i){return new e(i).sign()},n.prototype.sin=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.sin(this.get(i,a)));return this},n.sin=function(i){return new e(i).sin()},n.prototype.sinh=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.sinh(this.get(i,a)));return this},n.sinh=function(i){return new e(i).sinh()},n.prototype.sqrt=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.sqrt(this.get(i,a)));return this},n.sqrt=function(i){return new e(i).sqrt()},n.prototype.tan=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.tan(this.get(i,a)));return this},n.tan=function(i){return new e(i).tan()},n.prototype.tanh=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.tanh(this.get(i,a)));return this},n.tanh=function(i){return new e(i).tanh()},n.prototype.trunc=function(){for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.set(i,a,Math.trunc(this.get(i,a)));return this},n.trunc=function(i){return new e(i).trunc()},n.pow=function(i,a){return new e(i).pow(a)},n.prototype.pow=function(i){return typeof i=="number"?this.powS(i):this.powM(i)},n.prototype.powS=function(i){for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)**i);return this},n.prototype.powM=function(i){if(i=e.checkMatrix(i),this.rows!==i.rows||this.columns!==i.columns)throw new RangeError("Matrices dimensions must be equal");for(let a=0;a<this.rows;a++)for(let o=0;o<this.columns;o++)this.set(a,o,this.get(a,o)**i.get(a,o));return this}}function _u(n,e,r){let i=r?n.rows:n.rows-1;if(e<0||e>i)throw new RangeError("Row index out of range")}function wu(n,e,r){let i=r?n.columns:n.columns-1;if(e<0||e>i)throw new RangeError("Column index out of range")}function bb(n,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==n.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function xb(n,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==n.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function jX(n,e){if(!Vl.isAnyArray(e))throw new TypeError("row indices must be an array");for(let r=0;r<e.length;r++)if(e[r]<0||e[r]>=n.rows)throw new RangeError("row indices are out of range")}function HX(n,e){if(!Vl.isAnyArray(e))throw new TypeError("column indices must be an array");for(let r=0;r<e.length;r++)if(e[r]<0||e[r]>=n.columns)throw new RangeError("column indices are out of range")}function iH(n,e,r,i,a){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(wA("startRow",e),wA("endRow",r),wA("startColumn",i),wA("endColumn",a),e>r||i>a||e<0||e>=n.rows||r<0||r>=n.rows||i<0||i>=n.columns||a<0||a>=n.columns)throw new RangeError("Submatrix indices are out of range")}function SD(n,e=0){let r=[];for(let i=0;i<n;i++)r.push(e);return r}function wA(n,e){if(typeof e!="number")throw new TypeError(`${n} must be a number`)}function L1(n){if(n.isEmpty())throw new Error("Empty matrix has no elements to index")}function Xmt(n){let e=SD(n.rows);for(let r=0;r<n.rows;++r)for(let i=0;i<n.columns;++i)e[r]+=n.get(r,i);return e}function Kmt(n){let e=SD(n.columns);for(let r=0;r<n.rows;++r)for(let i=0;i<n.columns;++i)e[i]+=n.get(r,i);return e}function Zmt(n){let e=0;for(let r=0;r<n.rows;r++)for(let i=0;i<n.columns;i++)e+=n.get(r,i);return e}function Qmt(n){let e=SD(n.rows,1);for(let r=0;r<n.rows;++r)for(let i=0;i<n.columns;++i)e[r]*=n.get(r,i);return e}function Jmt(n){let e=SD(n.columns,1);for(let r=0;r<n.rows;++r)for(let i=0;i<n.columns;++i)e[i]*=n.get(r,i);return e}function evt(n){let e=1;for(let r=0;r<n.rows;r++)for(let i=0;i<n.columns;i++)e*=n.get(r,i);return e}function tvt(n,e,r){const i=n.rows,a=n.columns,o=[];for(let s=0;s<i;s++){let l=0,c=0,u=0;for(let d=0;d<a;d++)u=n.get(s,d)-r[s],l+=u,c+=u*u;e?o.push((c-l*l/a)/(a-1)):o.push((c-l*l/a)/a)}return o}function nvt(n,e,r){const i=n.rows,a=n.columns,o=[];for(let s=0;s<a;s++){let l=0,c=0,u=0;for(let d=0;d<i;d++)u=n.get(d,s)-r[s],l+=u,c+=u*u;e?o.push((c-l*l/i)/(i-1)):o.push((c-l*l/i)/i)}return o}function rvt(n,e,r){const i=n.rows,a=n.columns,o=i*a;let s=0,l=0,c=0;for(let u=0;u<i;u++)for(let d=0;d<a;d++)c=n.get(u,d)-r,s+=c,l+=c*c;return e?(l-s*s/o)/(o-1):(l-s*s/o)/o}function ivt(n,e){for(let r=0;r<n.rows;r++)for(let i=0;i<n.columns;i++)n.set(r,i,n.get(r,i)-e[r])}function avt(n,e){for(let r=0;r<n.rows;r++)for(let i=0;i<n.columns;i++)n.set(r,i,n.get(r,i)-e[i])}function ovt(n,e){for(let r=0;r<n.rows;r++)for(let i=0;i<n.columns;i++)n.set(r,i,n.get(r,i)-e)}function svt(n){const e=[];for(let r=0;r<n.rows;r++){let i=0;for(let a=0;a<n.columns;a++)i+=n.get(r,a)**2/(n.columns-1);e.push(Math.sqrt(i))}return e}function lvt(n,e){for(let r=0;r<n.rows;r++)for(let i=0;i<n.columns;i++)n.set(r,i,n.get(r,i)/e[r])}function cvt(n){const e=[];for(let r=0;r<n.columns;r++){let i=0;for(let a=0;a<n.rows;a++)i+=n.get(a,r)**2/(n.rows-1);e.push(Math.sqrt(i))}return e}function uvt(n,e){for(let r=0;r<n.rows;r++)for(let i=0;i<n.columns;i++)n.set(r,i,n.get(r,i)/e[i])}function dvt(n){const e=n.size-1;let r=0;for(let i=0;i<n.columns;i++)for(let a=0;a<n.rows;a++)r+=n.get(a,i)**2/e;return Math.sqrt(r)}function fvt(n,e){for(let r=0;r<n.rows;r++)for(let i=0;i<n.columns;i++)n.set(r,i,n.get(r,i)/e)}class pr{static from1DArray(e,r,i){if(e*r!==i.length)throw new RangeError("data length does not match given dimensions");let o=new an(e,r);for(let s=0;s<e;s++)for(let l=0;l<r;l++)o.set(s,l,i[s*r+l]);return o}static rowVector(e){let r=new an(1,e.length);for(let i=0;i<e.length;i++)r.set(0,i,e[i]);return r}static columnVector(e){let r=new an(e.length,1);for(let i=0;i<e.length;i++)r.set(i,0,e[i]);return r}static zeros(e,r){return new an(e,r)}static ones(e,r){return new an(e,r).fill(1)}static rand(e,r,i={}){if(typeof i!="object")throw new TypeError("options must be an object");const{random:a=Math.random}=i;let o=new an(e,r);for(let s=0;s<e;s++)for(let l=0;l<r;l++)o.set(s,l,a());return o}static randInt(e,r,i={}){if(typeof i!="object")throw new TypeError("options must be an object");const{min:a=0,max:o=1e3,random:s=Math.random}=i;if(!Number.isInteger(a))throw new TypeError("min must be an integer");if(!Number.isInteger(o))throw new TypeError("max must be an integer");if(a>=o)throw new RangeError("min must be smaller than max");let l=o-a,c=new an(e,r);for(let u=0;u<e;u++)for(let d=0;d<r;d++){let f=a+Math.round(s()*l);c.set(u,d,f)}return c}static eye(e,r,i){r===void 0&&(r=e),i===void 0&&(i=1);let a=Math.min(e,r),o=this.zeros(e,r);for(let s=0;s<a;s++)o.set(s,s,i);return o}static diag(e,r,i){let a=e.length;r===void 0&&(r=a),i===void 0&&(i=r);let o=Math.min(a,r,i),s=this.zeros(r,i);for(let l=0;l<o;l++)s.set(l,l,e[l]);return s}static min(e,r){e=this.checkMatrix(e),r=this.checkMatrix(r);let i=e.rows,a=e.columns,o=new an(i,a);for(let s=0;s<i;s++)for(let l=0;l<a;l++)o.set(s,l,Math.min(e.get(s,l),r.get(s,l)));return o}static max(e,r){e=this.checkMatrix(e),r=this.checkMatrix(r);let i=e.rows,a=e.columns,o=new this(i,a);for(let s=0;s<i;s++)for(let l=0;l<a;l++)o.set(s,l,Math.max(e.get(s,l),r.get(s,l)));return o}static checkMatrix(e){return pr.isMatrix(e)?e:new an(e)}static isMatrix(e){return e!=null&&e.klass==="Matrix"}get size(){return this.rows*this.columns}apply(e){if(typeof e!="function")throw new TypeError("callback must be a function");for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)e.call(this,r,i);return this}to1DArray(){let e=[];for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)e.push(this.get(r,i));return e}to2DArray(){let e=[];for(let r=0;r<this.rows;r++){e.push([]);for(let i=0;i<this.columns;i++)e[r].push(this.get(r,i))}return e}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let r=0;r<=e;r++)if(this.get(e,r)!==this.get(r,e))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let e=0;e<this.rows;e++)if(this.get(e,e)!==0)return!1;return!0}isEchelonForm(){let e=0,r=0,i=-1,a=!0,o=!1;for(;e<this.rows&&a;){for(r=0,o=!1;r<this.columns&&o===!1;)this.get(e,r)===0?r++:this.get(e,r)===1&&r>i?(o=!0,i=r):(a=!1,o=!0);e++}return a}isReducedEchelonForm(){let e=0,r=0,i=-1,a=!0,o=!1;for(;e<this.rows&&a;){for(r=0,o=!1;r<this.columns&&o===!1;)this.get(e,r)===0?r++:this.get(e,r)===1&&r>i?(o=!0,i=r):(a=!1,o=!0);for(let s=r+1;s<this.rows;s++)this.get(e,s)!==0&&(a=!1);e++}return a}echelonForm(){let e=this.clone(),r=0,i=0;for(;r<e.rows&&i<e.columns;){let a=r;for(let o=r;o<e.rows;o++)e.get(o,i)>e.get(a,i)&&(a=o);if(e.get(a,i)===0)i++;else{e.swapRows(r,a);let o=e.get(r,i);for(let s=i;s<e.columns;s++)e.set(r,s,e.get(r,s)/o);for(let s=r+1;s<e.rows;s++){let l=e.get(s,i)/e.get(r,i);e.set(s,i,0);for(let c=i+1;c<e.columns;c++)e.set(s,c,e.get(s,c)-e.get(r,c)*l)}r++,i++}}return e}reducedEchelonForm(){let e=this.echelonForm(),r=e.columns,i=e.rows,a=i-1;for(;a>=0;)if(e.maxRow(a)===0)a--;else{let o=0,s=!1;for(;o<i&&s===!1;)e.get(a,o)===1?s=!0:o++;for(let l=0;l<a;l++){let c=e.get(l,o);for(let u=o;u<r;u++){let d=e.get(l,u)-c*e.get(a,u);e.set(l,u,d)}}a--}return e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{rows:r=1,columns:i=1}=e;if(!Number.isInteger(r)||r<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(i)||i<=0)throw new TypeError("columns must be a positive integer");let a=new an(this.rows*r,this.columns*i);for(let o=0;o<r;o++)for(let s=0;s<i;s++)a.setSubMatrix(this,this.rows*o,this.columns*s);return a}fill(e){for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,e);return this}neg(){return this.mulS(-1)}getRow(e){_u(this,e);let r=[];for(let i=0;i<this.columns;i++)r.push(this.get(e,i));return r}getRowVector(e){return an.rowVector(this.getRow(e))}setRow(e,r){_u(this,e),r=bb(this,r);for(let i=0;i<this.columns;i++)this.set(e,i,r[i]);return this}swapRows(e,r){_u(this,e),_u(this,r);for(let i=0;i<this.columns;i++){let a=this.get(e,i);this.set(e,i,this.get(r,i)),this.set(r,i,a)}return this}getColumn(e){wu(this,e);let r=[];for(let i=0;i<this.rows;i++)r.push(this.get(i,e));return r}getColumnVector(e){return an.columnVector(this.getColumn(e))}setColumn(e,r){wu(this,e),r=xb(this,r);for(let i=0;i<this.rows;i++)this.set(i,e,r[i]);return this}swapColumns(e,r){wu(this,e),wu(this,r);for(let i=0;i<this.rows;i++){let a=this.get(i,e);this.set(i,e,this.get(i,r)),this.set(i,r,a)}return this}addRowVector(e){e=bb(this,e);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)+e[i]);return this}subRowVector(e){e=bb(this,e);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)-e[i]);return this}mulRowVector(e){e=bb(this,e);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)*e[i]);return this}divRowVector(e){e=bb(this,e);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)/e[i]);return this}addColumnVector(e){e=xb(this,e);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)+e[r]);return this}subColumnVector(e){e=xb(this,e);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)-e[r]);return this}mulColumnVector(e){e=xb(this,e);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)*e[r]);return this}divColumnVector(e){e=xb(this,e);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)this.set(r,i,this.get(r,i)/e[r]);return this}mulRow(e,r){_u(this,e);for(let i=0;i<this.columns;i++)this.set(e,i,this.get(e,i)*r);return this}mulColumn(e,r){wu(this,e);for(let i=0;i<this.rows;i++)this.set(i,e,this.get(i,e)*r);return this}max(e){if(this.isEmpty())return NaN;switch(e){case"row":{const r=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.get(i,a)>r[i]&&(r[i]=this.get(i,a));return r}case"column":{const r=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.get(i,a)>r[a]&&(r[a]=this.get(i,a));return r}case void 0:{let r=this.get(0,0);for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.get(i,a)>r&&(r=this.get(i,a));return r}default:throw new Error(`invalid option: ${e}`)}}maxIndex(){L1(this);let e=this.get(0,0),r=[0,0];for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.get(i,a)>e&&(e=this.get(i,a),r[0]=i,r[1]=a);return r}min(e){if(this.isEmpty())return NaN;switch(e){case"row":{const r=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.get(i,a)<r[i]&&(r[i]=this.get(i,a));return r}case"column":{const r=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.get(i,a)<r[a]&&(r[a]=this.get(i,a));return r}case void 0:{let r=this.get(0,0);for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.get(i,a)<r&&(r=this.get(i,a));return r}default:throw new Error(`invalid option: ${e}`)}}minIndex(){L1(this);let e=this.get(0,0),r=[0,0];for(let i=0;i<this.rows;i++)for(let a=0;a<this.columns;a++)this.get(i,a)<e&&(e=this.get(i,a),r[0]=i,r[1]=a);return r}maxRow(e){if(_u(this,e),this.isEmpty())return NaN;let r=this.get(e,0);for(let i=1;i<this.columns;i++)this.get(e,i)>r&&(r=this.get(e,i));return r}maxRowIndex(e){_u(this,e),L1(this);let r=this.get(e,0),i=[e,0];for(let a=1;a<this.columns;a++)this.get(e,a)>r&&(r=this.get(e,a),i[1]=a);return i}minRow(e){if(_u(this,e),this.isEmpty())return NaN;let r=this.get(e,0);for(let i=1;i<this.columns;i++)this.get(e,i)<r&&(r=this.get(e,i));return r}minRowIndex(e){_u(this,e),L1(this);let r=this.get(e,0),i=[e,0];for(let a=1;a<this.columns;a++)this.get(e,a)<r&&(r=this.get(e,a),i[1]=a);return i}maxColumn(e){if(wu(this,e),this.isEmpty())return NaN;let r=this.get(0,e);for(let i=1;i<this.rows;i++)this.get(i,e)>r&&(r=this.get(i,e));return r}maxColumnIndex(e){wu(this,e),L1(this);let r=this.get(0,e),i=[0,e];for(let a=1;a<this.rows;a++)this.get(a,e)>r&&(r=this.get(a,e),i[0]=a);return i}minColumn(e){if(wu(this,e),this.isEmpty())return NaN;let r=this.get(0,e);for(let i=1;i<this.rows;i++)this.get(i,e)<r&&(r=this.get(i,e));return r}minColumnIndex(e){wu(this,e),L1(this);let r=this.get(0,e),i=[0,e];for(let a=1;a<this.rows;a++)this.get(a,e)<r&&(r=this.get(a,e),i[0]=a);return i}diag(){let e=Math.min(this.rows,this.columns),r=[];for(let i=0;i<e;i++)r.push(this.get(i,i));return r}norm(e="frobenius"){switch(e){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${e}`)}}cumulativeSum(){let e=0;for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)e+=this.get(r,i),this.set(r,i,e);return this}dot(e){pr.isMatrix(e)&&(e=e.to1DArray());let r=this.to1DArray();if(r.length!==e.length)throw new RangeError("vectors do not have the same size");let i=0;for(let a=0;a<r.length;a++)i+=r[a]*e[a];return i}mmul(e){e=an.checkMatrix(e);let r=this.rows,i=this.columns,a=e.columns,o=new an(r,a),s=new Float64Array(i);for(let l=0;l<a;l++){for(let c=0;c<i;c++)s[c]=e.get(c,l);for(let c=0;c<r;c++){let u=0;for(let d=0;d<i;d++)u+=this.get(c,d)*s[d];o.set(c,l,u)}}return o}mpow(e){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(e)||e<0)throw new RangeError("Exponent must be a non-negative integer");let r=an.eye(this.rows),i=this;for(let a=e;a>=1;a/=2)a&1&&(r=r.mmul(i)),i=i.mmul(i);return r}strassen2x2(e){e=an.checkMatrix(e);let r=new an(2,2);const i=this.get(0,0),a=e.get(0,0),o=this.get(0,1),s=e.get(0,1),l=this.get(1,0),c=e.get(1,0),u=this.get(1,1),d=e.get(1,1),f=(i+u)*(a+d),h=(l+u)*a,p=i*(s-d),g=u*(c-a),m=(i+o)*d,v=(l-i)*(a+s),y=(o-u)*(c+d),b=f+g-m+y,x=p+m,_=h+g,S=f-h+p+v;return r.set(0,0,b),r.set(0,1,x),r.set(1,0,_),r.set(1,1,S),r}strassen3x3(e){e=an.checkMatrix(e);let r=new an(3,3);const i=this.get(0,0),a=this.get(0,1),o=this.get(0,2),s=this.get(1,0),l=this.get(1,1),c=this.get(1,2),u=this.get(2,0),d=this.get(2,1),f=this.get(2,2),h=e.get(0,0),p=e.get(0,1),g=e.get(0,2),m=e.get(1,0),v=e.get(1,1),y=e.get(1,2),b=e.get(2,0),x=e.get(2,1),_=e.get(2,2),S=(i+a+o-s-l-d-f)*v,M=(i-s)*(-p+v),E=l*(-h+p+m-v-y-b+_),T=(-i+s+l)*(h-p+v),P=(s+l)*(-h+p),A=i*h,N=(-i+u+d)*(h-g+y),O=(-i+u)*(g-y),I=(u+d)*(-h+g),D=(i+a+o-l-c-u-d)*y,k=d*(-h+g+m-v-y-b+x),$=(-o+d+f)*(v+b-x),B=(o-f)*(v-x),F=o*b,G=(d+f)*(-b+x),z=(-o+l+c)*(y+b-_),U=(o-c)*(y-_),H=(l+c)*(-b+_),X=a*m,V=c*x,W=s*g,K=u*p,q=f*_,Q=A+F+X,ie=S+T+P+A+$+F+G,oe=A+N+I+D+F+z+H,ue=M+E+T+A+F+z+U,le=M+T+P+A+V,me=F+z+U+H+W,J=A+N+O+k+$+B+F,pe=$+B+F+G+K,ve=A+N+O+I+q;return r.set(0,0,Q),r.set(0,1,ie),r.set(0,2,oe),r.set(1,0,ue),r.set(1,1,le),r.set(1,2,me),r.set(2,0,J),r.set(2,1,pe),r.set(2,2,ve),r}mmulStrassen(e){e=an.checkMatrix(e);let r=this.clone(),i=r.rows,a=r.columns,o=e.rows,s=e.columns;a!==o&&console.warn(`Multiplying ${i} x ${a} and ${o} x ${s} matrix: dimensions do not match.`);function l(f,h,p){let g=f.rows,m=f.columns;if(g===h&&m===p)return f;{let v=pr.zeros(h,p);return v=v.setSubMatrix(f,0,0),v}}let c=Math.max(i,o),u=Math.max(a,s);r=l(r,c,u),e=l(e,c,u);function d(f,h,p,g){if(p<=512||g<=512)return f.mmul(h);p%2===1&&g%2===1?(f=l(f,p+1,g+1),h=l(h,p+1,g+1)):p%2===1?(f=l(f,p+1,g),h=l(h,p+1,g)):g%2===1&&(f=l(f,p,g+1),h=l(h,p,g+1));let m=parseInt(f.rows/2,10),v=parseInt(f.columns/2,10),y=f.subMatrix(0,m-1,0,v-1),b=h.subMatrix(0,m-1,0,v-1),x=f.subMatrix(0,m-1,v,f.columns-1),_=h.subMatrix(0,m-1,v,h.columns-1),S=f.subMatrix(m,f.rows-1,0,v-1),M=h.subMatrix(m,h.rows-1,0,v-1),E=f.subMatrix(m,f.rows-1,v,f.columns-1),T=h.subMatrix(m,h.rows-1,v,h.columns-1),P=d(pr.add(y,E),pr.add(b,T),m,v),A=d(pr.add(S,E),b,m,v),N=d(y,pr.sub(_,T),m,v),O=d(E,pr.sub(M,b),m,v),I=d(pr.add(y,x),T,m,v),D=d(pr.sub(S,y),pr.add(b,_),m,v),k=d(pr.sub(x,E),pr.add(M,T),m,v),$=pr.add(P,O);$.sub(I),$.add(k);let B=pr.add(N,I),F=pr.add(A,O),G=pr.sub(P,A);G.add(N),G.add(D);let z=pr.zeros(2*$.rows,2*$.columns);return z=z.setSubMatrix($,0,0),z=z.setSubMatrix(B,$.rows,0),z=z.setSubMatrix(F,0,$.columns),z=z.setSubMatrix(G,$.rows,$.columns),z.subMatrix(0,p-1,0,g-1)}return d(r,e,c,u)}scaleRows(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:r=0,max:i=1}=e;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(r>=i)throw new RangeError("min must be smaller than max");let a=new an(this.rows,this.columns);for(let o=0;o<this.rows;o++){const s=this.getRow(o);s.length>0&&Sse(s,{min:r,max:i,output:s}),a.setRow(o,s)}return a}scaleColumns(e={}){if(typeof e!="object")throw new TypeError("options must be an object");const{min:r=0,max:i=1}=e;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(r>=i)throw new RangeError("min must be smaller than max");let a=new an(this.rows,this.columns);for(let o=0;o<this.columns;o++){const s=this.getColumn(o);s.length&&Sse(s,{min:r,max:i,output:s}),a.setColumn(o,s)}return a}flipRows(){const e=Math.ceil(this.columns/2);for(let r=0;r<this.rows;r++)for(let i=0;i<e;i++){let a=this.get(r,i),o=this.get(r,this.columns-1-i);this.set(r,i,o),this.set(r,this.columns-1-i,a)}return this}flipColumns(){const e=Math.ceil(this.rows/2);for(let r=0;r<this.columns;r++)for(let i=0;i<e;i++){let a=this.get(i,r),o=this.get(this.rows-1-i,r);this.set(i,r,o),this.set(this.rows-1-i,r,a)}return this}kroneckerProduct(e){e=an.checkMatrix(e);let r=this.rows,i=this.columns,a=e.rows,o=e.columns,s=new an(r*a,i*o);for(let l=0;l<r;l++)for(let c=0;c<i;c++)for(let u=0;u<a;u++)for(let d=0;d<o;d++)s.set(a*l+u,o*c+d,this.get(l,c)*e.get(u,d));return s}kroneckerSum(e){if(e=an.checkMatrix(e),!this.isSquare()||!e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let r=this.rows,i=e.rows,a=this.kroneckerProduct(an.eye(i,i)),o=an.eye(r,r).kroneckerProduct(e);return a.add(o)}transpose(){let e=new an(this.columns,this.rows);for(let r=0;r<this.rows;r++)for(let i=0;i<this.columns;i++)e.set(i,r,this.get(r,i));return e}sortRows(e=Cse){for(let r=0;r<this.rows;r++)this.setRow(r,this.getRow(r).sort(e));return this}sortColumns(e=Cse){for(let r=0;r<this.columns;r++)this.setColumn(r,this.getColumn(r).sort(e));return this}subMatrix(e,r,i,a){iH(this,e,r,i,a);let o=new an(r-e+1,a-i+1);for(let s=e;s<=r;s++)for(let l=i;l<=a;l++)o.set(s-e,l-i,this.get(s,l));return o}subMatrixRow(e,r,i){if(r===void 0&&(r=0),i===void 0&&(i=this.columns-1),r>i||r<0||r>=this.columns||i<0||i>=this.columns)throw new RangeError("Argument out of range");let a=new an(e.length,i-r+1);for(let o=0;o<e.length;o++)for(let s=r;s<=i;s++){if(e[o]<0||e[o]>=this.rows)throw new RangeError(`Row index out of range: ${e[o]}`);a.set(o,s-r,this.get(e[o],s))}return a}subMatrixColumn(e,r,i){if(r===void 0&&(r=0),i===void 0&&(i=this.rows-1),r>i||r<0||r>=this.rows||i<0||i>=this.rows)throw new RangeError("Argument out of range");let a=new an(i-r+1,e.length);for(let o=0;o<e.length;o++)for(let s=r;s<=i;s++){if(e[o]<0||e[o]>=this.columns)throw new RangeError(`Column index out of range: ${e[o]}`);a.set(s-r,o,this.get(s,e[o]))}return a}setSubMatrix(e,r,i){if(e=an.checkMatrix(e),e.isEmpty())return this;let a=r+e.rows-1,o=i+e.columns-1;iH(this,r,a,i,o);for(let s=0;s<e.rows;s++)for(let l=0;l<e.columns;l++)this.set(r+s,i+l,e.get(s,l));return this}selection(e,r){jX(this,e),HX(this,r);let i=new an(e.length,r.length);for(let a=0;a<e.length;a++){let o=e[a];for(let s=0;s<r.length;s++){let l=r[s];i.set(a,s,this.get(o,l))}}return i}trace(){let e=Math.min(this.rows,this.columns),r=0;for(let i=0;i<e;i++)r+=this.get(i,i);return r}clone(){return this.constructor.copy(this,new an(this.rows,this.columns))}static copy(e,r){for(const[i,a,o]of e.entries())r.set(i,a,o);return r}sum(e){switch(e){case"row":return Xmt(this);case"column":return Kmt(this);case void 0:return Zmt(this);default:throw new Error(`invalid option: ${e}`)}}product(e){switch(e){case"row":return Qmt(this);case"column":return Jmt(this);case void 0:return evt(this);default:throw new Error(`invalid option: ${e}`)}}mean(e){const r=this.sum(e);switch(e){case"row":{for(let i=0;i<this.rows;i++)r[i]/=this.columns;return r}case"column":{for(let i=0;i<this.columns;i++)r[i]/=this.rows;return r}case void 0:return r/this.size;default:throw new Error(`invalid option: ${e}`)}}variance(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),typeof r!="object")throw new TypeError("options must be an object");const{unbiased:i=!0,mean:a=this.mean(e)}=r;if(typeof i!="boolean")throw new TypeError("unbiased must be a boolean");switch(e){case"row":{if(!Vl.isAnyArray(a))throw new TypeError("mean must be an array");return tvt(this,i,a)}case"column":{if(!Vl.isAnyArray(a))throw new TypeError("mean must be an array");return nvt(this,i,a)}case void 0:{if(typeof a!="number")throw new TypeError("mean must be a number");return rvt(this,i,a)}default:throw new Error(`invalid option: ${e}`)}}standardDeviation(e,r){typeof e=="object"&&(r=e,e=void 0);const i=this.variance(e,r);if(e===void 0)return Math.sqrt(i);for(let a=0;a<i.length;a++)i[a]=Math.sqrt(i[a]);return i}center(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),typeof r!="object")throw new TypeError("options must be an object");const{center:i=this.mean(e)}=r;switch(e){case"row":{if(!Vl.isAnyArray(i))throw new TypeError("center must be an array");return ivt(this,i),this}case"column":{if(!Vl.isAnyArray(i))throw new TypeError("center must be an array");return avt(this,i),this}case void 0:{if(typeof i!="number")throw new TypeError("center must be a number");return ovt(this,i),this}default:throw new Error(`invalid option: ${e}`)}}scale(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),typeof r!="object")throw new TypeError("options must be an object");let i=r.scale;switch(e){case"row":{if(i===void 0)i=svt(this);else if(!Vl.isAnyArray(i))throw new TypeError("scale must be an array");return lvt(this,i),this}case"column":{if(i===void 0)i=cvt(this);else if(!Vl.isAnyArray(i))throw new TypeError("scale must be an array");return uvt(this,i),this}case void 0:{if(i===void 0)i=dvt(this);else if(typeof i!="number")throw new TypeError("scale must be a number");return fvt(this,i),this}default:throw new Error(`invalid option: ${e}`)}}toString(e){return QCe(this,e)}[Symbol.iterator](){return this.entries()}*entries(){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)yield[e,r,this.get(e,r)]}*values(){for(let e=0;e<this.rows;e++)for(let r=0;r<this.columns;r++)yield this.get(e,r)}}pr.prototype.klass="Matrix";typeof Symbol<"u"&&(pr.prototype[Symbol.for("nodejs.util.inspect.custom")]=Hmt);function Cse(n,e){return n-e}function hvt(n){return n.every(e=>typeof e=="number")}pr.random=pr.rand;pr.randomInt=pr.randInt;pr.diagonal=pr.diag;pr.prototype.diagonal=pr.prototype.diag;pr.identity=pr.eye;pr.prototype.negate=pr.prototype.neg;pr.prototype.tensorProduct=pr.prototype.kroneckerProduct;var QC,aH,ty;let an=(ty=class extends pr{constructor(r,i){super();Ik(this,QC);Gi(this,"data");if(ty.isMatrix(r))Dk(this,QC,aH).call(this,r.rows,r.columns),ty.copy(r,this);else if(Number.isInteger(r)&&r>=0)Dk(this,QC,aH).call(this,r,i);else if(Vl.isAnyArray(r)){const a=r;if(r=a.length,i=r?a[0].length:0,typeof i!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let o=0;o<r;o++){if(a[o].length!==i)throw new RangeError("Inconsistent array dimensions");if(!hvt(a[o]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(a[o]))}this.rows=r,this.columns=i}else throw new TypeError("First argument must be a positive number or an array")}set(r,i,a){return this.data[r][i]=a,this}get(r,i){return this.data[r][i]}removeRow(r){return _u(this,r),this.data.splice(r,1),this.rows-=1,this}addRow(r,i){return i===void 0&&(i=r,r=this.rows),_u(this,r,!0),i=Float64Array.from(bb(this,i)),this.data.splice(r,0,i),this.rows+=1,this}removeColumn(r){wu(this,r);for(let i=0;i<this.rows;i++){const a=new Float64Array(this.columns-1);for(let o=0;o<r;o++)a[o]=this.data[i][o];for(let o=r+1;o<this.columns;o++)a[o-1]=this.data[i][o];this.data[i]=a}return this.columns-=1,this}addColumn(r,i){typeof i>"u"&&(i=r,r=this.columns),wu(this,r,!0),i=xb(this,i);for(let a=0;a<this.rows;a++){const o=new Float64Array(this.columns+1);let s=0;for(;s<r;s++)o[s]=this.data[a][s];for(o[s++]=i[a];s<this.columns+1;s++)o[s]=this.data[a][s-1];this.data[a]=o}return this.columns+=1,this}},QC=new WeakSet,aH=function(r,i){if(this.data=[],Number.isInteger(i)&&i>=0)for(let a=0;a<r;a++)this.data.push(new Float64Array(i));else throw new TypeError("nColumns must be a positive integer");this.rows=r,this.columns=i},ty);Ymt(pr,an);var ks;const xI=class xI extends pr{constructor(r){super();Ik(this,ks);if(an.isMatrix(r)){if(!r.isSymmetric())throw new TypeError("not symmetric data");KT(this,ks,an.copy(r,new an(r.rows,r.rows)))}else if(Number.isInteger(r)&&r>=0)KT(this,ks,new an(r,r));else if(KT(this,ks,new an(r)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return ud(this,ks).size}get rows(){return ud(this,ks).rows}get columns(){return ud(this,ks).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(r){return an.isMatrix(r)&&r.klassType==="SymmetricMatrix"}static zeros(r){return new this(r)}static ones(r){return new this(r).fill(1)}clone(){const r=new xI(this.diagonalSize);for(const[i,a,o]of this.upperRightEntries())r.set(i,a,o);return r}toMatrix(){return new an(this)}get(r,i){return ud(this,ks).get(r,i)}set(r,i,a){return ud(this,ks).set(r,i,a),ud(this,ks).set(i,r,a),this}removeCross(r){return ud(this,ks).removeRow(r),ud(this,ks).removeColumn(r),this}addCross(r,i){i===void 0&&(i=r,r=this.diagonalSize);const a=i.slice();return a.splice(r,1),ud(this,ks).addRow(r,a),ud(this,ks).addColumn(r,i),this}applyMask(r){if(r.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const i=[];for(const[a,o]of r.entries())o||i.push(a);i.reverse();for(const a of i)this.removeCross(a);return this}toCompact(){const{diagonalSize:r}=this,i=new Array(r*(r+1)/2);for(let a=0,o=0,s=0;s<i.length;s++)i[s]=this.get(o,a),++a>=r&&(a=++o);return i}static fromCompact(r){const i=r.length,a=(Math.sqrt(8*i+1)-1)/2;if(!Number.isInteger(a))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(r)}`);const o=new xI(a);for(let s=0,l=0,c=0;c<i;c++)o.set(s,l,r[c]),++s>=a&&(s=++l);return o}*upperRightEntries(){for(let r=0,i=0;r<this.diagonalSize;void 0){const a=this.get(r,i);yield[r,i,a],++i>=this.diagonalSize&&(i=++r)}}*upperRightValues(){for(let r=0,i=0;r<this.diagonalSize;void 0)yield this.get(r,i),++i>=this.diagonalSize&&(i=++r)}};ks=new WeakMap;let H0=xI;H0.prototype.klassType="SymmetricMatrix";class ED extends H0{static isDistanceMatrix(e){return H0.isSymmetricMatrix(e)&&e.klassSubType==="DistanceMatrix"}constructor(e){if(super(e),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(e,r,i){return e===r&&(i=0),super.set(e,r,i)}addCross(e,r){return r===void 0&&(r=e,e=this.diagonalSize),r=r.slice(),r[e]=0,super.addCross(e,r)}toSymmetricMatrix(){return new H0(this)}clone(){const e=new ED(this.diagonalSize);for(const[r,i,a]of this.upperRightEntries())r!==i&&e.set(r,i,a);return e}toCompact(){const{diagonalSize:e}=this,r=(e-1)*e/2,i=new Array(r);for(let a=1,o=0,s=0;s<i.length;s++)i[s]=this.get(o,a),++a>=e&&(a=++o+1);return i}static fromCompact(e){const r=e.length;if(r===0)return new this(0);const i=(Math.sqrt(8*r+1)+1)/2;if(!Number.isInteger(i))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(e)}`);const a=new this(i);for(let o=1,s=0,l=0;l<r;l++)a.set(o,s,e[l]),++o>=i&&(o=++s+1);return a}}ED.prototype.klassSubType="DistanceMatrix";class Yp extends pr{constructor(e,r,i){super(),this.matrix=e,this.rows=r,this.columns=i}}class pvt extends Yp{constructor(e,r){wu(e,r),super(e,e.rows,1),this.column=r}set(e,r,i){return this.matrix.set(e,this.column,i),this}get(e){return this.matrix.get(e,this.column)}}class gvt extends Yp{constructor(e,r){HX(e,r),super(e,e.rows,r.length),this.columnIndices=r}set(e,r,i){return this.matrix.set(e,this.columnIndices[r],i),this}get(e,r){return this.matrix.get(e,this.columnIndices[r])}}class mvt extends Yp{constructor(e){super(e,e.rows,e.columns)}set(e,r,i){return this.matrix.set(e,this.columns-r-1,i),this}get(e,r){return this.matrix.get(e,this.columns-r-1)}}class vvt extends Yp{constructor(e){super(e,e.rows,e.columns)}set(e,r,i){return this.matrix.set(this.rows-e-1,r,i),this}get(e,r){return this.matrix.get(this.rows-e-1,r)}}class yvt extends Yp{constructor(e,r){_u(e,r),super(e,1,e.columns),this.row=r}set(e,r,i){return this.matrix.set(this.row,r,i),this}get(e,r){return this.matrix.get(this.row,r)}}class bvt extends Yp{constructor(e,r){jX(e,r),super(e,r.length,e.columns),this.rowIndices=r}set(e,r,i){return this.matrix.set(this.rowIndices[e],r,i),this}get(e,r){return this.matrix.get(this.rowIndices[e],r)}}class _P extends Yp{constructor(e,r,i){jX(e,r),HX(e,i),super(e,r.length,i.length),this.rowIndices=r,this.columnIndices=i}set(e,r,i){return this.matrix.set(this.rowIndices[e],this.columnIndices[r],i),this}get(e,r){return this.matrix.get(this.rowIndices[e],this.columnIndices[r])}}class xvt extends Yp{constructor(e,r,i,a,o){iH(e,r,i,a,o),super(e,i-r+1,o-a+1),this.startRow=r,this.startColumn=a}set(e,r,i){return this.matrix.set(this.startRow+e,this.startColumn+r,i),this}get(e,r){return this.matrix.get(this.startRow+e,this.startColumn+r)}}class _vt extends Yp{constructor(e){super(e,e.columns,e.rows)}set(e,r,i){return this.matrix.set(r,e,i),this}get(e,r){return this.matrix.get(r,e)}}class JCe extends pr{constructor(e,r={}){const{rows:i=1}=r;if(e.length%i!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=i,this.columns=e.length/i,this.data=e}set(e,r,i){let a=this._calculateIndex(e,r);return this.data[a]=i,this}get(e,r){let i=this._calculateIndex(e,r);return this.data[i]}_calculateIndex(e,r){return e*this.columns+r}}class jc extends pr{constructor(e){super(),this.data=e,this.rows=e.length,this.columns=e[0].length}set(e,r,i){return this.data[e][r]=i,this}get(e,r){return this.data[e][r]}}function wvt(n,e){if(Vl.isAnyArray(n))return n[0]&&Vl.isAnyArray(n[0])?new jc(n):new JCe(n,e);throw new Error("the argument is not an array")}class CD{constructor(e){e=jc.checkMatrix(e);let r=e.clone(),i=r.rows,a=r.columns,o=new Float64Array(i),s=1,l,c,u,d,f,h,p,g,m;for(l=0;l<i;l++)o[l]=l;for(g=new Float64Array(i),c=0;c<a;c++){for(l=0;l<i;l++)g[l]=r.get(l,c);for(l=0;l<i;l++){for(m=Math.min(l,c),f=0,u=0;u<m;u++)f+=r.get(l,u)*g[u];g[l]-=f,r.set(l,c,g[l])}for(d=c,l=c+1;l<i;l++)Math.abs(g[l])>Math.abs(g[d])&&(d=l);if(d!==c){for(u=0;u<a;u++)h=r.get(d,u),r.set(d,u,r.get(c,u)),r.set(c,u,h);p=o[d],o[d]=o[c],o[c]=p,s=-s}if(c<i&&r.get(c,c)!==0)for(l=c+1;l<i;l++)r.set(l,c,r.get(l,c)/r.get(c,c))}this.LU=r,this.pivotVector=o,this.pivotSign=s}isSingular(){let e=this.LU,r=e.columns;for(let i=0;i<r;i++)if(e.get(i,i)===0)return!0;return!1}solve(e){e=an.checkMatrix(e);let r=this.LU;if(r.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let a=e.columns,o=e.subMatrixRow(this.pivotVector,0,a-1),s=r.columns,l,c,u;for(u=0;u<s;u++)for(l=u+1;l<s;l++)for(c=0;c<a;c++)o.set(l,c,o.get(l,c)-o.get(u,c)*r.get(l,u));for(u=s-1;u>=0;u--){for(c=0;c<a;c++)o.set(u,c,o.get(u,c)/r.get(u,u));for(l=0;l<u;l++)for(c=0;c<a;c++)o.set(l,c,o.get(l,c)-o.get(u,c)*r.get(l,u))}return o}get determinant(){let e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");let r=this.pivotSign,i=e.columns;for(let a=0;a<i;a++)r*=e.get(a,a);return r}get lowerTriangularMatrix(){let e=this.LU,r=e.rows,i=e.columns,a=new an(r,i);for(let o=0;o<r;o++)for(let s=0;s<i;s++)o>s?a.set(o,s,e.get(o,s)):o===s?a.set(o,s,1):a.set(o,s,0);return a}get upperTriangularMatrix(){let e=this.LU,r=e.rows,i=e.columns,a=new an(r,i);for(let o=0;o<r;o++)for(let s=0;s<i;s++)o<=s?a.set(o,s,e.get(o,s)):a.set(o,s,0);return a}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function Yh(n,e){let r=0;return Math.abs(n)>Math.abs(e)?(r=e/n,Math.abs(n)*Math.sqrt(1+r*r)):e!==0?(r=n/e,Math.abs(e)*Math.sqrt(1+r*r)):0}class WX{constructor(e){e=jc.checkMatrix(e);let r=e.clone(),i=e.rows,a=e.columns,o=new Float64Array(a),s,l,c,u;for(c=0;c<a;c++){let d=0;for(s=c;s<i;s++)d=Yh(d,r.get(s,c));if(d!==0){for(r.get(c,c)<0&&(d=-d),s=c;s<i;s++)r.set(s,c,r.get(s,c)/d);for(r.set(c,c,r.get(c,c)+1),l=c+1;l<a;l++){for(u=0,s=c;s<i;s++)u+=r.get(s,c)*r.get(s,l);for(u=-u/r.get(c,c),s=c;s<i;s++)r.set(s,l,r.get(s,l)+u*r.get(s,c))}}o[c]=-d}this.QR=r,this.Rdiag=o}solve(e){e=an.checkMatrix(e);let r=this.QR,i=r.rows;if(e.rows!==i)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let a=e.columns,o=e.clone(),s=r.columns,l,c,u,d;for(u=0;u<s;u++)for(c=0;c<a;c++){for(d=0,l=u;l<i;l++)d+=r.get(l,u)*o.get(l,c);for(d=-d/r.get(u,u),l=u;l<i;l++)o.set(l,c,o.get(l,c)+d*r.get(l,u))}for(u=s-1;u>=0;u--){for(c=0;c<a;c++)o.set(u,c,o.get(u,c)/this.Rdiag[u]);for(l=0;l<u;l++)for(c=0;c<a;c++)o.set(l,c,o.get(l,c)-o.get(u,c)*r.get(l,u))}return o.subMatrix(0,s-1,0,a-1)}isFullRank(){let e=this.QR.columns;for(let r=0;r<e;r++)if(this.Rdiag[r]===0)return!1;return!0}get upperTriangularMatrix(){let e=this.QR,r=e.columns,i=new an(r,r),a,o;for(a=0;a<r;a++)for(o=0;o<r;o++)a<o?i.set(a,o,e.get(a,o)):a===o?i.set(a,o,this.Rdiag[a]):i.set(a,o,0);return i}get orthogonalMatrix(){let e=this.QR,r=e.rows,i=e.columns,a=new an(r,i),o,s,l,c;for(l=i-1;l>=0;l--){for(o=0;o<r;o++)a.set(o,l,0);for(a.set(l,l,1),s=l;s<i;s++)if(e.get(l,l)!==0){for(c=0,o=l;o<r;o++)c+=e.get(o,l)*a.get(o,s);for(c=-c/e.get(l,l),o=l;o<r;o++)a.set(o,s,a.get(o,s)+c*e.get(o,l))}}return a}}let Z_=class{constructor(e,r={}){if(e=jc.checkMatrix(e),e.isEmpty())throw new Error("Matrix must be non-empty");let i=e.rows,a=e.columns;const{computeLeftSingularVectors:o=!0,computeRightSingularVectors:s=!0,autoTranspose:l=!1}=r;let c=!!o,u=!!s,d=!1,f;if(i<a)if(!l)f=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{f=e.transpose(),i=f.rows,a=f.columns,d=!0;let A=c;c=u,u=A}else f=e.clone();let h=Math.min(i,a),p=Math.min(i+1,a),g=new Float64Array(p),m=new an(i,h),v=new an(a,a),y=new Float64Array(a),b=new Float64Array(i),x=new Float64Array(p);for(let A=0;A<p;A++)x[A]=A;let _=Math.min(i-1,a),S=Math.max(0,Math.min(a-2,i)),M=Math.max(_,S);for(let A=0;A<M;A++){if(A<_){g[A]=0;for(let N=A;N<i;N++)g[A]=Yh(g[A],f.get(N,A));if(g[A]!==0){f.get(A,A)<0&&(g[A]=-g[A]);for(let N=A;N<i;N++)f.set(N,A,f.get(N,A)/g[A]);f.set(A,A,f.get(A,A)+1)}g[A]=-g[A]}for(let N=A+1;N<a;N++){if(A<_&&g[A]!==0){let O=0;for(let I=A;I<i;I++)O+=f.get(I,A)*f.get(I,N);O=-O/f.get(A,A);for(let I=A;I<i;I++)f.set(I,N,f.get(I,N)+O*f.get(I,A))}y[N]=f.get(A,N)}if(c&&A<_)for(let N=A;N<i;N++)m.set(N,A,f.get(N,A));if(A<S){y[A]=0;for(let N=A+1;N<a;N++)y[A]=Yh(y[A],y[N]);if(y[A]!==0){y[A+1]<0&&(y[A]=0-y[A]);for(let N=A+1;N<a;N++)y[N]/=y[A];y[A+1]+=1}if(y[A]=-y[A],A+1<i&&y[A]!==0){for(let N=A+1;N<i;N++)b[N]=0;for(let N=A+1;N<i;N++)for(let O=A+1;O<a;O++)b[N]+=y[O]*f.get(N,O);for(let N=A+1;N<a;N++){let O=-y[N]/y[A+1];for(let I=A+1;I<i;I++)f.set(I,N,f.get(I,N)+O*b[I])}}if(u)for(let N=A+1;N<a;N++)v.set(N,A,y[N])}}let E=Math.min(a,i+1);if(_<a&&(g[_]=f.get(_,_)),i<E&&(g[E-1]=0),S+1<E&&(y[S]=f.get(S,E-1)),y[E-1]=0,c){for(let A=_;A<h;A++){for(let N=0;N<i;N++)m.set(N,A,0);m.set(A,A,1)}for(let A=_-1;A>=0;A--)if(g[A]!==0){for(let N=A+1;N<h;N++){let O=0;for(let I=A;I<i;I++)O+=m.get(I,A)*m.get(I,N);O=-O/m.get(A,A);for(let I=A;I<i;I++)m.set(I,N,m.get(I,N)+O*m.get(I,A))}for(let N=A;N<i;N++)m.set(N,A,-m.get(N,A));m.set(A,A,1+m.get(A,A));for(let N=0;N<A-1;N++)m.set(N,A,0)}else{for(let N=0;N<i;N++)m.set(N,A,0);m.set(A,A,1)}}if(u)for(let A=a-1;A>=0;A--){if(A<S&&y[A]!==0)for(let N=A+1;N<a;N++){let O=0;for(let I=A+1;I<a;I++)O+=v.get(I,A)*v.get(I,N);O=-O/v.get(A+1,A);for(let I=A+1;I<a;I++)v.set(I,N,v.get(I,N)+O*v.get(I,A))}for(let N=0;N<a;N++)v.set(N,A,0);v.set(A,A,1)}let T=E-1,P=Number.EPSILON;for(;E>0;){let A,N;for(A=E-2;A>=-1&&A!==-1;A--){const O=Number.MIN_VALUE+P*Math.abs(g[A]+Math.abs(g[A+1]));if(Math.abs(y[A])<=O||Number.isNaN(y[A])){y[A]=0;break}}if(A===E-2)N=4;else{let O;for(O=E-1;O>=A&&O!==A;O--){let I=(O!==E?Math.abs(y[O]):0)+(O!==A+1?Math.abs(y[O-1]):0);if(Math.abs(g[O])<=P*I){g[O]=0;break}}O===A?N=3:O===E-1?N=1:(N=2,A=O)}switch(A++,N){case 1:{let O=y[E-2];y[E-2]=0;for(let I=E-2;I>=A;I--){let D=Yh(g[I],O),k=g[I]/D,$=O/D;if(g[I]=D,I!==A&&(O=-$*y[I-1],y[I-1]=k*y[I-1]),u)for(let B=0;B<a;B++)D=k*v.get(B,I)+$*v.get(B,E-1),v.set(B,E-1,-$*v.get(B,I)+k*v.get(B,E-1)),v.set(B,I,D)}break}case 2:{let O=y[A-1];y[A-1]=0;for(let I=A;I<E;I++){let D=Yh(g[I],O),k=g[I]/D,$=O/D;if(g[I]=D,O=-$*y[I],y[I]=k*y[I],c)for(let B=0;B<i;B++)D=k*m.get(B,I)+$*m.get(B,A-1),m.set(B,A-1,-$*m.get(B,I)+k*m.get(B,A-1)),m.set(B,I,D)}break}case 3:{const O=Math.max(Math.abs(g[E-1]),Math.abs(g[E-2]),Math.abs(y[E-2]),Math.abs(g[A]),Math.abs(y[A])),I=g[E-1]/O,D=g[E-2]/O,k=y[E-2]/O,$=g[A]/O,B=y[A]/O,F=((D+I)*(D-I)+k*k)/2,G=I*k*(I*k);let z=0;(F!==0||G!==0)&&(F<0?z=0-Math.sqrt(F*F+G):z=Math.sqrt(F*F+G),z=G/(F+z));let U=($+I)*($-I)+z,H=$*B;for(let X=A;X<E-1;X++){let V=Yh(U,H);V===0&&(V=Number.MIN_VALUE);let W=U/V,K=H/V;if(X!==A&&(y[X-1]=V),U=W*g[X]+K*y[X],y[X]=W*y[X]-K*g[X],H=K*g[X+1],g[X+1]=W*g[X+1],u)for(let q=0;q<a;q++)V=W*v.get(q,X)+K*v.get(q,X+1),v.set(q,X+1,-K*v.get(q,X)+W*v.get(q,X+1)),v.set(q,X,V);if(V=Yh(U,H),V===0&&(V=Number.MIN_VALUE),W=U/V,K=H/V,g[X]=V,U=W*y[X]+K*g[X+1],g[X+1]=-K*y[X]+W*g[X+1],H=K*y[X+1],y[X+1]=W*y[X+1],c&&X<i-1)for(let q=0;q<i;q++)V=W*m.get(q,X)+K*m.get(q,X+1),m.set(q,X+1,-K*m.get(q,X)+W*m.get(q,X+1)),m.set(q,X,V)}y[E-2]=U;break}case 4:{if(g[A]<=0&&(g[A]=g[A]<0?-g[A]:0,u))for(let O=0;O<=T;O++)v.set(O,A,-v.get(O,A));for(;A<T&&!(g[A]>=g[A+1]);){let O=g[A];if(g[A]=g[A+1],g[A+1]=O,u&&A<a-1)for(let I=0;I<a;I++)O=v.get(I,A+1),v.set(I,A+1,v.get(I,A)),v.set(I,A,O);if(c&&A<i-1)for(let I=0;I<i;I++)O=m.get(I,A+1),m.set(I,A+1,m.get(I,A)),m.set(I,A,O);A++}E--;break}}}if(d){let A=v;v=m,m=A}this.m=i,this.n=a,this.s=g,this.U=m,this.V=v}solve(e){let r=e,i=this.threshold,a=this.s.length,o=an.zeros(a,a);for(let h=0;h<a;h++)Math.abs(this.s[h])<=i?o.set(h,h,0):o.set(h,h,1/this.s[h]);let s=this.U,l=this.rightSingularVectors,c=l.mmul(o),u=l.rows,d=s.rows,f=an.zeros(u,d);for(let h=0;h<u;h++)for(let p=0;p<d;p++){let g=0;for(let m=0;m<a;m++)g+=c.get(h,m)*s.get(p,m);f.set(h,p,g)}return f.mmul(r)}solveForDiagonal(e){return this.solve(an.diag(e))}inverse(){let e=this.V,r=this.threshold,i=e.rows,a=e.columns,o=new an(i,this.s.length);for(let d=0;d<i;d++)for(let f=0;f<a;f++)Math.abs(this.s[f])>r&&o.set(d,f,e.get(d,f)/this.s[f]);let s=this.U,l=s.rows,c=s.columns,u=new an(i,l);for(let d=0;d<i;d++)for(let f=0;f<l;f++){let h=0;for(let p=0;p<c;p++)h+=o.get(d,p)*s.get(f,p);u.set(d,f,h)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,r=0,i=this.s;for(let a=0,o=i.length;a<o;a++)i[a]>e&&r++;return r}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return an.diag(this.s)}};function Svt(n,e=!1){return n=jc.checkMatrix(n),e?new Z_(n).inverse():eMe(n,an.eye(n.rows))}function eMe(n,e,r=!1){return n=jc.checkMatrix(n),e=jc.checkMatrix(e),r?new Z_(n).solve(e):n.isSquare()?new CD(n).solve(e):new WX(n).solve(e)}function wP(n){if(n=an.checkMatrix(n),n.isSquare()){if(n.columns===0)return 1;let e,r,i,a;if(n.columns===2)return e=n.get(0,0),r=n.get(0,1),i=n.get(1,0),a=n.get(1,1),e*a-r*i;if(n.columns===3){let o,s,l;return o=new _P(n,[1,2],[1,2]),s=new _P(n,[1,2],[0,2]),l=new _P(n,[1,2],[0,1]),e=n.get(0,0),r=n.get(0,1),i=n.get(0,2),e*wP(o)-r*wP(s)+i*wP(l)}else return new CD(n).determinant}else throw Error("determinant can only be calculated for a square matrix")}function Evt(n,e){let r=[];for(let i=0;i<n;i++)i!==e&&r.push(i);return r}function Cvt(n,e,r,i=1e-9,a=1e-9){if(n>a)return new Array(e.rows+1).fill(0);{let o=e.addRow(r,[0]);for(let s=0;s<o.rows;s++)Math.abs(o.get(s,0))<i&&o.set(s,0,0);return o.to1DArray()}}function Mvt(n,e={}){const{thresholdValue:r=1e-9,thresholdError:i=1e-9}=e;n=an.checkMatrix(n);let a=n.rows,o=new an(a,a);for(let s=0;s<a;s++){let l=an.columnVector(n.getRow(s)),c=n.subMatrixRow(Evt(a,s)).transpose(),d=new Z_(c).solve(l),f=an.sub(l,c.mmul(d)).abs().max();o.setRow(s,Cvt(f,d,s,r,i))}return o}function Tvt(n,e=Number.EPSILON){if(n=an.checkMatrix(n),n.isEmpty())return n.transpose();let r=new Z_(n,{autoTranspose:!0}),i=r.leftSingularVectors,a=r.rightSingularVectors,o=r.diagonal;for(let s=0;s<o.length;s++)Math.abs(o[s])>e?o[s]=1/o[s]:o[s]=0;return a.mmul(an.diag(o).mmul(i.transpose()))}function Avt(n,e=n,r={}){n=new an(n);let i=!1;if(typeof e=="object"&&!an.isMatrix(e)&&!Vl.isAnyArray(e)?(r=e,e=n,i=!0):e=new an(e),n.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:a=!0}=r;a&&(n=n.center("column"),i||(e=e.center("column")));const o=n.transpose().mmul(e);for(let s=0;s<o.rows;s++)for(let l=0;l<o.columns;l++)o.set(s,l,o.get(s,l)*(1/(n.rows-1)));return o}function Rvt(n,e=n,r={}){n=new an(n);let i=!1;if(typeof e=="object"&&!an.isMatrix(e)&&!Vl.isAnyArray(e)?(r=e,e=n,i=!0):e=new an(e),n.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:a=!0,scale:o=!0}=r;a&&(n.center("column"),i||e.center("column")),o&&(n.scale("column"),i||e.scale("column"));const s=n.standardDeviation("column",{unbiased:!0}),l=i?s:e.standardDeviation("column",{unbiased:!0}),c=n.transpose().mmul(e);for(let u=0;u<c.rows;u++)for(let d=0;d<c.columns;d++)c.set(u,d,c.get(u,d)*(1/(s[u]*l[d]))*(1/(n.rows-1)));return c}class tMe{constructor(e,r={}){const{assumeSymmetric:i=!1}=r;if(e=jc.checkMatrix(e),!e.isSquare())throw new Error("Matrix is not a square matrix");if(e.isEmpty())throw new Error("Matrix must be non-empty");let a=e.columns,o=new an(a,a),s=new Float64Array(a),l=new Float64Array(a),c=e,u,d,f=!1;if(i?f=!0:f=e.isSymmetric(),f){for(u=0;u<a;u++)for(d=0;d<a;d++)o.set(u,d,c.get(u,d));Pvt(a,l,s,o),Nvt(a,l,s,o)}else{let h=new an(a,a),p=new Float64Array(a);for(d=0;d<a;d++)for(u=0;u<a;u++)h.set(u,d,c.get(u,d));Ovt(a,h,p,o),Ivt(a,l,s,o,h)}this.n=a,this.e=l,this.d=s,this.V=o}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let e=this.n,r=this.e,i=this.d,a=new an(e,e),o,s;for(o=0;o<e;o++){for(s=0;s<e;s++)a.set(o,s,0);a.set(o,o,i[o]),r[o]>0?a.set(o,o+1,r[o]):r[o]<0&&a.set(o,o-1,r[o])}return a}}function Pvt(n,e,r,i){let a,o,s,l,c,u,d,f;for(c=0;c<n;c++)r[c]=i.get(n-1,c);for(l=n-1;l>0;l--){for(f=0,s=0,u=0;u<l;u++)f=f+Math.abs(r[u]);if(f===0)for(e[l]=r[l-1],c=0;c<l;c++)r[c]=i.get(l-1,c),i.set(l,c,0),i.set(c,l,0);else{for(u=0;u<l;u++)r[u]/=f,s+=r[u]*r[u];for(a=r[l-1],o=Math.sqrt(s),a>0&&(o=-o),e[l]=f*o,s=s-a*o,r[l-1]=a-o,c=0;c<l;c++)e[c]=0;for(c=0;c<l;c++){for(a=r[c],i.set(c,l,a),o=e[c]+i.get(c,c)*a,u=c+1;u<=l-1;u++)o+=i.get(u,c)*r[u],e[u]+=i.get(u,c)*a;e[c]=o}for(a=0,c=0;c<l;c++)e[c]/=s,a+=e[c]*r[c];for(d=a/(s+s),c=0;c<l;c++)e[c]-=d*r[c];for(c=0;c<l;c++){for(a=r[c],o=e[c],u=c;u<=l-1;u++)i.set(u,c,i.get(u,c)-(a*e[u]+o*r[u]));r[c]=i.get(l-1,c),i.set(l,c,0)}}r[l]=s}for(l=0;l<n-1;l++){if(i.set(n-1,l,i.get(l,l)),i.set(l,l,1),s=r[l+1],s!==0){for(u=0;u<=l;u++)r[u]=i.get(u,l+1)/s;for(c=0;c<=l;c++){for(o=0,u=0;u<=l;u++)o+=i.get(u,l+1)*i.get(u,c);for(u=0;u<=l;u++)i.set(u,c,i.get(u,c)-o*r[u])}}for(u=0;u<=l;u++)i.set(u,l+1,0)}for(c=0;c<n;c++)r[c]=i.get(n-1,c),i.set(n-1,c,0);i.set(n-1,n-1,1),e[0]=0}function Nvt(n,e,r,i){let a,o,s,l,c,u,d,f,h,p,g,m,v,y,b,x;for(s=1;s<n;s++)e[s-1]=e[s];e[n-1]=0;let _=0,S=0,M=Number.EPSILON;for(u=0;u<n;u++){for(S=Math.max(S,Math.abs(r[u])+Math.abs(e[u])),d=u;d<n&&!(Math.abs(e[d])<=M*S);)d++;if(d>u)do{for(a=r[u],f=(r[u+1]-a)/(2*e[u]),h=Yh(f,1),f<0&&(h=-h),r[u]=e[u]/(f+h),r[u+1]=e[u]*(f+h),p=r[u+1],o=a-r[u],s=u+2;s<n;s++)r[s]-=o;for(_=_+o,f=r[d],g=1,m=g,v=g,y=e[u+1],b=0,x=0,s=d-1;s>=u;s--)for(v=m,m=g,x=b,a=g*e[s],o=g*f,h=Yh(f,e[s]),e[s+1]=b*h,b=e[s]/h,g=f/h,f=g*r[s]-b*a,r[s+1]=o+b*(g*a+b*r[s]),c=0;c<n;c++)o=i.get(c,s+1),i.set(c,s+1,b*i.get(c,s)+g*o),i.set(c,s,g*i.get(c,s)-b*o);f=-b*x*v*y*e[u]/p,e[u]=b*f,r[u]=g*f}while(Math.abs(e[u])>M*S);r[u]=r[u]+_,e[u]=0}for(s=0;s<n-1;s++){for(c=s,f=r[s],l=s+1;l<n;l++)r[l]<f&&(c=l,f=r[l]);if(c!==s)for(r[c]=r[s],r[s]=f,l=0;l<n;l++)f=i.get(l,s),i.set(l,s,i.get(l,c)),i.set(l,c,f)}}function Ovt(n,e,r,i){let a=0,o=n-1,s,l,c,u,d,f,h;for(f=a+1;f<=o-1;f++){for(h=0,u=f;u<=o;u++)h=h+Math.abs(e.get(u,f-1));if(h!==0){for(c=0,u=o;u>=f;u--)r[u]=e.get(u,f-1)/h,c+=r[u]*r[u];for(l=Math.sqrt(c),r[f]>0&&(l=-l),c=c-r[f]*l,r[f]=r[f]-l,d=f;d<n;d++){for(s=0,u=o;u>=f;u--)s+=r[u]*e.get(u,d);for(s=s/c,u=f;u<=o;u++)e.set(u,d,e.get(u,d)-s*r[u])}for(u=0;u<=o;u++){for(s=0,d=o;d>=f;d--)s+=r[d]*e.get(u,d);for(s=s/c,d=f;d<=o;d++)e.set(u,d,e.get(u,d)-s*r[d])}r[f]=h*r[f],e.set(f,f-1,h*l)}}for(u=0;u<n;u++)for(d=0;d<n;d++)i.set(u,d,u===d?1:0);for(f=o-1;f>=a+1;f--)if(e.get(f,f-1)!==0){for(u=f+1;u<=o;u++)r[u]=e.get(u,f-1);for(d=f;d<=o;d++){for(l=0,u=f;u<=o;u++)l+=r[u]*i.get(u,d);for(l=l/r[f]/e.get(f,f-1),u=f;u<=o;u++)i.set(u,d,i.get(u,d)+l*r[u])}}}function Ivt(n,e,r,i,a){let o=n-1,s=0,l=n-1,c=Number.EPSILON,u=0,d=0,f=0,h=0,p=0,g=0,m=0,v=0,y,b,x,_,S,M,E,T,P,A,N,O,I,D,k;for(y=0;y<n;y++)for((y<s||y>l)&&(r[y]=a.get(y,y),e[y]=0),b=Math.max(y-1,0);b<n;b++)d=d+Math.abs(a.get(y,b));for(;o>=s;){for(_=o;_>s&&(g=Math.abs(a.get(_-1,_-1))+Math.abs(a.get(_,_)),g===0&&(g=d),!(Math.abs(a.get(_,_-1))<c*g));)_--;if(_===o)a.set(o,o,a.get(o,o)+u),r[o]=a.get(o,o),e[o]=0,o--,v=0;else if(_===o-1){if(E=a.get(o,o-1)*a.get(o-1,o),f=(a.get(o-1,o-1)-a.get(o,o))/2,h=f*f+E,m=Math.sqrt(Math.abs(h)),a.set(o,o,a.get(o,o)+u),a.set(o-1,o-1,a.get(o-1,o-1)+u),T=a.get(o,o),h>=0){for(m=f>=0?f+m:f-m,r[o-1]=T+m,r[o]=r[o-1],m!==0&&(r[o]=T-E/m),e[o-1]=0,e[o]=0,T=a.get(o,o-1),g=Math.abs(T)+Math.abs(m),f=T/g,h=m/g,p=Math.sqrt(f*f+h*h),f=f/p,h=h/p,b=o-1;b<n;b++)m=a.get(o-1,b),a.set(o-1,b,h*m+f*a.get(o,b)),a.set(o,b,h*a.get(o,b)-f*m);for(y=0;y<=o;y++)m=a.get(y,o-1),a.set(y,o-1,h*m+f*a.get(y,o)),a.set(y,o,h*a.get(y,o)-f*m);for(y=s;y<=l;y++)m=i.get(y,o-1),i.set(y,o-1,h*m+f*i.get(y,o)),i.set(y,o,h*i.get(y,o)-f*m)}else r[o-1]=T+f,r[o]=T+f,e[o-1]=m,e[o]=-m;o=o-2,v=0}else{if(T=a.get(o,o),P=0,E=0,_<o&&(P=a.get(o-1,o-1),E=a.get(o,o-1)*a.get(o-1,o)),v===10){for(u+=T,y=s;y<=o;y++)a.set(y,y,a.get(y,y)-T);g=Math.abs(a.get(o,o-1))+Math.abs(a.get(o-1,o-2)),T=P=.75*g,E=-.4375*g*g}if(v===30&&(g=(P-T)/2,g=g*g+E,g>0)){for(g=Math.sqrt(g),P<T&&(g=-g),g=T-E/((P-T)/2+g),y=s;y<=o;y++)a.set(y,y,a.get(y,y)-g);u+=g,T=P=E=.964}for(v=v+1,S=o-2;S>=_&&(m=a.get(S,S),p=T-m,g=P-m,f=(p*g-E)/a.get(S+1,S)+a.get(S,S+1),h=a.get(S+1,S+1)-m-p-g,p=a.get(S+2,S+1),g=Math.abs(f)+Math.abs(h)+Math.abs(p),f=f/g,h=h/g,p=p/g,!(S===_||Math.abs(a.get(S,S-1))*(Math.abs(h)+Math.abs(p))<c*(Math.abs(f)*(Math.abs(a.get(S-1,S-1))+Math.abs(m)+Math.abs(a.get(S+1,S+1))))));)S--;for(y=S+2;y<=o;y++)a.set(y,y-2,0),y>S+2&&a.set(y,y-3,0);for(x=S;x<=o-1&&(D=x!==o-1,x!==S&&(f=a.get(x,x-1),h=a.get(x+1,x-1),p=D?a.get(x+2,x-1):0,T=Math.abs(f)+Math.abs(h)+Math.abs(p),T!==0&&(f=f/T,h=h/T,p=p/T)),T!==0);x++)if(g=Math.sqrt(f*f+h*h+p*p),f<0&&(g=-g),g!==0){for(x!==S?a.set(x,x-1,-g*T):_!==S&&a.set(x,x-1,-a.get(x,x-1)),f=f+g,T=f/g,P=h/g,m=p/g,h=h/f,p=p/f,b=x;b<n;b++)f=a.get(x,b)+h*a.get(x+1,b),D&&(f=f+p*a.get(x+2,b),a.set(x+2,b,a.get(x+2,b)-f*m)),a.set(x,b,a.get(x,b)-f*T),a.set(x+1,b,a.get(x+1,b)-f*P);for(y=0;y<=Math.min(o,x+3);y++)f=T*a.get(y,x)+P*a.get(y,x+1),D&&(f=f+m*a.get(y,x+2),a.set(y,x+2,a.get(y,x+2)-f*p)),a.set(y,x,a.get(y,x)-f),a.set(y,x+1,a.get(y,x+1)-f*h);for(y=s;y<=l;y++)f=T*i.get(y,x)+P*i.get(y,x+1),D&&(f=f+m*i.get(y,x+2),i.set(y,x+2,i.get(y,x+2)-f*p)),i.set(y,x,i.get(y,x)-f),i.set(y,x+1,i.get(y,x+1)-f*h)}}}if(d!==0){for(o=n-1;o>=0;o--)if(f=r[o],h=e[o],h===0)for(_=o,a.set(o,o,1),y=o-1;y>=0;y--){for(E=a.get(y,y)-f,p=0,b=_;b<=o;b++)p=p+a.get(y,b)*a.get(b,o);if(e[y]<0)m=E,g=p;else if(_=y,e[y]===0?a.set(y,o,E!==0?-p/E:-p/(c*d)):(T=a.get(y,y+1),P=a.get(y+1,y),h=(r[y]-f)*(r[y]-f)+e[y]*e[y],M=(T*g-m*p)/h,a.set(y,o,M),a.set(y+1,o,Math.abs(T)>Math.abs(m)?(-p-E*M)/T:(-g-P*M)/m)),M=Math.abs(a.get(y,o)),c*M*M>1)for(b=y;b<=o;b++)a.set(b,o,a.get(b,o)/M)}else if(h<0)for(_=o-1,Math.abs(a.get(o,o-1))>Math.abs(a.get(o-1,o))?(a.set(o-1,o-1,h/a.get(o,o-1)),a.set(o-1,o,-(a.get(o,o)-f)/a.get(o,o-1))):(k=SA(0,-a.get(o-1,o),a.get(o-1,o-1)-f,h),a.set(o-1,o-1,k[0]),a.set(o-1,o,k[1])),a.set(o,o-1,0),a.set(o,o,1),y=o-2;y>=0;y--){for(A=0,N=0,b=_;b<=o;b++)A=A+a.get(y,b)*a.get(b,o-1),N=N+a.get(y,b)*a.get(b,o);if(E=a.get(y,y)-f,e[y]<0)m=E,p=A,g=N;else if(_=y,e[y]===0?(k=SA(-A,-N,E,h),a.set(y,o-1,k[0]),a.set(y,o,k[1])):(T=a.get(y,y+1),P=a.get(y+1,y),O=(r[y]-f)*(r[y]-f)+e[y]*e[y]-h*h,I=(r[y]-f)*2*h,O===0&&I===0&&(O=c*d*(Math.abs(E)+Math.abs(h)+Math.abs(T)+Math.abs(P)+Math.abs(m))),k=SA(T*p-m*A+h*N,T*g-m*N-h*A,O,I),a.set(y,o-1,k[0]),a.set(y,o,k[1]),Math.abs(T)>Math.abs(m)+Math.abs(h)?(a.set(y+1,o-1,(-A-E*a.get(y,o-1)+h*a.get(y,o))/T),a.set(y+1,o,(-N-E*a.get(y,o)-h*a.get(y,o-1))/T)):(k=SA(-p-P*a.get(y,o-1),-g-P*a.get(y,o),m,h),a.set(y+1,o-1,k[0]),a.set(y+1,o,k[1]))),M=Math.max(Math.abs(a.get(y,o-1)),Math.abs(a.get(y,o))),c*M*M>1)for(b=y;b<=o;b++)a.set(b,o-1,a.get(b,o-1)/M),a.set(b,o,a.get(b,o)/M)}for(y=0;y<n;y++)if(y<s||y>l)for(b=y;b<n;b++)i.set(y,b,a.get(y,b));for(b=n-1;b>=s;b--)for(y=s;y<=l;y++){for(m=0,x=s;x<=Math.min(b,l);x++)m=m+i.get(y,x)*a.get(x,b);i.set(y,b,m)}}}function SA(n,e,r,i){let a,o;return Math.abs(r)>Math.abs(i)?(a=i/r,o=r+a*i,[(n+a*e)/o,(e-a*n)/o]):(a=r/i,o=i+a*r,[(a*n+e)/o,(a*e-n)/o])}class nMe{constructor(e){if(e=jc.checkMatrix(e),!e.isSymmetric())throw new Error("Matrix is not symmetric");let r=e,i=r.rows,a=new an(i,i),o=!0,s,l,c;for(l=0;l<i;l++){let u=0;for(c=0;c<l;c++){let d=0;for(s=0;s<c;s++)d+=a.get(c,s)*a.get(l,s);d=(r.get(l,c)-d)/a.get(c,c),a.set(l,c,d),u=u+d*d}for(u=r.get(l,l)-u,o&&(o=u>0),a.set(l,l,Math.sqrt(Math.max(u,0))),c=l+1;c<i;c++)a.set(l,c,0)}this.L=a,this.positiveDefinite=o}isPositiveDefinite(){return this.positiveDefinite}solve(e){e=jc.checkMatrix(e);let r=this.L,i=r.rows;if(e.rows!==i)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let a=e.columns,o=e.clone(),s,l,c;for(c=0;c<i;c++)for(l=0;l<a;l++){for(s=0;s<c;s++)o.set(c,l,o.get(c,l)-o.get(s,l)*r.get(c,s));o.set(c,l,o.get(c,l)/r.get(c,c))}for(c=i-1;c>=0;c--)for(l=0;l<a;l++){for(s=c+1;s<i;s++)o.set(c,l,o.get(c,l)-o.get(s,l)*r.get(s,c));o.set(c,l,o.get(c,l)/r.get(c,c))}return o}get lowerTriangularMatrix(){return this.L}}class rMe{constructor(e,r={}){e=jc.checkMatrix(e);let{Y:i}=r;const{scaleScores:a=!1,maxIterations:o=1e3,terminationCriteria:s=1e-10}=r;let l;if(i){if(Vl.isAnyArray(i)&&typeof i[0]=="number"?i=an.columnVector(i):i=jc.checkMatrix(i),i.rows!==e.rows)throw new Error("Y should have the same number of rows as X");l=i.getColumnVector(0)}else l=e.getColumnVector(0);let c=1,u,d,f,h;for(let p=0;p<o&&c>s;p++)f=e.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),f=f.div(f.norm()),u=e.mmul(f).div(f.transpose().mmul(f).get(0,0)),p>0&&(c=u.clone().sub(h).pow(2).sum()),h=u.clone(),i?(d=i.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),d=d.div(d.norm()),l=i.mmul(d).div(d.transpose().mmul(d).get(0,0))):l=u;if(i){let p=e.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0));p=p.div(p.norm());let g=e.clone().sub(u.clone().mmul(p.transpose())),m=l.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),v=i.clone().sub(u.clone().mulS(m.get(0,0)).mmul(d.transpose()));this.t=u,this.p=p.transpose(),this.w=f.transpose(),this.q=d,this.u=l,this.s=u.transpose().mmul(u),this.xResidual=g,this.yResidual=v,this.betas=m}else this.w=f.transpose(),this.s=u.transpose().mmul(u).sqrt(),a?this.t=u.clone().div(this.s.get(0,0)):this.t=u,this.xResidual=e.sub(u.mmul(f.transpose()))}}Fr.AbstractMatrix=pr;Fr.CHO=nMe;Fr.CholeskyDecomposition=nMe;Fr.DistanceMatrix=ED;Fr.EVD=tMe;Fr.EigenvalueDecomposition=tMe;Fr.LU=CD;Fr.LuDecomposition=CD;var iMe=Fr.Matrix=an;Fr.MatrixColumnSelectionView=gvt;Fr.MatrixColumnView=pvt;Fr.MatrixFlipColumnView=mvt;Fr.MatrixFlipRowView=vvt;Fr.MatrixRowSelectionView=bvt;Fr.MatrixRowView=yvt;Fr.MatrixSelectionView=_P;Fr.MatrixSubView=xvt;Fr.MatrixTransposeView=_vt;Fr.NIPALS=rMe;Fr.Nipals=rMe;Fr.QR=WX;Fr.QrDecomposition=WX;Fr.SVD=Z_;var Dvt=Fr.SingularValueDecomposition=Z_;Fr.SymmetricMatrix=H0;Fr.WrapperMatrix1D=JCe;Fr.WrapperMatrix2D=jc;Fr.correlation=Rvt;Fr.covariance=Avt;var Mse=Fr.default=an;Fr.determinant=wP;Fr.inverse=Svt;Fr.linearDependencies=Mvt;Fr.pseudoInverse=Tvt;Fr.solve=eMe;Fr.wrap=wvt;const sm=iMe,aMe=Dvt;Mse.Matrix&&Mse.Matrix;const Lvt={center:[0,0],linkDistance:50};class oMe{constructor(e={}){this.options=e,this.id="mds",this.options=Object.assign(Object.assign({},Lvt),e)}execute(e,r){return vr(this,void 0,void 0,function*(){return this.genericMDSLayout(!1,e,r)})}assign(e,r){return vr(this,void 0,void 0,function*(){yield this.genericMDSLayout(!0,e,r)})}genericMDSLayout(e,r,i){return vr(this,void 0,void 0,function*(){const a=Object.assign(Object.assign({},this.options),i),{center:o=[0,0],linkDistance:s=50}=a,l=r.getAllNodes(),c=r.getAllEdges();if(!(l!=null&&l.length)||l.length===1)return Gy(r,e,o);const u=qCe({nodes:l,edges:c}),d=WCe(u);kvt(d);const f=Fgt(d,s),h=Fvt(f),p=[];return h.forEach((m,v)=>{const y=kc(l[v]);y.data.x=m[0]+o[0],y.data.y=m[1]+o[1],p.push(y)}),e&&p.forEach(m=>r.mergeNodeData(m.id,{x:m.data.x,y:m.data.y})),{nodes:p,edges:c}})}}const kvt=n=>{let e=-999999;n.forEach(r=>{r.forEach(i=>{i!==1/0&&e<i&&(e=i)})}),n.forEach((r,i)=>{r.forEach((a,o)=>{a===1/0&&(n[i][o]=e)})})},Fvt=n=>{const r=sm.mul(sm.pow(n,2),-.5),i=r.mean("row"),a=r.mean("column"),o=r.mean();r.add(o).subRowVector(i).subColumnVector(a);const s=new aMe(r),l=sm.sqrt(s.diagonalMatrix).diagonal();return s.leftSingularVectors.toJSON().map(c=>sm.mul([c],[l]).toJSON()[0].splice(0,2))};function oH(n){return!!n.tick&&!!n.stop}const $vt={gForce:!0,force2:!0,d3force:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0},Bvt={center:[0,0],comboPadding:10,treeKey:"combo"};class zvt{constructor(e={}){this.options=e,this.id="comboCombined",this.options=Object.assign(Object.assign({},Bvt),e)}execute(e,r){return vr(this,void 0,void 0,function*(){return this.genericComboCombinedLayout(!1,e,r)})}assign(e,r){return vr(this,void 0,void 0,function*(){yield this.genericComboCombinedLayout(!0,e,r)})}genericComboCombinedLayout(e,r,i){return vr(this,void 0,void 0,function*(){const a=this.initVals(Object.assign(Object.assign({},this.options),i)),{center:o,treeKey:s,outerLayout:l}=a,c=r.getAllNodes().filter(T=>!T.data._isCombo),u=r.getAllNodes().filter(T=>T.data._isCombo),d=r.getAllEdges(),f=c==null?void 0:c.length;if(!f||f===1)return Gy(r,e,o);const h=[],p=new Map;c.forEach(T=>{p.set(T.id,T)});const g=new Map;u.forEach(T=>{g.set(T.id,T)});const m=new Map,v=this.getInnerGraphs(r,s,p,g,d,a,m);yield Promise.all(v);const y=new Map,b=[],x=new Map;let _=!0;r.getRoots(s).forEach(T=>{const P=m.get(T.id),A=g.get(T.id)||p.get(T.id),N={id:T.id,data:Object.assign(Object.assign({},T.data),{x:P.data.x||A.data.x,y:P.data.y||A.data.y,fx:P.data.fx||A.data.fx,fy:P.data.fy||A.data.fy,mass:P.data.mass||A.data.mass,size:P.data.size})};b.push(N),y.set(T.id,!0),!isNaN(N.data.x)&&N.data.x!==0&&!isNaN(N.data.y)&&N.data.y!==0?_=!1:(N.data.x=Math.random()*100,N.data.y=Math.random()*100),tH(r,[T],O=>{O.id!==T.id&&x.set(O.id,T.id)},"TB",s)});const S=[];d.forEach(T=>{const P=x.get(T.source)||T.source,A=x.get(T.target)||T.target;P!==A&&y.has(P)&&y.has(A)&&S.push({id:T.id,source:P,target:A,data:{}})});let M;if(b!=null&&b.length){if(b.length===1)b[0].data.x=o[0],b[0].data.y=o[1];else{const T=new zo({nodes:b,edges:S}),P=l||new KCe;_&&$vt[P.id]&&(yield(b.length<100?new oMe:new rH).assign(T));const A=Object.assign({center:o,kg:5,preventOverlap:!0,animate:!1},P.id==="force"?{gravity:1,factor:4,linkDistance:(N,O,I)=>{const D=Math.max(...O.data.size)||32,k=Math.max(...I.data.size)||32;return D/2+k/2+200}}:{});M=yield Tse(P,T,A)}m.forEach(T=>{var P;const A=M.nodes.find(I=>I.id===T.id);if(A){const{x:I,y:D}=A.data;T.data.visited=!0,T.data.x=I,T.data.y=D,h.push({id:T.id,data:{x:I,y:D}})}const{x:N,y:O}=T.data;(P=T.data.nodes)===null||P===void 0||P.forEach(I=>{h.push({id:I.id,data:{x:I.data.x+N,y:I.data.y+O}})})}),m.forEach(({data:T})=>{const{x:P,y:A,visited:N,nodes:O}=T;O==null||O.forEach(I=>{if(!N){const D=h.find(k=>k.id===I.id);D.data.x+=P||0,D.data.y+=A||0}})})}return e&&h.forEach(T=>{r.mergeNodeData(T.id,{x:T.data.x,y:T.data.y})}),{nodes:h,edges:d}})}initVals(e){const r=Object.assign({},e),{nodeSize:i,spacing:a,comboPadding:o}=e;let s,l;if(on(a)?l=()=>a:cn(a)?l=a:l=()=>0,r.spacing=l,!i)s=u=>{const d=l(u);return u.size?Jh(u.size)?((u.size[0]>u.size[1]?u.size[0]:u.size[1])+d)/2:Xa(u.size)?((u.size.width>u.size.height?u.size.width:u.size.height)+d)/2:(u.size+d)/2:32+d/2};else if(cn(i))s=u=>{const d=i(u),f=l(u);return Jh(u.size)?((u.size[0]>u.size[1]?u.size[0]:u.size[1])+f)/2:((d||32)+f)/2};else if(Jh(i)){const d=(i[0]>i[1]?i[0]:i[1])/2;s=f=>d+l(f)/2}else{const u=i/2;s=d=>u+l(d)/2}r.nodeSize=s;let c;return on(o)?c=()=>o:Jh(o)?c=()=>Math.max.apply(null,o):cn(o)?c=o:c=()=>0,r.comboPadding=c,r}getInnerGraphs(e,r,i,a,o,s,l){const{nodeSize:c,comboPadding:u,spacing:d,innerLayout:f}=s,h=f||new rH({}),p={center:[0,0],preventOverlap:!0,nodeSpacing:d},g=[],m=v=>{let y=(u==null?void 0:u(v))||10;return Jh(y)&&(y=Math.max(...y)),{size:y?[y*2,y*2]:[30,30],padding:y}};return e.getRoots(r).forEach(v=>{l.set(v.id,{id:v.id,data:{nodes:[],size:m(v).size}});let y=Promise.resolve();tH(e,[v],b=>{var x;if(!b.data._isCombo)return;const{size:_,padding:S}=m(b);if(!(!((x=e.getChildren(b.id,r))===null||x===void 0)&&x.length))l.set(b.id,{id:b.id,data:Object.assign(Object.assign({},b.data),{size:_})});else{const M=l.get(b.id);l.set(b.id,{id:b.id,data:Object.assign({nodes:[]},M==null?void 0:M.data)});const E=new Map,T=e.getChildren(b.id,r).map(N=>{if(N.data._isCombo)return l.has(N.id)||l.set(N.id,{id:N.id,data:Object.assign({},N.data)}),E.set(N.id,!0),l.get(N.id);const O=i.get(N.id)||a.get(N.id);return E.set(N.id,!0),{id:N.id,data:Object.assign(Object.assign({},O.data),N.data)}}),P={nodes:T,edges:o.filter(N=>E.has(N.source)&&E.has(N.target))};let A=1/0;T.forEach(N=>{var O;let{size:I}=N.data;I||(I=((O=l.get(N.id))===null||O===void 0?void 0:O.data.size)||(c==null?void 0:c(N))||[30,30]),on(I)&&(I=[I,I]);const[D,k]=I;A>D&&(A=D),A>k&&(A=k),N.data.size=I}),y=y.then(()=>vr(this,void 0,void 0,function*(){const N=new zo(P);yield Tse(h,N,p,!0);const{minX:O,minY:I,maxX:D,maxY:k}=$gt(T),$={x:(D+O)/2,y:(k+I)/2};P.nodes.forEach(F=>{F.data.x-=$.x,F.data.y-=$.y});const B=[Math.max(D-O,A)+S*2,Math.max(k-I,A)+S*2];l.get(b.id).data.size=B,l.get(b.id).data.nodes=T}))}return!0},"BT",r),g.push(y)}),g}}function Tse(n,e,r,i){var a;return vr(this,void 0,void 0,function*(){return oH(n)?(n.execute(e,r),n.stop(),n.tick((a=r.iterations)!==null&&a!==void 0?a:300)):i?yield n.assign(e,r):yield n.execute(e,r)})}function Uvt(n,e){var r,i=1;n==null&&(n=0),e==null&&(e=0);function a(){var o,s=r.length,l,c=0,u=0;for(o=0;o<s;++o)l=r[o],c+=l.x,u+=l.y;for(c=(c/s-n)*i,u=(u/s-e)*i,o=0;o<s;++o)l=r[o],l.x-=c,l.y-=u}return a.initialize=function(o){r=o},a.x=function(o){return arguments.length?(n=+o,a):n},a.y=function(o){return arguments.length?(e=+o,a):e},a.strength=function(o){return arguments.length?(i=+o,a):i},a}function Do(n){return function(){return n}}function lm(n){return(n()-.5)*1e-6}function Vvt(n){return n.x+n.vx}function Gvt(n){return n.y+n.vy}function jvt(n){var e,r,i,a=1,o=1;typeof n!="function"&&(n=Do(n==null?1:+n));function s(){for(var u,d=e.length,f,h,p,g,m,v,y=0;y<o;++y)for(f=LM(e,Vvt,Gvt).visitAfter(l),u=0;u<d;++u)h=e[u],m=r[h.index],v=m*m,p=h.x+h.vx,g=h.y+h.vy,f.visit(b);function b(x,_,S,M,E){var T=x.data,P=x.r,A=m+P;if(T){if(T.index>h.index){var N=p-T.x-T.vx,O=g-T.y-T.vy,I=N*N+O*O;I<A*A&&(N===0&&(N=lm(i),I+=N*N),O===0&&(O=lm(i),I+=O*O),I=(A-(I=Math.sqrt(I)))/I*a,h.vx+=(N*=I)*(A=(P*=P)/(v+P)),h.vy+=(O*=I)*A,T.vx-=N*(A=1-A),T.vy-=O*A)}return}return _>p+A||M<p-A||S>g+A||E<g-A}}function l(u){if(u.data)return u.r=r[u.data.index];for(var d=u.r=0;d<4;++d)u[d]&&u[d].r>u.r&&(u.r=u[d].r)}function c(){if(e){var u,d=e.length,f;for(r=new Array(d),u=0;u<d;++u)f=e[u],r[f.index]=+n(f,u,e)}}return s.initialize=function(u,d){e=u,i=d,c()},s.iterations=function(u){return arguments.length?(o=+u,s):o},s.strength=function(u){return arguments.length?(a=+u,s):a},s.radius=function(u){return arguments.length?(n=typeof u=="function"?u:Do(+u),c(),s):n},s}function Hvt(n){return n.index}function Ase(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function Wvt(n){var e=Hvt,r=f,i,a=Do(30),o,s,l,c,u,d=1;n==null&&(n=[]);function f(v){return 1/Math.min(l[v.source.index],l[v.target.index])}function h(v){for(var y=0,b=n.length;y<d;++y)for(var x=0,_,S,M,E,T,P,A;x<b;++x)_=n[x],S=_.source,M=_.target,E=M.x+M.vx-S.x-S.vx||lm(u),T=M.y+M.vy-S.y-S.vy||lm(u),P=Math.sqrt(E*E+T*T),P=(P-o[x])/P*v*i[x],E*=P,T*=P,M.vx-=E*(A=c[x]),M.vy-=T*A,S.vx+=E*(A=1-A),S.vy+=T*A}function p(){if(s){var v,y=s.length,b=n.length,x=new Map(s.map((S,M)=>[e(S,M,s),S])),_;for(v=0,l=new Array(y);v<b;++v)_=n[v],_.index=v,typeof _.source!="object"&&(_.source=Ase(x,_.source)),typeof _.target!="object"&&(_.target=Ase(x,_.target)),l[_.source.index]=(l[_.source.index]||0)+1,l[_.target.index]=(l[_.target.index]||0)+1;for(v=0,c=new Array(b);v<b;++v)_=n[v],c[v]=l[_.source.index]/(l[_.source.index]+l[_.target.index]);i=new Array(b),g(),o=new Array(b),m()}}function g(){if(s)for(var v=0,y=n.length;v<y;++v)i[v]=+r(n[v],v,n)}function m(){if(s)for(var v=0,y=n.length;v<y;++v)o[v]=+a(n[v],v,n)}return h.initialize=function(v,y){s=v,u=y,p()},h.links=function(v){return arguments.length?(n=v,p(),h):n},h.id=function(v){return arguments.length?(e=v,h):e},h.iterations=function(v){return arguments.length?(d=+v,h):d},h.strength=function(v){return arguments.length?(r=typeof v=="function"?v:Do(+v),g(),h):r},h.distance=function(v){return arguments.length?(a=typeof v=="function"?v:Do(+v),m(),h):a},h}var qvt={value:()=>{}};function qX(){for(var n=0,e=arguments.length,r={},i;n<e;++n){if(!(i=arguments[n]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new SP(r)}function SP(n){this._=n}function Yvt(n,e){return n.trim().split(/^|\s+/).map(function(r){var i="",a=r.indexOf(".");if(a>=0&&(i=r.slice(a+1),r=r.slice(0,a)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}SP.prototype=qX.prototype={constructor:SP,on:function(n,e){var r=this._,i=Yvt(n+"",r),a,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((a=(n=i[o]).type)&&(a=Xvt(r[a],n.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(a=(n=i[o]).type)r[a]=Rse(r[a],n.name,e);else if(e==null)for(a in r)r[a]=Rse(r[a],n.name,null);return this},copy:function(){var n={},e=this._;for(var r in e)n[r]=e[r].slice();return new SP(n)},call:function(n,e){if((a=arguments.length-2)>0)for(var r=new Array(a),i=0,a,o;i<a;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],i=0,a=o.length;i<a;++i)o[i].value.apply(e,r)},apply:function(n,e,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],a=0,o=i.length;a<o;++a)i[a].value.apply(e,r)}};function Xvt(n,e){for(var r=0,i=n.length,a;r<i;++r)if((a=n[r]).name===e)return a.value}function Rse(n,e,r){for(var i=0,a=n.length;i<a;++i)if(n[i].name===e){n[i]=qvt,n=n.slice(0,i).concat(n.slice(i+1));break}return r!=null&&n.push({name:e,value:r}),n}var Wx=0,s2=0,pS=0,sMe=1e3,vO,l2,yO=0,wy=0,MD=0,sC=typeof performance=="object"&&performance.now?performance:Date,lMe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function cMe(){return wy||(lMe(Kvt),wy=sC.now()+MD)}function Kvt(){wy=0}function sH(){this._call=this._time=this._next=null}sH.prototype=YX.prototype={constructor:sH,restart:function(n,e,r){if(typeof n!="function")throw new TypeError("callback is not a function");r=(r==null?cMe():+r)+(e==null?0:+e),!this._next&&l2!==this&&(l2?l2._next=this:vO=this,l2=this),this._call=n,this._time=r,lH()},stop:function(){this._call&&(this._call=null,this._time=1/0,lH())}};function YX(n,e,r){var i=new sH;return i.restart(n,e,r),i}function Zvt(){cMe(),++Wx;for(var n=vO,e;n;)(e=wy-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Wx}function Pse(){wy=(yO=sC.now())+MD,Wx=s2=0;try{Zvt()}finally{Wx=0,Jvt(),wy=0}}function Qvt(){var n=sC.now(),e=n-yO;e>sMe&&(MD-=e,yO=n)}function Jvt(){for(var n,e=vO,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(r=e._next,e._next=null,e=n?n._next=r:vO=r);l2=n,lH(i)}function lH(n){if(!Wx){s2&&(s2=clearTimeout(s2));var e=n-wy;e>24?(n<1/0&&(s2=setTimeout(Pse,n-sC.now()-MD)),pS&&(pS=clearInterval(pS))):(pS||(yO=sC.now(),pS=setInterval(Qvt,sMe)),Wx=1,lMe(Pse))}}const e0t=1664525,t0t=1013904223,Nse=4294967296;function n0t(){let n=1;return()=>(n=(e0t*n+t0t)%Nse)/Nse}function r0t(n){return n.x}function i0t(n){return n.y}var a0t=10,o0t=Math.PI*(3-Math.sqrt(5));function s0t(n){var e,r=1,i=.001,a=1-Math.pow(i,1/300),o=0,s=.6,l=new Map,c=YX(f),u=qX("tick","end"),d=n0t();n==null&&(n=[]);function f(){h(),u.call("tick",e),r<i&&(c.stop(),u.call("end",e))}function h(m){var v,y=n.length,b;m===void 0&&(m=1);for(var x=0;x<m;++x)for(r+=(o-r)*a,l.forEach(function(_){_(r)}),v=0;v<y;++v)b=n[v],b.fx==null?b.x+=b.vx*=s:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=s:(b.y=b.fy,b.vy=0);return e}function p(){for(var m=0,v=n.length,y;m<v;++m){if(y=n[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var b=a0t*Math.sqrt(.5+m),x=m*o0t;y.x=b*Math.cos(x),y.y=b*Math.sin(x)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function g(m){return m.initialize&&m.initialize(n,d),m}return p(),e={tick:h,restart:function(){return c.restart(f),e},stop:function(){return c.stop(),e},nodes:function(m){return arguments.length?(n=m,p(),l.forEach(g),e):n},alpha:function(m){return arguments.length?(r=+m,e):r},alphaMin:function(m){return arguments.length?(i=+m,e):i},alphaDecay:function(m){return arguments.length?(a=+m,e):+a},alphaTarget:function(m){return arguments.length?(o=+m,e):o},velocityDecay:function(m){return arguments.length?(s=1-m,e):1-s},randomSource:function(m){return arguments.length?(d=m,l.forEach(g),e):d},force:function(m,v){return arguments.length>1?(v==null?l.delete(m):l.set(m,g(v)),e):l.get(m)},find:function(m,v,y){var b=0,x=n.length,_,S,M,E,T;for(y==null?y=1/0:y*=y,b=0;b<x;++b)E=n[b],_=m-E.x,S=v-E.y,M=_*_+S*S,M<y&&(T=E,y=M);return T},on:function(m,v){return arguments.length>1?(u.on(m,v),e):u.on(m)}}}function l0t(){var n,e,r,i,a=Do(-30),o,s=1,l=1/0,c=.81;function u(p){var g,m=n.length,v=LM(n,r0t,i0t).visitAfter(f);for(i=p,g=0;g<m;++g)e=n[g],v.visit(h)}function d(){if(n){var p,g=n.length,m;for(o=new Array(g),p=0;p<g;++p)m=n[p],o[m.index]=+a(m,p,n)}}function f(p){var g=0,m,v,y=0,b,x,_;if(p.length){for(b=x=_=0;_<4;++_)(m=p[_])&&(v=Math.abs(m.value))&&(g+=m.value,y+=v,b+=v*m.x,x+=v*m.y);p.x=b/y,p.y=x/y}else{m=p,m.x=m.data.x,m.y=m.data.y;do g+=o[m.data.index];while(m=m.next)}p.value=g}function h(p,g,m,v){if(!p.value)return!0;var y=p.x-e.x,b=p.y-e.y,x=v-g,_=y*y+b*b;if(x*x/c<_)return _<l&&(y===0&&(y=lm(r),_+=y*y),b===0&&(b=lm(r),_+=b*b),_<s&&(_=Math.sqrt(s*_)),e.vx+=y*p.value*i/_,e.vy+=b*p.value*i/_),!0;if(p.length||_>=l)return;(p.data!==e||p.next)&&(y===0&&(y=lm(r),_+=y*y),b===0&&(b=lm(r),_+=b*b),_<s&&(_=Math.sqrt(s*_)));do p.data!==e&&(x=o[p.data.index]*i/_,e.vx+=y*x,e.vy+=b*x);while(p=p.next)}return u.initialize=function(p,g){n=p,r=g,d()},u.strength=function(p){return arguments.length?(a=typeof p=="function"?p:Do(+p),d(),u):a},u.distanceMin=function(p){return arguments.length?(s=p*p,u):Math.sqrt(s)},u.distanceMax=function(p){return arguments.length?(l=p*p,u):Math.sqrt(l)},u.theta=function(p){return arguments.length?(c=p*p,u):Math.sqrt(c)},u}function c0t(n,e,r){var i,a=Do(.1),o,s;typeof n!="function"&&(n=Do(+n)),e==null&&(e=0),r==null&&(r=0);function l(u){for(var d=0,f=i.length;d<f;++d){var h=i[d],p=h.x-e||1e-6,g=h.y-r||1e-6,m=Math.sqrt(p*p+g*g),v=(s[d]-m)*o[d]*u/m;h.vx+=p*v,h.vy+=g*v}}function c(){if(i){var u,d=i.length;for(o=new Array(d),s=new Array(d),u=0;u<d;++u)s[u]=+n(i[u],u,i),o[u]=isNaN(s[u])?0:+a(i[u],u,i)}}return l.initialize=function(u){i=u,c()},l.strength=function(u){return arguments.length?(a=typeof u=="function"?u:Do(+u),c(),l):a},l.radius=function(u){return arguments.length?(n=typeof u=="function"?u:Do(+u),c(),l):n},l.x=function(u){return arguments.length?(e=+u,l):e},l.y=function(u){return arguments.length?(r=+u,l):r},l}function u0t(n){var e=Do(.1),r,i,a;typeof n!="function"&&(n=Do(n==null?0:+n));function o(l){for(var c=0,u=r.length,d;c<u;++c)d=r[c],d.vx+=(a[c]-d.x)*i[c]*l}function s(){if(r){var l,c=r.length;for(i=new Array(c),a=new Array(c),l=0;l<c;++l)i[l]=isNaN(a[l]=+n(r[l],l,r))?0:+e(r[l],l,r)}}return o.initialize=function(l){r=l,s()},o.strength=function(l){return arguments.length?(e=typeof l=="function"?l:Do(+l),s(),o):e},o.x=function(l){return arguments.length?(n=typeof l=="function"?l:Do(+l),s(),o):n},o}function d0t(n){var e=Do(.1),r,i,a;typeof n!="function"&&(n=Do(n==null?0:+n));function o(l){for(var c=0,u=r.length,d;c<u;++c)d=r[c],d.vy+=(a[c]-d.y)*i[c]*l}function s(){if(r){var l,c=r.length;for(i=new Array(c),a=new Array(c),l=0;l<c;++l)i[l]=isNaN(a[l]=+n(r[l],l,r))?0:+e(r[l],l,r)}}return o.initialize=function(l){r=l,s()},o.strength=function(l){return arguments.length?(e=typeof l=="function"?l:Do(+l),s(),o):e},o.y=function(l){return arguments.length?(n=typeof l=="function"?l:Do(+l),s(),o):n},o}class f0t{constructor(e){this.id="d3-force",this.config={inputNodeAttrs:["x","y","vx","vy","fx","fy"],outputNodeAttrs:["x","y","vx","vy"],simulationAttrs:["alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","randomSource"]},this.forceMap={link:Wvt,manyBody:l0t,center:Uvt,collide:jvt,radial:c0t,x:u0t,y:d0t},this.options={link:{id:r=>r.id},manyBody:{},center:{x:0,y:0}},this.context={options:{},assign:!1,nodes:[],edges:[]},xl(this.options,e),this.options.forceSimulation&&(this.simulation=this.options.forceSimulation)}execute(e,r){return vr(this,void 0,void 0,function*(){return this.genericLayout(!1,e,r)})}assign(e,r){return vr(this,void 0,void 0,function*(){yield this.genericLayout(!0,e,r)})}stop(){this.simulation.stop()}tick(e){return this.simulation.tick(e),this.getResult()}restart(){this.simulation.restart()}setFixedPosition(e,r){const i=this.context.nodes.find(a=>a.id===e);i&&r.forEach((a,o)=>{if(typeof a=="number"||a===null){const s=["fx","fy","fz"][o];i[s]=a}})}getOptions(e){var r,i;const a=xl({},this.options,e);return a.collide&&((r=a.collide)===null||r===void 0?void 0:r.radius)===void 0&&(a.collide=a.collide||{},a.collide.radius=(i=a.nodeSize)!==null&&i!==void 0?i:10),a.iterations===void 0&&(a.link&&a.link.iterations===void 0&&(a.iterations=a.link.iterations),a.collide&&a.collide.iterations===void 0&&(a.iterations=a.collide.iterations)),this.context.options=a,a}genericLayout(e,r,i){var a;return vr(this,void 0,void 0,function*(){const o=this.getOptions(i),s=r.getAllNodes().map(({id:d,data:f})=>Object.assign(Object.assign({id:d},f),gy(f.data,this.config.inputNodeAttrs))),l=r.getAllEdges().map(d=>Object.assign({},d));Object.assign(this.context,{assign:e,nodes:s,edges:l,graph:r});const c=new Promise(d=>{this.resolver=d}),u=this.setSimulation(o);return u.nodes(s),(a=u.force("link"))===null||a===void 0||a.links(l),c})}getResult(){const{assign:e,nodes:r,edges:i,graph:a}=this.context,o=r.map(l=>({id:l.id,data:Object.assign(Object.assign({},l.data),gy(l,this.config.outputNodeAttrs))})),s=i.map(({id:l,source:c,target:u,data:d})=>({id:l,source:typeof c=="object"?c.id:c,target:typeof u=="object"?u.id:u,data:d}));return e&&o.forEach(l=>a.mergeNodeData(l.id,l.data)),{nodes:o,edges:s}}initSimulation(){return s0t()}setSimulation(e){const r=this.simulation||this.options.forceSimulation||this.initSimulation();return this.simulation||(this.simulation=r.on("tick",()=>{var i;return(i=e.onTick)===null||i===void 0?void 0:i.call(e,this.getResult())}).on("end",()=>{var i;return(i=this.resolver)===null||i===void 0?void 0:i.call(this,this.getResult())})),Ose(r,this.config.simulationAttrs.map(i=>[i,e[i]])),Object.entries(this.forceMap).forEach(([i,a])=>{const o=i;if(e[i]){let s=r.force(o);s||(s=a(),r.force(o,s)),Ose(s,Object.entries(e[o]))}else r.force(o,null)}),r}}const Ose=(n,e)=>e.reduce((r,[i,a])=>!r[i]||a===void 0?r:r[i].call(n,a),n);function h0t(n,e,r){var i,a=1;n==null&&(n=0),e==null&&(e=0),r==null&&(r=0);function o(){var s,l=i.length,c,u=0,d=0,f=0;for(s=0;s<l;++s)c=i[s],u+=c.x||0,d+=c.y||0,f+=c.z||0;for(u=(u/l-n)*a,d=(d/l-e)*a,f=(f/l-r)*a,s=0;s<l;++s)c=i[s],u&&(c.x-=u),d&&(c.y-=d),f&&(c.z-=f)}return o.initialize=function(s){i=s},o.x=function(s){return arguments.length?(n=+s,o):n},o.y=function(s){return arguments.length?(e=+s,o):e},o.z=function(s){return arguments.length?(r=+s,o):r},o.strength=function(s){return arguments.length?(a=+s,o):a},o}function p0t(n){const e=+this._x.call(null,n);return uMe(this.cover(e),e,n)}function uMe(n,e,r){if(isNaN(e))return n;var i,a=n._root,o={data:r},s=n._x0,l=n._x1,c,u,d,f,h;if(!a)return n._root=o,n;for(;a.length;)if((d=e>=(c=(s+l)/2))?s=c:l=c,i=a,!(a=a[f=+d]))return i[f]=o,n;if(u=+n._x.call(null,a.data),e===u)return o.next=a,i?i[f]=o:n._root=o,n;do i=i?i[f]=new Array(2):n._root=new Array(2),(d=e>=(c=(s+l)/2))?s=c:l=c;while((f=+d)==(h=+(u>=c)));return i[h]=a,i[f]=o,n}function g0t(n){Array.isArray(n)||(n=Array.from(n));const e=n.length,r=new Float64Array(e);let i=1/0,a=-1/0;for(let o=0,s;o<e;++o)isNaN(s=+this._x.call(null,n[o]))||(r[o]=s,s<i&&(i=s),s>a&&(a=s));if(i>a)return this;this.cover(i).cover(a);for(let o=0;o<e;++o)uMe(this,r[o],n[o]);return this}function m0t(n){if(isNaN(n=+n))return this;var e=this._x0,r=this._x1;if(isNaN(e))r=(e=Math.floor(n))+1;else{for(var i=r-e||1,a=this._root,o,s;e>n||n>=r;)switch(s=+(n<e),o=new Array(2),o[s]=a,a=o,i*=2,s){case 0:r=e+i;break;case 1:e=r-i;break}this._root&&this._root.length&&(this._root=a)}return this._x0=e,this._x1=r,this}function v0t(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function y0t(n){return arguments.length?this.cover(+n[0][0]).cover(+n[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function wp(n,e,r){this.node=n,this.x0=e,this.x1=r}function b0t(n,e){var r,i=this._x0,a,o,s=this._x1,l=[],c=this._root,u,d;for(c&&l.push(new wp(c,i,s)),e==null?e=1/0:(i=n-e,s=n+e);u=l.pop();)if(!(!(c=u.node)||(a=u.x0)>s||(o=u.x1)<i))if(c.length){var f=(a+o)/2;l.push(new wp(c[1],f,o),new wp(c[0],a,f)),(d=+(n>=f))&&(u=l[l.length-1],l[l.length-1]=l[l.length-1-d],l[l.length-1-d]=u)}else{var h=Math.abs(n-+this._x.call(null,c.data));h<e&&(e=h,i=n-h,s=n+h,r=c.data)}return r}function x0t(n){if(isNaN(c=+this._x.call(null,n)))return this;var e,r=this._root,i,a,o,s=this._x0,l=this._x1,c,u,d,f,h;if(!r)return this;if(r.length)for(;;){if((d=c>=(u=(s+l)/2))?s=u:l=u,e=r,!(r=r[f=+d]))return this;if(!r.length)break;e[f+1&1]&&(i=e,h=f)}for(;r.data!==n;)if(a=r,!(r=r.next))return this;return(o=r.next)&&delete r.next,a?(o?a.next=o:delete a.next,this):e?(o?e[f]=o:delete e[f],(r=e[0]||e[1])&&r===(e[1]||e[0])&&!r.length&&(i?i[h]=r:this._root=r),this):(this._root=o,this)}function _0t(n){for(var e=0,r=n.length;e<r;++e)this.remove(n[e]);return this}function w0t(){return this._root}function S0t(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function E0t(n){var e=[],r,i=this._root,a,o,s;for(i&&e.push(new wp(i,this._x0,this._x1));r=e.pop();)if(!n(i=r.node,o=r.x0,s=r.x1)&&i.length){var l=(o+s)/2;(a=i[1])&&e.push(new wp(a,l,s)),(a=i[0])&&e.push(new wp(a,o,l))}return this}function C0t(n){var e=[],r=[],i;for(this._root&&e.push(new wp(this._root,this._x0,this._x1));i=e.pop();){var a=i.node;if(a.length){var o,s=i.x0,l=i.x1,c=(s+l)/2;(o=a[0])&&e.push(new wp(o,s,c)),(o=a[1])&&e.push(new wp(o,c,l))}r.push(i)}for(;i=r.pop();)n(i.node,i.x0,i.x1);return this}function M0t(n){return n[0]}function T0t(n){return arguments.length?(this._x=n,this):this._x}function dMe(n,e){var r=new XX(e??M0t,NaN,NaN);return n==null?r:r.addAll(n)}function XX(n,e,r){this._x=n,this._x0=e,this._x1=r,this._root=void 0}function Ise(n){for(var e={data:n.data},r=e;n=n.next;)r=r.next={data:n.data};return e}var oc=dMe.prototype=XX.prototype;oc.copy=function(){var n=new XX(this._x,this._x0,this._x1),e=this._root,r,i;if(!e)return n;if(!e.length)return n._root=Ise(e),n;for(r=[{source:e,target:n._root=new Array(2)}];e=r.pop();)for(var a=0;a<2;++a)(i=e.source[a])&&(i.length?r.push({source:i,target:e.target[a]=new Array(2)}):e.target[a]=Ise(i));return n};oc.add=p0t;oc.addAll=g0t;oc.cover=m0t;oc.data=v0t;oc.extent=y0t;oc.find=b0t;oc.remove=x0t;oc.removeAll=_0t;oc.root=w0t;oc.size=S0t;oc.visit=E0t;oc.visitAfter=C0t;oc.x=T0t;function dp(n){return function(){return n}}function Xh(n){return(n()-.5)*1e-6}function A0t(n){return n.index}function Dse(n,e){var r=n.get(e);if(!r)throw new Error("node not found: "+e);return r}function R0t(n){var e=A0t,r=h,i,a=dp(30),o,s,l,c,u,d,f=1;n==null&&(n=[]);function h(y){return 1/Math.min(c[y.source.index],c[y.target.index])}function p(y){for(var b=0,x=n.length;b<f;++b)for(var _=0,S,M,E,T=0,P=0,A=0,N,O;_<x;++_)S=n[_],M=S.source,E=S.target,T=E.x+E.vx-M.x-M.vx||Xh(d),l>1&&(P=E.y+E.vy-M.y-M.vy||Xh(d)),l>2&&(A=E.z+E.vz-M.z-M.vz||Xh(d)),N=Math.sqrt(T*T+P*P+A*A),N=(N-o[_])/N*y*i[_],T*=N,P*=N,A*=N,E.vx-=T*(O=u[_]),l>1&&(E.vy-=P*O),l>2&&(E.vz-=A*O),M.vx+=T*(O=1-O),l>1&&(M.vy+=P*O),l>2&&(M.vz+=A*O)}function g(){if(s){var y,b=s.length,x=n.length,_=new Map(s.map((M,E)=>[e(M,E,s),M])),S;for(y=0,c=new Array(b);y<x;++y)S=n[y],S.index=y,typeof S.source!="object"&&(S.source=Dse(_,S.source)),typeof S.target!="object"&&(S.target=Dse(_,S.target)),c[S.source.index]=(c[S.source.index]||0)+1,c[S.target.index]=(c[S.target.index]||0)+1;for(y=0,u=new Array(x);y<x;++y)S=n[y],u[y]=c[S.source.index]/(c[S.source.index]+c[S.target.index]);i=new Array(x),m(),o=new Array(x),v()}}function m(){if(s)for(var y=0,b=n.length;y<b;++y)i[y]=+r(n[y],y,n)}function v(){if(s)for(var y=0,b=n.length;y<b;++y)o[y]=+a(n[y],y,n)}return p.initialize=function(y,...b){s=y,d=b.find(x=>typeof x=="function")||Math.random,l=b.find(x=>[1,2,3].includes(x))||2,g()},p.links=function(y){return arguments.length?(n=y,g(),p):n},p.id=function(y){return arguments.length?(e=y,p):e},p.iterations=function(y){return arguments.length?(f=+y,p):f},p.strength=function(y){return arguments.length?(r=typeof y=="function"?y:dp(+y),m(),p):r},p.distance=function(y){return arguments.length?(a=typeof y=="function"?y:dp(+y),v(),p):a},p}const P0t=1664525,N0t=1013904223,Lse=4294967296;function O0t(){let n=1;return()=>(n=(P0t*n+N0t)%Lse)/Lse}var kse=3;function UF(n){return n.x}function Fse(n){return n.y}function I0t(n){return n.z}var D0t=10,L0t=Math.PI*(3-Math.sqrt(5)),k0t=Math.PI*20/(9+Math.sqrt(221));function F0t(n,e){e=e||2;var r=Math.min(kse,Math.max(1,Math.round(e))),i,a=1,o=.001,s=1-Math.pow(o,1/300),l=0,c=.6,u=new Map,d=YX(p),f=qX("tick","end"),h=O0t();n==null&&(n=[]);function p(){g(),f.call("tick",i),a<o&&(d.stop(),f.call("end",i))}function g(y){var b,x=n.length,_;y===void 0&&(y=1);for(var S=0;S<y;++S)for(a+=(l-a)*s,u.forEach(function(M){M(a)}),b=0;b<x;++b)_=n[b],_.fx==null?_.x+=_.vx*=c:(_.x=_.fx,_.vx=0),r>1&&(_.fy==null?_.y+=_.vy*=c:(_.y=_.fy,_.vy=0)),r>2&&(_.fz==null?_.z+=_.vz*=c:(_.z=_.fz,_.vz=0));return i}function m(){for(var y=0,b=n.length,x;y<b;++y){if(x=n[y],x.index=y,x.fx!=null&&(x.x=x.fx),x.fy!=null&&(x.y=x.fy),x.fz!=null&&(x.z=x.fz),isNaN(x.x)||r>1&&isNaN(x.y)||r>2&&isNaN(x.z)){var _=D0t*(r>2?Math.cbrt(.5+y):r>1?Math.sqrt(.5+y):y),S=y*L0t,M=y*k0t;r===1?x.x=_:r===2?(x.x=_*Math.cos(S),x.y=_*Math.sin(S)):(x.x=_*Math.sin(S)*Math.cos(M),x.y=_*Math.cos(S),x.z=_*Math.sin(S)*Math.sin(M))}(isNaN(x.vx)||r>1&&isNaN(x.vy)||r>2&&isNaN(x.vz))&&(x.vx=0,r>1&&(x.vy=0),r>2&&(x.vz=0))}}function v(y){return y.initialize&&y.initialize(n,h,r),y}return m(),i={tick:g,restart:function(){return d.restart(p),i},stop:function(){return d.stop(),i},numDimensions:function(y){return arguments.length?(r=Math.min(kse,Math.max(1,Math.round(y))),u.forEach(v),i):r},nodes:function(y){return arguments.length?(n=y,m(),u.forEach(v),i):n},alpha:function(y){return arguments.length?(a=+y,i):a},alphaMin:function(y){return arguments.length?(o=+y,i):o},alphaDecay:function(y){return arguments.length?(s=+y,i):+s},alphaTarget:function(y){return arguments.length?(l=+y,i):l},velocityDecay:function(y){return arguments.length?(c=1-y,i):1-c},randomSource:function(y){return arguments.length?(h=y,u.forEach(v),i):h},force:function(y,b){return arguments.length>1?(b==null?u.delete(y):u.set(y,v(b)),i):u.get(y)},find:function(){var y=Array.prototype.slice.call(arguments),b=y.shift()||0,x=(r>1?y.shift():null)||0,_=(r>2?y.shift():null)||0,S=y.shift()||1/0,M=0,E=n.length,T,P,A,N,O,I;for(S*=S,M=0;M<E;++M)O=n[M],T=b-O.x,P=x-(O.y||0),A=_-(O.z||0),N=T*T+P*P+A*A,N<S&&(I=O,S=N);return I},on:function(y,b){return arguments.length>1?(f.on(y,b),i):f.on(y)}}}function $0t(){var n,e,r,i,a,o=dp(-30),s,l=1,c=1/0,u=.81;function d(g){var m,v=n.length,y=(e===1?dMe(n,UF):e===2?LM(n,UF,Fse):e===3?VX(n,UF,Fse,I0t):null).visitAfter(h);for(a=g,m=0;m<v;++m)r=n[m],y.visit(p)}function f(){if(n){var g,m=n.length,v;for(s=new Array(m),g=0;g<m;++g)v=n[g],s[v.index]=+o(v,g,n)}}function h(g){var m=0,v,y,b=0,x,_,S,M,E=g.length;if(E){for(x=_=S=M=0;M<E;++M)(v=g[M])&&(y=Math.abs(v.value))&&(m+=v.value,b+=y,x+=y*(v.x||0),_+=y*(v.y||0),S+=y*(v.z||0));m*=Math.sqrt(4/E),g.x=x/b,e>1&&(g.y=_/b),e>2&&(g.z=S/b)}else{v=g,v.x=v.data.x,e>1&&(v.y=v.data.y),e>2&&(v.z=v.data.z);do m+=s[v.data.index];while(v=v.next)}g.value=m}function p(g,m,v,y,b){if(!g.value)return!0;var x=[v,y,b][e-1],_=g.x-r.x,S=e>1?g.y-r.y:0,M=e>2?g.z-r.z:0,E=x-m,T=_*_+S*S+M*M;if(E*E/u<T)return T<c&&(_===0&&(_=Xh(i),T+=_*_),e>1&&S===0&&(S=Xh(i),T+=S*S),e>2&&M===0&&(M=Xh(i),T+=M*M),T<l&&(T=Math.sqrt(l*T)),r.vx+=_*g.value*a/T,e>1&&(r.vy+=S*g.value*a/T),e>2&&(r.vz+=M*g.value*a/T)),!0;if(g.length||T>=c)return;(g.data!==r||g.next)&&(_===0&&(_=Xh(i),T+=_*_),e>1&&S===0&&(S=Xh(i),T+=S*S),e>2&&M===0&&(M=Xh(i),T+=M*M),T<l&&(T=Math.sqrt(l*T)));do g.data!==r&&(E=s[g.data.index]*a/T,r.vx+=_*E,e>1&&(r.vy+=S*E),e>2&&(r.vz+=M*E));while(g=g.next)}return d.initialize=function(g,...m){n=g,i=m.find(v=>typeof v=="function")||Math.random,e=m.find(v=>[1,2,3].includes(v))||2,f()},d.strength=function(g){return arguments.length?(o=typeof g=="function"?g:dp(+g),f(),d):o},d.distanceMin=function(g){return arguments.length?(l=g*g,d):Math.sqrt(l)},d.distanceMax=function(g){return arguments.length?(c=g*g,d):Math.sqrt(c)},d.theta=function(g){return arguments.length?(u=g*g,d):Math.sqrt(u)},d}function B0t(n,e,r,i){var a,o,s=dp(.1),l,c;typeof n!="function"&&(n=dp(+n)),e==null&&(e=0),r==null&&(r=0),i==null&&(i=0);function u(f){for(var h=0,p=a.length;h<p;++h){var g=a[h],m=g.x-e||1e-6,v=(g.y||0)-r||1e-6,y=(g.z||0)-i||1e-6,b=Math.sqrt(m*m+v*v+y*y),x=(c[h]-b)*l[h]*f/b;g.vx+=m*x,o>1&&(g.vy+=v*x),o>2&&(g.vz+=y*x)}}function d(){if(a){var f,h=a.length;for(l=new Array(h),c=new Array(h),f=0;f<h;++f)c[f]=+n(a[f],f,a),l[f]=isNaN(c[f])?0:+s(a[f],f,a)}}return u.initialize=function(f,...h){a=f,o=h.find(p=>[1,2,3].includes(p))||2,d()},u.strength=function(f){return arguments.length?(s=typeof f=="function"?f:dp(+f),d(),u):s},u.radius=function(f){return arguments.length?(n=typeof f=="function"?f:dp(+f),d(),u):n},u.x=function(f){return arguments.length?(e=+f,u):e},u.y=function(f){return arguments.length?(r=+f,u):r},u.z=function(f){return arguments.length?(i=+f,u):i},u}function KX(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var VF,$se;function z0t(){if($se)return VF;$se=1;function n(){this.__data__=[],this.size=0}return VF=n,VF}var GF,Bse;function Q_(){if(Bse)return GF;Bse=1;function n(e,r){return e===r||e!==e&&r!==r}return GF=n,GF}var jF,zse;function TD(){if(zse)return jF;zse=1;var n=Q_();function e(r,i){for(var a=r.length;a--;)if(n(r[a][0],i))return a;return-1}return jF=e,jF}var HF,Use;function U0t(){if(Use)return HF;Use=1;var n=TD(),e=Array.prototype,r=e.splice;function i(a){var o=this.__data__,s=n(o,a);if(s<0)return!1;var l=o.length-1;return s==l?o.pop():r.call(o,s,1),--this.size,!0}return HF=i,HF}var WF,Vse;function V0t(){if(Vse)return WF;Vse=1;var n=TD();function e(r){var i=this.__data__,a=n(i,r);return a<0?void 0:i[a][1]}return WF=e,WF}var qF,Gse;function G0t(){if(Gse)return qF;Gse=1;var n=TD();function e(r){return n(this.__data__,r)>-1}return qF=e,qF}var YF,jse;function j0t(){if(jse)return YF;jse=1;var n=TD();function e(r,i){var a=this.__data__,o=n(a,r);return o<0?(++this.size,a.push([r,i])):a[o][1]=i,this}return YF=e,YF}var XF,Hse;function AD(){if(Hse)return XF;Hse=1;var n=z0t(),e=U0t(),r=V0t(),i=G0t(),a=j0t();function o(s){var l=-1,c=s==null?0:s.length;for(this.clear();++l<c;){var u=s[l];this.set(u[0],u[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=r,o.prototype.has=i,o.prototype.set=a,XF=o,XF}var KF,Wse;function H0t(){if(Wse)return KF;Wse=1;var n=AD();function e(){this.__data__=new n,this.size=0}return KF=e,KF}var ZF,qse;function W0t(){if(qse)return ZF;qse=1;function n(e){var r=this.__data__,i=r.delete(e);return this.size=r.size,i}return ZF=n,ZF}var QF,Yse;function q0t(){if(Yse)return QF;Yse=1;function n(e){return this.__data__.get(e)}return QF=n,QF}var JF,Xse;function Y0t(){if(Xse)return JF;Xse=1;function n(e){return this.__data__.has(e)}return JF=n,JF}var e8,Kse;function fMe(){if(Kse)return e8;Kse=1;var n=typeof Qo=="object"&&Qo&&Qo.Object===Object&&Qo;return e8=n,e8}var t8,Zse;function lf(){if(Zse)return t8;Zse=1;var n=fMe(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=n||e||Function("return this")();return t8=r,t8}var n8,Qse;function J_(){if(Qse)return n8;Qse=1;var n=lf(),e=n.Symbol;return n8=e,n8}var r8,Jse;function X0t(){if(Jse)return r8;Jse=1;var n=J_(),e=Object.prototype,r=e.hasOwnProperty,i=e.toString,a=n?n.toStringTag:void 0;function o(s){var l=r.call(s,a),c=s[a];try{s[a]=void 0;var u=!0}catch{}var d=i.call(s);return u&&(l?s[a]=c:delete s[a]),d}return r8=o,r8}var i8,ele;function K0t(){if(ele)return i8;ele=1;var n=Object.prototype,e=n.toString;function r(i){return e.call(i)}return i8=r,i8}var a8,tle;function jy(){if(tle)return a8;tle=1;var n=J_(),e=X0t(),r=K0t(),i="[object Null]",a="[object Undefined]",o=n?n.toStringTag:void 0;function s(l){return l==null?l===void 0?a:i:o&&o in Object(l)?e(l):r(l)}return a8=s,a8}var o8,nle;function td(){if(nle)return o8;nle=1;function n(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return o8=n,o8}var s8,rle;function kM(){if(rle)return s8;rle=1;var n=jy(),e=td(),r="[object AsyncFunction]",i="[object Function]",a="[object GeneratorFunction]",o="[object Proxy]";function s(l){if(!e(l))return!1;var c=n(l);return c==i||c==a||c==r||c==o}return s8=s,s8}var l8,ile;function Z0t(){if(ile)return l8;ile=1;var n=lf(),e=n["__core-js_shared__"];return l8=e,l8}var c8,ale;function Q0t(){if(ale)return c8;ale=1;var n=Z0t(),e=function(){var i=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function r(i){return!!e&&e in i}return c8=r,c8}var u8,ole;function hMe(){if(ole)return u8;ole=1;var n=Function.prototype,e=n.toString;function r(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return u8=r,u8}var d8,sle;function J0t(){if(sle)return d8;sle=1;var n=kM(),e=Q0t(),r=td(),i=hMe(),a=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,s=Function.prototype,l=Object.prototype,c=s.toString,u=l.hasOwnProperty,d=RegExp("^"+c.call(u).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!r(h)||e(h))return!1;var p=n(h)?d:o;return p.test(i(h))}return d8=f,d8}var f8,lle;function eyt(){if(lle)return f8;lle=1;function n(e,r){return e==null?void 0:e[r]}return f8=n,f8}var h8,cle;function Hy(){if(cle)return h8;cle=1;var n=J0t(),e=eyt();function r(i,a){var o=e(i,a);return n(o)?o:void 0}return h8=r,h8}var p8,ule;function ZX(){if(ule)return p8;ule=1;var n=Hy(),e=lf(),r=n(e,"Map");return p8=r,p8}var g8,dle;function RD(){if(dle)return g8;dle=1;var n=Hy(),e=n(Object,"create");return g8=e,g8}var m8,fle;function tyt(){if(fle)return m8;fle=1;var n=RD();function e(){this.__data__=n?n(null):{},this.size=0}return m8=e,m8}var v8,hle;function nyt(){if(hle)return v8;hle=1;function n(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return v8=n,v8}var y8,ple;function ryt(){if(ple)return y8;ple=1;var n=RD(),e="__lodash_hash_undefined__",r=Object.prototype,i=r.hasOwnProperty;function a(o){var s=this.__data__;if(n){var l=s[o];return l===e?void 0:l}return i.call(s,o)?s[o]:void 0}return y8=a,y8}var b8,gle;function iyt(){if(gle)return b8;gle=1;var n=RD(),e=Object.prototype,r=e.hasOwnProperty;function i(a){var o=this.__data__;return n?o[a]!==void 0:r.call(o,a)}return b8=i,b8}var x8,mle;function ayt(){if(mle)return x8;mle=1;var n=RD(),e="__lodash_hash_undefined__";function r(i,a){var o=this.__data__;return this.size+=this.has(i)?0:1,o[i]=n&&a===void 0?e:a,this}return x8=r,x8}var _8,vle;function oyt(){if(vle)return _8;vle=1;var n=tyt(),e=nyt(),r=ryt(),i=iyt(),a=ayt();function o(s){var l=-1,c=s==null?0:s.length;for(this.clear();++l<c;){var u=s[l];this.set(u[0],u[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=r,o.prototype.has=i,o.prototype.set=a,_8=o,_8}var w8,yle;function syt(){if(yle)return w8;yle=1;var n=oyt(),e=AD(),r=ZX();function i(){this.size=0,this.__data__={hash:new n,map:new(r||e),string:new n}}return w8=i,w8}var S8,ble;function lyt(){if(ble)return S8;ble=1;function n(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return S8=n,S8}var E8,xle;function PD(){if(xle)return E8;xle=1;var n=lyt();function e(r,i){var a=r.__data__;return n(i)?a[typeof i=="string"?"string":"hash"]:a.map}return E8=e,E8}var C8,_le;function cyt(){if(_le)return C8;_le=1;var n=PD();function e(r){var i=n(this,r).delete(r);return this.size-=i?1:0,i}return C8=e,C8}var M8,wle;function uyt(){if(wle)return M8;wle=1;var n=PD();function e(r){return n(this,r).get(r)}return M8=e,M8}var T8,Sle;function dyt(){if(Sle)return T8;Sle=1;var n=PD();function e(r){return n(this,r).has(r)}return T8=e,T8}var A8,Ele;function fyt(){if(Ele)return A8;Ele=1;var n=PD();function e(r,i){var a=n(this,r),o=a.size;return a.set(r,i),this.size+=a.size==o?0:1,this}return A8=e,A8}var R8,Cle;function QX(){if(Cle)return R8;Cle=1;var n=syt(),e=cyt(),r=uyt(),i=dyt(),a=fyt();function o(s){var l=-1,c=s==null?0:s.length;for(this.clear();++l<c;){var u=s[l];this.set(u[0],u[1])}}return o.prototype.clear=n,o.prototype.delete=e,o.prototype.get=r,o.prototype.has=i,o.prototype.set=a,R8=o,R8}var P8,Mle;function hyt(){if(Mle)return P8;Mle=1;var n=AD(),e=ZX(),r=QX(),i=200;function a(o,s){var l=this.__data__;if(l instanceof n){var c=l.__data__;if(!e||c.length<i-1)return c.push([o,s]),this.size=++l.size,this;l=this.__data__=new r(c)}return l.set(o,s),this.size=l.size,this}return P8=a,P8}var N8,Tle;function ND(){if(Tle)return N8;Tle=1;var n=AD(),e=H0t(),r=W0t(),i=q0t(),a=Y0t(),o=hyt();function s(l){var c=this.__data__=new n(l);this.size=c.size}return s.prototype.clear=e,s.prototype.delete=r,s.prototype.get=i,s.prototype.has=a,s.prototype.set=o,N8=s,N8}var O8,Ale;function JX(){if(Ale)return O8;Ale=1;function n(e,r){for(var i=-1,a=e==null?0:e.length;++i<a&&r(e[i],i,e)!==!1;);return e}return O8=n,O8}var I8,Rle;function pMe(){if(Rle)return I8;Rle=1;var n=Hy(),e=function(){try{var r=n(Object,"defineProperty");return r({},"",{}),r}catch{}}();return I8=e,I8}var D8,Ple;function OD(){if(Ple)return D8;Ple=1;var n=pMe();function e(r,i,a){i=="__proto__"&&n?n(r,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):r[i]=a}return D8=e,D8}var L8,Nle;function ID(){if(Nle)return L8;Nle=1;var n=OD(),e=Q_(),r=Object.prototype,i=r.hasOwnProperty;function a(o,s,l){var c=o[s];(!(i.call(o,s)&&e(c,l))||l===void 0&&!(s in o))&&n(o,s,l)}return L8=a,L8}var k8,Ole;function FM(){if(Ole)return k8;Ole=1;var n=ID(),e=OD();function r(i,a,o,s){var l=!o;o||(o={});for(var c=-1,u=a.length;++c<u;){var d=a[c],f=s?s(o[d],i[d],d,o,i):void 0;f===void 0&&(f=i[d]),l?e(o,d,f):n(o,d,f)}return o}return k8=r,k8}var F8,Ile;function pyt(){if(Ile)return F8;Ile=1;function n(e,r){for(var i=-1,a=Array(e);++i<e;)a[i]=r(i);return a}return F8=n,F8}var $8,Dle;function bh(){if(Dle)return $8;Dle=1;function n(e){return e!=null&&typeof e=="object"}return $8=n,$8}var B8,Lle;function gyt(){if(Lle)return B8;Lle=1;var n=jy(),e=bh(),r="[object Arguments]";function i(a){return e(a)&&n(a)==r}return B8=i,B8}var z8,kle;function $M(){if(kle)return z8;kle=1;var n=gyt(),e=bh(),r=Object.prototype,i=r.hasOwnProperty,a=r.propertyIsEnumerable,o=n(function(){return arguments}())?n:function(s){return e(s)&&i.call(s,"callee")&&!a.call(s,"callee")};return z8=o,z8}var U8,Fle;function yo(){if(Fle)return U8;Fle=1;var n=Array.isArray;return U8=n,U8}var c2={exports:{}},V8,$le;function myt(){if($le)return V8;$le=1;function n(){return!1}return V8=n,V8}c2.exports;var Ble;function ew(){return Ble||(Ble=1,function(n,e){var r=lf(),i=myt(),a=e&&!e.nodeType&&e,o=a&&!0&&n&&!n.nodeType&&n,s=o&&o.exports===a,l=s?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||i;n.exports=u}(c2,c2.exports)),c2.exports}var G8,zle;function DD(){if(zle)return G8;zle=1;var n=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(i,a){var o=typeof i;return a=a??n,!!a&&(o=="number"||o!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<a}return G8=r,G8}var j8,Ule;function eK(){if(Ule)return j8;Ule=1;var n=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=n}return j8=e,j8}var H8,Vle;function vyt(){if(Vle)return H8;Vle=1;var n=jy(),e=eK(),r=bh(),i="[object Arguments]",a="[object Array]",o="[object Boolean]",s="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",f="[object Object]",h="[object RegExp]",p="[object Set]",g="[object String]",m="[object WeakMap]",v="[object ArrayBuffer]",y="[object DataView]",b="[object Float32Array]",x="[object Float64Array]",_="[object Int8Array]",S="[object Int16Array]",M="[object Int32Array]",E="[object Uint8Array]",T="[object Uint8ClampedArray]",P="[object Uint16Array]",A="[object Uint32Array]",N={};N[b]=N[x]=N[_]=N[S]=N[M]=N[E]=N[T]=N[P]=N[A]=!0,N[i]=N[a]=N[v]=N[o]=N[y]=N[s]=N[l]=N[c]=N[u]=N[d]=N[f]=N[h]=N[p]=N[g]=N[m]=!1;function O(I){return r(I)&&e(I.length)&&!!N[n(I)]}return H8=O,H8}var W8,Gle;function LD(){if(Gle)return W8;Gle=1;function n(e){return function(r){return e(r)}}return W8=n,W8}var u2={exports:{}};u2.exports;var jle;function tK(){return jle||(jle=1,function(n,e){var r=fMe(),i=e&&!e.nodeType&&e,a=i&&!0&&n&&!n.nodeType&&n,o=a&&a.exports===i,s=o&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();n.exports=l}(u2,u2.exports)),u2.exports}var q8,Hle;function BM(){if(Hle)return q8;Hle=1;var n=vyt(),e=LD(),r=tK(),i=r&&r.isTypedArray,a=i?e(i):n;return q8=a,q8}var Y8,Wle;function gMe(){if(Wle)return Y8;Wle=1;var n=pyt(),e=$M(),r=yo(),i=ew(),a=DD(),o=BM(),s=Object.prototype,l=s.hasOwnProperty;function c(u,d){var f=r(u),h=!f&&e(u),p=!f&&!h&&i(u),g=!f&&!h&&!p&&o(u),m=f||h||p||g,v=m?n(u.length,String):[],y=v.length;for(var b in u)(d||l.call(u,b))&&!(m&&(b=="length"||p&&(b=="offset"||b=="parent")||g&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||a(b,y)))&&v.push(b);return v}return Y8=c,Y8}var X8,qle;function kD(){if(qle)return X8;qle=1;var n=Object.prototype;function e(r){var i=r&&r.constructor,a=typeof i=="function"&&i.prototype||n;return r===a}return X8=e,X8}var K8,Yle;function mMe(){if(Yle)return K8;Yle=1;function n(e,r){return function(i){return e(r(i))}}return K8=n,K8}var Z8,Xle;function yyt(){if(Xle)return Z8;Xle=1;var n=mMe(),e=n(Object.keys,Object);return Z8=e,Z8}var Q8,Kle;function nK(){if(Kle)return Q8;Kle=1;var n=kD(),e=yyt(),r=Object.prototype,i=r.hasOwnProperty;function a(o){if(!n(o))return e(o);var s=[];for(var l in Object(o))i.call(o,l)&&l!="constructor"&&s.push(l);return s}return Q8=a,Q8}var J8,Zle;function Xp(){if(Zle)return J8;Zle=1;var n=kM(),e=eK();function r(i){return i!=null&&e(i.length)&&!n(i)}return J8=r,J8}var e$,Qle;function pv(){if(Qle)return e$;Qle=1;var n=gMe(),e=nK(),r=Xp();function i(a){return r(a)?n(a):e(a)}return e$=i,e$}var t$,Jle;function byt(){if(Jle)return t$;Jle=1;var n=FM(),e=pv();function r(i,a){return i&&n(a,e(a),i)}return t$=r,t$}var n$,ece;function xyt(){if(ece)return n$;ece=1;function n(e){var r=[];if(e!=null)for(var i in Object(e))r.push(i);return r}return n$=n,n$}var r$,tce;function _yt(){if(tce)return r$;tce=1;var n=td(),e=kD(),r=xyt(),i=Object.prototype,a=i.hasOwnProperty;function o(s){if(!n(s))return r(s);var l=e(s),c=[];for(var u in s)u=="constructor"&&(l||!a.call(s,u))||c.push(u);return c}return r$=o,r$}var i$,nce;function Wy(){if(nce)return i$;nce=1;var n=gMe(),e=_yt(),r=Xp();function i(a){return r(a)?n(a,!0):e(a)}return i$=i,i$}var a$,rce;function wyt(){if(rce)return a$;rce=1;var n=FM(),e=Wy();function r(i,a){return i&&n(a,e(a),i)}return a$=r,a$}var d2={exports:{}};d2.exports;var ice;function vMe(){return ice||(ice=1,function(n,e){var r=lf(),i=e&&!e.nodeType&&e,a=i&&!0&&n&&!n.nodeType&&n,o=a&&a.exports===i,s=o?r.Buffer:void 0,l=s?s.allocUnsafe:void 0;function c(u,d){if(d)return u.slice();var f=u.length,h=l?l(f):new u.constructor(f);return u.copy(h),h}n.exports=c}(d2,d2.exports)),d2.exports}var o$,ace;function yMe(){if(ace)return o$;ace=1;function n(e,r){var i=-1,a=e.length;for(r||(r=Array(a));++i<a;)r[i]=e[i];return r}return o$=n,o$}var s$,oce;function bMe(){if(oce)return s$;oce=1;function n(e,r){for(var i=-1,a=e==null?0:e.length,o=0,s=[];++i<a;){var l=e[i];r(l,i,e)&&(s[o++]=l)}return s}return s$=n,s$}var l$,sce;function xMe(){if(sce)return l$;sce=1;function n(){return[]}return l$=n,l$}var c$,lce;function rK(){if(lce)return c$;lce=1;var n=bMe(),e=xMe(),r=Object.prototype,i=r.propertyIsEnumerable,a=Object.getOwnPropertySymbols,o=a?function(s){return s==null?[]:(s=Object(s),n(a(s),function(l){return i.call(s,l)}))}:e;return c$=o,c$}var u$,cce;function Syt(){if(cce)return u$;cce=1;var n=FM(),e=rK();function r(i,a){return n(i,e(i),a)}return u$=r,u$}var d$,uce;function iK(){if(uce)return d$;uce=1;function n(e,r){for(var i=-1,a=r.length,o=e.length;++i<a;)e[o+i]=r[i];return e}return d$=n,d$}var f$,dce;function FD(){if(dce)return f$;dce=1;var n=mMe(),e=n(Object.getPrototypeOf,Object);return f$=e,f$}var h$,fce;function _Me(){if(fce)return h$;fce=1;var n=iK(),e=FD(),r=rK(),i=xMe(),a=Object.getOwnPropertySymbols,o=a?function(s){for(var l=[];s;)n(l,r(s)),s=e(s);return l}:i;return h$=o,h$}var p$,hce;function Eyt(){if(hce)return p$;hce=1;var n=FM(),e=_Me();function r(i,a){return n(i,e(i),a)}return p$=r,p$}var g$,pce;function wMe(){if(pce)return g$;pce=1;var n=iK(),e=yo();function r(i,a,o){var s=a(i);return e(i)?s:n(s,o(i))}return g$=r,g$}var m$,gce;function SMe(){if(gce)return m$;gce=1;var n=wMe(),e=rK(),r=pv();function i(a){return n(a,r,e)}return m$=i,m$}var v$,mce;function Cyt(){if(mce)return v$;mce=1;var n=wMe(),e=_Me(),r=Wy();function i(a){return n(a,r,e)}return v$=i,v$}var y$,vce;function Myt(){if(vce)return y$;vce=1;var n=Hy(),e=lf(),r=n(e,"DataView");return y$=r,y$}var b$,yce;function Tyt(){if(yce)return b$;yce=1;var n=Hy(),e=lf(),r=n(e,"Promise");return b$=r,b$}var x$,bce;function EMe(){if(bce)return x$;bce=1;var n=Hy(),e=lf(),r=n(e,"Set");return x$=r,x$}var _$,xce;function Ayt(){if(xce)return _$;xce=1;var n=Hy(),e=lf(),r=n(e,"WeakMap");return _$=r,_$}var w$,_ce;function tw(){if(_ce)return w$;_ce=1;var n=Myt(),e=ZX(),r=Tyt(),i=EMe(),a=Ayt(),o=jy(),s=hMe(),l="[object Map]",c="[object Object]",u="[object Promise]",d="[object Set]",f="[object WeakMap]",h="[object DataView]",p=s(n),g=s(e),m=s(r),v=s(i),y=s(a),b=o;return(n&&b(new n(new ArrayBuffer(1)))!=h||e&&b(new e)!=l||r&&b(r.resolve())!=u||i&&b(new i)!=d||a&&b(new a)!=f)&&(b=function(x){var _=o(x),S=_==c?x.constructor:void 0,M=S?s(S):"";if(M)switch(M){case p:return h;case g:return l;case m:return u;case v:return d;case y:return f}return _}),w$=b,w$}var S$,wce;function Ryt(){if(wce)return S$;wce=1;var n=Object.prototype,e=n.hasOwnProperty;function r(i){var a=i.length,o=new i.constructor(a);return a&&typeof i[0]=="string"&&e.call(i,"index")&&(o.index=i.index,o.input=i.input),o}return S$=r,S$}var E$,Sce;function CMe(){if(Sce)return E$;Sce=1;var n=lf(),e=n.Uint8Array;return E$=e,E$}var C$,Ece;function aK(){if(Ece)return C$;Ece=1;var n=CMe();function e(r){var i=new r.constructor(r.byteLength);return new n(i).set(new n(r)),i}return C$=e,C$}var M$,Cce;function Pyt(){if(Cce)return M$;Cce=1;var n=aK();function e(r,i){var a=i?n(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.byteLength)}return M$=e,M$}var T$,Mce;function Nyt(){if(Mce)return T$;Mce=1;var n=/\w*$/;function e(r){var i=new r.constructor(r.source,n.exec(r));return i.lastIndex=r.lastIndex,i}return T$=e,T$}var A$,Tce;function Oyt(){if(Tce)return A$;Tce=1;var n=J_(),e=n?n.prototype:void 0,r=e?e.valueOf:void 0;function i(a){return r?Object(r.call(a)):{}}return A$=i,A$}var R$,Ace;function MMe(){if(Ace)return R$;Ace=1;var n=aK();function e(r,i){var a=i?n(r.buffer):r.buffer;return new r.constructor(a,r.byteOffset,r.length)}return R$=e,R$}var P$,Rce;function Iyt(){if(Rce)return P$;Rce=1;var n=aK(),e=Pyt(),r=Nyt(),i=Oyt(),a=MMe(),o="[object Boolean]",s="[object Date]",l="[object Map]",c="[object Number]",u="[object RegExp]",d="[object Set]",f="[object String]",h="[object Symbol]",p="[object ArrayBuffer]",g="[object DataView]",m="[object Float32Array]",v="[object Float64Array]",y="[object Int8Array]",b="[object Int16Array]",x="[object Int32Array]",_="[object Uint8Array]",S="[object Uint8ClampedArray]",M="[object Uint16Array]",E="[object Uint32Array]";function T(P,A,N){var O=P.constructor;switch(A){case p:return n(P);case o:case s:return new O(+P);case g:return e(P,N);case m:case v:case y:case b:case x:case _:case S:case M:case E:return a(P,N);case l:return new O;case c:case f:return new O(P);case u:return r(P);case d:return new O;case h:return i(P)}}return P$=T,P$}var N$,Pce;function TMe(){if(Pce)return N$;Pce=1;var n=td(),e=Object.create,r=function(){function i(){}return function(a){if(!n(a))return{};if(e)return e(a);i.prototype=a;var o=new i;return i.prototype=void 0,o}}();return N$=r,N$}var O$,Nce;function AMe(){if(Nce)return O$;Nce=1;var n=TMe(),e=FD(),r=kD();function i(a){return typeof a.constructor=="function"&&!r(a)?n(e(a)):{}}return O$=i,O$}var I$,Oce;function Dyt(){if(Oce)return I$;Oce=1;var n=tw(),e=bh(),r="[object Map]";function i(a){return e(a)&&n(a)==r}return I$=i,I$}var D$,Ice;function Lyt(){if(Ice)return D$;Ice=1;var n=Dyt(),e=LD(),r=tK(),i=r&&r.isMap,a=i?e(i):n;return D$=a,D$}var L$,Dce;function kyt(){if(Dce)return L$;Dce=1;var n=tw(),e=bh(),r="[object Set]";function i(a){return e(a)&&n(a)==r}return L$=i,L$}var k$,Lce;function Fyt(){if(Lce)return k$;Lce=1;var n=kyt(),e=LD(),r=tK(),i=r&&r.isSet,a=i?e(i):n;return k$=a,k$}var F$,kce;function RMe(){if(kce)return F$;kce=1;var n=ND(),e=JX(),r=ID(),i=byt(),a=wyt(),o=vMe(),s=yMe(),l=Syt(),c=Eyt(),u=SMe(),d=Cyt(),f=tw(),h=Ryt(),p=Iyt(),g=AMe(),m=yo(),v=ew(),y=Lyt(),b=td(),x=Fyt(),_=pv(),S=Wy(),M=1,E=2,T=4,P="[object Arguments]",A="[object Array]",N="[object Boolean]",O="[object Date]",I="[object Error]",D="[object Function]",k="[object GeneratorFunction]",$="[object Map]",B="[object Number]",F="[object Object]",G="[object RegExp]",z="[object Set]",U="[object String]",H="[object Symbol]",X="[object WeakMap]",V="[object ArrayBuffer]",W="[object DataView]",K="[object Float32Array]",q="[object Float64Array]",Q="[object Int8Array]",ie="[object Int16Array]",oe="[object Int32Array]",ue="[object Uint8Array]",le="[object Uint8ClampedArray]",me="[object Uint16Array]",J="[object Uint32Array]",pe={};pe[P]=pe[A]=pe[V]=pe[W]=pe[N]=pe[O]=pe[K]=pe[q]=pe[Q]=pe[ie]=pe[oe]=pe[$]=pe[B]=pe[F]=pe[G]=pe[z]=pe[U]=pe[H]=pe[ue]=pe[le]=pe[me]=pe[J]=!0,pe[I]=pe[D]=pe[X]=!1;function ve(Me,Re,Xe,He,ee,Y){var ce,_e=Re&M,Ae=Re&E,Ce=Re&T;if(Xe&&(ce=ee?Xe(Me,He,ee,Y):Xe(Me)),ce!==void 0)return ce;if(!b(Me))return Me;var et=m(Me);if(et){if(ce=h(Me),!_e)return s(Me,ce)}else{var Ve=f(Me),qe=Ve==D||Ve==k;if(v(Me))return o(Me,_e);if(Ve==F||Ve==P||qe&&!ee){if(ce=Ae||qe?{}:g(Me),!_e)return Ae?c(Me,a(ce,Me)):l(Me,i(ce,Me))}else{if(!pe[Ve])return ee?Me:{};ce=p(Me,Ve,_e)}}Y||(Y=new n);var dt=Y.get(Me);if(dt)return dt;Y.set(Me,ce),x(Me)?Me.forEach(function(Ze){ce.add(ve(Ze,Re,Xe,Ze,Me,Y))}):y(Me)&&Me.forEach(function(Ze,Ie){ce.set(Ie,ve(Ze,Re,Xe,Ie,Me,Y))});var Ge=Ce?Ae?d:u:Ae?S:_,We=et?void 0:Ge(Me);return e(We||Me,function(Ze,Ie){We&&(Ie=Ze,Ze=Me[Ie]),r(ce,Ie,ve(Ze,Re,Xe,Ie,Me,Y))}),ce}return F$=ve,F$}var $$,Fce;function $yt(){if(Fce)return $$;Fce=1;var n=RMe(),e=4;function r(i){return n(i,e)}return $$=r,$$}var B$,$ce;function oK(){if($ce)return B$;$ce=1;function n(e){return function(){return e}}return B$=n,B$}var z$,Bce;function Byt(){if(Bce)return z$;Bce=1;function n(e){return function(r,i,a){for(var o=-1,s=Object(r),l=a(r),c=l.length;c--;){var u=l[e?c:++o];if(i(s[u],u,s)===!1)break}return r}}return z$=n,z$}var U$,zce;function sK(){if(zce)return U$;zce=1;var n=Byt(),e=n();return U$=e,U$}var V$,Uce;function lK(){if(Uce)return V$;Uce=1;var n=sK(),e=pv();function r(i,a){return i&&n(i,a,e)}return V$=r,V$}var G$,Vce;function zyt(){if(Vce)return G$;Vce=1;var n=Xp();function e(r,i){return function(a,o){if(a==null)return a;if(!n(a))return r(a,o);for(var s=a.length,l=i?s:-1,c=Object(a);(i?l--:++l<s)&&o(c[l],l,c)!==!1;);return a}}return G$=e,G$}var j$,Gce;function $D(){if(Gce)return j$;Gce=1;var n=lK(),e=zyt(),r=e(n);return j$=r,j$}var H$,jce;function qy(){if(jce)return H$;jce=1;function n(e){return e}return H$=n,H$}var W$,Hce;function PMe(){if(Hce)return W$;Hce=1;var n=qy();function e(r){return typeof r=="function"?r:n}return W$=e,W$}var q$,Wce;function NMe(){if(Wce)return q$;Wce=1;var n=JX(),e=$D(),r=PMe(),i=yo();function a(o,s){var l=i(o)?n:e;return l(o,r(s))}return q$=a,q$}var Y$,qce;function OMe(){return qce||(qce=1,Y$=NMe()),Y$}var X$,Yce;function Uyt(){if(Yce)return X$;Yce=1;var n=$D();function e(r,i){var a=[];return n(r,function(o,s,l){i(o,s,l)&&a.push(o)}),a}return X$=e,X$}var K$,Xce;function Vyt(){if(Xce)return K$;Xce=1;var n="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,n),this}return K$=e,K$}var Z$,Kce;function Gyt(){if(Kce)return Z$;Kce=1;function n(e){return this.__data__.has(e)}return Z$=n,Z$}var Q$,Zce;function IMe(){if(Zce)return Q$;Zce=1;var n=QX(),e=Vyt(),r=Gyt();function i(a){var o=-1,s=a==null?0:a.length;for(this.__data__=new n;++o<s;)this.add(a[o])}return i.prototype.add=i.prototype.push=e,i.prototype.has=r,Q$=i,Q$}var J$,Qce;function jyt(){if(Qce)return J$;Qce=1;function n(e,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(e[i],i,e))return!0;return!1}return J$=n,J$}var eB,Jce;function DMe(){if(Jce)return eB;Jce=1;function n(e,r){return e.has(r)}return eB=n,eB}var tB,eue;function LMe(){if(eue)return tB;eue=1;var n=IMe(),e=jyt(),r=DMe(),i=1,a=2;function o(s,l,c,u,d,f){var h=c&i,p=s.length,g=l.length;if(p!=g&&!(h&&g>p))return!1;var m=f.get(s),v=f.get(l);if(m&&v)return m==l&&v==s;var y=-1,b=!0,x=c&a?new n:void 0;for(f.set(s,l),f.set(l,s);++y<p;){var _=s[y],S=l[y];if(u)var M=h?u(S,_,y,l,s,f):u(_,S,y,s,l,f);if(M!==void 0){if(M)continue;b=!1;break}if(x){if(!e(l,function(E,T){if(!r(x,T)&&(_===E||d(_,E,c,u,f)))return x.push(T)})){b=!1;break}}else if(!(_===S||d(_,S,c,u,f))){b=!1;break}}return f.delete(s),f.delete(l),b}return tB=o,tB}var nB,tue;function Hyt(){if(tue)return nB;tue=1;function n(e){var r=-1,i=Array(e.size);return e.forEach(function(a,o){i[++r]=[o,a]}),i}return nB=n,nB}var rB,nue;function cK(){if(nue)return rB;nue=1;function n(e){var r=-1,i=Array(e.size);return e.forEach(function(a){i[++r]=a}),i}return rB=n,rB}var iB,rue;function Wyt(){if(rue)return iB;rue=1;var n=J_(),e=CMe(),r=Q_(),i=LMe(),a=Hyt(),o=cK(),s=1,l=2,c="[object Boolean]",u="[object Date]",d="[object Error]",f="[object Map]",h="[object Number]",p="[object RegExp]",g="[object Set]",m="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",b="[object DataView]",x=n?n.prototype:void 0,_=x?x.valueOf:void 0;function S(M,E,T,P,A,N,O){switch(T){case b:if(M.byteLength!=E.byteLength||M.byteOffset!=E.byteOffset)return!1;M=M.buffer,E=E.buffer;case y:return!(M.byteLength!=E.byteLength||!N(new e(M),new e(E)));case c:case u:case h:return r(+M,+E);case d:return M.name==E.name&&M.message==E.message;case p:case m:return M==E+"";case f:var I=a;case g:var D=P&s;if(I||(I=o),M.size!=E.size&&!D)return!1;var k=O.get(M);if(k)return k==E;P|=l,O.set(M,E);var $=i(I(M),I(E),P,A,N,O);return O.delete(M),$;case v:if(_)return _.call(M)==_.call(E)}return!1}return iB=S,iB}var aB,iue;function qyt(){if(iue)return aB;iue=1;var n=SMe(),e=1,r=Object.prototype,i=r.hasOwnProperty;function a(o,s,l,c,u,d){var f=l&e,h=n(o),p=h.length,g=n(s),m=g.length;if(p!=m&&!f)return!1;for(var v=p;v--;){var y=h[v];if(!(f?y in s:i.call(s,y)))return!1}var b=d.get(o),x=d.get(s);if(b&&x)return b==s&&x==o;var _=!0;d.set(o,s),d.set(s,o);for(var S=f;++v<p;){y=h[v];var M=o[y],E=s[y];if(c)var T=f?c(E,M,y,s,o,d):c(M,E,y,o,s,d);if(!(T===void 0?M===E||u(M,E,l,c,d):T)){_=!1;break}S||(S=y=="constructor")}if(_&&!S){var P=o.constructor,A=s.constructor;P!=A&&"constructor"in o&&"constructor"in s&&!(typeof P=="function"&&P instanceof P&&typeof A=="function"&&A instanceof A)&&(_=!1)}return d.delete(o),d.delete(s),_}return aB=a,aB}var oB,aue;function Yyt(){if(aue)return oB;aue=1;var n=ND(),e=LMe(),r=Wyt(),i=qyt(),a=tw(),o=yo(),s=ew(),l=BM(),c=1,u="[object Arguments]",d="[object Array]",f="[object Object]",h=Object.prototype,p=h.hasOwnProperty;function g(m,v,y,b,x,_){var S=o(m),M=o(v),E=S?d:a(m),T=M?d:a(v);E=E==u?f:E,T=T==u?f:T;var P=E==f,A=T==f,N=E==T;if(N&&s(m)){if(!s(v))return!1;S=!0,P=!1}if(N&&!P)return _||(_=new n),S||l(m)?e(m,v,y,b,x,_):r(m,v,E,y,b,x,_);if(!(y&c)){var O=P&&p.call(m,"__wrapped__"),I=A&&p.call(v,"__wrapped__");if(O||I){var D=O?m.value():m,k=I?v.value():v;return _||(_=new n),x(D,k,y,b,_)}}return N?(_||(_=new n),i(m,v,y,b,x,_)):!1}return oB=g,oB}var sB,oue;function kMe(){if(oue)return sB;oue=1;var n=Yyt(),e=bh();function r(i,a,o,s,l){return i===a?!0:i==null||a==null||!e(i)&&!e(a)?i!==i&&a!==a:n(i,a,o,s,r,l)}return sB=r,sB}var lB,sue;function Xyt(){if(sue)return lB;sue=1;var n=ND(),e=kMe(),r=1,i=2;function a(o,s,l,c){var u=l.length,d=u,f=!c;if(o==null)return!d;for(o=Object(o);u--;){var h=l[u];if(f&&h[2]?h[1]!==o[h[0]]:!(h[0]in o))return!1}for(;++u<d;){h=l[u];var p=h[0],g=o[p],m=h[1];if(f&&h[2]){if(g===void 0&&!(p in o))return!1}else{var v=new n;if(c)var y=c(g,m,p,o,s,v);if(!(y===void 0?e(m,g,r|i,c,v):y))return!1}}return!0}return lB=a,lB}var cB,lue;function FMe(){if(lue)return cB;lue=1;var n=td();function e(r){return r===r&&!n(r)}return cB=e,cB}var uB,cue;function Kyt(){if(cue)return uB;cue=1;var n=FMe(),e=pv();function r(i){for(var a=e(i),o=a.length;o--;){var s=a[o],l=i[s];a[o]=[s,l,n(l)]}return a}return uB=r,uB}var dB,uue;function $Me(){if(uue)return dB;uue=1;function n(e,r){return function(i){return i==null?!1:i[e]===r&&(r!==void 0||e in Object(i))}}return dB=n,dB}var fB,due;function Zyt(){if(due)return fB;due=1;var n=Xyt(),e=Kyt(),r=$Me();function i(a){var o=e(a);return o.length==1&&o[0][2]?r(o[0][0],o[0][1]):function(s){return s===a||n(s,a,o)}}return fB=i,fB}var hB,fue;function nw(){if(fue)return hB;fue=1;var n=jy(),e=bh(),r="[object Symbol]";function i(a){return typeof a=="symbol"||e(a)&&n(a)==r}return hB=i,hB}var pB,hue;function uK(){if(hue)return pB;hue=1;var n=yo(),e=nw(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function a(o,s){if(n(o))return!1;var l=typeof o;return l=="number"||l=="symbol"||l=="boolean"||o==null||e(o)?!0:i.test(o)||!r.test(o)||s!=null&&o in Object(s)}return pB=a,pB}var gB,pue;function Qyt(){if(pue)return gB;pue=1;var n=QX(),e="Expected a function";function r(i,a){if(typeof i!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var o=function(){var s=arguments,l=a?a.apply(this,s):s[0],c=o.cache;if(c.has(l))return c.get(l);var u=i.apply(this,s);return o.cache=c.set(l,u)||c,u};return o.cache=new(r.Cache||n),o}return r.Cache=n,gB=r,gB}var mB,gue;function Jyt(){if(gue)return mB;gue=1;var n=Qyt(),e=500;function r(i){var a=n(i,function(s){return o.size===e&&o.clear(),s}),o=a.cache;return a}return mB=r,mB}var vB,mue;function e1t(){if(mue)return vB;mue=1;var n=Jyt(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,i=n(function(a){var o=[];return a.charCodeAt(0)===46&&o.push(""),a.replace(e,function(s,l,c,u){o.push(c?u.replace(r,"$1"):l||s)}),o});return vB=i,vB}var yB,vue;function BD(){if(vue)return yB;vue=1;function n(e,r){for(var i=-1,a=e==null?0:e.length,o=Array(a);++i<a;)o[i]=r(e[i],i,e);return o}return yB=n,yB}var bB,yue;function t1t(){if(yue)return bB;yue=1;var n=J_(),e=BD(),r=yo(),i=nw(),a=n?n.prototype:void 0,o=a?a.toString:void 0;function s(l){if(typeof l=="string")return l;if(r(l))return e(l,s)+"";if(i(l))return o?o.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return bB=s,bB}var xB,bue;function BMe(){if(bue)return xB;bue=1;var n=t1t();function e(r){return r==null?"":n(r)}return xB=e,xB}var _B,xue;function zD(){if(xue)return _B;xue=1;var n=yo(),e=uK(),r=e1t(),i=BMe();function a(o,s){return n(o)?o:e(o,s)?[o]:r(i(o))}return _B=a,_B}var wB,_ue;function zM(){if(_ue)return wB;_ue=1;var n=nw();function e(r){if(typeof r=="string"||n(r))return r;var i=r+"";return i=="0"&&1/r==-1/0?"-0":i}return wB=e,wB}var SB,wue;function UD(){if(wue)return SB;wue=1;var n=zD(),e=zM();function r(i,a){a=n(a,i);for(var o=0,s=a.length;i!=null&&o<s;)i=i[e(a[o++])];return o&&o==s?i:void 0}return SB=r,SB}var EB,Sue;function n1t(){if(Sue)return EB;Sue=1;var n=UD();function e(r,i,a){var o=r==null?void 0:n(r,i);return o===void 0?a:o}return EB=e,EB}var CB,Eue;function r1t(){if(Eue)return CB;Eue=1;function n(e,r){return e!=null&&r in Object(e)}return CB=n,CB}var MB,Cue;function zMe(){if(Cue)return MB;Cue=1;var n=zD(),e=$M(),r=yo(),i=DD(),a=eK(),o=zM();function s(l,c,u){c=n(c,l);for(var d=-1,f=c.length,h=!1;++d<f;){var p=o(c[d]);if(!(h=l!=null&&u(l,p)))break;l=l[p]}return h||++d!=f?h:(f=l==null?0:l.length,!!f&&a(f)&&i(p,f)&&(r(l)||e(l)))}return MB=s,MB}var TB,Mue;function UMe(){if(Mue)return TB;Mue=1;var n=r1t(),e=zMe();function r(i,a){return i!=null&&e(i,a,n)}return TB=r,TB}var AB,Tue;function i1t(){if(Tue)return AB;Tue=1;var n=kMe(),e=n1t(),r=UMe(),i=uK(),a=FMe(),o=$Me(),s=zM(),l=1,c=2;function u(d,f){return i(d)&&a(f)?o(s(d),f):function(h){var p=e(h,d);return p===void 0&&p===f?r(h,d):n(f,p,l|c)}}return AB=u,AB}var RB,Aue;function VMe(){if(Aue)return RB;Aue=1;function n(e){return function(r){return r==null?void 0:r[e]}}return RB=n,RB}var PB,Rue;function a1t(){if(Rue)return PB;Rue=1;var n=UD();function e(r){return function(i){return n(i,r)}}return PB=e,PB}var NB,Pue;function o1t(){if(Pue)return NB;Pue=1;var n=VMe(),e=a1t(),r=uK(),i=zM();function a(o){return r(o)?n(i(o)):e(o)}return NB=a,NB}var OB,Nue;function Kp(){if(Nue)return OB;Nue=1;var n=Zyt(),e=i1t(),r=qy(),i=yo(),a=o1t();function o(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?i(s)?e(s[0],s[1]):n(s):a(s)}return OB=o,OB}var IB,Oue;function GMe(){if(Oue)return IB;Oue=1;var n=bMe(),e=Uyt(),r=Kp(),i=yo();function a(o,s){var l=i(o)?n:e;return l(o,r(s,3))}return IB=a,IB}var DB,Iue;function s1t(){if(Iue)return DB;Iue=1;var n=Object.prototype,e=n.hasOwnProperty;function r(i,a){return i!=null&&e.call(i,a)}return DB=r,DB}var LB,Due;function jMe(){if(Due)return LB;Due=1;var n=s1t(),e=zMe();function r(i,a){return i!=null&&e(i,a,n)}return LB=r,LB}var kB,Lue;function l1t(){if(Lue)return kB;Lue=1;var n=nK(),e=tw(),r=$M(),i=yo(),a=Xp(),o=ew(),s=kD(),l=BM(),c="[object Map]",u="[object Set]",d=Object.prototype,f=d.hasOwnProperty;function h(p){if(p==null)return!0;if(a(p)&&(i(p)||typeof p=="string"||typeof p.splice=="function"||o(p)||l(p)||r(p)))return!p.length;var g=e(p);if(g==c||g==u)return!p.size;if(s(p))return!n(p).length;for(var m in p)if(f.call(p,m))return!1;return!0}return kB=h,kB}var FB,kue;function HMe(){if(kue)return FB;kue=1;function n(e){return e===void 0}return FB=n,FB}var $B,Fue;function WMe(){if(Fue)return $B;Fue=1;var n=$D(),e=Xp();function r(i,a){var o=-1,s=e(i)?Array(i.length):[];return n(i,function(l,c,u){s[++o]=a(l,c,u)}),s}return $B=r,$B}var BB,$ue;function qMe(){if($ue)return BB;$ue=1;var n=BD(),e=Kp(),r=WMe(),i=yo();function a(o,s){var l=i(o)?n:r;return l(o,e(s,3))}return BB=a,BB}var zB,Bue;function c1t(){if(Bue)return zB;Bue=1;function n(e,r,i,a){var o=-1,s=e==null?0:e.length;for(a&&s&&(i=e[++o]);++o<s;)i=r(i,e[o],o,e);return i}return zB=n,zB}var UB,zue;function u1t(){if(zue)return UB;zue=1;function n(e,r,i,a,o){return o(e,function(s,l,c){i=a?(a=!1,s):r(i,s,l,c)}),i}return UB=n,UB}var VB,Uue;function YMe(){if(Uue)return VB;Uue=1;var n=c1t(),e=$D(),r=Kp(),i=u1t(),a=yo();function o(s,l,c){var u=a(s)?n:i,d=arguments.length<3;return u(s,r(l,4),c,d,e)}return VB=o,VB}var GB,Vue;function d1t(){if(Vue)return GB;Vue=1;var n=jy(),e=yo(),r=bh(),i="[object String]";function a(o){return typeof o=="string"||!e(o)&&r(o)&&n(o)==i}return GB=a,GB}var jB,Gue;function f1t(){if(Gue)return jB;Gue=1;var n=VMe(),e=n("length");return jB=e,jB}var HB,jue;function h1t(){if(jue)return HB;jue=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",a=e+r+i,o="\\ufe0e\\ufe0f",s="\\u200d",l=RegExp("["+s+n+a+o+"]");function c(u){return l.test(u)}return HB=c,HB}var WB,Hue;function p1t(){if(Hue)return WB;Hue=1;var n="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",a=e+r+i,o="\\ufe0e\\ufe0f",s="["+n+"]",l="["+a+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",d="[^"+n+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",g=u+"?",m="["+o+"]?",v="(?:"+p+"(?:"+[d,f,h].join("|")+")"+m+g+")*",y=m+g+v,b="(?:"+[d+l+"?",l,f,h,s].join("|")+")",x=RegExp(c+"(?="+c+")|"+b+y,"g");function _(S){for(var M=x.lastIndex=0;x.test(S);)++M;return M}return WB=_,WB}var qB,Wue;function g1t(){if(Wue)return qB;Wue=1;var n=f1t(),e=h1t(),r=p1t();function i(a){return e(a)?r(a):n(a)}return qB=i,qB}var YB,que;function m1t(){if(que)return YB;que=1;var n=nK(),e=tw(),r=Xp(),i=d1t(),a=g1t(),o="[object Map]",s="[object Set]";function l(c){if(c==null)return 0;if(r(c))return i(c)?a(c):c.length;var u=e(c);return u==o||u==s?c.size:n(c).length}return YB=l,YB}var XB,Yue;function v1t(){if(Yue)return XB;Yue=1;var n=JX(),e=TMe(),r=lK(),i=Kp(),a=FD(),o=yo(),s=ew(),l=kM(),c=td(),u=BM();function d(f,h,p){var g=o(f),m=g||s(f)||u(f);if(h=i(h,4),p==null){var v=f&&f.constructor;m?p=g?new v:[]:c(f)?p=l(v)?e(a(f)):{}:p={}}return(m?n:r)(f,function(y,b,x){return h(p,y,b,x)}),p}return XB=d,XB}var KB,Xue;function y1t(){if(Xue)return KB;Xue=1;var n=J_(),e=$M(),r=yo(),i=n?n.isConcatSpreadable:void 0;function a(o){return r(o)||e(o)||!!(i&&o&&o[i])}return KB=a,KB}var ZB,Kue;function dK(){if(Kue)return ZB;Kue=1;var n=iK(),e=y1t();function r(i,a,o,s,l){var c=-1,u=i.length;for(o||(o=e),l||(l=[]);++c<u;){var d=i[c];a>0&&o(d)?a>1?r(d,a-1,o,s,l):n(l,d):s||(l[l.length]=d)}return l}return ZB=r,ZB}var QB,Zue;function b1t(){if(Zue)return QB;Zue=1;function n(e,r,i){switch(i.length){case 0:return e.call(r);case 1:return e.call(r,i[0]);case 2:return e.call(r,i[0],i[1]);case 3:return e.call(r,i[0],i[1],i[2])}return e.apply(r,i)}return QB=n,QB}var JB,Que;function XMe(){if(Que)return JB;Que=1;var n=b1t(),e=Math.max;function r(i,a,o){return a=e(a===void 0?i.length-1:a,0),function(){for(var s=arguments,l=-1,c=e(s.length-a,0),u=Array(c);++l<c;)u[l]=s[a+l];l=-1;for(var d=Array(a+1);++l<a;)d[l]=s[l];return d[a]=o(u),n(i,this,d)}}return JB=r,JB}var e9,Jue;function x1t(){if(Jue)return e9;Jue=1;var n=oK(),e=pMe(),r=qy(),i=e?function(a,o){return e(a,"toString",{configurable:!0,enumerable:!1,value:n(o),writable:!0})}:r;return e9=i,e9}var t9,ede;function _1t(){if(ede)return t9;ede=1;var n=800,e=16,r=Date.now;function i(a){var o=0,s=0;return function(){var l=r(),c=e-(l-s);if(s=l,c>0){if(++o>=n)return arguments[0]}else o=0;return a.apply(void 0,arguments)}}return t9=i,t9}var n9,tde;function KMe(){if(tde)return n9;tde=1;var n=x1t(),e=_1t(),r=e(n);return n9=r,n9}var r9,nde;function VD(){if(nde)return r9;nde=1;var n=qy(),e=XMe(),r=KMe();function i(a,o){return r(e(a,o,n),a+"")}return r9=i,r9}var i9,rde;function ZMe(){if(rde)return i9;rde=1;function n(e,r,i,a){for(var o=e.length,s=i+(a?1:-1);a?s--:++s<o;)if(r(e[s],s,e))return s;return-1}return i9=n,i9}var a9,ide;function w1t(){if(ide)return a9;ide=1;function n(e){return e!==e}return a9=n,a9}var o9,ade;function S1t(){if(ade)return o9;ade=1;function n(e,r,i){for(var a=i-1,o=e.length;++a<o;)if(e[a]===r)return a;return-1}return o9=n,o9}var s9,ode;function E1t(){if(ode)return s9;ode=1;var n=ZMe(),e=w1t(),r=S1t();function i(a,o,s){return o===o?r(a,o,s):n(a,e,s)}return s9=i,s9}var l9,sde;function C1t(){if(sde)return l9;sde=1;var n=E1t();function e(r,i){var a=r==null?0:r.length;return!!a&&n(r,i,0)>-1}return l9=e,l9}var c9,lde;function M1t(){if(lde)return c9;lde=1;function n(e,r,i){for(var a=-1,o=e==null?0:e.length;++a<o;)if(i(r,e[a]))return!0;return!1}return c9=n,c9}var u9,cde;function T1t(){if(cde)return u9;cde=1;function n(){}return u9=n,u9}var d9,ude;function A1t(){if(ude)return d9;ude=1;var n=EMe(),e=T1t(),r=cK(),i=1/0,a=n&&1/r(new n([,-0]))[1]==i?function(o){return new n(o)}:e;return d9=a,d9}var f9,dde;function R1t(){if(dde)return f9;dde=1;var n=IMe(),e=C1t(),r=M1t(),i=DMe(),a=A1t(),o=cK(),s=200;function l(c,u,d){var f=-1,h=e,p=c.length,g=!0,m=[],v=m;if(d)g=!1,h=r;else if(p>=s){var y=u?null:a(c);if(y)return o(y);g=!1,h=i,v=new n}else v=u?[]:m;e:for(;++f<p;){var b=c[f],x=u?u(b):b;if(b=d||b!==0?b:0,g&&x===x){for(var _=v.length;_--;)if(v[_]===x)continue e;u&&v.push(x),m.push(b)}else h(v,x,d)||(v!==m&&v.push(x),m.push(b))}return m}return f9=l,f9}var h9,fde;function QMe(){if(fde)return h9;fde=1;var n=Xp(),e=bh();function r(i){return e(i)&&n(i)}return h9=r,h9}var p9,hde;function P1t(){if(hde)return p9;hde=1;var n=dK(),e=VD(),r=R1t(),i=QMe(),a=e(function(o){return r(n(o,1,i,!0))});return p9=a,p9}var g9,pde;function N1t(){if(pde)return g9;pde=1;var n=BD();function e(r,i){return n(i,function(a){return r[a]})}return g9=e,g9}var m9,gde;function JMe(){if(gde)return m9;gde=1;var n=N1t(),e=pv();function r(i){return i==null?[]:n(i,e(i))}return m9=r,m9}var v9,mde;function nd(){if(mde)return v9;mde=1;var n;if(typeof KX=="function")try{n={clone:$yt(),constant:oK(),each:OMe(),filter:GMe(),has:jMe(),isArray:yo(),isEmpty:l1t(),isFunction:kM(),isUndefined:HMe(),keys:pv(),map:qMe(),reduce:YMe(),size:m1t(),transform:v1t(),union:P1t(),values:JMe()}}catch{}return n||(n=window._),v9=n,v9}var y9,vde;function fK(){if(vde)return y9;vde=1;var n=nd();y9=a;var e="\0",r="\0",i="";function a(d){this._isDirected=n.has(d,"directed")?d.directed:!0,this._isMultigraph=n.has(d,"multigraph")?d.multigraph:!1,this._isCompound=n.has(d,"compound")?d.compound:!1,this._label=void 0,this._defaultNodeLabelFn=n.constant(void 0),this._defaultEdgeLabelFn=n.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}a.prototype._nodeCount=0,a.prototype._edgeCount=0,a.prototype.isDirected=function(){return this._isDirected},a.prototype.isMultigraph=function(){return this._isMultigraph},a.prototype.isCompound=function(){return this._isCompound},a.prototype.setGraph=function(d){return this._label=d,this},a.prototype.graph=function(){return this._label},a.prototype.setDefaultNodeLabel=function(d){return n.isFunction(d)||(d=n.constant(d)),this._defaultNodeLabelFn=d,this},a.prototype.nodeCount=function(){return this._nodeCount},a.prototype.nodes=function(){return n.keys(this._nodes)},a.prototype.sources=function(){var d=this;return n.filter(this.nodes(),function(f){return n.isEmpty(d._in[f])})},a.prototype.sinks=function(){var d=this;return n.filter(this.nodes(),function(f){return n.isEmpty(d._out[f])})},a.prototype.setNodes=function(d,f){var h=arguments,p=this;return n.each(d,function(g){h.length>1?p.setNode(g,f):p.setNode(g)}),this},a.prototype.setNode=function(d,f){return n.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=f),this):(this._nodes[d]=arguments.length>1?f:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]=r,this._children[d]={},this._children[r][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},a.prototype.node=function(d){return this._nodes[d]},a.prototype.hasNode=function(d){return n.has(this._nodes,d)},a.prototype.removeNode=function(d){var f=this;if(n.has(this._nodes,d)){var h=function(p){f.removeEdge(f._edgeObjs[p])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],n.each(this.children(d),function(p){f.setParent(p)}),delete this._children[d]),n.each(n.keys(this._in[d]),h),delete this._in[d],delete this._preds[d],n.each(n.keys(this._out[d]),h),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},a.prototype.setParent=function(d,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(n.isUndefined(f))f=r;else{f+="";for(var h=f;!n.isUndefined(h);h=this.parent(h))if(h===d)throw new Error("Setting "+f+" as parent of "+d+" would create a cycle");this.setNode(f)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=f,this._children[f][d]=!0,this},a.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},a.prototype.parent=function(d){if(this._isCompound){var f=this._parent[d];if(f!==r)return f}},a.prototype.children=function(d){if(n.isUndefined(d)&&(d=r),this._isCompound){var f=this._children[d];if(f)return n.keys(f)}else{if(d===r)return this.nodes();if(this.hasNode(d))return[]}},a.prototype.predecessors=function(d){var f=this._preds[d];if(f)return n.keys(f)},a.prototype.successors=function(d){var f=this._sucs[d];if(f)return n.keys(f)},a.prototype.neighbors=function(d){var f=this.predecessors(d);if(f)return n.union(f,this.successors(d))},a.prototype.isLeaf=function(d){var f;return this.isDirected()?f=this.successors(d):f=this.neighbors(d),f.length===0},a.prototype.filterNodes=function(d){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var h=this;n.each(this._nodes,function(m,v){d(v)&&f.setNode(v,m)}),n.each(this._edgeObjs,function(m){f.hasNode(m.v)&&f.hasNode(m.w)&&f.setEdge(m,h.edge(m))});var p={};function g(m){var v=h.parent(m);return v===void 0||f.hasNode(v)?(p[m]=v,v):v in p?p[v]:g(v)}return this._isCompound&&n.each(f.nodes(),function(m){f.setParent(m,g(m))}),f},a.prototype.setDefaultEdgeLabel=function(d){return n.isFunction(d)||(d=n.constant(d)),this._defaultEdgeLabelFn=d,this},a.prototype.edgeCount=function(){return this._edgeCount},a.prototype.edges=function(){return n.values(this._edgeObjs)},a.prototype.setPath=function(d,f){var h=this,p=arguments;return n.reduce(d,function(g,m){return p.length>1?h.setEdge(g,m,f):h.setEdge(g,m),m}),this},a.prototype.setEdge=function(){var d,f,h,p,g=!1,m=arguments[0];typeof m=="object"&&m!==null&&"v"in m?(d=m.v,f=m.w,h=m.name,arguments.length===2&&(p=arguments[1],g=!0)):(d=m,f=arguments[1],h=arguments[3],arguments.length>2&&(p=arguments[2],g=!0)),d=""+d,f=""+f,n.isUndefined(h)||(h=""+h);var v=l(this._isDirected,d,f,h);if(n.has(this._edgeLabels,v))return g&&(this._edgeLabels[v]=p),this;if(!n.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(f),this._edgeLabels[v]=g?p:this._defaultEdgeLabelFn(d,f,h);var y=c(this._isDirected,d,f,h);return d=y.v,f=y.w,Object.freeze(y),this._edgeObjs[v]=y,o(this._preds[f],d),o(this._sucs[d],f),this._in[f][v]=y,this._out[d][v]=y,this._edgeCount++,this},a.prototype.edge=function(d,f,h){var p=arguments.length===1?u(this._isDirected,arguments[0]):l(this._isDirected,d,f,h);return this._edgeLabels[p]},a.prototype.hasEdge=function(d,f,h){var p=arguments.length===1?u(this._isDirected,arguments[0]):l(this._isDirected,d,f,h);return n.has(this._edgeLabels,p)},a.prototype.removeEdge=function(d,f,h){var p=arguments.length===1?u(this._isDirected,arguments[0]):l(this._isDirected,d,f,h),g=this._edgeObjs[p];return g&&(d=g.v,f=g.w,delete this._edgeLabels[p],delete this._edgeObjs[p],s(this._preds[f],d),s(this._sucs[d],f),delete this._in[f][p],delete this._out[d][p],this._edgeCount--),this},a.prototype.inEdges=function(d,f){var h=this._in[d];if(h){var p=n.values(h);return f?n.filter(p,function(g){return g.v===f}):p}},a.prototype.outEdges=function(d,f){var h=this._out[d];if(h){var p=n.values(h);return f?n.filter(p,function(g){return g.w===f}):p}},a.prototype.nodeEdges=function(d,f){var h=this.inEdges(d,f);if(h)return h.concat(this.outEdges(d,f))};function o(d,f){d[f]?d[f]++:d[f]=1}function s(d,f){--d[f]||delete d[f]}function l(d,f,h,p){var g=""+f,m=""+h;if(!d&&g>m){var v=g;g=m,m=v}return g+i+m+i+(n.isUndefined(p)?e:p)}function c(d,f,h,p){var g=""+f,m=""+h;if(!d&&g>m){var v=g;g=m,m=v}var y={v:g,w:m};return p&&(y.name=p),y}function u(d,f){return l(d,f.v,f.w,f.name)}return y9}var b9,yde;function O1t(){return yde||(yde=1,b9="2.1.8"),b9}var x9,bde;function I1t(){return bde||(bde=1,x9={Graph:fK(),version:O1t()}),x9}var _9,xde;function D1t(){if(xde)return _9;xde=1;var n=nd(),e=fK();_9={write:r,read:o};function r(s){var l={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:i(s),edges:a(s)};return n.isUndefined(s.graph())||(l.value=n.clone(s.graph())),l}function i(s){return n.map(s.nodes(),function(l){var c=s.node(l),u=s.parent(l),d={v:l};return n.isUndefined(c)||(d.value=c),n.isUndefined(u)||(d.parent=u),d})}function a(s){return n.map(s.edges(),function(l){var c=s.edge(l),u={v:l.v,w:l.w};return n.isUndefined(l.name)||(u.name=l.name),n.isUndefined(c)||(u.value=c),u})}function o(s){var l=new e(s.options).setGraph(s.value);return n.each(s.nodes,function(c){l.setNode(c.v,c.value),c.parent&&l.setParent(c.v,c.parent)}),n.each(s.edges,function(c){l.setEdge({v:c.v,w:c.w,name:c.name},c.value)}),l}return _9}var w9,_de;function L1t(){if(_de)return w9;_de=1;var n=nd();w9=e;function e(r){var i={},a=[],o;function s(l){n.has(i,l)||(i[l]=!0,o.push(l),n.each(r.successors(l),s),n.each(r.predecessors(l),s))}return n.each(r.nodes(),function(l){o=[],s(l),o.length&&a.push(o)}),a}return w9}var S9,wde;function eTe(){if(wde)return S9;wde=1;var n=nd();S9=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(r){return r.key})},e.prototype.has=function(r){return n.has(this._keyIndices,r)},e.prototype.priority=function(r){var i=this._keyIndices[r];if(i!==void 0)return this._arr[i].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(r,i){var a=this._keyIndices;if(r=String(r),!n.has(a,r)){var o=this._arr,s=o.length;return a[r]=s,o.push({key:r,priority:i}),this._decrease(s),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},e.prototype.decrease=function(r,i){var a=this._keyIndices[r];if(i>this._arr[a].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[a].priority+" New: "+i);this._arr[a].priority=i,this._decrease(a)},e.prototype._heapify=function(r){var i=this._arr,a=2*r,o=a+1,s=r;a<i.length&&(s=i[a].priority<i[s].priority?a:s,o<i.length&&(s=i[o].priority<i[s].priority?o:s),s!==r&&(this._swap(r,s),this._heapify(s)))},e.prototype._decrease=function(r){for(var i=this._arr,a=i[r].priority,o;r!==0&&(o=r>>1,!(i[o].priority<a));)this._swap(r,o),r=o},e.prototype._swap=function(r,i){var a=this._arr,o=this._keyIndices,s=a[r],l=a[i];a[r]=l,a[i]=s,o[l.key]=r,o[s.key]=i},S9}var E9,Sde;function tTe(){if(Sde)return E9;Sde=1;var n=nd(),e=eTe();E9=i;var r=n.constant(1);function i(o,s,l,c){return a(o,String(s),l||r,c||function(u){return o.outEdges(u)})}function a(o,s,l,c){var u={},d=new e,f,h,p=function(g){var m=g.v!==f?g.v:g.w,v=u[m],y=l(g),b=h.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+y);b<v.distance&&(v.distance=b,v.predecessor=f,d.decrease(m,b))};for(o.nodes().forEach(function(g){var m=g===s?0:Number.POSITIVE_INFINITY;u[g]={distance:m},d.add(g,m)});d.size()>0&&(f=d.removeMin(),h=u[f],h.distance!==Number.POSITIVE_INFINITY);)c(f).forEach(p);return u}return E9}var C9,Ede;function k1t(){if(Ede)return C9;Ede=1;var n=tTe(),e=nd();C9=r;function r(i,a,o){return e.transform(i.nodes(),function(s,l){s[l]=n(i,l,a,o)},{})}return C9}var M9,Cde;function nTe(){if(Cde)return M9;Cde=1;var n=nd();M9=e;function e(r){var i=0,a=[],o={},s=[];function l(c){var u=o[c]={onStack:!0,lowlink:i,index:i++};if(a.push(c),r.successors(c).forEach(function(h){n.has(o,h)?o[h].onStack&&(u.lowlink=Math.min(u.lowlink,o[h].index)):(l(h),u.lowlink=Math.min(u.lowlink,o[h].lowlink))}),u.lowlink===u.index){var d=[],f;do f=a.pop(),o[f].onStack=!1,d.push(f);while(c!==f);s.push(d)}}return r.nodes().forEach(function(c){n.has(o,c)||l(c)}),s}return M9}var T9,Mde;function F1t(){if(Mde)return T9;Mde=1;var n=nd(),e=nTe();T9=r;function r(i){return n.filter(e(i),function(a){return a.length>1||a.length===1&&i.hasEdge(a[0],a[0])})}return T9}var A9,Tde;function $1t(){if(Tde)return A9;Tde=1;var n=nd();A9=r;var e=n.constant(1);function r(a,o,s){return i(a,o||e,s||function(l){return a.outEdges(l)})}function i(a,o,s){var l={},c=a.nodes();return c.forEach(function(u){l[u]={},l[u][u]={distance:0},c.forEach(function(d){u!==d&&(l[u][d]={distance:Number.POSITIVE_INFINITY})}),s(u).forEach(function(d){var f=d.v===u?d.w:d.v,h=o(d);l[u][f]={distance:h,predecessor:u}})}),c.forEach(function(u){var d=l[u];c.forEach(function(f){var h=l[f];c.forEach(function(p){var g=h[u],m=d[p],v=h[p],y=g.distance+m.distance;y<v.distance&&(v.distance=y,v.predecessor=m.predecessor)})})}),l}return A9}var R9,Ade;function rTe(){if(Ade)return R9;Ade=1;var n=nd();R9=e,e.CycleException=r;function e(i){var a={},o={},s=[];function l(c){if(n.has(o,c))throw new r;n.has(a,c)||(o[c]=!0,a[c]=!0,n.each(i.predecessors(c),l),delete o[c],s.push(c))}if(n.each(i.sinks(),l),n.size(a)!==i.nodeCount())throw new r;return s}function r(){}return r.prototype=new Error,R9}var P9,Rde;function B1t(){if(Rde)return P9;Rde=1;var n=rTe();P9=e;function e(r){try{n(r)}catch(i){if(i instanceof n.CycleException)return!1;throw i}return!0}return P9}var N9,Pde;function iTe(){if(Pde)return N9;Pde=1;var n=nd();N9=e;function e(i,a,o){n.isArray(a)||(a=[a]);var s=(i.isDirected()?i.successors:i.neighbors).bind(i),l=[],c={};return n.each(a,function(u){if(!i.hasNode(u))throw new Error("Graph does not have node: "+u);r(i,u,o==="post",c,s,l)}),l}function r(i,a,o,s,l,c){n.has(s,a)||(s[a]=!0,o||c.push(a),n.each(l(a),function(u){r(i,u,o,s,l,c)}),o&&c.push(a))}return N9}var O9,Nde;function z1t(){if(Nde)return O9;Nde=1;var n=iTe();O9=e;function e(r,i){return n(r,i,"post")}return O9}var I9,Ode;function U1t(){if(Ode)return I9;Ode=1;var n=iTe();I9=e;function e(r,i){return n(r,i,"pre")}return I9}var D9,Ide;function V1t(){if(Ide)return D9;Ide=1;var n=nd(),e=fK(),r=eTe();D9=i;function i(a,o){var s=new e,l={},c=new r,u;function d(h){var p=h.v===u?h.w:h.v,g=c.priority(p);if(g!==void 0){var m=o(h);m<g&&(l[p]=u,c.decrease(p,m))}}if(a.nodeCount()===0)return s;n.each(a.nodes(),function(h){c.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),c.decrease(a.nodes()[0],0);for(var f=!1;c.size()>0;){if(u=c.removeMin(),n.has(l,u))s.setEdge(u,l[u]);else{if(f)throw new Error("Input graph is not connected: "+a);f=!0}a.nodeEdges(u).forEach(d)}return s}return D9}var L9,Dde;function G1t(){return Dde||(Dde=1,L9={components:L1t(),dijkstra:tTe(),dijkstraAll:k1t(),findCycles:F1t(),floydWarshall:$1t(),isAcyclic:B1t(),postorder:z1t(),preorder:U1t(),prim:V1t(),tarjan:nTe(),topsort:rTe()}),L9}var k9,Lde;function j1t(){if(Lde)return k9;Lde=1;var n=I1t();return k9={Graph:n.Graph,json:D1t(),alg:G1t(),version:n.version},k9}var bO;if(typeof KX=="function")try{bO=j1t()}catch{}bO||(bO=window.graphlib);var cf=bO,F9,kde;function H1t(){if(kde)return F9;kde=1;var n=RMe(),e=1,r=4;function i(a){return n(a,e|r)}return F9=i,F9}var $9,Fde;function GD(){if(Fde)return $9;Fde=1;var n=Q_(),e=Xp(),r=DD(),i=td();function a(o,s,l){if(!i(l))return!1;var c=typeof s;return(c=="number"?e(l)&&r(s,l.length):c=="string"&&s in l)?n(l[s],o):!1}return $9=a,$9}var B9,$de;function W1t(){if($de)return B9;$de=1;var n=VD(),e=Q_(),r=GD(),i=Wy(),a=Object.prototype,o=a.hasOwnProperty,s=n(function(l,c){l=Object(l);var u=-1,d=c.length,f=d>2?c[2]:void 0;for(f&&r(c[0],c[1],f)&&(d=1);++u<d;)for(var h=c[u],p=i(h),g=-1,m=p.length;++g<m;){var v=p[g],y=l[v];(y===void 0||e(y,a[v])&&!o.call(l,v))&&(l[v]=h[v])}return l});return B9=s,B9}var z9,Bde;function q1t(){if(Bde)return z9;Bde=1;var n=Kp(),e=Xp(),r=pv();function i(a){return function(o,s,l){var c=Object(o);if(!e(o)){var u=n(s,3);o=r(o),s=function(f){return u(c[f],f,c)}}var d=a(o,s,l);return d>-1?c[u?o[d]:d]:void 0}}return z9=i,z9}var U9,zde;function Y1t(){if(zde)return U9;zde=1;var n=/\s/;function e(r){for(var i=r.length;i--&&n.test(r.charAt(i)););return i}return U9=e,U9}var V9,Ude;function X1t(){if(Ude)return V9;Ude=1;var n=Y1t(),e=/^\s+/;function r(i){return i&&i.slice(0,n(i)+1).replace(e,"")}return V9=r,V9}var G9,Vde;function K1t(){if(Vde)return G9;Vde=1;var n=X1t(),e=td(),r=nw(),i=NaN,a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt;function c(u){if(typeof u=="number")return u;if(r(u))return i;if(e(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=e(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=n(u);var f=o.test(u);return f||s.test(u)?l(u.slice(2),f?2:8):a.test(u)?i:+u}return G9=c,G9}var j9,Gde;function aTe(){if(Gde)return j9;Gde=1;var n=K1t(),e=1/0,r=17976931348623157e292;function i(a){if(!a)return a===0?a:0;if(a=n(a),a===e||a===-1/0){var o=a<0?-1:1;return o*r}return a===a?a:0}return j9=i,j9}var H9,jde;function Z1t(){if(jde)return H9;jde=1;var n=aTe();function e(r){var i=n(r),a=i%1;return i===i?a?i-a:i:0}return H9=e,H9}var W9,Hde;function Q1t(){if(Hde)return W9;Hde=1;var n=ZMe(),e=Kp(),r=Z1t(),i=Math.max;function a(o,s,l){var c=o==null?0:o.length;if(!c)return-1;var u=l==null?0:r(l);return u<0&&(u=i(c+u,0)),n(o,e(s,3),u)}return W9=a,W9}var q9,Wde;function J1t(){if(Wde)return q9;Wde=1;var n=q1t(),e=Q1t(),r=n(e);return q9=r,q9}var Y9,qde;function oTe(){if(qde)return Y9;qde=1;var n=dK();function e(r){var i=r==null?0:r.length;return i?n(r,1):[]}return Y9=e,Y9}var X9,Yde;function ebt(){if(Yde)return X9;Yde=1;var n=sK(),e=PMe(),r=Wy();function i(a,o){return a==null?a:n(a,e(o),r)}return X9=i,X9}var K9,Xde;function tbt(){if(Xde)return K9;Xde=1;function n(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return K9=n,K9}var Z9,Kde;function nbt(){if(Kde)return Z9;Kde=1;var n=OD(),e=lK(),r=Kp();function i(a,o){var s={};return o=r(o,3),e(a,function(l,c,u){n(s,c,o(l,c,u))}),s}return Z9=i,Z9}var Q9,Zde;function hK(){if(Zde)return Q9;Zde=1;var n=nw();function e(r,i,a){for(var o=-1,s=r.length;++o<s;){var l=r[o],c=i(l);if(c!=null&&(u===void 0?c===c&&!n(c):a(c,u)))var u=c,d=l}return d}return Q9=e,Q9}var J9,Qde;function rbt(){if(Qde)return J9;Qde=1;function n(e,r){return e>r}return J9=n,J9}var e7,Jde;function ibt(){if(Jde)return e7;Jde=1;var n=hK(),e=rbt(),r=qy();function i(a){return a&&a.length?n(a,r,e):void 0}return e7=i,e7}var t7,efe;function sTe(){if(efe)return t7;efe=1;var n=OD(),e=Q_();function r(i,a,o){(o!==void 0&&!e(i[a],o)||o===void 0&&!(a in i))&&n(i,a,o)}return t7=r,t7}var n7,tfe;function abt(){if(tfe)return n7;tfe=1;var n=jy(),e=FD(),r=bh(),i="[object Object]",a=Function.prototype,o=Object.prototype,s=a.toString,l=o.hasOwnProperty,c=s.call(Object);function u(d){if(!r(d)||n(d)!=i)return!1;var f=e(d);if(f===null)return!0;var h=l.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&s.call(h)==c}return n7=u,n7}var r7,nfe;function lTe(){if(nfe)return r7;nfe=1;function n(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}return r7=n,r7}var i7,rfe;function obt(){if(rfe)return i7;rfe=1;var n=FM(),e=Wy();function r(i){return n(i,e(i))}return i7=r,i7}var a7,ife;function sbt(){if(ife)return a7;ife=1;var n=sTe(),e=vMe(),r=MMe(),i=yMe(),a=AMe(),o=$M(),s=yo(),l=QMe(),c=ew(),u=kM(),d=td(),f=abt(),h=BM(),p=lTe(),g=obt();function m(v,y,b,x,_,S,M){var E=p(v,b),T=p(y,b),P=M.get(T);if(P){n(v,b,P);return}var A=S?S(E,T,b+"",v,y,M):void 0,N=A===void 0;if(N){var O=s(T),I=!O&&c(T),D=!O&&!I&&h(T);A=T,O||I||D?s(E)?A=E:l(E)?A=i(E):I?(N=!1,A=e(T,!0)):D?(N=!1,A=r(T,!0)):A=[]:f(T)||o(T)?(A=E,o(E)?A=g(E):(!d(E)||u(E))&&(A=a(T))):N=!1}N&&(M.set(T,A),_(A,T,x,S,M),M.delete(T)),n(v,b,A)}return a7=m,a7}var o7,afe;function lbt(){if(afe)return o7;afe=1;var n=ND(),e=sTe(),r=sK(),i=sbt(),a=td(),o=Wy(),s=lTe();function l(c,u,d,f,h){c!==u&&r(u,function(p,g){if(h||(h=new n),a(p))i(c,u,g,d,l,f,h);else{var m=f?f(s(c,g),p,g+"",c,u,h):void 0;m===void 0&&(m=p),e(c,g,m)}},o)}return o7=l,o7}var s7,ofe;function cbt(){if(ofe)return s7;ofe=1;var n=VD(),e=GD();function r(i){return n(function(a,o){var s=-1,l=o.length,c=l>1?o[l-1]:void 0,u=l>2?o[2]:void 0;for(c=i.length>3&&typeof c=="function"?(l--,c):void 0,u&&e(o[0],o[1],u)&&(c=l<3?void 0:c,l=1),a=Object(a);++s<l;){var d=o[s];d&&i(a,d,s,c)}return a})}return s7=r,s7}var l7,sfe;function ubt(){if(sfe)return l7;sfe=1;var n=lbt(),e=cbt(),r=e(function(i,a,o){n(i,a,o)});return l7=r,l7}var c7,lfe;function cTe(){if(lfe)return c7;lfe=1;function n(e,r){return e<r}return c7=n,c7}var u7,cfe;function dbt(){if(cfe)return u7;cfe=1;var n=hK(),e=cTe(),r=qy();function i(a){return a&&a.length?n(a,r,e):void 0}return u7=i,u7}var d7,ufe;function fbt(){if(ufe)return d7;ufe=1;var n=hK(),e=Kp(),r=cTe();function i(a,o){return a&&a.length?n(a,e(o,2),r):void 0}return d7=i,d7}var f7,dfe;function hbt(){if(dfe)return f7;dfe=1;var n=lf(),e=function(){return n.Date.now()};return f7=e,f7}var h7,ffe;function pbt(){if(ffe)return h7;ffe=1;var n=ID(),e=zD(),r=DD(),i=td(),a=zM();function o(s,l,c,u){if(!i(s))return s;l=e(l,s);for(var d=-1,f=l.length,h=f-1,p=s;p!=null&&++d<f;){var g=a(l[d]),m=c;if(g==="__proto__"||g==="constructor"||g==="prototype")return s;if(d!=h){var v=p[g];m=u?u(v,g,p):void 0,m===void 0&&(m=i(v)?v:r(l[d+1])?[]:{})}n(p,g,m),p=p[g]}return s}return h7=o,h7}var p7,hfe;function gbt(){if(hfe)return p7;hfe=1;var n=UD(),e=pbt(),r=zD();function i(a,o,s){for(var l=-1,c=o.length,u={};++l<c;){var d=o[l],f=n(a,d);s(f,d)&&e(u,r(d,a),f)}return u}return p7=i,p7}var g7,pfe;function mbt(){if(pfe)return g7;pfe=1;var n=gbt(),e=UMe();function r(i,a){return n(i,a,function(o,s){return e(i,s)})}return g7=r,g7}var m7,gfe;function vbt(){if(gfe)return m7;gfe=1;var n=oTe(),e=XMe(),r=KMe();function i(a){return r(e(a,void 0,n),a+"")}return m7=i,m7}var v7,mfe;function ybt(){if(mfe)return v7;mfe=1;var n=mbt(),e=vbt(),r=e(function(i,a){return i==null?{}:n(i,a)});return v7=r,v7}var y7,vfe;function bbt(){if(vfe)return y7;vfe=1;var n=Math.ceil,e=Math.max;function r(i,a,o,s){for(var l=-1,c=e(n((a-i)/(o||1)),0),u=Array(c);c--;)u[s?c:++l]=i,i+=o;return u}return y7=r,y7}var b7,yfe;function xbt(){if(yfe)return b7;yfe=1;var n=bbt(),e=GD(),r=aTe();function i(a){return function(o,s,l){return l&&typeof l!="number"&&e(o,s,l)&&(s=l=void 0),o=r(o),s===void 0?(s=o,o=0):s=r(s),l=l===void 0?o<s?1:-1:r(l),n(o,s,l,a)}}return b7=i,b7}var x7,bfe;function _bt(){if(bfe)return x7;bfe=1;var n=xbt(),e=n();return x7=e,x7}var _7,xfe;function wbt(){if(xfe)return _7;xfe=1;function n(e,r){var i=e.length;for(e.sort(r);i--;)e[i]=e[i].value;return e}return _7=n,_7}var w7,_fe;function Sbt(){if(_fe)return w7;_fe=1;var n=nw();function e(r,i){if(r!==i){var a=r!==void 0,o=r===null,s=r===r,l=n(r),c=i!==void 0,u=i===null,d=i===i,f=n(i);if(!u&&!f&&!l&&r>i||l&&c&&d&&!u&&!f||o&&c&&d||!a&&d||!s)return 1;if(!o&&!l&&!f&&r<i||f&&a&&s&&!o&&!l||u&&a&&s||!c&&s||!d)return-1}return 0}return w7=e,w7}var S7,wfe;function Ebt(){if(wfe)return S7;wfe=1;var n=Sbt();function e(r,i,a){for(var o=-1,s=r.criteria,l=i.criteria,c=s.length,u=a.length;++o<c;){var d=n(s[o],l[o]);if(d){if(o>=u)return d;var f=a[o];return d*(f=="desc"?-1:1)}}return r.index-i.index}return S7=e,S7}var E7,Sfe;function Cbt(){if(Sfe)return E7;Sfe=1;var n=BD(),e=UD(),r=Kp(),i=WMe(),a=wbt(),o=LD(),s=Ebt(),l=qy(),c=yo();function u(d,f,h){f.length?f=n(f,function(m){return c(m)?function(v){return e(v,m.length===1?m[0]:m)}:m}):f=[l];var p=-1;f=n(f,o(r));var g=i(d,function(m,v,y){var b=n(f,function(x){return x(m)});return{criteria:b,index:++p,value:m}});return a(g,function(m,v){return s(m,v,h)})}return E7=u,E7}var C7,Efe;function Mbt(){if(Efe)return C7;Efe=1;var n=dK(),e=Cbt(),r=VD(),i=GD(),a=r(function(o,s){if(o==null)return[];var l=s.length;return l>1&&i(o,s[0],s[1])?s=[]:l>2&&i(s[0],s[1],s[2])&&(s=[s[0]]),e(o,n(s,1),[])});return C7=a,C7}var M7,Cfe;function Tbt(){if(Cfe)return M7;Cfe=1;var n=BMe(),e=0;function r(i){var a=++e;return n(i)+a}return M7=r,M7}var T7,Mfe;function Abt(){if(Mfe)return T7;Mfe=1;function n(e,r,i){for(var a=-1,o=e.length,s=r.length,l={};++a<o;){var c=a<s?r[a]:void 0;i(l,e[a],c)}return l}return T7=n,T7}var A7,Tfe;function Rbt(){if(Tfe)return A7;Tfe=1;var n=ID(),e=Abt();function r(i,a){return e(i||[],a||[],n)}return A7=r,A7}var xO;if(typeof KX=="function")try{xO={cloneDeep:H1t(),constant:oK(),defaults:W1t(),each:OMe(),filter:GMe(),find:J1t(),flatten:oTe(),forEach:NMe(),forIn:ebt(),has:jMe(),isUndefined:HMe(),last:tbt(),map:qMe(),mapValues:nbt(),max:ibt(),merge:ubt(),min:dbt(),minBy:fbt(),now:hbt(),pick:ybt(),range:_bt(),reduce:YMe(),sortBy:Mbt(),uniqueId:Tbt(),values:JMe(),zipObject:Rbt()}}catch{}xO||(xO=window._);var ba=xO,Pbt=jD;function jD(){var n={};n._next=n._prev=n,this._sentinel=n}jD.prototype.dequeue=function(){var n=this._sentinel,e=n._prev;if(e!==n)return uTe(e),e};jD.prototype.enqueue=function(n){var e=this._sentinel;n._prev&&n._next&&uTe(n),n._next=e._next,e._next._prev=n,e._next=n,n._prev=e};jD.prototype.toString=function(){for(var n=[],e=this._sentinel,r=e._prev;r!==e;)n.push(JSON.stringify(r,Nbt)),r=r._prev;return"["+n.join(", ")+"]"};function uTe(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function Nbt(n,e){if(n!=="_next"&&n!=="_prev")return e}var fp=ba,Obt=cf.Graph,Ibt=Pbt,Dbt=kbt,Lbt=fp.constant(1);function kbt(n,e){if(n.nodeCount()<=1)return[];var r=$bt(n,e||Lbt),i=Fbt(r.graph,r.buckets,r.zeroIdx);return fp.flatten(fp.map(i,function(a){return n.outEdges(a.v,a.w)}),!0)}function Fbt(n,e,r){for(var i=[],a=e[e.length-1],o=e[0],s;n.nodeCount();){for(;s=o.dequeue();)R7(n,e,r,s);for(;s=a.dequeue();)R7(n,e,r,s);if(n.nodeCount()){for(var l=e.length-2;l>0;--l)if(s=e[l].dequeue(),s){i=i.concat(R7(n,e,r,s,!0));break}}}return i}function R7(n,e,r,i,a){var o=a?[]:void 0;return fp.forEach(n.inEdges(i.v),function(s){var l=n.edge(s),c=n.node(s.v);a&&o.push({v:s.v,w:s.w}),c.out-=l,cH(e,r,c)}),fp.forEach(n.outEdges(i.v),function(s){var l=n.edge(s),c=s.w,u=n.node(c);u.in-=l,cH(e,r,u)}),n.removeNode(i.v),o}function $bt(n,e){var r=new Obt,i=0,a=0;fp.forEach(n.nodes(),function(l){r.setNode(l,{v:l,in:0,out:0})}),fp.forEach(n.edges(),function(l){var c=r.edge(l.v,l.w)||0,u=e(l),d=c+u;r.setEdge(l.v,l.w,d),a=Math.max(a,r.node(l.v).out+=u),i=Math.max(i,r.node(l.w).in+=u)});var o=fp.range(a+i+3).map(function(){return new Ibt}),s=i+1;return fp.forEach(r.nodes(),function(l){cH(o,s,r.node(l))}),{graph:r,buckets:o,zeroIdx:s}}function cH(n,e,r){r.out?r.in?n[r.out-r.in+e].enqueue(r):n[n.length-1].enqueue(r):n[0].enqueue(r)}var D0=ba,Bbt=Dbt,zbt={run:Ubt,undo:Gbt};function Ubt(n){var e=n.graph().acyclicer==="greedy"?Bbt(n,r(n)):Vbt(n);D0.forEach(e,function(i){var a=n.edge(i);n.removeEdge(i),a.forwardName=i.name,a.reversed=!0,n.setEdge(i.w,i.v,a,D0.uniqueId("rev"))});function r(i){return function(a){return i.edge(a).weight}}}function Vbt(n){var e=[],r={},i={};function a(o){D0.has(i,o)||(i[o]=!0,r[o]=!0,D0.forEach(n.outEdges(o),function(s){D0.has(r,s.w)?e.push(s):a(s.w)}),delete r[o])}return D0.forEach(n.nodes(),a),e}function Gbt(n){D0.forEach(n.edges(),function(e){var r=n.edge(e);if(r.reversed){n.removeEdge(e);var i=r.forwardName;delete r.reversed,delete r.forwardName,n.setEdge(e.w,e.v,r,i)}})}var hi=ba,dTe=cf.Graph,rc={addDummyNode:fTe,simplify:jbt,asNonCompoundGraph:Hbt,successorWeights:Wbt,predecessorWeights:qbt,intersectRect:Ybt,buildLayerMatrix:Xbt,normalizeRanks:Kbt,removeEmptyRanks:Zbt,addBorderNode:Qbt,maxRank:hTe,partition:Jbt,time:ext,notime:txt};function fTe(n,e,r,i){var a;do a=hi.uniqueId(i);while(n.hasNode(a));return r.dummy=e,n.setNode(a,r),a}function jbt(n){var e=new dTe().setGraph(n.graph());return hi.forEach(n.nodes(),function(r){e.setNode(r,n.node(r))}),hi.forEach(n.edges(),function(r){var i=e.edge(r.v,r.w)||{weight:0,minlen:1},a=n.edge(r);e.setEdge(r.v,r.w,{weight:i.weight+a.weight,minlen:Math.max(i.minlen,a.minlen)})}),e}function Hbt(n){var e=new dTe({multigraph:n.isMultigraph()}).setGraph(n.graph());return hi.forEach(n.nodes(),function(r){n.children(r).length||e.setNode(r,n.node(r))}),hi.forEach(n.edges(),function(r){e.setEdge(r,n.edge(r))}),e}function Wbt(n){var e=hi.map(n.nodes(),function(r){var i={};return hi.forEach(n.outEdges(r),function(a){i[a.w]=(i[a.w]||0)+n.edge(a).weight}),i});return hi.zipObject(n.nodes(),e)}function qbt(n){var e=hi.map(n.nodes(),function(r){var i={};return hi.forEach(n.inEdges(r),function(a){i[a.v]=(i[a.v]||0)+n.edge(a).weight}),i});return hi.zipObject(n.nodes(),e)}function Ybt(n,e){var r=n.x,i=n.y,a=e.x-r,o=e.y-i,s=n.width/2,l=n.height/2;if(!a&&!o)throw new Error("Not possible to find intersection inside of the rectangle");var c,u;return Math.abs(o)*s>Math.abs(a)*l?(o<0&&(l=-l),c=l*a/o,u=l):(a<0&&(s=-s),c=s,u=s*o/a),{x:r+c,y:i+u}}function Xbt(n){var e=hi.map(hi.range(hTe(n)+1),function(){return[]});return hi.forEach(n.nodes(),function(r){var i=n.node(r),a=i.rank;hi.isUndefined(a)||(e[a][i.order]=r)}),e}function Kbt(n){var e=hi.min(hi.map(n.nodes(),function(r){return n.node(r).rank}));hi.forEach(n.nodes(),function(r){var i=n.node(r);hi.has(i,"rank")&&(i.rank-=e)})}function Zbt(n){var e=hi.min(hi.map(n.nodes(),function(o){return n.node(o).rank})),r=[];hi.forEach(n.nodes(),function(o){var s=n.node(o).rank-e;r[s]||(r[s]=[]),r[s].push(o)});var i=0,a=n.graph().nodeRankFactor;hi.forEach(r,function(o,s){hi.isUndefined(o)&&s%a!==0?--i:i&&hi.forEach(o,function(l){n.node(l).rank+=i})})}function Qbt(n,e,r,i){var a={width:0,height:0};return arguments.length>=4&&(a.rank=r,a.order=i),fTe(n,"border",a,e)}function hTe(n){return hi.max(hi.map(n.nodes(),function(e){var r=n.node(e).rank;if(!hi.isUndefined(r))return r}))}function Jbt(n,e){var r={lhs:[],rhs:[]};return hi.forEach(n,function(i){e(i)?r.lhs.push(i):r.rhs.push(i)}),r}function ext(n,e){var r=hi.now();try{return e()}finally{console.log(n+" time: "+(hi.now()-r)+"ms")}}function txt(n,e){return e()}var pTe=ba,nxt=rc,rxt={run:ixt,undo:oxt};function ixt(n){n.graph().dummyChains=[],pTe.forEach(n.edges(),function(e){axt(n,e)})}function axt(n,e){var r=e.v,i=n.node(r).rank,a=e.w,o=n.node(a).rank,s=e.name,l=n.edge(e),c=l.labelRank;if(o!==i+1){n.removeEdge(e);var u,d,f;for(f=0,++i;i<o;++f,++i)l.points=[],d={width:0,height:0,edgeLabel:l,edgeObj:e,rank:i},u=nxt.addDummyNode(n,"edge",d,"_d"),i===c&&(d.width=l.width,d.height=l.height,d.dummy="edge-label",d.labelpos=l.labelpos),n.setEdge(r,u,{weight:l.weight},s),f===0&&n.graph().dummyChains.push(u),r=u;n.setEdge(r,a,{weight:l.weight},s)}}function oxt(n){pTe.forEach(n.graph().dummyChains,function(e){var r=n.node(e),i=r.edgeLabel,a;for(n.setEdge(r.edgeObj,i);r.dummy;)a=n.successors(e)[0],n.removeNode(e),i.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=a,r=n.node(e)})}var EA=ba,HD={longestPath:sxt,slack:lxt};function sxt(n){var e={};function r(i){var a=n.node(i);if(EA.has(e,i))return a.rank;e[i]=!0;var o=EA.min(EA.map(n.outEdges(i),function(s){return r(s.w)-n.edge(s).minlen}));return(o===Number.POSITIVE_INFINITY||o===void 0||o===null)&&(o=0),a.rank=o}EA.forEach(n.sources(),r)}function lxt(n,e){return n.node(e.w).rank-n.node(e.v).rank-n.edge(e).minlen}var _O=ba,cxt=cf.Graph,wO=HD.slack,gTe=uxt;function uxt(n){var e=new cxt({directed:!1}),r=n.nodes()[0],i=n.nodeCount();e.setNode(r,{});for(var a,o;dxt(e,n)<i;)a=fxt(e,n),o=e.hasNode(a.v)?wO(n,a):-wO(n,a),hxt(e,n,o);return e}function dxt(n,e){function r(i){_O.forEach(e.nodeEdges(i),function(a){var o=a.v,s=i===o?a.w:o;!n.hasNode(s)&&!wO(e,a)&&(n.setNode(s,{}),n.setEdge(i,s,{}),r(s))})}return _O.forEach(n.nodes(),r),n.nodeCount()}function fxt(n,e){return _O.minBy(e.edges(),function(r){if(n.hasNode(r.v)!==n.hasNode(r.w))return wO(e,r)})}function hxt(n,e,r){_O.forEach(n.nodes(),function(i){e.node(i).rank+=r})}var kp=ba,pxt=gTe,gxt=HD.slack,mxt=HD.longestPath,vxt=cf.alg.preorder,yxt=cf.alg.postorder,bxt=rc.simplify,xxt=Yy;Yy.initLowLimValues=gK;Yy.initCutValues=pK;Yy.calcCutValue=mTe;Yy.leaveEdge=yTe;Yy.enterEdge=bTe;Yy.exchangeEdges=xTe;function Yy(n){n=bxt(n),mxt(n);var e=pxt(n);gK(e),pK(e,n);for(var r,i;r=yTe(e);)i=bTe(e,n,r),xTe(e,n,r,i)}function pK(n,e){var r=yxt(n,n.nodes());r=r.slice(0,r.length-1),kp.forEach(r,function(i){_xt(n,e,i)})}function _xt(n,e,r){var i=n.node(r),a=i.parent;n.edge(r,a).cutvalue=mTe(n,e,r)}function mTe(n,e,r){var i=n.node(r),a=i.parent,o=!0,s=e.edge(r,a),l=0;return s||(o=!1,s=e.edge(a,r)),l=s.weight,kp.forEach(e.nodeEdges(r),function(c){var u=c.v===r,d=u?c.w:c.v;if(d!==a){var f=u===o,h=e.edge(c).weight;if(l+=f?h:-h,Sxt(n,r,d)){var p=n.edge(r,d).cutvalue;l+=f?-p:p}}}),l}function gK(n,e){arguments.length<2&&(e=n.nodes()[0]),vTe(n,{},1,e)}function vTe(n,e,r,i,a){var o=r,s=n.node(i);return e[i]=!0,kp.forEach(n.neighbors(i),function(l){kp.has(e,l)||(r=vTe(n,e,r,l,i))}),s.low=o,s.lim=r++,a?s.parent=a:delete s.parent,r}function yTe(n){return kp.find(n.edges(),function(e){return n.edge(e).cutvalue<0})}function bTe(n,e,r){var i=r.v,a=r.w;e.hasEdge(i,a)||(i=r.w,a=r.v);var o=n.node(i),s=n.node(a),l=o,c=!1;o.lim>s.lim&&(l=s,c=!0);var u=kp.filter(e.edges(),function(d){return c===Afe(n,n.node(d.v),l)&&c!==Afe(n,n.node(d.w),l)});return kp.minBy(u,function(d){return gxt(e,d)})}function xTe(n,e,r,i){var a=r.v,o=r.w;n.removeEdge(a,o),n.setEdge(i.v,i.w,{}),gK(n),pK(n,e),wxt(n,e)}function wxt(n,e){var r=kp.find(n.nodes(),function(a){return!e.node(a).parent}),i=vxt(n,r);i=i.slice(1),kp.forEach(i,function(a){var o=n.node(a).parent,s=e.edge(a,o),l=!1;s||(s=e.edge(o,a),l=!0),e.node(a).rank=e.node(o).rank+(l?s.minlen:-s.minlen)})}function Sxt(n,e,r){return n.hasEdge(e,r)}function Afe(n,e,r){return r.low<=e.lim&&e.lim<=r.lim}var Ext=HD,_Te=Ext.longestPath,Cxt=gTe,Mxt=xxt,Txt=Axt;function Axt(n){switch(n.graph().ranker){case"network-simplex":Rfe(n);break;case"tight-tree":Pxt(n);break;case"longest-path":Rxt(n);break;default:Rfe(n)}}var Rxt=_Te;function Pxt(n){_Te(n),Cxt(n)}function Rfe(n){Mxt(n)}var uH=ba,Nxt=Oxt;function Oxt(n){var e=Dxt(n);uH.forEach(n.graph().dummyChains,function(r){for(var i=n.node(r),a=i.edgeObj,o=Ixt(n,e,a.v,a.w),s=o.path,l=o.lca,c=0,u=s[c],d=!0;r!==a.w;){if(i=n.node(r),d){for(;(u=s[c])!==l&&n.node(u).maxRank<i.rank;)c++;u===l&&(d=!1)}if(!d){for(;c<s.length-1&&n.node(u=s[c+1]).minRank<=i.rank;)c++;u=s[c]}n.setParent(r,u),r=n.successors(r)[0]}})}function Ixt(n,e,r,i){var a=[],o=[],s=Math.min(e[r].low,e[i].low),l=Math.max(e[r].lim,e[i].lim),c,u;c=r;do c=n.parent(c),a.push(c);while(c&&(e[c].low>s||l>e[c].lim));for(u=c,c=i;(c=n.parent(c))!==u;)o.push(c);return{path:a.concat(o.reverse()),lca:u}}function Dxt(n){var e={},r=0;function i(a){var o=r;uH.forEach(n.children(a),i),e[a]={low:o,lim:r++}}return uH.forEach(n.children(),i),e}var hp=ba,dH=rc,Lxt={run:kxt,cleanup:Bxt};function kxt(n){var e=dH.addDummyNode(n,"root",{},"_root"),r=Fxt(n),i=hp.max(hp.values(r))-1,a=2*i+1;n.graph().nestingRoot=e,hp.forEach(n.edges(),function(s){n.edge(s).minlen*=a});var o=$xt(n)+1;hp.forEach(n.children(),function(s){wTe(n,e,a,o,i,r,s)}),n.graph().nodeRankFactor=a}function wTe(n,e,r,i,a,o,s){var l=n.children(s);if(!l.length){s!==e&&n.setEdge(e,s,{weight:0,minlen:r});return}var c=dH.addBorderNode(n,"_bt"),u=dH.addBorderNode(n,"_bb"),d=n.node(s);n.setParent(c,s),d.borderTop=c,n.setParent(u,s),d.borderBottom=u,hp.forEach(l,function(f){wTe(n,e,r,i,a,o,f);var h=n.node(f),p=h.borderTop?h.borderTop:f,g=h.borderBottom?h.borderBottom:f,m=h.borderTop?i:2*i,v=p!==g?1:a-o[s]+1;n.setEdge(c,p,{weight:m,minlen:v,nestingEdge:!0}),n.setEdge(g,u,{weight:m,minlen:v,nestingEdge:!0})}),n.parent(s)||n.setEdge(e,c,{weight:0,minlen:a+o[s]})}function Fxt(n){var e={};function r(i,a){var o=n.children(i);o&&o.length&&hp.forEach(o,function(s){r(s,a+1)}),e[i]=a}return hp.forEach(n.children(),function(i){r(i,1)}),e}function $xt(n){return hp.reduce(n.edges(),function(e,r){return e+n.edge(r).weight},0)}function Bxt(n){var e=n.graph();n.removeNode(e.nestingRoot),delete e.nestingRoot,hp.forEach(n.edges(),function(r){var i=n.edge(r);i.nestingEdge&&n.removeEdge(r)})}var P7=ba,zxt=rc,Uxt=Vxt;function Vxt(n){function e(r){var i=n.children(r),a=n.node(r);if(i.length&&P7.forEach(i,e),P7.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var o=a.minRank,s=a.maxRank+1;o<s;++o)Pfe(n,"borderLeft","_bl",r,a,o),Pfe(n,"borderRight","_br",r,a,o)}}P7.forEach(n.children(),e)}function Pfe(n,e,r,i,a,o){var s={width:0,height:0,rank:o,borderType:e},l=a[e][o-1],c=zxt.addDummyNode(n,"border",s,r);a[e][o]=c,n.setParent(c,i),l&&n.setEdge(l,c,{weight:1})}var Vf=ba,Gxt={adjust:jxt,undo:Hxt};function jxt(n){var e=n.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&STe(n)}function Hxt(n){var e=n.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&Wxt(n),(e==="lr"||e==="rl")&&(qxt(n),STe(n))}function STe(n){Vf.forEach(n.nodes(),function(e){Nfe(n.node(e))}),Vf.forEach(n.edges(),function(e){Nfe(n.edge(e))})}function Nfe(n){var e=n.width;n.width=n.height,n.height=e}function Wxt(n){Vf.forEach(n.nodes(),function(e){N7(n.node(e))}),Vf.forEach(n.edges(),function(e){var r=n.edge(e);Vf.forEach(r.points,N7),Vf.has(r,"y")&&N7(r)})}function N7(n){n.y=-n.y}function qxt(n){Vf.forEach(n.nodes(),function(e){O7(n.node(e))}),Vf.forEach(n.edges(),function(e){var r=n.edge(e);Vf.forEach(r.points,O7),Vf.has(r,"x")&&O7(r)})}function O7(n){var e=n.x;n.x=n.y,n.y=e}var Oh=ba,Yxt=Xxt;function Xxt(n){var e={},r=Oh.filter(n.nodes(),function(l){return!n.children(l).length}),i=Oh.max(Oh.map(r,function(l){return n.node(l).rank})),a=Oh.map(Oh.range(i+1),function(){return[]});function o(l){if(!Oh.has(e,l)){e[l]=!0;var c=n.node(l);a[c.rank].push(l),Oh.forEach(n.successors(l),o)}}var s=Oh.sortBy(r,function(l){return n.node(l).rank});return Oh.forEach(s,o),a}var vg=ba,Kxt=Zxt;function Zxt(n,e){for(var r=0,i=1;i<e.length;++i)r+=Qxt(n,e[i-1],e[i]);return r}function Qxt(n,e,r){for(var i=vg.zipObject(r,vg.map(r,function(u,d){return d})),a=vg.flatten(vg.map(e,function(u){return vg.sortBy(vg.map(n.outEdges(u),function(d){return{pos:i[d.w],weight:n.edge(d).weight}}),"pos")}),!0),o=1;o<r.length;)o<<=1;var s=2*o-1;o-=1;var l=vg.map(new Array(s),function(){return 0}),c=0;return vg.forEach(a.forEach(function(u){var d=u.pos+o;l[d]+=u.weight;for(var f=0;d>0;)d%2&&(f+=l[d+1]),d=d-1>>1,l[d]+=u.weight;c+=u.weight*f})),c}var Ofe=ba,Jxt=e_t;function e_t(n,e){return Ofe.map(e,function(r){var i=n.inEdges(r);if(i.length){var a=Ofe.reduce(i,function(o,s){var l=n.edge(s),c=n.node(s.v);return{sum:o.sum+l.weight*c.order,weight:o.weight+l.weight}},{sum:0,weight:0});return{v:r,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:r}})}var Ac=ba,t_t=n_t;function n_t(n,e){var r={};Ac.forEach(n,function(a,o){var s=r[a.v]={indegree:0,in:[],out:[],vs:[a.v],i:o};Ac.isUndefined(a.barycenter)||(s.barycenter=a.barycenter,s.weight=a.weight)}),Ac.forEach(e.edges(),function(a){var o=r[a.v],s=r[a.w];!Ac.isUndefined(o)&&!Ac.isUndefined(s)&&(s.indegree++,o.out.push(r[a.w]))});var i=Ac.filter(r,function(a){return!a.indegree});return r_t(i)}function r_t(n){var e=[];function r(o){return function(s){s.merged||(Ac.isUndefined(s.barycenter)||Ac.isUndefined(o.barycenter)||s.barycenter>=o.barycenter)&&i_t(o,s)}}function i(o){return function(s){s.in.push(o),--s.indegree===0&&n.push(s)}}for(;n.length;){var a=n.pop();e.push(a),Ac.forEach(a.in.reverse(),r(a)),Ac.forEach(a.out,i(a))}return Ac.map(Ac.filter(e,function(o){return!o.merged}),function(o){return Ac.pick(o,["vs","i","barycenter","weight"])})}function i_t(n,e){var r=0,i=0;n.weight&&(r+=n.barycenter*n.weight,i+=n.weight),e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),n.vs=e.vs.concat(n.vs),n.barycenter=r/i,n.weight=i,n.i=Math.min(e.i,n.i),e.merged=!0}var f2=ba,a_t=rc,o_t=s_t;function s_t(n,e){var r=a_t.partition(n,function(d){return f2.has(d,"barycenter")}),i=r.lhs,a=f2.sortBy(r.rhs,function(d){return-d.i}),o=[],s=0,l=0,c=0;i.sort(l_t(!!e)),c=Ife(o,a,c),f2.forEach(i,function(d){c+=d.vs.length,o.push(d.vs),s+=d.barycenter*d.weight,l+=d.weight,c=Ife(o,a,c)});var u={vs:f2.flatten(o,!0)};return l&&(u.barycenter=s/l,u.weight=l),u}function Ife(n,e,r){for(var i;e.length&&(i=f2.last(e)).i<=r;)e.pop(),n.push(i.vs),r++;return r}function l_t(n){return function(e,r){return e.barycenter<r.barycenter?-1:e.barycenter>r.barycenter?1:n?r.i-e.i:e.i-r.i}}var Hg=ba,c_t=Jxt,u_t=t_t,d_t=o_t,f_t=ETe;function ETe(n,e,r,i){var a=n.children(e),o=n.node(e),s=o?o.borderLeft:void 0,l=o?o.borderRight:void 0,c={};s&&(a=Hg.filter(a,function(g){return g!==s&&g!==l}));var u=c_t(n,a);Hg.forEach(u,function(g){if(n.children(g.v).length){var m=ETe(n,g.v,r,i);c[g.v]=m,Hg.has(m,"barycenter")&&p_t(g,m)}});var d=u_t(u,r);h_t(d,c);var f=d_t(d,i);if(s&&(f.vs=Hg.flatten([s,f.vs,l],!0),n.predecessors(s).length)){var h=n.node(n.predecessors(s)[0]),p=n.node(n.predecessors(l)[0]);Hg.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+h.order+p.order)/(f.weight+2),f.weight+=2}return f}function h_t(n,e){Hg.forEach(n,function(r){r.vs=Hg.flatten(r.vs.map(function(i){return e[i]?e[i].vs:i}),!0)})}function p_t(n,e){Hg.isUndefined(n.barycenter)?(n.barycenter=e.barycenter,n.weight=e.weight):(n.barycenter=(n.barycenter*n.weight+e.barycenter*e.weight)/(n.weight+e.weight),n.weight+=e.weight)}var h2=ba,g_t=cf.Graph,m_t=v_t;function v_t(n,e,r){var i=y_t(n),a=new g_t({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(o){return n.node(o)});return h2.forEach(n.nodes(),function(o){var s=n.node(o),l=n.parent(o);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(a.setNode(o),a.setParent(o,l||i),h2.forEach(n[r](o),function(c){var u=c.v===o?c.w:c.v,d=a.edge(u,o),f=h2.isUndefined(d)?0:d.weight;a.setEdge(u,o,{weight:n.edge(c).weight+f})}),h2.has(s,"minRank")&&a.setNode(o,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),a}function y_t(n){for(var e;n.hasNode(e=h2.uniqueId("_root")););return e}var b_t=ba,x_t=__t;function __t(n,e,r){var i={},a;b_t.forEach(r,function(o){for(var s=n.parent(o),l,c;s;){if(l=n.parent(s),l?(c=i[l],i[l]=s):(c=a,a=s),c&&c!==s){e.setEdge(c,s);return}s=l}})}var Tm=ba,w_t=Yxt,S_t=Kxt,E_t=f_t,C_t=m_t,M_t=x_t,T_t=cf.Graph,Dfe=rc,A_t=R_t;function R_t(n){var e=Dfe.maxRank(n),r=Lfe(n,Tm.range(1,e+1),"inEdges"),i=Lfe(n,Tm.range(e-1,-1,-1),"outEdges"),a=w_t(n);kfe(n,a);for(var o=Number.POSITIVE_INFINITY,s,l=0,c=0;c<4;++l,++c){P_t(l%2?r:i,l%4>=2),a=Dfe.buildLayerMatrix(n);var u=S_t(n,a);u<o&&(c=0,s=Tm.cloneDeep(a),o=u)}kfe(n,s)}function Lfe(n,e,r){return Tm.map(e,function(i){return C_t(n,i,r)})}function P_t(n,e){var r=new T_t;Tm.forEach(n,function(i){var a=i.graph().root,o=E_t(i,a,r,e);Tm.forEach(o.vs,function(s,l){i.node(s).order=l}),M_t(i,r,o.vs)})}function kfe(n,e){Tm.forEach(e,function(r){Tm.forEach(r,function(i,a){n.node(i).order=a})})}var or=ba,N_t=cf.Graph,O_t=rc,I_t={positionX:j_t};function D_t(n,e){var r={};function i(a,o){var s=0,l=0,c=a.length,u=or.last(o);return or.forEach(o,function(d,f){var h=k_t(n,d),p=h?n.node(h).order:c;(h||d===u)&&(or.forEach(o.slice(l,f+1),function(g){or.forEach(n.predecessors(g),function(m){var v=n.node(m),y=v.order;(y<s||p<y)&&!(v.dummy&&n.node(g).dummy)&&CTe(r,m,g)})}),l=f+1,s=p)}),o}return or.reduce(e,i),r}function L_t(n,e){var r={};function i(o,s,l,c,u){var d;or.forEach(or.range(s,l),function(f){d=o[f],n.node(d).dummy&&or.forEach(n.predecessors(d),function(h){var p=n.node(h);p.dummy&&(p.order<c||p.order>u)&&CTe(r,h,d)})})}function a(o,s){var l=-1,c,u=0;return or.forEach(s,function(d,f){if(n.node(d).dummy==="border"){var h=n.predecessors(d);h.length&&(c=n.node(h[0]).order,i(s,u,f,l,c),u=f,l=c)}i(s,u,s.length,c,o.length)}),s}return or.reduce(e,a),r}function k_t(n,e){if(n.node(e).dummy)return or.find(n.predecessors(e),function(r){return n.node(r).dummy})}function CTe(n,e,r){if(e>r){var i=e;e=r,r=i}var a=n[e];a||(n[e]=a={}),a[r]=!0}function F_t(n,e,r){if(e>r){var i=e;e=r,r=i}return or.has(n[e],r)}function $_t(n,e,r,i){var a={},o={},s={};return or.forEach(e,function(l){or.forEach(l,function(c,u){a[c]=c,o[c]=c,s[c]=u})}),or.forEach(e,function(l){var c=-1;or.forEach(l,function(u){var d=i(u);if(d.length){d=or.sortBy(d,function(m){return s[m]});for(var f=(d.length-1)/2,h=Math.floor(f),p=Math.ceil(f);h<=p;++h){var g=d[h];o[u]===u&&c<s[g]&&!F_t(r,u,g)&&(o[g]=u,o[u]=a[u]=a[g],c=s[g])}}})}),{root:a,align:o}}function B_t(n,e,r,i,a){var o={},s=z_t(n,e,r,a),l=a?"borderLeft":"borderRight";function c(f,h){for(var p=s.nodes(),g=p.pop(),m={};g;)m[g]?f(g):(m[g]=!0,p.push(g),p=p.concat(h(g))),g=p.pop()}function u(f){o[f]=s.inEdges(f).reduce(function(h,p){return Math.max(h,o[p.v]+s.edge(p))},0)}function d(f){var h=s.outEdges(f).reduce(function(g,m){return Math.min(g,o[m.w]-s.edge(m))},Number.POSITIVE_INFINITY),p=n.node(f);h!==Number.POSITIVE_INFINITY&&p.borderType!==l&&(o[f]=Math.max(o[f],h))}return c(u,s.predecessors.bind(s)),c(d,s.successors.bind(s)),or.forEach(i,function(f){o[f]=o[r[f]]}),o}function z_t(n,e,r,i){var a=new N_t,o=n.graph(),s=H_t(o.nodesep,o.edgesep,i);return or.forEach(e,function(l){var c;or.forEach(l,function(u){var d=r[u];if(a.setNode(d),c){var f=r[c],h=a.edge(f,d);a.setEdge(f,d,Math.max(s(n,u,c),h||0))}c=u})}),a}function U_t(n,e){return or.minBy(or.values(e),function(r){var i=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return or.forIn(r,function(o,s){var l=W_t(n,s)/2;i=Math.max(o+l,i),a=Math.min(o-l,a)}),i-a})}function V_t(n,e){var r=or.values(e),i=or.min(r),a=or.max(r);or.forEach(["u","d"],function(o){or.forEach(["l","r"],function(s){var l=o+s,c=n[l],u;if(c!==e){var d=or.values(c);u=s==="l"?i-or.min(d):a-or.max(d),u&&(n[l]=or.mapValues(c,function(f){return f+u}))}})})}function G_t(n,e){return or.mapValues(n.ul,function(r,i){if(e)return n[e.toLowerCase()][i];var a=or.sortBy(or.map(n,i));return(a[1]+a[2])/2})}function j_t(n){var e=O_t.buildLayerMatrix(n),r=or.merge(D_t(n,e),L_t(n,e)),i={},a;or.forEach(["u","d"],function(s){a=s==="u"?e:or.values(e).reverse(),or.forEach(["l","r"],function(l){l==="r"&&(a=or.map(a,function(f){return or.values(f).reverse()}));var c=(s==="u"?n.predecessors:n.successors).bind(n),u=$_t(n,a,r,c),d=B_t(n,a,u.root,u.align,l==="r");l==="r"&&(d=or.mapValues(d,function(f){return-f})),i[s+l]=d})});var o=U_t(n,i);return V_t(i,o),G_t(i,n.graph().align)}function H_t(n,e,r){return function(i,a,o){var s=i.node(a),l=i.node(o),c=0,u;if(c+=s.width/2,or.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2;break}if(u&&(c+=r?u:-u),u=0,c+=(s.dummy?e:n)/2,c+=(l.dummy?e:n)/2,c+=l.width/2,or.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":u=l.width/2;break;case"r":u=-l.width/2;break}return u&&(c+=r?u:-u),u=0,c}}function W_t(n,e){return n.node(e).width}var p2=ba,MTe=rc,q_t=I_t.positionX,Y_t=X_t;function X_t(n){n=MTe.asNonCompoundGraph(n),K_t(n),p2.forEach(q_t(n),function(e,r){n.node(r).x=e})}function K_t(n){var e=MTe.buildLayerMatrix(n),r=n.graph().ranksep,i=0;p2.forEach(e,function(a){var o=p2.max(p2.map(a,function(s){return n.node(s).height}));p2.forEach(a,function(s){n.node(s).y=i+o/2}),i+=o+r})}var Pr=ba,Ffe=zbt,$fe=rxt,Z_t=Txt,Q_t=rc.normalizeRanks,J_t=Nxt,ewt=rc.removeEmptyRanks,Bfe=Lxt,twt=Uxt,zfe=Gxt,nwt=A_t,rwt=Y_t,Xm=rc,iwt=cf.Graph,awt=owt;function owt(n,e){var r=e&&e.debugTiming?Xm.time:Xm.notime;r("layout",function(){var i=r("  buildLayoutGraph",function(){return vwt(n)});r("  runLayout",function(){swt(i,r)}),r("  updateInputGraph",function(){lwt(n,i)})})}function swt(n,e){e("    makeSpaceForEdgeLabels",function(){ywt(n)}),e("    removeSelfEdges",function(){Twt(n)}),e("    acyclic",function(){Ffe.run(n)}),e("    nestingGraph.run",function(){Bfe.run(n)}),e("    rank",function(){Z_t(Xm.asNonCompoundGraph(n))}),e("    injectEdgeLabelProxies",function(){bwt(n)}),e("    removeEmptyRanks",function(){ewt(n)}),e("    nestingGraph.cleanup",function(){Bfe.cleanup(n)}),e("    normalizeRanks",function(){Q_t(n)}),e("    assignRankMinMax",function(){xwt(n)}),e("    removeEdgeLabelProxies",function(){_wt(n)}),e("    normalize.run",function(){$fe.run(n)}),e("    parentDummyChains",function(){J_t(n)}),e("    addBorderSegments",function(){twt(n)}),e("    order",function(){nwt(n)}),e("    insertSelfEdges",function(){Awt(n)}),e("    adjustCoordinateSystem",function(){zfe.adjust(n)}),e("    position",function(){rwt(n)}),e("    positionSelfEdges",function(){Rwt(n)}),e("    removeBorderNodes",function(){Mwt(n)}),e("    normalize.undo",function(){$fe.undo(n)}),e("    fixupEdgeLabelCoords",function(){Ewt(n)}),e("    undoCoordinateSystem",function(){zfe.undo(n)}),e("    translateGraph",function(){wwt(n)}),e("    assignNodeIntersects",function(){Swt(n)}),e("    reversePoints",function(){Cwt(n)}),e("    acyclic.undo",function(){Ffe.undo(n)})}function lwt(n,e){Pr.forEach(n.nodes(),function(r){var i=n.node(r),a=e.node(r);i&&(i.x=a.x,i.y=a.y,e.children(r).length&&(i.width=a.width,i.height=a.height))}),Pr.forEach(n.edges(),function(r){var i=n.edge(r),a=e.edge(r);i.points=a.points,Pr.has(a,"x")&&(i.x=a.x,i.y=a.y)}),n.graph().width=e.graph().width,n.graph().height=e.graph().height}var cwt=["nodesep","edgesep","ranksep","marginx","marginy"],uwt={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},dwt=["acyclicer","ranker","rankdir","align"],fwt=["width","height"],hwt={width:0,height:0},pwt=["minlen","weight","width","height","labeloffset"],gwt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},mwt=["labelpos"];function vwt(n){var e=new iwt({multigraph:!0,compound:!0}),r=D7(n.graph());return e.setGraph(Pr.merge({},uwt,I7(r,cwt),Pr.pick(r,dwt))),Pr.forEach(n.nodes(),function(i){var a=D7(n.node(i));e.setNode(i,Pr.defaults(I7(a,fwt),hwt)),e.setParent(i,n.parent(i))}),Pr.forEach(n.edges(),function(i){var a=D7(n.edge(i));e.setEdge(i,Pr.merge({},gwt,I7(a,pwt),Pr.pick(a,mwt)))}),e}function ywt(n){var e=n.graph();e.ranksep/=2,Pr.forEach(n.edges(),function(r){var i=n.edge(r);i.minlen*=2,i.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?i.width+=i.labeloffset:i.height+=i.labeloffset)})}function bwt(n){Pr.forEach(n.edges(),function(e){var r=n.edge(e);if(r.width&&r.height){var i=n.node(e.v),a=n.node(e.w),o={rank:(a.rank-i.rank)/2+i.rank,e};Xm.addDummyNode(n,"edge-proxy",o,"_ep")}})}function xwt(n){var e=0;Pr.forEach(n.nodes(),function(r){var i=n.node(r);i.borderTop&&(i.minRank=n.node(i.borderTop).rank,i.maxRank=n.node(i.borderBottom).rank,e=Pr.max(e,i.maxRank))}),n.graph().maxRank=e}function _wt(n){Pr.forEach(n.nodes(),function(e){var r=n.node(e);r.dummy==="edge-proxy"&&(n.edge(r.e).labelRank=r.rank,n.removeNode(e))})}function wwt(n){var e=Number.POSITIVE_INFINITY,r=0,i=Number.POSITIVE_INFINITY,a=0,o=n.graph(),s=o.marginx||0,l=o.marginy||0;function c(u){var d=u.x,f=u.y,h=u.width,p=u.height;e=Math.min(e,d-h/2),r=Math.max(r,d+h/2),i=Math.min(i,f-p/2),a=Math.max(a,f+p/2)}Pr.forEach(n.nodes(),function(u){c(n.node(u))}),Pr.forEach(n.edges(),function(u){var d=n.edge(u);Pr.has(d,"x")&&c(d)}),e-=s,i-=l,Pr.forEach(n.nodes(),function(u){var d=n.node(u);d.x-=e,d.y-=i}),Pr.forEach(n.edges(),function(u){var d=n.edge(u);Pr.forEach(d.points,function(f){f.x-=e,f.y-=i}),Pr.has(d,"x")&&(d.x-=e),Pr.has(d,"y")&&(d.y-=i)}),o.width=r-e+s,o.height=a-i+l}function Swt(n){Pr.forEach(n.edges(),function(e){var r=n.edge(e),i=n.node(e.v),a=n.node(e.w),o,s;r.points?(o=r.points[0],s=r.points[r.points.length-1]):(r.points=[],o=a,s=i),r.points.unshift(Xm.intersectRect(i,o)),r.points.push(Xm.intersectRect(a,s))})}function Ewt(n){Pr.forEach(n.edges(),function(e){var r=n.edge(e);if(Pr.has(r,"x"))switch((r.labelpos==="l"||r.labelpos==="r")&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}})}function Cwt(n){Pr.forEach(n.edges(),function(e){var r=n.edge(e);r.reversed&&r.points.reverse()})}function Mwt(n){Pr.forEach(n.nodes(),function(e){if(n.children(e).length){var r=n.node(e),i=n.node(r.borderTop),a=n.node(r.borderBottom),o=n.node(Pr.last(r.borderLeft)),s=n.node(Pr.last(r.borderRight));r.width=Math.abs(s.x-o.x),r.height=Math.abs(a.y-i.y),r.x=o.x+r.width/2,r.y=i.y+r.height/2}}),Pr.forEach(n.nodes(),function(e){n.node(e).dummy==="border"&&n.removeNode(e)})}function Twt(n){Pr.forEach(n.edges(),function(e){if(e.v===e.w){var r=n.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e,label:n.edge(e)}),n.removeEdge(e)}})}function Awt(n){var e=Xm.buildLayerMatrix(n);Pr.forEach(e,function(r){var i=0;Pr.forEach(r,function(a,o){var s=n.node(a);s.order=o+i,Pr.forEach(s.selfEdges,function(l){Xm.addDummyNode(n,"selfedge",{width:l.label.width,height:l.label.height,rank:s.rank,order:o+ ++i,e:l.e,label:l.label},"_se")}),delete s.selfEdges})})}function Rwt(n){Pr.forEach(n.nodes(),function(e){var r=n.node(e);if(r.dummy==="selfedge"){var i=n.node(r.e.v),a=i.x+i.width/2,o=i.y,s=r.x-a,l=i.height/2;n.setEdge(r.e,r.label),n.removeNode(e),r.label.points=[{x:a+2*s/3,y:o-l},{x:a+5*s/6,y:o-l},{x:a+s,y:o},{x:a+5*s/6,y:o+l},{x:a+2*s/3,y:o+l}],r.label.x=r.x,r.label.y=r.y}})}function I7(n,e){return Pr.mapValues(Pr.pick(n,e),Number)}function D7(n){var e={};return Pr.forEach(n,function(r,i){e[i.toLowerCase()]=r}),e}var CA=ba,Pwt=rc,Nwt=cf.Graph,Owt={debugOrdering:Iwt};function Iwt(n){var e=Pwt.buildLayerMatrix(n),r=new Nwt({compound:!0,multigraph:!0}).setGraph({});return CA.forEach(n.nodes(),function(i){r.setNode(i,{label:i}),r.setParent(i,"layer"+n.node(i).rank)}),CA.forEach(n.edges(),function(i){r.setEdge(i.v,i.w,{},i.name)}),CA.forEach(e,function(i,a){var o="layer"+a;r.setNode(o,{rank:"same"}),CA.reduce(i,function(s,l){return r.setEdge(s,l,{style:"invis"}),l})}),r}var Dwt="0.8.5",TTe={graphlib:cf,layout:awt,debug:Owt,util:{time:rc.time,notime:rc.notime},version:Dwt};const Lwt=Sl(TTe);class WD{constructor(e){this.id="dagre",this.options={},Object.assign(this.options,WD.defaultOptions,e)}execute(e,r){return vr(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,e,Object.assign(Object.assign({},this.options),r))})}assign(e,r){return vr(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,e,Object.assign(Object.assign({},this.options),r))})}genericDagreLayout(e,r,i){return vr(this,void 0,void 0,function*(){const{nodeSize:a}=i,o=new TTe.graphlib.Graph;o.setGraph(i),o.setDefaultEdgeLabel(()=>({}));const s=r.getAllNodes(),l=r.getAllEdges();[...s,...l].some(({id:u})=>on(u))&&console.error("Dagre layout only support string id, it will convert number to string."),r.getAllNodes().forEach(u=>{const{id:d}=u,f=Object.assign({},u.data);if(a!==void 0){const[h,p]=DM(cn(a)?a(u):a);Object.assign(f,{width:h,height:p})}o.setNode(d.toString(),f)}),r.getAllEdges().forEach(({id:u,source:d,target:f})=>{o.setEdge(d.toString(),f.toString(),{id:u})}),Lwt.layout(o);const c={nodes:[],edges:[]};return o.nodes().forEach(u=>{const d=o.node(u);c.nodes.push({id:u,data:d}),e&&r.mergeNodeData(u,d)}),o.edges().forEach(u=>{const d=o.edge(u),{id:f}=d,h=$a(d,["id"]),{v:p,w:g}=u;c.edges.push({id:f,source:p,target:g,data:h}),e&&r.mergeEdgeData(f,h)}),c})}}WD.defaultOptions={};let kwt=class ATe{constructor(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}distanceTo(e){const r=this.rx-e.rx,i=this.ry-e.ry;return Math.hypot(r,i)}setPos(e,r){this.rx=e,this.ry=r}resetForce(){this.fx=0,this.fy=0}addForce(e){const r=e.rx-this.rx,i=e.ry-this.ry;let a=Math.hypot(r,i);a=a<1e-4?1e-4:a;const o=this.g*(this.degree+1)*(e.degree+1)/a;this.fx+=o*r/a,this.fy+=o*i/a}in(e){return e.contains(this.rx,this.ry)}add(e){const r=this.mass+e.mass,i=(this.rx*this.mass+e.rx*e.mass)/r,a=(this.ry*this.mass+e.ry*e.mass)/r,o=this.degree+e.degree,s={rx:i,ry:a,mass:r,degree:o};return new ATe(s)}};class Ub{constructor(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}getLength(){return this.length}contains(e,r){const i=this.length/2;return e<=this.xmid+i&&e>=this.xmid-i&&r<=this.ymid+i&&r>=this.ymid-i}NW(){const e=this.xmid-this.length/4,r=this.ymid+this.length/4,i=this.length/2,a={xmid:e,ymid:r,length:i};return new Ub(a)}NE(){const e=this.xmid+this.length/4,r=this.ymid+this.length/4,i=this.length/2,a={xmid:e,ymid:r,length:i};return new Ub(a)}SW(){const e=this.xmid-this.length/4,r=this.ymid-this.length/4,i=this.length/2,a={xmid:e,ymid:r,length:i};return new Ub(a)}SE(){const e=this.xmid+this.length/4,r=this.ymid-this.length/4,i=this.length/2,a={xmid:e,ymid:r,length:i};return new Ub(a)}}class Vb{constructor(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,e!=null&&(this.quad=e)}insert(e){if(this.body==null){this.body=e;return}this._isExternal()?(this.quad&&(this.NW=new Vb(this.quad.NW()),this.NE=new Vb(this.quad.NE()),this.SW=new Vb(this.quad.SW()),this.SE=new Vb(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e))}_putBody(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(e){if(!(this.body==null||e===this.body))if(this._isExternal())e.addForce(this.body);else{const r=this.quad?this.quad.getLength():0,i=this.body.distanceTo(e);r/i<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e))}}}const Fwt={center:[0,0],width:300,height:300,kr:5,kg:1,mode:"normal",preventOverlap:!1,dissuadeHubs:!1,maxIteration:0,ks:.1,ksmax:10,tao:.1};class $wt{constructor(e={}){this.options=e,this.id="forceAtlas2",this.options=Object.assign(Object.assign({},Fwt),e)}execute(e,r){return vr(this,void 0,void 0,function*(){return this.genericForceAtlas2Layout(!1,e,r)})}assign(e,r){return vr(this,void 0,void 0,function*(){yield this.genericForceAtlas2Layout(!0,e,r)})}genericForceAtlas2Layout(e,r,i){return vr(this,void 0,void 0,function*(){const a=r.getAllEdges(),o=r.getAllNodes(),s=this.formatOptions(i,o.length),{width:l,height:c,prune:u,maxIteration:d,nodeSize:f,center:h}=s;if(!(o!=null&&o.length)||o.length===1)return Gy(r,e,h);const p=o.map(y=>kc(y,[l,c])),g=a.filter(y=>{const{source:b,target:x}=y;return b!==x}),m=new zo({nodes:p,edges:g}),v=this.getSizes(m,f);if(this.run(m,r,d,v,e,s),u){for(let b=0;b<g.length;b+=1){const{source:x,target:_}=g[b],S=m.getDegree(x),M=m.getDegree(x);if(S<=1){const E=m.getNode(_);m.mergeNodeData(x,{x:E.data.x,y:E.data.y})}else if(M<=1){const E=m.getNode(x);m.mergeNodeData(_,{x:E.data.x,y:E.data.y})}}const y=Object.assign(Object.assign({},s),{prune:!1,barnesHut:!1});this.run(m,r,100,v,e,y)}return{nodes:p,edges:a}})}getSizes(e,r){const i=e.getAllNodes(),a={};for(let o=0;o<i.length;o+=1){const s=i[o];a[s.id]=zX(r,void 0)(s)}return a}formatOptions(e={},r){const i=Object.assign(Object.assign({},this.options),e),{center:a,width:o,height:s,barnesHut:l,prune:c,maxIteration:u,kr:d,kg:f}=i;return i.width=!o&&typeof window<"u"?window.innerWidth:o,i.height=!s&&typeof window<"u"?window.innerHeight:s,i.center=a||[i.width/2,i.height/2],l===void 0&&r>250&&(i.barnesHut=!0),c===void 0&&r>100&&(i.prune=!0),u===0&&!c?(i.maxIteration=250,r<=200&&r>100?i.maxIteration=1e3:r>200&&(i.maxIteration=1200)):u===0&&c&&(i.maxIteration=100,r<=200&&r>100?i.maxIteration=500:r>200&&(i.maxIteration=950)),d||(i.kr=50,r>100&&r<=500?i.kr=20:r>500&&(i.kr=1)),f||(i.kg=20,r>100&&r<=500?i.kg=10:r>500&&(i.kg=1)),i}run(e,r,i,a,o,s){const{kr:l,barnesHut:c,onTick:u}=s,d=e.getAllNodes();let f=0,h=i;const p={},g={},m={};for(let v=0;v<d.length;v+=1){const{data:y,id:b}=d[v];if(p[b]=[0,0],c){const x={id:v,rx:y.x,ry:y.y,mass:1,g:l,degree:e.getDegree(b)};m[b]=new kwt(x)}}for(;h>0;)f=this.oneStep(e,{iter:h,preventOverlapIters:50,krPrime:100,sg:f,forces:p,preForces:g,bodies:m,sizes:a},s),h--,u==null||u({nodes:d,edges:r.getAllEdges()});return e}oneStep(e,r,i){const{iter:a,preventOverlapIters:o,krPrime:s,sg:l,preForces:c,bodies:u,sizes:d}=r;let{forces:f}=r;const{preventOverlap:h,barnesHut:p}=i,g=e.getAllNodes();for(let m=0;m<g.length;m+=1){const{id:v}=g[m];c[v]=[...f[v]],f[v]=[0,0]}return f=this.getAttrForces(e,a,o,d,f,i),p&&(h&&a>o||!h)?f=this.getOptRepGraForces(e,f,u,i):f=this.getRepGraForces(e,a,o,f,s,d,i),this.updatePos(e,f,c,l,i)}getAttrForces(e,r,i,a,o,s){const{preventOverlap:l,dissuadeHubs:c,mode:u,prune:d}=s,f=e.getAllEdges();for(let h=0;h<f.length;h+=1){const{source:p,target:g}=f[h],m=e.getNode(p),v=e.getNode(g),y=e.getDegree(p),b=e.getDegree(g);if(d&&(y<=1||b<=1))continue;const x=[v.data.x-m.data.x,v.data.y-m.data.y];let _=Math.hypot(x[0],x[1]);_=_<1e-4?1e-4:_,x[0]=x[0]/_,x[1]=x[1]/_,l&&r<i&&(_=_-a[p]-a[g]);let S=_,M=S;u==="linlog"&&(S=Math.log(1+_),M=S),c&&(S=_/y,M=_/b),l&&r<i&&_<=0?(S=0,M=0):l&&r<i&&_>0&&(S=_,M=_),o[p][0]+=S*x[0],o[g][0]-=M*x[0],o[p][1]+=S*x[1],o[g][1]-=M*x[1]}return o}getOptRepGraForces(e,r,i,a){const{kg:o,center:s,prune:l}=a,c=e.getAllNodes(),u=c.length;let d=9e10,f=-9e10,h=9e10,p=-9e10;for(let b=0;b<u;b+=1){const{id:x,data:_}=c[b];l&&e.getDegree(x)<=1||(i[x].setPos(_.x,_.y),_.x>=f&&(f=_.x),_.x<=d&&(d=_.x),_.y>=p&&(p=_.y),_.y<=h&&(h=_.y))}const g=Math.max(f-d,p-h),m={xmid:(f+d)/2,ymid:(p+h)/2,length:g,massCenter:s,mass:u},v=new Ub(m),y=new Vb(v);for(let b=0;b<u;b+=1){const{id:x}=c[b];l&&e.getDegree(x)<=1||i[x].in(v)&&y.insert(i[x])}for(let b=0;b<u;b+=1){const{id:x,data:_}=c[b],S=e.getDegree(x);if(l&&S<=1)continue;i[x].resetForce(),y.updateForce(i[x]),r[x][0]-=i[x].fx,r[x][1]-=i[x].fy;const M=[_.x-s[0],_.y-s[1]];let E=Math.hypot(M[0],M[1]);E=E<1e-4?1e-4:E,M[0]=M[0]/E,M[1]=M[1]/E;const T=o*(S+1);r[x][0]-=T*M[0],r[x][1]-=T*M[1]}return r}getRepGraForces(e,r,i,a,o,s,l){const{preventOverlap:c,kr:u,kg:d,center:f,prune:h}=l,p=e.getAllNodes(),g=p.length;for(let m=0;m<g;m+=1){const v=p[m],y=e.getDegree(v.id);for(let S=m+1;S<g;S+=1){const M=p[S],E=e.getDegree(M.id);if(h&&(y<=1||E<=1))continue;const T=[M.data.x-v.data.x,M.data.y-v.data.y];let P=Math.hypot(T[0],T[1]);P=P<1e-4?1e-4:P,T[0]=T[0]/P,T[1]=T[1]/P,c&&r<i&&(P=P-s[v.id]-s[M.id]);let A=u*(y+1)*(E+1)/P;c&&r<i&&P<0?A=o*(y+1)*(E+1):c&&r<i&&P===0?A=0:c&&r<i&&P>0&&(A=u*(y+1)*(E+1)/P),a[v.id][0]-=A*T[0],a[M.id][0]+=A*T[0],a[v.id][1]-=A*T[1],a[M.id][1]+=A*T[1]}const b=[v.data.x-f[0],v.data.y-f[1]],x=Math.hypot(b[0],b[1]);b[0]=b[0]/x,b[1]=b[1]/x;const _=d*(y+1);a[v.id][0]-=_*b[0],a[v.id][1]-=_*b[1]}return a}updatePos(e,r,i,a,o){const{ks:s,tao:l,prune:c,ksmax:u}=o,d=e.getAllNodes(),f=d.length,h=[],p=[];let g=0,m=0,v=a;for(let b=0;b<f;b+=1){const{id:x}=d[b],_=e.getDegree(x);if(c&&_<=1)continue;const S=[r[x][0]-i[x][0],r[x][1]-i[x][1]],M=Math.hypot(S[0],S[1]),E=[r[x][0]+i[x][0],r[x][1]+i[x][1]],T=Math.hypot(E[0],E[1]);h[b]=M,p[b]=T/2,g+=(_+1)*h[b],m+=(_+1)*p[b]}const y=v;v=l*m/g,y!==0&&(v=v>1.5*y?1.5*y:v);for(let b=0;b<f;b+=1){const{id:x,data:_}=d[b],S=e.getDegree(x);if(c&&S<=1||on(_.fx)&&on(_.fy))continue;let M=s*v/(1+v*Math.sqrt(h[b])),E=Math.hypot(r[x][0],r[x][1]);E=E<1e-4?1e-4:E;const T=u/E;M=M>T?T:M;const P=M*r[x][0],A=M*r[x][1];e.mergeNodeData(x,{x:_.x+P,y:_.y+A})}return v}}const Bwt={maxIteration:1e3,gravity:10,speed:5,clustering:!1,clusterGravity:10,width:300,height:300,nodeClusterBy:"cluster"},zwt=800;class Uwt{constructor(e={}){this.options=e,this.id="fruchterman",this.timeInterval=0,this.running=!1,this.options=Object.assign(Object.assign({},Bwt),e)}execute(e,r){return vr(this,void 0,void 0,function*(){return this.genericFruchtermanLayout(!1,e,r)})}assign(e,r){return vr(this,void 0,void 0,function*(){yield this.genericFruchtermanLayout(!0,e,r)})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval),this.running=!1}tick(e=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let i=0;i<e;i++)this.runOneStep(this.lastGraph,this.lastClusterMap,this.lastOptions);const r={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&r.nodes.forEach(i=>this.lastGraph.mergeNodeData(i.id,{x:i.data.x,y:i.data.y,z:this.options.dimensions===3?i.data.z:void 0})),r}genericFruchtermanLayout(e,r,i){return vr(this,void 0,void 0,function*(){if(this.running)return;const a=this.formatOptions(i),{dimensions:o,width:s,height:l,center:c,clustering:u,nodeClusterBy:d,maxIteration:f,onTick:h}=a,p=r.getAllNodes(),g=r.getAllEdges();if(!(p!=null&&p.length)){const x={nodes:[],edges:g};return this.lastResult=x,x}if(p.length===1){e&&r.mergeNodeData(p[0].id,{x:c[0],y:c[1],z:o===3?c[2]:void 0});const x={nodes:[Object.assign(Object.assign({},p[0]),{data:Object.assign(Object.assign({},p[0].data),{x:c[0],y:c[1],z:o===3?c[2]:void 0})})],edges:g};return this.lastResult=x,x}const m=p.map(x=>kc(x,[s,l])),v=new zo({nodes:m,edges:g}),y={};if(u&&m.forEach(x=>{const _=x.data[d];y[_]||(y[_]={name:_,cx:0,cy:0,count:0})}),this.lastLayoutNodes=m,this.lastLayoutEdges=g,this.lastAssign=e,this.lastGraph=v,this.lastOptions=a,this.lastClusterMap=y,typeof window>"u")return;let b=0;return new Promise(x=>{this.timeInterval=window.setInterval(()=>{if(!this.running){x({nodes:m,edges:g});return}this.runOneStep(v,y,a),e&&m.forEach(({id:_,data:S})=>r.mergeNodeData(_,{x:S.x,y:S.y,z:o===3?S.z:void 0})),h==null||h({nodes:m,edges:g}),b++,b>=f&&(window.clearInterval(this.timeInterval),x({nodes:m,edges:g}))},0),this.running=!0})})}formatOptions(e={}){const r=Object.assign(Object.assign({},this.options),e),{clustering:i,nodeClusterBy:a}=r,{center:o,width:s,height:l}=r;return r.width=!s&&typeof window<"u"?window.innerWidth:s,r.height=!l&&typeof window<"u"?window.innerHeight:l,r.center=o||[r.width/2,r.height/2],r.clustering=i&&!!a,r}runOneStep(e,r,i){const{dimensions:a,height:o,width:s,gravity:l,center:c,speed:u,clustering:d,nodeClusterBy:f,clusterGravity:h}=i,p=o*s,g=Math.sqrt(p)/10,m=e.getAllNodes(),v=p/(m.length+1),y=Math.sqrt(v),b={};if(this.applyCalculate(e,b,y,v),d){for(const _ in r)r[_].cx=0,r[_].cy=0,r[_].count=0;m.forEach(_=>{const{data:S}=_,M=r[S[f]];on(S.x)&&(M.cx+=S.x),on(S.y)&&(M.cy+=S.y),M.count++});for(const _ in r)r[_].cx/=r[_].count,r[_].cy/=r[_].count;const x=h||l;m.forEach((_,S)=>{const{id:M,data:E}=_;if(!on(E.x)||!on(E.y))return;const T=r[E[f]],P=Math.sqrt((E.x-T.cx)*(E.x-T.cx)+(E.y-T.cy)*(E.y-T.cy)),A=y*x;b[M].x-=A*(E.x-T.cx)/P,b[M].y-=A*(E.y-T.cy)/P})}m.forEach((x,_)=>{const{id:S,data:M}=x;if(!on(M.x)||!on(M.y))return;const E=.01*y*l;b[S].x-=E*(M.x-c[0]),b[S].y-=E*(M.y-c[1]),a===3&&(b[S].z-=E*(M.z-c[2]))}),m.forEach((x,_)=>{const{id:S,data:M}=x;if(on(M.fx)&&on(M.fy)){M.x=M.fx,M.y=M.fy,a===3&&(M.z=M.fz);return}if(!on(M.x)||!on(M.y))return;const E=Math.sqrt(b[S].x*b[S].x+b[S].y*b[S].y+(a===3?b[S].z*b[S].z:0));if(E>0){const T=Math.min(g*(u/zwt),E);e.mergeNodeData(S,{x:M.x+b[S].x/E*T,y:M.y+b[S].y/E*T,z:a===3?M.z+b[S].z/E*T:void 0})}})}applyCalculate(e,r,i,a){this.calRepulsive(e,r,a),this.calAttractive(e,r,i)}calRepulsive(e,r,i){const a=e.getAllNodes();a.forEach(({data:o,id:s},l)=>{r[s]={x:0,y:0,z:0},a.forEach(({data:c,id:u},d)=>{if(l<=d||!on(o.x)||!on(c.x)||!on(o.y)||!on(c.y))return;let f=o.x-c.x,h=o.y-c.y,p=this.options.dimensions===3?o.z-c.z:0,g=f*f+h*h+p*p;g===0&&(g=1,f=.01,h=.01,p=.01);const m=i/g,v=f*m,y=h*m,b=p*m;r[s].x+=v,r[s].y+=y,r[u].x-=v,r[u].y-=y,this.options.dimensions===3&&(r[s].z+=b,r[u].z-=b)})})}calAttractive(e,r,i){e.getAllEdges().forEach(o=>{const{source:s,target:l}=o;if(!s||!l||s===l)return;const{data:c}=e.getNode(s),{data:u}=e.getNode(l);if(!on(u.x)||!on(c.x)||!on(u.y)||!on(c.y))return;const d=u.x-c.x,f=u.y-c.y,h=this.options.dimensions===3?u.z-c.z:0,p=Math.sqrt(d*d+f*f+h*h)/i,g=d*p,m=f*p,v=h*p;r[s].x+=g,r[s].y+=m,r[l].x-=g,r[l].y-=m,this.options.dimensions===3&&(r[s].z+=v,r[l].z-=v)})}}const Vwt={begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30,width:300,height:300};class Gwt{constructor(e={}){this.options=e,this.id="grid",this.options=Object.assign(Object.assign({},Vwt),e)}execute(e,r){return vr(this,void 0,void 0,function*(){return this.genericGridLayout(!1,e,r)})}assign(e,r){return vr(this,void 0,void 0,function*(){yield this.genericGridLayout(!0,e,r)})}genericGridLayout(e,r,i){return vr(this,void 0,void 0,function*(){const a=Object.assign(Object.assign({},this.options),i),{begin:o=[0,0],condense:s,preventOverlapPadding:l,preventOverlap:c,rows:u,cols:d,nodeSpacing:f,nodeSize:h,width:p,height:g,position:m}=a;let{sortBy:v}=a;const y=r.getAllNodes(),b=r.getAllEdges(),x=y==null?void 0:y.length;if(!x||x===1)return Gy(r,e,o);const _=y.map(k=>kc(k));v!=="id"&&(!Kr(v)||_[0].data[v]===void 0)&&(v="degree"),v==="degree"?_.sort((k,$)=>r.getDegree($.id,"both")-r.getDegree(k.id,"both")):v==="id"?_.sort((k,$)=>on($.id)&&on(k.id)?$.id-k.id:`${k.id}`.localeCompare(`${$.id}`)):_.sort((k,$)=>$.data[v]-k.data[v]);const S=!p&&typeof window<"u"?window.innerWidth:p,M=!g&&typeof window<"u"?window.innerHeight:g,E=x,T={rows:u,cols:d};if(u!=null&&d!=null)T.rows=u,T.cols=d;else if(u!=null&&d==null)T.rows=u,T.cols=Math.ceil(E/T.rows);else if(u==null&&d!=null)T.cols=d,T.rows=Math.ceil(E/T.cols);else{const k=Math.sqrt(E*M/S);T.rows=Math.round(k),T.cols=Math.round(S/M*k)}if(T.rows=Math.max(T.rows,1),T.cols=Math.max(T.cols,1),T.cols*T.rows>E){const k=MA(T),$=TA(T);(k-1)*$>=E?MA(T,k-1):($-1)*k>=E&&TA(T,$-1)}else for(;T.cols*T.rows<E;){const k=MA(T),$=TA(T);($+1)*k>=E?TA(T,$+1):MA(T,k+1)}let P=s?0:S/T.cols,A=s?0:M/T.rows;if(c||f){const k=j0(10,f),$=BX(30,h,!1);_.forEach(B=>{(!B.data.x||!B.data.y)&&(B.data.x=0,B.data.y=0);const F=r.getNode(B.id),[G,z]=DM($(F)||30),U=k!==void 0?k(B):l,H=G+U,X=z+U;P=Math.max(P,H),A=Math.max(A,X)})}const N={},O={row:0,col:0},I={};for(let k=0;k<_.length;k++){const $=_[k];let B;if(m&&(B=m(r.getNode($.id))),B&&(B.row!==void 0||B.col!==void 0)){const F={row:B.row,col:B.col};if(F.col===void 0)for(F.col=0;fH(N,F);)F.col++;else if(F.row===void 0)for(F.row=0;fH(N,F);)F.row++;I[$.id]=F,RTe(N,F)}jwt($,o,P,A,I,T,O,N)}const D={nodes:_,edges:b};return e&&_.forEach(k=>{r.mergeNodeData(k.id,{x:k.data.x,y:k.data.y})}),D})}}const MA=(n,e)=>{let r;const i=n.rows||5,a=n.cols||5;return e==null?r=Math.min(i,a):Math.min(i,a)===n.rows?n.rows=e:n.cols=e,r},TA=(n,e)=>{let r;const i=n.rows||5,a=n.cols||5;return e==null?r=Math.max(i,a):Math.max(i,a)===n.rows?n.rows=e:n.cols=e,r},fH=(n,e)=>n[`c-${e.row}-${e.col}`]||!1,RTe=(n,e)=>n[`c-${e.row}-${e.col}`]=!0,Ufe=(n,e)=>{const r=n.cols||5;e.col++,e.col>=r&&(e.col=0,e.row++)},jwt=(n,e,r,i,a,o,s,l)=>{let c,u;const d=a[n.id];if(d)c=d.col*r+r/2+e[0],u=d.row*i+i/2+e[1];else{for(;fH(l,s);)Ufe(o,s);c=s.col*r+r/2+e[0],u=s.row*i+i/2+e[1],RTe(l,s),Ufe(o,s)}n.data.x=c,n.data.y=u},Hwt=(n,e,r)=>{try{const i=sm.mul(sm.pow(e,2),-.5),a=i.mean("row"),o=i.mean("column"),s=i.mean();i.add(s).subRowVector(a).subColumnVector(o);const l=new aMe(i),c=sm.sqrt(l.diagonalMatrix).diagonal();return l.leftSingularVectors.toJSON().map(u=>sm.mul([u],[c]).toJSON()[0].splice(0,n))}catch{const a=[];for(let o=0;o<e.length;o++){const s=Math.random()*r,l=Math.random()*r;a.push([s,l])}return a}},Wwt=800,qwt={iterations:10,height:10,width:10,speed:100,gravity:10,k:5},Ywt=(n,e)=>{const r=Object.assign(Object.assign({},qwt),e),{positions:i,iterations:a,width:o,k:s,speed:l=100,strictRadial:c,focusIdx:u,radii:d=[],nodeSizeFunc:f}=r,h=n.getAllNodes(),p=[],g=o/10;for(let m=0;m<a;m++)i.forEach((v,y)=>{p[y]={x:0,y:0}}),Xwt(h,i,p,s,d,f),Kwt(i,p,l,c,u,g,o,d);return i},Xwt=(n,e,r,i,a,o)=>{e.forEach((s,l)=>{r[l]={x:0,y:0},e.forEach((c,u)=>{if(l===u||a[l]!==a[u])return;let d=s.x-c.x,f=s.y-c.y,h=Math.sqrt(d*d+f*f);if(h===0){h=1;const p=l>u?1:-1;d=.01*p,f=.01*p}if(h<o(n[l])/2+o(n[u])/2){const p=i*i/h;r[l].x+=d/h*p,r[l].y+=f/h*p}})})},Kwt=(n,e,r,i,a,o,s,l)=>{const c=o||s/10;return i&&e.forEach((u,d)=>{const f=n[d].x-n[a].x,h=n[d].y-n[a].y,p=Math.sqrt(f*f+h*h);let g=h/p,m=-f/p;const v=Math.sqrt(u.x*u.x+u.y*u.y);let y=Math.acos((g*u.x+m*u.y)/v);y>Math.PI/2&&(y-=Math.PI/2,g*=-1,m*=-1);const b=Math.cos(y)*v;u.x=g*b,u.y=m*b}),n.forEach((u,d)=>{if(d===a)return;const f=Math.sqrt(e[d].x*e[d].x+e[d].y*e[d].y);if(f>0&&d!==a){const h=Math.min(c*(r/Wwt),f);if(u.x+=e[d].x/f*h,u.y+=e[d].y/f*h,i){let p=u.x-n[a].x,g=u.y-n[a].y;const m=Math.sqrt(p*p+g*g);p=p/m*l[d],g=g/m*l[d],u.x=n[a].x+p,u.y=n[a].y+g}}}),n},Zwt={maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,strictRadial:!0,maxPreventOverlapIteration:200,sortStrength:10};class Qwt{constructor(e={}){this.options=e,this.id="radial",this.options=Object.assign(Object.assign({},Zwt),e)}execute(e,r){return vr(this,void 0,void 0,function*(){return this.genericRadialLayout(!1,e,r)})}assign(e,r){return vr(this,void 0,void 0,function*(){yield this.genericRadialLayout(!0,e,r)})}genericRadialLayout(e,r,i){return vr(this,void 0,void 0,function*(){const a=Object.assign(Object.assign({},this.options),i),{width:o,height:s,center:l,focusNode:c,unitRadius:u,nodeSize:d,nodeSpacing:f,strictRadial:h,preventOverlap:p,maxPreventOverlapIteration:g,sortBy:m,linkDistance:v=50,sortStrength:y=10,maxIteration:b=1e3}=a,x=r.getAllNodes(),_=r.getAllEdges(),S=!o&&typeof window<"u"?window.innerWidth:o,M=!s&&typeof window<"u"?window.innerHeight:s,E=l||[S/2,M/2];if(!(x!=null&&x.length)||x.length===1)return Gy(r,e,E);let T=x[0];if(Kr(c)){for(let q=0;q<x.length;q++)if(x[q].id===c){T=x[q];break}}else T=c||x[0];const P=tSt(x,T.id),A=qCe({nodes:x,edges:_}),N=WCe(A),O=rSt(N,P);nSt(N,P,O+1);const I=N[P];let D=S-E[0]>E[0]?E[0]:S-E[0],k=M-E[1]>E[1]?E[1]:M-E[1];D===0&&(D=S/2),k===0&&(k=M/2);const $=Math.min(D,k),B=Math.max(...I),F=[],G=u||$/B;I.forEach((q,Q)=>{F[Q]=q*G});const z=Jwt(x,N,v,F,G,m,y),U=eSt(z),H=Hwt(v,z,v);let X=H.map(([q,Q])=>({x:(isNaN(q)?Math.random()*v:q)-H[P][0],y:(isNaN(Q)?Math.random()*v:Q)-H[P][1]}));this.run(b,X,U,z,F,P);let V;if(p){V=zX(d,f);const q={nodes:x,nodeSizeFunc:V,positions:X,radii:F,height:M,width:S,strictRadial:!!h,focusIdx:P,iterations:g||200,k:X.length/4.5};X=Ywt(r,q)}const W=[];return X.forEach((q,Q)=>{const ie=kc(x[Q]);ie.data.x=q.x+E[0],ie.data.y=q.y+E[1],W.push(ie)}),e&&W.forEach(q=>r.mergeNodeData(q.id,{x:q.data.x,y:q.data.y})),{nodes:W,edges:_}})}run(e,r,i,a,o,s){for(let l=0;l<=e;l++){const c=l/e;this.oneIteration(c,r,o,a,i,s)}}oneIteration(e,r,i,a,o,s){const l=1-e;r.forEach((c,u)=>{const d=vse(c,{x:0,y:0}),f=d===0?0:1/d;if(u===s)return;let h=0,p=0,g=0;r.forEach((v,y)=>{if(u===y)return;const b=vse(c,v),x=b===0?0:1/b,_=a[y][u];g+=o[u][y],h+=o[u][y]*(v.x+_*(c.x-v.x)*x),p+=o[u][y]*(v.y+_*(c.y-v.y)*x)});const m=i[u]===0?0:1/i[u];g*=l,g+=e*m*m,h*=l,h+=e*m*c.x*f,c.x=h/g,p*=l,p+=e*m*c.y*f,c.y=p/g})}}const Jwt=(n,e,r,i,a,o,s)=>{if(!n)return[];const l=[];if(e){const c={};e.forEach((u,d)=>{const f=[];u.forEach((h,p)=>{var g,m;if(d===p)f.push(0);else if(i[d]===i[p])if(o==="data")f.push(h*(Math.abs(d-p)*s)/(i[d]/a));else if(o){let v,y;if(c[n[d].id])v=c[n[d].id];else{const b=(o==="id"?n[d].id:(g=n[d].data)===null||g===void 0?void 0:g[o])||0;Kr(b)?v=b.charCodeAt(0):v=b,c[n[d].id]=v}if(c[n[p].id])y=c[n[p].id];else{const b=(o==="id"?n[p].id:(m=n[p].data)===null||m===void 0?void 0:m[o])||0;Kr(b)?y=b.charCodeAt(0):y=b,c[n[p].id]=y}f.push(h*(Math.abs(v-y)*s)/(i[d]/a))}else f.push(h*r/(i[d]/a));else{const v=(r+a)/2;f.push(h*v)}}),l.push(f)})}return l},eSt=n=>{const e=n.length,r=n[0].length,i=[];for(let a=0;a<e;a++){const o=[];for(let s=0;s<r;s++)n[a][s]!==0?o.push(1/(n[a][s]*n[a][s])):o.push(0);i.push(o)}return i},tSt=(n,e)=>{let r=-1;return n.forEach((i,a)=>{i.id===e&&(r=a)}),Math.max(r,0)},nSt=(n,e,r)=>{const i=n.length;for(let a=0;a<i;a++)if(n[e][a]===1/0){n[e][a]=r,n[a][e]=r;for(let o=0;o<i;o++)n[a][o]!==1/0&&n[e][o]===1/0&&(n[e][o]=r+n[a][o],n[o][e]=r+n[a][o])}for(let a=0;a<i;a++)if(a!==e){for(let o=0;o<i;o++)if(n[a][o]===1/0){let s=Math.abs(n[e][a]-n[e][o]);s=s===0?1:s,n[a][o]=s}}},rSt=(n,e)=>{let r=0;for(let i=0;i<n[e].length;i++)n[e][i]!==1/0&&(r=n[e][i]>r?n[e][i]:r);return r},iSt={center:[0,0],width:300,height:300};class aSt{constructor(e={}){this.options=e,this.id="random",this.options=Object.assign(Object.assign({},iSt),e)}execute(e,r){return vr(this,void 0,void 0,function*(){return this.genericRandomLayout(!1,e,r)})}assign(e,r){return vr(this,void 0,void 0,function*(){yield this.genericRandomLayout(!0,e,r)})}genericRandomLayout(e,r,i){return vr(this,void 0,void 0,function*(){const a=Object.assign(Object.assign({},this.options),i),{center:o,width:s,height:l}=a,c=r.getAllNodes(),u=.9,d=!s&&typeof window<"u"?window.innerWidth:s,f=!l&&typeof window<"u"?window.innerHeight:l,h=o||[d/2,f/2],p=[];return c&&c.forEach(m=>{p.push({id:m.id,data:{x:(Math.random()-.5)*u*d+h[0],y:(Math.random()-.5)*u*f+h[1]}})}),e&&p.forEach(m=>r.mergeNodeData(m.id,{x:m.data.x,y:m.data.y})),{nodes:p,edges:r.getAllEdges()}})}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PTe=Symbol("Comlink.proxy"),oSt=Symbol("Comlink.endpoint"),NTe=Symbol("Comlink.releaseProxy"),L7=Symbol("Comlink.finalizer"),EP=Symbol("Comlink.thrown"),OTe=n=>typeof n=="object"&&n!==null||typeof n=="function",sSt={canHandle:n=>OTe(n)&&n[PTe],serialize(n){const{port1:e,port2:r}=new MessageChannel;return DTe(n,e),[r,[r]]},deserialize(n){return n.start(),kTe(n)}},lSt={canHandle:n=>OTe(n)&&EP in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},ITe=new Map([["proxy",sSt],["throw",lSt]]);function cSt(n,e){for(const r of n)if(e===r||r==="*"||r instanceof RegExp&&r.test(e))return!0;return!1}function DTe(n,e=globalThis,r=["*"]){e.addEventListener("message",function i(a){if(!a||!a.data)return;if(!cSt(r,a.origin)){console.warn(`Invalid origin '${a.origin}' for comlink proxy`);return}const{id:o,type:s,path:l}=Object.assign({path:[]},a.data),c=(a.data.argumentList||[]).map(d0);let u;try{const d=l.slice(0,-1).reduce((h,p)=>h[p],n),f=l.reduce((h,p)=>h[p],n);switch(s){case"GET":u=f;break;case"SET":d[l.slice(-1)[0]]=d0(a.data.value),u=!0;break;case"APPLY":u=f.apply(d,c);break;case"CONSTRUCT":{const h=new f(...c);u=gSt(h)}break;case"ENDPOINT":{const{port1:h,port2:p}=new MessageChannel;DTe(n,p),u=pSt(h,[h])}break;case"RELEASE":u=void 0;break;default:return}}catch(d){u={value:d,[EP]:0}}Promise.resolve(u).catch(d=>({value:d,[EP]:0})).then(d=>{const[f,h]=CO(d);e.postMessage(Object.assign(Object.assign({},f),{id:o}),h),s==="RELEASE"&&(e.removeEventListener("message",i),LTe(e),L7 in n&&typeof n[L7]=="function"&&n[L7]())}).catch(d=>{const[f,h]=CO({value:new TypeError("Unserializable return value"),[EP]:0});e.postMessage(Object.assign(Object.assign({},f),{id:o}),h)})}),e.start&&e.start()}function uSt(n){return n.constructor.name==="MessagePort"}function LTe(n){uSt(n)&&n.close()}function kTe(n,e){const r=new Map;return n.addEventListener("message",function(a){const{data:o}=a;if(!o||!o.id)return;const s=r.get(o.id);if(s)try{s(o)}finally{r.delete(o.id)}}),hH(n,r,[],e)}function AA(n){if(n)throw new Error("Proxy has been released and is not useable")}function FTe(n){return _b(n,new Map,{type:"RELEASE"}).then(()=>{LTe(n)})}const SO=new WeakMap,EO="FinalizationRegistry"in globalThis&&new FinalizationRegistry(n=>{const e=(SO.get(n)||0)-1;SO.set(n,e),e===0&&FTe(n)});function dSt(n,e){const r=(SO.get(e)||0)+1;SO.set(e,r),EO&&EO.register(n,e,n)}function fSt(n){EO&&EO.unregister(n)}function hH(n,e,r=[],i=function(){}){let a=!1;const o=new Proxy(i,{get(s,l){if(AA(a),l===NTe)return()=>{fSt(o),FTe(n),e.clear(),a=!0};if(l==="then"){if(r.length===0)return{then:()=>o};const c=_b(n,e,{type:"GET",path:r.map(u=>u.toString())}).then(d0);return c.then.bind(c)}return hH(n,e,[...r,l])},set(s,l,c){AA(a);const[u,d]=CO(c);return _b(n,e,{type:"SET",path:[...r,l].map(f=>f.toString()),value:u},d).then(d0)},apply(s,l,c){AA(a);const u=r[r.length-1];if(u===oSt)return _b(n,e,{type:"ENDPOINT"}).then(d0);if(u==="bind")return hH(n,e,r.slice(0,-1));const[d,f]=Vfe(c);return _b(n,e,{type:"APPLY",path:r.map(h=>h.toString()),argumentList:d},f).then(d0)},construct(s,l){AA(a);const[c,u]=Vfe(l);return _b(n,e,{type:"CONSTRUCT",path:r.map(d=>d.toString()),argumentList:c},u).then(d0)}});return dSt(o,n),o}function hSt(n){return Array.prototype.concat.apply([],n)}function Vfe(n){const e=n.map(CO);return[e.map(r=>r[0]),hSt(e.map(r=>r[1]))]}const $Te=new WeakMap;function pSt(n,e){return $Te.set(n,e),n}function gSt(n){return Object.assign(n,{[PTe]:!0})}function CO(n){for(const[e,r]of ITe)if(r.canHandle(n)){const[i,a]=r.serialize(n);return[{type:"HANDLER",name:e,value:i},a]}return[{type:"RAW",value:n},$Te.get(n)||[]]}function d0(n){switch(n.type){case"HANDLER":return ITe.get(n.name).deserialize(n.value);case"RAW":return n.value}}function _b(n,e,r,i){return new Promise(a=>{const o=mSt();e.set(o,a),n.start&&n.start(),n.postMessage(Object.assign({id:o},r),i)})}function mSt(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class vSt extends pD{constructor(e,r,i){super(),this.graph=e,this.layout=r,this.options=i,this.spawnWorker()}spawnWorker(){this.proxy=kTe(new Worker(new URL("/assets/worker-DY_ZnMFe.js",import.meta.url),{type:"module"})),this.running&&(this.running=!1,this.execute())}execute(){var e;return vr(this,void 0,void 0,function*(){if(this.running)return this;this.running=!0;const r=this.layout.options,{onTick:i}=r,a=$a(r,["onTick"]),o={};Object.keys(a).forEach(u=>{cn(a[u])||(o[u]=a[u])});const s={layout:{id:this.layout.id,options:o,iterations:(e=this.options)===null||e===void 0?void 0:e.iterations},nodes:this.graph.getAllNodes(),edges:this.graph.getAllEdges()},l=new Float32Array([0]),[c]=yield this.proxy.calculateLayout(s,[l]);return c})}stop(){return this.running=!1,this.proxy.stopLayout(),this}kill(){this.proxy[NTe]()}isRunning(){return this.running}}var ySt=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};class qD extends gD{constructor(){super(...arguments),this.id="fishbone"}getRoot(){const e=this.context.model.getRootsData();if(!(Df(e)||e.length>2))return e[0]}formatSize(e){const r=typeof e=="function"?e:()=>e;return i=>Uc(r(i))}doLayout(e,r){const{hGap:i,getRibSep:a,vGap:o,nodeSize:s,height:l}=r,{model:c}=this.context,u=this.formatSize(s);let d=u(e)[0]+a(e);const f=(x,_=0)=>{var S;return _+=i*((x.children||[]).length+1),(S=x.children)===null||S===void 0||S.forEach(M=>{var E;(E=c.getNodeLikeDatum(M).children)===null||E===void 0||E.forEach(P=>{const A=c.getNodeLikeDatum(P);_=f(A,_)})}),_},h=x=>{if(x.depth===1)return d;const _=c.getParentData(x.id,"tree");if(k1(x)){const S=c.getParentData(_.id,"tree"),M=m(x)-m(S);return h(_)+M*i/o}else{const S=(_.children||[]).indexOf(x.id),M=c.getNodeData((_.children||[]).slice(S));return p(_)-M.reduce((E,T)=>E+f(T),0)-u(_)[0]/2}},p=mj(x=>{if(k7(x))return u(x)[0]/2;const _=c.getParentData(x.id,"tree");if(k1(x))return h(x)+f(x)+u(x)[0]/2;{const S=m(x)-m(_),M=i/o;return h(x)+S*M}},x=>x.id),g=x=>m(c.getParentData(x,"tree")),m=mj(x=>{if(k7(x))return l/2;if(k1(x)){const _=c.getParentData(x.id,"tree"),S=_.children.indexOf(x.id);if(S===0)return g(_.id)+o;const M=c.getNodeLikeDatum(_.children[S-1]);if(Df(M.children))return m(M)+o;const E=c.getDescendantsData(M.id);return Math.max(...E.map(T=>k1(T)?g(T.id):m(T)))+o}else{if(Df(x.children))return g(x.id)+o;const _=c.getNodeLikeDatum(x.children.slice(-1)[0]);if(Df(_.children))return m(_)+o;const S=c.getDescendantsData(x.id).slice(-1)[0];return(k1(S)?g(S.id):m(S))+o}},x=>x.id);let v=0;const y={nodes:[],edges:[]},b=x=>{var _;(_=x.children)===null||_===void 0||_.forEach(P=>b(c.getNodeLikeDatum(P)));const S=m(x),M=p(x);if(y.nodes.push({id:x.id,x:M,y:S}),k7(x))return;const E=c.getRelatedEdgesData(x.id,"in")[0],T=[h(x),k1(x)?S:g(x.id)];y.edges.push({id:Fe(E),controlPoints:[T],relatedNodeId:x.id}),v=Math.max(v,M+a(x)),x.depth===1&&(d=v)};return b(e),y}placeAlterative(e,r){const i=(r.children||[]).filter((l,c)=>c%2!==0);if(i.length===0)return e;const{model:a}=this.context,o=e.nodes.find(l=>l.id===r.id).y,s=l=>{const c=a.getAncestorsData(l,"tree");if(Df(c))return!1;const u=c.length===1?l:c[c.length-2].id;return i.includes(u)};e.nodes.forEach(l=>{s(l.id)&&(l.y=2*o-l.y)}),e.edges.forEach(l=>{s(l.relatedNodeId)&&(l.controlPoints=l.controlPoints.map(c=>[c[0],2*o-c[1]]))})}rightToLeft(e,r){return e.nodes.forEach(i=>i.x=r.width-i.x),e.edges.forEach(i=>{i.controlPoints=i.controlPoints.map(a=>[r.width-a[0],a[1]])}),e}execute(e,r){return ySt(this,void 0,void 0,function*(){const i=Object.assign(Object.assign(Object.assign({},qD.defaultOptions),this.options),r),{direction:a,nodeSize:o}=i,s=this.getRoot();if(!s)return e;const l=this.formatSize(o);i.vGap||(i.vGap=Math.max(...(e.nodes||[]).map(h=>l(h)[1]))),i.hGap||(i.hGap=Math.max(...(e.nodes||[]).map(h=>l(h)[0])));let c=this.doLayout(s,i);this.placeAlterative(c,s),a==="RL"&&(c=this.rightToLeft(c,i));const{model:u}=this.context,d=[],f=[];return c.nodes.forEach(h=>{const{id:p,x:g,y:m}=h,v=u.getNodeLikeDatum(p);d.push(Gfe(v,{x:g,y:m}))}),c.edges.forEach(h=>{const{id:p,controlPoints:g}=h,m=u.getEdgeDatum(p);f.push(Gfe(m,{controlPoints:g}))}),{nodes:d,edges:f}})}}qD.defaultOptions={direction:"RL",getRibSep:()=>60};const Gfe=(n,e)=>Object.assign(Object.assign({},n),{style:Object.assign(Object.assign({},n.style||{}),e)}),k7=n=>n.depth===0,k1=n=>(n.depth||(n.depth=0))%2===0;var bSt=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};class YD extends gD{constructor(){super(...arguments),this.id="snake"}formatSize(e,r){const i=typeof r=="function"?r:()=>r;return e.reduce((a,o)=>{const[s,l]=Uc(i(o))||[0,0];return[Math.max(a[0],s),Math.max(a[1],l)]},[0,0])}validate(e){const{nodes:r=[],edges:i=[]}=e,a={},o={},s={};r.forEach(h=>{a[h.id]=0,o[h.id]=0,s[h.id]=[]}),i.forEach(h=>{a[h.target]++,o[h.source]++,s[h.source].push(h.target)});const l=new Set,c=h=>{l.has(h)||(l.add(h),s[h].forEach(c))};if(c(r[0].id),l.size!==r.length)return!1;const u=r.filter(h=>a[h.id]===0),d=r.filter(h=>o[h.id]===0);return!(u.length!==1||d.length!==1||r.filter(h=>a[h.id]===1&&o[h.id]===1).length!==r.length-2)}execute(e,r){return bSt(this,void 0,void 0,function*(){var i;if(!this.validate(e))return e;const{nodeSize:a,padding:o,sortBy:s,cols:l,colGap:c,rowGap:u,clockwise:d,width:f,height:h}=Object.assign({},YD.defaultOptions,this.options,r),[p,g,m,v]=mh(o),y=this.formatSize(e.nodes||[],a),b=Math.ceil((e.nodes||[]).length/l);let x=c||(f-v-g-l*y[0])/(l-1),_=u||(h-p-m-b*y[1])/(b-1);return(_===1/0||_<0)&&(_=0),(x===1/0||x<0)&&(x=0),{nodes:((s?(i=e.nodes)===null||i===void 0?void 0:i.sort(s):xSt(e))||[]).map((E,T)=>{const P=Math.floor(T/l),A=T%l,N=d?P%2===0?A:l-1-A:P%2===0?l-1-A:A,O=v+N*(y[0]+x)+y[0]/2,I=p+P*(y[1]+_)+y[1]/2;return{id:E.id,style:{x:O,y:I}}})}})}}YD.defaultOptions={padding:0,cols:5,clockwise:!0};function xSt(n){const{nodes:e=[],edges:r=[]}=n,i={},a={};e.forEach(l=>{i[l.id]=0,a[l.id]=[]}),r.forEach(l=>{i[l.target]++,a[l.source].push(l.target)});const o=[],s=[];for(e.forEach(l=>{i[l.id]===0&&o.push(l.id)});o.length>0;){const l=o.shift(),c=e.find(u=>u.id===l);s.push(c),a[l].forEach(u=>{i[u]--,i[u]===0&&o.push(u)})}return s}const _St=["rgb(158, 1, 66)","rgb(213, 62, 79)","rgb(244, 109, 67)","rgb(253, 174, 97)","rgb(254, 224, 139)","rgb(255, 255, 191)","rgb(230, 245, 152)","rgb(171, 221, 164)","rgb(102, 194, 165)","rgb(50, 136, 189)","rgb(94, 79, 162)"],wSt=["rgb(78, 121, 167)","rgb(242, 142, 44)","rgb(225, 87, 89)","rgb(118, 183, 178)","rgb(89, 161, 79)","rgb(237, 201, 73)","rgb(175, 122, 161)","rgb(255, 157, 167)","rgb(156, 117, 95)","rgb(186, 176, 171)"],SSt=["rgb(255, 245, 235)","rgb(254, 230, 206)","rgb(253, 208, 162)","rgb(253, 174, 107)","rgb(253, 141, 60)","rgb(241, 105, 19)","rgb(217, 72, 1)","rgb(166, 54, 3)","rgb(127, 39, 4)"],ESt=["rgb(247, 252, 245)","rgb(229, 245, 224)","rgb(199, 233, 192)","rgb(161, 217, 155)","rgb(116, 196, 118)","rgb(65, 171, 93)","rgb(35, 139, 69)","rgb(0, 109, 44)","rgb(0, 68, 27)"],CSt=["rgb(247, 251, 255)","rgb(222, 235, 247)","rgb(198, 219, 239)","rgb(158, 202, 225)","rgb(107, 174, 214)","rgb(66, 146, 198)","rgb(33, 113, 181)","rgb(8, 81, 156)","rgb(8, 48, 107)"];class Cs extends SX{}function rw(n,e=!0,r){const i=document.createElement("div");return i.setAttribute("class",`g6-${n}`),Object.assign(i.style,{position:"absolute",display:"block"}),e&&Object.assign(i.style,{position:"unset",gridArea:"1 / 1 / 2 / 2",inset:"0px",height:"100%",width:"100%",overflow:"hidden",pointerEvents:"none"}),r&&Object.assign(i.style,r),i}function pH(n,e="div",r={},i="",a=document.body){const o=document.getElementById(n);o&&o.remove();const s=document.createElement(e);return s.innerHTML=i,s.id=n,Object.assign(s.style,r),a.appendChild(s),s}var MSt=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};let BTe=class zTe extends Cs{constructor(e,r){super(e,Object.assign({},zTe.defaultOptions,r)),this.$element=rw("background"),this.context.canvas.getContainer().prepend(this.$element),this.update(r)}update(e){const r=Object.create(null,{update:{get:()=>super.update}});return MSt(this,void 0,void 0,function*(){r.update.call(this,e),Object.assign(this.$element.style,aX(this.options,["key","type"]))})}destroy(){super.destroy(),this.$element.remove()}};BTe.defaultOptions={transition:"background 0.5s",backgroundSize:"cover",zIndex:"-1"};function mK(n,e,r,i,a,o){const s=n,l=e,c=r-s,u=i-l;let d=a-s,f=o-l,h=d*c+f*u,p=0;h<=0?p=0:(d=c-d,f=u-f,h=d*c+f*u,h<=0?p=0:p=h*h/(c*c+u*u));const g=d*d+f*f-p;return g<0?0:g}function cm(n,e,r,i){return(n-r)*(n-r)+(e-i)*(e-i)}function jfe(n,e,r,i,a){return cm(n,e,r,i)<a*a}function TSt(n){if(!Number.isFinite(n))return r=>r;if(n===0)return Math.round;const e=Math.pow(10,n);return r=>Math.round(r*e)/e}function UTe(n){const e=Math.min(n.x1,n.x2),r=Math.max(n.x1,n.x2),i=Math.min(n.y1,n.y2),a=Math.max(n.y1,n.y2);return{x:e,y:i,x2:r,y2:a,width:r-e,height:a-i}}let js=class VTe{constructor(e,r,i,a){this.x1=e,this.y1=r,this.x2=i,this.y2=a}equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2}draw(e){e.moveTo(this.x1,this.y1),e.lineTo(this.x2,this.y2)}toString(){return`Line(from=(${this.x1},${this.y1}),to=(${this.x2},${this.y2}))`}static from(e){return new VTe(e.x1,e.y1,e.x2,e.y2)}cuts(e,r){if(this.y1===this.y2||r<this.y1&&r<=this.y2||r>this.y1&&r>=this.y2||e>this.x1&&e>=this.x2)return!1;if(e<this.x1&&e<=this.x2)return!0;const i=this.x1+(r-this.y1)*(this.x2-this.x1)/(this.y2-this.y1);return e<=i}distSquare(e,r){return mK(this.x1,this.y1,this.x2,this.y2,e,r)}ptClose(e,r,i){if(this.x1<this.x2){if(e<this.x1-i||e>this.x2+i)return!1}else if(e<this.x2-i||e>this.x1+i)return!1;if(this.y1<this.y2){if(r<this.y1-i||r>this.y2+i)return!1}else if(r<this.y2-i||r>this.y1+i)return!1;return!0}};var Da;(function(n){n[n.POINT=1]="POINT",n[n.PARALLEL=2]="PARALLEL",n[n.COINCIDENT=3]="COINCIDENT",n[n.NONE=4]="NONE"})(Da||(Da={}));class F7{constructor(e,r=0,i=0){this.state=e,this.x=r,this.y=i}}function RA(n,e){const r=(e.x2-e.x1)*(n.y1-e.y1)-(e.y2-e.y1)*(n.x1-e.x1),i=(n.x2-n.x1)*(n.y1-e.y1)-(n.y2-n.y1)*(n.x1-e.x1),a=(e.y2-e.y1)*(n.x2-n.x1)-(e.x2-e.x1)*(n.y2-n.y1);if(a){const o=r/a,s=i/a;return 0<=o&&o<=1&&0<=s&&s<=1?new F7(Da.POINT,n.x1+o*(n.x2-n.x1),n.y1+o*(n.y2-n.y1)):new F7(Da.NONE)}return new F7(r===0||i===0?Da.COINCIDENT:Da.PARALLEL)}function GTe(n,e){const r=(e.x2-e.x1)*(n.y1-e.y1)-(e.y2-e.y1)*(n.x1-e.x1),i=(n.x2-n.x1)*(n.y1-e.y1)-(n.y2-n.y1)*(n.x1-e.x1),a=(e.y2-e.y1)*(n.x2-n.x1)-(e.x2-e.x1)*(n.y2-n.y1);if(a){const o=r/a,s=i/a;if(0<=o&&o<=1&&0<=s&&s<=1)return o}return Number.POSITIVE_INFINITY}function ASt(n,e){function r(a,o,s,l){let c=GTe(e,new js(a,o,s,l));return c=Math.abs(c-.5),c>=0&&c<=1?1:0}let i=r(n.x,n.y,n.x2,n.y);return i+=r(n.x,n.y,n.x,n.y2),i>1||(i+=r(n.x,n.y2,n.x2,n.y2),i>1)?!0:(i+=r(n.x2,n.y,n.x2,n.y2),i>0)}var ka;(function(n){n[n.LEFT=0]="LEFT",n[n.TOP=1]="TOP",n[n.RIGHT=2]="RIGHT",n[n.BOTTOM=3]="BOTTOM"})(ka||(ka={}));function CP(n,e,r){const i=new Set;return n.width<=0?(i.add(ka.LEFT),i.add(ka.RIGHT)):e<n.x?i.add(ka.LEFT):e>n.x+n.width&&i.add(ka.RIGHT),n.height<=0?(i.add(ka.TOP),i.add(ka.BOTTOM)):r<n.y?i.add(ka.TOP):r>n.y+n.height&&i.add(ka.BOTTOM),i}function jTe(n,e){let r=e.x1,i=e.y1;const a=e.x2,o=e.y2,s=Array.from(CP(n,a,o));if(s.length===0)return!0;let l=CP(n,r,i);for(;l.size!==0;){for(const c of s)if(l.has(c))return!1;if(l.has(ka.RIGHT)||l.has(ka.LEFT)){let c=n.x;l.has(ka.RIGHT)&&(c+=n.width),i=i+(c-r)*(o-i)/(a-r),r=c}else{let c=n.y;l.has(ka.BOTTOM)&&(c+=n.height),r=r+(c-i)*(a-r)/(o-i),i=c}l=CP(n,r,i)}return!0}function RSt(n,e){let r=Number.POSITIVE_INFINITY,i=0;function a(o,s,l,c){let u=GTe(e,new js(o,s,l,c));u=Math.abs(u-.5),u>=0&&u<=1&&(i++,u<r&&(r=u))}return a(n.x,n.y,n.x2,n.y),a(n.x,n.y,n.x,n.y2),i>1||(a(n.x,n.y2,n.x2,n.y2),i>1)?r:(a(n.x2,n.y,n.x2,n.y2),i===0?-1:r)}function PSt(n,e){let r=0;const i=RA(n,new js(e.x,e.y,e.x2,e.y));r+=i.state===Da.POINT?1:0;const a=RA(n,new js(e.x,e.y,e.x,e.y2));r+=a.state===Da.POINT?1:0;const o=RA(n,new js(e.x,e.y2,e.x2,e.y2));r+=o.state===Da.POINT?1:0;const s=RA(n,new js(e.x2,e.y,e.x2,e.y2));return r+=s.state===Da.POINT?1:0,{top:i,left:a,bottom:o,right:s,count:r}}class $s{constructor(e,r,i,a){this.x=e,this.y=r,this.width=i,this.height=a}get x2(){return this.x+this.width}get y2(){return this.y+this.height}get cx(){return this.x+this.width/2}get cy(){return this.y+this.height/2}get radius(){return Math.max(this.width,this.height)/2}static from(e){return new $s(e.x,e.y,e.width,e.height)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}clone(){return new $s(this.x,this.y,this.width,this.height)}add(e){const r=Math.min(this.x,e.x),i=Math.min(this.y,e.y),a=Math.max(this.x2,e.x+e.width),o=Math.max(this.y2,e.y+e.height);this.x=r,this.y=i,this.width=a-r,this.height=o-i}addPoint(e){const r=Math.min(this.x,e.x),i=Math.min(this.y,e.y),a=Math.max(this.x2,e.x),o=Math.max(this.y2,e.y);this.x=r,this.y=i,this.width=a-r,this.height=o-i}toString(){return`Rectangle[x=${this.x}, y=${this.y}, w=${this.width}, h=${this.height}]`}draw(e){e.rect(this.x,this.y,this.width,this.height)}containsPt(e,r){return e>=this.x&&e<=this.x2&&r>=this.y&&r<=this.y2}get area(){return this.width*this.height}intersects(e){return this.area<=0||e.width<=0||e.height<=0?!1:e.x+e.width>this.x&&e.y+e.height>this.y&&e.x<this.x2&&e.y<this.y2}distSquare(e,r){if(this.containsPt(e,r))return 0;const i=CP(this,e,r);return i.has(ka.TOP)?i.has(ka.LEFT)?cm(e,r,this.x,this.y):i.has(ka.RIGHT)?cm(e,r,this.x2,this.y):(this.y-r)*(this.y-r):i.has(ka.BOTTOM)?i.has(ka.LEFT)?cm(e,r,this.x,this.y2):i.has(ka.RIGHT)?cm(e,r,this.x2,this.y2):(r-this.y2)*(r-this.y2):i.has(ka.LEFT)?(this.x-e)*(this.x-e):i.has(ka.RIGHT)?(e-this.x2)*(e-this.x2):0}}function NSt(n){if(n.length===0)return null;const e=n[0],r=new $s(e.x,e.y,0,0);for(const i of n)r.addPoint(i);return r}class MO{constructor(e,r,i){this.cx=e,this.cy=r,this.radius=i}get x(){return this.cx-this.radius}get x2(){return this.cx+this.radius}get width(){return this.radius*2}get y(){return this.cy-this.radius}get y2(){return this.cy+this.radius}get height(){return this.radius*2}static from(e){return new MO(e.cx,e.cy,e.radius)}containsPt(e,r){return cm(this.cx,this.cy,e,r)<this.radius*this.radius}distSquare(e,r){const i=cm(this.cx,this.cy,e,r);if(i<this.radius*this.radius)return 0;const a=Math.sqrt(i)-this.radius;return a*a}draw(e){e.ellipse(this.cx,this.cy,this.radius,this.radius,0,0,Math.PI*2)}}class W0{constructor(e,r=0,i=0,a=0,o=0,s=10,l=10,c=new Float32Array(Math.max(0,s*l)).fill(0)){this.pixelGroup=e,this.i=r,this.j=i,this.pixelX=a,this.pixelY=o,this.width=s,this.height=l,this.area=c}createSub(e,r){return new W0(this.pixelGroup,e.x,e.y,r.x,r.y,e.width,e.height)}static fromPixelRegion(e,r){return new W0(r,0,0,e.x,e.y,Math.ceil(e.width/r),Math.ceil(e.height/r))}copy(e,r){return new W0(this.pixelGroup,this.scaleX(r.x),this.scaleY(r.y),r.x,r.y,e.width,e.height,e.area)}boundX(e){return e<this.i?this.i:e>=this.width?this.width-1:e}boundY(e){return e<this.j?this.j:e>=this.height?this.height-1:e}scaleX(e){return this.boundX(Math.floor((e-this.pixelX)/this.pixelGroup))}scaleY(e){return this.boundY(Math.floor((e-this.pixelY)/this.pixelGroup))}scale(e){const r=this.scaleX(e.x),i=this.scaleY(e.y),a=this.boundX(Math.ceil((e.x+e.width-this.pixelX)/this.pixelGroup)),o=this.boundY(Math.ceil((e.y+e.height-this.pixelY)/this.pixelGroup)),s=a-r,l=o-i;return new $s(r,i,s,l)}invertScaleX(e){return Math.round(e*this.pixelGroup+this.pixelX)}invertScaleY(e){return Math.round(e*this.pixelGroup+this.pixelY)}addPadding(e,r){const i=Math.ceil(r/this.pixelGroup),a=this.boundX(e.x-i),o=this.boundY(e.y-i),s=this.boundX(e.x2+i),l=this.boundY(e.y2+i),c=s-a,u=l-o;return new $s(a,o,c,u)}get(e,r){return e<0||r<0||e>=this.width||r>=this.height?Number.NaN:this.area[e+r*this.width]}inc(e,r,i){e<0||r<0||e>=this.width||r>=this.height||(this.area[e+r*this.width]+=i)}set(e,r,i){e<0||r<0||e>=this.width||r>=this.height||(this.area[e+r*this.width]=i)}incArea(e,r){if(e.width<=0||e.height<=0||r===0)return;const i=this.width,a=e.width,o=Math.max(0,e.i),s=Math.max(0,e.j),l=Math.min(e.i+e.width,i),c=Math.min(e.j+e.height,this.height);if(!(c<=0||l<=0||o>=i||c>=this.height))for(let u=s;u<c;u++){const d=(u-e.j)*a,f=u*i;for(let h=o;h<l;h++){const p=e.area[h-e.i+d];p!==0&&(this.area[h+f]+=r*p)}}}fill(e){this.area.fill(e)}fillArea(e,r){const i=e.x+e.y*this.width;for(let a=0;a<e.height;a++){const o=i+a*this.width;this.area.fill(r,o,o+e.width)}}fillHorizontalLine(e,r,i,a){const o=e+r*this.width;this.area.fill(a,o,o+i)}fillVerticalLine(e,r,i,a){const o=e+r*this.width;for(let s=0;s<i;s++)this.area[o+s*this.width]=a}clear(){this.area.fill(0)}toString(){let e="";for(let r=0;r<this.height;r++){const i=r*this.width;for(let a=0;a<this.width;a++){const o=this.area[i+a];e+=o.toFixed(1).padStart(6),e+=" "}e+=`
`}return e}draw(e,r=!0){if(this.width<=0||this.height<=0)return;e.save(),r&&e.translate(this.pixelX,this.pixelY);const i=this.area.reduce((s,l)=>Math.min(s,l),Number.POSITIVE_INFINITY),a=this.area.reduce((s,l)=>Math.max(s,l),Number.NEGATIVE_INFINITY),o=s=>(s-i)/(a-i);e.scale(this.pixelGroup,this.pixelGroup);for(let s=0;s<this.width;s++)for(let l=0;l<this.height;l++){const c=this.area[s+l*this.width];e.fillStyle=`rgba(0, 0, 0, ${o(c)})`,e.fillRect(s,l,1,1)}e.restore()}drawThreshold(e,r,i=!0){if(!(this.width<=0||this.height<=0)){e.save(),i&&e.translate(this.pixelX,this.pixelY),e.scale(this.pixelGroup,this.pixelGroup);for(let a=0;a<this.width;a++)for(let o=0;o<this.height;o++){const s=this.area[a+o*this.width];e.fillStyle=s>r?"black":"white",e.fillRect(a,o,1,1)}e.restore()}}}function HTe(n,e){const r=i=>({x:i.x-e,y:i.y-e,width:i.width+2*e,height:i.height+2*e});return Array.isArray(n)?n.map(r):r(n)}function Hfe(n,e,r){return WTe(Object.assign(UTe(n),{distSquare:(i,a)=>mK(n.x1,n.y1,n.x2,n.y2,i,a)}),e,r)}function WTe(n,e,r){const i=HTe(n,r),a=e.scale(i),o=e.createSub(a,i);return OSt(o,e,r,(s,l)=>n.distSquare(s,l)),o}function OSt(n,e,r,i){const a=r*r;for(let o=0;o<n.height;o++)for(let s=0;s<n.width;s++){const l=e.invertScaleX(n.i+s),c=e.invertScaleY(n.j+o),u=i(l,c);if(u===0){n.set(s,o,a);continue}if(u<a){const d=r-Math.sqrt(u);n.set(s,o,d*d)}}return n}function ISt(n,e,r){const i=e.scale(n),a=e.addPadding(i,r),o=e.createSub(a,{x:n.x-r,y:n.y-r}),s=i.x-a.x,l=i.y-a.y,c=a.x2-i.x2,u=a.y2-i.y2,d=a.width-s-c,f=a.height-l-u,h=r*r;o.fillArea({x:s,y:l,width:d+1,height:f+1},h);const p=[0],g=Math.max(l,s,c,u);{const b=e.invertScaleX(i.x+i.width/2);for(let x=1;x<g;x++){const _=e.invertScaleY(i.y-x),S=n.distSquare(b,_);if(S<h){const M=r-Math.sqrt(S);p.push(M*M)}else break}}const m=[],v=Math.max(s,c),y=Math.max(l,c);for(let b=1;b<v;b++){const x=e.invertScaleX(i.x-b),_=[];for(let S=1;S<y;S++){const M=e.invertScaleY(i.y-S),E=n.distSquare(x,M);if(E<h){const T=r-Math.sqrt(E);_.push(T*T)}else _.push(0)}m.push(_)}for(let b=1;b<Math.min(l,p.length);b++){const x=p[b];o.fillHorizontalLine(s,l-b,d+1,x)}for(let b=1;b<Math.min(u,p.length);b++){const x=p[b];o.fillHorizontalLine(s,l+f+b,d+1,x)}for(let b=1;b<Math.min(s,p.length);b++){const x=p[b];o.fillVerticalLine(s-b,l,f+1,x)}for(let b=1;b<Math.min(u,p.length);b++){const x=p[b];o.fillVerticalLine(s+d+b,l,f+1,x)}for(let b=1;b<s;b++){const x=m[b-1],_=s-b;for(let S=1;S<l;S++)o.set(_,l-S,x[S-1]);for(let S=1;S<u;S++)o.set(_,l+f+S,x[S-1])}for(let b=1;b<c;b++){const x=m[b-1],_=s+d+b;for(let S=1;S<l;S++)o.set(_,l-S,x[S-1]);for(let S=1;S<u;S++)o.set(_,l+f+S,x[S-1])}return o}function Zi(n,e){return{x:n,y:e}}function DSt(n,e,r,i){if(n.length===0)return[];const a=BSt(n);return a.map((o,s)=>{const l=a.slice(0,s);return LSt(e,o,l,r,i)}).flat()}function LSt(n,e,r,i,a){const o=Zi(e.cx,e.cy),s=$St(o,r,n);if(s==null)return[];const l=new js(o.x,o.y,s.cx,s.cy),c=kSt(l,n,i,a);return FSt(c,n)}function kSt(n,e,r,i){const a=[],o=[];o.push(n);let s=!0;for(let l=0;l<r&&s;l++)for(s=!1;!s&&o.length>0;){const c=o.pop(),u=qTe(e,c),d=u?PSt(c,u):null;if(!u||!d||d.count!==2){s||a.push(c);continue}let f=i,h=NA(u,f,d,!0),p=yg(h,o)||yg(h,a),g=PA(h,e);for(;!p&&g&&f>=1;)f/=1.5,h=NA(u,f,d,!0),p=yg(h,o)||yg(h,a),g=PA(h,e);if(h&&!p&&!g&&(o.push(new js(c.x1,c.y1,h.x,h.y)),o.push(new js(h.x,h.y,c.x2,c.y2)),s=!0),s)continue;f=i,h=NA(u,f,d,!1);let m=yg(h,o)||yg(h,a);for(g=PA(h,e);!m&&g&&f>=1;)f/=1.5,h=NA(u,f,d,!1),m=yg(h,o)||yg(h,a),g=PA(h,e);h&&!m&&(o.push(new js(c.x1,c.y1,h.x,h.y)),o.push(new js(h.x,h.y,c.x2,c.y2)),s=!0),s||a.push(c)}for(;o.length>0;)a.push(o.pop());return a}function FSt(n,e){const r=[];for(;n.length>0;){const i=n.pop();if(n.length===0){r.push(i);break}const a=n.pop(),o=new js(i.x1,i.y1,a.x2,a.y2);qTe(e,o)?(r.push(i),n.push(a)):n.push(o)}return r}function $St(n,e,r){let i=Number.POSITIVE_INFINITY;return e.reduce((a,o)=>{const s=cm(n.x,n.y,o.cx,o.cy);if(s>i)return a;const l=new js(n.x,n.y,o.cx,o.cy),c=zSt(r,l);return s*(c+1)*(c+1)<i&&(a=o,i=s*(c+1)*(c+1)),a},null)}function BSt(n){if(n.length<2)return n;let e=0,r=0;return n.forEach(i=>{e+=i.cx,r+=i.cy}),e/=n.length,r/=n.length,n.map(i=>{const a=e-i.cx,o=r-i.cy,s=a*a+o*o;return[i,s]}).sort((i,a)=>i[1]-a[1]).map(i=>i[0])}function PA(n,e){return e.some(r=>r.containsPt(n.x,n.y))}function yg(n,e){return e.some(r=>!!(jfe(r.x1,r.y1,n.x,n.y,.001)||jfe(r.x2,r.y2,n.x,n.y,.001)))}function qTe(n,e){let r=Number.POSITIVE_INFINITY,i=null;for(const a of n){if(!jTe(a,e))continue;const o=RSt(a,e);o>=0&&o<r&&(i=a,r=o)}return i}function zSt(n,e){return n.reduce((r,i)=>jTe(i,e)&&ASt(i,e)?r+1:r,0)}function NA(n,e,r,i){const a=r.top,o=r.left,s=r.bottom,l=r.right;if(i){if(o.state===Da.POINT){if(a.state===Da.POINT)return Zi(n.x-e,n.y-e);if(s.state===Da.POINT)return Zi(n.x-e,n.y2+e);const h=n.width*n.height;return n.width*((o.y-n.y+(l.y-n.y))*.5)<h*.5?o.y>l.y?Zi(n.x-e,n.y-e):Zi(n.x2+e,n.y-e):o.y<l.y?Zi(n.x-e,n.y2+e):Zi(n.x2+e,n.y2+e)}if(l.state===Da.POINT){if(a.state===Da.POINT)return Zi(n.x2+e,n.y-e);if(s.state===Da.POINT)return Zi(n.x2+e,n.y2+e)}const d=n.height*n.width;return n.height*((a.x-n.x+(l.x-n.x))*.5)<d*.5?a.x>s.x?Zi(n.x-e,n.y-e):Zi(n.x-e,n.y2+e):a.x<s.x?Zi(n.x2+e,n.y-e):Zi(n.x2+e,n.y2+e)}if(o.state===Da.POINT){if(a.state===Da.POINT)return Zi(n.x2+e,n.y2+e);if(s.state===Da.POINT)return Zi(n.x2+e,n.y-e);const d=n.height*n.width;return n.width*((o.y-n.y+(l.y-n.y))*.5)<d*.5?o.y>l.y?Zi(n.x2+e,n.y2+e):Zi(n.x-e,n.y2+e):o.y<l.y?Zi(n.x2+e,n.y-e):Zi(n.x-e,n.y-e)}if(l.state===Da.POINT){if(a.state===Da.POINT)return Zi(n.x-e,n.y2+e);if(s.state===Da.POINT)return Zi(n.x-e,n.y-e)}const c=n.height*n.width;return n.height*((a.x-n.x+(l.x-n.x))*.5)<c*.5?a.x>s.x?Zi(n.x2+e,n.y2+e):Zi(n.x2+e,n.y-e):a.x<s.x?Zi(n.x-e,n.y2+e):Zi(n.x-e,n.y-e)}function USt(n,e,r,i){if(!(n.closed?r<n.length:r<n.length-1))return!1;const o=n.get(e),s=n.get(r+1);for(let l=e+1;l<=r;l++){const c=n.get(l);if(mK(o.x,o.y,s.x,s.y,c.x,c.y)>i)return!1}return!0}function VSt(n=0){return e=>{if(n<0||e.length<3)return e;const r=[];let i=0;const a=n*n;for(;i<e.length;){let o=i+1;for(;USt(e,i,o,a);)o++;r.push(e.get(i)),i=o}return new iw(r)}}function GSt(n,e){switch(n){case-2:return(((-e+3)*e-3)*e+1)/6;case-1:return((3*e-6)*e*e+4)/6;case 0:return(((-3*e+3)*e+3)*e+1)/6;case 1:return e*e*e/6;default:throw new Error("unknown error")}}function jSt(n=6){function o(s,l,c){let u=0,d=0;for(let f=-2;f<=1;f++){const h=s.get(l+f),p=GSt(f,c);u+=p*h.x,d+=p*h.y}return{x:u,y:d}}return s=>{if(s.length<3)return s;const l=[],c=s.closed,u=s.length+3-1+(c?0:2);l.push(o(s,2-(c?0:2),0));for(let d=2-(c?0:2);d<u;d++)for(let f=1;f<=n;f++)l.push(o(s,d,f/n));return new iw(l)}}function HSt(n=8){return e=>{let r=n,i=e.length;if(r>1)for(i=Math.floor(e.length/r);i<3&&r>1;)r-=1,i=Math.floor(e.length/r);const a=[];for(let o=0,s=0;s<i;s++,o+=r)a.push(e.get(o));return new iw(a)}}class iw{constructor(e=[],r=!0){this.points=e,this.closed=r}get(e){const r=e,i=this.points.length;return e<0?this.closed?this.get(e+i):this.points[0]:e>=i?this.closed?this.get(e-i):this.points[i-1]:this.points[r]}get length(){return this.points.length}toString(e=1/0){const r=this.points;if(r.length===0)return"";const i=typeof e=="function"?e:TSt(e);let a="M";for(const o of r)a+=`${i(o.x)},${i(o.y)} L`;return a=a.slice(0,-1),this.closed&&(a+=" Z"),a}draw(e){const r=this.points;if(r.length!==0){e.beginPath(),e.moveTo(r[0].x,r[0].y);for(const i of r)e.lineTo(i.x,i.y);this.closed&&e.closePath()}}sample(e){return HSt(e)(this)}simplify(e){return VSt(e)(this)}bSplines(e){return jSt(e)(this)}apply(e){return e(this)}containsElements(e){const r=NSt(this.points);return r?e.every(i=>r.containsPt(i.cx,i.cy)&&this.withinArea(i.cx,i.cy)):!1}withinArea(e,r){if(this.length===0)return!1;let i=0;const a=this.points[0],o=new js(a.x,a.y,a.x,a.y);for(let s=1;s<this.points.length;s++){const l=this.points[s];o.x1=o.x2,o.y1=o.y2,o.x2=l.x,o.y2=l.y,o.cuts(e,r)&&i++}return o.x1=o.x2,o.y1=o.y2,o.x2=a.x,o.y2=a.y,o.cuts(e,r)&&i++,i%2===1}}class WSt{constructor(e=0){this.count=0,this.arr=[],this.set=new Set,this.arr.length=e}add(e){this.set.add(`${e.x}x${e.y}`),this.arr[this.count++]=e}contains(e){return this.set.has(`${e.x}x${e.y}`)}isFirst(e){if(this.count===0)return!1;const r=this.arr[0];return r!=null&&r.x===e.x&&r.y===e.y}path(){return new iw(this.arr.slice(0,this.count))}clear(){this.set.clear(),this.count=0}get(e){return this.arr[e]}get length(){return this.count}}const gS=0,OA=1,IA=2,$7=3;function qSt(n,e){const r=(Math.floor(n.width)+Math.floor(n.height))*2,i=new WSt(r);function a(c,u,d,f){const h=n.get(c,u);return Number.isNaN(h)?Number.NaN:h>e?d+f:d}function o(c,u){let d=gS;return d=a(c,u,d,1),d=a(c+1,u,d,2),d=a(c,u+1,d,4),d=a(c+1,u+1,d,8),Number.isNaN(d)?-1:d}let s=OA;function l(c,u){let d=c,f=u,h=n.invertScaleX(d),p=n.invertScaleY(f);for(let g=0;g<n.width*n.height;g++){const m={x:h,y:p};if(i.contains(m)){if(i.isFirst(m))return!0}else i.add(m);const v=o(d,f);switch(v){case-1:return!0;case 0:case 3:case 2:case 7:s=IA;break;case 12:case 14:case 4:s=$7;break;case 6:s=s===gS?$7:IA;break;case 1:case 13:case 5:s=gS;break;case 9:s=s===IA?gS:OA;break;case 10:case 8:case 11:s=OA;break;default:return console.warn("Marching squares invalid state: "+v),!0}switch(s){case gS:f--,p-=n.pixelGroup;break;case OA:f++,p+=n.pixelGroup;break;case $7:d--,h-=n.pixelGroup;break;case IA:d++,h+=n.pixelGroup;break;default:return console.warn("Marching squares invalid state: "+v),!0}}return!0}for(let c=0;c<n.width;c++)for(let u=0;u<n.height;u++){if(n.get(c,u)<=e)continue;const d=o(c,u);if(!(d<0||d===15)&&l(c,u))return i.path()}return null}const XD={maxRoutingIterations:100,maxMarchingIterations:20,pixelGroup:4,edgeR0:10,edgeR1:20,nodeR0:15,nodeR1:50,morphBuffer:10,threshold:1,memberInfluenceFactor:1,edgeInfluenceFactor:1,nonMemberInfluenceFactor:-.8,virtualEdges:!0};function q2(n){return n!=null&&typeof n.radius=="number"}function Wfe(n,e){if(q2(n)!==q2(e))return!1;if(q2(n)){const i=e;return n.cx===i.cx&&n.cy===i.cy&&n.radius===i.radius}const r=e;return n.x===r.x&&n.y===r.y&&n.width===r.width&&n.height===r.height}var bd;(function(n){n[n.MEMBERS=0]="MEMBERS",n[n.NON_MEMBERS=1]="NON_MEMBERS",n[n.EDGES=2]="EDGES"})(bd||(bd={}));let qfe=class{constructor(e={}){this.dirty=new Set,this.members=[],this.nonMembers=[],this.virtualEdges=[],this.edges=[],this.activeRegion=new $s(0,0,0,0),this.potentialArea=new W0(1,0,0,0,0,0,0),this.o=Object.assign({},XD,e)}pushMember(...e){if(e.length!==0){this.dirty.add(bd.MEMBERS);for(const r of e)this.members.push({raw:r,obj:q2(r)?MO.from(r):$s.from(r),area:null})}}removeMember(e){const r=this.members.findIndex(i=>Wfe(i.raw,e));return r<0?!1:(this.members.splice(r,1),this.dirty.add(bd.MEMBERS),!0)}removeNonMember(e){const r=this.nonMembers.findIndex(i=>Wfe(i.raw,e));return r<0?!1:(this.nonMembers.splice(r,1),this.dirty.add(bd.NON_MEMBERS),!0)}removeEdge(e){const r=this.edges.findIndex(i=>i.obj.equals(e));return r<0?!1:(this.edges.splice(r,1),this.dirty.add(bd.NON_MEMBERS),!0)}pushNonMember(...e){if(e.length!==0){this.dirty.add(bd.NON_MEMBERS);for(const r of e)this.nonMembers.push({raw:r,obj:q2(r)?MO.from(r):$s.from(r),area:null})}}pushEdge(...e){if(e.length!==0){this.dirty.add(bd.EDGES);for(const r of e)this.edges.push({raw:r,obj:js.from(r),area:null})}}update(){const e=this.dirty.has(bd.MEMBERS),r=this.dirty.has(bd.NON_MEMBERS);let i=this.dirty.has(bd.EDGES);this.dirty.clear();const a=this.members.map(u=>u.obj);if(this.o.virtualEdges&&(e||r)){const u=this.nonMembers.map(h=>h.obj),d=DSt(a,u,this.o.maxRoutingIterations,this.o.morphBuffer),f=new Map(this.virtualEdges.map(h=>[h.obj.toString(),h.area]));this.virtualEdges=d.map(h=>{var p;return{raw:h,obj:h,area:(p=f.get(h.toString()))!==null&&p!==void 0?p:null}}),i=!0}let o=!1;if(e||i){const u=this.virtualEdges.concat(this.edges).map(p=>p.obj),d=XSt(a,u),f=Math.max(this.o.edgeR1,this.o.nodeR1)+this.o.morphBuffer,h=$s.from(HTe(d,f));h.equals(this.activeRegion)||(o=!0,this.activeRegion=h)}if(o){const u=Math.ceil(this.activeRegion.width/this.o.pixelGroup),d=Math.ceil(this.activeRegion.height/this.o.pixelGroup);this.activeRegion.x!==this.potentialArea.pixelX||this.activeRegion.y!==this.potentialArea.pixelY?(this.potentialArea=W0.fromPixelRegion(this.activeRegion,this.o.pixelGroup),this.members.forEach(f=>f.area=null),this.nonMembers.forEach(f=>f.area=null),this.edges.forEach(f=>f.area=null),this.virtualEdges.forEach(f=>f.area=null)):(u!==this.potentialArea.width||d!==this.potentialArea.height)&&(this.potentialArea=W0.fromPixelRegion(this.activeRegion,this.o.pixelGroup))}const s=new Map,l=u=>{if(u.area){const d=`${u.obj.width}x${u.obj.height}x${u.obj instanceof $s?"R":"C"}`;s.set(d,u.area)}},c=u=>{if(u.area)return;const d=`${u.obj.width}x${u.obj.height}x${u.obj instanceof $s?"R":"C"}`;if(s.has(d)){const h=s.get(d);u.area=this.potentialArea.copy(h,{x:u.obj.x-this.o.nodeR1,y:u.obj.y-this.o.nodeR1});return}const f=u.obj instanceof $s?ISt(u.obj,this.potentialArea,this.o.nodeR1):WTe(u.obj,this.potentialArea,this.o.nodeR1);u.area=f,s.set(d,f)};this.members.forEach(l),this.nonMembers.forEach(l),this.members.forEach(c),this.nonMembers.forEach(u=>{this.activeRegion.intersects(u.obj)?c(u):u.area=null}),this.edges.forEach(u=>{u.area||(u.area=Hfe(u.obj,this.potentialArea,this.o.edgeR1))}),this.virtualEdges.forEach(u=>{u.area||(u.area=Hfe(u.obj,this.potentialArea,this.o.edgeR1))})}drawMembers(e){for(const r of this.members)r.obj.draw(e)}drawNonMembers(e){for(const r of this.nonMembers)r.obj.draw(e)}drawEdges(e){for(const r of this.edges)r.obj.draw(e)}drawPotentialArea(e,r=!0){this.potentialArea.draw(e,r)}compute(){if(this.members.length===0)return new iw([]);this.dirty.size>0&&this.update();const{o:e,potentialArea:r}=this,i=this.members.map(l=>l.area),a=this.virtualEdges.concat(this.edges).map(l=>l.area),o=this.nonMembers.filter(l=>l.area!=null).map(l=>l.area),s=this.members.map(l=>l.obj);return YSt(r,i,a,o,l=>l.containsElements(s),e)}};function YSt(n,e,r,i,a,o={}){const s=Object.assign({},XD,o);let l=s.threshold,c=s.memberInfluenceFactor,u=s.edgeInfluenceFactor,d=s.nonMemberInfluenceFactor;const f=(s.nodeR0-s.nodeR1)*(s.nodeR0-s.nodeR1),h=(s.edgeR0-s.edgeR1)*(s.edgeR0-s.edgeR1);for(let p=0;p<s.maxMarchingIterations;p++){if(n.clear(),c!==0){const m=c/f;for(const v of e)n.incArea(v,m)}if(u!==0){const m=u/h;for(const v of r)n.incArea(v,m)}if(d!==0){const m=d/f;for(const v of i)n.incArea(v,m)}const g=qSt(n,l);if(g&&a(g))return g;if(l*=.95,p<=s.maxMarchingIterations*.5)c*=1.2,u*=1.2;else if(d!==0&&i.length>0)d*=.8;else break}return new iw([])}function XSt(n,e){if(n.length===0)return new $s(0,0,0,0);const r=$s.from(n[0]);for(const i of n)r.add(i);for(const i of e)r.add(UTe(i));return r}var KSt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};class KD extends Cs{constructor(e,r){super(e,xl({},KD.defaultOptions,r)),this.members=new Map,this.avoidMembers=new Map,this.bubbleSetOptions={},this.drawBubbleSets=()=>{const{style:i,bubbleSetOptions:a}=this.parseOptions();Ra(this.bubbleSetOptions,a)||this.init(),this.bubbleSetOptions=Object.assign({},a);const o=Object.assign(Object.assign({},i),{d:this.getPath()});this.shape?this.shape.update(o):(this.shape=new PM({style:o}),this.context.canvas.appendChild(this.shape))},this.updateBubbleSetsPath=i=>{if(!this.shape)return;const a=Fe(i.data);[...this.options.members,...this.options.avoidMembers].includes(a)&&this.shape.update(Object.assign(Object.assign({},this.parseOptions().style),{d:this.getPath(a)}))},this.getPath=i=>{const{graph:a}=this.context,o=this.options.members,s=[...this.members.keys()],l=this.options.avoidMembers,c=[...this.avoidMembers.keys()];if(!i&&Ra(o,s)&&Ra(l,c))return this.path;const{enter:u=[],exit:d=[]}=Cm(s,o,v=>v),{enter:f=[],exit:h=[]}=Cm(c,l,v=>v);i&&(d.push(i),u.push(i));const p=(v,y,b)=>{v.forEach(x=>{const _=b?this.members:this.avoidMembers,S=b?"pushMember":"pushNonMember",M=b?"removeMember":"removeNonMember";if(y){let E;a.getElementType(x)==="edge"?([E]=QSt(a,x),this.bubbleSets.pushEdge(E)):([E]=ZSt(a,x),this.bubbleSets[S](E)),_.set(x,E)}else{const E=_.get(x);E&&(a.getElementType(x)==="edge"?this.bubbleSets.removeEdge(E):this.bubbleSets[M](E),_.delete(x))}})};p(d,!1,!0),p(u,!0,!0),p(h,!1,!1),p(f,!0,!1);const m=this.bubbleSets.compute().sample(8).simplify(0).bSplines().simplify(0);return this.path=YEe(m.points.map(ps)),this.path},this.bindEvents(),this.bubbleSets=new qfe(this.options)}bindEvents(){this.context.graph.on(Ut.AFTER_RENDER,this.drawBubbleSets),this.context.graph.on(Ut.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath)}init(){this.bubbleSets=new qfe(this.options),this.members=new Map,this.avoidMembers=new Map}parseOptions(){const e=this.options,{type:r,key:i,members:a,avoidMembers:o}=e,s=KSt(e,["type","key","members","avoidMembers"]),l=Object.keys(s).reduce((c,u)=>(u in XD?c.bubbleSetOptions[u]=s[u]:c.style[u]=s[u],c),{style:{},bubbleSetOptions:{}});return Object.assign({type:r,key:i,members:a,avoidMembers:o},l)}addMember(e){const r=Array.isArray(e)?e:[e];r.some(i=>this.options.avoidMembers.includes(i))&&(this.options.avoidMembers=this.options.avoidMembers.filter(i=>!r.includes(i))),this.options.members=[...new Set([...this.options.members,...r])],this.drawBubbleSets()}removeMember(e){const r=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter(i=>!r.includes(i)),this.drawBubbleSets()}updateMember(e){this.options.members=cn(e)?e(this.options.members):e,this.drawBubbleSets()}getMember(){return this.options.members}addAvoidMember(e){const r=Array.isArray(e)?e:[e];r.some(i=>this.options.members.includes(i))&&(this.options.members=this.options.members.filter(i=>!r.includes(i))),this.options.avoidMembers=[...new Set([...this.options.avoidMembers,...r])],this.drawBubbleSets()}removeAvoidMember(e){const r=Array.isArray(e)?e:[e];this.options.avoidMembers.some(i=>r.includes(i))&&(this.options.avoidMembers=this.options.avoidMembers.filter(i=>!r.includes(i)),this.drawBubbleSets())}updateAvoidMember(e){this.options.avoidMembers=Array.isArray(e)?e:[e],this.drawBubbleSets()}getAvoidMember(){return this.options.avoidMembers}destroy(){this.context.graph.off(Ut.AFTER_RENDER,this.drawBubbleSets),this.context.graph.off(Ut.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath),this.shape.destroy(),super.destroy()}}KD.defaultOptions=Object.assign({members:[],avoidMembers:[],fill:"lightblue",fillOpacity:.2,stroke:"blue",strokeOpacity:.2},XD);const ZSt=(n,e)=>(Array.isArray(e)?e:[e]).map(i=>{const a=n.getElementRenderBounds(i);return new $s(a.min[0],a.min[1],vh(a),yh(a))}),QSt=(n,e)=>(Array.isArray(e)?e:[e]).map(i=>{const a=n.getEdgeData(i),o=n.getElementPosition(a.source),s=n.getElementPosition(a.target);return js.from({x1:o[0],y1:o[1],x2:s[0],y2:s[1]})});function JSt(n){return`
    <ul class="g6-contextmenu-ul">
      ${n.map(e=>`<li  class="g6-contextmenu-li" value="${e.value}">${e.name}</li>`).join("")}
    </ul>
  `}const e2t=`
  .g6-contextmenu {
    font-size: 12px;
    background-color: rgba(255, 255, 255, 0.96);
    border-radius: 4px;
    overflow: hidden;
    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;
    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;
  }

  .g6-contextmenu-ul {
    max-width: 256px;
    min-width: 96px;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .g6-contextmenu-li {
    padding: 8px 12px;
    cursor: pointer;
    user-select: none;
  }

  .g6-contextmenu-li:hover {
    background-color: #f5f5f5;
    cursor: pointer;
  }
`;var Yfe=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};class ZD extends Cs{constructor(e,r){super(e,Object.assign({},ZD.defaultOptions,r)),this.targetElement=null,this.onTriggerEvent=i=>{var a;(a=i.preventDefault)===null||a===void 0||a.call(i),this.show(i)},this.onMenuItemClick=i=>{const{onClick:a,trigger:o}=this.options;if(i.target instanceof HTMLElement&&i.target.className.includes("g6-contextmenu-li")){const s=i.target.getAttribute("value");a==null||a(s,i.target,this.targetElement),this.hide()}o!=="click"&&this.hide()},this.initElement(),this.update(r)}initElement(){this.$element=rw("contextmenu",!1,{zIndex:"99"});const{className:e}=this.options;e&&this.$element.classList.add(e),this.context.canvas.getContainer().appendChild(this.$element),pH("g6-contextmenu-css","style",{},e2t,document.head)}show(e){return Yfe(this,void 0,void 0,function*(){const{enable:r,offset:i}=this.options;if(typeof r=="function"&&!r(e)||!r){this.hide();return}const a=yield this.getDOMContent(e);a instanceof HTMLElement?(this.$element.innerHTML="",this.$element.appendChild(a)):this.$element.innerHTML=a;const o=this.context.graph.getCanvas().getContainer().getBoundingClientRect();this.$element.style.left=`${e.client.x-o.left+i[0]}px`,this.$element.style.top=`${e.client.y-o.top+i[1]}px`,this.$element.style.display="block",this.targetElement=e.target})}hide(){this.$element.style.display="none",this.targetElement=null}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.$element.remove()}getDOMContent(e){return Yfe(this,void 0,void 0,function*(){const{getContent:r,getItems:i}=this.options;return i?JSt(yield i(e)):yield r(e)})}bindEvents(){const{graph:e}=this.context,{trigger:r}=this.options;e.on(`canvas:${r}`,this.onTriggerEvent),e.on(`node:${r}`,this.onTriggerEvent),e.on(`edge:${r}`,this.onTriggerEvent),e.on(`combo:${r}`,this.onTriggerEvent),document.addEventListener("click",this.onMenuItemClick)}unbindEvents(){const{graph:e}=this.context,{trigger:r}=this.options;e.off(`canvas:${r}`,this.onTriggerEvent),e.off(`node:${r}`,this.onTriggerEvent),e.off(`edge:${r}`,this.onTriggerEvent),e.off(`combo:${r}`,this.onTriggerEvent),document.removeEventListener("click",this.onMenuItemClick)}}ZD.defaultOptions={trigger:"contextmenu",offset:[4,4],loadingContent:'<div class="g6-contextmenu-loading">Loading...</div>',getContent:()=>"It is a empty context menu.",enable:()=>!0};class QD extends Cs{constructor(e,r){super(e,Object.assign({},QD.defaultOptions,r)),this.edgeBundles={},this.edgePoints={},this.onBundle=()=>{const{model:i,element:a}=this.context,o=i.getEdgeData();this.divideEdges(this.options.divisions);const{cycles:s,iterRate:l,divRate:c}=this.options;let{lambda:u,divisions:d,iterations:f}=this.options;for(let h=0;h<s;h++){for(let p=0;p<f;p++){const g={};o.forEach(m=>{var v;if(m.source===m.target)return;const y=Fe(m);g[y]=this.getEdgeForces(m,d,u);for(let b=0;b<d+1;b++)(v=this.edgePoints)[y]||(v[y]=[]),this.edgePoints[y][b]=Jn(this.edgePoints[y][b],g[y][b])})}u/=2,d*=c,f*=l,this.divideEdges(d)}o.forEach(h=>{const p=Fe(h),g=a.getElement(p);g==null||g.update({d:OX(this.edgePoints[p])})})},this.bindEvents()}get nodeMap(){const e=this.context.model.getNodeData();return Object.fromEntries(e.map(r=>[Fe(r),xy(Po(r))]))}divideEdges(e){this.context.model.getEdgeData().forEach(i=>{var a;const o=Fe(i);(a=this.edgePoints)[o]||(a[o]=[]);const s=this.nodeMap[i.source],l=this.nodeMap[i.target];if(e===1)this.edgePoints[o].push(s),this.edgePoints[o].push(Zd(Jn(s,l),2)),this.edgePoints[o].push(l);else{const u=(this.edgePoints[o].length===0?Wi(s,l):a2t(this.edgePoints[o]))/(e+1);let d=u;const f=[s];for(let h=1;h<this.edgePoints[o].length;h++){const p=this.edgePoints[o][h-1],g=this.edgePoints[o][h];let m=Wi(g,p);for(;m>d;){const v=d/m,y=Jn(p,Dd(Ci(g,p),v));f.push(y),m-=d,d=u}d-=m}f.push(l),this.edgePoints[o]=f}})}getVectorPosition(e){const r=this.nodeMap[e.source],i=this.nodeMap[e.target],[a,o]=Ci(i,r),s=Wi(r,i);return{source:r,target:i,vx:a,vy:o,length:s}}measureEdgeCompatibility(e,r){const i=this.getVectorPosition(e),a=this.getVectorPosition(r),o=t2t(i,a),s=n2t(i,a),l=r2t(i,a),c=i2t(i,a);return o*s*l*c}getEdgeBundles(){const e={},r=this.options.bundleThreshold,i=this.context.model.getEdgeData();return i.forEach((a,o)=>{i.forEach((s,l)=>{var c,u;if(l<=o)return;this.measureEdgeCompatibility(a,s)>=r&&(e[c=Fe(a)]||(e[c]=[]),e[Fe(a)].push(s),e[u=Fe(s)]||(e[u]=[]),e[Fe(s)].push(a))})}),e}getSpringForce(e,r){const{pre:i,cur:a,next:o}=e;return Dd(Ci(Jn(i,o),Dd(a,2)),r)}getElectrostaticForce(e,r){Df(this.edgeBundles)&&(this.edgeBundles=this.getEdgeBundles());const i=this.edgeBundles[Fe(r)];let a=[0,0];return i==null||i.forEach(o=>{const s=this.edgePoints[Fe(o)][e],l=this.edgePoints[Fe(r)][e],c=Ci(s,l),u=Wi(s,l);a=Jn(a,Dd(c,1/u))}),a}getEdgeForces(e,r,i){const a=this.nodeMap[e.source],o=this.nodeMap[e.target],s=this.options.K/(Wi(a,o)*(r+1)),l=[[0,0]],c=Fe(e);for(let u=1;u<r;u++){const d=this.getSpringForce({pre:this.edgePoints[c][u-1],cur:this.edgePoints[c][u],next:this.edgePoints[c][u+1]||[0,0]},s),f=this.getElectrostaticForce(u,e);l.push(Dd(Jn(d,f),i))}return l.push([0,0]),l}bindEvents(){const{graph:e}=this.context;e.on(Ut.AFTER_RENDER,this.onBundle)}unbindEvents(){const{graph:e}=this.context;e.off(Ut.AFTER_RENDER,this.onBundle)}destroy(){this.unbindEvents(),super.destroy()}}QD.defaultOptions={K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:2/3,bundleThreshold:.6};const t2t=(n,e)=>Math.abs(hut([n.vx,n.vy],[e.vx,e.vy])/(n.length*e.length)),n2t=(n,e)=>{const r=(n.length+e.length)/2;return 2/(r/Math.min(n.length,e.length)+Math.max(n.length,e.length)/r)},r2t=(n,e)=>{const r=(n.length+e.length)/2,i=Zd(Jn(n.source,n.target),2),a=Zd(Jn(e.source,e.target),2);return r/(r+Wi(i,a))},Xfe=(n,e)=>{if(e.source[0]===e.target[0])return[e.source[0],n[1]];if(e.source[1]===e.target[1])return[n[0],e.source[1]];const r=(e.source[1]-e.target[1])/(e.source[0]-e.target[0]),i=(r*r*e.source[0]+r*(n[1]-e.source[1])+n[0])/(r*r+1),a=r*(i-e.source[0])+e.source[1];return[i,a]},Kfe=(n,e)=>{const r=Xfe(e.source,n),i=Xfe(e.target,n),a=Zd(Jn(r,i),2),o=Zd(Jn(n.source,n.target),2);return Wi(r,i)===0?0:Math.max(0,1-2*Wi(o,a)/Wi(r,i))},i2t=(n,e)=>Math.min(Kfe(n,e),Kfe(e,n)),a2t=n=>{let e=0;for(let r=1;r<n.length;r++)e+=Wi(n[r],n[r-1]);return e},o2t={fill:"#fff",fillOpacity:1,lineWidth:1,stroke:"#000",strokeOpacity:.8,zIndex:-1/0},Zfe=.05;class JD extends Cs{constructor(e,r){super(e,Object.assign({},JD.defaultOptions,r)),this.shapes=new Map,this.r=this.options.r,this.onEdgeFilter=i=>{if(this.options.trigger==="drag"&&this.isLensOn)return;const a=ps(i.canvas);this.renderLens(a),this.renderFocusElements()},this.renderLens=i=>{const a=Object.assign({},o2t,this.options.style);this.isLensOn||(this.lens=new NM({style:a}),this.canvas.appendChild(this.lens)),Object.assign(a,Ld(i),{size:this.r*2}),this.lens.update(a)},this.getFilterData=()=>{const{filter:i}=this.options,{model:a}=this.context,o=a.getData();if(!i)return o;const{nodes:s,edges:l,combos:c}=o;return{nodes:s.filter(u=>i(Fe(u),"node")),edges:l.filter(u=>i(Fe(u),"edge")),combos:c.filter(u=>i(Fe(u),"combo"))}},this.getFocusElements=i=>{const{nodes:a,edges:o}=this.getFilterData(),s=a.filter(u=>Wi(Po(u),i)<this.r),l=s.map(u=>Fe(u)),c=o.filter(u=>{const{source:d,target:f}=u,h=l.includes(d),p=l.includes(f);switch(this.options.nodeType){case"both":return h&&p;case"either":return h!==p;case"source":return h&&!p;case"target":return!h&&p;default:return!1}});return{nodes:s,edges:c}},this.renderFocusElements=()=>{const{element:i,graph:a}=this.context;if(!this.isLensOn)return;const o=this.lens.getCenter(),{nodes:s,edges:l}=this.getFocusElements(o),c=new Set,u=d=>{const f=Fe(d);c.add(f);const h=i.getElement(f);if(!h)return;const p=this.shapes.get(f)||h.cloneNode();p.setPosition(h.getPosition()),p.id=h.id,this.shapes.has(f)?Object.entries(h.attributes).forEach(([v,y])=>{p.style[v]!==y&&(p.style[v]=y)}):(this.canvas.appendChild(p),this.shapes.set(f,p));const g=a.getElementType(f),m=this.getElementStyle(g,d);p.update(m)};s.forEach(u),l.forEach(u),this.shapes.forEach((d,f)=>{c.has(f)||(d.destroy(),this.shapes.delete(f))})},this.scaleRByWheel=i=>{var a;this.options.preventDefault&&i.preventDefault();const{clientX:o,clientY:s,deltaX:l,deltaY:c}=i,{graph:u,canvas:d}=this.context,f=u.getCanvasByClient([o,s]),h=(a=this.lens)===null||a===void 0?void 0:a.getCenter();if(!this.isLensOn||Wi(f,h)>this.r)return;const{maxR:p,minR:g}=this.options,m=l+c>0?1/(1-Zfe):1-Zfe,v=Math.min(...d.getSize())/2;this.r=Math.max(g||0,Math.min(p||v,this.r*m)),this.renderLens(h),this.renderFocusElements()},this.isLensDragging=!1,this.onDragStart=i=>{var a;const o=ps(i.canvas),s=(a=this.lens)===null||a===void 0?void 0:a.getCenter();!this.isLensOn||Wi(o,s)>this.r||(this.isLensDragging=!0)},this.onDrag=i=>{if(!this.isLensDragging)return;const a=ps(i.canvas);this.renderLens(a),this.renderFocusElements()},this.onDragEnd=()=>{this.isLensDragging=!1},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}getElementStyle(e,r){const i=e==="node"?this.options.nodeStyle:this.options.edgeStyle;return typeof i=="function"?i(r):i}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var e;const{graph:r}=this.context,{trigger:i,scaleRBy:a}=this.options,o=r.getCanvas().getLayer();["click","drag"].includes(i)&&o.addEventListener(it.CLICK,this.onEdgeFilter),i==="pointermove"?o.addEventListener(it.POINTER_MOVE,this.onEdgeFilter):i==="drag"&&(o.addEventListener(it.DRAG_START,this.onDragStart),o.addEventListener(it.DRAG,this.onDrag),o.addEventListener(it.DRAG_END,this.onDragEnd)),a==="wheel"&&((e=this.graphDom)===null||e===void 0||e.addEventListener(it.WHEEL,this.scaleRByWheel,{passive:!1}))}unbindEvents(){var e;const{graph:r}=this.context,{trigger:i,scaleRBy:a}=this.options,o=r.getCanvas().getLayer();["click","drag"].includes(i)&&o.removeEventListener(it.CLICK,this.onEdgeFilter),i==="pointermove"?o.removeEventListener(it.POINTER_MOVE,this.onEdgeFilter):i==="drag"&&(o.removeEventListener(it.DRAG_START,this.onDragStart),o.removeEventListener(it.DRAG,this.onDrag),o.removeEventListener(it.DRAG_END,this.onDragEnd)),a==="wheel"&&((e=this.graphDom)===null||e===void 0||e.removeEventListener(it.WHEEL,this.scaleRByWheel))}update(e){var r;this.unbindEvents(),super.update(e),this.r=(r=e.r)!==null&&r!==void 0?r:this.r,this.bindEvents()}destroy(){this.unbindEvents(),this.isLensOn&&this.lens.destroy(),this.shapes.forEach((e,r)=>{e.destroy(),this.shapes.delete(r)}),super.destroy()}}JD.defaultOptions={trigger:"pointermove",r:60,nodeType:"both",filter:()=>!0,style:{lineWidth:2},nodeStyle:{label:!1},edgeStyle:{label:!0},scaleRBy:"wheel",preventDefault:!0};const s2t={fill:"#ccc",fillOpacity:.1,lineWidth:2,stroke:"#000",strokeOpacity:.8,labelFontSize:12},Qfe=.05,Jfe=.1;class eL extends Cs{constructor(e,r){super(e,Object.assign({},eL.defaultOptions,r)),this.r=this.options.r,this.d=this.options.d,this.onCreateFisheye=i=>{if(this.options.trigger==="drag"&&this.isLensOn)return;const a=ps(i.canvas);this.onMagnify(a)},this.onMagnify=i=>{i.some(isNaN)||(this.renderLens(i),this.renderFocusElements())},this.renderLens=i=>{const a=Object.assign({},s2t,this.options.style);this.isLensOn||(this.lens=new NM({style:a}),this.canvas.appendChild(this.lens)),Object.assign(a,Ld(i),{size:this.r*2,label:this.options.showDPercent,labelText:this.getDPercent()}),this.lens.update(a)},this.getDPercent=()=>{const{minD:i,maxD:a}=this.options;return`${Math.round((this.d-i)/(a-i)*100)}%`},this.prevMagnifiedStyleMap=new Map,this.prevOriginStyleMap=new Map,this.renderFocusElements=()=>{if(!this.isLensOn)return;const{graph:i}=this.context,a=this.lens.getCenter(),o=(this.d+1)*this.r,s=new Map,l=new Map;i.getNodeData().forEach(u=>{const d=Po(u),f=Wi(d,a);if(f>this.r)return;const h=o*f/(this.d*f+this.r),[p,g]=d,[m,v]=a,y=(p-m)/f,b=(g-v)/f,x=[m+h*y,v+h*b],_=Fe(u),S=this.getNodeStyle(u),M=gy(i.getElementRenderStyle(_),Object.keys(S));s.set(_,Object.assign(Object.assign({},Ld(x)),S)),l.set(_,Object.assign(Object.assign({},Ld(d)),M))}),this.updateStyle(s,l)},this.getNodeStyle=i=>{const{nodeStyle:a}=this.options;return typeof a=="function"?a(i):a},this.updateStyle=(i,a)=>{const{graph:o,element:s}=this.context,{enter:l,exit:c,keep:u}=Cm(Array.from(this.prevMagnifiedStyleMap.keys()),Array.from(i.keys()),h=>h),d=new Set,f=(h,p)=>{const g=s.getElement(h);g==null||g.update(p),o.getRelatedEdgesData(h).forEach(m=>{d.add(Fe(m))})};[...l,...u].forEach(h=>{f(h,i.get(h))}),c.forEach(h=>{f(h,this.prevOriginStyleMap.get(h)),this.prevOriginStyleMap.delete(h)}),d.forEach(h=>{const p=s.getElement(h);p==null||p.update({})}),this.prevMagnifiedStyleMap=i,a.forEach((h,p)=>{this.prevOriginStyleMap.has(p)||this.prevOriginStyleMap.set(p,h)})},this.isWheelValid=i=>{if(this.options.preventDefault&&i.preventDefault(),!this.isLensOn)return!1;const{clientX:a,clientY:o}=i,s=this.context.graph.getCanvasByClient([a,o]),l=this.lens.getCenter();return!(Wi(s,l)>this.r)},this.scaleR=i=>{const{maxR:a,minR:o}=this.options,s=i?1/(1-Qfe):1-Qfe,l=Math.min(...this.context.canvas.getSize())/2;this.r=Math.max(o||0,Math.min(a||l,this.r*s))},this.scaleD=i=>{const{maxD:a,minD:o}=this.options,s=i?this.d+Jfe:this.d-Jfe;this.d=Math.max(o,Math.min(a,s))},this.scaleRByWheel=i=>{if(!this.isWheelValid(i))return;const{deltaX:a,deltaY:o}=i;this.scaleR(a+o>0);const s=this.lens.getCenter();this.onMagnify(s)},this.scaleDByWheel=i=>{if(!this.isWheelValid(i))return;const{deltaX:a,deltaY:o}=i;this.scaleD(a+o>0);const s=this.lens.getCenter();this.onMagnify(s)},this.isDragValid=i=>{if(this.options.preventDefault&&i.preventDefault(),!this.isLensOn)return!1;const a=ps(i.canvas),o=this.lens.getCenter();return!(Wi(a,o)>this.r)},this.isLensDragging=!1,this.onDragStart=i=>{this.isDragValid(i)&&(this.isLensDragging=!0)},this.onDrag=i=>{if(!this.isLensDragging)return;const a=ps(i.canvas);this.onMagnify(a)},this.onDragEnd=()=>{this.isLensDragging=!1},this.scaleRByDrag=i=>{if(!this.isLensDragging)return;const{dx:a,dy:o}=i;this.scaleR(a-o>0);const s=this.lens.getCenter();this.onMagnify(s)},this.scaleDByDrag=i=>{if(!this.isLensDragging)return;const{dx:a,dy:o}=i;this.scaleD(a-o>0);const s=this.lens.getCenter();this.onMagnify(s)},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var e;const{graph:r}=this.context,{trigger:i,scaleRBy:a,scaleDBy:o}=this.options,s=r.getCanvas().getLayer();if(["click","drag"].includes(i)&&s.addEventListener(it.CLICK,this.onCreateFisheye),i==="pointermove"&&s.addEventListener(it.POINTER_MOVE,this.onCreateFisheye),i==="drag"||a==="drag"||o==="drag"){s.addEventListener(it.DRAG_START,this.onDragStart),s.addEventListener(it.DRAG_END,this.onDragEnd);const l=i==="drag"?this.onDrag:a==="drag"?this.scaleRByDrag:this.scaleDByDrag;s.addEventListener(it.DRAG,l)}if(a==="wheel"||o==="wheel"){const l=a==="wheel"?this.scaleRByWheel:this.scaleDByWheel;(e=this.graphDom)===null||e===void 0||e.addEventListener(it.WHEEL,l,{passive:!1})}}unbindEvents(){var e;const{graph:r}=this.context,{trigger:i,scaleRBy:a,scaleDBy:o}=this.options,s=r.getCanvas().getLayer();if(["click","drag"].includes(i)&&s.removeEventListener(it.CLICK,this.onCreateFisheye),i==="pointermove"&&s.removeEventListener(it.POINTER_MOVE,this.onCreateFisheye),i==="drag"||a==="drag"||o==="drag"){s.removeEventListener(it.DRAG_START,this.onDragStart),s.removeEventListener(it.DRAG_END,this.onDragEnd);const l=i==="drag"?this.onDrag:a==="drag"?this.scaleRByDrag:this.scaleDByDrag;s.removeEventListener(it.DRAG,l)}if(a==="wheel"||o==="wheel"){const l=a==="wheel"?this.scaleRByWheel:this.scaleDByWheel;(e=this.graphDom)===null||e===void 0||e.removeEventListener(it.WHEEL,l)}}update(e){var r,i;this.unbindEvents(),super.update(e),this.r=(r=e.r)!==null&&r!==void 0?r:this.r,this.d=(i=e.d)!==null&&i!==void 0?i:this.d,this.bindEvents()}destroy(){var e;this.unbindEvents(),this.isLensOn&&((e=this.lens)===null||e===void 0||e.destroy()),this.prevMagnifiedStyleMap.clear(),this.prevOriginStyleMap.clear(),super.destroy()}}eL.defaultOptions={trigger:"pointermove",r:120,d:1.5,maxD:5,minD:0,showDPercent:!0,style:{},nodeStyle:{label:!0},preventDefault:!0};class tL extends Cs{constructor(e,r){super(e,Object.assign({},tL.defaultOptions,r)),this.$el=this.context.canvas.getContainer(),this.graphSize=[0,0],this.onFullscreenChange=()=>{var i,a,o,s;const l=!!document.fullscreenElement;this.options.autoFit&&this.setGraphSize(l),l?(a=(i=this.options).onEnter)===null||a===void 0||a.call(i):(s=(o=this.options).onExit)===null||s===void 0||s.call(o)},this.shortcut=new q_(e.graph),this.bindEvents(),this.style=document.createElement("style"),document.head.appendChild(this.style),this.style.innerHTML=`
      :not(:root):fullscreen::backdrop {
        background: transparent;
      }
    `}bindEvents(){this.unbindEvents(),this.shortcut.unbindAll();const{request:e=[],exit:r=[]}=this.options.trigger;this.shortcut.bind(e,this.request),this.shortcut.bind(r,this.exit),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(a=>{document.addEventListener(a,this.onFullscreenChange,!1)})}unbindEvents(){this.shortcut.unbindAll(),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(r=>{document.removeEventListener(r,this.onFullscreenChange,!1)})}setGraphSize(e=!0){var r,i;let a,o;e?(a=((r=globalThis.screen)===null||r===void 0?void 0:r.width)||0,o=((i=globalThis.screen)===null||i===void 0?void 0:i.height)||0,this.graphSize=this.context.graph.getSize()):[a,o]=this.graphSize,this.context.graph.setSize(a,o),this.context.graph.render()}request(){document.fullscreenElement||!l2t()||this.$el.requestFullscreen().catch(e=>{gh.warn(`Error attempting to enable full-screen: ${e.message} (${e.name})`)})}exit(){document.fullscreenElement&&document.exitFullscreen()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.exit(),this.style.remove(),super.destroy()}}tL.defaultOptions={trigger:{},autoFit:!0};function l2t(){return document.fullscreenEnabled||Reflect.get(document,"webkitFullscreenEnabled")||Reflect.get(document,"mozFullscreenEnabled")||Reflect.get(document,"msFullscreenEnabled")}class nL extends Cs{constructor(e,r){super(e,Object.assign({},nL.defaultOptions,r)),this.$element=rw("grid-line",!0),this.offset=[0,0],this.currentScale=1,this.followZoom=a=>{const{data:{scale:o,origin:s}}=a;if(!o)return;const l=this.currentScale;this.currentScale=o;const c=o/l,u=Dd(s||this.context.graph.getCanvasCenter(),1-c),d=this.baseSize*o,f=Dd(this.offset,c),h=CF(f,d),p=Jn(h,u);this.$element.style.backgroundSize=`${d}px ${d}px`,this.$element.style.backgroundPosition=`${p[0]}px ${p[1]}px`,this.offset=CF(p,d)},this.followTranslate=a=>{if(!this.options.follow)return;const{data:{translate:o}}=a;o&&this.updateOffset(o)},this.onTransform=a=>{const o=this.parseFollow(this.options.follow);o.zoom&&this.followZoom(a),o.translate&&this.followTranslate(a)},this.context.canvas.getContainer().prepend(this.$element),this.baseSize=this.options.size,this.updateStyle(),this.bindEvents()}update(e){super.update(e),e.size!==void 0&&(this.baseSize=e.size),this.updateStyle()}bindEvents(){const{graph:e}=this.context;e.on(Ut.AFTER_TRANSFORM,this.onTransform)}updateStyle(){const{stroke:e,lineWidth:r,border:i,borderLineWidth:a,borderStroke:o,borderStyle:s}=this.options,l=this.baseSize*this.currentScale;Object.assign(this.$element.style,{border:i?`${a}px ${s} ${o}`:"none",backgroundImage:`linear-gradient(${e} ${r}px, transparent ${r}px), linear-gradient(90deg, ${e} ${r}px, transparent ${r}px)`,backgroundSize:`${l}px ${l}px`,backgroundRepeat:"repeat"})}updateOffset(e){const r=this.baseSize*this.currentScale;this.offset=CF(Jn(this.offset,e),r),this.$element.style.backgroundPosition=`${this.offset[0]}px ${this.offset[1]}px`}parseFollow(e){var r,i;return XE(e)?{translate:e,zoom:e}:{translate:(r=e==null?void 0:e.translate)!==null&&r!==void 0?r:!1,zoom:(i=e==null?void 0:e.zoom)!==null&&i!==void 0?i:!1}}destroy(){this.context.graph.off(Ut.AFTER_TRANSFORM,this.onTransform),this.$element.remove(),super.destroy()}}nL.defaultOptions={border:!0,borderLineWidth:1,borderStroke:"#eee",borderStyle:"solid",lineWidth:1,size:20,stroke:"#eee"};function vK(n){const e={Added:new Map,Updated:new Map,Removed:new Map};return n.forEach(r=>{const{type:i,value:a}=r,o=Fe(a);if(i==="NodeAdded"||i==="EdgeAdded"||i==="ComboAdded")e.Added.set(o,r);else if(i==="NodeUpdated"||i==="EdgeUpdated"||i==="ComboUpdated")if(e.Added.has(o))e.Added.set(o,{type:i.replace("Updated","Added"),value:a});else if(e.Updated.has(o)){const{original:s}=e.Updated.get(o);e.Updated.set(o,{type:i,value:a,original:s})}else e.Removed.has(o)||e.Updated.set(o,r);else(i==="NodeRemoved"||i==="EdgeRemoved"||i==="ComboRemoved")&&(e.Added.has(o)?e.Added.delete(o):(e.Updated.has(o)&&e.Updated.delete(o),e.Removed.set(o,r)))}),[...Array.from(e.Added.values()),...Array.from(e.Updated.values()),...Array.from(e.Removed.values())]}function YTe(n){const{NodeAdded:e=[],NodeUpdated:r=[],NodeRemoved:i=[],EdgeAdded:a=[],EdgeUpdated:o=[],EdgeRemoved:s=[],ComboAdded:l=[],ComboUpdated:c=[],ComboRemoved:u=[]}=H4(n,d=>d.type);return{add:{nodes:e,edges:a,combos:l},update:{nodes:r,edges:o,combos:c},remove:{nodes:i,edges:s,combos:u}}}function XTe(n,e){for(const r in n)Xa(n[r])&&!Array.isArray(n[r])&&n[r]!==null?(e[r]||(e[r]={}),XTe(n[r],e[r])):e[r]===void 0&&(e[r]=eC(r))}function c2t(n,e=!1,r){const i={animation:e,current:{add:{},update:{},remove:{}},original:{add:{},update:{},remove:{}}},{add:a,update:o,remove:s}=YTe(vK(n));return["nodes","edges","combos"].forEach(l=>{o[l]&&o[l].forEach(c=>{var u,d;const f=Object.assign({},c.value);let h=Object.assign({},c.original);if(r){const p=r.graph.getElementType(Fe(c.original)),g=p==="edge"?"stroke":"fill",m=r.element.getElementComputedStyle(p,c.original);h=Object.assign(Object.assign({},c.original),{style:Object.assign({[g]:m[g]},c.original.style)})}XTe(f,h),(u=i.current.update)[l]||(u[l]=[]),i.current.update[l].push(f),(d=i.original.update)[l]||(d[l]=[]),i.original.update[l].push(h)}),a[l]&&a[l].forEach(c=>{var u,d;const f=Object.assign({},c.value);(u=i.current.add)[l]||(u[l]=[]),i.current.add[l].push(f),(d=i.original.remove)[l]||(d[l]=[]),i.original.remove[l].push(f)}),s[l]&&s[l].forEach(c=>{var u,d;const f=Object.assign({},c.value);(u=i.current.remove)[l]||(u[l]=[]),i.current.remove[l].push(f),(d=i.original.add)[l]||(d[l]=[]),i.original.add[l].push(f)})}),i}class rL extends Cs{constructor(e,r){super(e,Object.assign({},rL.defaultOptions,r)),this.batchChanges=null,this.batchAnimation=!1,this.undoStack=[],this.redoStack=[],this.freezed=!1,this.executeCommand=(a,o=!0)=>{var s,l,c;this.freezed=!0,(l=(s=this.options).executeCommand)===null||l===void 0||l.call(s,a);const u=o?a.original:a.current;this.context.graph.addData(u.add),this.context.graph.updateData(u.update),this.context.graph.removeData(OEe(u.remove,!1)),(c=this.context.element)===null||c===void 0||c.draw({silence:!0,animation:a.animation}),this.freezed=!1},this.addCommand=a=>{var o;if(!this.freezed){if(a.type===Ut.AFTER_DRAW){const{dataChanges:s=[],animation:l=!0}=a.data;if(!((o=this.context.batch)===null||o===void 0)&&o.isBatching){if(!this.batchChanges)return;this.batchChanges.push(s),this.batchAnimation&&(this.batchAnimation=l);return}this.batchChanges=[s],this.batchAnimation=l}this.undoStackPush(c2t(this.batchChanges.flat(),this.batchAnimation,this.context)),this.notify(Rd.ADD,this.undoStack[this.undoStack.length-1])}},this.initBatchCommand=a=>{const{initiate:o}=a.data;this.batchAnimation=!1,o?this.batchChanges=[]:this.undoStack.pop()||(this.batchChanges=null)},this.emitter=new pD;const{graph:i}=this.context;i.on(Ut.AFTER_DRAW,this.addCommand),i.on(Ut.BATCH_START,this.initBatchCommand),i.on(Ut.BATCH_END,this.addCommand)}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undo(){var e,r,i,a;const o=this.undoStack.pop();if(o){if(this.executeCommand(o),((r=(e=this.options).beforeAddCommand)===null||r===void 0?void 0:r.call(e,o,!1))===!1)return;this.redoStack.push(o),(a=(i=this.options).afterAddCommand)===null||a===void 0||a.call(i,o,!1),this.notify(Rd.UNDO,o)}return this}redo(){const e=this.redoStack.pop();return e&&(this.executeCommand(e,!1),this.undoStackPush(e),this.notify(Rd.REDO,e)),this}undoAndCancel(){const e=this.undoStack.pop();return e&&(this.executeCommand(e,!1),this.redoStack=[],this.notify(Rd.CANCEL,e)),this}undoStackPush(e){var r,i,a,o;const{stackSize:s}=this.options;s!==0&&this.undoStack.length>=s&&this.undoStack.shift(),((i=(r=this.options).beforeAddCommand)===null||i===void 0?void 0:i.call(r,e,!0))!==!1&&(this.undoStack.push(e),(o=(a=this.options).afterAddCommand)===null||o===void 0||o.call(a,e,!0))}clear(){this.undoStack=[],this.redoStack=[],this.batchChanges=null,this.batchAnimation=!1,this.notify(Rd.CLEAR,null)}notify(e,r){this.emitter.emit(e,{cmd:r}),this.emitter.emit(Rd.CHANGE,{cmd:r})}on(e,r){this.emitter.on(e,r)}destroy(){const{graph:e}=this.context;e.off(Ut.AFTER_DRAW,this.addCommand),e.off(Ut.BATCH_START,this.initBatchCommand),e.off(Ut.BATCH_END,this.addCommand),this.emitter.off(),super.destroy(),this.undoStack=[],this.redoStack=[]}}rL.defaultOptions={stackSize:0};const B7={toXy(n,e){if(!e)return[...n];const r=e[0].slice(1),i=e[1].slice(1);return n.map(a=>[a[r],a[i]])},fromXy(n,e){if(!e)return[...n];const r=e[0].slice(1),i=e[1].slice(1);return n.map(([a,o])=>({[r]:a,[i]:o}))}};let u2t=class{constructor(e,r){this._cells=[],this._cellSize=r,this._reverseCellSize=1/r;for(const i of e){const a=this.coordToCellNum(i[0]),o=this.coordToCellNum(i[1]);this._cells[a]||(this._cells[a]=[]),this._cells[a][o]||(this._cells[a][o]=[]),this._cells[a][o].push(i)}}cellPoints(e,r){var i;return((i=this._cells[e])===null||i===void 0?void 0:i[r])||[]}rangePoints(e){const r=this.coordToCellNum(e[0]),i=this.coordToCellNum(e[1]),a=this.coordToCellNum(e[2]),o=this.coordToCellNum(e[3]),s=[];for(let l=r;l<=a;l++)for(let c=i;c<=o;c++){const u=this.cellPoints(l,c);for(const d of u)s.push(d)}return s}removePoint(e){const r=this.coordToCellNum(e[0]),i=this.coordToCellNum(e[1]),a=this._cells[r][i],o=a.findIndex(([s,l])=>s===e[0]&&l===e[1]);return o>-1&&a.splice(o,1),a}trunc(e){return Math.trunc(e)}coordToCellNum(e){return this.trunc(e*this._reverseCellSize)}extendBbox(e,r){return[e[0]-r*this._cellSize,e[1]-r*this._cellSize,e[2]+r*this._cellSize,e[3]+r*this._cellSize]}};function d2t(n,e){return new u2t(n,e)}const ehe=+(Math.pow(2,27)+1);function MP(n,e,r){const i=n*e,a=ehe*n,o=a-n,s=a-o,l=n-s,c=ehe*e,u=c-e,d=c-u,f=e-d,g=i-s*d-l*d-s*f,m=l*f-g;return r?(r[0]=m,r[1]=i,r):[m,i]}function f2t(n,e,r){const i=n+e,a=i-n,o=i-a,s=e-a,l=n-o;return r?(r[0]=l+s,r[1]=i,r):[l+s,i]}function h2t(n,e){const r=n.length;if(r===1){const l=MP(n[0],e);return l[0]?l:[l[1]]}const i=new Array(2*r),a=[.1,.1],o=[.1,.1];let s=0;MP(n[0],e,a),a[0]&&(i[s++]=a[0]);for(let l=1;l<r;++l){MP(n[l],e,o);const c=a[1];f2t(c,o[0],a),a[0]&&(i[s++]=a[0]);const u=o[1],d=a[1],f=u+d,h=f-u,p=d-h;a[1]=f,p&&(i[s++]=p)}return a[1]&&(i[s++]=a[1]),s===0&&(i[s++]=0),i.length=s,i}function p2t(n,e){const r=n+e,i=r-n,a=r-i,o=e-i,l=n-a+o;return l?[l,r]:[r]}function g2t(n,e){const r=n.length|0,i=e.length|0;if(r===1&&i===1)return p2t(n[0],-e[0]);const a=r+i,o=new Array(a);let s=0,l=0,c=0;const u=Math.abs;let d=n[l],f=u(d),h=-e[c],p=u(h),g,m;f<p?(m=d,l+=1,l<r&&(d=n[l],f=u(d))):(m=h,c+=1,c<i&&(h=-e[c],p=u(h))),l<r&&f<p||c>=i?(g=d,l+=1,l<r&&(d=n[l],f=u(d))):(g=h,c+=1,c<i&&(h=-e[c],p=u(h)));let v=g+m,y=v-g,b=m-y,x=b,_=v,S,M,E,T,P;for(;l<r&&c<i;)f<p?(g=d,l+=1,l<r&&(d=n[l],f=u(d))):(g=h,c+=1,c<i&&(h=-e[c],p=u(h))),m=x,v=g+m,y=v-g,b=m-y,b&&(o[s++]=b),S=_+v,M=S-_,E=S-M,T=v-M,P=_-E,x=P+T,_=S;for(;l<r;)g=d,m=x,v=g+m,y=v-g,b=m-y,b&&(o[s++]=b),S=_+v,M=S-_,E=S-M,T=v-M,P=_-E,x=P+T,_=S,l+=1,l<r&&(d=n[l]);for(;c<i;)g=h,m=x,v=g+m,y=v-g,b=m-y,b&&(o[s++]=b),S=_+v,M=S-_,E=S-M,T=v-M,P=_-E,x=P+T,_=S,c+=1,c<i&&(h=-e[c]);return x&&(o[s++]=x),_&&(o[s++]=_),s||(o[s++]=0),o.length=s,o}function m2t(n,e){const r=n+e,i=r-n,a=r-i,o=e-i,l=n-a+o;return l?[l,r]:[r]}function v2t(n,e){const r=n.length|0,i=e.length|0;if(r===1&&i===1)return m2t(n[0],e[0]);const a=r+i,o=new Array(a);let s=0,l=0,c=0;const u=Math.abs;let d=n[l],f=u(d),h=e[c],p=u(h),g,m;f<p?(m=d,l+=1,l<r&&(d=n[l],f=u(d))):(m=h,c+=1,c<i&&(h=e[c],p=u(h))),l<r&&f<p||c>=i?(g=d,l+=1,l<r&&(d=n[l],f=u(d))):(g=h,c+=1,c<i&&(h=e[c],p=u(h)));let v=g+m,y=v-g,b=m-y,x=b,_=v,S,M,E,T,P;for(;l<r&&c<i;)f<p?(g=d,l+=1,l<r&&(d=n[l],f=u(d))):(g=h,c+=1,c<i&&(h=e[c],p=u(h))),m=x,v=g+m,y=v-g,b=m-y,b&&(o[s++]=b),S=_+v,M=S-_,E=S-M,T=v-M,P=_-E,x=P+T,_=S;for(;l<r;)g=d,m=x,v=g+m,y=v-g,b=m-y,b&&(o[s++]=b),S=_+v,M=S-_,E=S-M,T=v-M,P=_-E,x=P+T,_=S,l+=1,l<r&&(d=n[l]);for(;c<i;)g=h,m=x,v=g+m,y=v-g,b=m-y,b&&(o[s++]=b),S=_+v,M=S-_,E=S-M,T=v-M,P=_-E,x=P+T,_=S,c+=1,c<i&&(h=e[c]);return x&&(o[s++]=x),_&&(o[s++]=_),s||(o[s++]=0),o.length=s,o}const the=5,TO=11102230246251565e-32,y2t=(3+16*TO)*TO,b2t=(7+56*TO)*TO;function x2t(n,e,r,i){return function(o,s,l){const c=n(n(e(s[1],l[0]),e(-l[1],s[0])),n(e(o[1],s[0]),e(-s[1],o[0]))),u=n(e(o[1],l[0]),e(-l[1],o[0])),d=i(c,u);return d[d.length-1]}}function _2t(n,e,r,i){return function(o,s,l,c){const u=n(n(r(n(e(l[1],c[0]),e(-c[1],l[0])),s[2]),n(r(n(e(s[1],c[0]),e(-c[1],s[0])),-l[2]),r(n(e(s[1],l[0]),e(-l[1],s[0])),c[2]))),n(r(n(e(s[1],c[0]),e(-c[1],s[0])),o[2]),n(r(n(e(o[1],c[0]),e(-c[1],o[0])),-s[2]),r(n(e(o[1],s[0]),e(-s[1],o[0])),c[2])))),d=n(n(r(n(e(l[1],c[0]),e(-c[1],l[0])),o[2]),n(r(n(e(o[1],c[0]),e(-c[1],o[0])),-l[2]),r(n(e(o[1],l[0]),e(-l[1],o[0])),c[2]))),n(r(n(e(s[1],l[0]),e(-l[1],s[0])),o[2]),n(r(n(e(o[1],l[0]),e(-l[1],o[0])),-s[2]),r(n(e(o[1],s[0]),e(-s[1],o[0])),l[2])))),f=i(u,d);return f[f.length-1]}}function w2t(n,e,r,i){return function(o,s,l,c,u){const d=n(n(n(r(n(r(n(e(c[1],u[0]),e(-u[1],c[0])),l[2]),n(r(n(e(l[1],u[0]),e(-u[1],l[0])),-c[2]),r(n(e(l[1],c[0]),e(-c[1],l[0])),u[2]))),s[3]),n(r(n(r(n(e(c[1],u[0]),e(-u[1],c[0])),s[2]),n(r(n(e(s[1],u[0]),e(-u[1],s[0])),-c[2]),r(n(e(s[1],c[0]),e(-c[1],s[0])),u[2]))),-l[3]),r(n(r(n(e(l[1],u[0]),e(-u[1],l[0])),s[2]),n(r(n(e(s[1],u[0]),e(-u[1],s[0])),-l[2]),r(n(e(s[1],l[0]),e(-l[1],s[0])),u[2]))),c[3]))),n(r(n(r(n(e(l[1],c[0]),e(-c[1],l[0])),s[2]),n(r(n(e(s[1],c[0]),e(-c[1],s[0])),-l[2]),r(n(e(s[1],l[0]),e(-l[1],s[0])),c[2]))),-u[3]),n(r(n(r(n(e(c[1],u[0]),e(-u[1],c[0])),s[2]),n(r(n(e(s[1],u[0]),e(-u[1],s[0])),-c[2]),r(n(e(s[1],c[0]),e(-c[1],s[0])),u[2]))),o[3]),r(n(r(n(e(c[1],u[0]),e(-u[1],c[0])),o[2]),n(r(n(e(o[1],u[0]),e(-u[1],o[0])),-c[2]),r(n(e(o[1],c[0]),e(-c[1],o[0])),u[2]))),-s[3])))),n(n(r(n(r(n(e(s[1],u[0]),e(-u[1],s[0])),o[2]),n(r(n(e(o[1],u[0]),e(-u[1],o[0])),-s[2]),r(n(e(o[1],s[0]),e(-s[1],o[0])),u[2]))),c[3]),n(r(n(r(n(e(s[1],c[0]),e(-c[1],s[0])),o[2]),n(r(n(e(o[1],c[0]),e(-c[1],o[0])),-s[2]),r(n(e(o[1],s[0]),e(-s[1],o[0])),c[2]))),-u[3]),r(n(r(n(e(l[1],c[0]),e(-c[1],l[0])),s[2]),n(r(n(e(s[1],c[0]),e(-c[1],s[0])),-l[2]),r(n(e(s[1],l[0]),e(-l[1],s[0])),c[2]))),o[3]))),n(r(n(r(n(e(l[1],c[0]),e(-c[1],l[0])),o[2]),n(r(n(e(o[1],c[0]),e(-c[1],o[0])),-l[2]),r(n(e(o[1],l[0]),e(-l[1],o[0])),c[2]))),-s[3]),n(r(n(r(n(e(s[1],c[0]),e(-c[1],s[0])),o[2]),n(r(n(e(o[1],c[0]),e(-c[1],o[0])),-s[2]),r(n(e(o[1],s[0]),e(-s[1],o[0])),c[2]))),l[3]),r(n(r(n(e(s[1],l[0]),e(-l[1],s[0])),o[2]),n(r(n(e(o[1],l[0]),e(-l[1],o[0])),-s[2]),r(n(e(o[1],s[0]),e(-s[1],o[0])),l[2]))),-c[3]))))),f=n(n(n(r(n(r(n(e(c[1],u[0]),e(-u[1],c[0])),l[2]),n(r(n(e(l[1],u[0]),e(-u[1],l[0])),-c[2]),r(n(e(l[1],c[0]),e(-c[1],l[0])),u[2]))),o[3]),r(n(r(n(e(c[1],u[0]),e(-u[1],c[0])),o[2]),n(r(n(e(o[1],u[0]),e(-u[1],o[0])),-c[2]),r(n(e(o[1],c[0]),e(-c[1],o[0])),u[2]))),-l[3])),n(r(n(r(n(e(l[1],u[0]),e(-u[1],l[0])),o[2]),n(r(n(e(o[1],u[0]),e(-u[1],o[0])),-l[2]),r(n(e(o[1],l[0]),e(-l[1],o[0])),u[2]))),c[3]),r(n(r(n(e(l[1],c[0]),e(-c[1],l[0])),o[2]),n(r(n(e(o[1],c[0]),e(-c[1],o[0])),-l[2]),r(n(e(o[1],l[0]),e(-l[1],o[0])),c[2]))),-u[3]))),n(n(r(n(r(n(e(l[1],u[0]),e(-u[1],l[0])),s[2]),n(r(n(e(s[1],u[0]),e(-u[1],s[0])),-l[2]),r(n(e(s[1],l[0]),e(-l[1],s[0])),u[2]))),o[3]),r(n(r(n(e(l[1],u[0]),e(-u[1],l[0])),o[2]),n(r(n(e(o[1],u[0]),e(-u[1],o[0])),-l[2]),r(n(e(o[1],l[0]),e(-l[1],o[0])),u[2]))),-s[3])),n(r(n(r(n(e(s[1],u[0]),e(-u[1],s[0])),o[2]),n(r(n(e(o[1],u[0]),e(-u[1],o[0])),-s[2]),r(n(e(o[1],s[0]),e(-s[1],o[0])),u[2]))),l[3]),r(n(r(n(e(s[1],l[0]),e(-l[1],s[0])),o[2]),n(r(n(e(o[1],l[0]),e(-l[1],o[0])),-s[2]),r(n(e(o[1],s[0]),e(-s[1],o[0])),l[2]))),-u[3])))),h=i(d,f);return h[h.length-1]}}function iL(n){return(n===3?x2t:n===4?_2t:w2t)(v2t,MP,h2t,g2t)}const S2t=iL(3),E2t=iL(4),f0=[function(){return 0},function(){return 0},function(e,r){return r[0]-e[0]},function(e,r,i){const a=(e[1]-i[1])*(r[0]-i[0]),o=(e[0]-i[0])*(r[1]-i[1]),s=a-o;let l;if(a>0){if(o<=0)return s;l=a+o}else if(a<0){if(o>=0)return s;l=-(a+o)}else return s;const c=y2t*l;return s>=c||s<=-c?s:S2t(e,r,i)},function(e,r,i,a){const o=e[0]-a[0],s=r[0]-a[0],l=i[0]-a[0],c=e[1]-a[1],u=r[1]-a[1],d=i[1]-a[1],f=e[2]-a[2],h=r[2]-a[2],p=i[2]-a[2],g=s*d,m=l*u,v=l*c,y=o*d,b=o*u,x=s*c,_=f*(g-m)+h*(v-y)+p*(b-x),S=(Math.abs(g)+Math.abs(m))*Math.abs(f)+(Math.abs(v)+Math.abs(y))*Math.abs(h)+(Math.abs(b)+Math.abs(x))*Math.abs(p),M=b2t*S;return _>M||-_>M?_:E2t(e,r,i,a)}];function C2t(n){let e=f0[n.length];return e||(e=f0[n.length]=iL(n.length)),e.apply(void 0,...n)}function M2t(n,e,r,i,a,o,s){return function(...c){switch(c.length){case 0:case 1:return 0;case 2:return i(c[0],c[1]);case 3:return a(c[0],c[1],c[2]);case 4:return o(c[0],c[1],c[2],c[3]);case 5:return s(c[0],c[1],c[2],c[3],c[4])}return n(c)}}function T2t(){for(;f0.length<=the;)f0.push(iL(f0.length));const n=M2t(void 0,C2t,...f0);for(let e=0;e<=the;++e)n[e]=f0[e];return n}const g2=T2t(),nhe=g2[3];function A2t(n){const e=n.length;if(e<3){const l=new Array(e);for(let c=0;c<e;++c)l[c]=c;return e===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:l}const r=new Array(e);for(let l=0;l<e;++l)r[l]=l;r.sort((l,c)=>{const u=n[l][0]-n[c][0];return u||n[l][1]-n[c][1]});const i=[r[0],r[1]],a=[r[0],r[1]];for(let l=2;l<e;++l){const c=r[l],u=n[c];let d=i.length;for(;d>1&&nhe(n[i[d-2]],n[i[d-1]],u)<=0;)d-=1,i.pop();for(i.push(c),d=a.length;d>1&&nhe(n[a[d-2]],n[a[d-1]],u)>=0;)d-=1,a.pop();a.push(c)}const o=new Array(a.length+i.length-2);let s=0;for(let l=0,c=i.length;l<c;++l)o[s++]=i[l];for(let l=a.length-2;l>0;--l)o[s++]=a[l];return o}function R2t(n,e,r,i){for(let a=0;a<2;++a){const o=n[a],s=e[a],[l,c]=[Math.min(o,s),Math.max(o,s)],u=r[a],d=i[a],[f,h]=[Math.min(u,d),Math.max(u,d)];if(h<l||c<f)return!1}return!0}function P2t(n,e,r,i){const a=g2(n,r,i),o=g2(e,r,i);if(a>0&&o>0||a<0&&o<0)return!1;const s=g2(r,n,e),l=g2(i,n,e);return s>0&&l>0||s<0&&l<0?!1:a===0&&o===0&&s===0&&l===0?R2t(n,e,r,i):!0}function N2t(n){const e=[n[0]];let r=n[0];for(let i=1;i<n.length;i++){const a=n[i];(r[0]!==a[0]||r[1]!==a[1])&&e.push(a),r=a}return e}function O2t(n){return n.sort(function(e,r){return e[0]-r[0]||e[1]-r[1]})}function gH(n,e){return Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)}function rhe(n,e,r){const i=[e[0]-n[0],e[1]-n[1]],a=[r[0]-n[0],r[1]-n[1]],o=gH(n,e),s=gH(n,r);return(i[0]*a[0]+i[1]*a[1])/Math.sqrt(o*s)}function ihe(n,e){for(let r=0;r<e.length-1;r++){const i=[e[r],e[r+1]];if(!(n[0][0]===i[0][0]&&n[0][1]===i[0][1]||n[0][0]===i[1][0]&&n[0][1]===i[1][1])&&P2t(n[0],n[1],i[0],i[1]))return!0}return!1}function I2t(n){let e=1/0,r=1/0,i=-1/0,a=-1/0;for(let o=n.length-1;o>=0;o--)n[o][0]<e&&(e=n[o][0]),n[o][1]<r&&(r=n[o][1]),n[o][0]>i&&(i=n[o][0]),n[o][1]>a&&(a=n[o][1]);return[i-e,a-r]}function D2t(n){return[Math.min(n[0][0],n[1][0]),Math.min(n[0][1],n[1][1]),Math.max(n[0][0],n[1][0]),Math.max(n[0][1],n[1][1])]}function L2t(n,e,r){let i=null,a=ahe,o=ahe,s,l;for(let c=0;c<e.length;c++)s=rhe(n[0],n[1],e[c]),l=rhe(n[1],n[0],e[c]),s>a&&l>o&&!ihe([n[0],e[c]],r)&&!ihe([n[1],e[c]],r)&&(a=s,o=l,i=e[c]);return i}function KTe(n,e,r,i,a){let o=!1;for(let s=0;s<n.length-1;s++){const l=[n[s],n[s+1]],c=l[0][0]+","+l[0][1]+","+l[1][0]+","+l[1][1];if(gH(l[0],l[1])<e||a.has(c))continue;let u=0,d=D2t(l),f,h,p;do d=i.extendBbox(d,u),f=d[2]-d[0],h=d[3]-d[1],p=L2t(l,i.rangePoints(d),n),u++;while(p===null&&(r[0]>f||r[1]>h));f>=r[0]&&h>=r[1]&&a.add(c),p!==null&&(n.splice(s+1,0,p),i.removePoint(p),o=!0)}return o?KTe(n,e,r,i,a):n}function k2t(n,e,r){const i=e||20,a=N2t(O2t(B7.toXy(n,r)));if(a.length<4){const f=a.concat([a[0]]);return r?B7.fromXy(f,r):f}const o=I2t(a),s=[o[0]*ohe,o[1]*ohe],l=A2t(a).reverse().map(f=>a[f]);l.push(l[0]);const c=a.filter(function(f){return l.indexOf(f)<0}),u=Math.ceil(1/(a.length/(o[0]*o[1]))),d=KTe(l,Math.pow(i,2),s,d2t(c,u),new Set);return r?B7.fromXy(d,r):d}const ahe=Math.cos(90/(180/Math.PI)),ohe=.6;function F2t(n,e,r){if(n.length===1)return $2t(n[0],e,r);if(n.length===2)return she(n,e,r);if(n.length===3){const[i,a,o]=MX(n);if(BEe(i,a,o))return she([i,o],e,r)}switch(r){case"smooth":return z2t(n,e);case"sharp":return U2t(n,e);case"rounded":default:return B2t(n,e)}}const $2t=(n,e,r)=>{if(r==="sharp")return[["M",n[0]-e,n[1]-e],["L",n[0]+e,n[1]-e],["L",n[0]+e,n[1]+e],["L",n[0]-e,n[1]+e],["Z"]];const i=[e,e,0,0,0];return[["M",n[0],n[1]-e],["A",...i,n[0],n[1]+e],["A",...i,n[0],n[1]-e]]},she=(n,e,r)=>{const i=[e,e,0,0,0],a=r==="sharp"?Jn(n[0],am(_p(Ci(n[0],n[1])),e)):n[0],o=r==="sharp"?Jn(n[1],am(_p(Ci(n[1],n[0])),e)):n[1],s=am(_p(Q4(Ci(a,o),!1)),e),l=am(s,-1),c=Jn(a,s),u=Jn(o,s),d=Jn(o,l),f=Jn(a,l);return r==="sharp"?[["M",c[0],c[1]],["L",u[0],u[1]],["L",d[0],d[1]],["L",f[0],f[1]],["Z"]]:[["M",c[0],c[1]],["L",u[0],u[1]],["A",...i,d[0],d[1]],["L",f[0],f[1]],["A",...i,c[0],c[1]]]},B2t=(n,e)=>{const r=MX(n).map((l,c)=>{const u=(c-2+n.length)%n.length,d=(c-1+n.length)%n.length,f=(c+1)%n.length,h=n[u],p=n[d],g=n[f],m=Ci(h,p),v=Ci(p,l),y=Ci(l,g),b=(E,T)=>EX(E,T,!0)<Math.PI,x=b(m,v),_=b(v,y),S=E=>am(_p(Q4(E,!1)),e),M=S(v);return[{p:xy(x?Jn(p,S(m)):Jn(p,M)),concave:x&&p},{p:xy(_?Jn(l,S(y)):Jn(l,M)),concave:_&&l}]}),i=[e,e,0,0,0],a=r.findIndex((l,c)=>!r[(c-1+r.length)%r.length][0].concave&&!r[(c-1+r.length)%r.length][1].concave&&!l[0].concave&&!l[0].concave&&!l[1].concave),o=r.slice(a).concat(r.slice(0,a));let s=[];return o.flatMap((l,c)=>{const u=[],d=o[r.length-1];return c===0&&u.push(["M",...d[1].p]),l[0].concave?s.push(l[0].p,l[1].p):u.push(["A",...i,...l[0].p]),l[1].concave?s.unshift(l[1].p):u.push(["L",...l[1].p]),s.length===3&&(u.pop(),u.push(["C",...s.flat()]),s=[]),u})},z2t=(n,e)=>{const r=MX(n).map((i,a)=>{const o=n[(a+1)%n.length];return{p:i,v:_p(Ci(o,i))}});return r.forEach((i,a)=>{const o=a>0?a-1:n.length-1,s=r[o].v,l=_p(Jn(s,am(i.v,EX(s,i.v,!0)<Math.PI?1:-1)));i.p=Jn(i.p,am(l,e))}),YEe(r.map(i=>i.p))},U2t=(n,e)=>{const i=n.map((o,s)=>{const l=n[s===0?n.length-1:s-1],c=tC(am(_p(Q4(Ci(l,o),!1)),e));return[Jn(l,c),Jn(o,c)]}).flat();return i.map((o,s)=>{if(s%2===0)return null;const l=[i[(s-1)%i.length],i[s%i.length]],c=[i[(s+1)%i.length],i[(s+2)%i.length]];return CX(l,c,!0)}).filter(Boolean).map((o,s)=>[s===0?"M":"L",o[0],o[1]]).concat([["Z"]])};var V2t=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};class aL extends Cs{constructor(e,r){super(e,Object.assign({},aL.defaultOptions,r)),this.hullMemberIds=[],this.drawHull=()=>{if(!this.shape)this.shape=new PM({style:this.getHullStyle()}),this.context.canvas.appendChild(this.shape);else{const i=!Ra(this.optionsCache,this.options);this.shape.update(this.getHullStyle(i))}this.optionsCache=Object.assign({},this.options)},this.updateHullPath=i=>{this.shape&&this.options.members.includes(Fe(i.data))&&this.shape.update({d:this.getHullPath(!0)})},this.getHullPath=(i=!1)=>{const{graph:a}=this.context,o=this.getMember();if(o.length===0)return"";const s=o.map(u=>a.getNodeData(u)),l=k2t(s.map(Po),this.options.concavity).slice(1).reverse(),c=l.flatMap(u=>s.filter(d=>Ra(Po(d),u)).map(Fe));return Ra(c,this.hullMemberIds)&&!i?this.path:(this.hullMemberIds=c,this.path=F2t(l,this.getPadding(),this.options.corner),this.path)},this.bindEvents()}bindEvents(){this.context.graph.on(Ut.AFTER_RENDER,this.drawHull),this.context.graph.on(Ut.AFTER_ELEMENT_UPDATE,this.updateHullPath)}getHullStyle(e){const r=this.options,{members:i,padding:a,corner:o}=r,s=V2t(r,["members","padding","corner"]);return Object.assign(Object.assign({},s),{d:this.getHullPath(e)})}getPadding(){const{graph:e}=this.context;return this.hullMemberIds.reduce((i,a)=>{const{halfExtents:o}=e.getElementRenderBounds(a),s=Math.max(o[0],o[1]);return Math.max(i,s)},0)+this.options.padding}addMember(e){const r=Array.isArray(e)?e:[e];this.options.members=[...new Set([...this.options.members,...r])],this.shape.update({d:this.getHullPath()})}removeMember(e){const r=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter(i=>!r.includes(i)),r.some(i=>this.hullMemberIds.includes(i))&&this.shape.update({d:this.getHullPath()})}updateMember(e){this.options.members=cn(e)?e(this.options.members):e,this.shape.update(this.getHullStyle(!0))}getMember(){return this.options.members}destroy(){this.context.graph.off(Ut.AFTER_DRAW,this.drawHull),this.shape.destroy(),this.hullMemberIds=[],super.destroy()}}aL.defaultOptions={members:[],padding:10,corner:"rounded",concavity:1/0,fill:"lightblue",fillOpacity:.2,labelOpacity:1,stroke:"blue",strokeOpacity:.2};function ZTe(n,e){e(n),n.children&&n.children.forEach(function(r){r&&ZTe(r,e)})}function UM(n){oL(n,!0)}function $d(n){oL(n,!1)}function oL(n,e){var r=e?"visible":"hidden";ZTe(n,function(i){i.attr("visibility",r)})}var G2t=function(n){br(e,n);function e(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=n.apply(this,nn([],he(r),!1))||this;return a.isMutationObserved=!0,a.addEventListener(wr.INSERTED,function(){$d(a)}),a}return e}(Bo);function QTe(n){var e=n.appendChild(new G2t({class:"offscreen"}));return $d(e),e}function j2t(n){for(var e=n;e;){if(e.className==="offscreen")return!0;e=e.parent}return!1}var yK=function(n){br(e,n);function e(r){r===void 0&&(r={});var i=r.style,a=$a(r,["style"]);return n.call(this,xt({style:xt({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},i)},a))||this}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=QTe(this)),this._offscreen},enumerable:!1,configurable:!0}),e.prototype.disconnectedCallback=function(){var r;(r=this._offscreen)===null||r===void 0||r.destroy()},e}(Uy);function qx(n){return n*Math.PI/180}function JTe(n){return Number((n*180/Math.PI).toPrecision(5))}var pl=function(){function n(e,r,i,a){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),a===void 0&&(a=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=e,this.y=r,this.width=i,this.height=a}return Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),n.fromRect=function(e){return new n(e.x,e.y,e.width,e.height)},n.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},n.prototype.isPointIn=function(e,r){return e>=this.left&&e<=this.right&&r>=this.top&&r<=this.bottom},n}();function Wu(n,e){return cn(n)?n.apply(void 0,nn([],he(e),!1)):n}var uf=function(n,e){var r=function(a){return"".concat(e,"-").concat(a)},i=Object.fromEntries(Object.entries(n).map(function(a){var o=he(a,2),s=o[0],l=o[1],c=r(l);return[s,{name:c,class:".".concat(c),id:"#".concat(c),toString:function(){return c}}]}));return Object.assign(i,{prefix:r}),i},H2t=5,e3e=function(n,e,r,i){r===void 0&&(r=0),i===void 0&&(i=H2t),Object.entries(e).forEach(function(a){var o=he(a,2),s=o[0],l=o[1],c=n;Object.prototype.hasOwnProperty.call(e,s)&&(l?Ux(l)?(Ux(n[s])||(c[s]={}),r<i?e3e(n[s],l,r+1,i):c[s]=e[s]):Jc(l)?(c[s]=[],c[s]=c[s].concat(l)):c[s]=l:c[s]=l)})},ns=function(n){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var i=0;i<e.length;i+=1)e3e(n,e[i]);return n},t3e=function(n){return n!==void 0&&n!=null&&!Number.isNaN(n)},DA,W2t=mj(function(n,e){var r=e.fontSize,i=e.fontFamily,a=e.fontWeight,o=e.fontStyle,s=e.fontVariant;return DA||(DA=At.offscreenCanvasCreator.getOrCreateContext(void 0)),DA.font=[o,s,a,"".concat(r,"px"),i].join(" "),DA.measureText(n).width},function(n,e){return[n,Object.values(e||n3e(n)).join()].join("")},4096),n3e=function(n){var e=n.style.fontFamily||"sans-serif",r=n.style.fontWeight||"normal",i=n.style.fontStyle||"normal",a=n.style.fontVariant,o=n.style.fontSize;return o=typeof o=="object"?o.value:o,{fontSize:o,fontFamily:e,fontWeight:r,fontStyle:i,fontVariant:a}};function r3e(n){return n.nodeName==="text"?n:n.nodeName==="g"&&n.children.length===1&&n.children[0].nodeName==="text"?n.children[0]:null}function i3e(n,e){var r=r3e(n);r&&r.attr(e)}function mH(n,e,r){r===void 0&&(r="..."),i3e(n,{wordWrap:!0,wordWrapWidth:e,maxLines:1,textOverflow:r})}function q2t(n,e,r,i){r===void 0&&(r=2),i===void 0&&(i="top"),i3e(n,{wordWrap:!0,wordWrapWidth:e,maxLines:r,textBaseline:i})}function lhe(n){var e=n.canvas,r=n.touches,i=n.offsetX,a=n.offsetY;if(e){var o=e.x,s=e.y;return[o,s]}if(r){var l=r[0],c=l.clientX,u=l.clientY;return[c,u]}return i&&a?[i,a]:[0,0]}function Fp(n){return typeof n=="function"?n():Kr(n)||on(n)?new yK({style:{text:String(n)}}):n}function Y2t(n,e){return n.reduce(function(r,i){return(r[i[e]]=r[i[e]]||[]).push(i),r},{})}function Vc(n,e,r,i,a){return i===void 0&&(i=!0),a===void 0&&(a=function(o){o.node().removeChildren()}),n?r(e):(i&&a(e),null)}function ls(n,e,r,i,a){return i===void 0&&(i=!0),a===void 0&&(a=!1),i&&n===e||a&&n===r?!0:n>e&&n<r}var X2t=function(n,e){return function(r){return n*(1-r)+e*r}};function K2t(n,e){var r=e?e.length:0,i=n?Math.min(r,n.length):0;return function(a){var o=new Array(i),s=new Array(r),l=0;for(l=0;l<i;++l)o[l]=bK(n[l],e[l]);for(;l<r;++l)s[l]=e[l];for(l=0;l<i;++l)s[l]=o[l](a);return s}}function Z2t(n,e){n===void 0&&(n={}),e===void 0&&(e={});var r={},i={};return Object.entries(e).forEach(function(a){var o=he(a,2),s=o[0],l=o[1];s in n?r[s]=bK(n[s],l):i[s]=l}),function(a){return Object.entries(r).forEach(function(o){var s=he(o,2),l=s[0],c=s[1];return i[l]=c(a)}),i}}function bK(n,e){return typeof n=="number"&&typeof e=="number"?X2t(n,e):Array.isArray(n)&&Array.isArray(e)?K2t(n,e):typeof n=="object"&&typeof e=="object"?Z2t(n,e):function(r){return n}}function Q2t(n,e,r,i){if(!i)return n.attr("__keyframe_data__",r),null;var a=i.duration,o=a===void 0?0:a,s=bK(e,r),l=Math.ceil(+o/16),c=new Array(l).fill(0).map(function(u,d,f){return{__keyframe_data__:s(d/(f.length-1))}});return n.animate(c,xt({fill:"both"},i))}function ep(n,e){return[n[0]*e,n[1]*e]}function m2(n,e){return[n[0]+e[0],n[1]+e[1]]}function z7(n,e){return[n[0]-e[0],n[1]-e[1]]}function Bv(n,e){return[Math.min(n[0],e[0]),Math.min(n[1],e[1])]}function zv(n,e){return[Math.max(n[0],e[0]),Math.max(n[1],e[1])]}function lC(n,e){return Math.sqrt(Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2))}function a3e(n){if(n[0]===0&&n[1]===0)return[0,0];var e=Math.sqrt(Math.pow(n[0],2)+Math.pow(n[1],2));return[n[0]/e,n[1]/e]}function J2t(n,e){return e?[n[1],-n[0]]:[-n[1],n[0]]}function che(n,e){return+n.toPrecision(e)}function uhe(n,e){var r={},i=Array.isArray(e)?e:[e];for(var a in n)i.includes(a)||(r[a]=n[a]);return r}function eEt(n,e,r,i){var a,o=[],s=!!i,l,c,u=[1/0,1/0],d=[-1/0,-1/0],f,h,p;if(s){a=he(i,2),u=a[0],d=a[1];for(var g=0,m=n.length;g<m;g+=1){var v=n[g];u=Bv(u,v),d=zv(d,v)}}for(var g=0,y=n.length;g<y;g+=1){var v=n[g];if(g===0)p=v;else if(g===y-1)h=v,o.push(p),o.push(h);else{var b=[g?g-1:y-1,g-1][1];l=n[b],c=n[g+1];var x=[0,0];x=z7(c,l),x=ep(x,e);var _=lC(v,l),S=lC(v,c),M=_+S;M!==0&&(_/=M,S/=M);var E=ep(x,-_),T=ep(x,S);h=m2(v,E),f=m2(v,T),f=Bv(f,zv(c,v)),f=zv(f,Bv(c,v)),E=z7(f,v),E=ep(E,-_/S),h=m2(v,E),h=Bv(h,zv(l,v)),h=zv(h,Bv(l,v)),T=z7(v,h),T=ep(T,S/_),f=m2(v,T),s&&(h=zv(h,u),h=Bv(h,d),f=zv(f,u),f=Bv(f,d)),o.push(p),o.push(h),p=f}}return o}function tEt(n,e,r){r===void 0&&(r=[[0,0],[1,1]]);for(var i=!1,a=[],o=0,s=n.length;o<s;o+=2)a.push([n[o],n[o+1]]);for(var l=eEt(a,.4,i,r),c=a.length,u=[],d,f,h,o=0;o<c-1;o+=1)d=l[o*2],f=l[o*2+1],h=a[o+1],u.push(["C",d[0],d[1],f[0],f[1],h[0],h[1]]);return u}var nEt=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function rEt(n){return nEt.includes(n)}function dhe(n){var e={};for(var r in n)rEt(r)&&(e[r]=n[r]);return e}function iEt(n,e){if(n.length<=e)return n;for(var r=Math.floor(n.length/e),i=[],a=0;a<n.length;a+=r)i.push(n[a]);return i}function xK(n,e,r){var i=n.getBBox(),a=i.width,o=i.height,s=e/Math.max(a,o);return n.style.transform="scale(".concat(s,")"),s}function aEt(n,e){var r=new Map;return n.forEach(function(i){var a=e(i);r.has(a)||r.set(a,[]),r.get(a).push(i)}),r}function oEt(n){throw new Error(n)}var sEt=function(){function n(a,o,s,l,c,u,d){a===void 0&&(a=null),o===void 0&&(o=null),s===void 0&&(s=null),l===void 0&&(l=null),c===void 0&&(c=[null,null,null,null,null]),u===void 0&&(u=[]),d===void 0&&(d=[]),e.add(this),this._elements=Array.from(a),this._data=o,this._parent=s,this._document=l,this._enter=c[0],this._update=c[1],this._exit=c[2],this._merge=c[3],this._split=c[4],this._transitions=u,this._facetElements=d}n.prototype.selectAll=function(a){var o=typeof a=="string"?this._parent.querySelectorAll(a):a;return new r(o,null,this._elements[0],this._document)},n.prototype.selectFacetAll=function(a){var o=typeof a=="string"?this._parent.querySelectorAll(a):a;return new r(this._elements,null,this._parent,this._document,void 0,void 0,o)},n.prototype.select=function(a){var o=typeof a=="string"?this._parent.querySelectorAll(a)[0]||null:a;return new r([o],null,o,this._document)},n.prototype.append=function(a){var o=this,s=typeof a=="function"?a:function(){return o.createElement(a)},l=[];if(this._data!==null){for(var c=0;c<this._data.length;c++){var u=this._data[c],d=he(Array.isArray(u)?u:[u,null],2),f=d[0],h=d[1],p=s(f,c);p.__data__=f,h!==null&&(p.__fromElements__=h),this._parent.appendChild(p),l.push(p)}return new r(l,null,this._parent,this._document)}for(var c=0;c<this._elements.length;c++){var g=this._elements[c],f=g.__data__,p=s(f,c);g.appendChild(p),l.push(p)}return new r(l,null,l[0],this._document)},n.prototype.maybeAppend=function(a,o){var s=oF(this,e,"m",i).call(this,a[0]==="#"?a:"#".concat(a),o);return s.attr("id",a),s},n.prototype.maybeAppendByClassName=function(a,o){var s=a.toString(),l=oF(this,e,"m",i).call(this,s[0]==="."?s:".".concat(s),o);return l.attr("className",s),l},n.prototype.maybeAppendByName=function(a,o){var s=oF(this,e,"m",i).call(this,'[name="'.concat(a,'"]'),o);return s.attr("name",a),s},n.prototype.data=function(a,o,s){var l,c;o===void 0&&(o=function(A){return A}),s===void 0&&(s=function(){return null});for(var u=[],d=[],f=new Set(this._elements),h=[],p=new Set,g=new Map(this._elements.map(function(A,N){return[o(A.__data__,N),A]})),m=new Map(this._facetElements.map(function(A,N){return[o(A.__data__,N),A]})),v=aEt(this._elements,function(A){return s(A.__data__)}),y=0;y<a.length;y++){var b=a[y],x=o(b,y),_=s(b,y);if(g.has(x)){var S=g.get(x);S.__data__=b,S.__facet__=!1,d.push(S),f.delete(S),g.delete(x)}else if(m.has(x)){var S=m.get(x);S.__data__=b,S.__facet__=!0,d.push(S),m.delete(x)}else if(v.has(x)){var M=v.get(x);h.push([b,M]);try{for(var E=(l=void 0,_M(M)),T=E.next();!T.done;T=E.next()){var S=T.value;f.delete(S)}}catch(A){l={error:A}}finally{try{T&&!T.done&&(c=E.return)&&c.call(E)}finally{if(l)throw l.error}}v.delete(x)}else if(g.has(_)){var S=g.get(_);S.__toData__?S.__toData__.push(b):S.__toData__=[b],p.add(S),f.delete(S)}else u.push(b)}var P=[new r([],u,this._parent,this._document),new r(d,null,this._parent,this._document),new r(f,null,this._parent,this._document),new r([],h,this._parent,this._document),new r(p,null,this._parent,this._document)];return new r(this._elements,null,this._parent,this._document,P)},n.prototype.merge=function(a){var o=nn(nn([],he(this._elements),!1),he(a._elements),!1),s=nn(nn([],he(this._transitions),!1),he(a._transitions),!1);return new r(o,null,this._parent,this._document,void 0,s)},n.prototype.createElement=function(a){if(this._document)return this._document.createElement(a,{});var o=r.registry[a];return o?new o:oEt("Unknown node type: ".concat(a))},n.prototype.join=function(a,o,s,l,c){a===void 0&&(a=function(g){return g}),o===void 0&&(o=function(g){return g}),s===void 0&&(s=function(g){return g.remove()}),l===void 0&&(l=function(g){return g}),c===void 0&&(c=function(g){return g.remove()});var u=a(this._enter),d=o(this._update),f=s(this._exit),h=l(this._merge),p=c(this._split);return d.merge(u).merge(f).merge(h).merge(p)},n.prototype.remove=function(){for(var a=function(l){var c=o._elements[l],u=o._transitions[l];u?u.then(function(){return c.remove()}):c.remove()},o=this,s=0;s<this._elements.length;s++)a(s);return new r([],null,this._parent,this._document,void 0,this._transitions)},n.prototype.each=function(a){for(var o=0;o<this._elements.length;o++){var s=this._elements[o],l=s.__data__;a.call(s,l,o)}return this},n.prototype.attr=function(a,o){var s=typeof o!="function"?function(){return o}:o;return this.each(function(l,c){o!==void 0&&(this[a]=s.call(this,l,c))})},n.prototype.style=function(a,o,s){s===void 0&&(s=!0);var l=typeof o!="function"||!s?function(){return o}:o;return this.each(function(c,u){o!==void 0&&(this.style[a]=l.call(this,c,u))})},n.prototype.styles=function(a,o){return a===void 0&&(a={}),o===void 0&&(o=!0),this.each(function(s,l){var c=this;Object.entries(a).forEach(function(u){var d=he(u,2),f=d[0],h=d[1],p=typeof h!="function"||!o?function(){return h}:h;h!==void 0&&c.attr(f,p.call(c,s,l))})})},n.prototype.update=function(a,o){o===void 0&&(o=!0);var s=typeof a!="function"||!o?function(){return a}:a;return this.each(function(l,c){a&&this.update&&this.update(s.call(this,l,c))})},n.prototype.maybeUpdate=function(a,o){o===void 0&&(o=!0);var s=typeof a!="function"||!o?function(){return a}:a;return this.each(function(l,c){a&&this.update&&this.update(s.call(this,l,c))})},n.prototype.transition=function(a){var o=this._transitions;return this.each(function(s,l){o[l]=a.call(this,s,l)})},n.prototype.on=function(a,o){return this.each(function(){this.addEventListener(a,o)}),this},n.prototype.call=function(a){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];return a.call.apply(a,nn([this._parent,this],he(o),!1)),this},n.prototype.node=function(){return this._elements[0]},n.prototype.nodes=function(){return this._elements},n.prototype.transitions=function(){return this._transitions.filter(function(a){return!!a})},n.prototype.parent=function(){return this._parent};var e,r,i;return r=n,e=new WeakSet,i=function(o,s){var l=this._elements[0],c=l.querySelector(o);if(c)return new r([c],null,this._parent,this._document);var u=typeof s=="string"?this.createElement(s):s();return l.appendChild(u),new r([u],null,this._parent,this._document)},n.registry={g:Bo,rect:ws,circle:qp,path:Lc,text:yK,ellipse:EM,image:MM,line:yy,polygon:zy,polyline:X4,html:CM},n}();function un(n){return new sEt([n],null,n,n.ownerDocument)}function lEt(n,e,r){return n.querySelector(e)?un(n).select(e):un(n).append(r)}function Ss(n){if(on(n))return[n,n,n,n];if(Jc(n)){var e=n.length;if(e===1)return[n[0],n[0],n[0],n[0]];if(e===2)return[n[0],n[1],n[0],n[1]];if(e===3)return[n[0],n[1],n[2],n[1]];if(e===4)return n}return[0,0,0,0]}function fhe(n){var e=n.getLocalBounds(),r=e.min,i=e.max,a=he([r,i],2),o=he(a[0],2),s=o[0],l=o[1],c=he(a[1],2),u=c[0],d=c[1];return{x:s,y:l,width:u-s,height:d-l,left:s,bottom:d,top:l,right:u}}function cEt(n,e){var r=he(n,2),i=r[0],a=r[1],o=he(e,2),s=o[0],l=o[1];return i!==s&&a===l}function uEt(n,e){var r,i,a=e.attributes;try{for(var o=_M(Object.entries(a)),s=o.next();!s.done;s=o.next()){var l=he(s.value,2),c=l[0],u=l[1];c!=="id"&&c!=="className"&&n.attr(c,u)}}catch(d){r={error:d}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}}function _K(n){return n.toString().charAt(0).toUpperCase()+n.toString().slice(1)}function dEt(n){return n.toString().charAt(0).toLowerCase()+n.toString().slice(1)}function fEt(n,e){return"".concat(e).concat(_K(n))}function hhe(n,e,r){var i;r===void 0&&(r=!0);var a=e||((i=n.match(/^([a-z][a-z0-9]+)/))===null||i===void 0?void 0:i[0])||"",o=n.replace(new RegExp("^(".concat(a,")")),"");return r?dEt(o):o}function hEt(n,e){Object.entries(e).forEach(function(r){var i=he(r,2),a=i[0],o=i[1];nn([n],he(n.querySelectorAll(a)),!1).filter(function(s){return s.matches(a)}).forEach(function(s){if(s){var l=s;l.style.cssText+=Object.entries(o).reduce(function(c,u){return"".concat(c).concat(u.join(":"),";")},"")}})})}var LA=function(n,e){if(!(n!=null&&n.startsWith(e)))return!1;var r=n[e.length];return r>="A"&&r<="Z"};function Qn(n,e,r){r===void 0&&(r=!1);var i={};return Object.entries(n).forEach(function(a){var o=he(a,2),s=o[0],l=o[1];if(!(s==="className"||s==="class")){if(LA(s,"show")&&LA(hhe(s,"show"),e)!==r)s===fEt(e,"show")?i[s]=l:i[s.replace(new RegExp(_K(e)),"")]=l;else if(!LA(s,"show")&&LA(s,e)!==r){var c=hhe(s,e);c==="filter"&&typeof l=="function"||(i[c]=l)}}}),i}function wb(n,e){return Object.entries(n).reduce(function(r,i){var a=he(i,2),o=a[0],s=a[1];return o.startsWith("show")?r["show".concat(e).concat(o.slice(4))]=s:r["".concat(e).concat(_K(o))]=s,r},{})}function $p(n,e){e===void 0&&(e=["x","y","class","className"]);var r=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],i={},a={};return Object.entries(n).forEach(function(o){var s=he(o,2),l=s[0],c=s[1];e.includes(l)||(r.indexOf(l)!==-1?a[l]=c:i[l]=c)}),[i,a]}function Il(n,e){var r={YYYY:n.getFullYear(),MM:n.getMonth()+1,DD:n.getDate(),HH:n.getHours(),mm:n.getMinutes(),ss:n.getSeconds()},i=e;return Object.keys(r).forEach(function(a){var o=r[a];i=i.replace(a,a==="YYYY"?"".concat(o):"".concat(o).padStart(2,"0"))}),i}function pEt(n,e,r){var i=n.getBBox(),a=i.width,o=i.height,s=he([e,r].map(function(u,d){var f;return u.includes("%")?parseFloat(((f=u.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||f===void 0?void 0:f[0])||"0")/100*(d===0?a:o):u}),2),l=s[0],c=s[1];return[l,c]}function o3e(n,e){if(e)try{var r=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,i=e.replace(r,function(a,o,s){return"translate(".concat(pEt(n,o,s),")")});n.attr("transform",i)}catch{}}function gEt(n){var e;return((e=n[0])===null||e===void 0?void 0:e.map(function(r,i){return n.map(function(a){return a[i]})}))||[]}var phe=function(n,e){if(e==null){n.innerHTML="";return}n.replaceChildren?Array.isArray(e)?n.replaceChildren.apply(n,nn([],he(e),!1)):n.replaceChildren(e):(n.innerHTML="",Array.isArray(e)?e.forEach(function(r){return n.appendChild(r)}):n.appendChild(e))};function mEt(){oL(this,this.attributes.visibility!=="hidden")}var Ba=function(n){br(e,n);function e(r,i){i===void 0&&(i={});var a=n.call(this,ns({},{style:i},r))||this;return a.initialized=!1,a._defaultOptions=i,a}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=QTe(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},e.prototype.disconnectedCallback=function(){var r;(r=this._offscreen)===null||r===void 0||r.destroy()},e.prototype.attributeChangedCallback=function(r){r==="visibility"&&mEt.call(this)},e.prototype.update=function(r,i){var a;return this.attr(ns({},this.attributes,r||{})),(a=this.render)===null||a===void 0?void 0:a.call(this,this.attributes,this,i)},e.prototype.clear=function(){this.removeChildren()},e.prototype.bindEvents=function(r,i){},e.prototype.getSubShapeStyle=function(r){r.x,r.y,r.transform,r.transformOrigin,r.class,r.className,r.zIndex;var i=$a(r,["x","y","transform","transformOrigin","class","className","zIndex"]);return i},e}(gX),s3e=function(n,e,r){return[["M",n-r,e],["A",r,r,0,1,0,n+r,e],["A",r,r,0,1,0,n-r,e],["Z"]]},vEt=s3e,yEt=function(n,e,r){return[["M",n-r,e-r],["L",n+r,e-r],["L",n+r,e+r],["L",n-r,e+r],["Z"]]},bEt=function(n,e,r){return[["M",n-r,e],["L",n,e-r],["L",n+r,e],["L",n,e+r],["Z"]]},xEt=function(n,e,r){var i=r*Math.sin(.3333333333333333*Math.PI);return[["M",n-r,e+i],["L",n,e-i],["L",n+r,e+i],["Z"]]},_Et=function(n,e,r){var i=r*Math.sin(.3333333333333333*Math.PI);return[["M",n-r,e-i],["L",n+r,e-i],["L",n,e+i],["Z"]]},wEt=function(n,e,r){var i=r/2*Math.sqrt(3);return[["M",n,e-r],["L",n+i,e-r/2],["L",n+i,e+r/2],["L",n,e+r],["L",n-i,e+r/2],["L",n-i,e-r/2],["Z"]]},SEt=function(n,e,r){var i=r-1.5;return[["M",n-r,e-i],["L",n+r,e+i],["L",n+r,e-i],["L",n-r,e+i],["Z"]]},l3e=function(n,e,r){return[["M",n,e+r],["L",n,e-r]]},EEt=function(n,e,r){return[["M",n-r,e-r],["L",n+r,e+r],["M",n+r,e-r],["L",n-r,e+r]]},CEt=function(n,e,r){return[["M",n-r/2,e-r],["L",n+r/2,e-r],["M",n,e-r],["L",n,e+r],["M",n-r/2,e+r],["L",n+r/2,e+r]]},MEt=function(n,e,r){return[["M",n-r,e],["L",n+r,e],["M",n,e-r],["L",n,e+r]]},TEt=function(n,e,r){return[["M",n-r,e],["L",n+r,e]]},c3e=function(n,e,r){return[["M",n-r,e],["L",n+r,e]]},AEt=c3e,REt=function(n,e,r){return[["M",n-r,e],["A",r/2,r/2,0,1,1,n,e],["A",r/2,r/2,0,1,0,n+r,e]]},PEt=function(n,e,r){return[["M",n-r-1,e-2.5],["L",n,e-2.5],["L",n,e+2.5],["L",n+r+1,e+2.5]]},NEt=function(n,e,r){return[["M",n-r-1,e+2.5],["L",n,e+2.5],["L",n,e-2.5],["L",n+r+1,e-2.5]]},OEt=function(n,e,r){return[["M",n-(r+1),e+2.5],["L",n-r/2,e+2.5],["L",n-r/2,e-2.5],["L",n+r/2,e-2.5],["L",n+r/2,e+2.5],["L",n+r+1,e+2.5]]};function IEt(n,e){return[["M",n-5,e+2.5],["L",n-5,e],["L",n,e],["L",n,e-3],["L",n,e+3],["L",n+6.5,e+3]]}var DEt=function(n,e,r){return[["M",n-r,e-r],["L",n+r,e],["L",n-r,e+r],["Z"]]};function LEt(n){var e="default";if(Xa(n)&&n instanceof Image)e="image";else if(cn(n))e="symbol";else if(Kr(n)){var r=new RegExp("data:(image|text)");n.match(r)?e="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(n)?e="url":e="symbol"}return e}function kEt(n){var e=LEt(n);return["base64","url","image"].includes(e)?"image":n&&e==="symbol"?"path":null}var Ii=function(n){br(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(r,i){var a=r.x,o=a===void 0?0:a,s=r.y,l=s===void 0?0:s,c=this.getSubShapeStyle(r),u=c.symbol,d=c.size,f=d===void 0?16:d,h=$a(c,["symbol","size"]),p=kEt(u);Vc(!!p,un(i),function(g){g.maybeAppendByClassName("marker",p).attr("className","marker ".concat(p,"-marker")).call(function(m){if(p==="image"){var v=f*2;m.styles({img:u,width:v,height:v,x:o-f,y:l-f})}else{var v=f/2,y=cn(u)?u:e.getSymbol(u);m.styles(xt({d:y==null?void 0:y(o,l,v)},h))}})})},e.MARKER_SYMBOL_MAP=new Map,e.registerSymbol=function(r,i){e.MARKER_SYMBOL_MAP.set(r,i)},e.getSymbol=function(r){return e.MARKER_SYMBOL_MAP.get(r)},e.getSymbols=function(){return Array.from(e.MARKER_SYMBOL_MAP.keys())},e}(Ba);Ii.registerSymbol("cross",EEt);Ii.registerSymbol("hyphen",TEt);Ii.registerSymbol("line",l3e);Ii.registerSymbol("plus",MEt);Ii.registerSymbol("tick",CEt);Ii.registerSymbol("circle",s3e);Ii.registerSymbol("point",vEt);Ii.registerSymbol("bowtie",SEt);Ii.registerSymbol("hexagon",wEt);Ii.registerSymbol("square",yEt);Ii.registerSymbol("diamond",bEt);Ii.registerSymbol("triangle",xEt);Ii.registerSymbol("triangle-down",_Et);Ii.registerSymbol("line",l3e);Ii.registerSymbol("dot",c3e);Ii.registerSymbol("dash",AEt);Ii.registerSymbol("smooth",REt);Ii.registerSymbol("hv",PEt);Ii.registerSymbol("vh",NEt);Ii.registerSymbol("hvh",OEt);Ii.registerSymbol("vhv",IEt);function AO(n,...e){return e.reduce((r,i)=>a=>r(i(a)),n)}function vH(n,e){return e-n?r=>(r-n)/(e-n):r=>.5}function FEt(n,e){const r=e<n?e:n,i=n>e?n:e;return a=>Math.min(Math.max(r,a),i)}function $Et(n,e,r,i,a){let o=r,s=i||n.length;const l=c=>c;for(;o<s;){const c=Math.floor((o+s)/2);l(n[c])>e?s=c:o=c+1}return o}const ghe=Math.sqrt(50),mhe=Math.sqrt(10),vhe=Math.sqrt(2);function TP(n,e,r){const i=(e-n)/Math.max(0,r),a=Math.floor(Math.log(i)/Math.LN10),o=i/10**a;return a>=0?(o>=ghe?10:o>=mhe?5:o>=vhe?2:1)*10**a:-(10**-a)/(o>=ghe?10:o>=mhe?5:o>=vhe?2:1)}const BEt=(n,e,r=5)=>{const i=[n,e];let a=0,o=i.length-1,s=i[a],l=i[o],c;return l<s&&([s,l]=[l,s],[a,o]=[o,a]),c=TP(s,l,r),c>0?(s=Math.floor(s/c)*c,l=Math.ceil(l/c)*c,c=TP(s,l,r)):c<0&&(s=Math.ceil(s*c)/c,l=Math.floor(l*c)/c,c=TP(s,l,r)),c>0?(i[a]=Math.floor(s/c)*c,i[o]=Math.ceil(l/c)*c):c<0&&(i[a]=Math.ceil(s*c)/c,i[o]=Math.floor(l*c)/c),i};function yhe(n){return!Kn(n)&&!cit(n)&&!Number.isNaN(n)}var u3e={exports:{}},zEt={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},d3e={exports:{}},UEt=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},VEt=UEt,GEt=Array.prototype.concat,jEt=Array.prototype.slice,bhe=d3e.exports=function(e){for(var r=[],i=0,a=e.length;i<a;i++){var o=e[i];VEt(o)?r=GEt.call(r,jEt.call(o)):r.push(o)}return r};bhe.wrap=function(n){return function(){return n(bhe(arguments))}};var HEt=d3e.exports,Y2=zEt,VM=HEt,f3e=Object.hasOwnProperty,h3e=Object.create(null);for(var U7 in Y2)f3e.call(Y2,U7)&&(h3e[Y2[U7]]=U7);var Fc=u3e.exports={to:{},get:{}};Fc.get=function(n){var e=n.substring(0,3).toLowerCase(),r,i;switch(e){case"hsl":r=Fc.get.hsl(n),i="hsl";break;case"hwb":r=Fc.get.hwb(n),i="hwb";break;default:r=Fc.get.rgb(n),i="rgb";break}return r?{model:i,value:r}:null};Fc.get.rgb=function(n){if(!n)return null;var e=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,i=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,a=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^(\w+)$/,s=[0,0,0,1],l,c,u;if(l=n.match(r)){for(u=l[2],l=l[1],c=0;c<3;c++){var d=c*2;s[c]=parseInt(l.slice(d,d+2),16)}u&&(s[3]=parseInt(u,16)/255)}else if(l=n.match(e)){for(l=l[1],u=l[3],c=0;c<3;c++)s[c]=parseInt(l[c]+l[c],16);u&&(s[3]=parseInt(u+u,16)/255)}else if(l=n.match(i)){for(c=0;c<3;c++)s[c]=parseInt(l[c+1],0);l[4]&&(l[5]?s[3]=parseFloat(l[4])*.01:s[3]=parseFloat(l[4]))}else if(l=n.match(a)){for(c=0;c<3;c++)s[c]=Math.round(parseFloat(l[c+1])*2.55);l[4]&&(l[5]?s[3]=parseFloat(l[4])*.01:s[3]=parseFloat(l[4]))}else return(l=n.match(o))?l[1]==="transparent"?[0,0,0,0]:f3e.call(Y2,l[1])?(s=Y2[l[1]],s[3]=1,s):null:null;for(c=0;c<3;c++)s[c]=Am(s[c],0,255);return s[3]=Am(s[3],0,1),s};Fc.get.hsl=function(n){if(!n)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=n.match(e);if(r){var i=parseFloat(r[4]),a=(parseFloat(r[1])%360+360)%360,o=Am(parseFloat(r[2]),0,100),s=Am(parseFloat(r[3]),0,100),l=Am(isNaN(i)?1:i,0,1);return[a,o,s,l]}return null};Fc.get.hwb=function(n){if(!n)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=n.match(e);if(r){var i=parseFloat(r[4]),a=(parseFloat(r[1])%360+360)%360,o=Am(parseFloat(r[2]),0,100),s=Am(parseFloat(r[3]),0,100),l=Am(isNaN(i)?1:i,0,1);return[a,o,s,l]}return null};Fc.to.hex=function(){var n=VM(arguments);return"#"+kA(n[0])+kA(n[1])+kA(n[2])+(n[3]<1?kA(Math.round(n[3]*255)):"")};Fc.to.rgb=function(){var n=VM(arguments);return n.length<4||n[3]===1?"rgb("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+")":"rgba("+Math.round(n[0])+", "+Math.round(n[1])+", "+Math.round(n[2])+", "+n[3]+")"};Fc.to.rgb.percent=function(){var n=VM(arguments),e=Math.round(n[0]/255*100),r=Math.round(n[1]/255*100),i=Math.round(n[2]/255*100);return n.length<4||n[3]===1?"rgb("+e+"%, "+r+"%, "+i+"%)":"rgba("+e+"%, "+r+"%, "+i+"%, "+n[3]+")"};Fc.to.hsl=function(){var n=VM(arguments);return n.length<4||n[3]===1?"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)":"hsla("+n[0]+", "+n[1]+"%, "+n[2]+"%, "+n[3]+")"};Fc.to.hwb=function(){var n=VM(arguments),e="";return n.length>=4&&n[3]!==1&&(e=", "+n[3]),"hwb("+n[0]+", "+n[1]+"%, "+n[2]+"%"+e+")"};Fc.to.keyword=function(n){return h3e[n.slice(0,3)]};function Am(n,e,r){return Math.min(Math.max(e,n),r)}function kA(n){var e=Math.round(n).toString(16).toUpperCase();return e.length<2?"0"+e:e}var WEt=u3e.exports;const qEt=Sl(WEt);function V7(n,e,r){let i=r;return i<0&&(i+=1),i>1&&(i-=1),i<1/6?n+(e-n)*6*i:i<1/2?e:i<2/3?n+(e-n)*(2/3-i)*6:n}function YEt(n){const e=n[0]/360,r=n[1]/100,i=n[2]/100,a=n[3];if(r===0)return[i*255,i*255,i*255,a];const o=i<.5?i*(1+r):i+r-i*r,s=2*i-o,l=V7(s,o,e+1/3),c=V7(s,o,e),u=V7(s,o,e-1/3);return[l*255,c*255,u*255,a]}function xhe(n){const e=qEt.get(n);if(!e)return null;const{model:r,value:i}=e;return r==="rgb"?i:r==="hsl"?YEt(i):null}const RO=(n,e)=>r=>n*(1-r)+e*r,XEt=(n,e)=>{const r=xhe(n),i=xhe(e);return r===null||i===null?r?()=>n:()=>e:a=>{const o=new Array(4);for(let d=0;d<4;d+=1){const f=r[d],h=i[d];o[d]=f*(1-a)+h*a}const[s,l,c,u]=o;return`rgba(${Math.round(s)}, ${Math.round(l)}, ${Math.round(c)}, ${u})`}},KEt=(n,e)=>typeof n=="number"&&typeof e=="number"?RO(n,e):typeof n=="string"&&typeof e=="string"?XEt(n,e):()=>n,ZEt=(n,e)=>{const r=RO(n,e);return i=>Math.round(r(i))};function _he({map:n,initKey:e},r){const i=e(r);return n.has(i)?n.get(i):r}function QEt({map:n,initKey:e},r){const i=e(r);return n.has(i)?n.get(i):(n.set(i,r),r)}function JEt({map:n,initKey:e},r){const i=e(r);return n.has(i)&&(r=n.get(i),n.delete(i)),r}function eCt(n){return typeof n=="object"?n.valueOf():n}let whe=class extends Map{constructor(e){if(super(),this.map=new Map,this.initKey=eCt,e!==null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(_he({map:this.map,initKey:this.initKey},e))}has(e){return super.has(_he({map:this.map,initKey:this.initKey},e))}set(e,r){return super.set(QEt({map:this.map,initKey:this.initKey},e),r)}delete(e){return super.delete(JEt({map:this.map,initKey:this.initKey},e))}};class p3e{constructor(e){this.options=xl({},this.getDefaultOptions()),this.update(e)}getOptions(){return this.options}update(e={}){this.options=xl({},this.options,e),this.rescale(e)}rescale(e){}}const wK=Symbol("defaultUnknown");function She(n,e,r){for(let i=0;i<e.length;i+=1)n.has(e[i])||n.set(r(e[i]),i)}function Ehe(n){const{value:e,from:r,to:i,mapper:a,notFoundReturn:o}=n;let s=a.get(e);if(s===void 0){if(o!==wK)return o;s=r.push(e)-1,a.set(e,s)}return i[s%i.length]}function Che(n){return n instanceof Date?e=>`${e}`:typeof n=="object"?e=>JSON.stringify(e):e=>e}class SK extends p3e{getDefaultOptions(){return{domain:[],range:[],unknown:wK}}constructor(e){super(e)}map(e){return this.domainIndexMap.size===0&&She(this.domainIndexMap,this.getDomain(),this.domainKey),Ehe({value:this.domainKey(e),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(e){return this.rangeIndexMap.size===0&&She(this.rangeIndexMap,this.getRange(),this.rangeKey),Ehe({value:this.rangeKey(e),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(e){const[r]=this.options.domain,[i]=this.options.range;if(this.domainKey=Che(r),this.rangeKey=Che(i),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!e||e.range)&&this.rangeIndexMap.clear(),(!e||e.domain||e.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new SK(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:e,compare:r}=this.options;return this.sortedDomain=r?[...e].sort(r):e,this.sortedDomain}}function tCt(n){const e=Math.min(...n);return n.map(r=>r/e)}function nCt(n,e){const r=n.length,i=e-r;return i>0?[...n,...new Array(i).fill(1)]:i<0?n.slice(0,e):n}function rCt(n){return Math.round(n*1e12)/1e12}function iCt(n){const{domain:e,range:r,paddingOuter:i,paddingInner:a,flex:o,round:s,align:l}=n,c=e.length,u=nCt(o,c),[d,f]=r,h=f-d,p=2/c*i+1-1/c*a,g=h/p,m=g*a/c,v=g-c*m,y=tCt(u),b=y.reduce((O,I)=>O+I),x=v/b,_=new whe(e.map((O,I)=>{const D=y[I]*x;return[O,s?Math.floor(D):D]})),S=new whe(e.map((O,I)=>{const k=y[I]*x+m;return[O,s?Math.floor(k):k]})),M=Array.from(S.values()).reduce((O,I)=>O+I),T=(h-(M-M/c*a))*l,P=d+T;let A=s?Math.round(P):P;const N=new Array(c);for(let O=0;O<c;O+=1){N[O]=rCt(A);const I=e[O];A+=S.get(I)}return{valueBandWidth:_,valueStep:S,adjustedRange:N}}function aCt(n){var e;const{domain:r}=n,i=r.length;if(i===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((e=n.flex)===null||e===void 0)&&e.length))return iCt(n);const{range:o,paddingOuter:s,paddingInner:l,round:c,align:u}=n;let d,f,h=o[0];const g=o[1]-h,m=s*2,v=i-l;d=g/Math.max(1,m+v),c&&(d=Math.floor(d)),h+=(g-d*(i-l))*u,f=d*(1-l),c&&(h=Math.round(h),f=Math.round(f));const y=new Array(i).fill(0).map((b,x)=>h+x*d);return{valueStep:d,valueBandWidth:f,adjustedRange:y}}class EK extends SK{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:wK,flex:[]}}constructor(e){super(e)}clone(){return new EK(this.options)}getStep(e){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:e===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(e)}getBandWidth(e){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:e===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(e)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:e,paddingInner:r}=this.options;return e>0?e:r}getPaddingOuter(){const{padding:e,paddingOuter:r}=this.options;return e>0?e:r}rescale(){super.rescale();const{align:e,domain:r,range:i,round:a,flex:o}=this.options,{adjustedRange:s,valueBandWidth:l,valueStep:c}=aCt({align:e,range:i,round:a,flex:o,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:r});this.valueStep=c,this.valueBandWidth=l,this.adjustedRange=s}}const oCt=(n,e,r)=>{let i,a,o=n,s=e;if(o===s&&r>0)return[o];let l=TP(o,s,r);if(l===0||!Number.isFinite(l))return[];if(l>0){o=Math.ceil(o/l),s=Math.floor(s/l),a=new Array(i=Math.ceil(s-o+1));for(let c=0;c<i;c+=1)a[c]=(o+c)*l}else{l=-l,o=Math.ceil(o*l),s=Math.floor(s*l),a=new Array(i=Math.ceil(s-o+1));for(let c=0;c<i;c+=1)a[c]=(o+c)/l}return a},sCt=(n,e,r)=>{const[i,a]=n,[o,s]=e;let l,c;return i<a?(l=vH(i,a),c=r(o,s)):(l=vH(a,i),c=r(s,o)),AO(c,l)},lCt=(n,e,r)=>{const i=Math.min(n.length,e.length)-1,a=new Array(i),o=new Array(i),s=n[0]>n[i],l=s?[...n].reverse():n,c=s?[...e].reverse():e;for(let u=0;u<i;u+=1)a[u]=vH(l[u],l[u+1]),o[u]=r(c[u],c[u+1]);return u=>{const d=$Et(n,u,1,i)-1,f=a[d],h=o[d];return AO(h,f)(u)}},Mhe=(n,e,r,i)=>(Math.min(n.length,e.length)>2?lCt:sCt)(n,e,i?ZEt:r);class cCt extends p3e{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:RO,tickCount:5}}map(e){return yhe(e)?this.output(e):this.options.unknown}invert(e){return yhe(e)?this.input(e):this.options.unknown}nice(){if(!this.options.nice)return;const[e,r,i,...a]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(e,r,i,...a)}getTicks(){const{tickMethod:e}=this.options,[r,i,a,...o]=this.getTickMethodOptions();return e(r,i,a,...o)}getTickMethodOptions(){const{domain:e,tickCount:r}=this.options,i=e[0],a=e[e.length-1];return[i,a,r]}chooseNice(){return BEt}rescale(){this.nice();const[e,r]=this.chooseTransforms();this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,r,this.chooseClamp(r))}chooseClamp(e){const{clamp:r,range:i}=this.options,a=this.options.domain.map(e),o=Math.min(a.length,i.length);return r?FEt(a[0],a[o-1]):vj}composeOutput(e,r){const{domain:i,range:a,round:o,interpolate:s}=this.options,l=Mhe(i.map(e),a,s,o);this.output=AO(l,r,e)}composeInput(e,r,i){const{domain:a,range:o}=this.options,s=Mhe(o,a.map(e),RO);this.input=AO(r,i,s)}}class X2 extends cCt{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:KEt,tickMethod:oCt,tickCount:5}}chooseTransforms(){return[vj,vj]}clone(){return new X2(this.options)}}var uCt=function(n){br(e,n);function e(r){var i=this,a=r.style,o=$a(r,["style"]);return i=n.call(this,xl({},{type:"column"},xt({style:a},o)))||this,i.columnsGroup=new Bo({name:"columns"}),i.appendChild(i.columnsGroup),i.render(),i}return e.prototype.render=function(){var r=this.attributes,i=r.columns,a=r.x,o=r.y;this.columnsGroup.style.transform="translate(".concat(a,", ").concat(o,")"),un(this.columnsGroup).selectAll(".column").data(i.flat()).join(function(s){return s.append("rect").attr("className","column").each(function(l){this.attr(l)})},function(s){return s.each(function(l){this.attr(l)})},function(s){return s.remove()})},e.prototype.update=function(r){this.attr(ns({},this.attributes,r)),this.render()},e.prototype.clear=function(){this.removeChildren()},e}(qi),dCt=function(n){br(e,n);function e(r){var i=this,a=r.style,o=$a(r,["style"]);return i=n.call(this,xl({},{type:"lines"},xt({style:a},o)))||this,i.linesGroup=i.appendChild(new Bo),i.areasGroup=i.appendChild(new Bo),i.render(),i}return e.prototype.render=function(){var r=this.attributes,i=r.lines,a=r.areas,o=r.x,s=r.y;this.style.transform="translate(".concat(o,", ").concat(s,")"),i&&this.renderLines(i),a&&this.renderAreas(a)},e.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},e.prototype.update=function(r){this.attr(ns({},this.attributes,r)),this.render()},e.prototype.renderLines=function(r){un(this.linesGroup).selectAll(".line").data(r).join(function(i){return i.append("path").attr("className","line").each(function(a){this.attr(a)})},function(i){return i.each(function(a){this.attr(a)})},function(i){return i.remove()})},e.prototype.renderAreas=function(r){un(this.linesGroup).selectAll(".area").data(r).join(function(i){return i.append("path").attr("className","area").each(function(a){this.attr(a)})},function(i){return i.each(function(a){this.style(a)})},function(i){return i.remove()})},e}(qi);function fCt(n,e){var r,i=e.x,a=e.y,o=he(a.getOptions().range||[0,0],2),s=o[0],l=o[1];return l>s&&(r=he([s,l],2),l=r[0],s=r[1]),n.map(function(c){var u=c.map(function(d,f){return[i.map(f),Ta(a.map(d),l,s)]});return u})}function cC(n,e){e===void 0&&(e=!1);var r=e?n.length-1:0,i=n.map(function(a,o){return nn([o===r?"M":"L"],he(a),!1)});return e?i.reverse():i}function PO(n,e){if(e===void 0&&(e=!1),n.length<=2)return cC(n);for(var r=[],i=n.length,a=0;a<i;a+=1){var o=e?n[i-a-1]:n[a];Ra(o,r.slice(-2))||r.push.apply(r,nn([],he(o),!1))}var s=tEt(r);return e?s.unshift(nn(["M"],he(n[i-1]),!1)):s.unshift(nn(["M"],he(n[0]),!1)),s}function CK(n,e,r){var i=Wm(n);return i.push(["L",e,r],["L",0,r],["Z"]),i}function hCt(n,e,r,i){return n.map(function(a){return CK(e?PO(a):cC(a),r,i)})}function pCt(n,e,r){for(var i=[],a=n.length-1;a>=0;a-=1){var o=n[a],s=cC(o),l=void 0;if(a===0)l=CK(s,e,r);else{var c=n[a-1],u=cC(c,!0);u[0][0]="L",l=nn(nn(nn([],he(s),!1),he(u),!1),[["Z"]],!1)}i.push(l)}return i}function gCt(n,e,r){for(var i=[],a=n.length-1;a>=0;a-=1){var o=n[a],s=PO(o),l=void 0;if(a===0)l=CK(s,e,r);else{var c=n[a-1],u=PO(c,!0),d=o[0];u[0][0]="L",l=nn(nn(nn([],he(s),!1),he(u),!1),[nn(["M"],he(d),!1),["Z"]],!1)}i.push(l)}return i}function The(n){return n.length===0?[0,0]:[XN(rit(n,function(e){return XN(e)||0})),YN(nit(n,function(e){return YN(e)||0}))]}function Ahe(n){for(var e=Wm(n),r=e[0].length,i=he([Array(r).fill(0),Array(r).fill(0)],2),a=i[0],o=i[1],s=0;s<e.length;s+=1)for(var l=e[s],c=0;c<r;c+=1)l[c]>=0?(l[c]+=a[c],a[c]=l[c]):(l[c]+=o[c],o[c]=l[c]);return e}var mCt=function(n){br(e,n);function e(r){return n.call(this,r,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(e.prototype,"rawData",{get:function(){var r=this.attributes.data;if(!r||(r==null?void 0:r.length)===0)return[[]];var i=Wm(r);return on(i[0])?[i]:i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.isStack?Ahe(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseline",{get:function(){var r=this.scales.y,i=he(r.getOptions().domain||[0,0],2),a=i[0],o=i[1];return o<0?r.map(o):r.map(a<0?0:a)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerShape",{get:function(){var r=this.attributes,i=r.width,a=r.height;return{width:i,height:a}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linesStyle",{get:function(){var r=this,i=this.attributes,a=i.type,o=i.isStack,s=i.smooth;if(a!=="line")throw new Error("linesStyle can only be used in line type");var l=Qn(this.attributes,"area"),c=Qn(this.attributes,"line"),u=this.containerShape.width,d=this.data;if(d[0].length===0)return{lines:[],areas:[]};var f=this.scales,h=f.x,p=f.y,g=fCt(d,{x:h,y:p}),m=[];if(l){var v=this.baseline;o?m=s?gCt(g,u,v):pCt(g,u,v):m=hCt(g,s,u,v)}return{lines:g.map(function(y,b){return xt({stroke:r.getColor(b),d:s?PO(y):cC(y)},c)}),areas:m.map(function(y,b){return xt({d:y,fill:r.getColor(b)},l)})}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnsStyle",{get:function(){var r=this,i=Qn(this.attributes,"column"),a=this.attributes,o=a.isStack,s=a.type,l=a.scale;if(s!=="column")throw new Error("columnsStyle can only be used in column type");var c=this.containerShape.height,u=this.rawData;if(!u)return{columns:[]};o&&(u=Ahe(u));var d=this.createScales(u),f=d.x,h=d.y,p=he(The(u),2),g=p[0],m=p[1],v=new X2({domain:[0,m-(g>0?0:g)],range:[0,c*l]}),y=f.getBandWidth(),b=this.rawData;return{columns:u.map(function(x,_){return x.map(function(S,M){var E=y/u.length,T=function(){return{x:f.map(M)+E*_,y:S>=0?h.map(S):h.map(0),width:E,height:v.map(Math.abs(S))}},P=function(){return{x:f.map(M),y:h.map(S),width:y,height:v.map(b[_][M])}};return xt(xt({fill:r.getColor(_)},i),o?P():T())})})}},enumerable:!1,configurable:!0}),e.prototype.render=function(r,i){lEt(i,".container","rect").attr("className","container").node();var a=r.type,o=r.x,s=r.y,l="spark".concat(a),c=xt({x:o,y:s},a==="line"?this.linesStyle:this.columnsStyle);un(i).selectAll(".spark").data([a]).join(function(u){return u.append(function(d){return d==="line"?new dCt({className:l,style:c}):new uCt({className:l,style:c})}).attr("className","spark ".concat(l))},function(u){return u.update(c)},function(u){return u.remove()})},e.prototype.getColor=function(r){var i=this.attributes.color;return Jc(i)?i[r%i.length]:cn(i)?i.call(null,r):i},e.prototype.createScales=function(r){var i,a,o=this.attributes,s=o.type,l=o.scale,c=o.range,u=c===void 0?[]:c,d=o.spacing,f=this.containerShape,h=f.width,p=f.height,g=he(The(r),2),m=g[0],v=g[1],y=new X2({domain:[(i=u[0])!==null&&i!==void 0?i:m,(a=u[1])!==null&&a!==void 0?a:v],range:[p,p*(1-l)]});return s==="line"?{type:s,x:new X2({domain:[0,r[0].length-1],range:[0,h]}),y}:{type:s,x:new EK({domain:r[0].map(function(b,x){return x}),range:[0,h],paddingInner:d,paddingOuter:d/2,align:.5}),y}},e.tag="sparkline",e}(Ba);function vCt(n){return typeof n=="boolean"?!1:"enter"in n&&"update"in n&&"exit"in n}function Rhe(n){if(!n)return{enter:!1,update:!1,exit:!1};var e=["enter","update","exit"],r=Object.fromEntries(Object.entries(n).filter(function(i){var a=he(i,1),o=a[0];return!e.includes(o)}));return Object.fromEntries(e.map(function(i){return vCt(n)?n[i]===!1?[i,!1]:[i,xt(xt({},n[i]),r)]:[i,r]}))}function aw(n,e){n?n.finished.then(e):e()}function yCt(n,e){n.length===0?e():Promise.all(n.map(function(r){return r==null?void 0:r.finished})).then(e)}function g3e(n,e){"update"in n?n.update(e):n.attr(e)}function m3e(n,e,r){if(e.length===0)return null;if(!r){var i=e.slice(-1)[0];return g3e(n,{style:i}),null}return n.animate(e,r)}function bCt(n,e){return!(n.nodeName!=="text"||e.nodeName!=="text"||n.attributes.text!==e.attributes.text)}function xCt(n,e,r,i){if(i===void 0&&(i="destroy"),bCt(n,e))return n.remove(),[null];var a=function(){i==="destroy"?n.destroy():i==="hide"&&$d(n),e.isVisible()&&UM(e)};if(!r)return a(),[null];var o=r.duration,s=o===void 0?0:o,l=r.delay,c=l===void 0?0:l,u=Math.ceil(+s/2),d=+s/4,f=he(n.getGeometryBounds().center,2),h=f[0],p=f[1],g=he(e.getGeometryBounds().center,2),m=g[0],v=g[1],y=he([(h+m)/2-h,(p+v)/2-p],2),b=y[0],x=y[1],_=n.style.opacity,S=_===void 0?1:_,M=e.style.opacity,E=M===void 0?1:M,T=n.style.transform||"",P=e.style.transform||"",A=n.animate([{opacity:S,transform:"translate(0, 0) ".concat(T)},{opacity:0,transform:"translate(".concat(b,", ").concat(x,") ").concat(T)}],xt(xt({fill:"both"},r),{duration:c+u+d})),N=e.animate([{opacity:0,transform:"translate(".concat(-b,", ").concat(-x,") ").concat(P),offset:.01},{opacity:E,transform:"translate(0, 0) ".concat(P)}],xt(xt({fill:"both"},r),{duration:u+d,delay:c+u-d}));return aw(N,a),[A,N]}function Wd(n,e,r){var i={},a={};return Object.entries(e).forEach(function(o){var s=he(o,2),l=s[0],c=s[1];if(!Nn(c)){var u=n.style[l]||n.parsedStyle[l]||0;u!==c&&(i[l]=u,a[l]=c)}}),r?m3e(n,[i,a],xt({fill:"both"},r)):(g3e(n,a),null)}function sL(n,e){return n.style.opacity||(n.style.opacity=1),Wd(n,{opacity:0},e)}var v3e={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},y3e={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},b3e={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},_f=uf({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),Wg=uf({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),_Ct=function(n){br(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(r,i){var a=r.x,o=r.y,s=r.size,l=s===void 0?10:s,c=r.radius,u=c===void 0?l/4:c,d=r.orientation,f=$a(r,["x","y","size","radius","orientation"]),h=l,p=h*2.4,g=un(i).maybeAppendByClassName(Wg.iconRect,"rect").styles(xt(xt({},f),{width:h,height:p,radius:u,x:a-h/2,y:o-p/2,transformOrigin:"center"})),m=a+1/3*h-h/2,v=a+2/3*h-h/2,y=o+1/4*p-p/2,b=o+3/4*p-p/2;g.maybeAppendByClassName("".concat(Wg.iconLine,"-1"),"line").styles(xt({x1:m,x2:m,y1:y,y2:b},f)),g.maybeAppendByClassName("".concat(Wg.iconLine,"-2"),"line").styles(xt({x1:v,x2:v,y1:y,y2:b},f)),d==="vertical"&&(g.node().style.transform="rotate(90)")},e}(Ba),wCt=function(n){br(e,n);function e(r){return n.call(this,r,b3e)||this}return e.prototype.renderLabel=function(r){var i=this,a=this.attributes,o=a.x,s=a.y,l=a.showLabel,c=Qn(this.attributes,"label"),u=c.x,d=u===void 0?0:u,f=c.y,h=f===void 0?0:f,p=c.transform,g=c.transformOrigin,m=$a(c,["x","y","transform","transformOrigin"]),v=he($p(m,[]),2),y=v[0],b=v[1],x=un(r).maybeAppendByClassName(Wg.labelGroup,"g").styles(b),_=xt(xt({},y3e),y),S=_.text,M=$a(_,["text"]);Vc(!!l,x,function(E){i.label=E.maybeAppendByClassName(Wg.label,"text").styles(xt(xt({},M),{x:o+d,y:s+h,transform:p,transformOrigin:g,text:"".concat(S)})),i.label.on("mousedown",function(T){T.stopPropagation()}),i.label.on("touchstart",function(T){T.stopPropagation()})})},e.prototype.renderIcon=function(r){var i=this.attributes,a=i.x,o=i.y,s=i.orientation,l=i.type,c=xt(xt({x:a,y:o,orientation:s},v3e),Qn(this.attributes,"icon")),u=this.attributes.iconShape,d=u===void 0?function(){return new _Ct({style:c})}:u,f=un(r).maybeAppendByClassName(Wg.iconGroup,"g");f.selectAll(Wg.icon.class).data([d]).join(function(h){return h.append(typeof d=="string"?d:function(){return d(l)}).attr("className",Wg.icon.name)},function(h){return h.update(c)},function(h){return h.remove()})},e.prototype.render=function(r,i){this.renderIcon(i),this.renderLabel(i)},e}(Ba),SCt=function(n){br(e,n);function e(r){var i=n.call(this,r,xt(xt(xt({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(a){return a.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},wb(b3e,"handle")),wb(v3e,"handleIcon")),wb(y3e,"handleLabel")))||this;return i.range=[0,1],i.onDragStart=function(a){return function(o){o.stopPropagation(),i.target=a,i.prevPos=i.getOrientVal(lhe(o));var s=i.availableSpace,l=s.x,c=s.y,u=i.getBBox(),d=u.x,f=u.y;i.selectionStartPos=i.getRatio(i.prevPos-i.getOrientVal([l,c])-i.getOrientVal([+d,+f])),i.selectionWidth=0,document.addEventListener("pointermove",i.onDragging),document.addEventListener("pointerup",i.onDragEnd)}},i.onDragging=function(a){var o=i.attributes,s=o.slidable,l=o.brushable,c=o.type;a.stopPropagation();var u=i.getOrientVal(lhe(a)),d=u-i.prevPos;if(d){var f=i.getRatio(d);switch(i.target){case"start":s&&i.setValuesOffset(f);break;case"end":s&&i.setValuesOffset(0,f);break;case"selection":s&&i.setValuesOffset(f,f);break;case"track":if(!l)return;i.selectionWidth+=f,c==="range"?i.innerSetValues([i.selectionStartPos,i.selectionStartPos+i.selectionWidth].sort(),!0):i.innerSetValues([0,i.selectionStartPos+i.selectionWidth],!0);break}i.prevPos=u}},i.onDragEnd=function(){document.removeEventListener("pointermove",i.onDragging),document.removeEventListener("pointermove",i.onDragging),document.removeEventListener("pointerup",i.onDragEnd),i.target="",i.updateHandlesPosition(!1)},i.onValueChange=function(a){var o=i.attributes,s=o.onChange,l=o.type,c=l==="range"?a:a[1],u=l==="range"?i.getValues():i.getValues()[1],d=new so("valuechange",{detail:{oldValue:c,value:u}});i.dispatchEvent(d),s==null||s(u)},i.selectionStartPos=0,i.selectionWidth=0,i.prevPos=0,i.target="",i}return Object.defineProperty(e.prototype,"values",{get:function(){return this.attributes.values},set:function(r){this.attributes.values=this.clampValues(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparklineStyle",{get:function(){var r=this.attributes.orientation;if(r!=="horizontal")return null;var i=Qn(this.attributes,"sparkline");return xt(xt({zIndex:0},this.availableSpace),i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var r=this.attributes,i=r.trackLength,a=r.trackSize,o=he(this.getOrientVal([[i,a],[a,i]]),2),s=o[0],l=o[1];return{width:s,height:l}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var r=this.attributes;r.x,r.y;var i=r.padding,a=he(Ss(i),4),o=a[0],s=a[1],l=a[2],c=a[3],u=this.shape,d=u.width,f=u.height;return{x:c,y:o,width:d-(c+s),height:f-(o+l)}},enumerable:!1,configurable:!0}),e.prototype.getValues=function(){return this.values},e.prototype.setValues=function(r,i){r===void 0&&(r=[0,0]),i===void 0&&(i=!1),this.attributes.values=r;var a=i===!1?!1:this.attributes.animate;this.updateSelectionArea(a),this.updateHandlesPosition(a)},e.prototype.updateSelectionArea=function(r){var i=this.calcSelectionArea();this.foregroundGroup.selectAll(_f.selection.class).each(function(a,o){Wd(this,i[o],r)})},e.prototype.updateHandlesPosition=function(r){this.attributes.showHandle&&(this.startHandle&&Wd(this.startHandle,this.getHandleStyle("start"),r),this.endHandle&&Wd(this.endHandle,this.getHandleStyle("end"),r))},e.prototype.innerSetValues=function(r,i){r===void 0&&(r=[0,0]),i===void 0&&(i=!1);var a=this.values,o=this.clampValues(r);this.attributes.values=o,this.setValues(o),i&&this.onValueChange(a)},e.prototype.renderTrack=function(r){var i=this.attributes,a=i.x,o=i.y,s=Qn(this.attributes,"track");this.trackShape=un(r).maybeAppendByClassName(_f.track,"rect").styles(xt(xt({x:a,y:o},this.shape),s))},e.prototype.renderBrushArea=function(r){var i=this.attributes,a=i.x,o=i.y,s=i.brushable;this.brushArea=un(r).maybeAppendByClassName(_f.brushArea,"rect").styles(xt({x:a,y:o,fill:"transparent",cursor:s?"crosshair":"default"},this.shape))},e.prototype.renderSparkline=function(r){var i=this,a=this.attributes,o=a.x,s=a.y,l=a.orientation,c=un(r).maybeAppendByClassName(_f.sparklineGroup,"g");Vc(l==="horizontal",c,function(u){var d=xt(xt({},i.sparklineStyle),{x:o,y:s});u.maybeAppendByClassName(_f.sparkline,function(){return new mCt({style:d})}).update(d)})},e.prototype.renderHandles=function(){var r=this,i,a=this.attributes,o=a.showHandle,s=a.type,l=s==="range"?["start","end"]:["end"],c=o?l:[],u=this;(i=this.foregroundGroup)===null||i===void 0||i.selectAll(_f.handle.class).data(c.map(function(d){return{type:d}}),function(d){return d.type}).join(function(d){return d.append(function(f){var h=f.type;return new wCt({style:r.getHandleStyle(h)})}).each(function(f){var h=f.type;this.attr("class","".concat(_f.handle.name," ").concat(h,"-handle"));var p="".concat(h,"Handle");u[p]=this,this.addEventListener("pointerdown",u.onDragStart(h))})},function(d){return d.each(function(f){var h=f.type;this.update(u.getHandleStyle(h))})},function(d){return d.each(function(f){var h=f.type,p="".concat(h,"Handle");u[p]=void 0}).remove()})},e.prototype.renderSelection=function(r){var i=this.attributes,a=i.x,o=i.y,s=i.type,l=i.selectionType;this.foregroundGroup=un(r).maybeAppendByClassName(_f.foreground,"g");var c=Qn(this.attributes,"selection"),u=function(f){return f.style("visibility",function(h){return h.show?"visible":"hidden"}).style("cursor",function(h){return l==="select"?"grab":l==="invert"?"crosshair":"default"}).styles(xt(xt({},c),{transform:"translate(".concat(a,", ").concat(o,")")}))},d=this;this.foregroundGroup.selectAll(_f.selection.class).data(s==="value"?[]:this.calcSelectionArea().map(function(f,h){return{style:xt({},f),index:h,show:l==="select"?h===1:h!==1}}),function(f){return f.index}).join(function(f){return f.append("rect").attr("className",_f.selection.name).call(u).each(function(h,p){var g=this;p===1?(d.selectionShape=un(this),this.on("pointerdown",function(m){g.attr("cursor","grabbing"),d.onDragStart("selection")(m)}),d.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),d.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),d.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){g.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){g.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){g.attr("cursor","pointer")})):this.on("pointerdown",d.onDragStart("track"))})},function(f){return f.call(u)},function(f){return f.remove()}),this.updateSelectionArea(!1),this.renderHandles()},e.prototype.render=function(r,i){this.renderTrack(i),this.renderSparkline(i),this.renderBrushArea(i),this.renderSelection(i)},e.prototype.clampValues=function(r,i){var a;i===void 0&&(i=4);var o=he(this.range,2),s=o[0],l=o[1],c=he(this.getValues().map(function(v){return che(v,i)}),2),u=c[0],d=c[1],f=Array.isArray(r)?r:[u,r??d],h=he((f||[u,d]).map(function(v){return che(v,i)}),2),p=h[0],g=h[1];if(this.attributes.type==="value")return[0,Ta(g,s,l)];p>g&&(a=he([g,p],2),p=a[0],g=a[1]);var m=g-p;return m>l-s?[s,l]:p<s?u===s&&d===g?[s,g]:[s,m+s]:g>l?d===l&&u===p?[p,l]:[l-m,l]:[p,g]},e.prototype.calcSelectionArea=function(r){var i=he(this.clampValues(r),2),a=i[0],o=i[1],s=this.availableSpace,l=s.x,c=s.y,u=s.width,d=s.height;return this.getOrientVal([[{y:c,height:d,x:l,width:a*u},{y:c,height:d,x:a*u+l,width:(o-a)*u},{y:c,height:d,x:o*u,width:(1-o)*u}],[{x:l,width:u,y:c,height:a*d},{x:l,width:u,y:a*d+c,height:(o-a)*d},{x:l,width:u,y:o*d,height:(1-o)*d}]])},e.prototype.calcHandlePosition=function(r){var i=this.attributes.handleIconOffset,a=this.availableSpace,o=a.x,s=a.y,l=a.width,c=a.height,u=he(this.clampValues(),2),d=u[0],f=u[1],h=r==="start"?-i:i,p=(r==="start"?d:f)*this.getOrientVal([l,c])+h;return{x:o+this.getOrientVal([p,l/2]),y:s+this.getOrientVal([c/2,p])}},e.prototype.inferTextStyle=function(r){var i=this.attributes.orientation;return i==="horizontal"?{}:r==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:r==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},e.prototype.calcHandleText=function(r){var i,a=this.attributes,o=a.type,s=a.orientation,l=a.formatter,c=a.autoFitLabel,u=Qn(this.attributes,"handle"),d=Qn(u,"label"),f=u.spacing,h=this.getHandleSize(),p=this.clampValues(),g=r==="start"?p[0]:p[1],m=l(g),v=new yK({style:xt(xt(xt({},d),this.inferTextStyle(r)),{text:m})}),y=v.getBBox(),b=y.width,x=y.height;if(v.destroy(),!c){if(o==="value")return{text:m,x:0,y:-x-f};var _=f+h+(s==="horizontal"?b/2:0);return i={text:m},i[s==="horizontal"?"x":"y"]=r==="start"?-_:_,i}var S=0,M=0,E=this.availableSpace,T=E.width,P=E.height,A=this.calcSelectionArea()[1],N=A.x,O=A.y,I=A.width,D=A.height,k=f+h;if(s==="horizontal"){var $=k+b/2;if(r==="start"){var B=N-k-b;S=B>0?-$:$}else{var F=T-N-I-k>b;S=F?$:-$}}else{var G=k,z=x+k;r==="start"?M=O-h>x?-z:G:M=P-(O+D)-h>x?z:-G}return{x:S,y:M,text:m}},e.prototype.getHandleLabelStyle=function(r){var i=Qn(this.attributes,"handleLabel");return xt(xt(xt({},i),this.calcHandleText(r)),this.inferTextStyle(r))},e.prototype.getHandleIconStyle=function(){var r=this.attributes.handleIconShape,i=Qn(this.attributes,"handleIcon"),a=this.getOrientVal(["ew-resize","ns-resize"]),o=this.getHandleSize();return xt({cursor:a,shape:r,size:o},i)},e.prototype.getHandleStyle=function(r){var i=this.attributes,a=i.x,o=i.y,s=i.showLabel,l=i.showLabelOnInteraction,c=i.orientation,u=this.calcHandlePosition(r),d=u.x,f=u.y,h=this.calcHandleText(r),p=s;return!s&&l&&(this.target?p=!0:p=!1),xt(xt(xt({},wb(this.getHandleIconStyle(),"icon")),wb(xt(xt({},this.getHandleLabelStyle(r)),h),"label")),{transform:"translate(".concat(d+a,", ").concat(f+o,")"),orientation:c,showLabel:p,type:r,zIndex:3})},e.prototype.getHandleSize=function(){var r=this.attributes,i=r.handleIconSize,a=r.width,o=r.height;return i||Math.floor((this.getOrientVal([+o,+a])+4)/2.4)},e.prototype.getOrientVal=function(r){var i=he(r,2),a=i[0],o=i[1],s=this.attributes.orientation;return s==="horizontal"?a:o},e.prototype.setValuesOffset=function(r,i,a){i===void 0&&(i=0),a===void 0&&(a=!1);var o=this.attributes.type,s=he(this.getValues(),2),l=s[0],c=s[1],u=o==="range"?r:0,d=[l+u,c+i].sort();a?this.setValues(d):this.innerSetValues(d,!0)},e.prototype.getRatio=function(r){var i=this.availableSpace,a=i.width,o=i.height;return r/this.getOrientVal([a,o])},e.prototype.dispatchCustomEvent=function(r,i,a){var o=this;r.on(i,function(s){s.stopPropagation(),o.dispatchEvent(new so(a,{detail:s}))})},e.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var r=this.brushArea;this.dispatchCustomEvent(r,"click","trackClick"),this.dispatchCustomEvent(r,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(r,"pointerleave","trackMouseleave"),r.on("pointerdown",this.onDragStart("track"))},e.prototype.onScroll=function(r){var i=this.attributes.scrollable;if(i){var a=r.deltaX,o=r.deltaY,s=o||a,l=this.getRatio(s);this.setValuesOffset(l,l,!0)}},e.tag="slider",e}(Ba),MK={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new Lc({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]};xl({},MK,{style:{type:"arc"}});xl({},MK,{style:{}});var Ei=uf({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"),Yx=uf({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function x3e(n){return n.reduce(function(e,r,i){return e.push(nn([i===0?"M":"L"],he(r),!1)),e},[])}function ECt(n,e,r){var i=e.connect,a=i===void 0?"line":i,o=e.center;if(a==="line")return x3e(n);if(!o)return[];var s=lC(n[0],o),l=r?0:1;return n.reduce(function(c,u,d){return d===0?c.push(nn(["M"],he(u),!1)):c.push(nn(["A",s,s,0,0,l],he(u),!1)),c},[])}function yH(n,e,r){return e.type==="surround"?ECt(n,e,r):x3e(n)}function CCt(n,e,r){var i=r.type,a=r.connect,o=r.center,s=r.closed,l=s?[["Z"]]:[],c=he([yH(n,r),yH(e.slice().reverse(),r,!0)],2),u=c[0],d=c[1],f=he([n[0],e.slice(-1)[0]],2),h=f[0],p=f[1],g=function(b,x){return[u,b,d,x,l].flat()};if(a==="line"||i==="surround")return g([nn(["L"],he(p),!1)],[nn(["L"],he(h),!1)]);if(!o)throw new Error("Arc grid need to specified center");var m=he([lC(p,o),lC(h,o)],2),v=m[0],y=m[1];return g([nn(["A",v,v,0,0,1],he(p),!1),nn(["L"],he(p),!1)],[nn(["A",y,y,0,0,0],he(h),!1),nn(["L"],he(h),!1)])}function MCt(n,e,r,i){var a=r.animate,o=r.isBillboard,s=e.map(function(l,c){return{id:l.id||"grid-line-".concat(c),d:yH(l.points,r)}});return n.selectAll(Yx.line.class).data(s,function(l){return l.id}).join(function(l){return l.append("path").each(function(c,u){var d=Wu(dhe(xt({d:c.d},i)),[c,u,s]);this.attr(xt({class:Yx.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:o},d))})},function(l){return l.transition(function(c,u){var d=Wu(dhe(xt({d:c.d},i)),[c,u,s]);return Wd(this,d,a.update)})},function(l){return l.transition(function(){var c=this,u=sL(this,a.exit);return aw(u,function(){return c.remove()}),u})}).transitions()}function TCt(n,e,r){var i=r.animate,a=r.connect,o=r.areaFill;if(e.length<2||!o||!a)return[];for(var s=Array.isArray(o)?o:[o,"transparent"],l=function(g){return s[g%s.length]},c=[],u=0;u<e.length-1;u++){var d=he([e[u].points,e[u+1].points],2),f=d[0],h=d[1],p=CCt(f,h,r);c.push({d:p,fill:l(u)})}return n.selectAll(Yx.region.class).data(c,function(g,m){return m}).join(function(g){return g.append("path").each(function(m,v){var y=Wu(m,[m,v,c]);this.attr(y)}).attr("className",Yx.region.name)},function(g){return g.transition(function(m,v){var y=Wu(m,[m,v,c]);return Wd(this,y,i.update)})},function(g){return g.transition(function(){var m=this,v=sL(this,i.exit);return aw(v,function(){return m.remove()}),v})}).transitions()}function ACt(n){var e=n.data,r=e===void 0?[]:e,i=n.closed;return i?r.map(function(a){var o=a.points,s=he(o,1),l=s[0];return xt(xt({},a),{points:nn(nn([],he(o),!1),[l],!1)})}):r}var RCt=function(n){br(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.render=function(r,i){r.type,r.center,r.areaFill,r.closed;var a=$a(r,["type","center","areaFill","closed"]),o=ACt(r),s=un(i).maybeAppendByClassName(Yx.lineGroup,"g"),l=un(i).maybeAppendByClassName(Yx.regionGroup,"g"),c=MCt(s,o,r,a),u=TCt(l,o,r);return nn(nn([],he(c),!1),he(u),!1)},e}(Ba);function _3e(n,e){return Object.fromEntries(Object.entries(n).map(function(r){var i=he(r,2),a=i[0],o=i[1];return[a,Wu(o,e)]}))}function TK(n,e){return e&&cn(e)?n.filter(e):n}function w3e(n,e){var r=e.startAngle,i=e.endAngle;return(i-r)*n+r}function lL(n,e){if(e.type==="linear"){var r=he(e.startPos,2),i=r[0],a=r[1],o=he(e.endPos,2),s=o[0],l=o[1],c=he([s-i,l-a],2),u=c[0],d=c[1];return a3e([u,d])}var f=qx(w3e(n,e));return[-Math.sin(f),Math.cos(f)]}function AK(n,e,r){var i=lL(n,r);return J2t(i,e!=="positive")}function GM(n,e){return AK(n,e.labelDirection,e)}function PCt(n,e){var r=he(e.startPos,2),i=r[0],a=r[1],o=he(e.endPos,2),s=o[0],l=o[1],c=he([s-i,l-a],2),u=c[0],d=c[1];return[i+u*n,a+d*n]}function NCt(n,e){var r=e.radius,i=he(e.center,2),a=i[0],o=i[1],s=qx(w3e(n,e));return[a+r*Math.cos(s),o+r*Math.sin(s)]}function cL(n,e){return e.type==="linear"?PCt(n,e):NCt(n,e)}function S3e(n){return lL(0,n)[1]===0}function E3e(n){return lL(0,n)[0]===0}function C3e(n,e){return e-n===360}function Phe(n,e,r,i,a){var o=e-n,s=he([a,a],2),l=s[0],c=s[1],u=he([qx(n),qx(e)],2),d=u[0],f=u[1],h=function(P){return[r+a*Math.cos(P),i+a*Math.sin(P)]},p=he(h(d),2),g=p[0],m=p[1],v=he(h(f),2),y=v[0],b=v[1];if(C3e(n,e)){var x=(f+d)/2,_=he(h(x),2),S=_[0],M=_[1];return[["M",g,m],["A",l,c,0,1,0,S,M],["A",l,c,0,1,0,y,b]]}var E=o>180?1:0,T=n>e?0:1;return"M".concat(g,",").concat(m,",A").concat(l,",").concat(c,",0,").concat(E,",").concat(T,",").concat(y,",").concat(b)}function OCt(n){var e=n.attributes,r=e.startAngle,i=e.endAngle,a=e.center,o=e.radius;return nn(nn([r,i],he(a),!1),[o],!1)}function ICt(n,e,r,i){var a=e.startAngle,o=e.endAngle,s=e.center,l=e.radius;return n.selectAll(Ei.line.class).data([{d:Phe.apply(void 0,nn(nn([a,o],he(s),!1),[l],!1))}],function(c,u){return u}).join(function(c){return c.append("path").attr("className",Ei.line.name).styles(e).styles({d:function(u){return u.d}})},function(c){return c.transition(function(){var u=this,d=Q2t(this,OCt(this),nn(nn([a,o],he(s),!1),[l],!1),i.update);if(d){var f=function(){var h=cl(u.attributes,"__keyframe_data__");u.style.d=Phe.apply(void 0,nn([],he(h),!1))};d.onframe=f,d.onfinish=f}return d}).styles(e)},function(c){return c.remove()}).styles(r).transitions()}function DCt(n,e){e.truncRange,e.truncShape,e.lineExtension}function LCt(n,e,r){r===void 0&&(r=[0,0]);var i=he([n,e,r],3),a=he(i[0],2),o=a[0],s=a[1],l=he(i[1],2),c=l[0],u=l[1],d=he(i[2],2),f=d[0],h=d[1],p=he([c-o,u-s],2),g=p[0],m=p[1],v=Math.sqrt(Math.pow(g,2)+Math.pow(m,2)),y=he([-f/v,h/v],2),b=y[0],x=y[1];return[b*g,b*m,x*g,x*m]}function Nhe(n){var e=he(n,2),r=he(e[0],2),i=r[0],a=r[1],o=he(e[1],2),s=o[0],l=o[1];return{x1:i,y1:a,x2:s,y2:l}}function kCt(n,e,r,i){var a=e.showTrunc,o=e.startPos,s=e.endPos,l=e.truncRange,c=e.lineExtension,u=he([o,s],2),d=he(u[0],2),f=d[0],h=d[1],p=he(u[1],2),g=p[0],m=p[1],v=he(c?LCt(o,s,c):new Array(4).fill(0),4),y=v[0],b=v[1],x=v[2],_=v[3],S=function(F){return n.selectAll(Ei.line.class).data(F,function(G,z){return z}).join(function(G){return G.append("line").attr("className",function(z){return"".concat(Ei.line.name," ").concat(z.className)}).styles(r).transition(function(z){return Wd(this,Nhe(z.line),!1)})},function(G){return G.styles(r).transition(function(z){var U=z.line;return Wd(this,Nhe(U),i.update)})},function(G){return G.remove()}).transitions()};if(!a||!l)return S([{line:[[f+y,h+b],[g+x,m+_]],className:Ei.line.name}]);var M=he(l,2),E=M[0],T=M[1],P=g-f,A=m-h,N=he([f+P*E,h+A*E],2),O=N[0],I=N[1],D=he([f+P*T,h+A*T],2),k=D[0],$=D[1],B=S([{line:[[f+y,h+b],[O,I]],className:Ei.lineFirst.name},{line:[[k,$],[g+x,m+_]],className:Ei.lineSecond.name}]);return DCt(n,e),B}function FCt(n,e,r,i){var a=r.showArrow,o=r.showTrunc,s=r.lineArrow,l=r.lineArrowOffset,c=r.lineArrowSize,u;if(e==="arc"?u=n.select(Ei.line.class):o?u=n.select(Ei.lineSecond.class):u=n.select(Ei.line.class),!a||!s||r.type==="arc"&&C3e(r.startAngle,r.endAngle)){var d=u.node();d&&(d.style.markerEnd=void 0);return}var f=Fp(s);f.attr(i),xK(f,c),u.style("markerEnd",f).style("markerEndOffset",-l)}function $Ct(n,e,r){var i=e.type,a,o=Qn(e,"line");return i==="linear"?a=kCt(n,e,uhe(o,"arrow"),r):a=ICt(n,e,uhe(o,"arrow"),r),FCt(n,i,e,o),a}function BCt(n,e){return AK(n,e.gridDirection,e)}function M3e(n){var e=n.type,r=n.gridCenter;return e==="linear"?r:r||n.center}function zCt(n,e){var r=e.gridLength;return n.map(function(i,a){var o=i.value,s=he(cL(o,e),2),l=s[0],c=s[1],u=he(ep(BCt(o,e),r),2),d=u[0],f=u[1];return{id:a,points:[[l,c],[l+d,c+f]]}})}function UCt(n,e){var r=e.gridControlAngles,i=M3e(e);if(!i)throw new Error("grid center is not provide");if(n.length<2)throw new Error("Invalid grid data");if(!r||r.length===0)throw new Error("Invalid gridControlAngles");var a=he(i,2),o=a[0],s=a[1];return n.map(function(l,c){var u=l.value,d=he(cL(u,e),2),f=d[0],h=d[1],p=he([f-o,h-s],2),g=p[0],m=p[1],v=[];return r.forEach(function(y){var b=qx(y),x=he([Math.cos(b),Math.sin(b)],2),_=x[0],S=x[1],M=g*_-m*S+o,E=g*S+m*_+s;v.push([M,E])}),{points:v,id:c}})}function VCt(n,e,r,i){var a=Qn(r,"grid"),o=a.type,s=a.areaFill,l=M3e(r),c=TK(e,r.gridFilter),u=o==="segment"?zCt(c,r):UCt(c,r),d=xt(xt({},a),{center:l,areaFill:cn(s)?c.map(function(f,h){return Wu(s,[f,h,c])}):s,animate:i,data:u});return n.selectAll(Ei.grid.class).data([1]).join(function(f){return f.append(function(){return new RCt({style:d})}).attr("className",Ei.grid.name)},function(f){return f.transition(function(){return this.update(d)})},function(f){return f.remove()}).transitions()}var bH=function(){function n(e,r,i,a){this.set(e,r,i,a)}return Object.defineProperty(n.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),n.prototype.rotatedPoints=function(e,r,i){var a=this,o=a.x1,s=a.y1,l=a.x2,c=a.y2,u=Math.cos(e),d=Math.sin(e),f=r-r*u+i*d,h=i-r*d-i*u,p=[[u*o-d*c+f,d*o+u*c+h],[u*l-d*c+f,d*l+u*c+h],[u*o-d*s+f,d*o+u*s+h],[u*l-d*s+f,d*l+u*s+h]];return p},n.prototype.set=function(e,r,i,a){return i<e?(this.x2=e,this.x1=i):(this.x1=e,this.x2=i),a<r?(this.y2=r,this.y1=a):(this.y1=r,this.y2=a),this},n.prototype.defined=function(e){return this[e]!==Number.MAX_VALUE&&this[e]!==-Number.MAX_VALUE},n}();function xH(n,e){var r=n.getEulerAngles()||0;n.setEulerAngles(0);var i=n.getBounds(),a=he(i.min,2),o=a[0],s=a[1],l=he(i.max,2),c=l[0],u=l[1],d=n.getBBox(),f=d.width,h=d.height,p=h,g=0,m=0,v=o,y=s,b=r3e(n);if(b){p-=1.5;var x=b.style.textAlign,_=b.style.textBaseline;x==="center"?v=(o+c)/2:(x==="right"||x==="end")&&(v=c),_==="middle"?y=(s+u)/2:_==="bottom"&&(y=u)}var S=he(Ss(e),4),M=S[0],E=M===void 0?0:M,T=S[1],P=T===void 0?0:T,A=S[2],N=A===void 0?E:A,O=S[3],I=O===void 0?P:O,D=new bH((g+=o)-I,(m+=s)-E,g+f+P,m+p+N);return n.setEulerAngles(r),D.rotatedPoints(qx(r),v,y)}function v2(n,e){return e[0]<=Math.max(n[0][0],n[1][0])&&e[0]<=Math.min(n[0][0],n[1][0])&&e[1]<=Math.max(n[0][1],n[1][1])&&e[1]<=Math.min(n[0][1],n[1][1])}function y2(n,e,r){var i=(e[1]-n[1])*(r[0]-e[0])-(e[0]-n[0])*(r[1]-e[1]);return i===0?0:i<0?2:1}function GCt(n,e){var r=y2(n[0],n[1],e[0]),i=y2(n[0],n[1],e[1]),a=y2(e[0],e[1],n[0]),o=y2(e[0],e[1],n[1]);return!!(r!==i&&a!==o||r===0&&v2(n,e[0])||i===0&&v2(n,e[1])||a===0&&v2(e,n[0])||o===0&&v2(e,n[1]))}function jCt(n,e){var r=n.length;if(r<3)return!1;var i=[e,[9999,e[1]]],a=0,o=0;do{var s=[n[o],n[(o+1)%r]];if(GCt(s,i)){if(y2(s[0],e,s[1])===0)return v2(s,e);a++}o=(o+1)%r}while(o!==0);return!!(a&1)}function HCt(n,e){return e.every(function(r){return jCt(n,r)})}function WCt(n,e,r){var i=n.x1,a=n.x2,o=n.y1,s=n.y2,l=[[i,o],[a,o],[a,s],[i,s]],c=xH(e,r);return HCt(l,c)}function qCt(n,e){var r=he(n,4),i=r[0],a=r[1],o=r[2],s=r[3],l=he(e,4),c=l[0],u=l[1],d=l[2],f=l[3],h=o-i,p=s-a,g=d-c,m=f-u,v=h*m-g*p;if(v===0)return!1;var y=v>0,b=i-c,x=a-u,_=h*x-p*b;if(_<0===y)return!1;var S=g*x-m*b;return!(S<0===y||_>v===y||S>v===y)}function YCt(n,e){var r=[[n[0],n[1],n[2],n[3]],[n[2],n[3],n[4],n[5]],[n[4],n[5],n[6],n[7]],[n[6],n[7],n[0],n[1]]];return r.some(function(i){return qCt(e,i)})}function XCt(n,e,r){var i,a,o=xH(n,r).flat(1),s=xH(e,r).flat(1),l=[[o[0],o[1],o[2],o[3]],[o[0],o[1],o[4],o[5]],[o[4],o[5],o[6],o[7]],[o[2],o[3],o[6],o[7]]];try{for(var c=_M(l),u=c.next();!u.done;u=c.next()){var d=u.value;if(YCt(s,d))return!0}}catch(f){i={error:f}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return!1}function KCt(n,e){var r=n.type,i=n.labelDirection,a=n.crossSize;if(!a)return!1;if(r==="arc"){var o=n.center,s=n.radius,l=he(o,2),c=l[0],u=l[1],d=i==="negative"?0:a,f=-s-d,h=s+d,p=he(Ss(e),4),g=p[0],m=p[1],v=p[2],y=p[3];return new bH(c+f-y,u+f-g,c+h+m,u+h+v)}var b=he(n.startPos,2),x=b[0],_=b[1],S=he(n.endPos,2),M=S[0],E=S[1],T=he(E3e(n)?[-e,0,e,0]:[0,e,0,-e],4),P=T[0],A=T[1],N=T[2],O=T[3],I=GM(0,n),D=ep(I,a),k=new bH(x,_,M,E);return k.x1+=O,k.y1+=P,k.x2+=A+D[0],k.y2+=N+D[1],k}function uL(n,e,r){var i,a,o=e.crossPadding,s=new Set,l=null,c=KCt(e,o),u=function(g){return c?WCt(c,g):!0},d=function(g,m){return!g||!g.firstChild?!0:!XCt(g.firstChild,m.firstChild,Ss(r))};try{for(var f=_M(n),h=f.next();!h.done;h=f.next()){var p=h.value;u(p)?!l||d(l,p)?l=p:(s.add(l),s.add(p)):s.add(p)}}catch(g){i={error:g}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return Array.from(s)}function G7(n,e){return e===void 0&&(e={}),Nn(n)?0:typeof n=="number"?n:Math.floor(W2t(n,e))}function ZCt(n,e,r,i){if(!(n.length<=1)){var a=e.suffix,o=a===void 0?"...":a,s=e.minLength,l=e.maxLength,c=l===void 0?1/0:l,u=e.step,d=u===void 0?" ":u,f=e.margin,h=f===void 0?[0,0,0,0]:f,p=n3e(i.getTextShape(n[0])),g=G7(d,p),m=s?G7(s,p):g,v=G7(c,p);(Nn(v)||v===1/0)&&(v=Math.max.apply(null,n.map(function(M){return M.getBBox().width})));var y=n.slice(),b=he(h,4);b[0],b[1],b[2],b[3];for(var x=function(M){if(y.forEach(function(E){i.ellipsis(i.getTextShape(E),M,o)}),y=uL(n,r,h),y.length<1)return{value:void 0}},_=v;_>m+g;_-=g){var S=x(_);if(typeof S=="object")return S.value}}}var QCt={parity:function(n,e){var r=e.seq,i=r===void 0?2:r;return n.filter(function(a,o){return o%i?($d(a),!1):!0})}},JCt=function(n){return n.filter(t3e)};function eMt(n,e,r,i){var a=n.length,o=e.keepHeader,s=e.keepTail;if(!(a<=1||a===2&&o&&s)){var l=QCt.parity,c=function(x){return x.forEach(i.show),x},u=2,d=n.slice(),f=n.slice(),h=Math.min.apply(Math,nn([1],he(n.map(function(x){return x.getBBox().width})),!1));if(r.type==="linear"&&(S3e(r)||E3e(r))){var p=fhe(n[0]).left,g=fhe(n[a-1]).right,m=Math.abs(g-p)||1;u=Math.max(Math.floor(a*h/m),u)}var v,y;for(o&&(v=d.splice(0,1)[0]),s&&(y=d.splice(-1,1)[0],d.reverse()),c(d);u<n.length&&uL(JCt(y?nn(nn([y],he(f),!1),[v],!1):nn([v],he(f),!1)),r,e==null?void 0:e.margin).length;){if(y&&!v&&u%2===0){var b=d.splice(0,1);b.forEach(i.hide)}else if(y&&v){var b=d.splice(0,1);b.forEach(i.hide)}f=l(c(d),{seq:u}),u++}}}function tMt(n,e,r,i){var a,o,s=e.optionalAngles,l=s===void 0?[0,45,90]:s,c=e.margin,u=e.recoverWhenFailed,d=u===void 0?!0:u,f=n.map(function(y){return y.getLocalEulerAngles()}),h=function(){return uL(n,r,c).length<1},p=function(y){return n.forEach(function(b,x){var _=Array.isArray(y)?y[x]:y;i.rotate(b,+_)})};try{for(var g=_M(l),m=g.next();!m.done;m=g.next()){var v=m.value;if(p(v),h())return}}catch(y){a={error:y}}finally{try{m&&!m.done&&(o=g.return)&&o.call(g)}finally{if(a)throw a.error}}d&&p(f)}function nMt(n){var e=n.type,r=n.labelDirection;return e==="linear"&&S3e(n)?r==="negative"?"bottom":"top":"middle"}function rMt(n,e,r,i){var a=e.wordWrapWidth,o=a===void 0?50:a,s=e.maxLines,l=s===void 0?3:s,c=e.recoverWhenFailed,u=c===void 0?!0:c,d=e.margin,f=d===void 0?[0,0,0,0]:d,h=n.map(function(b){return b.attr("maxLines")||1}),p=Math.min.apply(Math,nn([],he(h),!1)),g=function(){return uL(n,r,f).length<1},m=nMt(r),v=function(b){return n.forEach(function(x,_){var S=Array.isArray(b)?b[_]:b;i.wrap(x,o,S,m)})};if(!(p>l)){for(var y=p;y<=l;y++)if(v(y),g())return;u&&v(h)}}var iMt=new Map([["hide",eMt],["rotate",tMt],["ellipsis",ZCt],["wrap",rMt]]);function aMt(n,e,r){return e.labelOverlap.length<1?!1:r==="hide"?!j2t(n[0]):r==="rotate"?!n.some(function(i){var a;return!!(!((a=i.attr("transform"))===null||a===void 0)&&a.includes("rotate"))}):r==="ellipsis"||r==="wrap"?n.filter(function(i){return i.querySelector("text")}).length>1:!0}function oMt(n,e,r){var i=e.labelOverlap,a=i===void 0?[]:i;a.length&&a.forEach(function(o){var s=o.type,l=iMt.get(s);aMt(n,e,s)&&(l==null||l(n,o,e,r))})}function sMt(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=function(i){return i==="positive"?-1:1};return n.reduce(function(i,a){return i*r(a)},1)}function Ohe(n){for(var e=n;e<0;)e+=360;return Math.round(e%360)}function _H(n,e){var r=he(n,2),i=r[0],a=r[1],o=he(e,2),s=o[0],l=o[1],c=he([i*s+a*l,i*l-a*s],2),u=c[0],d=c[1];return Math.atan2(d,u)}function lMt(n){var e=(n+360)%180;return ls(e,-90,90)||(e+=180),e}function cMt(n,e,r){var i,a=r.labelAlign,o=(i=e.style.transform)===null||i===void 0?void 0:i.includes("rotate");if(o)return e.getLocalEulerAngles();var s=0,l=GM(n.value,r),c=lL(n.value,r);return a==="horizontal"?0:(a==="perpendicular"?s=_H([1,0],l):s=_H([c[0]<0?-1:1,0],c),lMt(JTe(s)))}function T3e(n,e,r){var i=r.type,a=r.labelAlign,o=GM(n,r),s=Ohe(e),l=Ohe(JTe(_H([1,0],o))),c="center",u="middle";return i==="linear"?[90,270].includes(l)&&s===0?(c="center",u=o[1]===1?"top":"bottom"):!(l%180)&&[90,270].includes(s)?c="center":l===0?(ls(s,0,90,!1,!0)||ls(s,0,90)||ls(s,270,360))&&(c="start"):l===90?ls(s,0,90,!1,!0)?c="start":(ls(s,90,180)||ls(s,270,360))&&(c="end"):l===270?ls(s,0,90,!1,!0)?c="end":(ls(s,90,180)||ls(s,270,360))&&(c="start"):l===180&&(s===90?c="start":(ls(s,0,90)||ls(s,270,360))&&(c="end")):a==="parallel"?ls(l,0,180,!0)?u="top":u="bottom":a==="horizontal"?ls(l,90,270,!1)?c="end":(ls(l,270,360,!1)||ls(l,0,90))&&(c="start"):a==="perpendicular"&&(ls(l,90,270)?c="end":c="start"),{textAlign:c,textBaseline:u}}function uMt(n,e,r){e.setLocalEulerAngles(n);var i=e.__data__.value,a=T3e(i,n,r),o=e.querySelector(Ei.labelItem.class);o&&A3e(o,a)}function Ihe(n,e,r){var i=r.showTick,a=r.tickLength,o=r.tickDirection,s=r.labelDirection,l=r.labelSpacing,c=e.indexOf(n),u=Wu(l,[n,c,e]),d=he([GM(n.value,r),sMt(s,o)],2),f=d[0],h=d[1],p=h===1?Wu(i?a:0,[n,c,e]):0,g=he(m2(ep(f,u+p),cL(n.value,r)),2),m=g[0],v=g[1];return{x:m,y:v}}function dMt(n,e,r,i){var a=i.labelFormatter,o=cn(a)?function(){return Fp(Wu(a,[n,e,r,GM(n.value,i)]))}:function(){return Fp(n.label||"")};return o}function A3e(n,e){n.nodeName==="text"&&n.attr(e)}function Dhe(n){oMt(this.node().childNodes,n,{hide:$d,show:UM,rotate:function(e,r){uMt(+r,e,n)},ellipsis:function(e,r,i){e&&mH(e,r||1/0,i)},wrap:function(e,r,i){e&&q2t(e,r,i)},getTextShape:function(e){return e.querySelector("text")}})}function Lhe(n,e,r,i,a){var o=r.indexOf(e),s=un(n).append(dMt(e,o,r,a)).attr("className",Ei.labelItem.name).node(),l=he($p(_3e(i,[e,o,r])),2),c=l[0],u=l[1],d=u.transform,f=$a(u,["transform"]);o3e(s,d);var h=cMt(e,s,a);return s.getLocalEulerAngles()||s.setLocalEulerAngles(h),A3e(s,xt(xt({},T3e(e.value,h,a)),c)),n.attr(f),s}function fMt(n,e,r,i){var a=TK(e,r.labelFilter),o=Qn(r,"label");return n.selectAll(Ei.label.class).data(a,function(s,l){return l}).join(function(s){return s.append("g").attr("className",Ei.label.name).transition(function(l){Lhe(this,l,e,o,r);var c=Ihe(l,e,r),u=c.x,d=c.y;return this.style.transform="translate(".concat(u,", ").concat(d,")"),null}).call(function(){Dhe.call(n,r)})},function(s){return s.transition(function(l){var c=this.querySelector(Ei.labelItem.class),u=Lhe(this,l,e,o,r),d=xCt(c,u,i.update),f=Ihe(l,e,r),h=f.x,p=f.y,g=Wd(this,{transform:"translate(".concat(h,", ").concat(p,")")},i.update);return nn(nn([],he(d),!1),[g],!1)}).call(function(l){var c=cl(l,"_transitions").flat().filter(t3e);yCt(c,function(){Dhe.call(n,r)})})},function(s){return s.transition(function(){var l=this,c=sL(this.childNodes[0],i.exit);return aw(c,function(){return un(l).remove()}),c})}).transitions()}function R3e(n,e){return AK(n,e.tickDirection,e)}function hMt(n,e){var r=he(n,2),i=r[0],a=r[1];return[[0,0],[i*e,a*e]]}function pMt(n,e,r,i,a){var o=a.tickLength,s=he(hMt(i,Wu(o,[n,e,r])),2),l=he(s[0],2),c=l[0],u=l[1],d=he(s[1],2),f=d[0],h=d[1];return{x1:c,x2:f,y1:u,y2:h}}function gMt(n,e,r,i,a){var o=a.tickFormatter,s=R3e(e.value,a),l="line";return cn(o)&&(l=function(){return Wu(o,[e,r,i,s])}),n.append(l).attr("className",Ei.tickItem.name)}function mMt(n,e,r,i,a,o,s){var l=R3e(n.value,o),c=pMt(n,e,r,l,o),u=c.x1,d=c.x2,f=c.y1,h=c.y2,p=he($p(_3e(s,[n,e,r,l])),2),g=p[0],m=p[1];i.node().nodeName==="line"&&i.styles(xt({x1:u,x2:d,y1:f,y2:h},g)),a.attr(m),i.styles(g)}function khe(n,e,r,i,a,o){var s=gMt(un(this),n,e,r,i);mMt(n,e,r,s,this,i,a);var l=he(cL(n.value,i),2),c=l[0],u=l[1];return Wd(this,{transform:"translate(".concat(c,", ").concat(u,")")},o)}function vMt(n,e,r,i){var a=TK(e,r.tickFilter),o=Qn(r,"tick");return n.selectAll(Ei.tick.class).data(a,function(s){return s.id||s.label}).join(function(s){return s.append("g").attr("className",Ei.tick.name).transition(function(l,c){return khe.call(this,l,c,a,r,o,!1)})},function(s){return s.transition(function(l,c){return this.removeChildren(),khe.call(this,l,c,a,r,o,i.update)})},function(s){return s.transition(function(){var l=this,c=sL(this.childNodes[0],i.exit);return aw(c,function(){return l.remove()}),c})}).transitions()}var Fhe=uf({text:"text"},"title");function dL(n){return/\S+-\S+/g.test(n)?n.split("-").map(function(e){return e[0]}):n.length>2?[n[0]]:n.split("")}function yMt(n,e){var r=n.attributes,i=r.position,a=r.spacing,o=r.inset,s=r.text,l=n.getBBox(),c=e.getBBox(),u=dL(i),d=he(Ss(s?a:0),4),f=d[0],h=d[1],p=d[2],g=d[3],m=he(Ss(o),4),v=m[0],y=m[1],b=m[2],x=m[3],_=he([g+h,f+p],2),S=_[0],M=_[1],E=he([x+y,v+b],2),T=E[0],P=E[1];if(u[0]==="l")return new pl(l.x,l.y,c.width+l.width+S+T,Math.max(c.height+P,l.height));if(u[0]==="t")return new pl(l.x,l.y,Math.max(c.width+T,l.width),c.height+l.height+M+P);var A=he([e.attributes.width||c.width,e.attributes.height||c.height],2),N=A[0],O=A[1];return new pl(c.x,c.y,N+l.width+S+T,O+l.height+M+P)}function bMt(n,e){var r=Object.entries(e).reduce(function(i,a){var o=he(a,2),s=o[0],l=o[1],c=n.node().attr(s);return c||(i[s]=l),i},{});n.styles(r)}function xMt(n){var e,r,i,a,o=n,s=o.width,l=o.height,c=o.position,u=he([+s/2,+l/2],2),d=u[0],f=u[1],h=he([+d,+f,"center","middle"],4),p=h[0],g=h[1],m=h[2],v=h[3],y=dL(c);return y.includes("l")&&(e=he([0,"start"],2),p=e[0],m=e[1]),y.includes("r")&&(r=he([+s,"end"],2),p=r[0],m=r[1]),y.includes("t")&&(i=he([0,"top"],2),g=i[0],v=i[1]),y.includes("b")&&(a=he([+l,"bottom"],2),g=a[0],v=a[1]),{x:p,y:g,textAlign:m,textBaseline:v}}var _Mt=function(n){br(e,n);function e(r){return n.call(this,r,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return e.prototype.getAvailableSpace=function(){var r=this,i=this.attributes,a=i.width,o=i.height,s=i.position,l=i.spacing,c=i.inset,u=r.querySelector(Fhe.text.class);if(!u)return new pl(0,0,+a,+o);var d=u.getBBox(),f=d.width,h=d.height,p=he(Ss(l),4),g=p[0],m=p[1],v=p[2],y=p[3],b=he([0,0,+a,+o],4),x=b[0],_=b[1],S=b[2],M=b[3],E=dL(s);if(E.includes("i"))return new pl(x,_,S,M);E.forEach(function($,B){var F,G,z,U;$==="t"&&(F=he(B===0?[h+v,+o-h-v]:[0,+o],2),_=F[0],M=F[1]),$==="r"&&(G=he([+a-f-y],1),S=G[0]),$==="b"&&(z=he([+o-h-g],1),M=z[0]),$==="l"&&(U=he(B===0?[f+m,+a-f-m]:[0,+a],2),x=U[0],S=U[1])});var T=he(Ss(c),4),P=T[0],A=T[1],N=T[2],O=T[3],I=he([O+A,P+N],2),D=I[0],k=I[1];return new pl(x+O,_+P,S-D,M-k)},e.prototype.getBBox=function(){return this.title?this.title.getBBox():new pl(0,0,0,0)},e.prototype.render=function(r,i){var a=this;r.width,r.height,r.position,r.spacing;var o=$a(r,["width","height","position","spacing"]),s=he($p(o),1),l=s[0],c=xMt(r),u=c.x,d=c.y,f=c.textAlign,h=c.textBaseline;Vc(!!o.text,un(i),function(p){a.title=p.maybeAppendByClassName(Fhe.text,"text").styles(l).call(bMt,{x:u,y:d,textAlign:f,textBaseline:h}).node()})},e}(Ba);function wMt(n,e,r){var i=r.titlePosition,a=i===void 0?"lb":i,o=r.titleSpacing,s=dL(a),l=n.node().getLocalBounds(),c=he(l.min,2),u=c[0],d=c[1],f=he(l.halfExtents,2),h=f[0],p=f[1],g=he(e.node().getLocalBounds().halfExtents,2),m=g[0],v=g[1],y=he([u+h,d+p],2),b=y[0],x=y[1],_=he(Ss(o),4),S=_[0],M=_[1],E=_[2],T=_[3];if(["start","end"].includes(a)&&r.type==="linear"){var P=r.startPos,A=r.endPos,N=he(a==="start"?[P,A]:[A,P],2),O=N[0],I=N[1],D=a3e([-I[0]+O[0],-I[1]+O[1]]),k=he(ep(D,S),2),$=k[0],B=k[1];return{x:O[0]+$,y:O[1]+B}}return s.includes("t")&&(x-=p+v+S),s.includes("r")&&(b+=h+m+M),s.includes("l")&&(b-=h+m+T),s.includes("b")&&(x+=p+v+E),{x:b,y:x}}function SMt(n,e,r){var i=n.getGeometryBounds().halfExtents,a=i[1]*2;if(e==="vertical"){if(r==="left")return"rotate(-90) translate(0, ".concat(a/2,")");if(r==="right")return"rotate(-90) translate(0, -".concat(a/2,")")}return""}function $he(n,e,r,i,a){var o=Qn(i,"title"),s=he($p(o),2),l=s[0],c=s[1],u=c.transform,d=c.transformOrigin,f=$a(c,["transform","transformOrigin"]);e.styles(f);var h=u||SMt(n.node(),l.direction,l.position);n.styles(xt(xt({},l),{transformOrigin:d})),o3e(n.node(),h);var p=wMt(un(r._offscreen||r.querySelector(Ei.mainGroup.class)),e,i),g=p.x,m=p.y,v=Wd(e.node(),{transform:"translate(".concat(g,", ").concat(m,")")},a);return v}function EMt(n,e,r,i){var a=r.titleText;return n.selectAll(Ei.title.class).data([{title:a}].filter(function(o){return!!o.title}),function(o,s){return o.title}).join(function(o){return o.append(function(){return Fp(a)}).attr("className",Ei.title.name).transition(function(){return $he(un(this),n,e,r,i.enter)})},function(o){return o.transition(function(){return $he(un(this),n,e,r,i.update)})},function(o){return o.remove()}).transitions()}function Bhe(n,e,r,i){var a=n.showLine,o=n.showTick,s=n.showLabel,l=e.maybeAppendByClassName(Ei.lineGroup,"g"),c=Vc(a,l,function(p){return $Ct(p,n,i)})||[],u=e.maybeAppendByClassName(Ei.tickGroup,"g"),d=Vc(o,u,function(p){return vMt(p,r,n,i)})||[],f=e.maybeAppendByClassName(Ei.labelGroup,"g"),h=Vc(s,f,function(p){return fMt(p,r,n,i)})||[];return nn(nn(nn([],he(c),!1),he(d),!1),he(h),!1).filter(function(p){return!!p})}var CMt=function(n){br(e,n);function e(r){return n.call(this,r,MK)||this}return e.prototype.render=function(r,i,a){var o=this,s=r.titleText,l=r.data,c=r.animate,u=r.showTitle,d=r.showGrid,f=r.dataThreshold,h=r.truncRange,p=iEt(l,f).filter(function(S){var M=S.value;return!(h&&M>h[0]&&M<h[1])}),g=Rhe(a===void 0?c:a),m=un(i).maybeAppendByClassName(Ei.gridGroup,"g"),v=Vc(d,m,function(S){return VCt(S,p,r,g)})||[],y=un(i).maybeAppendByClassName(Ei.mainGroup,"g");s&&(!this.initialized&&g.enter||this.initialized&&g.update)&&Bhe(r,un(this.offscreenGroup),p,Rhe(!1));var b=Bhe(r,un(y.node()),p,g),x=un(i).maybeAppendByClassName(Ei.titleGroup,"g"),_=Vc(u,x,function(S){return EMt(S,o,r,g)})||[];return nn(nn(nn([],he(v),!1),he(b),!1),he(_),!1).flat().filter(function(S){return!!S})},e}(Ba),vu=uf({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),MMt=function(n){br(e,n);function e(r){var i=n.call(this,r,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:DEt(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(a,o){return"".concat(a,"/").concat(o)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return i.playState="idle",i.contentGroup=i.appendChild(new Bo({class:vu.contentGroup.name})),i.playWindow=i.contentGroup.appendChild(new Bo({class:vu.playWindow.name})),i.innerCurrPage=i.defaultPage,i}return Object.defineProperty(e.prototype,"defaultPage",{get:function(){var r=this.attributes.defaultPage;return Ta(r,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageShape",{get:function(){var r=this.pageViews,i=he(gEt(r.map(function(f){var h=f.getBBox(),p=h.width,g=h.height;return[p,g]})).map(function(f){return Math.max.apply(Math,nn([],he(f),!1))}),2),a=i[0],o=i[1],s=this.attributes,l=s.pageWidth,c=l===void 0?a:l,u=s.pageHeight,d=u===void 0?o:u;return{pageWidth:c,pageHeight:d}},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(e.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var r=n.prototype.getBBox.call(this),i=r.x,a=r.y,o=this.controllerShape,s=this.pageShape,l=s.pageWidth,c=s.pageHeight;return new pl(i,a,l+o.width,c)},e.prototype.goTo=function(r){var i=this,a=this.attributes.animate,o=this,s=o.currPage,l=o.playState,c=o.playWindow,u=o.pageViews;if(l!=="idle"||r<0||u.length<=0||r>=u.length)return null;u[s].setLocalPosition(0,0),this.prepareFollowingPage(r);var d=he(this.getFollowingPageDiff(r),2),f=d[0],h=d[1];this.playState="running";var p=m3e(c,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-f,", ").concat(-h,")")}],a);return aw(p,function(){i.innerCurrPage=r,i.playState="idle",i.setVisiblePages([r]),i.updatePageInfo()}),p},e.prototype.prev=function(){var r=this.attributes.loop,i=this.pageViews.length,a=this.currPage;if(!r&&a<=0)return null;var o=r?(a-1+i)%i:Ta(a-1,0,i);return this.goTo(o)},e.prototype.next=function(){var r=this.attributes.loop,i=this.pageViews.length,a=this.currPage;if(!r&&a>=i-1)return null;var o=r?(a+1)%i:Ta(a+1,0,i);return this.goTo(o)},e.prototype.renderClipPath=function(r){var i=this.pageShape,a=i.pageWidth,o=i.pageHeight;if(!a||!o){this.contentGroup.style.clipPath=void 0;return}this.clipPath=r.maybeAppendByClassName(vu.clipPath,"rect").styles({width:a,height:o}),this.contentGroup.attr("clipPath",this.clipPath.node())},e.prototype.setVisiblePages=function(r){this.playWindow.children.forEach(function(i,a){r.includes(a)?UM(i):$d(i)})},e.prototype.adjustControllerLayout=function(){var r=this,i=r.prevBtnGroup,a=r.nextBtnGroup,o=r.pageInfoGroup,s=this.attributes,l=s.orientation,c=s.controllerPadding,u=o.getBBox(),d=u.width;u.height;var f=he(l==="horizontal"?[-180,0]:[-90,90],2),h=f[0],p=f[1];i.setLocalEulerAngles(h),a.setLocalEulerAngles(p);var g=i.getBBox(),m=g.width,v=g.height,y=a.getBBox(),b=y.width,x=y.height,_=Math.max(m,d,b),S=l==="horizontal"?{offset:[[0,0],[m/2+c,0],[m+d+c*2,0]],textAlign:"start"}:{offset:[[_/2,-v-c],[_/2,0],[_/2,x+c]],textAlign:"center"},M=he(S.offset,3),E=he(M[0],2),T=E[0],P=E[1],A=he(M[1],2),N=A[0],O=A[1],I=he(M[2],2),D=I[0],k=I[1],$=S.textAlign,B=o.querySelector("text");B&&(B.style.textAlign=$),i.setLocalPosition(T,P),o.setLocalPosition(N,O),a.setLocalPosition(D,k)},e.prototype.updatePageInfo=function(){var r,i=this,a=i.currPage,o=i.pageViews,s=i.attributes.formatter;o.length<2||((r=this.pageInfoGroup.querySelector(vu.pageInfo.class))===null||r===void 0||r.attr("text",s(a+1,o.length)),this.adjustControllerLayout())},e.prototype.getFollowingPageDiff=function(r){var i=this.currPage;if(i===r)return[0,0];var a=this.attributes.orientation,o=this.pageShape,s=o.pageWidth,l=o.pageHeight,c=r<i?-1:1;return a==="horizontal"?[c*s,0]:[0,c*l]},e.prototype.prepareFollowingPage=function(r){var i=this,a=i.currPage,o=i.pageViews;if(this.setVisiblePages([r,a]),r!==a){var s=he(this.getFollowingPageDiff(r),2),l=s[0],c=s[1];o[r].setLocalPosition(l,c)}},e.prototype.renderController=function(r){var i=this,a=this.attributes.controllerSpacing,o=this.pageShape,s=o.pageWidth,l=o.pageHeight,c=this.pageViews.length>=2,u=r.maybeAppendByClassName(vu.controller,"g");if(oL(u.node(),c),!!c){var d=Qn(this.attributes,"button"),f=Qn(this.attributes,"pageNum"),h=he($p(d),2),p=h[0],g=h[1],m=p.size,v=$a(p,["size"]),y=!u.select(vu.prevBtnGroup.class).node(),b=u.maybeAppendByClassName(vu.prevBtnGroup,"g").styles(g);this.prevBtnGroup=b.node();var x=b.maybeAppendByClassName(vu.prevBtn,"path"),_=u.maybeAppendByClassName(vu.nextBtnGroup,"g").styles(g);this.nextBtnGroup=_.node();var S=_.maybeAppendByClassName(vu.nextBtn,"path");[x,S].forEach(function(E){E.styles(xt(xt({},v),{transformOrigin:"center"})),xK(E.node(),m)});var M=u.maybeAppendByClassName(vu.pageInfoGroup,"g");this.pageInfoGroup=M.node(),M.maybeAppendByClassName(vu.pageInfo,"text").styles(f),this.updatePageInfo(),u.node().setLocalPosition(s+a,l/2),y&&(this.prevBtnGroup.addEventListener("click",function(){i.prev()}),this.nextBtnGroup.addEventListener("click",function(){i.next()}))}},e.prototype.render=function(r,i){var a=r.x,o=a===void 0?0:a,s=r.y,l=s===void 0?0:s;this.attr("transform","translate(".concat(o,", ").concat(l,")"));var c=un(i);this.renderClipPath(c),this.renderController(c),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},e.prototype.bindEvents=function(){var r=this,i=xM(function(){return r.render(r.attributes,r)},50);this.playWindow.addEventListener(wr.INSERTED,i),this.playWindow.addEventListener(wr.REMOVED,i)},e}(Ba);function TMt(n,e,r){var i=1.4,a=i*r;return[["M",n-r,e-a],["L",n+r,e-a],["L",n+r,e+a],["L",n-r,e+a],["Z"]]}var P3e=1.4,N3e=.4;function AMt(n,e,r){var i=r,a=i*P3e,o=i/2,s=i/6,l=n+a*N3e;return[["M",n,e],["L",l,e+o],["L",n+a,e+o],["L",n+a,e-o],["L",l,e-o],["Z"],["M",l,e+s],["L",n+a-2,e+s],["M",l,e-s],["L",n+a-2,e-s]]}function RMt(n,e,r){var i=r,a=i*P3e,o=i/2,s=i/6,l=e+a*N3e;return[["M",n,e],["L",n-o,l],["L",n-o,e+a],["L",n+o,e+a],["L",n+o,l],["Z"],["M",n-s,l],["L",n-s,e+a-2],["M",n+s,l],["L",n+s,e+a-2]]}Ii.registerSymbol("hiddenHandle",TMt);Ii.registerSymbol("verticalHandle",AMt);Ii.registerSymbol("horizontalHandle",RMt);function wH(n,e,r){return n===void 0&&(n="horizontal"),n==="horizontal"?e:r}var _c=uf({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item");function PMt(n){var e=n.querySelector(_c.marker.class);return e?e.style:{}}var NMt=function(n){br(e,n);function e(r){return n.call(this,r,{span:[1,1],marker:function(){return new qp({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Object.defineProperty(e.prototype,"showValue",{get:function(){var r=this.attributes.valueText;return r?typeof r=="string"||typeof r=="number"?r!=="":typeof r=="function"?!0:r.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualSpace",{get:function(){var r=this.labelGroup,i=this.valueGroup,a=this.attributes.markerSize,o=r.node().getBBox(),s=o.width,l=o.height,c=i.node().getBBox(),u=c.width,d=c.height;return{markerWidth:a,labelWidth:s,valueWidth:u,height:Math.max(a,l,d)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){var r=this.attributes.span;if(!r)return[1,1];var i=he(Ss(r),2),a=i[0],o=i[1],s=this.showValue?o:0,l=a+s;return[a/l,s/l]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var r,i=this.attributes,a=i.markerSize,o=i.width,s=this.actualSpace,l=s.markerWidth,c=s.height,u=this.actualSpace,d=u.labelWidth,f=u.valueWidth,h=he(this.spacing,2),p=h[0],g=h[1];if(o){var m=o-a-p-g,v=he(this.span,2),y=v[0],b=v[1];r=he([y*m,b*m],2),d=r[0],f=r[1]}var x=l+d+f+p+g;return{width:x,height:c,markerWidth:l,labelWidth:d,valueWidth:f}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){var r=this.attributes.spacing;if(!r)return[0,0];var i=he(Ss(r),2),a=i[0],o=i[1];return this.showValue?[a,o]:[a,0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){var r=this.shape,i=r.markerWidth,a=r.labelWidth,o=r.valueWidth,s=r.width,l=r.height,c=he(this.spacing,2),u=c[0],d=c[1];return{height:l,width:s,markerWidth:i,labelWidth:a,valueWidth:o,position:[i/2,i+u,i+a+u+d]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleSize",{get:function(){var r=PMt(this.markerGroup.node()),i=this.attributes,a=i.markerSize,o=i.markerStrokeWidth,s=o===void 0?r.strokeWidth:o,l=i.markerLineWidth,c=l===void 0?r.lineWidth:l,u=i.markerStroke,d=u===void 0?r.stroke:u,f=+(s||c||(d?1:0))*Math.sqrt(2),h=this.markerGroup.node().getBBox(),p=h.width,g=h.height;return(1-f/Math.max(p,g))*a},enumerable:!1,configurable:!0}),e.prototype.renderMarker=function(r){var i=this,a=this.attributes.marker,o=Qn(this.attributes,"marker");this.markerGroup=r.maybeAppendByClassName(_c.markerGroup,"g").style("zIndex",0),Vc(!!a,this.markerGroup,function(){var s,l=i.markerGroup.node(),c=(s=l.childNodes)===null||s===void 0?void 0:s[0],u=typeof a=="string"?new Ii({style:{symbol:a},className:_c.marker.name}):a();c?u.nodeName===c.nodeName?c instanceof Ii?c.update(xt(xt({},o),{symbol:a})):(uEt(c,u),un(c).styles(o)):(c.remove(),un(u).attr("className",_c.marker.name).styles(o),l.appendChild(u)):(u instanceof Ii||un(u).attr("className",_c.marker.name).styles(o),l.appendChild(u)),i.markerGroup.node().scale(1/i.markerGroup.node().getScale()[0]);var d=xK(i.markerGroup.node(),i.scaleSize);i.markerGroup.node().style._transform="scale(".concat(d,")")})},e.prototype.renderLabel=function(r){var i=Qn(this.attributes,"label"),a=i.text,o=$a(i,["text"]);this.labelGroup=r.maybeAppendByClassName(_c.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(_c.label,function(){return Fp(a)}).styles(o)},e.prototype.renderValue=function(r){var i=this,a=Qn(this.attributes,"value"),o=a.text,s=$a(a,["text"]);this.valueGroup=r.maybeAppendByClassName(_c.valueGroup,"g").style("zIndex",0),Vc(this.showValue,this.valueGroup,function(){i.valueGroup.maybeAppendByClassName(_c.value,function(){return Fp(o)}).styles(s)})},e.prototype.renderBackground=function(r){var i=this.shape,a=i.width,o=i.height,s=Qn(this.attributes,"background");this.background=r.maybeAppendByClassName(_c.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(_c.background,"rect").styles(xt({width:a,height:o},s))},e.prototype.adjustLayout=function(){var r=this.layout,i=r.labelWidth,a=r.valueWidth,o=r.height,s=he(r.position,3),l=s[0],c=s[1],u=s[2],d=o/2;this.markerGroup.styles({transform:"translate(".concat(l,", ").concat(d,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(c,", ").concat(d,")")}),mH(this.labelGroup.select(_c.label.class).node(),Math.ceil(i)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(u,", ").concat(d,")")}),mH(this.valueGroup.select(_c.value.class).node(),Math.ceil(a)))},e.prototype.render=function(r,i){var a=un(i),o=r.x,s=o===void 0?0:o,l=r.y,c=l===void 0?0:l;a.styles({transform:"translate(".concat(s,", ").concat(c,")")}),this.renderMarker(a),this.renderLabel(a),this.renderValue(a),this.renderBackground(a),this.adjustLayout()},e}(Ba),Uv=uf({page:"item-page",navigator:"navigator",item:"item"},"items"),zhe=function(n,e,r){return r===void 0&&(r=!0),n?e(n):r},OMt=function(n){br(e,n);function e(r){var i=n.call(this,r,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:aF,mouseenter:aF,mouseleave:aF})||this;return i.navigatorShape=[0,0],i}return Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){var r=this.attributes,i=r.gridRow,a=r.gridCol,o=r.data;if(!i&&!a)throw new Error("gridRow and gridCol can not be set null at the same time");return i&&a?[i,a]:i?[i,o.length]:[o.length,a]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderData",{get:function(){var r=this.attributes,i=r.data,a=r.layout,o=Qn(this.attributes,"item"),s=i.map(function(l,c){var u=l.id,d=u===void 0?c:u,f=l.label,h=l.value;return{id:"".concat(d),index:c,style:xt({layout:a,labelText:f,valueText:h},Object.fromEntries(Object.entries(o).map(function(p){var g=he(p,2),m=g[0],v=g[1];return[m,Wu(v,[l,c,i])]})))}});return s},enumerable:!1,configurable:!0}),e.prototype.getGridLayout=function(){var r=this,i=this.attributes,a=i.orientation,o=i.width,s=i.rowPadding,l=i.colPadding,c=he(this.navigatorShape,1),u=c[0],d=he(this.grid,2),f=d[0],h=d[1],p=h*f,g=0;return this.pageViews.children.map(function(m,v){var y,b,x=Math.floor(v/p),_=v%p,S=r.ifHorizontal(h,f),M=[Math.floor(_/S),_%S];a==="vertical"&&M.reverse();var E=he(M,2),T=E[0],P=E[1],A=(o-u-(h-1)*l)/h,N=m.getBBox().height,O=he([0,0],2),I=O[0],D=O[1];return a==="horizontal"?(y=he([g,T*(N+s)],2),I=y[0],D=y[1],g=P===h-1?0:g+A+l):(b=he([P*(A+l),g],2),I=b[0],D=b[1],g=T===f-1?0:g+N+s),{page:x,index:v,row:T,col:P,pageIndex:_,width:A,height:N,x:I,y:D}})},e.prototype.getFlexLayout=function(){var r=this.attributes,i=r.width,a=r.height,o=r.rowPadding,s=r.colPadding,l=he(this.navigatorShape,1),c=l[0],u=he(this.grid,2),d=u[0],f=u[1],h=he([i-c,a],2),p=h[0],g=h[1],m=he([0,0,0,0,0,0,0,0],8),v=m[0],y=m[1],b=m[2],x=m[3],_=m[4],S=m[5],M=m[6],E=m[7];return this.pageViews.children.map(function(T,P){var A,N,O,I,D=T.getBBox(),k=D.width,$=D.height,B=M===0?0:s,F=M+B+k;if(F<=p&&zhe(_,function(z){return z<f}))return A=he([M+B,E,F],3),v=A[0],y=A[1],M=A[2],{width:k,height:$,x:v,y,page:b,index:P,pageIndex:x++,row:S,col:_++};N=he([S+1,0,0,E+$+o],4),S=N[0],_=N[1],M=N[2],E=N[3];var G=E+$;return G<=g&&zhe(S,function(z){return z<d})?(O=he([M,E,k],3),v=O[0],y=O[1],M=O[2],{width:k,height:$,x:v,y,page:b,index:P,pageIndex:x++,row:S,col:_++}):(I=he([0,0,k,0,b+1,0,0,0],8),v=I[0],y=I[1],M=I[2],E=I[3],b=I[4],x=I[5],S=I[6],_=I[7],{width:k,height:$,x:v,y,page:b,index:P,pageIndex:x++,row:S,col:_++})})},Object.defineProperty(e.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var r=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,i=r.call(this);return i.slice(-1)[0].page>0?(this.navigatorShape=[55,0],r.call(this)):i},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(r,i){var a=this.attributes.orientation;return wH(a,r,i)},e.prototype.flattenPage=function(r){r.querySelectorAll(Uv.item.class).forEach(function(i){r.appendChild(i)}),r.querySelectorAll(Uv.page.class).forEach(function(i){var a=r.removeChild(i);a.destroy()})},e.prototype.renderItems=function(r){var i=this.attributes,a=i.click,o=i.mouseenter,s=i.mouseleave;this.flattenPage(r);var l=this.dispatchCustomEvent.bind(this);un(r).selectAll(Uv.item.class).data(this.renderData,function(c){return c.id}).join(function(c){return c.append(function(u){var d=u.style;return new NMt({style:d})}).attr("className",Uv.item.name).on("click",function(){a==null||a(this),l("itemClick",{item:this})}).on("pointerenter",function(){o==null||o(this),l("itemMouseenter",{item:this})}).on("pointerleave",function(){s==null||s(this),l("itemMouseleave",{item:this})})},function(c){return c.each(function(u){var d=u.style;this.update(d)})},function(c){return c.remove()})},e.prototype.relayoutNavigator=function(){var r,i=this.attributes,a=i.layout,o=i.width,s=((r=this.pageViews.children[0])===null||r===void 0?void 0:r.getBBox().height)||0,l=he(this.navigatorShape,2),c=l[0],u=l[1];this.navigator.update(a==="grid"?{pageWidth:o-c,pageHeight:s-u}:{})},e.prototype.adjustLayout=function(){var r=this,i=Object.entries(Y2t(this.itemsLayout,"page")).map(function(o){var s=he(o,2),l=s[0],c=s[1];return{page:l,layouts:c}}),a=nn([],he(this.navigator.getContainer().children),!1);i.forEach(function(o){var s=o.layouts,l=r.pageViews.appendChild(new Bo({className:Uv.page.name}));s.forEach(function(c){var u=c.x,d=c.y,f=c.index,h=c.width,p=c.height,g=a[f];l.appendChild(g),KE(g,"__layout__",c),g.update({x:u,y:d,width:h,height:p})})}),this.relayoutNavigator()},e.prototype.renderNavigator=function(r){var i=this.attributes.orientation,a=Qn(this.attributes,"nav"),o=ns({orientation:i},a),s=this;return r.selectAll(Uv.navigator.class).data(["nav"]).join(function(l){return l.append(function(){return new MMt({style:o})}).attr("className",Uv.navigator.name).each(function(){s.navigator=this})},function(l){return l.each(function(){this.update(o)})},function(l){return l.remove()}),this.navigator},e.prototype.getBBox=function(){return this.navigator.getBBox()},e.prototype.render=function(r,i){var a=this.attributes.data;if(!(!a||a.length===0)){var o=this.renderNavigator(un(i));this.renderItems(o.getContainer()),this.adjustLayout()}},e.prototype.dispatchCustomEvent=function(r,i){var a=new so(r,{detail:i});this.dispatchEvent(a)},e}(Ba),mS=uf({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),O3e={showLabel:!0,formatter:function(n){return n.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0};(function(n){br(e,n);function e(r){return n.call(this,r,O3e)||this}return e.prototype.render=function(r,i){var a=un(i).maybeAppendByClassName(mS.markerGroup,"g");this.renderMarker(a);var o=un(i).maybeAppendByClassName(mS.labelGroup,"g");this.renderLabel(o)},e.prototype.renderMarker=function(r){var i=this,a=this.attributes,o=a.orientation,s=a.markerSymbol,l=s===void 0?wH(o,"horizontalHandle","verticalHandle"):s;Vc(!!l,r,function(c){var u=Qn(i.attributes,"marker"),d=xt({symbol:l},u);i.marker=c.maybeAppendByClassName(mS.marker,function(){return new Ii({style:d})}).update(d)})},e.prototype.renderLabel=function(r){var i=this,a=this.attributes,o=a.showLabel,s=a.orientation,l=a.spacing,c=l===void 0?0:l,u=a.formatter;Vc(o,r,function(d){var f,h=Qn(i.attributes,"label"),p=h.text,g=$a(h,["text"]),m=((f=d.select(mS.marker.class))===null||f===void 0?void 0:f.node().getBBox())||{},v=m.width,y=v===void 0?0:v,b=m.height,x=b===void 0?0:b,_=he(wH(s,[0,x+c,"center","top"],[y+c,0,"start","middle"]),4),S=_[0],M=_[1],E=_[2],T=_[3];d.maybeAppendByClassName(mS.label,"text").styles(xt(xt({},g),{x:S,y:M,text:u(p).toString(),textAlign:E,textBaseline:T}))})},e})(Ba);var I3e={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},IMt=ns({},I3e,{});ns({},I3e,wb(O3e,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"});var vS=uf({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend"),DMt=function(n){br(e,n);function e(r){return n.call(this,r,IMt)||this}return e.prototype.renderTitle=function(r,i,a){var o=this.attributes,s=o.showTitle,l=o.titleText,c=Qn(this.attributes,"title"),u=he($p(c),2),d=u[0],f=u[1];this.titleGroup=r.maybeAppendByClassName(vS.titleGroup,"g").styles(f);var h=xt(xt({width:i,height:a},d),{text:s?l:""});this.title=this.titleGroup.maybeAppendByClassName(vS.title,function(){return new _Mt({style:h})}).update(h)},e.prototype.renderItems=function(r,i){var a=i.x,o=i.y,s=i.width,l=i.height,c=Qn(this.attributes,"title",!0),u=he($p(c),2),d=u[0],f=u[1],h=xt(xt({},d),{width:s,height:l,x:0,y:0});this.itemsGroup=r.maybeAppendByClassName(vS.itemsGroup,"g").styles(xt(xt({},f),{transform:"translate(".concat(a,", ").concat(o,")")}));var p=this;this.itemsGroup.selectAll(vS.items.class).data(["items"]).join(function(g){return g.append(function(){return new OMt({style:h})}).attr("className",vS.items.name).each(function(){p.items=un(this)})},function(g){return g.update(h)},function(g){return g.remove()})},e.prototype.adjustLayout=function(){var r=this.attributes.showTitle;if(r){var i=this.title.node().getAvailableSpace(),a=i.x,o=i.y;this.itemsGroup.node().style.transform="translate(".concat(a,", ").concat(o,")")}},Object.defineProperty(e.prototype,"availableSpace",{get:function(){var r=this.attributes,i=r.showTitle,a=r.width,o=r.height;return i?this.title.node().getAvailableSpace():new pl(0,0,a,o)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var r,i,a=(r=this.title)===null||r===void 0?void 0:r.node(),o=(i=this.items)===null||i===void 0?void 0:i.node();return!a||!o?n.prototype.getBBox.call(this):yMt(a,o)},e.prototype.render=function(r,i){var a=this.attributes,o=a.width,s=a.height,l=a.x,c=l===void 0?0:l,u=a.y,d=u===void 0?0:u,f=un(i);i.style.transform="translate(".concat(c,", ").concat(d,")"),this.renderTitle(f,o,s),this.renderItems(f,this.availableSpace),this.adjustLayout()},e}(Ba),LMt={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(n){return n.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},j7=uf({background:"background",labelGroup:"label-group",label:"label"},"indicator"),kMt=function(n){br(e,n);function e(r){var i=n.call(this,r,LMt)||this;return i.point=[0,0],i.group=i.appendChild(new Bo({})),i.isMutationObserved=!0,i}return e.prototype.renderBackground=function(){if(this.label){var r=this.attributes,i=r.position,a=r.padding,o=he(Ss(a),4),s=o[0],l=o[1],c=o[2],u=o[3],d=this.label.node().getLocalBounds(),f=d.min,h=d.max,p=new pl(f[0]-u,f[1]-s,h[0]+l-f[0]+u,h[1]+c-f[1]+s),g=this.getPath(i,p),m=Qn(this.attributes,"background");this.background=un(this.group).maybeAppendByClassName(j7.background,"path").styles(xt(xt({},m),{d:g})),this.group.appendChild(this.label.node())}},e.prototype.renderLabel=function(){var r=this.attributes,i=r.formatter,a=r.labelText,o=Qn(this.attributes,"label"),s=he($p(o),2),l=s[0],c=s[1];l.text;var u=$a(l,["text"]);if(this.label=un(this.group).maybeAppendByClassName(j7.labelGroup,"g").styles(c),!!a){var d=this.label.maybeAppendByClassName(j7.label,function(){return Fp(i(a))}).style("text",i(a).toString());d.selectAll("text").styles(u)}},e.prototype.adjustLayout=function(){var r=he(this.point,2),i=r[0],a=r[1],o=this.attributes,s=o.x,l=o.y;this.group.attr("transform","translate(".concat(s-i,", ").concat(l-a,")"))},e.prototype.getPath=function(r,i){var a=this.attributes.radius,o=i.x,s=i.y,l=i.width,c=i.height,u=[["M",o+a,s],["L",o+l-a,s],["A",a,a,0,0,1,o+l,s+a],["L",o+l,s+c-a],["A",a,a,0,0,1,o+l-a,s+c],["L",o+a,s+c],["A",a,a,0,0,1,o,s+c-a],["L",o,s+a],["A",a,a,0,0,1,o+a,s],["Z"]],d={top:4,right:6,bottom:0,left:2},f=d[r],h=this.createCorner([u[f].slice(-2),u[f+1].slice(-2)]);return u.splice.apply(u,nn([f+1,1],he(h),!1)),u[0][0]="M",u},e.prototype.createCorner=function(r,i){i===void 0&&(i=10);var a=.8,o=cEt.apply(void 0,nn([],he(r),!1)),s=he(r,2),l=he(s[0],2),c=l[0],u=l[1],d=he(s[1],2),f=d[0],h=d[1],p=he(o?[f-c,[c,f]]:[h-u,[u,h]],2),g=p[0],m=he(p[1],2),v=m[0],y=m[1],b=g/2,x=g/Math.abs(g),_=i*x,S=_/2,M=_*Math.sqrt(3)/2*a,E=he([v,v+b-S,v+b,v+b+S,y],5),T=E[0],P=E[1],A=E[2],N=E[3],O=E[4];return o?(this.point=[A,u-M],[["L",T,u],["L",P,u],["L",A,u-M],["L",N,u],["L",O,u]]):(this.point=[c+M,A],[["L",c,T],["L",c,P],["L",c+M,A],["L",c,N],["L",c,O]])},e.prototype.applyVisibility=function(){var r=this.attributes.visibility;r==="hidden"?$d(this):UM(this)},e.prototype.bindEvents=function(){this.label.on(wr.BOUNDS_CHANGED,this.renderBackground)},e.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},e}(Ba);function SH(n){return n===void 0&&(n=""),{CONTAINER:"".concat(n,"tooltip"),TITLE:"".concat(n,"tooltip-title"),LIST:"".concat(n,"tooltip-list"),LIST_ITEM:"".concat(n,"tooltip-list-item"),NAME:"".concat(n,"tooltip-list-item-name"),MARKER:"".concat(n,"tooltip-list-item-marker"),NAME_LABEL:"".concat(n,"tooltip-list-item-name-label"),VALUE:"".concat(n,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(n,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(n,"tooltip-crosshair-y")}}var Uhe={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function FMt(n){var e;n===void 0&&(n="");var r=SH(n);return e={},e[".".concat(r.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},e[".".concat(r.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},e[".".concat(r.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},e[".".concat(r.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},e[".".concat(r.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},e[".".concat(r.NAME)]={display:"flex","align-items":"center","max-width":"216px"},e[".".concat(r.NAME_LABEL)]=xt({flex:1},Uhe),e[".".concat(r.VALUE)]=xt({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},Uhe),e[".".concat(r.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e[".".concat(r.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e}var $Mt=function(n){br(e,n);function e(r){var i=this,a,o,s=(o=(a=r.style)===null||a===void 0?void 0:a.template)===null||o===void 0?void 0:o.prefixCls,l=SH(s);return i=n.call(this,r,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(l.CONTAINER,'"></div>'),title:'<div class="'.concat(l.TITLE,'"></div>'),item:'<li class="'.concat(l.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(l.NAME,`">
          <span class="`).concat(l.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(l.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(l.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:FMt(s)})||this,i.timestamp=-1,i.prevCustomContentKey=i.attributes.contentKey,i.initShape(),i.render(i.attributes,i),i}return Object.defineProperty(e.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.element},Object.defineProperty(e.prototype,"elementSize",{get:function(){var r=this.element.offsetWidth,i=this.element.offsetHeight;return{width:r,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HTMLTooltipItemsElements",{get:function(){var r=this.attributes,i=r.data,a=r.template;return i.map(function(o,s){var l=o.name,c=l===void 0?"":l,u=o.color,d=u===void 0?"black":u,f=o.index,h=$a(o,["name","color","index"]),p=xt({name:c,color:d,index:f??s},h);return _j(ait(a.item,p))})},enumerable:!1,configurable:!0}),e.prototype.render=function(r,i){this.renderHTMLTooltipElement(),this.updatePosition()},e.prototype.destroy=function(){var r;(r=this.element)===null||r===void 0||r.remove(),n.prototype.destroy.call(this)},e.prototype.show=function(r,i){var a=this;if(r!==void 0&&i!==void 0){var o=this.element.style.visibility==="hidden",s=function(){a.attributes.x=r??a.attributes.x,a.attributes.y=i??a.attributes.y,a.updatePosition()};o?this.closeTransition(s):s()}this.element.style.visibility="visible"},e.prototype.hide=function(r,i){r===void 0&&(r=0),i===void 0&&(i=0);var a=this.attributes.enterable;a&&this.isCursorEntered(r,i)||(this.element.style.visibility="hidden")},e.prototype.initShape=function(){var r=this.attributes.template;this.element=_j(r.container),this.id&&this.element.setAttribute("id",this.id)},e.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var r=this.attributes.content;r&&(typeof r=="string"?this.element.innerHTML=r:phe(this.element,r))}},e.prototype.renderHTMLTooltipElement=function(){var r,i,a=this.attributes,o=a.template,s=a.title,l=a.enterable,c=a.style,u=a.content,d=SH(o.prefixCls),f=this.element;if(this.element.style.pointerEvents=l?"auto":"none",u)this.renderCustomContent();else{s?(f.innerHTML=o.title,f.getElementsByClassName(d.TITLE)[0].innerHTML=s):(i=(r=f.getElementsByClassName(d.TITLE))===null||r===void 0?void 0:r[0])===null||i===void 0||i.remove();var h=this.HTMLTooltipItemsElements,p=document.createElement("ul");p.className=d.LIST,phe(p,h);var g=this.element.querySelector(".".concat(d.LIST));g?g.replaceWith(p):f.appendChild(p)}hEt(f,c)},e.prototype.getRelativeOffsetFromCursor=function(r){var i=this.attributes,a=i.position,o=i.offset,s=r||a,l=s.split("-"),c={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},u=this.elementSize,d=u.width,f=u.height,h=[-d/2,-f/2];return l.forEach(function(p){var g=he(h,2),m=g[0],v=g[1],y=he(c[p],2),b=y[0],x=y[1];h=[m+(d/2+o[0])*b,v+(f/2+o[1])*x]}),h},e.prototype.setOffsetPosition=function(r){var i=he(r,2),a=i[0],o=i[1],s=this.attributes,l=s.x,c=l===void 0?0:l,u=s.y,d=u===void 0?0:u,f=s.container,h=f.x,p=f.y;this.element.style.left="".concat(+c+h+a,"px"),this.element.style.top="".concat(+d+p+o,"px")},e.prototype.updatePosition=function(){var r=this.attributes.showDelay,i=r===void 0?60:r,a=Date.now();this.timestamp>0&&a-this.timestamp<i||(this.timestamp=a,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},e.prototype.autoPosition=function(r){var i=he(r,2),a=i[0],o=i[1],s=this.attributes,l=s.x,c=s.y,u=s.bounding,d=s.position;if(!u)return[a,o];var f=this.element,h=f.offsetWidth,p=f.offsetHeight,g=he([+l+a,+c+o],2),m=g[0],v=g[1],y={left:"right",right:"left",top:"bottom",bottom:"top"},b=u.x,x=u.y,_=u.width,S=u.height,M={left:m<b,right:m+h>b+_,top:v<x,bottom:v+p>x+S},E=[];d.split("-").forEach(function(P){M[P]?E.push(y[P]):E.push(P)});var T=E.join("-");return this.getRelativeOffsetFromCursor(T)},e.prototype.isCursorEntered=function(r,i){if(this.element){var a=this.element.getBoundingClientRect(),o=a.x,s=a.y,l=a.width,c=a.height;return new pl(o,s,l,c).isPointIn(r,i)}return!1},e.prototype.closeTransition=function(r){var i=this,a=this.element.style.transition;this.element.style.transition="none",r(),setTimeout(function(){i.element.style.transition=a},10)},e.tag="tooltip",e}(Ba),BMt=function(n){br(e,n);function e(r){var i=n.call(this,ns({},e.defaultOptions,r))||this;return i.hoverColor="#f5f5f5",i.selectedColor="#e6f7ff",i.background=i.appendChild(new ws({})),i.label=i.background.appendChild(new Bo({})),i}return Object.defineProperty(e.prototype,"padding",{get:function(){return Ss(this.style.padding)},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(){var r=this.style,i=r.label,a=r.value,o=Qn(this.attributes,"label");un(this.label).maybeAppend(".label",function(){return Fp(i)}).attr("className","label").styles(o),this.label.attr("__data__",a)},e.prototype.renderBackground=function(){var r=this.label.getBBox(),i=he(this.padding,4),a=i[0],o=i[1],s=i[2],l=i[3],c=r.width,u=r.height,d=c+l+o,f=u+a+s,h=Qn(this.attributes,"background"),p=this.style,g=p.width,m=g===void 0?0:g,v=p.height,y=v===void 0?0:v,b=p.selected;this.background.attr(xt(xt({},h),{width:Math.max(d,m),height:Math.max(f,y),fill:b?this.selectedColor:"#fff"})),this.label.attr({transform:"translate(".concat(l,", ").concat((f-u)/2,")")})},e.prototype.render=function(){this.renderLabel(),this.renderBackground()},e.prototype.bindEvents=function(){var r=this;this.addEventListener("pointerenter",function(){r.style.selected||r.background.attr("fill",r.hoverColor)}),this.addEventListener("pointerleave",function(){r.style.selected||r.background.attr("fill",r.style.backgroundFill)});var i=this;this.addEventListener("click",function(){var a=r.style,o=a.label,s=a.value,l=a.onClick;l==null||l(s,{label:o,value:s},i)})},e.defaultOptions={style:{value:"",label:"",cursor:"pointer"}},e}(Ba),zMt=function(n){br(e,n);function e(r){var i,a,o=n.call(this,ns({},e.defaultOptions,r))||this;o.currentValue=(i=e.defaultOptions.style)===null||i===void 0?void 0:i.defaultValue,o.isPointerInSelect=!1,o.select=o.appendChild(new ws({className:"select",style:{cursor:"pointer",width:0,height:0}})),o.dropdown=o.appendChild(new ws({className:"dropdown"}));var s=o.style.defaultValue;return s&&(!((a=o.style.options)===null||a===void 0)&&a.some(function(l){return l.value===s}))&&(o.currentValue=s),o}return e.prototype.setValue=function(r){this.currentValue=r,this.render()},e.prototype.getValue=function(){return this.currentValue},Object.defineProperty(e.prototype,"dropdownPadding",{get:function(){return Ss(this.style.dropdownPadding)},enumerable:!1,configurable:!0}),e.prototype.renderSelect=function(){var r=this,i,a=this.style,o=a.x,s=a.y,l=a.width,c=a.height,u=a.bordered,d=a.showDropdownIcon,f=Qn(this.attributes,"select"),h=Qn(this.attributes,"placeholder");this.select.attr(xt(xt({x:o,y:s,width:l,height:c},f),{fill:"#fff",strokeWidth:u?1:0}));var p=this.dropdownPadding,g=10;d&&un(this.select).maybeAppend(".dropdown-icon","path").style("d","M-5,-3.5 L0,3.5 L5,-3.5").style("transform","translate(".concat(o+l-g-p[1]-p[3],", ").concat(s+c/2,")")).style("lineWidth",1).style("stroke",this.select.style.stroke);var m=(i=this.style.options)===null||i===void 0?void 0:i.find(function(x){return x.value===r.currentValue}),v=xt({x:o+p[3]},h);un(this.select).selectAll(".placeholder").data(m?[]:[1]).join(function(x){return x.append("text").attr("className","placeholder").styles(v).style("y",function(){var _=this.getBBox();return s+(c-_.height)/2})},function(x){return x.styles(v)},function(x){return x.remove()});var y=Qn(this.attributes,"optionLabel"),b=xt({x:o+p[3]},y);un(this.select).selectAll(".value").data(m?[m]:[]).join(function(x){return x.append(function(_){return Fp(_.label)}).attr("className","value").styles(b).style("y",function(){var _=this.getBBox();return s+(c-_.height)/2})},function(x){return x.styles(b)},function(x){return x.remove()})},e.prototype.renderDropdown=function(){var r=this,i,a,o=this.style,s=o.x,l=o.y,c=o.width,u=o.height,d=o.options,f=o.onSelect,h=o.open,p=Qn(this.attributes,"dropdown"),g=Qn(this.attributes,"option"),m=this.dropdownPadding;un(this.dropdown).maybeAppend(".dropdown-container","g").attr("className","dropdown-container").selectAll(".dropdown-item").data(d,function(b){return b.value}).join(function(b){return b.append(function(x){return new BMt({className:"dropdown-item",style:xt(xt(xt({},x),g),{width:c-m[1]-m[3],selected:x.value===r.currentValue,onClick:function(_,S,M){r.setValue(_),f==null||f(_,S,M),r.dispatchEvent(new so("change",{detail:{value:_,option:S,item:M}})),$d(r.dropdown)}})})}).each(function(x,_){var S,M=(S=this.parentNode)===null||S===void 0?void 0:S.children,E=M.reduce(function(T,P,A){return A<_&&(T+=P.getBBox().height),T},0);this.attr("transform","translate(".concat(m[3],", ").concat(m[0]+E,")"))})},function(b){return b.update(function(x){return{selected:x.value===r.currentValue}})},function(b){return b.remove()});var v=(a=(i=this.dropdown.getElementsByClassName("dropdown-container"))===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.getBBox(),y=p.spacing;this.dropdown.attr(xt({transform:"translate(".concat(s,", ").concat(l+u+y,")"),width:v.width+m[1]+m[3],height:v.height+m[0]+m[2]},p)),!h&&$d(this.dropdown)},e.prototype.render=function(){this.renderSelect(),this.renderDropdown()},e.prototype.bindEvents=function(){var r=this;this.addEventListener("click",function(i){i.stopPropagation()}),this.select.addEventListener("click",function(){r.dropdown.style.visibility==="visible"?$d(r.dropdown):UM(r.dropdown)}),this.addEventListener("pointerenter",function(){r.isPointerInSelect=!0}),this.addEventListener("pointerleave",function(){r.isPointerInSelect=!1}),document==null||document.addEventListener("click",function(){r.isPointerInSelect||$d(r.dropdown)})},e.defaultOptions={style:{x:0,y:0,width:140,height:32,options:[],bordered:!0,defaultValue:"",selectRadius:8,selectStroke:"#d9d9d9",showDropdownIcon:!0,placeholderText:"请选择",placeholderFontSize:12,placeholderTextBaseline:"top",placeholderFill:"#c2c2c2",dropdownFill:"#fff",dropdownStroke:"#d9d9d9",dropdownRadius:8,dropdownShadowBlur:4,dropdownShadowColor:"rgba(0, 0, 0, 0.08)",dropdownPadding:8,dropdownSpacing:10,optionPadding:[8,12],optionFontSize:12,optionTextBaseline:"top",optionBackgroundFill:"#fff",optionBackgroundRadius:4,optionLabelFontSize:12,optionLabelTextBaseline:"top"}},e}(Ba),df=function(n){br(e,n);function e(r){var i=n.call(this,ns({},{style:{backgroundOpacity:e.backgroundOpacities.default}},e.defaultOptions,r))||this;return i.showBackground=!0,i.background=i.appendChild(new ws({})),i.icon=i.appendChild(new Bo({})),i}return Object.defineProperty(e.prototype,"label",{get:function(){return"BaseIcon"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return Math.log10(this.attributes.size)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return Ss(this.attributes.size/5)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconSize",{get:function(){var r=this.attributes.size,i=he(this.padding,4),a=i[0],o=i[1],s=i[2],l=i[3];return Math.max(r-Math.max(l+o,a+s),this.lineWidth*2+1)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var r=this.attributes,i=r.x,a=r.y,o=r.size,s=o/2,l=Qn(this.attributes,"background");this.background.attr(xt({x:i-s,y:a-s,width:o,height:o},l))},e.prototype.showIndicator=function(){if(this.label){var r=this.attributes.size,i=this.background.getBBox(),a=i.x,o=i.y;this.indicator.update({x:a+r/2,y:o-5,labelText:this.label,visibility:"visible"})}},e.prototype.hideIndicator=function(){this.indicator.update({visibility:"hidden"})},e.prototype.connectedCallback=function(){var r;n.prototype.connectedCallback.call(this);var i=this.attributes.size,a=this.background.getBBox(),o=a.x,s=a.y,l=(r=this.ownerDocument)===null||r===void 0?void 0:r.defaultView;l&&(this.indicator=l.appendChild(new kMt({style:{x:o+i/2,y:s-i/2,visibility:"hidden",position:"top",radius:3,zIndex:100}})))},e.prototype.disconnectedCallback=function(){this.indicator.destroy()},e.prototype.render=function(){this.renderIcon(),this.showBackground&&this.renderBackground()},e.prototype.bindEvents=function(){var r=this,i=this.attributes.onClick;if(this.addEventListener("click",function(){i==null||i(r)}),this.showBackground){var a=function(){return r.background.attr({opacity:e.backgroundOpacities.default})},o=function(){return r.background.attr({opacity:e.backgroundOpacities.hover})},s=function(){return r.background.attr({opacity:e.backgroundOpacities.active})};this.addEventListener("pointerenter",function(){o(),r.showIndicator()}),this.addEventListener("pointerleave",function(){a(),r.hideIndicator()}),this.addEventListener("pointerdown",function(){s()}),this.addEventListener("pointerup",function(){a()})}},e.tag="IconBase",e.defaultOptions={style:{x:0,y:0,size:10,color:"#565758",backgroundRadius:4,backgroundFill:"#e2e2e2"}},e.backgroundOpacities={default:0,hover:.8,active:1},e}(Ba),uC=function(n,e){return e===void 0&&(e="#565758"),new Lc({style:{fill:e,d:"M ".concat(n,",").concat(n," L -").concat(n,",0 L ").concat(n,",-").concat(n," Z"),transformOrigin:"center"}})},UMt=function(n){br(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.arcPath=function(r,i,a){var o=he([a,a],2),s=o[0],l=o[1],c=function(m){return[r+a*Math.cos(m),i+a*Math.sin(m)]},u=he(c(-5/4*Math.PI),2),d=u[0],f=u[1],h=he(c(1/4*Math.PI),2),p=h[0],g=h[1];return"M".concat(d,",").concat(f,",A").concat(s,",").concat(l,",0,1,1,").concat(p,",").concat(g)},Object.defineProperty(e.prototype,"label",{get:function(){return"重置"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var r=this.attributes,i=r.x,a=r.y,o=r.color,s=this.iconSize,l=this.lineWidth,c=l+.5;un(this.icon).maybeAppend(".reset","path").styles({stroke:o,lineWidth:l,d:this.arcPath(i,a,s/2-l),markerStart:uC(c,o)})},e}(df),VMt=function(n){br(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return"快退"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var r=this.attributes,i=r.x,a=r.y,o=r.color,s=this.iconSize,l=s/2,c=s/2/Math.pow(3,.5),u=[[i,a],[i,a-c],[i-l,a],[i,a+c],[i,a],[i+l,a-c],[i+l,a+c],[i,a]];un(this.icon).maybeAppend(".backward","polygon").styles({points:u,fill:o})},e}(df),GMt=function(n){br(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return"快进"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var r=this.attributes,i=r.x,a=r.y,o=r.color,s=this.iconSize,l=s/2,c=s/2/Math.pow(3,.5),u=[[i,a],[i,a-c],[i+l,a],[i,a+c],[i,a],[i-l,a-c],[i-l,a+c],[i,a]];un(this.icon).maybeAppend(".forward","polygon").styles({points:u,fill:o})},e}(df),jMt=function(n){br(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return"播放"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var r=this.attributes,i=r.x,a=r.y,o=r.color,s=this.iconSize,l=s/3*Math.pow(3,.5)*.8,c=[[i+l,a],[i-l/2,a-s/2*.8],[i-l/2,a+s/2*.8],[i+l,a]];un(this.icon).maybeAppend(".play","polygon").styles({points:c,fill:o})},e}(df),HMt=function(n){br(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return"暂停"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var r=this.attributes,i=r.x,a=r.y,o=r.color,s=this.iconSize,l=s/3,c=[[i-l,a-s/2],[i-l,a+s/2],[i-l/2,a+s/2],[i-l/2,a-s/2],[i-l,a-s/2],[i+l/2,a-s/2],[i+l/2,a+s/2],[i+l,a+s/2],[i+l,a-s/2]];un(this.icon).maybeAppend(".pause","polygon").styles({points:c,fill:o})},e}(df),WMt=function(n){br(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return"范围时间"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var r=this.attributes,i=r.x,a=r.y,o=r.color,s=this,l=s.iconSize,c=s.lineWidth,u=c;un(this.icon).maybeAppend(".left-line","line").styles({x1:i-l/2,y1:a-l/2,x2:i-l/2,y2:a+l/2,stroke:o,lineWidth:c}),un(this.icon).maybeAppend(".right-line","line").styles({x1:i+l/2,y1:a-l/2,x2:i+l/2,y2:a+l/2,stroke:o,lineWidth:c}),un(this.icon).maybeAppend(".left-arrow","line").styles({x1:i,y1:a,x2:i-l/2+u*2,y2:a,stroke:o,lineWidth:c,markerEnd:uC(c*2,o)}),un(this.icon).maybeAppend(".right-arrow","line").styles({x1:i,y1:a,x2:i+l/2-u*2,y2:a,stroke:o,lineWidth:c,markerEnd:uC(c*2,o)})},e}(df),qMt=function(n){br(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return"单一时间"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var r=this.attributes,i=r.x,a=r.y,o=r.color,s=this,l=s.iconSize,c=s.lineWidth;un(this.icon).maybeAppend(".line","line").styles({x1:i,y1:a-l/2,x2:i,y2:a+l/2,stroke:o,lineWidth:c});var u=c;un(this.icon).maybeAppend(".left-arrow","line").styles({x1:i-l/2-u*2,y1:a,x2:i-u*2,y2:a,stroke:o,lineWidth:c,markerEnd:uC(c*2,o)}),un(this.icon).maybeAppend(".right-arrow","line").styles({x1:i+l/2+u*2,y1:a,x2:i+u*2,y2:a,stroke:o,lineWidth:c,markerEnd:uC(c*2,o)})},e}(df),D3e=function(n){return[[-n/2,-n/2],[-n/2,n/2],[n/2,n/2]]},YMt=function(n){br(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return"折线图"},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var r=this.attributes,i=r.x,a=r.y,o=r.color,s=this,l=s.iconSize,c=s.lineWidth,u=c,d=(l-u*2-c)/4,f=(l-u*2-c)/2,h=he([i-l/2+u,a+l/2-u*2],2),p=h[0],g=h[1];un(this.icon).maybeAppend(".coordinate","polyline").styles({points:D3e(l).map(function(m){var v=he(m,2),y=v[0],b=v[1];return[y+i,b+a]}),stroke:o,lineWidth:c}),un(this.icon).maybeAppend(".line","polyline").styles({points:[[p,g],[p+d,g-f],[p+d*2,g],[p+d*4,g-f*2]],stroke:o,lineWidth:c})},e}(df),XMt=function(n){br(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return"条形图"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return[1,4,2,4,3]},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var r=this.data,i=this.attributes,a=i.x,o=i.y,s=i.color,l=this,c=l.iconSize,u=l.lineWidth,d=u,f=(c-d)/r.length,h=(c-d*2)/4,p=he([a-c/2+d*2,o+c/2-d],2),g=p[0],m=p[1];un(this.icon).maybeAppend(".coordinate","polyline").styles({points:D3e(c).map(function(v){var y=he(v,2),b=y[0],x=y[1];return[b+a,x+o]}),stroke:s,lineWidth:u}),un(this.icon).maybeAppend(".bars","g").selectAll(".column").data(this.data.map(function(v,y){return{value:v,index:y}})).join(function(v){return v.append("line").attr("className","column").style("x1",function(y){var b=y.index;return g+f*b}).style("y1",m).style("x2",function(y){var b=y.index;return g+f*b}).style("y2",function(y){var b=y.value;return m-h*b}).styles({y1:m,stroke:s,lineWidth:u})})},e}(df),KMt=function(n){br(e,n);function e(r){var i=n.call(this,ns({},{style:{color:"#d8d9d9"}},r))||this;return i.showBackground=!1,i}return e.prototype.renderIcon=function(){var r=this.attributes,i=r.x,a=r.y,o=r.color,s=this,l=s.iconSize,c=s.lineWidth;un(this.icon).maybeAppend(".split","line").styles({x1:i,y1:a-l/2,x2:i,y2:a+l/2,stroke:o,lineWidth:c})},e}(df),EH=function(n){br(e,n);function e(){var r=n.apply(this,nn([],he(arguments),!1))||this;return r.showBackground=!1,r}return Object.defineProperty(e.prototype,"padding",{get:function(){return Ss(0)},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var r=this.iconSize,i=this.attributes,a=i.x,o=i.y,s=i.speed,l=s===void 0?1:s,c=aX(this.attributes,["x","y","transform","transformOrigin","width","height","size","color","speed"]),u=Ta(r,20,1/0),d=20,f=xt(xt({},c),{x:a-u/2,y:o-d/2,width:u,height:d,defaultValue:l,bordered:!1,showDropdownIcon:!1,selectRadius:2,dropdownPadding:this.padding,dropdownRadius:2,dropdownSpacing:r/5,placeholderFontSize:r/2,optionPadding:0,optionLabelFontSize:r/2,optionBackgroundRadius:1,options:[{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}]});un(this.icon).maybeAppend(".speed",function(){return new zMt({style:f})}).attr("className","speed").each(function(){this.update(f)})},e.tag="SpeedSelect",e}(df),RK=function(n){br(e,n);function e(r){var i=n.call(this,r)||this;return i.icon=i.appendChild(new Bo({})),i.currentType=i.attributes.type,i}return e.prototype.getType=function(){return this.currentType},e.prototype.render=function(){var r=this,i=this.attributes;i.onChange;var a=$a(i,["onChange"]);un(this.icon).selectAll(".icon").data([this.currentType]).join(function(o){return o.append(function(s){var l,c=(l=r.toggles.find(function(u){var d=he(u,1),f=d[0];return f===s}))===null||l===void 0?void 0:l[1];if(!c)throw new Error("Invalid type: ".concat(s));return new c({})}).attr("className","icon").styles(a,!1).update({})},function(o){return o.styles({restStyles:a}).update({})},function(o){return o.remove()})},e.prototype.bindEvents=function(){var r=this,i=this.attributes.onChange;this.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation();var o=(r.toggles.findIndex(function(l){var c=he(l,1),u=c[0];return u===r.currentType})+1)%r.toggles.length,s=r.toggles[o][0];i==null||i(r.currentType),r.currentType=s,r.render()})},e.tag="ToggleIcon",e}(Ba),CH=function(n){br(e,n);function e(r){var i=n.call(this,ns({},{style:{type:"play"}},r))||this;return i.toggles=[["play",jMt],["pause",HMt]],i}return e}(RK),MH=function(n){br(e,n);function e(r){var i=n.call(this,ns({},{style:{type:"range"}},r))||this;return i.toggles=[["range",WMt],["value",qMt]],i}return e}(RK),TH=function(n){br(e,n);function e(r){var i=n.call(this,ns({},{style:{type:"column"}},r))||this;return i.toggles=[["line",YMt],["column",XMt]],i}return e}(RK),ZMt={reset:UMt,speed:EH,backward:VMt,playPause:CH,forward:GMt,selectionType:MH,chartType:TH,split:KMt},QMt=function(n){br(e,n);function e(r){var i=n.call(this,ns({},e.defaultOptions,r))||this;return i.background=i.appendChild(new ws({})),i.functions=i.appendChild(new Bo({})),i}return Object.defineProperty(e.prototype,"padding",{get:function(){return Ss(this.attributes.padding)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var r=this.style,i=r.x,a=r.y,o=r.width,s=r.height,l=Qn(this.attributes,"background");this.background.attr(xt({x:i,y:a,width:o,height:s},l))},e.prototype.renderFunctions=function(){var r=this,i,a=this.attributes,o=a.functions,s=a.iconSize,l=a.iconSpacing,c=a.x,u=a.y,d=a.width,f=a.height,h=a.align,p=he(this.padding,4),g=p[1],m=p[3],v=o.reduce(function(x,_){return x.length&&_.length?x.concat.apply(x,nn(["split"],he(_),!1)):x.concat.apply(x,nn([],he(_),!1))},[]),y=v.length*(s+l)-l,b={left:m+s/2,center:(d-y)/2+s/2,right:d-y-m-g+s/2}[h]||0;(i=this.speedSelect)===null||i===void 0||i.destroy(),this.functions.removeChildren(),v.forEach(function(x,_){var S,M=ZMt[x],E={x:c+_*(s+l)+b,y:u+f/2,size:s};if(M===EH?(E.speed=r.attributes.speed,E.onSelect=function(P){return r.handleFunctionChange(x,{value:P})}):[CH,MH,TH].includes(M)?(E.onChange=function(P){return r.handleFunctionChange(x,{value:P})},M===CH&&(E.type=r.attributes.state==="play"?"pause":"play"),M===MH&&(E.type=r.attributes.selectionType==="range"?"value":"range"),M===TH&&(E.type=r.attributes.chartType==="line"?"column":"line")):E.onClick=function(){return r.handleFunctionChange(x,{value:x})},M===EH){var T=(S=r.ownerDocument)===null||S===void 0?void 0:S.defaultView;T&&(r.speedSelect=new M({style:xt(xt({},E),{zIndex:100})}),T.appendChild(r.speedSelect))}else r.functions.appendChild(new M({style:E}))})},e.prototype.disconnectedCallback=function(){var r;n.prototype.disconnectedCallback.call(this),(r=this.speedSelect)===null||r===void 0||r.destroy()},e.prototype.render=function(){this.renderBackground(),this.renderFunctions()},e.prototype.handleFunctionChange=function(r,i){var a=this.attributes.onChange;a==null||a(r,i)},e.defaultOptions={style:{x:0,y:0,width:300,height:40,padding:0,align:"center",iconSize:25,iconSpacing:0,speed:1,state:"pause",chartType:"line",selectionType:"range",backgroundFill:"#fbfdff",backgroundStroke:"#ebedf0",functions:[["reset","speed"],["backward","playPause","forward"],["selectionType","chartType"]]}},e}(Ba),JMt=function(n){br(e,n);function e(r){var i=n.call(this,ns({},e.defaultOptions,r))||this;return i.bindEvents(),i}return e.prototype.bindEvents=function(){var r=this;this.addEventListener("mouseenter",function(){r.attr("lineWidth",Math.ceil(+(r.style.r||0)/2))}),this.addEventListener("mouseleave",function(){r.attr("lineWidth",0)})},e.defaultOptions={style:{r:5,fill:"#3f7cf7",lineWidth:0,stroke:"#3f7cf7",strokeOpacity:.5,cursor:"pointer"}},e}(qp),eTt=function(n){br(e,n);function e(r){return n.call(this,ns({},e.defaultOptions,r))||this}return e.prototype.renderBackground=function(){var r=this.attributes,i=r.x,a=r.y,o=r.width,s=r.height,l=Qn(this.attributes,"background");un(this).maybeAppend("background","rect").attr("className","background").styles(xt({x:i-o/2,y:a-s/2,width:o,height:s},l))},e.prototype.renderIcon=function(){var r=this.attributes,i=r.x,a=r.y,o=r.iconSize,s=Qn(this.attributes,"icon"),l=1,c=o/2;un(this).maybeAppend("icon-left-line","line").attr("className","icon-left-line").styles(xt({x1:i-l,y1:a-c,x2:i-l,y2:a+c},s)),un(this).maybeAppend("icon-right-line","line").attr("className","icon-right-line").styles(xt({x1:i+l,y1:a-c,x2:i+l,y2:a+c},s))},e.prototype.renderBorder=function(){var r=this.attributes,i=r.x,a=r.y,o=r.width,s=r.height,l=r.type,c=Qn(this.attributes,"border"),u=l==="start"?+o/2:-o/2;un(this).maybeAppend("border","line").attr("className","border").styles(xt({x1:u+i,y1:a-s/2,x2:u+i,y2:a+s/2},c))},e.prototype.render=function(){this.renderBackground(),this.renderIcon(),this.renderBorder()},e.defaultOptions={style:{x:0,y:0,width:10,height:50,iconSize:10,type:"start",backgroundFill:"#fff",backgroundFillOpacity:.5,iconStroke:"#9a9a9a",iconLineWidth:1,borderStroke:"#e8e8e8",borderLineWidth:1}},e}(Ba);function tTt(n,e){return typeof n=="number"?L3e(n):nTt(n,e)}function nTt(n,e){var r=new Date(n);switch(e){case"half-hour":case"hour":case"four-hour":return[0,6,12,18].includes(r.getHours())&&r.getMinutes()===0?Il(r,`HH:mm
YYYY-MM-DD`):Il(r,"HH:mm");case"half-day":return r.getHours()<12?`AM
`.concat(Il(r,"YYYY-MM-DD")):"PM";case"day":return[1,10,20].includes(r.getDate())?Il(r,`DD
YYYY-MM`):Il(r,"DD");case"week":return r.getDate()<=7?Il(r,`DD
YYYY-MM`):Il(r,"DD");case"month":return[0,6].includes(r.getMonth())?Il(r,`MM月
YYYY`):Il(r,"MM月");case"season":return[0].includes(r.getMonth())?Il(r,`MM月
YYYY`):Il(r,"MM月");case"year":return Il(r,"YYYY");default:return Il(r,"YYYY-MM-DD HH:mm")}}function L3e(n){var e=String(Math.floor(n/3600)).padStart(2,"0"),r=String(Math.floor(n%3600/60)).padStart(2,"0"),i=String(Math.floor(n%60)).padStart(2,"0");return n<3600?"".concat(r,":").concat(i):"".concat(e,":").concat(r,":").concat(i)}var rTt=function(n){br(e,n);function e(r){var i=n.call(this,ns({},e.defaultOptions,r))||this;i.axis=i.appendChild(new CMt({style:{type:"linear",startPos:[0,0],endPos:[0,0],data:[],showArrow:!1,animate:!1}})),i.timeline=i.appendChild(new SCt({style:{onChange:function(f){i.handleSliderChange(f)}}})),i.controller=i.appendChild(new QMt({})),i.states={},i.handleSliderChange=function(f){var h=function(){var p=i.states.values;return Array.isArray(p)?nn([],he(p),!1):p}();i.setBySliderValues(f),i.dispatchOnChange(h)};var a=i.attributes,o=a.selectionType,s=a.chartType,l=a.speed,c=a.state,u=a.playMode,d=a.values;return i.states={chartType:s,playMode:u,selectionType:o,speed:l,state:c},i.setByTimebarValues(d),i}return Object.defineProperty(e.prototype,"data",{get:function(){var r=this.attributes.data,i=function(a,o){return a.time<o.time?-1:a.time>o.time?1:0};return r.sort(i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"space",{get:function(){var r=this.attributes,i=r.x,a=r.y,o=r.width,s=r.height,l=r.type,c=r.controllerHeight,u=Ta(+s-c,0,+s),d=new pl(i,a+ +s-c,+o,c),f,h=0;l==="chart"?(h=35,f=new pl(i,a+u-h,+o,h)):f=new pl;var p=l==="time"?10:u,g=new pl(i,a+(l==="time"?u:u-p),+o,p-h);return{axisBBox:f,controllerBBox:d,timelineBBox:g}},enumerable:!1,configurable:!0}),e.prototype.setBySliderValues=function(r){var i,a,o=this.data,s=he(Array.isArray(r)?r:[0,r],2),l=s[0],c=s[1],u=o.length,d=o[Math.floor(l*u)],f=o[Math.ceil(c*u)-(Array.isArray(r)?0:1)];this.states.values=[(i=d==null?void 0:d.time)!==null&&i!==void 0?i:o[0].time,(a=f==null?void 0:f.time)!==null&&a!==void 0?a:1/0]},e.prototype.setByTimebarValues=function(r){var i,a,o,s=this.data,l=he(Array.isArray(r)?r:[void 0,r],2),c=l[0],u=l[1],d=s.find(function(h){var p=h.time;return p===c}),f=s.find(function(h){var p=h.time;return p===u});this.states.values=[(i=d==null?void 0:d.time)!==null&&i!==void 0?i:(a=s[0])===null||a===void 0?void 0:a.time,(o=f==null?void 0:f.time)!==null&&o!==void 0?o:1/0]},e.prototype.setByIndex=function(r){var i,a,o,s,l=this.data,c=he(r,2),u=c[0],d=c[1];this.states.values=[(a=(i=l[u])===null||i===void 0?void 0:i.time)!==null&&a!==void 0?a:l[0].time,(s=(o=this.data[d])===null||o===void 0?void 0:o.time)!==null&&s!==void 0?s:1/0]},Object.defineProperty(e.prototype,"sliderValues",{get:function(){var r=this.states,i=r.values,a=r.selectionType,o=he(Array.isArray(i)?i:[void 0,i],2),s=o[0],l=o[1],c=this.data,u=c.length,d=a==="value",f=function(){var p=c.findIndex(function(g){var m=g.time;return m===s});return d?0:p>-1?p/u:0},h=function(){if(l===1/0)return 1;var p=c.findIndex(function(g){var m=g.time;return m===l});return p>-1?p/u:d?.5:1};return[f(),h()]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var r=this.states,i=r.values,a=r.selectionType,o=he(Array.isArray(i)?i:[this.data[0].time,i],2),s=o[0],l=o[1];return a==="value"?l:[s,l]},enumerable:!1,configurable:!0}),e.prototype.getDatumByRatio=function(r){var i=this.data,a=i.length,o=Math.floor(r*(a-1));return i[o]},Object.defineProperty(e.prototype,"chartHandleIconShape",{get:function(){var r=this.states.selectionType,i=this.space.timelineBBox.height;return r==="range"?function(a){return new eTt({style:{type:a,height:i,iconSize:i/6}})}:function(){return new yy({style:{x1:0,y1:-i/2,x2:0,y2:i/2,lineWidth:2,stroke:"#c8c8c8"}})}},enumerable:!1,configurable:!0}),e.prototype.getChartStyle=function(r){var i=this,a=r.x,o=r.y,s=r.width,l=r.height,c=this.states,u=c.selectionType,d=c.chartType,f=this.data,h=this.attributes,p=h.type,g=h.labelFormatter,m=Qn(this.attributes,"chart");m.type;var v=$a(m,["type"]),y=u==="range";if(p==="time")return xt({handleIconShape:function(){return new JMt({})},selectionFill:"#2e7ff8",selectionFillOpacity:1,showLabelOnInteraction:!0,handleLabelDy:y?-15:0,autoFitLabel:y,handleSpacing:y?-15:0,trackFill:"#edeeef",trackLength:s,trackOpacity:.5,trackRadius:l/2,trackSize:l/2,type:u,values:this.sliderValues,formatter:function(_){if(g)return g(_);var S=i.getDatumByRatio(_).time;return typeof S=="number"?L3e(S):Il(S,"YYYY-MM-DD HH:mm:ss")},transform:"translate(".concat(a,", ").concat(o,")"),zIndex:1},v);var b=u==="range"?5:0,x=f.map(function(_){var S=_.value;return S});return xt({handleIconOffset:b,handleIconShape:this.chartHandleIconShape,selectionFill:"#fff",selectionFillOpacity:.5,selectionType:"invert",sparklineSpacing:.1,sparklineColumnLineWidth:0,sparklineColor:"#d4e5fd",sparklineAreaOpacity:1,sparklineAreaLineWidth:0,sparklineData:x,sparklineType:d,sparklineScale:.8,trackLength:s,trackSize:l,type:u,values:this.sliderValues,transform:"translate(".concat(a,", ").concat(o,")"),zIndex:1},v)},e.prototype.renderChart=function(r){r===void 0&&(r=this.space.timelineBBox),this.timeline.update(this.getChartStyle(r))},e.prototype.updateSelection=function(){this.timeline.setValues(this.sliderValues,!0),this.handleSliderChange(this.sliderValues)},e.prototype.getAxisStyle=function(r){var i=this.data,a=this.attributes,o=a.interval,s=a.labelFormatter,l=Qn(this.attributes,"axis"),c=r.x,u=r.y,d=r.width,f=nn(nn([],he(i),!1),[{time:0}],!1).map(function(p,g,m){var v=p.time;return{label:"".concat(v),value:g/(m.length-1),time:v}}),h=xt({startPos:[c,u],endPos:[c+d,u],data:f,labelFilter:function(p,g){return g<f.length-1},labelFormatter:function(p){var g=p.time;return s?s(g):tTt(g,o)}},l);return h},e.prototype.renderAxis=function(r){r===void 0&&(r=this.space.axisBBox);var i=this.attributes.type;i==="chart"&&this.axis.update(this.getAxisStyle(r))},e.prototype.renderController=function(r){r===void 0&&(r=this.space.controllerBBox);var i=this.attributes.type,a=this.states,o=a.state,s=a.speed,l=a.selectionType,c=a.chartType,u=Qn(this.attributes,"controller"),d=this,f=xt(xt(xt({},r),{iconSize:20,speed:s,state:o,selectionType:l,chartType:c,onChange:function(h,p){var g=p.value;switch(h){case"reset":d.internalReset();break;case"speed":d.handleSpeedChange(g);break;case"backward":d.internalBackward();break;case"playPause":g==="play"?d.internalPlay():d.internalPause();break;case"forward":d.internalForward();break;case"selectionType":d.handleSelectionTypeChange(g);break;case"chartType":d.handleChartTypeChange(g);break}}}),u);i==="time"&&(f.functions=[["reset","speed"],["backward","playPause","forward"],["selectionType"]]),this.controller.update(f)},e.prototype.dispatchOnChange=function(r){var i=this.data,a=this.attributes.onChange,o=this.states,s=o.values,l=o.selectionType,c=he(s,2),u=c[0],d=c[1],f=d===1/0?i.at(-1).time:d,h=l==="range"?[u,f]:f,p=function(g,m){return Array.isArray(g)?Array.isArray(m)?g[0]===m[0]&&(g[1]===m[1]||g[1]===1/0||m[1]===1/0):!1:Array.isArray(m)?!1:g===m};(!r||!p(r,h))&&(a==null||a(l==="range"?[u,f]:f))},e.prototype.internalReset=function(r){var i,a,o=this.states.selectionType;this.internalPause(),this.setBySliderValues(o==="range"?[0,1]:[0,0]),this.renderController(),this.updateSelection(),r||((a=(i=this.attributes)===null||i===void 0?void 0:i.onReset)===null||a===void 0||a.call(i),this.dispatchOnChange())},e.prototype.reset=function(){this.internalReset()},e.prototype.moveSelection=function(r,i){var a=this.data,o=a.length,s=this.states,l=s.values,c=s.selectionType,u=s.playMode,d=he(l,2),f=d[0],h=d[1],p=a.findIndex(function(x){var _=x.time;return _===f}),g=a.findIndex(function(x){var _=x.time;return _===h});g===-1&&(g=o);var m=r==="backward"?-1:1,v;c==="range"?u==="acc"?(v=[p,g+m],m===-1&&p===g&&(v=[p,o])):v=[p+m,g+m]:v=[p,g+m];var y=function(x){var _=he(x.sort(function(T,P){return T-P}),2),S=_[0],M=_[1],E=function(T){return Ta(T,0,o)};return M>o?c==="value"?[0,0]:u==="acc"?[E(S),E(S)]:[0,E(M-S)]:S<0?u==="acc"?[0,E(M)]:[E(S+o-M),o]:[E(S),E(M)]},b=y(v);return this.setByIndex(b),this.updateSelection(),b},e.prototype.internalBackward=function(r){var i,a,o=this.moveSelection("backward",r);return r||((a=(i=this.attributes)===null||i===void 0?void 0:i.onBackward)===null||a===void 0||a.call(i),this.dispatchOnChange()),o},e.prototype.backward=function(){this.internalBackward()},e.prototype.internalPlay=function(r){var i=this,a,o,s=this.data,l=this.attributes.loop,c=this.states.speed,u=c===void 0?1:c;this.playInterval=window.setInterval(function(){var d=i.internalForward();d[1]===s.length&&!l&&(i.internalPause(),i.renderController())},1e3/u),this.states.state="play",!r&&((o=(a=this.attributes)===null||a===void 0?void 0:a.onPlay)===null||o===void 0||o.call(a))},e.prototype.play=function(){this.internalPlay()},e.prototype.internalPause=function(r){var i,a;clearInterval(this.playInterval),this.states.state="pause",!r&&((a=(i=this.attributes)===null||i===void 0?void 0:i.onPause)===null||a===void 0||a.call(i))},e.prototype.pause=function(){this.internalPause()},e.prototype.internalForward=function(r){var i,a,o=this.moveSelection("forward",r);return r||((a=(i=this.attributes)===null||i===void 0?void 0:i.onForward)===null||a===void 0||a.call(i),this.dispatchOnChange()),o},e.prototype.forward=function(){this.internalForward()},e.prototype.handleSpeedChange=function(r){var i,a;this.states.speed=r;var o=this.states.state;o==="play"&&(this.internalPause(!0),this.internalPlay(!0)),(a=(i=this.attributes)===null||i===void 0?void 0:i.onSpeedChange)===null||a===void 0||a.call(i,r)},e.prototype.handleSelectionTypeChange=function(r){var i,a;this.states.selectionType=r,this.renderChart(),(a=(i=this.attributes)===null||i===void 0?void 0:i.onSelectionTypeChange)===null||a===void 0||a.call(i,r)},e.prototype.handleChartTypeChange=function(r){var i,a;this.states.chartType=r,this.renderChart(),(a=(i=this.attributes)===null||i===void 0?void 0:i.onChartTypeChange)===null||a===void 0||a.call(i,r)},e.prototype.render=function(){var r=this.space,i=r.axisBBox,a=r.controllerBBox,o=r.timelineBBox;this.renderController(a),this.renderAxis(i),this.renderChart(o),this.states.state==="play"&&this.internalPlay()},e.prototype.destroy=function(){n.prototype.destroy.call(this),this.internalPause(!0)},e.defaultOptions={style:{x:0,y:0,axisLabelFill:"#6e6e6e",axisLabelTextAlign:"left",axisLabelTextBaseline:"top",axisLabelTransform:"translate(5, -12)",axisLineLineWidth:1,axisLineStroke:"#cacdd1",axisTickLength:15,axisTickLineWidth:1,axisTickStroke:"#cacdd1",chartShowLabel:!1,chartType:"line",controllerAlign:"center",controllerHeight:40,data:[],interval:"day",loop:!1,playMode:"acc",selectionType:"range",type:"time"}},e}(Ba);function PK(n){const{width:e,height:r,renderer:i}=n,a=iTt(n),o=new Fj({width:e,height:r,container:a,renderer:i||new nC});return[a,o]}function iTt(n){var e;const{container:r,className:i,graphCanvas:a}=n;if(r)return typeof r=="string"?document.getElementById(r):r;const o=rw(i,!1),{width:s,height:l,containerStyle:c}=n,[u,d]=aTt(n);return Object.assign(o.style,Object.assign({position:"absolute",left:u+"px",top:d+"px",width:s+"px",height:l+"px"},c)),(e=a.getContainer())===null||e===void 0||e.appendChild(o),o}function aTt(n){const{width:e,height:r,placement:i,graphCanvas:a}=n,[o,s]=a.getSize(),[l,c]=FEe(i);return[l*(o-e),c*(s-r)]}var oTt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};class fL extends Cs{constructor(e,r){super(e,Object.assign({},fL.defaultOptions,r)),this.typePrefix="__data__",this.draw=!1,this.fieldMap={node:new Map,edge:new Map,combo:new Map},this.selectedItems=[],this.bindEvents=()=>{const{graph:i}=this.context;i.on(Ut.AFTER_DRAW,this.createElement)},this.changeState=(i,a)=>{const{graph:o}=this.context,{typePrefix:s}=this,l=cl(i,[s,"id"]),c=cl(i,[s,"style","labelText"]),[u]=l.split("__"),d=this.fieldMap[u].get(c)||[];o.setElementState(Object.fromEntries(d==null?void 0:d.map(f=>[f,a])))},this.click=i=>{if(this.options.trigger==="hover")return;const a=cl(i,[this.typePrefix,"id"]);this.selectedItems.includes(a)?(this.selectedItems=this.selectedItems.filter(o=>o!==a),this.changeState(i,[])):(this.selectedItems.push(a),this.changeState(i,"selected"))},this.mouseleave=i=>{this.options.trigger!=="click"&&(this.selectedItems=[],this.changeState(i,[]))},this.mouseenter=i=>{if(this.options.trigger==="click")return;const a=cl(i,[this.typePrefix,"id"]);this.selectedItems.includes(a)?this.selectedItems=this.selectedItems.filter(o=>o!==a):(this.selectedItems.push(a),this.changeState(i,"active"))},this.setFieldMap=(i,a,o)=>{if(!i)return;const s=this.fieldMap[o];if(s)if(!s.has(i))s.set(i,[a]);else{const l=s.get(i);l&&(l.push(a),s.set(i,l))}},this.getEvents=()=>({mouseenter:this.mouseenter,mouseleave:this.mouseleave,click:this.click}),this.getMarkerData=(i,a)=>{if(!i)return[];const{model:o,element:s}=this.context,{nodes:l,edges:c,combos:u}=o.getData(),d={},f=v=>cn(i)?i(v):i,h={node:"circle",edge:"line",combo:"rect"},p={circle:"circle",ellipse:"circle",image:"bowtie",rect:"square",star:"cross",triangle:"triangle",diamond:"diamond",cubic:"dot",line:"hyphen",polyline:"hyphen",quadratic:"hv","cubic-horizontal":"hyphen","cubic-vertical":"line"},g=(v,y)=>s==null?void 0:s.getElementComputedStyle(v,y),m=(v,y)=>{v.forEach(b=>{const{id:x}=b,_=cl(b,["data",f(b)]),S=(s==null?void 0:s.getElementType(y,b))||"circle",M=g(y,b),E=(y==="edge"?M==null?void 0:M.stroke:M==null?void 0:M.fill)||"#1783ff";x&&_&&_.replace(/\s+/g,"")&&(this.setFieldMap(_,x,y),d[_]||(d[_]={id:`${y}__${x}`,label:_,marker:p[S]||h[y],elementType:y,lineWidth:1,stroke:E,fill:E}))})};switch(a){case"node":m(l,"node");break;case"edge":m(c,"edge");break;case"combo":m(u,"combo");break;default:return[]}return Object.values(d)},this.createElement=()=>{if(this.draw){this.updateElement();return}const i=this.options,{width:a,height:o,nodeField:s,edgeField:l,comboField:c,trigger:u,position:d,container:f,containerStyle:h,className:p}=i,g=oTt(i,["width","height","nodeField","edgeField","comboField","trigger","position","container","containerStyle","className"]),m=this.getMarkerData(s,"node"),v=this.getMarkerData(l,"edge"),y=this.getMarkerData(c,"combo"),b=[...m,...y,...v],x=Object.assign({width:a,height:o,data:b,itemMarkerLineWidth:({lineWidth:M})=>M,itemMarker:({marker:M})=>M,itemMarkerStroke:({stroke:M})=>M,itemMarkerFill:({fill:M})=>M,gridCol:m.length},g,this.getEvents()),_=new DMt({className:"legend",style:x});this.category=_,this.upsertCanvas().appendChild(_),this.draw=!0},this.bindEvents()}update(e){super.update(e),this.clear(),this.createElement()}clear(){var e,r;(e=this.canvas)===null||e===void 0||e.destroy(),(r=this.container)===null||r===void 0||r.remove(),this.canvas=void 0,this.container=void 0,this.draw=!1}updateElement(){this.category&&this.category.update({itemMarkerOpacity:({id:e})=>!this.selectedItems.length||this.selectedItems.includes(e)?1:.5,itemLabelOpacity:({id:e})=>!this.selectedItems.length||this.selectedItems.includes(e)?1:.5})}upsertCanvas(){if(this.canvas)return this.canvas;const e=this.context.canvas,[r,i]=e.getSize(),{width:a=r,height:o=i,position:s,container:l,containerStyle:c,className:u}=this.options,[d,f]=PK({width:a,height:o,graphCanvas:e,container:l,containerStyle:c,placement:s,className:"legend"});return this.container=d,u&&d.classList.add(u),this.canvas=f,this.canvas}destroy(){this.clear(),this.context.graph.off(Ut.AFTER_DRAW,this.createElement),super.destroy()}}fL.defaultOptions={position:"bottom",trigger:"hover",orientation:"horizontal",layout:"flex",itemSpacing:4,rowPadding:10,colPadding:10,itemMarkerSize:16,itemLabelFontSize:16,width:240,height:160};class hL extends Cs{constructor(e,r){super(e,Object.assign({},hL.defaultOptions,r)),this.onDraw=i=>{var a;!((a=i==null?void 0:i.data)===null||a===void 0)&&a.render||this.onRender()},this.shapes=new Map,this.landmarkMap=new Map,this.mask=null,this.isMaskDragging=!1,this.onMaskDragStart=i=>{this.mask&&(this.isMaskDragging=!0,this.mask.setPointerCapture(i.pointerId),this.mask.addEventListener("pointermove",this.onMaskDrag),this.mask.addEventListener("pointerup",this.onMaskDragEnd),this.mask.addEventListener("pointercancel",this.onMaskDragEnd))},this.onMaskDrag=i=>{if(!this.mask||!this.isMaskDragging)return;const{size:[a,o]}=this.options,{movementX:s,movementY:l}=i,{left:c,top:u,width:d,height:f}=this.mask.style,[,,h,p]=this.maskBBox;let g=parseInt(c)+s,m=parseInt(u)+l,v=parseInt(d),y=parseInt(f);g<0&&(g=0),m<0&&(m=0),g+v>a&&(g=xg(a-v,0)),m+y>o&&(m=xg(o-y,0)),v<h&&(s>0?(g=xg(g-s,0),v=bg(v+s,a)):s<0&&(v=bg(v-s,a))),y<p&&(l>0?(m=xg(m-l,0),y=bg(y+l,o)):l<0&&(y=bg(y-l,o))),Object.assign(this.mask.style,{left:g+"px",top:m+"px",width:v+"px",height:y+"px"});const b=parseInt(c)-g,x=parseInt(u)-m;if(b===0&&x===0)return;const _=this.context.canvas.getCamera().getZoom(),S=this.canvas.getCamera().getZoom(),M=_/S;this.context.graph.translateBy([b*M,x*M],!1)},this.onMaskDragEnd=i=>{this.mask&&(this.isMaskDragging=!1,this.mask.releasePointerCapture(i.pointerId),this.mask.removeEventListener("pointermove",this.onMaskDrag),this.mask.removeEventListener("pointerup",this.onMaskDragEnd),this.mask.removeEventListener("pointercancel",this.onMaskDragEnd))},this.onTransform=x2e(()=>{this.isMaskDragging||(this.updateMask(),this.setCamera())},32,{leading:!0}),this.setOnRender(),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),"delay"in e&&this.setOnRender(),this.bindEvents()}setOnRender(){this.onRender=xM(()=>{this.renderMinimap(),this.renderMask()},this.options.delay)}bindEvents(){const{graph:e}=this.context;e.on(Ut.AFTER_DRAW,this.onDraw),e.on(Ut.AFTER_RENDER,this.onRender),e.on(Ut.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:e}=this.context;e.off(Ut.AFTER_DRAW,this.onDraw),e.off(Ut.AFTER_RENDER,this.onRender),e.off(Ut.AFTER_TRANSFORM,this.onTransform)}renderMinimap(){const e=this.getElements(),r=this.initCanvas();this.setShapes(r,e)}getElements(){const{filter:e}=this.options,{model:r}=this.context,i=r.getData();if(!e)return i;const{nodes:a,edges:o,combos:s}=i;return{nodes:a.filter(l=>e(Fe(l),"node")),edges:o.filter(l=>e(Fe(l),"edge")),combos:s.filter(l=>e(Fe(l),"combo"))}}setShapes(e,r){const{nodes:i,edges:a,combos:o}=r,{shape:s}=this.options,{element:l}=this.context;if(s==="key"){const u=new Set,d=f=>{const h=Fe(f);u.add(h);const p=l.getElement(h);if(!p)return;const g=p.getShape("key"),m=this.shapes.get(h)||g.cloneNode();m.setPosition(g.getPosition()),p.style.zIndex&&(m.style.zIndex=p.style.zIndex),m.id=p.id,this.shapes.has(h)?Object.entries(g.attributes).forEach(([v,y])=>{m.style[v]!==y&&(m.style[v]=y)}):(e.appendChild(m),this.shapes.set(h,m))};a.forEach(d),o.forEach(d),i.forEach(d),this.shapes.forEach((f,h)=>{u.has(h)||(e.removeChild(f),this.shapes.delete(h))});return}const c=(u,d)=>{const h=l.getElement(u).getPosition();return d.setPosition(h),d};e.removeChildren(),a.forEach(u=>e.appendChild(s(Fe(u),"edge"))),o.forEach(u=>{e.appendChild(c(Fe(u),s(Fe(u),"combo")))}),i.forEach(u=>{e.appendChild(c(Fe(u),s(Fe(u),"node")))})}initCanvas(){const{renderer:e,size:[r,i]}=this.options;if(this.canvas){const{width:a,height:o}=this.canvas.getConfig();(r!==a||i!==o)&&this.canvas.resize(r,i),e&&this.canvas.setRenderer(e)}else{const{className:a,position:o,container:s,containerStyle:l}=this.options,[c,u]=PK({renderer:e,width:r,height:i,placement:o,className:"minimap",container:s,containerStyle:l,graphCanvas:this.context.canvas});a&&c.classList.add(a),this.container=c,this.canvas=u}return this.setCamera(),this.canvas}createLandmark(e,r,i){const a=`${e.join(",")}-${r.join(",")}-${i}`;if(this.landmarkMap.has(a))return this.landmarkMap.get(a);const s=this.canvas.getCamera().createLandmark(a,{position:e,focalPoint:r,zoom:i});return this.landmarkMap.set(a,s),s}setCamera(){var e;const{canvas:r}=this.context,i=(e=this.canvas)===null||e===void 0?void 0:e.getCamera();if(!i)return;const{size:[a,o],padding:s}=this.options,[l,c,u,d]=mh(s),{min:f,max:h,center:p}=r.getBounds("elements"),g=h[0]-f[0],m=h[1]-f[1],v=a-d-c,y=o-l-u,b=v/g,x=y/m,_=Math.min(b,x),S=this.createLandmark(p,p,_);i.gotoLandmark(S,0)}get maskBBox(){const{canvas:e}=this.context,r=e.getSize(),i=e.getCanvasByViewport([0,0]),a=e.getCanvasByViewport(r),o=this.canvas.canvas2Viewport(Ld(i)),s=this.canvas.canvas2Viewport(Ld(a)),l=s.x-o.x,c=s.y-o.y;return[o.x,o.y,l,c]}calculateMaskBBox(){const{size:[e,r]}=this.options;let[i,a,o,s]=this.maskBBox;return i<0&&(o=bg(o+i,e),i=0),a<0&&(s=bg(s+a,r),a=0),i+o>e&&(o=xg(e-i,0)),a+s>r&&(s=xg(r-a,0)),[bg(i,e),bg(a,r),xg(o,0),xg(s,0)]}renderMask(){const{maskStyle:e}=this.options;this.mask||(this.mask=document.createElement("div"),this.mask.addEventListener("pointerdown",this.onMaskDragStart)),this.container.appendChild(this.mask),Object.assign(this.mask.style,Object.assign(Object.assign({},e),{cursor:"move",position:"absolute",pointerEvents:"auto"})),this.updateMask()}updateMask(){if(!this.mask)return;const[e,r,i,a]=this.calculateMaskBBox();Object.assign(this.mask.style,{top:r+"px",left:e+"px",width:i+"px",height:a+"px"})}destroy(){var e;this.unbindEvents(),this.canvas.destroy(),(e=this.mask)===null||e===void 0||e.remove(),super.destroy()}}hL.defaultOptions={size:[240,160],shape:"key",padding:10,position:"right-bottom",maskStyle:{border:"1px solid #ddd",background:"rgba(0, 0, 0, 0.1)"},containerStyle:{border:"1px solid #ddd",background:"#fff"},delay:128};const bg=(n,e)=>Math.min(n,e),xg=(n,e)=>Math.max(n,e);var H7=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};const W7={x1:0,y1:0,x2:0,y2:0,visibility:"hidden"};class pL extends Cs{constructor(e,r){super(e,Object.assign({},pL.defaultOptions,r)),this.initSnapline=()=>{const i=this.context.canvas.getLayer("transient");this.horizontalLine||(this.horizontalLine=i.appendChild(new yy({style:Object.assign(Object.assign({},W7),this.options.horizontalLineStyle)}))),this.verticalLine||(this.verticalLine=i.appendChild(new yy({style:Object.assign(Object.assign({},W7),this.options.verticalLineStyle)})))},this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!0,this.autoSnapToLine=(i,a,o)=>H7(this,void 0,void 0,function*(){const{verticalX:s,horizontalY:l}=o,{tolerance:c}=this.options,{min:[u,d],max:[f,h],center:[p,g]}=a;let m=0,v=0;s!==null&&(Ns(f,s)<c&&(m=s-f),Ns(u,s)<c&&(m=s-u),Ns(p,s)<c&&(m=s-p),m!==0&&(this.isVerticalSticking=!0)),l!==null&&(Ns(h,l)<c&&(v=l-h),Ns(d,l)<c&&(v=l-d),Ns(g,l)<c&&(v=l-g),v!==0&&(this.isHorizontalSticking=!0)),(m!==0||v!==0)&&(yield this.context.graph.translateElementBy({[i]:[m,v]},!1))}),this.enableSnap=i=>{const{target:a}=i,o=.5;if(this.isHorizontalSticking||this.isVerticalSticking){const[s,l]=this.getDelta(i);if(this.isHorizontalSticking&&this.isVerticalSticking&&Math.abs(s)<=o&&Math.abs(l)<=o)return this.context.graph.translateElementBy({[a.id]:[-s,-l]},!1),!1;if(this.isHorizontalSticking&&Math.abs(l)<=o)return this.context.graph.translateElementBy({[a.id]:[0,-l]},!1),!1;if(this.isVerticalSticking&&Math.abs(s)<=o)return this.context.graph.translateElementBy({[a.id]:[-s,0]},!1),!1;this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!1,setTimeout(()=>{this.enableStick=!0},200)}return this.enableStick},this.calcSnaplineMetadata=(i,a)=>{const{tolerance:o,shape:s}=this.options,{min:[l,c],max:[u,d],center:[f,h]}=a;let p=null,g=null,m=null,v=null,y=null,b=null;return this.getNodes().some(x=>{if(Ra(i.id,x.id))return!1;const _=Vhe(x,s).getRenderBounds(),{min:[S,M],max:[E,T],center:[P,A]}=_;return p===null&&(Ns(P,f)<o?p=P:Ns(S,l)<o||Ns(S,u)<o?p=S:(Ns(E,u)<o||Ns(E,l)<o)&&(p=E),p!==null&&(g=Math.min(M,c),m=Math.max(T,d))),v===null&&(Ns(A,h)<o?v=A:Ns(M,c)<o||Ns(M,d)<o?v=M:(Ns(T,d)<o||Ns(T,c)<o)&&(v=T),v!==null&&(y=Math.min(S,l),b=Math.max(E,u))),p!==null&&v!==null}),{verticalX:p,verticalMinY:g,verticalMaxY:m,horizontalY:v,horizontalMinX:y,horizontalMaxX:b}},this.onDragStart=()=>{this.initSnapline()},this.onDrag=i=>H7(this,void 0,void 0,function*(){const{target:a}=i;if(this.options.autoSnap&&!this.enableSnap(i))return;const o=Vhe(a,this.options.shape).getRenderBounds(),s=this.calcSnaplineMetadata(a,o);this.hideSnapline(),(s.verticalX!==null||s.horizontalY!==null)&&this.updateSnapline(s),this.options.autoSnap&&(yield this.autoSnapToLine(a.id,o,s))}),this.onDragEnd=()=>{this.hideSnapline()},this.bindEvents()}getNodes(){var e;const{filter:r}=this.options,a=(((e=this.context.element)===null||e===void 0?void 0:e.getNodes())||[]).filter(o=>{var s;return Mft(o)&&((s=this.context.viewport)===null||s===void 0?void 0:s.isInViewport(o.getRenderBounds()))});return r?a.filter(o=>r(o)):a}hideSnapline(){this.horizontalLine.style.visibility="hidden",this.verticalLine.style.visibility="hidden"}getLineWidth(e){const{lineWidth:r}=this.options[`${e}LineStyle`];return+(r||W7.lineWidth||1)/this.context.graph.getZoom()}updateSnapline(e){const{verticalX:r,verticalMinY:i,verticalMaxY:a,horizontalY:o,horizontalMinX:s,horizontalMaxX:l}=e,[c,u]=this.context.canvas.getSize(),{offset:d}=this.options;o!==null?Object.assign(this.horizontalLine.style,{x1:d===1/0?0:s-d,y1:o,x2:d===1/0?c:l+d,y2:o,visibility:"visible",lineWidth:this.getLineWidth("horizontal")}):this.horizontalLine.style.visibility="hidden",r!==null?Object.assign(this.verticalLine.style,{x1:r,y1:d===1/0?0:i-d,x2:r,y2:d===1/0?u:a+d,visibility:"visible",lineWidth:this.getLineWidth("vertical")}):this.verticalLine.style.visibility="hidden"}getDelta(e){const r=this.context.graph.getZoom();return Zd([e.dx,e.dy],r)}bindEvents(){return H7(this,void 0,void 0,function*(){const{graph:e}=this.context;e.on(Ru.DRAG_START,this.onDragStart),e.on(Ru.DRAG,this.onDrag),e.on(Ru.DRAG_END,this.onDragEnd)})}unbindEvents(){const{graph:e}=this.context;e.off(Ru.DRAG_START,this.onDragStart),e.off(Ru.DRAG,this.onDrag),e.off(Ru.DRAG_END,this.onDragEnd)}destroyElements(){var e,r;(e=this.horizontalLine)===null||e===void 0||e.destroy(),(r=this.verticalLine)===null||r===void 0||r.destroy()}destroy(){this.destroyElements(),this.unbindEvents(),super.destroy()}}pL.defaultOptions={tolerance:5,offset:20,autoSnap:!0,shape:"key",verticalLineStyle:{stroke:"#1783FF"},horizontalLineStyle:{stroke:"#1783FF"},filter:()=>!0};const Ns=(n,e)=>Math.abs(n-e),Vhe=(n,e)=>typeof e=="function"?e(n):n.getShape(e);var sTt=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})},lTt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const cTt=["timestamp","time","date","datetime"];class gL extends Cs{get padding(){return mh(this.options.padding)}constructor(e,r){super(e,Object.assign({},gL.defaultOptions,r)),this.backup(),this.upsertTimebar()}play(){var e;(e=this.timebar)===null||e===void 0||e.play()}pause(){var e;(e=this.timebar)===null||e===void 0||e.pause()}forward(){var e;(e=this.timebar)===null||e===void 0||e.forward()}backward(){var e;(e=this.timebar)===null||e===void 0||e.backward()}reset(){var e;(e=this.timebar)===null||e===void 0||e.reset()}update(e){super.update(e),this.backup(),this.upsertTimebar()}backup(){this.originalData=Ghe(this.context.graph.getData())}upsertTimebar(){const{canvas:e}=this.context,r=this.options,{onChange:i,timebarType:a,data:o,x:s,y:l,width:c,height:u,mode:d}=r,f=lTt(r,["onChange","timebarType","data","x","y","width","height","mode"]),h=e.getSize(),[p]=this.padding;this.upsertCanvas().ready.then(()=>{var g;const m=Object.assign(Object.assign({x:h[0]/2-c/2,y:p,onChange:v=>{const y=(Jc(v)?v:[v,v]).map(b=>lit(b)?b.getTime():b);this.options.mode==="modify"?this.filterElements(y):this.hiddenElements(y),i==null||i(y)}},f),{data:o.map(v=>on(v)?{time:v,value:0}:v),width:c,height:u,type:a});this.timebar?this.timebar.update(m):(this.timebar=new rTt({style:m}),(g=this.canvas)===null||g===void 0||g.appendChild(this.timebar))})}upsertCanvas(){if(this.canvas)return this.canvas;const{className:e,height:r,position:i}=this.options,a=this.context.canvas,[o]=a.getSize(),[s,,l]=this.padding,[c,u]=PK({width:o,height:r+s+l,graphCanvas:a,className:"timebar",placement:i});return this.container=c,e&&c.classList.add(e),this.canvas=u,this.canvas}filterElements(e){return sTt(this,void 0,void 0,function*(){var r;if(!this.originalData)return;const{elementTypes:i,getTime:a}=this.options,{graph:o,element:s}=this.context,l=Ghe(this.originalData);i.forEach(u=>{const d=`${u}s`;l[d]=(this.originalData[d]||[]).filter(f=>{const h=a(f);return!!jhe(h,e)})});const c=[...l.nodes,...l.combos].map(u=>Fe(u));l.edges=l.edges.filter(u=>{const d=u.source,f=u.target;return c.includes(d)&&c.includes(f)}),o.setData(l),yield(r=s.draw({animation:!1,silence:!0}))===null||r===void 0?void 0:r.finished})}hiddenElements(e){const{graph:r}=this.context,{elementTypes:i,getTime:a}=this.options,o=[],s=[];i.forEach(l=>{var c;const u=`${l}s`;(((c=this.originalData)===null||c===void 0?void 0:c[u])||[]).forEach(f=>{const h=Fe(f),p=a(f);jhe(p,e)?s.push(h):o.push(h)})}),r.hideElement(o,!1),r.showElement(s,!1)}destroy(){var e,r,i;const{graph:a}=this.context;this.originalData&&a.setData(Object.assign({},this.originalData)),(e=this.timebar)===null||e===void 0||e.destroy(),(r=this.canvas)===null||r===void 0||r.destroy(),(i=this.container)===null||i===void 0||i.remove(),this.originalData=void 0,this.container=void 0,this.timebar=void 0,this.canvas=void 0,super.destroy()}}gL.defaultOptions={position:"bottom",enable:!0,timebarType:"time",className:"g6-timebar",width:450,height:60,zIndex:3,elementTypes:["node"],padding:10,mode:"modify",getTime:n=>uTt(n,cTt,void 0),loop:!1};const Ghe=n=>{const{nodes:e=[],edges:r=[],combos:i=[]}=n;return{nodes:[...e],edges:[...r],combos:[...i]}},jhe=(n,e)=>{if(on(e))return n===e;const[r,i]=e;return n>=r&&n<=i},uTt=(n,e,r)=>{var i;for(let a=0;a<e.length;a++){const o=e[a],s=(i=n.data)===null||i===void 0?void 0:i[o];if(s)return s}return r};function dTt(n){const e={top:"unset",right:"unset",bottom:"unset",left:"unset"};return n.split("-").forEach(i=>{e[i]="8px"}),e.flexDirection=n.startsWith("top")||n.startsWith("bottom")?"row":"column",e}const fTt=`
  .g6-toolbar {
    position: absolute;
    z-index: 100;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);
    opacity: 0.65;
  }
  .g6-toolbar .g6-toolbar-item {
    display: inline-block;
    width: 16px;
    height: 16px;
    padding: 4px;
    cursor: pointer;
    box-sizing: content-box;
  }

  .g6-toolbar .g6-toolbar-item:hover {
    background-color: #f0f0f0;
  }

  .g6-toolbar .g6-toolbar-item svg {
    display: inline-block;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }
`,hTt=`
  <svg>
    <symbol id="zoom-in" viewBox="64 64 896 896">
      <path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="zoom-out" viewBox="64 64 896 896">
      <path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="edit" viewBox="64 64 896 896">
      <path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"></path>
    </symbol>
    <symbol id="delete" viewBox="64 64 896 896">
      <path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"></path>
    </symbol>
    <symbol id="redo" viewBox="64 64 896 896">
      <path d="M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"></path>
    </symbol>
    <symbol id="undo" viewBox="64 64 896 896">
      <path d="M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"></path>
    </symbol>
    <symbol id="export" viewBox="64 64 896 896">
      <path d="M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"></path>
    </symbol>
    <symbol id="auto-fit" viewBox="64 64 896 896">
      <path d="M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"></path>
      <path d="M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"></path>
    </symbol>
    <symbol id="reset" viewBox="64 64 896 896">
      <path d="M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"></path>
    </symbol>
    <symbol id="exit-fullscreen" viewBox="0 0 1024 1024">
      <path d="M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z"  ></path></symbol>
    <symbol id="request-fullscreen" viewBox="0 0 1024 1024">
      <path d="M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z"  ></path></symbol>
  </svg>
`;var Hhe=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};class mL extends Cs{constructor(e,r){super(e,Object.assign({},mL.defaultOptions,r)),this.$element=rw("toolbar",!1),this.onToolbarItemClick=a=>{const{onClick:o}=this.options;if(a.target instanceof Element&&a.target.className.includes("g6-toolbar-item")){const s=a.target.getAttribute("value");o==null||o(s,a.target)}};const i=this.context.canvas.getContainer();this.$element.style.display="flex",i.appendChild(this.$element),pH("g6-toolbar-css","style",{},fTt,document.head),pH("g6-toolbar-svgicon","div",{display:"none"},hTt),this.$element.addEventListener("click",this.onToolbarItemClick),this.update(r)}update(e){const r=Object.create(null,{update:{get:()=>super.update}});return Hhe(this,void 0,void 0,function*(){r.update.call(this,e);const{className:i,position:a,style:o}=this.options;this.$element.className=`g6-toolbar ${i||""}`,Object.assign(this.$element.style,o,dTt(a)),this.$element.innerHTML=yield this.getDOMContent()})}destroy(){this.$element.removeEventListener("click",this.onToolbarItemClick),this.$element.remove(),super.destroy()}getDOMContent(){return Hhe(this,void 0,void 0,function*(){return(yield this.options.getItems()).map(r=>{var i;return`
          <div class="g6-toolbar-item" value="${r.value}" title="${(i=r.title)!==null&&i!==void 0?i:""}">
            <svg aria-hidden="true" focusable="false">
              <use xlink:href="#${r.id}"></use>
            </svg>
          </div>`}).join("")})}}mL.defaultOptions={position:"top-left"};var Whe=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};class vL extends Cs{constructor(e,r){super(e,Object.assign({},vL.defaultOptions,r)),this.currentTarget=null,this.tooltipElement=null,this.container=null,this.isEnable=(i,a)=>{const{enable:o}=this.options;return typeof o=="function"?o(i,a):o},this.onClick=i=>{const{target:{id:a}}=i;this.currentTarget===a?this.hide(i):this.show(i)},this.onPointerMove=i=>{const{target:a}=i;!this.currentTarget||a.id===this.currentTarget||this.show(i)},this.onPointerLeave=i=>{this.hide(i)},this.onCanvasMove=i=>{this.hide(i)},this.onPointerEnter=i=>{this.show(i)},this.showById=i=>Whe(this,void 0,void 0,function*(){const a={target:{id:i}};yield this.show(a)}),this.getElementData=(i,a)=>{const{model:o}=this.context;switch(a){case"node":return o.getNodeData([i]);case"edge":return o.getEdgeData([i]);case"combo":return o.getComboData([i]);default:return[]}},this.show=i=>Whe(this,void 0,void 0,function*(){var a,o;const{client:s,target:{id:l}}=i;if(uD(i.target))return;const c=this.context.graph.getElementType(l),{getContent:u,title:d}=this.options,f=this.getElementData(l,c);if(!this.tooltipElement||!this.isEnable(i,f))return;let h={};if(u){if(h.content=yield u(i,f),!h.content)return}else{const m=this.context.graph.getElementRenderStyle(l),v=c==="node"?m.fill:m.stroke;h={title:d||c,data:f.map(y=>({name:"ID",value:y.id||`${y.source} -> ${y.target}`,color:v}))}}this.currentTarget=l;let p,g;if(s)p=s.x,g=s.y;else{const m=cl(f,"0.style",{x:0,y:0});p=m.x,g=m.y}(o=(a=this.options).onOpenChange)===null||o===void 0||o.call(a,!0),this.tooltipElement.update(Object.assign(Object.assign(Object.assign({},this.tooltipStyleProps),{x:p,y:g,style:{".tooltip":{visibility:"visible"}}}),h))}),this.hide=i=>{var a,o,s,l,c;if(!i){(o=(a=this.options).onOpenChange)===null||o===void 0||o.call(a,!1),(s=this.tooltipElement)===null||s===void 0||s.hide(),this.currentTarget=null;return}if(!this.tooltipElement||!this.currentTarget)return;const{client:{x:u,y:d}}=i;(c=(l=this.options).onOpenChange)===null||c===void 0||c.call(l,!1),this.tooltipElement.hide(u,d),this.currentTarget=null},this.initTooltip=()=>{var i;const a=new $Mt({className:"tooltip",style:this.tooltipStyleProps});return(i=this.container)===null||i===void 0||i.appendChild(a.HTMLTooltipElement),a},this.render(),this.bindEvents()}getEvents(){return this.options.trigger==="click"?{"node:click":this.onClick,"edge:click":this.onClick,"combo:click":this.onClick,"canvas:click":this.onPointerLeave,contextmenu:this.onPointerLeave,drag:this.onPointerLeave}:{"node:pointerenter":this.onPointerEnter,"node:pointermove":this.onPointerMove,"canvas:pointermove":this.onCanvasMove,"edge:pointerenter":this.onPointerEnter,"edge:pointermove":this.onPointerMove,"combo:pointerenter":this.onPointerEnter,"combo:pointermove":this.onPointerMove,contextmenu:this.onPointerLeave,"node:drag":this.onPointerLeave}}update(e){var r;this.unbindEvents(),super.update(e),this.tooltipElement&&((r=this.container)===null||r===void 0||r.removeChild(this.tooltipElement.HTMLTooltipElement)),this.tooltipElement=this.initTooltip(),this.bindEvents()}render(){const{canvas:e}=this.context,r=e.getContainer();r&&(this.container=r,this.tooltipElement=this.initTooltip())}unbindEvents(){const{graph:e}=this.context,r=this.getEvents();Object.keys(r).forEach(i=>{e.off(i,r[i])})}bindEvents(){const{graph:e}=this.context,r=this.getEvents();Object.keys(r).forEach(i=>{e.on(i,r[i])})}get tooltipStyleProps(){const{canvas:e}=this.context,{center:r}=e.getBounds(),i=e.getContainer(),{top:a,left:o}=i.getBoundingClientRect(),{style:s,position:l,enterable:c,container:u={x:-o,y:-a},title:d,offset:f}=this.options,[h,p]=r,[g,m]=e.getSize();return{x:h,y:p,container:u,title:d,bounding:{x:0,y:0,width:g,height:m},position:l,enterable:c,offset:f,style:s}}destroy(){var e;this.unbindEvents(),this.tooltipElement&&((e=this.container)===null||e===void 0||e.removeChild(this.tooltipElement.HTMLTooltipElement)),super.destroy()}}vL.defaultOptions={trigger:"hover",position:"top-right",enterable:!1,enable:!0,offset:[10,10],style:{".tooltip":{visibility:"hidden"}}};var k3e=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};let F1;function F3e(n,e){return F1||(F1=document.createElement("canvas")),F1.width=n,F1.height=e,F1.getContext("2d").clearRect(0,0,n,e),F1}function pTt(n,e,r,i){return k3e(this,void 0,void 0,function*(){const a=F3e(n,e),o=a.getContext("2d"),{rotate:s,opacity:l,textFill:c,textFontSize:u,textFontFamily:d,textFontVariant:f,textFontWeight:h,textAlign:p,textBaseline:g}=i;return o.textAlign=p,o.textBaseline=g,o.translate(n/2,e/2),o.font=`${u}px ${d} ${f} ${h}`,s&&o.rotate(s),l&&(o.globalAlpha=l),c&&(o.fillStyle=c,o.fillText(`${r}`,0,0)),a.toDataURL()})}function gTt(n,e,r,i){return k3e(this,void 0,void 0,function*(){const a=F3e(n,e),o=a.getContext("2d"),{rotate:s,opacity:l}=i;s&&o.rotate(s),l&&(o.globalAlpha=l);const c=new Image;return c.crossOrigin="anonymous",c.src=r,new Promise(u=>{c.onload=function(){const d=n>c.width?(n-c.width)/2:0,f=e>c.height?(e-c.height)/2:0;o.drawImage(c,0,0,c.width,c.height,d,f,n-d*2,e-f*2),u(a.toDataURL())}})})}var mTt=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})},vTt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};class yL extends Cs{constructor(e,r){super(e,Object.assign({},yL.defaultOptions,r)),this.$element=rw("watermark"),this.context.canvas.getContainer().appendChild(this.$element),this.update(r)}update(e){const r=Object.create(null,{update:{get:()=>super.update}});return mTt(this,void 0,void 0,function*(){r.update.call(this,e);const i=this.options,{width:a,height:o,text:s,imageURL:l}=i,c=vTt(i,["width","height","text","imageURL"]);Object.keys(c).forEach(d=>{d.startsWith("background")&&(this.$element.style[d]=e[d])});const u=l?yield gTt(a,o,l,c):yield pTt(a,o,s,c);this.$element.style.backgroundImage=`url(${u})`})}destroy(){super.destroy(),this.$element.remove()}}yL.defaultOptions={width:200,height:100,opacity:.2,rotate:Math.PI/12,text:"",textFill:"#000",textFontSize:16,textAlign:"center",textBaseline:"middle",backgroundRepeat:"repeat"};const yTt=["#7E92B5","#F4664A","#FFBE3A"],bTt={type:"group",color:["#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]},xTt={type:"group",color:["#99ADD1","#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]};function $3e(n){const{bgColor:e,textColor:r,nodeColor:i,nodeColorDisabled:a,nodeStroke:o,nodeHaloStrokeOpacityActive:s=.15,nodeHaloStrokeOpacitySelected:l=.25,nodeOpacityDisabled:c=.06,nodeIconOpacityInactive:u=.85,nodeOpacityInactive:d=.25,nodeBadgePalette:f=yTt,nodePaletteOptions:h=bTt,edgeColor:p,edgeColorDisabled:g,edgePaletteOptions:m=xTt,comboColor:v,comboColorDisabled:y,comboStroke:b,comboStrokeDisabled:x,edgeColorInactive:_}=n;return{background:e,node:{palette:h,style:{donutOpacity:1,badgeBackgroundOpacity:1,badgeFill:"#fff",badgeFontSize:8,badgePadding:[0,4],badgePalette:f,fill:i,fillOpacity:1,halo:!1,iconFill:"#fff",iconOpacity:1,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelFill:r,labelFillOpacity:.85,labelLineHeight:16,labelPadding:[0,2],labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelOffsetY:2,lineWidth:0,portFill:i,portLineWidth:1,portStroke:o,portStrokeOpacity:.65,size:32,stroke:o,strokeOpacity:1,zIndex:2},state:{selected:{halo:!0,haloLineWidth:24,haloStrokeOpacity:l,labelFontSize:12,labelFontWeight:"bold",lineWidth:4,stroke:o},active:{halo:!0,haloLineWidth:12,haloStrokeOpacity:s},highlight:{labelFontWeight:"bold",lineWidth:4,stroke:o,strokeOpacity:.85},inactive:{badgeBackgroundOpacity:d,donutOpacity:d,fillOpacity:d,iconOpacity:u,labelFill:r,labelFillOpacity:d,strokeOpacity:d},disabled:{badgeBackgroundOpacity:.25,donutOpacity:c,fill:a,fillOpacity:c,iconFill:a,iconOpacity:.25,labelFill:r,labelFillOpacity:.25,strokeOpacity:c}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"node-expand",collapse:"node-collapse",update:[{fields:["x","y","fill","stroke"]}],translate:[{fields:["x","y"]}]}},edge:{palette:m,style:{badgeBackgroundFill:p,badgeFill:"#fff",badgeFontSize:8,badgeOffsetX:10,fillOpacity:1,halo:!1,haloLineWidth:12,haloStrokeOpacity:1,increasedLineWidthForHitTesting:2,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[4,4,4,4],labelFill:r,labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelPlacement:"center",labelTextBaseline:"middle",lineWidth:1,stroke:p,strokeOpacity:1,zIndex:1},state:{selected:{halo:!0,haloStrokeOpacity:.25,labelFontSize:14,labelFontWeight:"bold",lineWidth:3},active:{halo:!0,haloStrokeOpacity:.15},highlight:{labelFontWeight:"bold",lineWidth:3},inactive:{stroke:_,fillOpacity:.08,labelOpacity:.25,strokeOpacity:.08,badgeBackgroundOpacity:.25},disabled:{stroke:g,fillOpacity:.45,strokeOpacity:.45,labelOpacity:.25,badgeBackgroundOpacity:.45}},animation:{enter:"fade",exit:"fade",expand:"path-in",collapse:"path-out",show:"fade",hide:"fade",update:[{fields:["sourceNode","targetNode"]},{fields:["stroke"],shape:"key"}],translate:[{fields:["sourceNode","targetNode"]}]}},combo:{style:{collapsedMarkerFill:e,collapsedMarkerFontSize:12,collapsedMarkerFillOpacity:1,collapsedSize:32,collapsedFillOpacity:1,fill:v,halo:!1,haloLineWidth:12,haloStroke:b,haloStrokeOpacity:.25,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[2,4,2,4],labelFill:r,labelFontSize:12,labelFontWeight:400,labelOpacity:1,lineDash:0,lineWidth:1,fillOpacity:.04,strokeOpacity:1,padding:10,stroke:b},state:{selected:{halo:!0,labelFontSize:14,labelFontWeight:700,lineWidth:4},active:{halo:!0},highlight:{labelFontWeight:700,lineWidth:4},inactive:{fillOpacity:.65,labelOpacity:.25,strokeOpacity:.65},disabled:{fill:y,fillOpacity:.25,labelOpacity:.25,stroke:x,strokeOpacity:.25}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"combo-expand",collapse:"combo-collapse",update:[{fields:["x","y"]},{fields:["fill","stroke","lineWidth"],shape:"key"}],translate:[{fields:["x","y"]}]}}}}const _Tt={type:"group",color:["#637088","#0F55A6","#008383","#9C5D38","#8B53A6","#4E40A6","#8F6608","#3E801D","#A65383","#175E75","#0F8248"]},wTt={bgColor:"#000000",comboColor:"#fdfdfd",comboColorDisabled:"#d0e4ff",comboStroke:"#99add1",comboStrokeDisabled:"#969696",edgeColor:"#637088",edgeColorDisabled:"#637088",edgeColorInactive:"#D0E4FF",edgePaletteOptions:_Tt,nodeColor:"#1783ff",nodeColorDisabled:"#D0E4FF",nodeHaloStrokeOpacityActive:.25,nodeHaloStrokeOpacitySelected:.45,nodeIconOpacityInactive:.45,nodeOpacityDisabled:.25,nodeOpacityInactive:.45,nodeStroke:"#d0e4ff",textColor:"#ffffff"},STt=$3e(wTt),ETt={bgColor:"#ffffff",comboColor:"#99ADD1",comboColorDisabled:"#f0f0f0",comboStroke:"#99add1",comboStrokeDisabled:"#d9d9d9",edgeColor:"#99add1",edgeColorDisabled:"#d9d9d9",edgeColorInactive:"#1B324F",nodeColor:"#1783ff",nodeColorDisabled:"#1B324F",nodeHaloStrokeOpacityActive:.15,nodeHaloStrokeOpacitySelected:.25,nodeIconOpacityInactive:.85,nodeOpacityDisabled:.06,nodeOpacityInactive:.25,nodeStroke:"#000000",textColor:"#000000"},CTt=$3e(ETt);class gv extends SX{beforeDraw(e,r){return e}afterLayout(e,r){}}class MTt extends gv{beforeDraw(e){const{model:r}=this.context,i=e.add.combos,a=o=>{const s=[];return o.forEach((l,c)=>{const d=r.getAncestorsData(c,"combo").map(f=>Fe(f)).reverse();s.push([c,l,d.length])}),new Map(s.sort(([,,l],[,,c])=>c-l).map(([l,c])=>[l,c]))};return e.add.combos=a(i),e.update.combos=a(e.update.combos),e}}function $c(n,e,r,i,a){const o=Fe(i),s=`${r}s`,l=a?i:n.add[s].get(o)||n.update[s].get(o)||n.remove[s].get(o)||i;Object.entries(n).forEach(([c,u])=>{e===c?u[s].set(o,l):u[s].delete(o)})}function AP(n,e){return Object.keys(n).every(r=>n[r]===e[r])}class TTt extends gv{beforeDraw(e,r){if(r.stage==="visibility"||!this.context.model.model.hasTreeStructure(Ni))return e;const{model:i}=this.context,{add:a,update:o}=e,s=[...e.update.combos.entries(),...e.add.combos.entries()];for(;s.length;){const[l,c]=s.pop();if(Hl(c)){const u=i.getDescendantsData(l),d=u.map(Fe),{internal:f,external:h}=Wj(d,p=>i.getRelatedEdgesData(p));u.forEach(p=>{const g=Fe(p),m=s.findIndex(([y])=>y===g);m!==-1&&s.splice(m,1);const v=i.getElementType(g);$c(e,"remove",v,p)}),f.forEach(p=>$c(e,"remove","edge",p)),h.forEach(p=>{var g;const m=Fe(p);((g=this.context.element)===null||g===void 0?void 0:g.getElement(m))?o.edges.set(m,p):a.edges.set(m,p)})}else{const u=i.getChildrenData(l),d=u.map(Fe),{edges:f}=Wj(d,h=>i.getRelatedEdgesData(h));[...u,...f].forEach(h=>{var p;const g=Fe(h),m=i.getElementType(g);((p=this.context.element)===null||p===void 0?void 0:p.getElement(g))?$c(e,"update",m,h):$c(e,"add",m,h),m==="combo"&&s.push([g,h])})}}return e}}const qhe=(n,e,r,i)=>{const a=`${r}s`,o=Fe(i);!n.add[a].has(o)&&!n.update[a].has(o)&&n[e][a].set(Fe(i),i)};class ATt extends gv{getElement(e){return this.context.element.getElement(e)}handleExpand(e,r){if(qhe(r,"add","node",e),Hl(e))return;const i=Fe(e);qhe(r,"add","node",e),this.context.model.getRelatedEdgesData(i,"out").forEach(s=>{$c(r,"add","edge",s)}),this.context.model.getChildrenData(i).forEach(s=>{this.handleExpand(s,r)})}beforeDraw(e){const{graph:r,model:i}=this.context;if(!i.model.hasTreeStructure(Pc))return e;const{add:{nodes:a,edges:o},update:{nodes:s}}=e,l=new Map,c=new Map;a.forEach((d,f)=>{Hl(d)&&l.set(f,d)}),o.forEach(d=>{if(r.getElementType(d.source)!=="node")return;const f=r.getNodeData(d.source);Hl(f)&&l.set(d.source,f)}),s.forEach((d,f)=>{const h=this.getElement(f);if(!h)return;const p=h.attributes.collapsed;Hl(d)?p||l.set(f,d):p&&c.set(f,d)});const u=new Set;return l.forEach((d,f)=>{i.getDescendantsData(f).forEach(p=>{const g=Fe(p);if(u.has(g))return;$c(e,"remove","node",p),i.getRelatedEdgesData(g).forEach(v=>{$c(e,"remove","edge",v)}),u.add(g)})}),c.forEach((d,f)=>{if(i.getAncestorsData(f,Pc).some(Hl)){$c(e,"remove","node",d);return}this.handleExpand(d,e)}),e}}function B3e(n,e,r,i=!1){const a=$j[n][e];!i&&a?a!==r&&gh.warn(`The extension ${e} of ${n} has been registered before.`):Object.assign($j[n],{[e]:r})}/*!
 * @antv/g-plugin-dragndrop
 * @description A G plugin for Drag n Drop implemented with PointerEvents
 * @version 2.0.34
 * @date 4/14/2025, 2:54:47 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var z3e=function(){function n(e){st(this,n),this.dragndropPluginOptions=e}return lt(n,[{key:"apply",value:function(r){var i=this,a=r.renderingService,o=r.renderingContext,s=o.root.ownerDocument,l=s.defaultView,c=function(d){var f=d.target,h=f===s,p=h&&i.dragndropPluginOptions.isDocumentDraggable?s:f.closest&&f.closest("[draggable=true]");if(p){var g=!1,m=d.timeStamp,v=[d.clientX,d.clientY],y=null,b=[d.clientX,d.clientY],x=function(){var S=bl(pi().mark(function M(E){var T,P,A,N,O,I;return pi().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(g){k.next=8;break}if(T=E.timeStamp-m,P=Fl([E.clientX,E.clientY],v),!(T<=i.dragndropPluginOptions.dragstartTimeThreshold||P<=i.dragndropPluginOptions.dragstartDistanceThreshold)){k.next=5;break}return k.abrupt("return");case 5:E.type="dragstart",p.dispatchEvent(E),g=!0;case 8:if(E.type="drag",E.dx=E.clientX-b[0],E.dy=E.clientY-b[1],p.dispatchEvent(E),b=[E.clientX,E.clientY],h){k.next=21;break}return A=i.dragndropPluginOptions.overlap==="pointer"?[E.canvasX,E.canvasY]:f.getBounds().center,k.next=17,s.elementsFromPoint(A[0],A[1]);case 17:N=k.sent,O=N[N.indexOf(f)+1],I=(O==null?void 0:O.closest("[droppable=true]"))||(i.dragndropPluginOptions.isDocumentDroppable?s:null),y!==I&&(y&&(E.type="dragleave",E.target=y,y.dispatchEvent(E)),I&&(E.type="dragenter",E.target=I,I.dispatchEvent(E)),y=I,y&&(E.type="dragover",E.target=y,y.dispatchEvent(E)));case 21:case"end":return k.stop()}},M)}));return function(E){return S.apply(this,arguments)}}();l.addEventListener("pointermove",x);var _=function(M){if(g){M.detail={preventClick:!0};var E=M.clone();y&&(E.type="drop",E.target=y,y.dispatchEvent(E)),E.type="dragend",p.dispatchEvent(E),g=!1}l.removeEventListener("pointermove",x)};f.addEventListener("pointerup",_,{once:!0}),f.addEventListener("pointerupoutside",_,{once:!0})}};a.hooks.init.tap(n.tag,function(){l.addEventListener("pointerdown",c)}),a.hooks.destroy.tap(n.tag,function(){l.removeEventListener("pointerdown",c)})}}])}();z3e.tag="Dragndrop";var RTt=function(n){function e(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return st(this,e),r=dr(this,e),r.name="dragndrop",r.options=i,r}return $n(e,n),lt(e,[{key:"init",value:function(){this.addRenderingPlugin(new z3e(se({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(i){Object.assign(this.plugins[0].dragndropPluginOptions,i)}}])}(lv),Yhe=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})},Xhe=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};const Khe=["main"],Zhe=["background","main","label","transient"];function PTt(n){return n.main}class Qhe{getConfig(){return this.config}getLayer(e="main"){return this.extends.layers[e]||PTt(this.getLayers())}getLayers(){return this.extends.layers}getRenderer(e){return this.extends.renderers[e]}getCamera(e="main"){return this.getLayer(e).getCamera()}getRoot(e="main"){return this.getLayer(e).getRoot()}getContextService(e="main"){return this.getLayer(e).getContextService()}setCursor(e){this.config.cursor=e,this.getLayer().setCursor(e)}get document(){return this.getLayer().document}get context(){return this.getLayer().context}constructor(e){this.config={enableMultiLayer:!0},Object.assign(this.config,e);const r=this.config,{renderer:i,background:a,cursor:o,enableMultiLayer:s}=r,l=Xhe(r,["renderer","background","cursor","enableMultiLayer"]),c=s?Zhe:Khe,u=Jhe(i,c),d=Object.fromEntries(c.map(f=>{const h=new Fj(Object.assign(Object.assign({},l),{supportsMutipleCanvasesInOneContainer:s,renderer:u[f],background:s?f==="background"?a:void 0:a}));return[f,h]}));epe(d),this.extends={config:this.config,renderer:i,renderers:u,layers:d}}get ready(){return Promise.all(Object.entries(this.getLayers()).map(([,e])=>e.ready))}resize(e,r){Object.assign(this.extends.config,{width:e,height:r}),Object.values(this.getLayers()).forEach(i=>{const a=i.getCamera(),o=a.getPosition(),s=a.getFocalPoint();i.resize(e,r),a.setPosition(o),a.setFocalPoint(s)})}getBounds(e){return TM(Object.values(this.getLayers()).map(r=>e?r.getRoot().childNodes.find(a=>a.classList.includes(e)):r.getRoot()).filter(r=>(r==null?void 0:r.childNodes.length)>0).map(r=>r.getBounds()))}getContainer(){const e=this.extends.config.container;return typeof e=="string"?document.getElementById(e):e}getSize(){return[this.extends.config.width||0,this.extends.config.height||0]}appendChild(e,r){var i;const a=((i=e.style)===null||i===void 0?void 0:i.$layer)||"main";return this.getLayer(a).appendChild(e,r)}setRenderer(e){if(e===this.extends.renderer)return;const r=Jhe(e,this.config.enableMultiLayer?Zhe:Khe);this.extends.renderers=r,Object.entries(r).forEach(([i,a])=>this.getLayer(i).setRenderer(a)),epe(this.getLayers())}getCanvasByViewport(e){return ps(this.getLayer().viewport2Canvas(Ld(e)))}getViewportByCanvas(e){return ps(this.getLayer().canvas2Viewport(Ld(e)))}getViewportByClient(e){return ps(this.getLayer().client2Viewport(Ld(e)))}getClientByViewport(e){return ps(this.getLayer().viewport2Client(Ld(e)))}getClientByCanvas(e){return this.getClientByViewport(this.getViewportByCanvas(e))}getCanvasByClient(e){const r=this.getLayer(),i=r.client2Viewport(Ld(e));return ps(r.viewport2Canvas(i))}toDataURL(){return Yhe(this,arguments,void 0,function*(e={}){const r=globalThis.devicePixelRatio||1,{mode:i="viewport"}=e,a=Xhe(e,["mode"]);let[o,s,l,c]=[0,0,0,0];if(i==="viewport")[l,c]=this.getSize();else if(i==="overall"){const y=this.getBounds(),b=cv(y);[o,s]=y.min,[l,c]=b}const u=_j('<div id="virtual-image"></div>'),d=new Fj({width:l,height:c,renderer:new nC,devicePixelRatio:r,container:u,background:this.extends.config.background});yield d.ready,d.appendChild(this.getLayer("background").getRoot().cloneNode(!0)),d.appendChild(this.getRoot().cloneNode(!0));const f=this.getLayer("label").getRoot().cloneNode(!0),h=d.viewport2Canvas({x:0,y:0}),p=this.getCanvasByViewport([0,0]);f.translate([p[0]-h.x,p[1]-h.y]),f.scale(1/this.getCamera().getZoom()),d.appendChild(f),d.appendChild(this.getLayer("transient").getRoot().cloneNode(!0));const g=this.getCamera(),m=d.getCamera();if(i==="viewport")m.setZoom(g.getZoom()),m.setPosition(g.getPosition()),m.setFocalPoint(g.getFocalPoint());else if(i==="overall"){const[y,b,x]=m.getPosition(),[_,S,M]=m.getFocalPoint();m.setPosition([y+o,b+s,x]),m.setFocalPoint([_+o,S+s,M])}const v=d.getContextService();return new Promise(y=>{d.addEventListener(Rc.RERENDER,()=>Yhe(this,void 0,void 0,function*(){yield new Promise(x=>setTimeout(x,300));const b=yield v.toDataURL(a);y(b)}))})})}destroy(){Object.values(this.getLayers()).forEach(e=>{e.getCamera().cancelLandmarkAnimation(),e.destroy()})}}function Jhe(n,e){return Object.fromEntries(e.map(r=>{const i=(n==null?void 0:n(r))||new nC;return i instanceof nC&&i.setConfig({enableDirtyRectangleRendering:!1}),r==="main"?i.registerPlugin(new RTt({isDocumentDraggable:!0,isDocumentDroppable:!0,dragstartDistanceThreshold:10,dragstartTimeThreshold:100})):i.unregisterPlugin(i.getPlugin("dom-interaction")),[r,i]}))}function epe(n){Object.entries(n).forEach(([e,r])=>{const i=r.getContextService().getDomElement();i!=null&&i.style&&(i.style.gridArea="1 / 1 / 2 / 2",i.style.outline="none",i.tabIndex=1,e!=="main"&&(i.style.pointerEvents="none")),i!=null&&i.parentElement&&(i.parentElement.style.display="grid")})}const $1=n=>n?parseInt(n):0;function NTt(n){const e=getComputedStyle(n),r=n.clientWidth||$1(e.width),i=n.clientHeight||$1(e.height),a=$1(e.paddingLeft)+$1(e.paddingRight),o=$1(e.paddingTop)+$1(e.paddingBottom);return[r-a,i-o]}function tpe(n){if(!n)return[0,0];let e=640,r=480;const[i,a]=NTt(n);e=i||e,r=a||r;const o=1,s=1;return[Math.max(on(e)?e:o,o),Math.max(on(r)?r:s,s)]}class bL{constructor(e){this.type=e}}class lo extends bL{constructor(e,r){super(e),this.data=r}}class xu extends bL{constructor(e,r,i,a){super(e),this.animationType=r,this.animation=i,this.data=a}}class B1 extends bL{constructor(e,r,i){super(e),this.elementType=r,this.data=i}}class FA extends bL{constructor(e,r){super(e),this.data=r}}function Ro(n,e){n.emit(e.type,e)}function OTt(n){if(!n)return null;if(n instanceof cEe)return{type:"canvas",element:n};let e=n;for(;e;){if(OM(e))return{type:"node",element:e};if(yCe(e))return{type:"edge",element:e};if(IX(e))return{type:"combo",element:e};e=e.parentElement}return null}function npe(n){var e;return((e=n==null?void 0:n.style)===null||e===void 0?void 0:e.zIndex)||0}const K2="cachedStyle",NK=n=>`__${n}__`;function ITt(n,e){const r=Array.isArray(e)?e:[e];cl(n,K2)||KE(n,K2,{}),r.forEach(i=>{KE(cl(n,K2),NK(i),n.attributes[i])})}function rpe(n,e){return cl(n,[K2,NK(e)])}function DTt(n,e){return NK(e)in(cl(n,K2)||{})}let LTt=class{constructor(e){this.tasks=[],this.animations=new Set,this.context=e}getTasks(){const e=[...this.tasks];return this.tasks=[],e}add(e,r){this.tasks.push([e,r])}animate(e,r,i){var a,o,s;(a=r==null?void 0:r.before)===null||a===void 0||a.call(r);const l=this.getTasks().map(([u,d])=>{var f,h,p;const{element:g,elementType:m,stage:v}=u,y=Rct(this.context.options,m,v,e);(f=d==null?void 0:d.before)===null||f===void 0||f.call(d);const b=y.length?Nct(g,this.inferStyle(u,i),y):null;return b?((h=d==null?void 0:d.beforeAnimate)===null||h===void 0||h.call(d,b),b.finished.then(()=>{var x,_;(x=d==null?void 0:d.afterAnimate)===null||x===void 0||x.call(d,b),(_=d==null?void 0:d.after)===null||_===void 0||_.call(d),this.animations.delete(b)})):(p=d==null?void 0:d.after)===null||p===void 0||p.call(d),b}).filter(Boolean);l.forEach(u=>this.animations.add(u));const c=bX(l);return c?((o=r==null?void 0:r.beforeAnimate)===null||o===void 0||o.call(r,c),c.finished.then(()=>{var u,d;(u=r==null?void 0:r.afterAnimate)===null||u===void 0||u.call(r,c),(d=r==null?void 0:r.after)===null||d===void 0||d.call(r),this.release()})):(s=r==null?void 0:r.after)===null||s===void 0||s.call(r),c}inferStyle(e,r){var i,a;const{element:o,elementType:s,stage:l,originalStyle:c,updatedStyle:u={}}=e;e.modifiedStyle||(e.modifiedStyle=Object.assign(Object.assign({},c),u));const{modifiedStyle:d}=e,f={},h={};if(l==="enter")Object.assign(f,{opacity:0});else if(l==="exit")Object.assign(h,{opacity:0});else if(l==="show")Object.assign(f,{opacity:0}),Object.assign(h,{opacity:(i=rpe(o,"opacity"))!==null&&i!==void 0?i:eC("opacity")});else if(l==="hide")Object.assign(f,{opacity:(a=rpe(o,"opacity"))!==null&&a!==void 0?a:eC("opacity")}),Object.assign(h,{opacity:0});else if(l==="collapse"){const{collapse:p}=r||{},{target:g,descendants:m,position:v}=p;if(s==="node"){if(m.includes(o.id)){const[y,b,x]=v;Object.assign(h,{x:y,y:b,z:x})}}else if(s==="combo"){if(o.id===g||m.includes(o.id)){const[y,b]=v;Object.assign(h,{x:y,y:b,childrenNode:c.childrenNode})}}else s==="edge"&&Object.assign(h,{sourceNode:d.sourceNode,targetNode:d.targetNode})}else if(l==="expand"){const{expand:p}=r||{},{target:g,descendants:m,position:v}=p;if(s==="node"){if(o.id===g||m.includes(o.id)){const[y,b,x]=v;Object.assign(f,{x:y,y:b,z:x})}}else if(s==="combo"){if(o.id===g||m.includes(o.id)){const[y,b,x]=v;Object.assign(f,{x:y,y:b,z:x,childrenNode:d.childrenNode})}}else s==="edge"&&Object.assign(f,{sourceNode:d.sourceNode,targetNode:d.targetNode})}return[Object.keys(f).length>0?Object.assign({},c,f):c,Object.keys(h).length>0?Object.assign({},d,h):d]}stop(){this.animations.forEach(e=>e.cancel())}clear(){this.tasks=[]}release(){var e,r;const{canvas:i}=this.context,a=(r=(e=i.document)===null||e===void 0?void 0:e.timeline)===null||r===void 0?void 0:r.animationsWithPromises;a&&(i.document.timeline.animationsWithPromises=a.filter(o=>o.playState!=="finished"))}destroy(){this.stop(),this.animations.clear(),this.tasks=[]}};class kTt{constructor(e){this.batchCount=0,this.context=e}emit(e){const{graph:r}=this.context;r.emit(e.type,e)}startBatch(e=!0){this.batchCount++,this.batchCount===1&&this.emit(new lo(Ut.BATCH_START,{initiate:e}))}endBatch(){this.batchCount--,this.batchCount===0&&this.emit(new lo(Ut.BATCH_END))}get isBatching(){return this.batchCount>0}destroy(){this.context=null}}class FTt extends wX{constructor(e){super(e),this.currentTarget=null,this.currentTargetType=null,this.category="behavior",this.forwardCanvasEvents=r=>{const{target:i}=r,a=OTt(i);if(!a)return;const{graph:o,canvas:s}=this.context,{type:l,element:c}=a;if("destroyed"in c&&(uD(c)||c.destroyed))return;const{type:u,detail:d,button:f}=r,h=Object.assign(Object.assign({},r),{target:c,targetType:l,originalTarget:i});u===it.POINTER_MOVE&&(this.currentTarget!==c&&(this.currentTarget&&o.emit(`${this.currentTargetType}:${it.POINTER_LEAVE}`,Object.assign(Object.assign({},h),{type:it.POINTER_LEAVE,target:this.currentTarget,targetType:this.currentTargetType})),c&&(Object.assign(h,{type:it.POINTER_ENTER}),o.emit(`${l}:${it.POINTER_ENTER}`,h))),this.currentTarget=c,this.currentTargetType=l),u===it.CLICK&&f===2||(o.emit(`${l}:${u}`,h),o.emit(u,h)),u===it.CLICK&&d===2&&(Object.assign(h,{type:it.DBLCLICK}),o.emit(`${l}:${it.DBLCLICK}`,h),o.emit(it.DBLCLICK,h)),u===it.POINTER_DOWN&&f===2&&(Object.assign(h,{type:it.CONTEXT_MENU,preventDefault:()=>{var p;(p=s.getContainer())===null||p===void 0||p.addEventListener(it.CONTEXT_MENU,g=>g.preventDefault(),{once:!0})}}),o.emit(`${l}:${it.CONTEXT_MENU}`,h),o.emit(it.CONTEXT_MENU,h))},this.forwardContainerEvents=r=>{this.context.graph.emit(r.type,r)},this.forwardEvents(),this.setBehaviors(this.context.options.behaviors||[])}setBehaviors(e){this.setExtensions(e)}forwardEvents(){const e=this.context.canvas.getContainer();e&&[zb.KEY_DOWN,zb.KEY_UP].forEach(i=>{e.addEventListener(i,this.forwardContainerEvents)});const r=this.context.canvas.document;r&&[it.CLICK,it.DBLCLICK,it.POINTER_OVER,it.POINTER_LEAVE,it.POINTER_ENTER,it.POINTER_MOVE,it.POINTER_OUT,it.POINTER_DOWN,it.POINTER_UP,it.CONTEXT_MENU,it.DRAG_START,it.DRAG,it.DRAG_END,it.DRAG_ENTER,it.DRAG_OVER,it.DRAG_LEAVE,it.DROP,it.WHEEL].forEach(i=>{r.addEventListener(i,this.forwardCanvasEvents)})}destroy(){const e=this.context.canvas.getContainer();e&&[zb.KEY_DOWN,zb.KEY_UP].forEach(r=>{e.removeEventListener(r,this.forwardContainerEvents)}),this.context.canvas.document.removeAllEventListeners(),super.destroy()}}var dC=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};function _g(n,e){const{data:r,style:i}=n,a=dC(n,["data","style"]),{data:o,style:s}=e,l=dC(e,["data","style"]),c=Object.assign(Object.assign({},a),l);return(r||o)&&Object.assign(c,{data:Object.assign(Object.assign({},r),o)}),(i||s)&&Object.assign(c,{style:Object.assign(Object.assign({},i),s)}),c}function q7(n){const{data:e,style:r}=n,a=dC(n,["data","style"]);return e&&(a.data=Object.assign({},e)),r&&(a.style=Object.assign({},r)),a}function z1(n={},e={}){const{states:r=[],data:i={},style:a={},children:o=[]}=n,s=dC(n,["states","data","style","children"]),{states:l=[],data:c={},style:u={},children:d=[]}=e,f=dC(e,["states","data","style","children"]),h=(g,m)=>g.length!==m.length?!1:g.every((v,y)=>v===m[y]),p=(g,m)=>{const v=Object.keys(g),y=Object.keys(m);return v.length!==y.length?!1:v.every(b=>g[b]===m[b])};return!(!p(s,f)||!h(o,d)||!h(r,l)||!p(i,c)||!p(a,u))}var $Tt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};function Y7(n){const{id:e=Fe(n),style:r,data:i}=n,a=$Tt(n,["id","style","data"]),o=Object.assign(Object.assign({},n),{style:Object.assign({},r),data:Object.assign({},i)});return Fct(n)?Object.assign({id:e,data:o},a):{id:e,data:o}}function Wo(n){return n.data}function BTt(n){if(n.hasTreeStructure(Pc))return;n.attachTreeStructure(Pc);const e=n.getAllEdges();for(const r of e){const{source:i,target:a}=r;n.setParent(a,i,Pc)}}class zTt{constructor(){this.latestRemovedComboIds=new Set,this.comboIds=new Set,this.changes=[],this.batchCount=0,this.isTraceless=!1,this.enableUpdateNodeLikeHierarchy=!0,this.model=new zo}pushChange(e){if(this.isTraceless)return;const{type:r}=e;if(r===Qi.NodeUpdated||r===Qi.EdgeUpdated||r===Qi.ComboUpdated){const{value:i,original:a}=e;this.changes.push({value:q7(i),original:q7(a),type:r})}else this.changes.push({value:q7(e.value),type:r})}getChanges(){return this.changes}clearChanges(){this.changes=[]}batch(e){this.batchCount++,this.model.batch(e),this.batchCount--}isBatching(){return this.batchCount>0}silence(e){this.isTraceless=!0,e(),this.isTraceless=!1}isCombo(e){return this.comboIds.has(e)||this.latestRemovedComboIds.has(e)}getData(){return{nodes:this.getNodeData(),edges:this.getEdgeData(),combos:this.getComboData()}}getNodeData(e){return this.model.getAllNodes().reduce((r,i)=>{const a=Wo(i);return this.isCombo(Fe(a))||(e===void 0||e.includes(Fe(a)))&&r.push(a),r},[])}getEdgeDatum(e){return Wo(this.model.getEdge(e))}getEdgeData(e){return this.model.getAllEdges().reduce((r,i)=>{const a=Wo(i);return(e===void 0||e.includes(Fe(a)))&&r.push(a),r},[])}getComboData(e){return this.model.getAllNodes().reduce((r,i)=>{const a=Wo(i);return this.isCombo(Fe(a))&&(e===void 0||e.includes(Fe(a)))&&r.push(a),r},[])}getRootsData(e=Pc){return this.model.getRoots(e).map(Wo)}getAncestorsData(e,r){const{model:i}=this;return!i.hasNode(e)||!i.hasTreeStructure(r)?[]:i.getAncestors(e,r).map(Wo)}getDescendantsData(e){const r=this.getElementDataById(e),i=[];return px(r,a=>{a!==r&&i.push(a)},a=>this.getChildrenData(Fe(a)),"TB"),i}getParentData(e,r){const{model:i}=this;if(!r){gh.warn("The hierarchy structure key is not specified");return}if(!i.hasNode(e)||!i.hasTreeStructure(r))return;const a=i.getParent(e,r);return a?Wo(a):void 0}getChildrenData(e){const r=this.getElementType(e)==="node"?Pc:Ni,{model:i}=this;return!i.hasNode(e)||!i.hasTreeStructure(r)?[]:i.getChildren(e,r).map(Wo)}getElementsDataByType(e){return e==="node"?this.getNodeData():e==="edge"?this.getEdgeData():e==="combo"?this.getComboData():[]}getElementDataById(e){return this.getElementType(e)==="edge"?this.getEdgeDatum(e):this.getNodeLikeDatum(e)}getNodeLikeDatum(e){const r=this.model.getNode(e);return Wo(r)}getNodeLikeData(e){return this.model.getAllNodes().reduce((r,i)=>{const a=Wo(i);return e?e.includes(Fe(a))&&r.push(a):r.push(a),r},[])}getElementDataByState(e,r){return this.getElementsDataByType(e).filter(a=>{var o;return(o=a.states)===null||o===void 0?void 0:o.includes(r)})}getElementState(e){var r;return((r=this.getElementDataById(e))===null||r===void 0?void 0:r.states)||[]}hasNode(e){return this.model.hasNode(e)&&!this.isCombo(e)}hasEdge(e){return this.model.hasEdge(e)}hasCombo(e){return this.model.hasNode(e)&&this.isCombo(e)}getRelatedEdgesData(e,r="both"){return this.model.getRelatedEdges(e,r).map(Wo)}getNeighborNodesData(e){return this.model.getNeighbors(e).map(Wo)}setData(e){const{nodes:r=[],edges:i=[],combos:a=[]}=e,{nodes:o,edges:s,combos:l}=this.getData(),c=Cm(o,r,f=>Fe(f),z1),u=Cm(s,i,f=>Fe(f),z1),d=Cm(l,a,f=>Fe(f),z1);this.batch(()=>{const f={nodes:c.enter,edges:u.enter,combos:d.enter};this.addData(f),this.computeZIndex(f,"add",!0);const h={nodes:c.update,edges:u.update,combos:d.update};this.updateData(h),this.computeZIndex(h,"update",!0);const p={nodes:c.exit.map(Fe),edges:u.exit.map(Fe),combos:d.exit.map(Fe)};this.removeData(p)})}addData(e){const{nodes:r,edges:i,combos:a}=e;this.batch(()=>{this.addComboData(a),this.addNodeData(r),this.addEdgeData(i)}),this.computeZIndex(e,"add")}addNodeData(e=[]){e.length&&(this.model.addNodes(e.map(r=>(this.pushChange({value:r,type:Qi.NodeAdded}),Y7(r)))),this.updateNodeLikeHierarchy(e),this.computeZIndex({nodes:e},"add"))}addEdgeData(e=[]){e.length&&(this.model.addEdges(e.map(r=>(this.pushChange({value:r,type:Qi.EdgeAdded}),Y7(r)))),this.computeZIndex({edges:e},"add"))}addComboData(e=[]){if(!e.length)return;const{model:r}=this;r.hasTreeStructure(Ni)||r.attachTreeStructure(Ni),r.addNodes(e.map(i=>(this.comboIds.add(Fe(i)),this.pushChange({value:i,type:Qi.ComboAdded}),Y7(i)))),this.updateNodeLikeHierarchy(e),this.computeZIndex({combos:e},"add")}addChildrenData(e,r){const i=this.getNodeLikeDatum(e),a=r.map(Fe);this.addNodeData(r),this.updateNodeData([{id:e,children:[...i.children||[],...a]}]),this.addEdgeData(a.map(o=>({source:e,target:o})))}computeZIndex(e,r,i=!1){!i&&this.isBatching()||this.batch(()=>{const{nodes:a=[],edges:o=[],combos:s=[]}=e;s.forEach(l=>{var c,u,d;const f=Fe(l);if(r==="add"&&on((c=l.style)===null||c===void 0?void 0:c.zIndex)||r==="update"&&!("combo"in l))return;const h=this.getParentData(f,Ni),p=h?((d=(u=h.style)===null||u===void 0?void 0:u.zIndex)!==null&&d!==void 0?d:0)+1:0;this.preventUpdateNodeLikeHierarchy(()=>{this.updateComboData([{id:f,style:{zIndex:p}}])})}),a.forEach(l=>{var c,u,d;const f=Fe(l);if(r==="add"&&on((c=l.style)===null||c===void 0?void 0:c.zIndex)||r==="update"&&!("combo"in l)&&!("children"in l))return;let h=0;const p=this.getParentData(f,Ni);if(p)h=(((u=p.style)===null||u===void 0?void 0:u.zIndex)||0)+1;else{const g=this.getParentData(f,Pc);g&&(h=((d=g==null?void 0:g.style)===null||d===void 0?void 0:d.zIndex)||0)}this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:f,style:{zIndex:h}}])})}),o.forEach(l=>{var c,u,d,f,h;if(on((c=l.style)===null||c===void 0?void 0:c.zIndex))return;let{id:p,source:g,target:m}=l;if(!p)p=Fe(l);else{const b=this.getEdgeDatum(p);g=b.source,m=b.target}if(!g||!m)return;const v=((d=(u=this.getNodeLikeDatum(g))===null||u===void 0?void 0:u.style)===null||d===void 0?void 0:d.zIndex)||0,y=((h=(f=this.getNodeLikeDatum(m))===null||f===void 0?void 0:f.style)===null||h===void 0?void 0:h.zIndex)||0;this.updateEdgeData([{id:Fe(l),style:{zIndex:Math.max(v,y)-1}}])})})}getFrontZIndex(e){var r;const i=this.getElementType(e),a=this.getElementDataById(e),o=this.getData();if(Object.assign(o,{[`${i}s`]:o[`${i}s`].filter(s=>Fe(s)!==e)}),i==="combo"&&!Hl(a)){const s=new Set(this.getAncestorsData(e,Ni).map(Fe));o.nodes=o.nodes.filter(l=>!s.has(Fe(l))),o.combos=o.combos.filter(l=>!s.has(Fe(l))),o.edges=o.edges.filter(({source:l,target:c})=>!s.has(l)&&!s.has(c))}return Math.max(((r=a.style)===null||r===void 0?void 0:r.zIndex)||0,0,...Object.values(o).flat().map(s=>{var l;return(((l=s==null?void 0:s.style)===null||l===void 0?void 0:l.zIndex)||0)+1}))}updateNodeLikeHierarchy(e){if(!this.enableUpdateNodeLikeHierarchy)return;const{model:r}=this;e.forEach(i=>{const a=Fe(i),o=lA(i);o!==void 0&&(r.hasTreeStructure(Ni)||r.attachTreeStructure(Ni),o===null&&this.refreshComboData(a),this.setParent(a,lA(i),Ni));const s=i.children||[];if(s.length){r.hasTreeStructure(Pc)||r.attachTreeStructure(Pc);const l=s.filter(c=>r.hasNode(c));l.forEach(c=>this.setParent(c,a,Pc)),l.length!==s.length&&this.updateNodeData([{id:a,children:l}])}})}preventUpdateNodeLikeHierarchy(e){this.enableUpdateNodeLikeHierarchy=!1,e(),this.enableUpdateNodeLikeHierarchy=!0}updateData(e){const{nodes:r,edges:i,combos:a}=e;this.batch(()=>{this.updateNodeData(r),this.updateComboData(a),this.updateEdgeData(i)}),this.computeZIndex(e,"update")}updateNodeData(e=[]){if(!e.length)return;const{model:r}=this;this.batch(()=>{const i=[];e.forEach(a=>{const o=Fe(a),s=Wo(r.getNode(o));if(z1(s,a))return;const l=_g(s,a);this.pushChange({value:l,original:s,type:Qi.NodeUpdated}),r.mergeNodeData(o,l),i.push(l)}),this.updateNodeLikeHierarchy(i)}),this.computeZIndex({nodes:e},"update")}refreshData(){const{nodes:e,edges:r,combos:i}=this.getData();e.forEach(a=>{this.pushChange({value:a,original:a,type:Qi.NodeUpdated})}),r.forEach(a=>{this.pushChange({value:a,original:a,type:Qi.EdgeUpdated})}),i.forEach(a=>{this.pushChange({value:a,original:a,type:Qi.ComboUpdated})})}syncNodeLikeDatum(e){const{model:r}=this,i=Fe(e);if(!r.hasNode(i))return;const a=Wo(r.getNode(i)),o=_g(a,e);r.mergeNodeData(i,o)}syncEdgeDatum(e){const{model:r}=this,i=Fe(e);if(!r.hasEdge(i))return;const a=Wo(r.getEdge(i)),o=_g(a,e);r.mergeEdgeData(i,o)}updateEdgeData(e=[]){if(!e.length)return;const{model:r}=this;this.batch(()=>{e.forEach(i=>{const a=Fe(i),o=Wo(r.getEdge(a));if(z1(o,i))return;i.source&&o.source!==i.source&&r.updateEdgeSource(a,i.source),i.target&&o.target!==i.target&&r.updateEdgeTarget(a,i.target);const s=_g(o,i);this.pushChange({value:s,original:o,type:Qi.EdgeUpdated}),r.mergeEdgeData(a,s)})}),this.computeZIndex({edges:e},"update")}updateComboData(e=[]){if(!e.length)return;const{model:r}=this;r.batch(()=>{const i=[];e.forEach(a=>{const o=Fe(a),s=Wo(r.getNode(o));if(z1(s,a))return;const l=_g(s,a);this.pushChange({value:l,original:s,type:Qi.ComboUpdated}),r.mergeNodeData(o,l),i.push(l)}),this.updateNodeLikeHierarchy(i)}),this.computeZIndex({combos:e},"update")}setParent(e,r,i,a=!0){if(e===r)return;const o=this.getNodeLikeDatum(e),s=lA(o);if(s!==r&&i===Ni){const l={id:e,combo:r};this.isCombo(e)?this.syncNodeLikeDatum(l):this.syncNodeLikeDatum(l)}this.model.setParent(e,r,i),a&&i===Ni&&Jrt([s,r]).forEach(l=>{l!==void 0&&this.refreshComboData(l)})}refreshComboData(e){const r=this.getComboData([e])[0],i=this.getAncestorsData(e,Ni);r&&this.pushChange({value:r,original:r,type:Qi.ComboUpdated}),i.forEach(a=>{this.pushChange({value:a,original:a,type:Qi.ComboUpdated})})}getElementPosition(e){const r=this.getElementDataById(e);return Po(r)}translateNodeLikeBy(e,r){this.isCombo(e)?this.translateComboBy(e,r):this.translateNodeBy(e,r)}translateNodeLikeTo(e,r){this.isCombo(e)?this.translateComboTo(e,r):this.translateNodeTo(e,r)}translateNodeBy(e,r){const i=this.getElementPosition(e),a=Jn(i,[...r,0].slice(0,3));this.translateNodeTo(e,a)}translateNodeTo(e,r){const[i=0,a=0,o=0]=r;this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:e,style:{x:i,y:a,z:o}}])})}translateComboBy(e,r){const[i=0,a=0,o=0]=r;if([i,a,o].some(isNaN)||[i,a,o].every(c=>c===0))return;const s=this.getComboData([e])[0];if(!s)return;const l=new Set;px(s,c=>{const u=Fe(c);if(l.has(u))return;l.add(u);const[d,f,h]=Po(c),p=_g(c,{style:{x:d+i,y:f+a,z:h+o}});this.pushChange({value:p,original:c,type:this.isCombo(u)?Qi.ComboUpdated:Qi.NodeUpdated}),this.model.mergeNodeData(u,p)},c=>this.getChildrenData(Fe(c)),"BT")}translateComboTo(e,r){var i;if(r.some(isNaN))return;const[a=0,o=0,s=0]=r,l=(i=this.getComboData([e]))===null||i===void 0?void 0:i[0];if(!l)return;const[c,u,d]=Po(l),f=a-c,h=o-u,p=s-d;px(l,g=>{const m=Fe(g),[v,y,b]=Po(g),x=_g(g,{style:{x:v+f,y:y+h,z:b+p}});this.pushChange({value:x,original:g,type:this.isCombo(m)?Qi.ComboUpdated:Qi.NodeUpdated}),this.model.mergeNodeData(m,x)},g=>this.getChildrenData(Fe(g)),"BT")}removeData(e){const{nodes:r,edges:i,combos:a}=e;this.batch(()=>{this.removeEdgeData(i),this.removeNodeData(r),this.removeComboData(a),this.latestRemovedComboIds=new Set(a)})}removeNodeData(e=[]){e.length&&this.batch(()=>{e.forEach(r=>{this.removeEdgeData(this.getRelatedEdgesData(r).map(Fe)),this.pushChange({value:this.getNodeData([r])[0],type:Qi.NodeRemoved}),this.removeNodeLikeHierarchy(r)}),this.model.removeNodes(e)})}removeEdgeData(e=[]){e.length&&(e.forEach(r=>this.pushChange({value:this.getEdgeData([r])[0],type:Qi.EdgeRemoved})),this.model.removeEdges(e))}removeComboData(e=[]){e.length&&this.batch(()=>{e.forEach(r=>{this.pushChange({value:this.getComboData([r])[0],type:Qi.ComboRemoved}),this.removeNodeLikeHierarchy(r),this.comboIds.delete(r)}),this.model.removeNodes(e)})}removeNodeLikeHierarchy(e){if(this.model.hasTreeStructure(Ni)){const r=lA(this.getNodeLikeDatum(e));this.setParent(e,void 0,Ni,!1),this.model.getChildren(e,Ni).forEach(i=>{const a=Wo(i),o=Fe(a);this.setParent(Fe(a),r,Ni,!1);const s=_g(a,{id:Fe(a),combo:r});this.pushChange({value:s,original:a,type:this.isCombo(o)?Qi.ComboUpdated:Qi.NodeUpdated}),this.model.mergeNodeData(Fe(a),s)}),Nn(r)||this.refreshComboData(r)}}getElementType(e){if(this.model.hasNode(e))return this.isCombo(e)?"combo":"node";if(this.model.hasEdge(e))return"edge";throw new Error(up(`Unknown element type of id: ${e}`))}destroy(){const{model:e}=this,r=e.getAllNodes(),i=e.getAllEdges();e.removeEdges(i.map(a=>a.id)),e.removeNodes(r.map(a=>a.id)),this.context={}}}var yS=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};class UTt{constructor(e){this.elementMap={},this.shapeTypeMap={},this.paletteStyle={},this.defaultStyle={},this.stateStyle={},this.visibilityCache=new WeakMap,this.context=e}init(){this.initContainer()}initContainer(){if(!this.container||this.container.destroyed){const{canvas:e}=this.context;this.container=e.appendChild(new Bo({className:"elements"}))}}emit(e,r){r.silence||Ro(this.context.graph,e)}forEachElementData(e){_y.forEach(r=>{const i=this.context.model.getElementsDataByType(r);e(r,i)})}getElementType(e,r){var i;const{options:a,graph:o}=this.context,s=((i=a[e])===null||i===void 0?void 0:i.type)||r.type;return s?typeof s=="string"?s:s.call(o,r):e==="edge"?"line":"circle"}getTheme(e){return _Ee(this.context.options)[e]||{}}getThemeStyle(e){return this.getTheme(e).style||{}}getThemeStateStyle(e,r){const{state:i={}}=this.getTheme(e);return Object.assign({},...r.map(a=>i[a]||{}))}computePaletteStyle(){const{options:e}=this.context;this.paletteStyle={},this.forEachElementData((r,i)=>{var a,o;const s=Object.assign({},Aoe((a=this.getTheme(r))===null||a===void 0?void 0:a.palette),Aoe((o=e[r])===null||o===void 0?void 0:o.palette));s!=null&&s.field&&Object.assign(this.paletteStyle,Nut(i,s))})}getPaletteStyle(e,r){const i=this.paletteStyle[r];return i?e==="edge"?{stroke:i}:{fill:i}:{}}computeElementDefaultStyle(e,r){var i;const{options:a}=this.context,o=((i=a[e])===null||i===void 0?void 0:i.style)||{};"transform"in o&&Array.isArray(o.transform)&&(o.transform=[...o.transform]),this.defaultStyle[Fe(r.datum)]=Toe(o,r)}computeElementsDefaultStyle(e){const{graph:r}=this.context;this.forEachElementData((i,a)=>{const o=a.length;for(let s=0;s<o;s++){const l=a[s];(e===void 0||e.includes(Fe(l)))&&this.computeElementDefaultStyle(i,{datum:l,graph:r})}})}getDefaultStyle(e){return this.defaultStyle[e]||{}}getElementState(e){try{const{model:r}=this.context;return r.getElementState(e)}catch{return[]}}getElementStateStyle(e,r,i){var a,o;const{options:s}=this.context,l=((o=(a=s[e])===null||a===void 0?void 0:a.state)===null||o===void 0?void 0:o[r])||{};return Toe(l,i)}computeElementStatesStyle(e,r,i){this.stateStyle[Fe(i.datum)]=Object.assign({},...r.map(a=>this.getElementStateStyle(e,a,i)))}computeElementsStatesStyle(e){const{graph:r}=this.context;this.forEachElementData((i,a)=>{const o=a.length;for(let s=0;s<o;s++){const l=a[s];if(e===void 0||e.includes(Fe(l))){const c=this.getElementState(Fe(l));this.computeElementStatesStyle(i,c,{datum:l,graph:r})}}})}getStateStyle(e){return this.stateStyle[e]||{}}computeStyle(e,r){e&&["translate","zIndex"].includes(e)||(this.computePaletteStyle(),this.computeElementsDefaultStyle(r),this.computeElementsStatesStyle(r))}getElement(e){return this.elementMap[e]}getNodes(){return this.context.model.getNodeData().map(({id:e})=>this.elementMap[e])}getEdges(){return this.context.model.getEdgeData().map(e=>this.elementMap[Fe(e)])}getCombos(){return this.context.model.getComboData().map(({id:e})=>this.elementMap[e])}getElementComputedStyle(e,r){const i=Fe(r),a=this.getThemeStyle(e),o=this.getPaletteStyle(e,i),s=r.style||{},l=this.getDefaultStyle(i),c=this.getThemeStateStyle(e,this.getElementState(i)),u=this.getStateStyle(i),d=Object.assign({},a,o,s,l,c,u);if(e==="combo"){const f=this.context.model.getChildrenData(i),p=!!d.collapsed?[]:f.map(Fe).filter(g=>this.getElement(g));Object.assign(d,{childrenNode:p,childrenData:f})}return d}getDrawData(e){this.init();const r=this.computeChangesAndDrawData(e);if(!r)return null;const{type:i="draw",stage:a=i}=e;return this.markDestroyElement(r.drawData),this.computeStyle(a),{type:i,stage:a,data:r}}draw(e={animation:!0}){const r=this.getDrawData(e);if(!r)return;const{data:{drawData:{add:i,update:a,remove:o}}}=r;return this.destroyElements(o,e),this.createElements(i,e),this.updateElements(a,e),this.setAnimationTask(e,r)}preLayoutDraw(){return yS(this,arguments,void 0,function*(e={animation:!0}){var r,i;const a=this.getDrawData(e);if(!a)return;const{data:{drawData:o}}=a;yield(i=(r=this.context.layout)===null||r===void 0?void 0:r.preLayout)===null||i===void 0?void 0:i.call(r,o);const{add:s,update:l,remove:c}=o;return this.destroyElements(c,e),this.createElements(s,e),this.updateElements(l,e),this.setAnimationTask(e,a)})}setAnimationTask(e,r){const{animation:i,silence:a}=e,{data:{dataChanges:o,drawData:s},stage:l,type:c}=r;return this.context.animation.animate(i,a?{}:{before:()=>this.emit(new lo(Ut.BEFORE_DRAW,{dataChanges:o,animation:i,stage:l,render:c==="render"}),e),beforeAnimate:u=>this.emit(new xu(Ut.BEFORE_ANIMATE,kl.DRAW,u,s),e),afterAnimate:u=>this.emit(new xu(Ut.AFTER_ANIMATE,kl.DRAW,u,s),e),after:()=>this.emit(new lo(Ut.AFTER_DRAW,{dataChanges:o,animation:i,stage:l,render:c==="render",firstRender:this.context.graph.rendered===!1}),e)})}computeChangesAndDrawData(e){const{model:r}=this.context,i=r.getChanges(),a=vK(i);if(a.length===0)return null;const{NodeAdded:o=[],NodeUpdated:s=[],NodeRemoved:l=[],EdgeAdded:c=[],EdgeUpdated:u=[],EdgeRemoved:d=[],ComboAdded:f=[],ComboUpdated:h=[],ComboRemoved:p=[]}=H4(a,y=>y.type),g=y=>new Map(y.map(b=>{const x=b.value;return[Fe(x),x]})),m={add:{nodes:g(o),edges:g(c),combos:g(f)},update:{nodes:g(s),edges:g(u),combos:g(h)},remove:{nodes:g(l),edges:g(d),combos:g(p)}},v=this.transformData(m,e);return r.clearChanges(),{dataChanges:i,drawData:v}}transformData(e,r){const i=this.context.transform.getTransformInstance();return Object.values(i).reduce((a,o)=>o.beforeDraw(a,r),e)}createElement(e,r,i){var a;const o=Fe(r);if(this.getElement(o))return;const l=this.getElementType(e,r),c=this.getElementComputedStyle(e,r),u=Dp(e,l);if(!u)return gh.warn(`The element ${l} of ${e} is not registered.`);this.emit(new B1(Ut.BEFORE_ELEMENT_CREATE,e,r),i);const d=this.container.appendChild(new u({id:o,context:this.context,style:c}));this.shapeTypeMap[o]=l,this.elementMap[o]=d;const{stage:f="enter"}=i;(a=this.context.animation)===null||a===void 0||a.add({element:d,elementType:e,stage:f,originalStyle:Object.assign({},d.attributes),updatedStyle:c},{after:()=>{var h;this.emit(new B1(Ut.AFTER_ELEMENT_CREATE,e,r),i),(h=d.onCreate)===null||h===void 0||h.call(d)}})}createElements(e,r){const{nodes:i,edges:a,combos:o}=e;[["node",i],["combo",o],["edge",a]].forEach(([l,c])=>{c.forEach(u=>this.createElement(l,u,r))})}getUpdateStageStyle(e,r,i){const{stage:a="update"}=i;if(a==="translate")if(e==="node"||e==="combo"){const{style:{x:o=0,y:s=0,z:l=0}={}}=r;return{x:o,y:s,z:l}}else return{};return this.getElementComputedStyle(e,r)}updateElement(e,r,i){var a;const o=Fe(r),{stage:s="update"}=i,l=this.getElement(o);if(!l)return()=>null;this.emit(new B1(Ut.BEFORE_ELEMENT_UPDATE,e,r),i);const c=this.getElementType(e,r),u=this.getUpdateStageStyle(e,r,i);this.shapeTypeMap[o]!==c&&(l.destroy(),delete this.shapeTypeMap[o],delete this.elementMap[o],this.createElement(e,r,{animation:!1,silence:!0}));const d=s!=="visibility"?s:u.visibility==="hidden"?"hide":"show";d==="hide"&&delete u.visibility,(a=this.context.animation)===null||a===void 0||a.add({element:l,elementType:e,stage:d,originalStyle:Object.assign({},l.attributes),updatedStyle:u},{before:()=>{const f=this.elementMap[o];s!=="collapse"&&Yj(f,u),s==="visibility"&&(DTt(f,"opacity")||ITt(f,"opacity"),this.visibilityCache.set(f,d==="show"?"visible":"hidden"),d==="show"&&by(f,"visible"))},after:()=>{var f;const h=this.elementMap[o];s==="collapse"&&Yj(h,u),d==="hide"&&by(h,this.visibilityCache.get(h)),this.emit(new B1(Ut.AFTER_ELEMENT_UPDATE,e,r),i),(f=h.onUpdate)===null||f===void 0||f.call(h)}})}updateElements(e,r){const{nodes:i,edges:a,combos:o}=e;[["node",i],["combo",o],["edge",a]].forEach(([l,c])=>{c.forEach(u=>this.updateElement(l,u,r))})}markDestroyElement(e){Object.values(e.remove).forEach(r=>{r.forEach(i=>{const a=Fe(i),o=this.getElement(a);o&&Rft(o)})})}destroyElement(e,r,i){var a;const{stage:o="exit"}=i,s=Fe(r),l=this.elementMap[s];if(!l)return()=>null;this.emit(new B1(Ut.BEFORE_ELEMENT_DESTROY,e,r),i),(a=this.context.animation)===null||a===void 0||a.add({element:l,elementType:e,stage:o,originalStyle:Object.assign({},l.attributes),updatedStyle:{}},{after:()=>{var c;this.clearElement(s),l.destroy(),(c=l.onDestroy)===null||c===void 0||c.call(l),this.emit(new B1(Ut.AFTER_ELEMENT_DESTROY,e,r),i)}})}destroyElements(e,r){const{nodes:i,edges:a,combos:o}=e;[["combo",o],["edge",a],["node",i]].forEach(([l,c])=>{c.forEach(u=>this.destroyElement(l,u,r))})}clearElement(e){delete this.paletteStyle[e],delete this.defaultStyle[e],delete this.stateStyle[e],delete this.elementMap[e],delete this.shapeTypeMap[e]}alignLayoutResultToElement(e,r){var i,a;const o=(i=e.nodes)===null||i===void 0?void 0:i.find(s=>Fe(s)===r);if(o){const s=Po(this.context.model.getNodeLikeDatum(r)),l=Po(o),c=Ci(s,l);(a=e.nodes)===null||a===void 0||a.forEach(u=>{var d,f,h;!((d=u.style)===null||d===void 0)&&d.x&&(u.style.x+=c[0]),!((f=u.style)===null||f===void 0)&&f.y&&(u.style.y+=c[1]),!((h=u.style)===null||h===void 0)&&h.z&&(u.style.z+=c[2]||0)})}}collapseNode(e,r){return yS(this,void 0,void 0,function*(){var i;const{animation:a,align:o}=r,{model:s,layout:l}=this.context,c=this.computeChangesAndDrawData({stage:"collapse",animation:a});if(!c)return;this.markDestroyElement(c.drawData);const u=yield l.simulate();o&&this.alignLayoutResultToElement(u,e),s.updateData(u);const d=this.computeChangesAndDrawData({stage:"collapse",animation:a});if(!d)return;const{drawData:f}=d,{add:h,remove:p,update:g}=f;this.markDestroyElement(f);const m={animation:a,stage:"collapse",data:f};this.destroyElements(p,m),this.createElements(h,m),this.updateElements(g,m),yield(i=this.context.animation.animate(a,{beforeAnimate:v=>this.emit(new xu(Ut.BEFORE_ANIMATE,kl.COLLAPSE,v,f),m),afterAnimate:v=>this.emit(new xu(Ut.AFTER_ANIMATE,kl.COLLAPSE,v,f),m)},{collapse:{target:e,descendants:Array.from(p.nodes).map(([,v])=>Fe(v)),position:Po(g.nodes.get(e))}}))===null||i===void 0?void 0:i.finished})}expandNode(e,r){return yS(this,void 0,void 0,function*(){var i;const{model:a,layout:o}=this.context,{animation:s,align:l}=r,c=Po(a.getNodeData([e])[0]),u=this.computeChangesAndDrawData({stage:"expand",animation:s});if(!u)return;const{drawData:{add:d}}=u;this.createElements(d,{animation:!1,stage:"expand",target:e}),this.context.animation.clear();const f=yield o.simulate();l&&this.alignLayoutResultToElement(f,e),a.updateData(f),this.computeStyle("expand");const h=this.computeChangesAndDrawData({stage:"collapse",animation:s});if(!h)return;const{drawData:p}=h,{update:g}=p,m={animation:s,stage:"expand",data:p};d.edges.forEach(v=>g.edges.set(Fe(v),v)),d.nodes.forEach(v=>g.nodes.set(Fe(v),v)),this.updateElements(g,m),yield(i=this.context.animation.animate(s,{beforeAnimate:v=>this.emit(new xu(Ut.BEFORE_ANIMATE,kl.EXPAND,v,p),m),afterAnimate:v=>this.emit(new xu(Ut.AFTER_ANIMATE,kl.EXPAND,v,p),m)},{expand:{target:e,descendants:Array.from(d.nodes).map(([,v])=>Fe(v)),position:c}}))===null||i===void 0?void 0:i.finished})}collapseCombo(e,r){return yS(this,void 0,void 0,function*(){var i;const{model:a,element:o}=this.context;if(a.getAncestorsData(e,Ni).some(m=>Hl(m)))return;const s=o.getElement(e),l=s.getComboPosition(Object.assign(Object.assign({},s.attributes),{collapsed:!0})),c=this.computeChangesAndDrawData({stage:"collapse",animation:r});if(!c)return;const{dataChanges:u,drawData:d}=c;this.markDestroyElement(d);const{update:f,remove:h}=d,p={animation:r,stage:"collapse",data:d};this.destroyElements(h,p),this.updateElements(f,p);const g=m=>Array.from(m).map(([,v])=>Fe(v));yield(i=this.context.animation.animate(r,{before:()=>this.emit(new lo(Ut.BEFORE_DRAW,{dataChanges:u,animation:r}),p),beforeAnimate:m=>this.emit(new xu(Ut.BEFORE_ANIMATE,kl.COLLAPSE,m,d),p),afterAnimate:m=>this.emit(new xu(Ut.AFTER_ANIMATE,kl.COLLAPSE,m,d),p),after:()=>this.emit(new lo(Ut.AFTER_DRAW,{dataChanges:u,animation:r}),p)},{collapse:{target:e,descendants:[...g(h.nodes),...g(h.combos)],position:l}}))===null||i===void 0?void 0:i.finished})}expandCombo(e,r){return yS(this,void 0,void 0,function*(){var i;const{model:a}=this.context,o=Po(a.getComboData([e])[0]);this.computeStyle("expand");const s=this.computeChangesAndDrawData({stage:"expand",animation:r});if(!s)return;const{dataChanges:l,drawData:c}=s,{add:u,update:d}=c,f={animation:r,stage:"expand",data:c,target:e};this.createElements(u,f),this.updateElements(d,f);const h=p=>Array.from(p).map(([,g])=>Fe(g));yield(i=this.context.animation.animate(r,{before:()=>this.emit(new lo(Ut.BEFORE_DRAW,{dataChanges:l,animation:r}),f),beforeAnimate:p=>this.emit(new xu(Ut.BEFORE_ANIMATE,kl.EXPAND,p,c),f),afterAnimate:p=>this.emit(new xu(Ut.AFTER_ANIMATE,kl.EXPAND,p,c),f),after:()=>this.emit(new lo(Ut.AFTER_DRAW,{dataChanges:l,animation:r}),f)},{expand:{target:e,descendants:[...h(u.nodes),...h(u.combos)],position:o}}))===null||i===void 0?void 0:i.finished})}clear(){this.container.destroy(),this.initContainer(),this.elementMap={},this.shapeTypeMap={},this.defaultStyle={},this.stateStyle={},this.paletteStyle={}}destroy(){this.clear(),this.container.destroy(),this.context={}}}var U1=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})},VTt=function(n,e){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(r[i[a]]=n[i[a]]);return r};class GTt{get presetOptions(){return{animation:!!wEe(this.context.options,!0)}}get options(){const{options:e}=this.context;return e.layout}constructor(e){this.instances=[],this.context=e}getLayoutInstance(){return this.instances}preLayout(e){return U1(this,void 0,void 0,function*(){var r,i,a,o;const{graph:s,model:l}=this.context,{add:c}=e;Ro(s,new lo(Ut.BEFORE_LAYOUT,{type:"pre"}));const u=yield(r=this.context.layout)===null||r===void 0?void 0:r.simulate();(i=u==null?void 0:u.nodes)===null||i===void 0||i.forEach(d=>{const f=Fe(d),h=c.nodes.get(f);l.syncNodeLikeDatum(d),h&&Object.assign(h.style,d.style)}),(a=u==null?void 0:u.edges)===null||a===void 0||a.forEach(d=>{const f=Fe(d),h=c.edges.get(f);l.syncEdgeDatum(d),h&&Object.assign(h.style,d.style)}),(o=u==null?void 0:u.combos)===null||o===void 0||o.forEach(d=>{const f=Fe(d),h=c.combos.get(f);l.syncNodeLikeDatum(d),h&&Object.assign(h.style,d.style)}),Ro(s,new lo(Ut.AFTER_LAYOUT,{type:"pre"})),this.transformDataAfterLayout("pre",e)})}postLayout(){return U1(this,arguments,void 0,function*(e=this.options){if(!e)return;const r=Array.isArray(e)?e:[e],{graph:i}=this.context;Ro(i,new lo(Ut.BEFORE_LAYOUT,{type:"post"}));for(let a=0;a<r.length;a++){const o=r[a],s=this.getLayoutData(o),l=Object.assign(Object.assign({},this.presetOptions),o);Ro(i,new lo(Ut.BEFORE_STAGE_LAYOUT,{options:l,index:a}));const c=yield this.stepLayout(s,l,a);Ro(i,new lo(Ut.AFTER_STAGE_LAYOUT,{options:l,index:a})),o.animation||this.updateElementPosition(c,!1)}Ro(i,new lo(Ut.AFTER_LAYOUT,{type:"post"})),this.transformDataAfterLayout("post")})}transformDataAfterLayout(e,r){const i=this.context.transform.getTransformInstance();Object.values(i).forEach(a=>a.afterLayout(e,r))}simulate(){return U1(this,void 0,void 0,function*(){if(!this.options)return{};const e=Array.isArray(this.options)?this.options:[this.options];let r={};for(let i=0;i<e.length;i++){const a=e[i],o=this.getLayoutData(a);r=yield this.stepLayout(o,Object.assign(Object.assign(Object.assign({},this.presetOptions),a),{animation:!1}),i)}return r})}stepLayout(e,r,i){return U1(this,void 0,void 0,function*(){return kft(r)?yield this.treeLayout(e,r,i):yield this.graphLayout(e,r,i)})}graphLayout(e,r,i){return U1(this,void 0,void 0,function*(){const{animation:a,enableWorker:o,iterations:s=300}=r,l=this.initGraphLayout(r);if(!l)return{};if(this.instances[i]=l,this.instance=l,o){const u=l;return this.supervisor=new vSt(u.graphData2LayoutModel(e),u.instance,{iterations:s}),xP(yield this.supervisor.execute())}if(oH(l))return a?yield l.execute(e,{onTick:u=>{this.updateElementPosition(u,!1)}}):(l.execute(e),l.stop(),l.tick(s));const c=yield l.execute(e);if(a){const u=this.updateElementPosition(c,a);yield u==null?void 0:u.finished}return c})}treeLayout(e,r,i){return U1(this,void 0,void 0,function*(){const{type:a,animation:o}=r,s=Dp("layout",a);if(!s)return{};const{nodes:l=[],edges:c=[]}=e,u=new zo({nodes:l.map(g=>({id:Fe(g),data:g.data||{}})),edges:c.map(g=>({id:Fe(g),source:g.source,target:g.target,data:g.data||{}}))});BTt(u);const d={nodes:[],edges:[]},f={nodes:[],edges:[]};u.getRoots(Pc).forEach(g=>{px(g,x=>{x.children=u.getSuccessors(x.id)},x=>u.getSuccessors(x.id),"TB");const m=s(g,r),{x:v,y,z:b=0}=m;px(m,x=>{const{id:_,x:S,y:M,z:E=0}=x;d.nodes.push({id:_,style:{x:v,y,z:b}}),f.nodes.push({id:_,style:{x:S,y:M,z:E}})},x=>x.children,"TB")});const p=this.inferTreeLayoutOffset(f);if(ipe(f,p),o){ipe(d,p),this.updateElementPosition(d,!1);const g=this.updateElementPosition(f,o);yield g==null?void 0:g.finished}return f})}inferTreeLayoutOffset(e){var r;let[i,a]=[1/0,-1/0],[o,s]=[1/0,-1/0];(r=e.nodes)===null||r===void 0||r.forEach(m=>{const{x:v=0,y=0}=m.style||{};i=Math.min(i,v),a=Math.max(a,v),o=Math.min(o,y),s=Math.max(s,y)});const{canvas:l}=this.context,c=l.getSize(),[u,d]=l.getCanvasByViewport([0,0]),[f,h]=l.getCanvasByViewport(c);if(i>=u&&a<=f&&o>=d&&s<=h)return[0,0];const p=(u+f)/2,g=(d+h)/2;return[p-(i+a)/2,g-(o+s)/2]}stopLayout(){this.instance&&oH(this.instance)&&(this.instance.stop(),this.instance=void 0),this.supervisor&&(this.supervisor.stop(),this.supervisor=void 0),this.animationResult&&(this.animationResult.finish(),this.animationResult=void 0)}getLayoutData(e){const{nodeFilter:r=()=>!0,preLayout:i=!1,isLayoutInvisibleNodes:a=!1}=e,{nodes:o,edges:s,combos:l}=this.context.model.getData(),{element:c,model:u}=this.context,d=m=>c.getElement(m),f=i?m=>{var v;return!a&&(((v=m.style)===null||v===void 0?void 0:v.visibility)==="hidden"||u.getAncestorsData(m.id,Pc).some(Hl)||u.getAncestorsData(m.id,Ni).some(Hl))?!1:r(m)}:m=>{const v=Fe(m),y=d(v);return!y||uD(y)?!1:r(m)},h=o.filter(f),p=new Map(h.map(m=>[Fe(m),m]));l.forEach(m=>p.set(Fe(m),m));const g=s.filter(({source:m,target:v})=>p.has(m)&&p.has(v));return{nodes:h,edges:g,combos:l}}initGraphLayout(e){var r;const{element:i,viewport:a}=this.context,{type:o,enableWorker:s,animation:l,iterations:c}=e,u=VTt(e,["type","enableWorker","animation","iterations"]),[d,f]=a.getCanvasSize(),h=[d/2,f/2],p=(r=e==null?void 0:e.nodeSize)!==null&&r!==void 0?r:b=>{const x=i==null?void 0:i.getElement(b.id);return x?x.attributes.size:i==null?void 0:i.getElementComputedStyle("node",b).size},g=Dp("layout",o);if(!g)return gh.warn(`The layout of ${o} is not registered.`);const m=Object.getPrototypeOf(g.prototype)===gD.prototype?g:$ft(g,this.context),v=new m(this.context),y={nodeSize:p,width:d,height:f,center:h};switch(v.id){case"d3-force":case"d3-force-3d":Object.assign(y,{center:{x:d/2,y:f/2,z:0}});break}return xl(v.options,y,u),v}updateElementPosition(e,r){const{model:i,element:a}=this.context;return a?(i.updateData(e),a.draw({animation:r,silence:!0})):null}destroy(){var e;this.stopLayout(),this.context={},(e=this.supervisor)===null||e===void 0||e.kill(),this.supervisor=void 0,this.instance=void 0,this.instances=[],this.animationResult=void 0}}const ipe=(n,e)=>{var r;const[i,a]=e;(r=n.nodes)===null||r===void 0||r.forEach(o=>{if(o.style){const{x:s=0,y:l=0}=o.style;o.style.x=s+i,o.style.y=l+a}else o.style={x:i,y:a}})};function jTt(n){return[HTt].reduce((r,i)=>i(r),n)}function HTt(n){return!n.layout||Array.isArray(n.layout)||"preLayout"in n.layout||["antv-dagre","combo-combined","compact-box","circular","concentric","dagre","fishbone","grid","indented","mds","radial","random","snake","dendrogram","mindmap"].includes(n.layout.type)&&(n.layout.preLayout=!0),n}class WTt extends wX{constructor(e){super(e),this.category="plugin",this.setPlugins(this.context.options.plugins||[])}setPlugins(e){this.setExtensions(e)}getPluginInstance(e){const r=this.extensionMap[e];if(r)return r;gh.warn(`Cannot find the plugin ${e}, will try to find it by type.`);const i=this.extensions.find(a=>a.type===e);if(i)return this.extensionMap[i.key]}}const $A=["update-related-edges","collapse-expand-node","collapse-expand-combo","get-edge-actual-ends","arrange-draw-order"];class qTt extends wX{constructor(e){super(e),this.category="transform",this.setTransforms(this.context.options.transforms||[])}getTransforms(){}setTransforms(e){this.setExtensions([...$A.slice(0,$A.length-1),...e,$A[$A.length-1]])}getTransformInstance(e){return e?this.extensionMap[e]:this.extensionMap}}var bS=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};class YTt{get padding(){return mh(this.context.options.padding)}get paddingOffset(){const[e,r,i,a]=this.padding,[o,s,l]=[(a-r)/2,(e-i)/2,0];return[o,s,l]}constructor(e){this.landmarkCounter=0,this.context=e;const[r,i]=this.paddingOffset,{zoom:a,rotation:o,x:s=r,y:l=i}=e.options;this.transform({mode:"absolute",scale:a,translate:[s,l],rotate:o},!1)}get camera(){const{canvas:e}=this.context;return new Proxy(e.getCamera(),{get:(r,i)=>{const o=Object.entries(e.getLayers()).filter(([l])=>!["main"].includes(l)).map(([,l])=>l.getCamera()),s=r[i];if(typeof s=="function")return(...l)=>{const c=s.apply(r,l);return o.forEach(u=>{u[i].apply(u,l)}),c}}})}createLandmark(e){return this.camera.createLandmark(`landmark-${this.landmarkCounter++}`,e)}getAnimation(e){const r=wEe(this.context.options,e);return r?gy(Object.assign({},r),["easing","duration"]):!1}getCanvasSize(){const{canvas:e}=this.context,{width:r=0,height:i=0}=e.getConfig();return[r,i]}getCanvasCenter(){const{canvas:e}=this.context,{width:r=0,height:i=0}=e.getConfig();return[r/2,i/2,0]}getViewportCenter(){const[e,r]=this.camera.getPosition();return[e,r,0]}getGraphCenter(){return this.context.graph.getViewportByCanvas(this.getCanvasCenter())}getZoom(){return this.camera.getZoom()}getRotation(){return this.camera.getRoll()}getTranslateOptions(e){const{camera:r}=this,{mode:i,translate:a=[]}=e,o=this.getZoom(),s=r.getPosition(),l=r.getFocalPoint(),[c,u]=this.getCanvasCenter(),[d=0,f=0,h=0]=a,p=Zd([-d,-f,-h],o);return i==="relative"?{position:Jn(s,p),focalPoint:Jn(l,p)}:{position:Jn([c,u,s[2]],p),focalPoint:Jn([c,u,l[2]],p)}}getRotateOptions(e){const{mode:r,rotate:i=0}=e;return{roll:r==="relative"?this.camera.getRoll()+i:i}}getZoomOptions(e){const{zoomRange:r}=this.context.options,i=this.camera.getZoom(),{mode:a,scale:o=1}=e;return Ta(a==="relative"?i*o:o,...r)}transform(e,r){return bS(this,void 0,void 0,function*(){const{graph:i}=this.context,{translate:a,rotate:o,scale:s,origin:l}=e;this.cancelAnimation();const c=this.getAnimation(r);if(Ro(i,new FA(Ut.BEFORE_TRANSFORM,e)),!o&&s&&!a&&l&&!c){this.camera.setZoomByViewportPoint(this.getZoomOptions(e),l),Ro(i,new FA(Ut.AFTER_TRANSFORM,e));return}const u={};if(a&&Object.assign(u,this.getTranslateOptions(e)),on(o)&&Object.assign(u,this.getRotateOptions(e)),on(s)&&Object.assign(u,{zoom:this.getZoomOptions(e)}),c)return Ro(i,new xu(Ut.BEFORE_ANIMATE,kl.TRANSFORM,null,e)),new Promise(d=>{this.transformResolver=d,this.camera.gotoLandmark(this.createLandmark(u),Object.assign(Object.assign({},c),{onfinish:()=>{Ro(i,new xu(Ut.AFTER_ANIMATE,kl.TRANSFORM,null,e)),Ro(i,new FA(Ut.AFTER_TRANSFORM,e)),this.transformResolver=void 0,d()}}))});this.camera.gotoLandmark(this.createLandmark(u),{duration:0}),Ro(i,new FA(Ut.AFTER_TRANSFORM,e))})}fitView(e,r){return bS(this,void 0,void 0,function*(){const[i,a,o,s]=this.padding,{when:l="always",direction:c="both"}=e||{},[u,d]=this.context.canvas.getSize(),f=u-s-a,h=d-i-o,p=this.context.canvas.getBounds(),g=this.getBBoxInViewport(p),[m,v]=cv(g),y=c==="x"&&m>=f||c==="y"&&v>=h||c==="both"&&m>=f&&v>=h;if(l==="overflow"&&!y)return yield this.fitCenter({animation:r});const b=f/m,x=h/v,_=c==="x"?b:c==="y"?x:Math.min(b,x),S=this.getAnimation(r);yield this.transform({mode:"relative",scale:_,translate:Jn(Ci(this.getCanvasCenter(),this.getBBoxInViewport(p).center),Zd(this.paddingOffset,_))},S)})}fitCenter(e){return bS(this,void 0,void 0,function*(){const r=this.context.canvas.getBounds();yield this.focus(r,e)})}focusElements(e){return bS(this,arguments,void 0,function*(r,i={}){const{element:a}=this.context;if(!a)return;const o=l=>i.shapes?l.getShape(i.shapes).getRenderBounds():l.getRenderBounds(),s=TM(r.map(l=>o(a.getElement(l))));yield this.focus(s,i)})}focus(e,r){return bS(this,void 0,void 0,function*(){const i=this.context.graph.getViewportByCanvas(e.center),a=r.position||this.getCanvasCenter(),o=Ci(a,i);yield this.transform({mode:"relative",translate:Jn(o,this.paddingOffset)},r.animation)})}getBBoxInViewport(e){const{min:r,max:i}=e,{graph:a}=this.context,[o,s]=a.getViewportByCanvas(r),[l,c]=a.getViewportByCanvas(i),u=new Bi;return u.setMinMax([o,s,0],[l,c,0]),u}isInViewport(e,r=!1,i=0){const{graph:a}=this.context,o=this.getCanvasSize(),[s,l]=a.getCanvasByViewport([0,0]),[c,u]=a.getCanvasByViewport(o);let d=new Bi;return d.setMinMax([s,l,0],[c,u,0]),i&&(d=uv(d,i)),Hx(e)?Kd(e,d):r?zct(e,d):d.intersects(e)}cancelAnimation(){var e,r;!((e=this.camera.landmarks)===null||e===void 0)&&e.length&&this.camera.cancelLandmarkAnimation(),(r=this.transformResolver)===null||r===void 0||r.call(this)}}var Fi=function(n,e,r,i){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function l(d){try{u(i.next(d))}catch(f){s(f)}}function c(d){try{u(i.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):a(d.value).then(l,c)}u((i=i.apply(n,e||[])).next())})};class xL extends pD{constructor(e){var r;super(),this.options={},this.rendered=!1,this.destroyed=!1,this.context={model:new zTt},this.isCollapsingExpanding=!1,this.onResize=xM(()=>{this.resize()},300),this._setOptions(Object.assign({},xL.defaultOptions,e),!0),this.context.graph=this,this.options.autoResize&&((r=globalThis.addEventListener)===null||r===void 0||r.call(globalThis,"resize",this.onResize))}getOptions(){return this.options}setOptions(e){this._setOptions(e,!1)}_setOptions(e,r){if(this.updateCanvas(e),Object.assign(this.options,jTt(e)),r){const{data:h}=e;h&&this.addData(h);return}const{behaviors:i,combo:a,data:o,edge:s,layout:l,node:c,plugins:u,theme:d,transforms:f}=e;i&&this.setBehaviors(i),o&&this.setData(o),c&&this.setNode(c),s&&this.setEdge(s),a&&this.setCombo(a),l&&this.setLayout(l),d&&this.setTheme(d),u&&this.setPlugins(u),f&&this.setTransforms(f)}getSize(){return this.context.canvas?this.context.canvas.getSize():[this.options.width||0,this.options.height||0]}setSize(e,r){e&&(this.options.width=e),r&&(this.options.height=r),this.resize(e,r)}setZoomRange(e){this.options.zoomRange=e}getZoomRange(){return this.options.zoomRange}setNode(e){this.options.node=e,this.context.model.refreshData()}setEdge(e){this.options.edge=e,this.context.model.refreshData()}setCombo(e){this.options.combo=e,this.context.model.refreshData()}getTheme(){return this.options.theme}setTheme(e){this.options.theme=cn(e)?e(this.getTheme()):e}setLayout(e){this.options.layout=cn(e)?e(this.getLayout()):e}getLayout(){return this.options.layout}setBehaviors(e){var r;this.options.behaviors=cn(e)?e(this.getBehaviors()):e,(r=this.context.behavior)===null||r===void 0||r.setBehaviors(this.options.behaviors)}updateBehavior(e){this.setBehaviors(r=>r.map(i=>typeof i=="object"&&i.key===e.key?Object.assign(Object.assign({},i),e):i))}getBehaviors(){return this.options.behaviors||[]}setPlugins(e){var r;this.options.plugins=cn(e)?e(this.getPlugins()):e,(r=this.context.plugin)===null||r===void 0||r.setPlugins(this.options.plugins)}updatePlugin(e){this.setPlugins(r=>r.map(i=>typeof i=="object"&&i.key===e.key?Object.assign(Object.assign({},i),e):i))}getPlugins(){return this.options.plugins||[]}getPluginInstance(e){return this.context.plugin.getPluginInstance(e)}setTransforms(e){var r;this.options.transforms=cn(e)?e(this.getTransforms()):e,(r=this.context.transform)===null||r===void 0||r.setTransforms(this.options.transforms)}updateTransform(e){this.setTransforms(r=>r.map(i=>typeof i=="object"&&i.key===e.key?Object.assign(Object.assign({},i),e):i)),this.context.model.refreshData()}getTransforms(){return this.options.transforms||[]}getData(){return this.context.model.getData()}getElementData(e){return Array.isArray(e)?e.map(r=>this.context.model.getElementDataById(r)):this.context.model.getElementDataById(e)}getNodeData(e){return e===void 0?this.context.model.getNodeData():Array.isArray(e)?this.context.model.getNodeData(e):this.context.model.getNodeLikeDatum(e)}getEdgeData(e){return e===void 0?this.context.model.getEdgeData():Array.isArray(e)?this.context.model.getEdgeData(e):this.context.model.getEdgeDatum(e)}getComboData(e){return e===void 0?this.context.model.getComboData():Array.isArray(e)?this.context.model.getComboData(e):this.context.model.getNodeLikeDatum(e)}setData(e){this.context.model.setData(cn(e)?e(this.getData()):e)}addData(e){this.context.model.addData(cn(e)?e(this.getData()):e)}addNodeData(e){this.context.model.addNodeData(cn(e)?e(this.getNodeData()):e)}addEdgeData(e){this.context.model.addEdgeData(cn(e)?e(this.getEdgeData()):e)}addComboData(e){this.context.model.addComboData(cn(e)?e(this.getComboData()):e)}addChildrenData(e,r){this.context.model.addChildrenData(e,r)}updateData(e){this.context.model.updateData(cn(e)?e(this.getData()):e)}updateNodeData(e){this.context.model.updateNodeData(cn(e)?e(this.getNodeData()):e)}updateEdgeData(e){this.context.model.updateEdgeData(cn(e)?e(this.getEdgeData()):e)}updateComboData(e){this.context.model.updateComboData(cn(e)?e(this.getComboData()):e)}removeData(e){this.context.model.removeData(cn(e)?e(this.getData()):e)}removeNodeData(e){this.context.model.removeNodeData(cn(e)?e(this.getNodeData()):e)}removeEdgeData(e){this.context.model.removeEdgeData(cn(e)?e(this.getEdgeData()):e)}removeComboData(e){this.context.model.removeComboData(cn(e)?e(this.getComboData()):e)}getElementType(e){return this.context.model.getElementType(e)}getRelatedEdgesData(e,r="both"){return this.context.model.getRelatedEdgesData(e,r)}getNeighborNodesData(e){return this.context.model.getNeighborNodesData(e)}getAncestorsData(e,r){return this.context.model.getAncestorsData(e,r)}getParentData(e,r){return this.context.model.getParentData(e,r)}getChildrenData(e){return this.context.model.getChildrenData(e)}getDescendantsData(e){return this.context.model.getDescendantsData(e)}getElementDataByState(e,r){return this.context.model.getElementDataByState(e,r)}initCanvas(){return Fi(this,void 0,void 0,function*(){var e;if(this.context.canvas)return yield this.context.canvas.ready;const{container:r="container",width:i,height:a,renderer:o,cursor:s,background:l,canvas:c,devicePixelRatio:u=(e=globalThis.devicePixelRatio)!==null&&e!==void 0?e:1}=this.options;if(r instanceof Qhe)this.context.canvas=r,s&&r.setCursor(s),o&&r.setRenderer(o),yield r.ready;else{const d=Kr(r)?document.getElementById(r):r,f=tpe(d);this.emit(Ut.BEFORE_CANVAS_INIT,{container:d,width:i,height:a});const h=Object.assign(Object.assign({},c),{container:d,width:i||f[0],height:a||f[1],background:l,renderer:o,cursor:s,devicePixelRatio:u}),p=new Qhe(h);this.context.canvas=p,yield p.ready,this.emit(Ut.AFTER_CANVAS_INIT,{canvas:p})}})}updateCanvas(e){var r,i;const{renderer:a,cursor:o,height:s,width:l}=e,c=this.context.canvas;c&&(a&&(this.emit(Ut.BEFORE_RENDERER_CHANGE,{renderer:this.options.renderer}),c.setRenderer(a),this.emit(Ut.AFTER_RENDERER_CHANGE,{renderer:a})),o&&c.setCursor(o),(on(l)||on(s))&&this.setSize((r=l??this.options.width)!==null&&r!==void 0?r:0,(i=s??this.options.height)!==null&&i!==void 0?i:0))}initRuntime(){this.context.options=this.options,this.context.batch||(this.context.batch=new kTt(this.context)),this.context.plugin||(this.context.plugin=new WTt(this.context)),this.context.viewport||(this.context.viewport=new YTt(this.context)),this.context.transform||(this.context.transform=new qTt(this.context)),this.context.element||(this.context.element=new UTt(this.context)),this.context.animation||(this.context.animation=new LTt(this.context)),this.context.layout||(this.context.layout=new GTt(this.context)),this.context.behavior||(this.context.behavior=new FTt(this.context))}prepare(){return Fi(this,void 0,void 0,function*(){if(yield Promise.resolve(),this.destroyed)throw new Error(up("The graph instance has been destroyed"));yield this.initCanvas(),this.initRuntime()})}render(){return Fi(this,void 0,void 0,function*(){if(yield this.prepare(),Ro(this,new lo(Ut.BEFORE_RENDER)),this.options.layout)if(!this.rendered&&Fft(this.options.layout)){const e=yield this.context.element.preLayoutDraw({type:"render"});yield Promise.all([e==null?void 0:e.finished,this.autoFit()])}else{const e=this.context.element.draw({type:"render"});yield Promise.all([e==null?void 0:e.finished,this.context.layout.postLayout()]),yield this.autoFit()}else{const e=this.context.element.draw({type:"render"});yield Promise.all([e==null?void 0:e.finished,this.autoFit()])}this.rendered=!0,Ro(this,new lo(Ut.AFTER_RENDER))})}draw(){return Fi(this,void 0,void 0,function*(){var e;yield this.prepare(),yield(e=this.context.element.draw())===null||e===void 0?void 0:e.finished})}layout(e){return Fi(this,void 0,void 0,function*(){yield this.context.layout.postLayout(e)})}stopLayout(){this.context.layout.stopLayout()}clear(){return Fi(this,void 0,void 0,function*(){const{model:e,element:r}=this.context;e.setData({}),e.clearChanges(),r==null||r.clear()})}destroy(){var e;Ro(this,new lo(Ut.BEFORE_DESTROY));const{layout:r,animation:i,element:a,model:o,canvas:s,behavior:l,plugin:c}=this.context;c==null||c.destroy(),l==null||l.destroy(),r==null||r.destroy(),i==null||i.destroy(),a==null||a.destroy(),o.destroy(),s==null||s.destroy(),this.options={},this.context={},this.off(),(e=globalThis.removeEventListener)===null||e===void 0||e.call(globalThis,"resize",this.onResize),this.destroyed=!0,Ro(this,new lo(Ut.AFTER_DESTROY))}getCanvas(){return this.context.canvas}resize(e,r){var i;const a=tpe((i=this.context.canvas)===null||i===void 0?void 0:i.getContainer()),o=[e||a[0],r||a[1]];if(!this.context.canvas)return;const s=this.context.canvas.getSize();Ra(o,s)||(Ro(this,new lo(Ut.BEFORE_SIZE_CHANGE,{size:o})),this.context.canvas.resize(...o),Ro(this,new lo(Ut.AFTER_SIZE_CHANGE,{size:o})))}fitView(e,r){return Fi(this,void 0,void 0,function*(){var i;yield(i=this.context.viewport)===null||i===void 0?void 0:i.fitView(e,r)})}fitCenter(e){return Fi(this,void 0,void 0,function*(){var r;yield(r=this.context.viewport)===null||r===void 0?void 0:r.fitCenter({animation:e})})}autoFit(){return Fi(this,void 0,void 0,function*(){const{autoFit:e}=this.context.options;if(e)if(Kr(e))e==="view"?yield this.fitView():e==="center"&&(yield this.fitCenter());else{const{type:r,animation:i}=e;r==="view"?yield this.fitView(e.options,i):r==="center"&&(yield this.fitCenter(i))}})}focusElement(e,r){return Fi(this,void 0,void 0,function*(){var i;yield(i=this.context.viewport)===null||i===void 0?void 0:i.focusElements(Array.isArray(e)?e:[e],{animation:r})})}zoomBy(e,r,i){return Fi(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",scale:e,origin:i},r)})}zoomTo(e,r,i){return Fi(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",scale:e,origin:i},r)})}getZoom(){return this.context.viewport.getZoom()}rotateBy(e,r,i){return Fi(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",rotate:e,origin:i},r)})}rotateTo(e,r,i){return Fi(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",rotate:e,origin:i},r)})}getRotation(){return this.context.viewport.getRotation()}translateBy(e,r){return Fi(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",translate:e},r)})}translateTo(e,r){return Fi(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",translate:e},r)})}getPosition(){return Ci([0,0],this.getCanvasByViewport([0,0]))}translateElementBy(e,r){return Fi(this,arguments,void 0,function*(i,a,o=!0){var s,l;const[c,u]=Xa(i)?[i,(s=a)!==null&&s!==void 0?s:!0]:[{[i]:a},o];Object.entries(c).forEach(([d,f])=>this.context.model.translateNodeLikeBy(d,f)),yield(l=this.context.element.draw({animation:u,stage:"translate"}))===null||l===void 0?void 0:l.finished})}translateElementTo(e,r){return Fi(this,arguments,void 0,function*(i,a,o=!0){var s,l;const[c,u]=Xa(i)?[i,(s=a)!==null&&s!==void 0?s:!0]:[{[i]:a},o];Object.entries(c).forEach(([d,f])=>this.context.model.translateNodeLikeTo(d,f)),yield(l=this.context.element.draw({animation:u,stage:"translate"}))===null||l===void 0?void 0:l.finished})}getElementPosition(e){return this.context.model.getElementPosition(e)}getElementRenderStyle(e){return aX(this.context.element.getElement(e).attributes,["context"])}setElementVisibility(e,r){return Fi(this,arguments,void 0,function*(i,a,o=!0){var s,l;const[c,u]=Xa(i)?[i,(s=a)!==null&&s!==void 0?s:!0]:[{[i]:a},o],d={nodes:[],edges:[],combos:[]};Object.entries(c).forEach(([p,g])=>{const m=this.getElementType(p);d[`${m}s`].push({id:p,style:{visibility:g}})});const{model:f,element:h}=this.context;f.preventUpdateNodeLikeHierarchy(()=>{f.updateData(d)}),yield(l=h.draw({animation:u,stage:"visibility"}))===null||l===void 0?void 0:l.finished})}showElement(e,r){return Fi(this,void 0,void 0,function*(){const i=Array.isArray(e)?e:[e];yield this.setElementVisibility(Object.fromEntries(i.map(a=>[a,"visible"])),r)})}hideElement(e,r){return Fi(this,void 0,void 0,function*(){const i=Array.isArray(e)?e:[e];yield this.setElementVisibility(Object.fromEntries(i.map(a=>[a,"hidden"])),r)})}getElementVisibility(e){var r,i;const a=this.context.element.getElement(e);return(i=(r=a==null?void 0:a.style)===null||r===void 0?void 0:r.visibility)!==null&&i!==void 0?i:"visible"}setElementZIndex(e,r){return Fi(this,void 0,void 0,function*(){var i;const a={nodes:[],edges:[],combos:[]},o=Xa(e)?e:{[e]:r};Object.entries(o).forEach(([c,u])=>{const d=this.getElementType(c);a[`${d}s`].push({id:c,style:{zIndex:u}})});const{model:s,element:l}=this.context;s.preventUpdateNodeLikeHierarchy(()=>s.updateData(a)),yield(i=l.draw({animation:!1,stage:"zIndex"}))===null||i===void 0?void 0:i.finished})}frontElement(e){return Fi(this,void 0,void 0,function*(){const r=Array.isArray(e)?e:[e],{model:i}=this.context,a={};r.map(o=>{const s=i.getFrontZIndex(o);if(i.getElementType(o)==="combo"){const c=i.getAncestorsData(o,Ni).at(-1)||this.getComboData(o),u=[c,...i.getDescendantsData(Fe(c))],d=s-npe(c);u.forEach(h=>{a[Fe(h)]=this.getElementZIndex(Fe(h))+d});const{internal:f}=Wj(u.map(Fe),h=>i.getRelatedEdgesData(h));f.forEach(h=>{const p=Fe(h);a[p]=this.getElementZIndex(p)+d})}else a[o]=s}),yield this.setElementZIndex(a)})}getElementZIndex(e){return npe(this.context.model.getElementDataById(e))}setElementState(e,r){return Fi(this,arguments,void 0,function*(i,a,o=!0){var s,l;const[c,u]=Xa(i)?[i,(s=a)!==null&&s!==void 0?s:!0]:[{[i]:a},o],d=h=>h?Array.isArray(h)?h:[h]:[],f={nodes:[],edges:[],combos:[]};Object.entries(c).forEach(([h,p])=>{const g=this.getElementType(h);f[`${g}s`].push({id:h,states:d(p)})}),this.updateData(f),yield(l=this.context.element.draw({animation:u,stage:"state"}))===null||l===void 0?void 0:l.finished})}getElementState(e){return this.context.model.getElementState(e)}getElementRenderBounds(e){return this.context.element.getElement(e).getRenderBounds()}collapseElement(e){return Fi(this,arguments,void 0,function*(r,i=!0){const{model:a,element:o}=this.context;if(Hl(a.getNodeLikeData([r])[0])||this.isCollapsingExpanding)return;typeof i=="boolean"&&(i={animation:i,align:!0});const s=a.getElementType(r);yield this.frontElement(r),this.isCollapsingExpanding=!0,this.setElementCollapsibility(r,!0),s==="node"?yield o.collapseNode(r,i):s==="combo"&&(yield o.collapseCombo(r,!!i.animation)),this.isCollapsingExpanding=!1})}expandElement(e){return Fi(this,arguments,void 0,function*(r,i=!0){const{model:a,element:o}=this.context;if(!Hl(a.getNodeLikeData([r])[0])||this.isCollapsingExpanding)return;typeof i=="boolean"&&(i={animation:i,align:!0});const s=a.getElementType(r);this.isCollapsingExpanding=!0,this.setElementCollapsibility(r,!1),s==="node"?yield o.expandNode(r,i):s==="combo"&&(yield o.expandCombo(r,!!i.animation)),this.isCollapsingExpanding=!1})}setElementCollapsibility(e,r){const i=this.getElementType(e);i==="node"?this.updateNodeData([{id:e,style:{collapsed:r}}]):i==="combo"&&this.updateComboData([{id:e,style:{collapsed:r}}])}toDataURL(){return Fi(this,arguments,void 0,function*(e={}){return this.context.canvas.toDataURL(e)})}getCanvasByViewport(e){return this.context.canvas.getCanvasByViewport(e)}getViewportByCanvas(e){return this.context.canvas.getViewportByCanvas(e)}getClientByCanvas(e){return this.context.canvas.getClientByCanvas(e)}getCanvasByClient(e){return this.context.canvas.getCanvasByClient(e)}getViewportCenter(){return this.context.viewport.getViewportCenter()}getCanvasCenter(){return this.context.viewport.getCanvasCenter()}on(e,r,i){return super.on(e,r,i)}once(e,r){return super.once(e,r)}off(e,r){return super.off(e,r)}}xL.defaultOptions={autoResize:!1,theme:"light",rotation:0,zoom:1,zoomRange:[.01,10]};class XTt extends gv{beforeDraw(e){const{add:r,update:i}=e,{model:a}=this.context;return[...r.edges.entries(),...i.edges.entries()].forEach(([,o])=>{U3e(a,o)}),e}}const U3e=(n,e)=>{const{source:r,target:i}=e,a=n.getElementDataById(r),o=n.getElementDataById(i),s=zoe(a,f=>n.getParentData(f,Ni)),l=zoe(o,f=>n.getParentData(f,Ni)),c=Fe(s),u=Fe(l),d={sourceNode:c,targetNode:u};return e.style?Object.assign(e.style,d):e.style=d,e},KTt=(n,e,r)=>{const[i,a]=e,[o,s]=r;if(a===i)return o;const l=(n-i)/(a-i);return o+l*(s-o)},ZTt=(n,e,r)=>{const[i,a]=e,[o,s]=r,l=Math.log(n-i+1)/Math.log(a-i+1);return o+l*(s-o)},QTt=(n,e,r,i=2)=>{const[a,o]=e,[s,l]=r,c=Math.pow((n-a)/(o-a),i);return s+c*(l-s)},JTt=(n,e,r)=>{const[i,a]=e,[o,s]=r,l=Math.sqrt((n-i)/(a-i));return o+l*(s-o)};class _L extends gv{constructor(e,r){super(e,xl({},_L.defaultOptions,r)),this.assignSizeByCentrality=(i,a,o,s,l,c)=>{const u=[a,o],d=[s[0],l[0]],f=[s[1],l[1]],h=[s[2],l[2]],p=(g,m)=>{if(typeof c=="function")return c(g,u,m);switch(c){case"linear":return KTt(g,u,m);case"log":return ZTt(g,u,m);case"pow":return QTt(g,u,m,2);case"sqrt":return JTt(g,u,m);default:return m[0]}};return[p(i,d),p(i,f),p(i,h)]}}beforeDraw(e){const{model:r}=this.context,i=r.getNodeData(),a=Uc(this.options.maxSize),o=Uc(this.options.minSize),s=this.getCentralities(this.options.centrality),l=s.size>0?Math.max(...s.values()):0,c=s.size>0?Math.min(...s.values()):0;return i.forEach(u=>{var d;const f=this.assignSizeByCentrality(s.get(Fe(u))||0,c,l,o,a,this.options.scale),h=(d=this.context.element)===null||d===void 0?void 0:d.getElement(Fe(u)),p={size:f};this.assignLabelStyle(p,f,u,h),(!h||!AP(p,h.attributes))&&$c(e,h?"update":"add","node",xl(u,{style:p}),!0)}),e}assignLabelStyle(e,r,i,a){var o;const s=a?a.config.style:(o=this.context.element)===null||o===void 0?void 0:o.getElementComputedStyle("node",i);if(Object.assign(e,gy(s,["labelFontSize","labelLineHeight"])),this.options.mapLabelSize){const l=this.getLabelSizeByNodeSize(r,1/0,Number(e.labelFontSize));Object.assign(e,{labelFontSize:l,labelLineHeight:l+Bct(e.labelPadding)})}return e}getLabelSizeByNodeSize(e,r,i){const a=Math.min(...e)/2,[o,s]=Array.isArray(this.options.mapLabelSize)?this.options.mapLabelSize:[i,r];return Math.min(s,Math.max(a,o))}getCentralities(e){const{model:r}=this.context,i=r.getData();if(typeof e=="function")return e(i);const a=r.getRelatedEdgesData.bind(r);return IEe(i,a,e)}}_L.defaultOptions={centrality:{type:"degree"},maxSize:80,minSize:20,scale:"linear",mapLabelSize:!1};class wL extends gv{constructor(e,r){super(e,Object.assign({},wL.defaultOptions,r))}get ref(){return this.context.model.getRootsData()[0]}afterLayout(){var e;const r=Po(this.ref),{graph:i,model:a}=this.context;(e=a.getData().nodes)===null||e===void 0||e.forEach(s=>{var l;if(Fe(s)===Fe(this.ref))return;const c=LEe(Ci(Po(s),r)),u=Math.abs(c)>Math.PI/2,d=!s.children||s.children.length===0,f=Fe(s),h=(l=this.context.element)===null||l===void 0?void 0:l.getElement(f);if(!h||!h.isVisible())return;const p=Uc(i.getElementRenderStyle(f).size)[0]/2,g=(d?1:-1)*(p+this.options.offset),m=[["translate",g*Math.cos(c),g*Math.sin(c)],["rotate",u?$l(c)+180:$l(c)]];a.updateNodeData([{id:Fe(s),style:{labelTextAlign:u===d?"right":"left",labelTextBaseline:"middle",labelTransform:m}}])}),i.draw()}}wL.defaultOptions={offset:5};const e3t="quadratic",ape=["top","top-right","right","right-bottom","bottom","bottom-left","left","left-top"];class SL extends gv{constructor(e,r){super(e,Object.assign({},SL.defaultOptions,r)),this.cacheMergeStyle=new Map,this.getAffectedParallelEdges=i=>{const{add:{edges:a},update:{nodes:o,edges:s,combos:l},remove:{edges:c}}=i,{model:u}=this.context,d=new Map,f=(g,m)=>{u.getRelatedEdgesData(m).forEach(y=>!d.has(Fe(y))&&d.set(Fe(y),y))};o.forEach(f),l.forEach(f);const h=g=>{const m=u.getEdgeData().map(y=>U3e(u,y));t3t(g,m).forEach(y=>!d.has(Fe(y))&&d.set(Fe(y),y))};if(c.size&&c.forEach(h),a.size&&a.forEach(h),s.size){const g=YTe(vK(u.getChanges())).update.edges;s.forEach(m=>{var v;h(m);const y=(v=g.find(b=>Fe(b.value)===Fe(m)))===null||v===void 0?void 0:v.original;y&&!OK(m,y)&&h(y)})}Df(this.options.edges)||d.forEach((g,m)=>!this.options.edges.includes(m)&&d.delete(m));const p=u.getEdgeData().map(Fe);return new Map([...d].sort((g,m)=>p.indexOf(g[0])-p.indexOf(m[0])))},this.applyBundlingStyle=(i,a,o)=>{const{edgeMap:s,reverses:l}=ope(a);s.forEach(c=>{c.forEach((u,d,f)=>{var h;const p=f.length,g=u.style||{};if(u.source===u.target){const y=ape.length;g.loopPlacement=ape[d%y],g.loopDist=Math.floor(d/y)*o+50}else if(p===1)g.curveOffset=0;else{const y=(d%2===0?1:-1)*(l[`${u.source}|${u.target}|${d}`]?-1:1);g.curveOffset=p%2===1?y*Math.ceil(d/2)*o*2:y*(Math.floor(d/2)*o*2+o)}const m=Object.assign(u,{type:e3t,style:g}),v=(h=this.context.element)===null||h===void 0?void 0:h.getElement(Fe(u));(!v||!AP(m.style,v.attributes))&&$c(i,v?"update":"add","edge",m,!0)})})},this.resetEdgeStyle=i=>{const a=i.style||{},o=this.cacheMergeStyle.get(Fe(i))||{};return Object.keys(o).forEach(s=>{Ra(a[s],o[s])&&(i[s]?a[s]=i[s]:delete a[s])}),Object.assign(i,{style:a})},this.applyMergingStyle=(i,a)=>{const{edgeMap:o,reverses:s}=ope(a);o.forEach(l=>{var c;if(l.length===1){const d=l[0],f=(c=this.context.element)===null||c===void 0?void 0:c.getElement(Fe(d)),h=this.resetEdgeStyle(d);(!f||!AP(h,f.attributes))&&$c(i,f?"update":"add","edge",h);return}const u=l.map(({source:d,target:f,style:h={}},p)=>{const{startArrow:g,endArrow:m}=h,v={},[y,b]=s[`${d}|${f}|${p}`]?["endArrow","startArrow"]:["startArrow","endArrow"];return XE(g)&&(v[y]=g),XE(m)&&(v[b]=m),v}).reduce((d,f)=>Object.assign(Object.assign({},d),f),{});l.forEach((d,f,h)=>{var p;if(f!==0){$c(i,"remove","edge",d);return}const g=Object.assign({},cn(this.options.style)?this.options.style(h):this.options.style,{childrenData:h});this.cacheMergeStyle.set(Fe(d),g);const m=Object.assign(Object.assign({},d),{type:"line",style:Object.assign(Object.assign(Object.assign({},d.style),u),g)}),v=(p=this.context.element)===null||p===void 0?void 0:p.getElement(Fe(d));(!v||!AP(m.style,v.attributes))&&$c(i,v?"update":"add","edge",m,!0)})})}}beforeDraw(e){const r=this.getAffectedParallelEdges(e);return r.size===0||(this.options.mode==="bundle"?this.applyBundlingStyle(e,r,this.options.distance):this.applyMergingStyle(e,r)),e}}SL.defaultOptions={mode:"bundle",distance:15};const ope=n=>{const e=new Map,r=new Set,i={},a=new Map;for(const[o,s]of n){if(r.has(o))continue;const{source:l,target:c}=s,u=`${l}-${c}`;e.has(u)||(e.set(u,[]),a.set(u,new Set));const d=e.get(u),f=a.get(u);d&&f&&!f.has(o)&&(d.push(s),f.add(o),r.add(o));for(const[h,p]of n)if(!(r.has(h)||h===o)&&OK(s,p)){const g=e.get(u),m=a.get(u);g&&m&&!m.has(h)&&(g.push(p),m.add(h),l===p.target&&c===p.source&&(i[`${p.source}|${p.target}|${g.length-1}`]=!0),r.add(h))}}return{edgeMap:e,reverses:i}},t3t=(n,e,r)=>e.filter(i=>OK(i,n)),OK=(n,e)=>{const{sourceNode:r,targetNode:i}=n.style||{},{sourceNode:a,targetNode:o}=e.style||{};return r===a&&i===o||r===o&&i===a};class n3t extends gv{beforeDraw(e,r){const{stage:i}=r;if(i==="visibility")return e;const{model:a}=this.context,{update:{nodes:o,edges:s,combos:l}}=e,c=(u,d)=>{a.getRelatedEdgesData(d).forEach(h=>!s.has(Fe(h))&&s.set(Fe(h),h))};return o.forEach(c),l.forEach(c),e}}const r3t={animation:{"combo-collapse":MEe,"combo-expand":kct,"node-collapse":EEe,"node-expand":Dct,"path-in":CEe,"path-out":Lct,fade:Oct,translate:Ict},behavior:{"brush-select":AM,"click-select":eD,"collapse-expand":dD,"create-edge":fD,"drag-canvas":hD,"drag-element-force":zft,"drag-element":IM,"fix-element-size":mD,"focus-element":vD,"hover-activate":yD,"lasso-select":Vft,"auto-adapt-label":Z4,"optimize-viewport-transform":bD,"scroll-canvas":xD,"zoom-canvas":_D},combo:{circle:Bdt,rect:zdt},edge:{cubic:Vy,line:gCe,polyline:lD,quadratic:cD,"cubic-horizontal":aD,"cubic-radial":oD,"cubic-vertical":sD},layout:{"antv-dagre":zgt,"combo-combined":zvt,"compact-box":xA.compactBox,"d3-force":f0t,"force-atlas2":$wt,circular:Ggt,concentric:rH,dagre:WD,dendrogram:xA.dendrogram,fishbone:qD,force:KCe,fruchterman:Uwt,grid:Gwt,indented:xA.indented,mds:oMe,mindmap:xA.mindmap,radial:Qwt,random:aSt,snake:YD},node:{circle:NM,diamond:Vut,ellipse:rD,hexagon:qut,html:iD,image:oCe,rect:Fdt,star:$dt,donut:nD,triangle:lCe},palette:{spectral:_St,tableau:wSt,oranges:SSt,greens:ESt,blues:CSt},theme:{dark:STt,light:CTt},plugin:{"bubble-sets":KD,"edge-bundling":QD,"edge-filter-lens":JD,"grid-line":nL,background:BTe,contextmenu:ZD,fisheye:eL,fullscreen:tL,history:rL,hull:aL,legend:fL,minimap:hL,snapline:pL,timebar:gL,toolbar:mL,tooltip:vL,watermark:yL},transform:{"arrange-draw-order":MTt,"collapse-expand-combo":TTt,"collapse-expand-node":ATt,"get-edge-actual-ends":XTt,"map-node-size":_L,"place-radial-labels":wL,"process-parallel-edges":SL,"update-related-edges":n3t},shape:{circle:qp,ellipse:EM,group:Bo,html:CM,image:TX,line:yy,path:Lc,polygon:zy,polyline:X4,rect:ws,text:Uy,label:dv,badge:Y_}};function i3t(){Object.entries(r3t).forEach(([n,e])=>{Object.entries(e).forEach(([r,i])=>{B3e(n,r,i)})})}i3t();var NO={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */NO.exports;(function(n,e){(function(){var r,i="4.17.21",a=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",u=500,d="__lodash_placeholder__",f=1,h=2,p=4,g=1,m=2,v=1,y=2,b=4,x=8,_=16,S=32,M=64,E=128,T=256,P=512,A=30,N="...",O=800,I=16,D=1,k=2,$=3,B=1/0,F=9007199254740991,G=17976931348623157e292,z=NaN,U=4294967295,H=U-1,X=U>>>1,V=[["ary",E],["bind",v],["bindKey",y],["curry",x],["curryRight",_],["flip",P],["partial",S],["partialRight",M],["rearg",T]],W="[object Arguments]",K="[object Array]",q="[object AsyncFunction]",Q="[object Boolean]",ie="[object Date]",oe="[object DOMException]",ue="[object Error]",le="[object Function]",me="[object GeneratorFunction]",J="[object Map]",pe="[object Number]",ve="[object Null]",Me="[object Object]",Re="[object Promise]",Xe="[object Proxy]",He="[object RegExp]",ee="[object Set]",Y="[object String]",ce="[object Symbol]",_e="[object Undefined]",Ae="[object WeakMap]",Ce="[object WeakSet]",et="[object ArrayBuffer]",Ve="[object DataView]",qe="[object Float32Array]",dt="[object Float64Array]",Ge="[object Int8Array]",We="[object Int16Array]",Ze="[object Int32Array]",Ie="[object Uint8Array]",De="[object Uint8ClampedArray]",bt="[object Uint16Array]",Ke="[object Uint32Array]",mt=/\b__p \+= '';/g,xe=/\b(__p \+=) '' \+/g,vt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ue=/&(?:amp|lt|gt|quot|#39);/g,Le=/[&<>"']/g,Ye=RegExp(Ue.source),nt=RegExp(Le.source),_t=/<%-([\s\S]+?)%>/g,Gt=/<%([\s\S]+?)%>/g,Ot=/<%=([\s\S]+?)%>/g,wt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ft=/^\w*$/,wn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ye=/[\\^$.*+?()[\]{}|]/g,be=RegExp(ye.source),Se=/^\s+/,je=/\s/,tt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ft=/\{\n\/\* \[wrapped with (.+)\] \*/,Tt=/,? & /,It=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Rt=/[()=,{}\[\]\/\s]/,Lt=/\\(\\)?/g,$t=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,en=/\w*$/,yn=/^[-+]0x[0-9a-f]+$/i,kn=/^0b[01]+$/i,qn=/^\[object .+?Constructor\]$/,_n=/^0o[0-7]+$/i,te=/^(?:0|[1-9]\d*)$/,de=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Te=/($^)/,Oe=/['\n\r\u2028\u2029\\]/g,Ee="\\ud800-\\udfff",ut="\\u0300-\\u036f",Dt="\\ufe20-\\ufe2f",Bt="\\u20d0-\\u20ff",Zt=ut+Dt+Bt,dn="\\u2700-\\u27bf",kt="a-z\\xdf-\\xf6\\xf8-\\xff",zt="\\xac\\xb1\\xd7\\xf7",En="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Bn="\\u2000-\\u206f",In=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zn="A-Z\\xc0-\\xd6\\xd8-\\xde",Rn="\\ufe0e\\ufe0f",fn=zt+En+Bn+In,Yr="['’]",Hn="["+Ee+"]",Yi="["+fn+"]",sa="["+Zt+"]",Cn="\\d+",Mn="["+dn+"]",Un="["+kt+"]",rn="[^"+Ee+fn+Cn+dn+kt+zn+"]",Wt="\\ud83c[\\udffb-\\udfff]",Dn="(?:"+sa+"|"+Wt+")",hr="[^"+Ee+"]",Li="(?:\\ud83c[\\udde6-\\uddff]){2}",Ui="[\\ud800-\\udbff][\\udc00-\\udfff]",_o="["+zn+"]",Ms="\\u200d",Yn="(?:"+Un+"|"+rn+")",xn="(?:"+_o+"|"+rn+")",er="(?:"+Yr+"(?:d|ll|m|re|s|t|ve))?",Ar="(?:"+Yr+"(?:D|LL|M|RE|S|T|VE))?",Xi=Dn+"?",ad="["+Rn+"]?",hf="(?:"+Ms+"(?:"+[hr,Li,Ui].join("|")+")"+ad+Xi+")*",pf="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ev="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Cv=ad+Xi+hf,Sw="(?:"+[Mn,Li,Ui].join("|")+")"+Cv,Ew="(?:"+[hr+sa+"?",sa,Li,Ui,Hn].join("|")+")",Cw=RegExp(Yr,"g"),gn=RegExp(sa,"g"),Ln=RegExp(Wt+"(?="+Wt+")|"+Ew+Cv,"g"),Vi=RegExp([_o+"?"+Un+"+"+er+"(?="+[Yi,_o,"$"].join("|")+")",xn+"+"+Ar+"(?="+[Yi,_o+Yn,"$"].join("|")+")",_o+"?"+Yn+"+"+er,_o+"+"+Ar,Ev,pf,Cn,Sw].join("|"),"g"),za=RegExp("["+Ms+Ee+Zt+Rn+"]"),la=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,n1=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Mw=-1,Ri={};Ri[qe]=Ri[dt]=Ri[Ge]=Ri[We]=Ri[Ze]=Ri[Ie]=Ri[De]=Ri[bt]=Ri[Ke]=!0,Ri[W]=Ri[K]=Ri[et]=Ri[Q]=Ri[Ve]=Ri[ie]=Ri[ue]=Ri[le]=Ri[J]=Ri[pe]=Ri[Me]=Ri[He]=Ri[ee]=Ri[Y]=Ri[Ae]=!1;var si={};si[W]=si[K]=si[et]=si[Ve]=si[Q]=si[ie]=si[qe]=si[dt]=si[Ge]=si[We]=si[Ze]=si[J]=si[pe]=si[Me]=si[He]=si[ee]=si[Y]=si[ce]=si[Ie]=si[De]=si[bt]=si[Ke]=!0,si[ue]=si[le]=si[Ae]=!1;var DIe={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},LIe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},kIe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},FIe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$Ie=parseFloat,BIe=parseInt,$Q=typeof Qo=="object"&&Qo&&Qo.Object===Object&&Qo,zIe=typeof self=="object"&&self&&self.Object===Object&&self,as=$Q||zIe||Function("return this")(),T6=e&&!e.nodeType&&e,Mv=T6&&!0&&n&&!n.nodeType&&n,BQ=Mv&&Mv.exports===T6,A6=BQ&&$Q.process,nu=function(){try{var ke=Mv&&Mv.require&&Mv.require("util").types;return ke||A6&&A6.binding&&A6.binding("util")}catch{}}(),zQ=nu&&nu.isArrayBuffer,UQ=nu&&nu.isDate,VQ=nu&&nu.isMap,GQ=nu&&nu.isRegExp,jQ=nu&&nu.isSet,HQ=nu&&nu.isTypedArray;function sc(ke,gt,rt){switch(rt.length){case 0:return ke.call(gt);case 1:return ke.call(gt,rt[0]);case 2:return ke.call(gt,rt[0],rt[1]);case 3:return ke.call(gt,rt[0],rt[1],rt[2])}return ke.apply(gt,rt)}function UIe(ke,gt,rt,hn){for(var ar=-1,li=ke==null?0:ke.length;++ar<li;){var wo=ke[ar];gt(hn,wo,rt(wo),ke)}return hn}function ru(ke,gt){for(var rt=-1,hn=ke==null?0:ke.length;++rt<hn&&gt(ke[rt],rt,ke)!==!1;);return ke}function VIe(ke,gt){for(var rt=ke==null?0:ke.length;rt--&&gt(ke[rt],rt,ke)!==!1;);return ke}function WQ(ke,gt){for(var rt=-1,hn=ke==null?0:ke.length;++rt<hn;)if(!gt(ke[rt],rt,ke))return!1;return!0}function rg(ke,gt){for(var rt=-1,hn=ke==null?0:ke.length,ar=0,li=[];++rt<hn;){var wo=ke[rt];gt(wo,rt,ke)&&(li[ar++]=wo)}return li}function dT(ke,gt){var rt=ke==null?0:ke.length;return!!rt&&r1(ke,gt,0)>-1}function R6(ke,gt,rt){for(var hn=-1,ar=ke==null?0:ke.length;++hn<ar;)if(rt(gt,ke[hn]))return!0;return!1}function ca(ke,gt){for(var rt=-1,hn=ke==null?0:ke.length,ar=Array(hn);++rt<hn;)ar[rt]=gt(ke[rt],rt,ke);return ar}function ig(ke,gt){for(var rt=-1,hn=gt.length,ar=ke.length;++rt<hn;)ke[ar+rt]=gt[rt];return ke}function P6(ke,gt,rt,hn){var ar=-1,li=ke==null?0:ke.length;for(hn&&li&&(rt=ke[++ar]);++ar<li;)rt=gt(rt,ke[ar],ar,ke);return rt}function GIe(ke,gt,rt,hn){var ar=ke==null?0:ke.length;for(hn&&ar&&(rt=ke[--ar]);ar--;)rt=gt(rt,ke[ar],ar,ke);return rt}function N6(ke,gt){for(var rt=-1,hn=ke==null?0:ke.length;++rt<hn;)if(gt(ke[rt],rt,ke))return!0;return!1}var jIe=O6("length");function HIe(ke){return ke.split("")}function WIe(ke){return ke.match(It)||[]}function qQ(ke,gt,rt){var hn;return rt(ke,function(ar,li,wo){if(gt(ar,li,wo))return hn=li,!1}),hn}function fT(ke,gt,rt,hn){for(var ar=ke.length,li=rt+(hn?1:-1);hn?li--:++li<ar;)if(gt(ke[li],li,ke))return li;return-1}function r1(ke,gt,rt){return gt===gt?i4e(ke,gt,rt):fT(ke,YQ,rt)}function qIe(ke,gt,rt,hn){for(var ar=rt-1,li=ke.length;++ar<li;)if(hn(ke[ar],gt))return ar;return-1}function YQ(ke){return ke!==ke}function XQ(ke,gt){var rt=ke==null?0:ke.length;return rt?D6(ke,gt)/rt:z}function O6(ke){return function(gt){return gt==null?r:gt[ke]}}function I6(ke){return function(gt){return ke==null?r:ke[gt]}}function KQ(ke,gt,rt,hn,ar){return ar(ke,function(li,wo,ki){rt=hn?(hn=!1,li):gt(rt,li,wo,ki)}),rt}function YIe(ke,gt){var rt=ke.length;for(ke.sort(gt);rt--;)ke[rt]=ke[rt].value;return ke}function D6(ke,gt){for(var rt,hn=-1,ar=ke.length;++hn<ar;){var li=gt(ke[hn]);li!==r&&(rt=rt===r?li:rt+li)}return rt}function L6(ke,gt){for(var rt=-1,hn=Array(ke);++rt<ke;)hn[rt]=gt(rt);return hn}function XIe(ke,gt){return ca(gt,function(rt){return[rt,ke[rt]]})}function ZQ(ke){return ke&&ke.slice(0,tJ(ke)+1).replace(Se,"")}function lc(ke){return function(gt){return ke(gt)}}function k6(ke,gt){return ca(gt,function(rt){return ke[rt]})}function Tw(ke,gt){return ke.has(gt)}function QQ(ke,gt){for(var rt=-1,hn=ke.length;++rt<hn&&r1(gt,ke[rt],0)>-1;);return rt}function JQ(ke,gt){for(var rt=ke.length;rt--&&r1(gt,ke[rt],0)>-1;);return rt}function KIe(ke,gt){for(var rt=ke.length,hn=0;rt--;)ke[rt]===gt&&++hn;return hn}var ZIe=I6(DIe),QIe=I6(LIe);function JIe(ke){return"\\"+FIe[ke]}function e4e(ke,gt){return ke==null?r:ke[gt]}function i1(ke){return za.test(ke)}function t4e(ke){return la.test(ke)}function n4e(ke){for(var gt,rt=[];!(gt=ke.next()).done;)rt.push(gt.value);return rt}function F6(ke){var gt=-1,rt=Array(ke.size);return ke.forEach(function(hn,ar){rt[++gt]=[ar,hn]}),rt}function eJ(ke,gt){return function(rt){return ke(gt(rt))}}function ag(ke,gt){for(var rt=-1,hn=ke.length,ar=0,li=[];++rt<hn;){var wo=ke[rt];(wo===gt||wo===d)&&(ke[rt]=d,li[ar++]=rt)}return li}function hT(ke){var gt=-1,rt=Array(ke.size);return ke.forEach(function(hn){rt[++gt]=hn}),rt}function r4e(ke){var gt=-1,rt=Array(ke.size);return ke.forEach(function(hn){rt[++gt]=[hn,hn]}),rt}function i4e(ke,gt,rt){for(var hn=rt-1,ar=ke.length;++hn<ar;)if(ke[hn]===gt)return hn;return-1}function a4e(ke,gt,rt){for(var hn=rt+1;hn--;)if(ke[hn]===gt)return hn;return hn}function a1(ke){return i1(ke)?s4e(ke):jIe(ke)}function od(ke){return i1(ke)?l4e(ke):HIe(ke)}function tJ(ke){for(var gt=ke.length;gt--&&je.test(ke.charAt(gt)););return gt}var o4e=I6(kIe);function s4e(ke){for(var gt=Ln.lastIndex=0;Ln.test(ke);)++gt;return gt}function l4e(ke){return ke.match(Ln)||[]}function c4e(ke){return ke.match(Vi)||[]}var u4e=function ke(gt){gt=gt==null?as:o1.defaults(as.Object(),gt,o1.pick(as,n1));var rt=gt.Array,hn=gt.Date,ar=gt.Error,li=gt.Function,wo=gt.Math,ki=gt.Object,$6=gt.RegExp,d4e=gt.String,iu=gt.TypeError,pT=rt.prototype,f4e=li.prototype,s1=ki.prototype,gT=gt["__core-js_shared__"],mT=f4e.toString,yi=s1.hasOwnProperty,h4e=0,nJ=function(){var w=/[^.]+$/.exec(gT&&gT.keys&&gT.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),vT=s1.toString,p4e=mT.call(ki),g4e=as._,m4e=$6("^"+mT.call(yi).replace(ye,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yT=BQ?gt.Buffer:r,og=gt.Symbol,bT=gt.Uint8Array,rJ=yT?yT.allocUnsafe:r,xT=eJ(ki.getPrototypeOf,ki),iJ=ki.create,aJ=s1.propertyIsEnumerable,_T=pT.splice,oJ=og?og.isConcatSpreadable:r,Aw=og?og.iterator:r,Tv=og?og.toStringTag:r,wT=function(){try{var w=Ov(ki,"defineProperty");return w({},"",{}),w}catch{}}(),v4e=gt.clearTimeout!==as.clearTimeout&&gt.clearTimeout,y4e=hn&&hn.now!==as.Date.now&&hn.now,b4e=gt.setTimeout!==as.setTimeout&&gt.setTimeout,ST=wo.ceil,ET=wo.floor,B6=ki.getOwnPropertySymbols,x4e=yT?yT.isBuffer:r,sJ=gt.isFinite,_4e=pT.join,w4e=eJ(ki.keys,ki),So=wo.max,Ts=wo.min,S4e=hn.now,E4e=gt.parseInt,lJ=wo.random,C4e=pT.reverse,z6=Ov(gt,"DataView"),Rw=Ov(gt,"Map"),U6=Ov(gt,"Promise"),l1=Ov(gt,"Set"),Pw=Ov(gt,"WeakMap"),Nw=Ov(ki,"create"),CT=Pw&&new Pw,c1={},M4e=Iv(z6),T4e=Iv(Rw),A4e=Iv(U6),R4e=Iv(l1),P4e=Iv(Pw),MT=og?og.prototype:r,Ow=MT?MT.valueOf:r,cJ=MT?MT.toString:r;function ne(w){if(Oa(w)&&!cr(w)&&!(w instanceof $r)){if(w instanceof au)return w;if(yi.call(w,"__wrapped__"))return uee(w)}return new au(w)}var u1=function(){function w(){}return function(R){if(!xa(R))return{};if(iJ)return iJ(R);w.prototype=R;var L=new w;return w.prototype=r,L}}();function TT(){}function au(w,R){this.__wrapped__=w,this.__actions__=[],this.__chain__=!!R,this.__index__=0,this.__values__=r}ne.templateSettings={escape:_t,evaluate:Gt,interpolate:Ot,variable:"",imports:{_:ne}},ne.prototype=TT.prototype,ne.prototype.constructor=ne,au.prototype=u1(TT.prototype),au.prototype.constructor=au;function $r(w){this.__wrapped__=w,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function N4e(){var w=new $r(this.__wrapped__);return w.__actions__=Tl(this.__actions__),w.__dir__=this.__dir__,w.__filtered__=this.__filtered__,w.__iteratees__=Tl(this.__iteratees__),w.__takeCount__=this.__takeCount__,w.__views__=Tl(this.__views__),w}function O4e(){if(this.__filtered__){var w=new $r(this);w.__dir__=-1,w.__filtered__=!0}else w=this.clone(),w.__dir__*=-1;return w}function I4e(){var w=this.__wrapped__.value(),R=this.__dir__,L=cr(w),j=R<0,Z=L?w.length:0,ae=HDe(0,Z,this.__views__),we=ae.start,Ne=ae.end,ze=Ne-we,St=j?Ne:we-1,Et=this.__iteratees__,Pt=Et.length,sn=0,Sn=Ts(ze,this.__takeCount__);if(!L||!j&&Z==ze&&Sn==ze)return IJ(w,this.__actions__);var Vn=[];e:for(;ze--&&sn<Sn;){St+=R;for(var Sr=-1,Gn=w[St];++Sr<Pt;){var Ir=Et[Sr],Hr=Ir.iteratee,dc=Ir.type,tl=Hr(Gn);if(dc==k)Gn=tl;else if(!tl){if(dc==D)continue e;break e}}Vn[sn++]=Gn}return Vn}$r.prototype=u1(TT.prototype),$r.prototype.constructor=$r;function Av(w){var R=-1,L=w==null?0:w.length;for(this.clear();++R<L;){var j=w[R];this.set(j[0],j[1])}}function D4e(){this.__data__=Nw?Nw(null):{},this.size=0}function L4e(w){var R=this.has(w)&&delete this.__data__[w];return this.size-=R?1:0,R}function k4e(w){var R=this.__data__;if(Nw){var L=R[w];return L===c?r:L}return yi.call(R,w)?R[w]:r}function F4e(w){var R=this.__data__;return Nw?R[w]!==r:yi.call(R,w)}function $4e(w,R){var L=this.__data__;return this.size+=this.has(w)?0:1,L[w]=Nw&&R===r?c:R,this}Av.prototype.clear=D4e,Av.prototype.delete=L4e,Av.prototype.get=k4e,Av.prototype.has=F4e,Av.prototype.set=$4e;function Sh(w){var R=-1,L=w==null?0:w.length;for(this.clear();++R<L;){var j=w[R];this.set(j[0],j[1])}}function B4e(){this.__data__=[],this.size=0}function z4e(w){var R=this.__data__,L=AT(R,w);if(L<0)return!1;var j=R.length-1;return L==j?R.pop():_T.call(R,L,1),--this.size,!0}function U4e(w){var R=this.__data__,L=AT(R,w);return L<0?r:R[L][1]}function V4e(w){return AT(this.__data__,w)>-1}function G4e(w,R){var L=this.__data__,j=AT(L,w);return j<0?(++this.size,L.push([w,R])):L[j][1]=R,this}Sh.prototype.clear=B4e,Sh.prototype.delete=z4e,Sh.prototype.get=U4e,Sh.prototype.has=V4e,Sh.prototype.set=G4e;function Eh(w){var R=-1,L=w==null?0:w.length;for(this.clear();++R<L;){var j=w[R];this.set(j[0],j[1])}}function j4e(){this.size=0,this.__data__={hash:new Av,map:new(Rw||Sh),string:new Av}}function H4e(w){var R=zT(this,w).delete(w);return this.size-=R?1:0,R}function W4e(w){return zT(this,w).get(w)}function q4e(w){return zT(this,w).has(w)}function Y4e(w,R){var L=zT(this,w),j=L.size;return L.set(w,R),this.size+=L.size==j?0:1,this}Eh.prototype.clear=j4e,Eh.prototype.delete=H4e,Eh.prototype.get=W4e,Eh.prototype.has=q4e,Eh.prototype.set=Y4e;function Rv(w){var R=-1,L=w==null?0:w.length;for(this.__data__=new Eh;++R<L;)this.add(w[R])}function X4e(w){return this.__data__.set(w,c),this}function K4e(w){return this.__data__.has(w)}Rv.prototype.add=Rv.prototype.push=X4e,Rv.prototype.has=K4e;function sd(w){var R=this.__data__=new Sh(w);this.size=R.size}function Z4e(){this.__data__=new Sh,this.size=0}function Q4e(w){var R=this.__data__,L=R.delete(w);return this.size=R.size,L}function J4e(w){return this.__data__.get(w)}function eDe(w){return this.__data__.has(w)}function tDe(w,R){var L=this.__data__;if(L instanceof Sh){var j=L.__data__;if(!Rw||j.length<a-1)return j.push([w,R]),this.size=++L.size,this;L=this.__data__=new Eh(j)}return L.set(w,R),this.size=L.size,this}sd.prototype.clear=Z4e,sd.prototype.delete=Q4e,sd.prototype.get=J4e,sd.prototype.has=eDe,sd.prototype.set=tDe;function uJ(w,R){var L=cr(w),j=!L&&Dv(w),Z=!L&&!j&&dg(w),ae=!L&&!j&&!Z&&p1(w),we=L||j||Z||ae,Ne=we?L6(w.length,d4e):[],ze=Ne.length;for(var St in w)(R||yi.call(w,St))&&!(we&&(St=="length"||Z&&(St=="offset"||St=="parent")||ae&&(St=="buffer"||St=="byteLength"||St=="byteOffset")||Ah(St,ze)))&&Ne.push(St);return Ne}function dJ(w){var R=w.length;return R?w[Q6(0,R-1)]:r}function nDe(w,R){return UT(Tl(w),Pv(R,0,w.length))}function rDe(w){return UT(Tl(w))}function V6(w,R,L){(L!==r&&!ld(w[R],L)||L===r&&!(R in w))&&Ch(w,R,L)}function Iw(w,R,L){var j=w[R];(!(yi.call(w,R)&&ld(j,L))||L===r&&!(R in w))&&Ch(w,R,L)}function AT(w,R){for(var L=w.length;L--;)if(ld(w[L][0],R))return L;return-1}function iDe(w,R,L,j){return sg(w,function(Z,ae,we){R(j,Z,L(Z),we)}),j}function fJ(w,R){return w&&mf(R,jo(R),w)}function aDe(w,R){return w&&mf(R,Rl(R),w)}function Ch(w,R,L){R=="__proto__"&&wT?wT(w,R,{configurable:!0,enumerable:!0,value:L,writable:!0}):w[R]=L}function G6(w,R){for(var L=-1,j=R.length,Z=rt(j),ae=w==null;++L<j;)Z[L]=ae?r:Sk(w,R[L]);return Z}function Pv(w,R,L){return w===w&&(L!==r&&(w=w<=L?w:L),R!==r&&(w=w>=R?w:R)),w}function ou(w,R,L,j,Z,ae){var we,Ne=R&f,ze=R&h,St=R&p;if(L&&(we=Z?L(w,j,Z,ae):L(w)),we!==r)return we;if(!xa(w))return w;var Et=cr(w);if(Et){if(we=qDe(w),!Ne)return Tl(w,we)}else{var Pt=As(w),sn=Pt==le||Pt==me;if(dg(w))return kJ(w,Ne);if(Pt==Me||Pt==W||sn&&!Z){if(we=ze||sn?{}:tee(w),!Ne)return ze?kDe(w,aDe(we,w)):LDe(w,fJ(we,w))}else{if(!si[Pt])return Z?w:{};we=YDe(w,Pt,Ne)}}ae||(ae=new sd);var Sn=ae.get(w);if(Sn)return Sn;ae.set(w,we),Pee(w)?w.forEach(function(Gn){we.add(ou(Gn,R,L,Gn,w,ae))}):Aee(w)&&w.forEach(function(Gn,Ir){we.set(Ir,ou(Gn,R,L,Ir,w,ae))});var Vn=St?ze?ck:lk:ze?Rl:jo,Sr=Et?r:Vn(w);return ru(Sr||w,function(Gn,Ir){Sr&&(Ir=Gn,Gn=w[Ir]),Iw(we,Ir,ou(Gn,R,L,Ir,w,ae))}),we}function oDe(w){var R=jo(w);return function(L){return hJ(L,w,R)}}function hJ(w,R,L){var j=L.length;if(w==null)return!j;for(w=ki(w);j--;){var Z=L[j],ae=R[Z],we=w[Z];if(we===r&&!(Z in w)||!ae(we))return!1}return!0}function pJ(w,R,L){if(typeof w!="function")throw new iu(s);return zw(function(){w.apply(r,L)},R)}function Dw(w,R,L,j){var Z=-1,ae=dT,we=!0,Ne=w.length,ze=[],St=R.length;if(!Ne)return ze;L&&(R=ca(R,lc(L))),j?(ae=R6,we=!1):R.length>=a&&(ae=Tw,we=!1,R=new Rv(R));e:for(;++Z<Ne;){var Et=w[Z],Pt=L==null?Et:L(Et);if(Et=j||Et!==0?Et:0,we&&Pt===Pt){for(var sn=St;sn--;)if(R[sn]===Pt)continue e;ze.push(Et)}else ae(R,Pt,j)||ze.push(Et)}return ze}var sg=UJ(gf),gJ=UJ(H6,!0);function sDe(w,R){var L=!0;return sg(w,function(j,Z,ae){return L=!!R(j,Z,ae),L}),L}function RT(w,R,L){for(var j=-1,Z=w.length;++j<Z;){var ae=w[j],we=R(ae);if(we!=null&&(Ne===r?we===we&&!uc(we):L(we,Ne)))var Ne=we,ze=ae}return ze}function lDe(w,R,L,j){var Z=w.length;for(L=xr(L),L<0&&(L=-L>Z?0:Z+L),j=j===r||j>Z?Z:xr(j),j<0&&(j+=Z),j=L>j?0:Oee(j);L<j;)w[L++]=R;return w}function mJ(w,R){var L=[];return sg(w,function(j,Z,ae){R(j,Z,ae)&&L.push(j)}),L}function os(w,R,L,j,Z){var ae=-1,we=w.length;for(L||(L=KDe),Z||(Z=[]);++ae<we;){var Ne=w[ae];R>0&&L(Ne)?R>1?os(Ne,R-1,L,j,Z):ig(Z,Ne):j||(Z[Z.length]=Ne)}return Z}var j6=VJ(),vJ=VJ(!0);function gf(w,R){return w&&j6(w,R,jo)}function H6(w,R){return w&&vJ(w,R,jo)}function PT(w,R){return rg(R,function(L){return Rh(w[L])})}function Nv(w,R){R=cg(R,w);for(var L=0,j=R.length;w!=null&&L<j;)w=w[vf(R[L++])];return L&&L==j?w:r}function yJ(w,R,L){var j=R(w);return cr(w)?j:ig(j,L(w))}function Js(w){return w==null?w===r?_e:ve:Tv&&Tv in ki(w)?jDe(w):rLe(w)}function W6(w,R){return w>R}function cDe(w,R){return w!=null&&yi.call(w,R)}function uDe(w,R){return w!=null&&R in ki(w)}function dDe(w,R,L){return w>=Ts(R,L)&&w<So(R,L)}function q6(w,R,L){for(var j=L?R6:dT,Z=w[0].length,ae=w.length,we=ae,Ne=rt(ae),ze=1/0,St=[];we--;){var Et=w[we];we&&R&&(Et=ca(Et,lc(R))),ze=Ts(Et.length,ze),Ne[we]=!L&&(R||Z>=120&&Et.length>=120)?new Rv(we&&Et):r}Et=w[0];var Pt=-1,sn=Ne[0];e:for(;++Pt<Z&&St.length<ze;){var Sn=Et[Pt],Vn=R?R(Sn):Sn;if(Sn=L||Sn!==0?Sn:0,!(sn?Tw(sn,Vn):j(St,Vn,L))){for(we=ae;--we;){var Sr=Ne[we];if(!(Sr?Tw(Sr,Vn):j(w[we],Vn,L)))continue e}sn&&sn.push(Vn),St.push(Sn)}}return St}function fDe(w,R,L,j){return gf(w,function(Z,ae,we){R(j,L(Z),ae,we)}),j}function Lw(w,R,L){R=cg(R,w),w=aee(w,R);var j=w==null?w:w[vf(lu(R))];return j==null?r:sc(j,w,L)}function bJ(w){return Oa(w)&&Js(w)==W}function hDe(w){return Oa(w)&&Js(w)==et}function pDe(w){return Oa(w)&&Js(w)==ie}function kw(w,R,L,j,Z){return w===R?!0:w==null||R==null||!Oa(w)&&!Oa(R)?w!==w&&R!==R:gDe(w,R,L,j,kw,Z)}function gDe(w,R,L,j,Z,ae){var we=cr(w),Ne=cr(R),ze=we?K:As(w),St=Ne?K:As(R);ze=ze==W?Me:ze,St=St==W?Me:St;var Et=ze==Me,Pt=St==Me,sn=ze==St;if(sn&&dg(w)){if(!dg(R))return!1;we=!0,Et=!1}if(sn&&!Et)return ae||(ae=new sd),we||p1(w)?QJ(w,R,L,j,Z,ae):VDe(w,R,ze,L,j,Z,ae);if(!(L&g)){var Sn=Et&&yi.call(w,"__wrapped__"),Vn=Pt&&yi.call(R,"__wrapped__");if(Sn||Vn){var Sr=Sn?w.value():w,Gn=Vn?R.value():R;return ae||(ae=new sd),Z(Sr,Gn,L,j,ae)}}return sn?(ae||(ae=new sd),GDe(w,R,L,j,Z,ae)):!1}function mDe(w){return Oa(w)&&As(w)==J}function Y6(w,R,L,j){var Z=L.length,ae=Z,we=!j;if(w==null)return!ae;for(w=ki(w);Z--;){var Ne=L[Z];if(we&&Ne[2]?Ne[1]!==w[Ne[0]]:!(Ne[0]in w))return!1}for(;++Z<ae;){Ne=L[Z];var ze=Ne[0],St=w[ze],Et=Ne[1];if(we&&Ne[2]){if(St===r&&!(ze in w))return!1}else{var Pt=new sd;if(j)var sn=j(St,Et,ze,w,R,Pt);if(!(sn===r?kw(Et,St,g|m,j,Pt):sn))return!1}}return!0}function xJ(w){if(!xa(w)||QDe(w))return!1;var R=Rh(w)?m4e:qn;return R.test(Iv(w))}function vDe(w){return Oa(w)&&Js(w)==He}function yDe(w){return Oa(w)&&As(w)==ee}function bDe(w){return Oa(w)&&qT(w.length)&&!!Ri[Js(w)]}function _J(w){return typeof w=="function"?w:w==null?Pl:typeof w=="object"?cr(w)?EJ(w[0],w[1]):SJ(w):Gee(w)}function X6(w){if(!Bw(w))return w4e(w);var R=[];for(var L in ki(w))yi.call(w,L)&&L!="constructor"&&R.push(L);return R}function xDe(w){if(!xa(w))return nLe(w);var R=Bw(w),L=[];for(var j in w)j=="constructor"&&(R||!yi.call(w,j))||L.push(j);return L}function K6(w,R){return w<R}function wJ(w,R){var L=-1,j=Al(w)?rt(w.length):[];return sg(w,function(Z,ae,we){j[++L]=R(Z,ae,we)}),j}function SJ(w){var R=dk(w);return R.length==1&&R[0][2]?ree(R[0][0],R[0][1]):function(L){return L===w||Y6(L,w,R)}}function EJ(w,R){return hk(w)&&nee(R)?ree(vf(w),R):function(L){var j=Sk(L,w);return j===r&&j===R?Ek(L,w):kw(R,j,g|m)}}function NT(w,R,L,j,Z){w!==R&&j6(R,function(ae,we){if(Z||(Z=new sd),xa(ae))_De(w,R,we,L,NT,j,Z);else{var Ne=j?j(gk(w,we),ae,we+"",w,R,Z):r;Ne===r&&(Ne=ae),V6(w,we,Ne)}},Rl)}function _De(w,R,L,j,Z,ae,we){var Ne=gk(w,L),ze=gk(R,L),St=we.get(ze);if(St){V6(w,L,St);return}var Et=ae?ae(Ne,ze,L+"",w,R,we):r,Pt=Et===r;if(Pt){var sn=cr(ze),Sn=!sn&&dg(ze),Vn=!sn&&!Sn&&p1(ze);Et=ze,sn||Sn||Vn?cr(Ne)?Et=Ne:Ua(Ne)?Et=Tl(Ne):Sn?(Pt=!1,Et=kJ(ze,!0)):Vn?(Pt=!1,Et=FJ(ze,!0)):Et=[]:Uw(ze)||Dv(ze)?(Et=Ne,Dv(Ne)?Et=Iee(Ne):(!xa(Ne)||Rh(Ne))&&(Et=tee(ze))):Pt=!1}Pt&&(we.set(ze,Et),Z(Et,ze,j,ae,we),we.delete(ze)),V6(w,L,Et)}function CJ(w,R){var L=w.length;if(L)return R+=R<0?L:0,Ah(R,L)?w[R]:r}function MJ(w,R,L){R.length?R=ca(R,function(ae){return cr(ae)?function(we){return Nv(we,ae.length===1?ae[0]:ae)}:ae}):R=[Pl];var j=-1;R=ca(R,lc(Fn()));var Z=wJ(w,function(ae,we,Ne){var ze=ca(R,function(St){return St(ae)});return{criteria:ze,index:++j,value:ae}});return YIe(Z,function(ae,we){return DDe(ae,we,L)})}function wDe(w,R){return TJ(w,R,function(L,j){return Ek(w,j)})}function TJ(w,R,L){for(var j=-1,Z=R.length,ae={};++j<Z;){var we=R[j],Ne=Nv(w,we);L(Ne,we)&&Fw(ae,cg(we,w),Ne)}return ae}function SDe(w){return function(R){return Nv(R,w)}}function Z6(w,R,L,j){var Z=j?qIe:r1,ae=-1,we=R.length,Ne=w;for(w===R&&(R=Tl(R)),L&&(Ne=ca(w,lc(L)));++ae<we;)for(var ze=0,St=R[ae],Et=L?L(St):St;(ze=Z(Ne,Et,ze,j))>-1;)Ne!==w&&_T.call(Ne,ze,1),_T.call(w,ze,1);return w}function AJ(w,R){for(var L=w?R.length:0,j=L-1;L--;){var Z=R[L];if(L==j||Z!==ae){var ae=Z;Ah(Z)?_T.call(w,Z,1):tk(w,Z)}}return w}function Q6(w,R){return w+ET(lJ()*(R-w+1))}function EDe(w,R,L,j){for(var Z=-1,ae=So(ST((R-w)/(L||1)),0),we=rt(ae);ae--;)we[j?ae:++Z]=w,w+=L;return we}function J6(w,R){var L="";if(!w||R<1||R>F)return L;do R%2&&(L+=w),R=ET(R/2),R&&(w+=w);while(R);return L}function Rr(w,R){return mk(iee(w,R,Pl),w+"")}function CDe(w){return dJ(g1(w))}function MDe(w,R){var L=g1(w);return UT(L,Pv(R,0,L.length))}function Fw(w,R,L,j){if(!xa(w))return w;R=cg(R,w);for(var Z=-1,ae=R.length,we=ae-1,Ne=w;Ne!=null&&++Z<ae;){var ze=vf(R[Z]),St=L;if(ze==="__proto__"||ze==="constructor"||ze==="prototype")return w;if(Z!=we){var Et=Ne[ze];St=j?j(Et,ze,Ne):r,St===r&&(St=xa(Et)?Et:Ah(R[Z+1])?[]:{})}Iw(Ne,ze,St),Ne=Ne[ze]}return w}var RJ=CT?function(w,R){return CT.set(w,R),w}:Pl,TDe=wT?function(w,R){return wT(w,"toString",{configurable:!0,enumerable:!1,value:Mk(R),writable:!0})}:Pl;function ADe(w){return UT(g1(w))}function su(w,R,L){var j=-1,Z=w.length;R<0&&(R=-R>Z?0:Z+R),L=L>Z?Z:L,L<0&&(L+=Z),Z=R>L?0:L-R>>>0,R>>>=0;for(var ae=rt(Z);++j<Z;)ae[j]=w[j+R];return ae}function RDe(w,R){var L;return sg(w,function(j,Z,ae){return L=R(j,Z,ae),!L}),!!L}function OT(w,R,L){var j=0,Z=w==null?j:w.length;if(typeof R=="number"&&R===R&&Z<=X){for(;j<Z;){var ae=j+Z>>>1,we=w[ae];we!==null&&!uc(we)&&(L?we<=R:we<R)?j=ae+1:Z=ae}return Z}return ek(w,R,Pl,L)}function ek(w,R,L,j){var Z=0,ae=w==null?0:w.length;if(ae===0)return 0;R=L(R);for(var we=R!==R,Ne=R===null,ze=uc(R),St=R===r;Z<ae;){var Et=ET((Z+ae)/2),Pt=L(w[Et]),sn=Pt!==r,Sn=Pt===null,Vn=Pt===Pt,Sr=uc(Pt);if(we)var Gn=j||Vn;else St?Gn=Vn&&(j||sn):Ne?Gn=Vn&&sn&&(j||!Sn):ze?Gn=Vn&&sn&&!Sn&&(j||!Sr):Sn||Sr?Gn=!1:Gn=j?Pt<=R:Pt<R;Gn?Z=Et+1:ae=Et}return Ts(ae,H)}function PJ(w,R){for(var L=-1,j=w.length,Z=0,ae=[];++L<j;){var we=w[L],Ne=R?R(we):we;if(!L||!ld(Ne,ze)){var ze=Ne;ae[Z++]=we===0?0:we}}return ae}function NJ(w){return typeof w=="number"?w:uc(w)?z:+w}function cc(w){if(typeof w=="string")return w;if(cr(w))return ca(w,cc)+"";if(uc(w))return cJ?cJ.call(w):"";var R=w+"";return R=="0"&&1/w==-1/0?"-0":R}function lg(w,R,L){var j=-1,Z=dT,ae=w.length,we=!0,Ne=[],ze=Ne;if(L)we=!1,Z=R6;else if(ae>=a){var St=R?null:zDe(w);if(St)return hT(St);we=!1,Z=Tw,ze=new Rv}else ze=R?[]:Ne;e:for(;++j<ae;){var Et=w[j],Pt=R?R(Et):Et;if(Et=L||Et!==0?Et:0,we&&Pt===Pt){for(var sn=ze.length;sn--;)if(ze[sn]===Pt)continue e;R&&ze.push(Pt),Ne.push(Et)}else Z(ze,Pt,L)||(ze!==Ne&&ze.push(Pt),Ne.push(Et))}return Ne}function tk(w,R){return R=cg(R,w),w=aee(w,R),w==null||delete w[vf(lu(R))]}function OJ(w,R,L,j){return Fw(w,R,L(Nv(w,R)),j)}function IT(w,R,L,j){for(var Z=w.length,ae=j?Z:-1;(j?ae--:++ae<Z)&&R(w[ae],ae,w););return L?su(w,j?0:ae,j?ae+1:Z):su(w,j?ae+1:0,j?Z:ae)}function IJ(w,R){var L=w;return L instanceof $r&&(L=L.value()),P6(R,function(j,Z){return Z.func.apply(Z.thisArg,ig([j],Z.args))},L)}function nk(w,R,L){var j=w.length;if(j<2)return j?lg(w[0]):[];for(var Z=-1,ae=rt(j);++Z<j;)for(var we=w[Z],Ne=-1;++Ne<j;)Ne!=Z&&(ae[Z]=Dw(ae[Z]||we,w[Ne],R,L));return lg(os(ae,1),R,L)}function DJ(w,R,L){for(var j=-1,Z=w.length,ae=R.length,we={};++j<Z;){var Ne=j<ae?R[j]:r;L(we,w[j],Ne)}return we}function rk(w){return Ua(w)?w:[]}function ik(w){return typeof w=="function"?w:Pl}function cg(w,R){return cr(w)?w:hk(w,R)?[w]:cee(gi(w))}var PDe=Rr;function ug(w,R,L){var j=w.length;return L=L===r?j:L,!R&&L>=j?w:su(w,R,L)}var LJ=v4e||function(w){return as.clearTimeout(w)};function kJ(w,R){if(R)return w.slice();var L=w.length,j=rJ?rJ(L):new w.constructor(L);return w.copy(j),j}function ak(w){var R=new w.constructor(w.byteLength);return new bT(R).set(new bT(w)),R}function NDe(w,R){var L=R?ak(w.buffer):w.buffer;return new w.constructor(L,w.byteOffset,w.byteLength)}function ODe(w){var R=new w.constructor(w.source,en.exec(w));return R.lastIndex=w.lastIndex,R}function IDe(w){return Ow?ki(Ow.call(w)):{}}function FJ(w,R){var L=R?ak(w.buffer):w.buffer;return new w.constructor(L,w.byteOffset,w.length)}function $J(w,R){if(w!==R){var L=w!==r,j=w===null,Z=w===w,ae=uc(w),we=R!==r,Ne=R===null,ze=R===R,St=uc(R);if(!Ne&&!St&&!ae&&w>R||ae&&we&&ze&&!Ne&&!St||j&&we&&ze||!L&&ze||!Z)return 1;if(!j&&!ae&&!St&&w<R||St&&L&&Z&&!j&&!ae||Ne&&L&&Z||!we&&Z||!ze)return-1}return 0}function DDe(w,R,L){for(var j=-1,Z=w.criteria,ae=R.criteria,we=Z.length,Ne=L.length;++j<we;){var ze=$J(Z[j],ae[j]);if(ze){if(j>=Ne)return ze;var St=L[j];return ze*(St=="desc"?-1:1)}}return w.index-R.index}function BJ(w,R,L,j){for(var Z=-1,ae=w.length,we=L.length,Ne=-1,ze=R.length,St=So(ae-we,0),Et=rt(ze+St),Pt=!j;++Ne<ze;)Et[Ne]=R[Ne];for(;++Z<we;)(Pt||Z<ae)&&(Et[L[Z]]=w[Z]);for(;St--;)Et[Ne++]=w[Z++];return Et}function zJ(w,R,L,j){for(var Z=-1,ae=w.length,we=-1,Ne=L.length,ze=-1,St=R.length,Et=So(ae-Ne,0),Pt=rt(Et+St),sn=!j;++Z<Et;)Pt[Z]=w[Z];for(var Sn=Z;++ze<St;)Pt[Sn+ze]=R[ze];for(;++we<Ne;)(sn||Z<ae)&&(Pt[Sn+L[we]]=w[Z++]);return Pt}function Tl(w,R){var L=-1,j=w.length;for(R||(R=rt(j));++L<j;)R[L]=w[L];return R}function mf(w,R,L,j){var Z=!L;L||(L={});for(var ae=-1,we=R.length;++ae<we;){var Ne=R[ae],ze=j?j(L[Ne],w[Ne],Ne,L,w):r;ze===r&&(ze=w[Ne]),Z?Ch(L,Ne,ze):Iw(L,Ne,ze)}return L}function LDe(w,R){return mf(w,fk(w),R)}function kDe(w,R){return mf(w,JJ(w),R)}function DT(w,R){return function(L,j){var Z=cr(L)?UIe:iDe,ae=R?R():{};return Z(L,w,Fn(j,2),ae)}}function d1(w){return Rr(function(R,L){var j=-1,Z=L.length,ae=Z>1?L[Z-1]:r,we=Z>2?L[2]:r;for(ae=w.length>3&&typeof ae=="function"?(Z--,ae):r,we&&el(L[0],L[1],we)&&(ae=Z<3?r:ae,Z=1),R=ki(R);++j<Z;){var Ne=L[j];Ne&&w(R,Ne,j,ae)}return R})}function UJ(w,R){return function(L,j){if(L==null)return L;if(!Al(L))return w(L,j);for(var Z=L.length,ae=R?Z:-1,we=ki(L);(R?ae--:++ae<Z)&&j(we[ae],ae,we)!==!1;);return L}}function VJ(w){return function(R,L,j){for(var Z=-1,ae=ki(R),we=j(R),Ne=we.length;Ne--;){var ze=we[w?Ne:++Z];if(L(ae[ze],ze,ae)===!1)break}return R}}function FDe(w,R,L){var j=R&v,Z=$w(w);function ae(){var we=this&&this!==as&&this instanceof ae?Z:w;return we.apply(j?L:this,arguments)}return ae}function GJ(w){return function(R){R=gi(R);var L=i1(R)?od(R):r,j=L?L[0]:R.charAt(0),Z=L?ug(L,1).join(""):R.slice(1);return j[w]()+Z}}function f1(w){return function(R){return P6(Uee(zee(R).replace(Cw,"")),w,"")}}function $w(w){return function(){var R=arguments;switch(R.length){case 0:return new w;case 1:return new w(R[0]);case 2:return new w(R[0],R[1]);case 3:return new w(R[0],R[1],R[2]);case 4:return new w(R[0],R[1],R[2],R[3]);case 5:return new w(R[0],R[1],R[2],R[3],R[4]);case 6:return new w(R[0],R[1],R[2],R[3],R[4],R[5]);case 7:return new w(R[0],R[1],R[2],R[3],R[4],R[5],R[6])}var L=u1(w.prototype),j=w.apply(L,R);return xa(j)?j:L}}function $De(w,R,L){var j=$w(w);function Z(){for(var ae=arguments.length,we=rt(ae),Ne=ae,ze=h1(Z);Ne--;)we[Ne]=arguments[Ne];var St=ae<3&&we[0]!==ze&&we[ae-1]!==ze?[]:ag(we,ze);if(ae-=St.length,ae<L)return YJ(w,R,LT,Z.placeholder,r,we,St,r,r,L-ae);var Et=this&&this!==as&&this instanceof Z?j:w;return sc(Et,this,we)}return Z}function jJ(w){return function(R,L,j){var Z=ki(R);if(!Al(R)){var ae=Fn(L,3);R=jo(R),L=function(Ne){return ae(Z[Ne],Ne,Z)}}var we=w(R,L,j);return we>-1?Z[ae?R[we]:we]:r}}function HJ(w){return Th(function(R){var L=R.length,j=L,Z=au.prototype.thru;for(w&&R.reverse();j--;){var ae=R[j];if(typeof ae!="function")throw new iu(s);if(Z&&!we&&BT(ae)=="wrapper")var we=new au([],!0)}for(j=we?j:L;++j<L;){ae=R[j];var Ne=BT(ae),ze=Ne=="wrapper"?uk(ae):r;ze&&pk(ze[0])&&ze[1]==(E|x|S|T)&&!ze[4].length&&ze[9]==1?we=we[BT(ze[0])].apply(we,ze[3]):we=ae.length==1&&pk(ae)?we[Ne]():we.thru(ae)}return function(){var St=arguments,Et=St[0];if(we&&St.length==1&&cr(Et))return we.plant(Et).value();for(var Pt=0,sn=L?R[Pt].apply(this,St):Et;++Pt<L;)sn=R[Pt].call(this,sn);return sn}})}function LT(w,R,L,j,Z,ae,we,Ne,ze,St){var Et=R&E,Pt=R&v,sn=R&y,Sn=R&(x|_),Vn=R&P,Sr=sn?r:$w(w);function Gn(){for(var Ir=arguments.length,Hr=rt(Ir),dc=Ir;dc--;)Hr[dc]=arguments[dc];if(Sn)var tl=h1(Gn),fc=KIe(Hr,tl);if(j&&(Hr=BJ(Hr,j,Z,Sn)),ae&&(Hr=zJ(Hr,ae,we,Sn)),Ir-=fc,Sn&&Ir<St){var Va=ag(Hr,tl);return YJ(w,R,LT,Gn.placeholder,L,Hr,Va,Ne,ze,St-Ir)}var cd=Pt?L:this,Nh=sn?cd[w]:w;return Ir=Hr.length,Ne?Hr=iLe(Hr,Ne):Vn&&Ir>1&&Hr.reverse(),Et&&ze<Ir&&(Hr.length=ze),this&&this!==as&&this instanceof Gn&&(Nh=Sr||$w(Nh)),Nh.apply(cd,Hr)}return Gn}function WJ(w,R){return function(L,j){return fDe(L,w,R(j),{})}}function kT(w,R){return function(L,j){var Z;if(L===r&&j===r)return R;if(L!==r&&(Z=L),j!==r){if(Z===r)return j;typeof L=="string"||typeof j=="string"?(L=cc(L),j=cc(j)):(L=NJ(L),j=NJ(j)),Z=w(L,j)}return Z}}function ok(w){return Th(function(R){return R=ca(R,lc(Fn())),Rr(function(L){var j=this;return w(R,function(Z){return sc(Z,j,L)})})})}function FT(w,R){R=R===r?" ":cc(R);var L=R.length;if(L<2)return L?J6(R,w):R;var j=J6(R,ST(w/a1(R)));return i1(R)?ug(od(j),0,w).join(""):j.slice(0,w)}function BDe(w,R,L,j){var Z=R&v,ae=$w(w);function we(){for(var Ne=-1,ze=arguments.length,St=-1,Et=j.length,Pt=rt(Et+ze),sn=this&&this!==as&&this instanceof we?ae:w;++St<Et;)Pt[St]=j[St];for(;ze--;)Pt[St++]=arguments[++Ne];return sc(sn,Z?L:this,Pt)}return we}function qJ(w){return function(R,L,j){return j&&typeof j!="number"&&el(R,L,j)&&(L=j=r),R=Ph(R),L===r?(L=R,R=0):L=Ph(L),j=j===r?R<L?1:-1:Ph(j),EDe(R,L,j,w)}}function $T(w){return function(R,L){return typeof R=="string"&&typeof L=="string"||(R=cu(R),L=cu(L)),w(R,L)}}function YJ(w,R,L,j,Z,ae,we,Ne,ze,St){var Et=R&x,Pt=Et?we:r,sn=Et?r:we,Sn=Et?ae:r,Vn=Et?r:ae;R|=Et?S:M,R&=~(Et?M:S),R&b||(R&=-4);var Sr=[w,R,Z,Sn,Pt,Vn,sn,Ne,ze,St],Gn=L.apply(r,Sr);return pk(w)&&oee(Gn,Sr),Gn.placeholder=j,see(Gn,w,R)}function sk(w){var R=wo[w];return function(L,j){if(L=cu(L),j=j==null?0:Ts(xr(j),292),j&&sJ(L)){var Z=(gi(L)+"e").split("e"),ae=R(Z[0]+"e"+(+Z[1]+j));return Z=(gi(ae)+"e").split("e"),+(Z[0]+"e"+(+Z[1]-j))}return R(L)}}var zDe=l1&&1/hT(new l1([,-0]))[1]==B?function(w){return new l1(w)}:Rk;function XJ(w){return function(R){var L=As(R);return L==J?F6(R):L==ee?r4e(R):XIe(R,w(R))}}function Mh(w,R,L,j,Z,ae,we,Ne){var ze=R&y;if(!ze&&typeof w!="function")throw new iu(s);var St=j?j.length:0;if(St||(R&=-97,j=Z=r),we=we===r?we:So(xr(we),0),Ne=Ne===r?Ne:xr(Ne),St-=Z?Z.length:0,R&M){var Et=j,Pt=Z;j=Z=r}var sn=ze?r:uk(w),Sn=[w,R,L,j,Z,Et,Pt,ae,we,Ne];if(sn&&tLe(Sn,sn),w=Sn[0],R=Sn[1],L=Sn[2],j=Sn[3],Z=Sn[4],Ne=Sn[9]=Sn[9]===r?ze?0:w.length:So(Sn[9]-St,0),!Ne&&R&(x|_)&&(R&=-25),!R||R==v)var Vn=FDe(w,R,L);else R==x||R==_?Vn=$De(w,R,Ne):(R==S||R==(v|S))&&!Z.length?Vn=BDe(w,R,L,j):Vn=LT.apply(r,Sn);var Sr=sn?RJ:oee;return see(Sr(Vn,Sn),w,R)}function KJ(w,R,L,j){return w===r||ld(w,s1[L])&&!yi.call(j,L)?R:w}function ZJ(w,R,L,j,Z,ae){return xa(w)&&xa(R)&&(ae.set(R,w),NT(w,R,r,ZJ,ae),ae.delete(R)),w}function UDe(w){return Uw(w)?r:w}function QJ(w,R,L,j,Z,ae){var we=L&g,Ne=w.length,ze=R.length;if(Ne!=ze&&!(we&&ze>Ne))return!1;var St=ae.get(w),Et=ae.get(R);if(St&&Et)return St==R&&Et==w;var Pt=-1,sn=!0,Sn=L&m?new Rv:r;for(ae.set(w,R),ae.set(R,w);++Pt<Ne;){var Vn=w[Pt],Sr=R[Pt];if(j)var Gn=we?j(Sr,Vn,Pt,R,w,ae):j(Vn,Sr,Pt,w,R,ae);if(Gn!==r){if(Gn)continue;sn=!1;break}if(Sn){if(!N6(R,function(Ir,Hr){if(!Tw(Sn,Hr)&&(Vn===Ir||Z(Vn,Ir,L,j,ae)))return Sn.push(Hr)})){sn=!1;break}}else if(!(Vn===Sr||Z(Vn,Sr,L,j,ae))){sn=!1;break}}return ae.delete(w),ae.delete(R),sn}function VDe(w,R,L,j,Z,ae,we){switch(L){case Ve:if(w.byteLength!=R.byteLength||w.byteOffset!=R.byteOffset)return!1;w=w.buffer,R=R.buffer;case et:return!(w.byteLength!=R.byteLength||!ae(new bT(w),new bT(R)));case Q:case ie:case pe:return ld(+w,+R);case ue:return w.name==R.name&&w.message==R.message;case He:case Y:return w==R+"";case J:var Ne=F6;case ee:var ze=j&g;if(Ne||(Ne=hT),w.size!=R.size&&!ze)return!1;var St=we.get(w);if(St)return St==R;j|=m,we.set(w,R);var Et=QJ(Ne(w),Ne(R),j,Z,ae,we);return we.delete(w),Et;case ce:if(Ow)return Ow.call(w)==Ow.call(R)}return!1}function GDe(w,R,L,j,Z,ae){var we=L&g,Ne=lk(w),ze=Ne.length,St=lk(R),Et=St.length;if(ze!=Et&&!we)return!1;for(var Pt=ze;Pt--;){var sn=Ne[Pt];if(!(we?sn in R:yi.call(R,sn)))return!1}var Sn=ae.get(w),Vn=ae.get(R);if(Sn&&Vn)return Sn==R&&Vn==w;var Sr=!0;ae.set(w,R),ae.set(R,w);for(var Gn=we;++Pt<ze;){sn=Ne[Pt];var Ir=w[sn],Hr=R[sn];if(j)var dc=we?j(Hr,Ir,sn,R,w,ae):j(Ir,Hr,sn,w,R,ae);if(!(dc===r?Ir===Hr||Z(Ir,Hr,L,j,ae):dc)){Sr=!1;break}Gn||(Gn=sn=="constructor")}if(Sr&&!Gn){var tl=w.constructor,fc=R.constructor;tl!=fc&&"constructor"in w&&"constructor"in R&&!(typeof tl=="function"&&tl instanceof tl&&typeof fc=="function"&&fc instanceof fc)&&(Sr=!1)}return ae.delete(w),ae.delete(R),Sr}function Th(w){return mk(iee(w,r,hee),w+"")}function lk(w){return yJ(w,jo,fk)}function ck(w){return yJ(w,Rl,JJ)}var uk=CT?function(w){return CT.get(w)}:Rk;function BT(w){for(var R=w.name+"",L=c1[R],j=yi.call(c1,R)?L.length:0;j--;){var Z=L[j],ae=Z.func;if(ae==null||ae==w)return Z.name}return R}function h1(w){var R=yi.call(ne,"placeholder")?ne:w;return R.placeholder}function Fn(){var w=ne.iteratee||Tk;return w=w===Tk?_J:w,arguments.length?w(arguments[0],arguments[1]):w}function zT(w,R){var L=w.__data__;return ZDe(R)?L[typeof R=="string"?"string":"hash"]:L.map}function dk(w){for(var R=jo(w),L=R.length;L--;){var j=R[L],Z=w[j];R[L]=[j,Z,nee(Z)]}return R}function Ov(w,R){var L=e4e(w,R);return xJ(L)?L:r}function jDe(w){var R=yi.call(w,Tv),L=w[Tv];try{w[Tv]=r;var j=!0}catch{}var Z=vT.call(w);return j&&(R?w[Tv]=L:delete w[Tv]),Z}var fk=B6?function(w){return w==null?[]:(w=ki(w),rg(B6(w),function(R){return aJ.call(w,R)}))}:Pk,JJ=B6?function(w){for(var R=[];w;)ig(R,fk(w)),w=xT(w);return R}:Pk,As=Js;(z6&&As(new z6(new ArrayBuffer(1)))!=Ve||Rw&&As(new Rw)!=J||U6&&As(U6.resolve())!=Re||l1&&As(new l1)!=ee||Pw&&As(new Pw)!=Ae)&&(As=function(w){var R=Js(w),L=R==Me?w.constructor:r,j=L?Iv(L):"";if(j)switch(j){case M4e:return Ve;case T4e:return J;case A4e:return Re;case R4e:return ee;case P4e:return Ae}return R});function HDe(w,R,L){for(var j=-1,Z=L.length;++j<Z;){var ae=L[j],we=ae.size;switch(ae.type){case"drop":w+=we;break;case"dropRight":R-=we;break;case"take":R=Ts(R,w+we);break;case"takeRight":w=So(w,R-we);break}}return{start:w,end:R}}function WDe(w){var R=w.match(ft);return R?R[1].split(Tt):[]}function eee(w,R,L){R=cg(R,w);for(var j=-1,Z=R.length,ae=!1;++j<Z;){var we=vf(R[j]);if(!(ae=w!=null&&L(w,we)))break;w=w[we]}return ae||++j!=Z?ae:(Z=w==null?0:w.length,!!Z&&qT(Z)&&Ah(we,Z)&&(cr(w)||Dv(w)))}function qDe(w){var R=w.length,L=new w.constructor(R);return R&&typeof w[0]=="string"&&yi.call(w,"index")&&(L.index=w.index,L.input=w.input),L}function tee(w){return typeof w.constructor=="function"&&!Bw(w)?u1(xT(w)):{}}function YDe(w,R,L){var j=w.constructor;switch(R){case et:return ak(w);case Q:case ie:return new j(+w);case Ve:return NDe(w,L);case qe:case dt:case Ge:case We:case Ze:case Ie:case De:case bt:case Ke:return FJ(w,L);case J:return new j;case pe:case Y:return new j(w);case He:return ODe(w);case ee:return new j;case ce:return IDe(w)}}function XDe(w,R){var L=R.length;if(!L)return w;var j=L-1;return R[j]=(L>1?"& ":"")+R[j],R=R.join(L>2?", ":" "),w.replace(tt,`{
/* [wrapped with `+R+`] */
`)}function KDe(w){return cr(w)||Dv(w)||!!(oJ&&w&&w[oJ])}function Ah(w,R){var L=typeof w;return R=R??F,!!R&&(L=="number"||L!="symbol"&&te.test(w))&&w>-1&&w%1==0&&w<R}function el(w,R,L){if(!xa(L))return!1;var j=typeof R;return(j=="number"?Al(L)&&Ah(R,L.length):j=="string"&&R in L)?ld(L[R],w):!1}function hk(w,R){if(cr(w))return!1;var L=typeof w;return L=="number"||L=="symbol"||L=="boolean"||w==null||uc(w)?!0:Ft.test(w)||!wt.test(w)||R!=null&&w in ki(R)}function ZDe(w){var R=typeof w;return R=="string"||R=="number"||R=="symbol"||R=="boolean"?w!=="__proto__":w===null}function pk(w){var R=BT(w),L=ne[R];if(typeof L!="function"||!(R in $r.prototype))return!1;if(w===L)return!0;var j=uk(L);return!!j&&w===j[0]}function QDe(w){return!!nJ&&nJ in w}var JDe=gT?Rh:Nk;function Bw(w){var R=w&&w.constructor,L=typeof R=="function"&&R.prototype||s1;return w===L}function nee(w){return w===w&&!xa(w)}function ree(w,R){return function(L){return L==null?!1:L[w]===R&&(R!==r||w in ki(L))}}function eLe(w){var R=HT(w,function(j){return L.size===u&&L.clear(),j}),L=R.cache;return R}function tLe(w,R){var L=w[1],j=R[1],Z=L|j,ae=Z<(v|y|E),we=j==E&&L==x||j==E&&L==T&&w[7].length<=R[8]||j==(E|T)&&R[7].length<=R[8]&&L==x;if(!(ae||we))return w;j&v&&(w[2]=R[2],Z|=L&v?0:b);var Ne=R[3];if(Ne){var ze=w[3];w[3]=ze?BJ(ze,Ne,R[4]):Ne,w[4]=ze?ag(w[3],d):R[4]}return Ne=R[5],Ne&&(ze=w[5],w[5]=ze?zJ(ze,Ne,R[6]):Ne,w[6]=ze?ag(w[5],d):R[6]),Ne=R[7],Ne&&(w[7]=Ne),j&E&&(w[8]=w[8]==null?R[8]:Ts(w[8],R[8])),w[9]==null&&(w[9]=R[9]),w[0]=R[0],w[1]=Z,w}function nLe(w){var R=[];if(w!=null)for(var L in ki(w))R.push(L);return R}function rLe(w){return vT.call(w)}function iee(w,R,L){return R=So(R===r?w.length-1:R,0),function(){for(var j=arguments,Z=-1,ae=So(j.length-R,0),we=rt(ae);++Z<ae;)we[Z]=j[R+Z];Z=-1;for(var Ne=rt(R+1);++Z<R;)Ne[Z]=j[Z];return Ne[R]=L(we),sc(w,this,Ne)}}function aee(w,R){return R.length<2?w:Nv(w,su(R,0,-1))}function iLe(w,R){for(var L=w.length,j=Ts(R.length,L),Z=Tl(w);j--;){var ae=R[j];w[j]=Ah(ae,L)?Z[ae]:r}return w}function gk(w,R){if(!(R==="constructor"&&typeof w[R]=="function")&&R!="__proto__")return w[R]}var oee=lee(RJ),zw=b4e||function(w,R){return as.setTimeout(w,R)},mk=lee(TDe);function see(w,R,L){var j=R+"";return mk(w,XDe(j,aLe(WDe(j),L)))}function lee(w){var R=0,L=0;return function(){var j=S4e(),Z=I-(j-L);if(L=j,Z>0){if(++R>=O)return arguments[0]}else R=0;return w.apply(r,arguments)}}function UT(w,R){var L=-1,j=w.length,Z=j-1;for(R=R===r?j:R;++L<R;){var ae=Q6(L,Z),we=w[ae];w[ae]=w[L],w[L]=we}return w.length=R,w}var cee=eLe(function(w){var R=[];return w.charCodeAt(0)===46&&R.push(""),w.replace(wn,function(L,j,Z,ae){R.push(Z?ae.replace(Lt,"$1"):j||L)}),R});function vf(w){if(typeof w=="string"||uc(w))return w;var R=w+"";return R=="0"&&1/w==-1/0?"-0":R}function Iv(w){if(w!=null){try{return mT.call(w)}catch{}try{return w+""}catch{}}return""}function aLe(w,R){return ru(V,function(L){var j="_."+L[0];R&L[1]&&!dT(w,j)&&w.push(j)}),w.sort()}function uee(w){if(w instanceof $r)return w.clone();var R=new au(w.__wrapped__,w.__chain__);return R.__actions__=Tl(w.__actions__),R.__index__=w.__index__,R.__values__=w.__values__,R}function oLe(w,R,L){(L?el(w,R,L):R===r)?R=1:R=So(xr(R),0);var j=w==null?0:w.length;if(!j||R<1)return[];for(var Z=0,ae=0,we=rt(ST(j/R));Z<j;)we[ae++]=su(w,Z,Z+=R);return we}function sLe(w){for(var R=-1,L=w==null?0:w.length,j=0,Z=[];++R<L;){var ae=w[R];ae&&(Z[j++]=ae)}return Z}function lLe(){var w=arguments.length;if(!w)return[];for(var R=rt(w-1),L=arguments[0],j=w;j--;)R[j-1]=arguments[j];return ig(cr(L)?Tl(L):[L],os(R,1))}var cLe=Rr(function(w,R){return Ua(w)?Dw(w,os(R,1,Ua,!0)):[]}),uLe=Rr(function(w,R){var L=lu(R);return Ua(L)&&(L=r),Ua(w)?Dw(w,os(R,1,Ua,!0),Fn(L,2)):[]}),dLe=Rr(function(w,R){var L=lu(R);return Ua(L)&&(L=r),Ua(w)?Dw(w,os(R,1,Ua,!0),r,L):[]});function fLe(w,R,L){var j=w==null?0:w.length;return j?(R=L||R===r?1:xr(R),su(w,R<0?0:R,j)):[]}function hLe(w,R,L){var j=w==null?0:w.length;return j?(R=L||R===r?1:xr(R),R=j-R,su(w,0,R<0?0:R)):[]}function pLe(w,R){return w&&w.length?IT(w,Fn(R,3),!0,!0):[]}function gLe(w,R){return w&&w.length?IT(w,Fn(R,3),!0):[]}function mLe(w,R,L,j){var Z=w==null?0:w.length;return Z?(L&&typeof L!="number"&&el(w,R,L)&&(L=0,j=Z),lDe(w,R,L,j)):[]}function dee(w,R,L){var j=w==null?0:w.length;if(!j)return-1;var Z=L==null?0:xr(L);return Z<0&&(Z=So(j+Z,0)),fT(w,Fn(R,3),Z)}function fee(w,R,L){var j=w==null?0:w.length;if(!j)return-1;var Z=j-1;return L!==r&&(Z=xr(L),Z=L<0?So(j+Z,0):Ts(Z,j-1)),fT(w,Fn(R,3),Z,!0)}function hee(w){var R=w==null?0:w.length;return R?os(w,1):[]}function vLe(w){var R=w==null?0:w.length;return R?os(w,B):[]}function yLe(w,R){var L=w==null?0:w.length;return L?(R=R===r?1:xr(R),os(w,R)):[]}function bLe(w){for(var R=-1,L=w==null?0:w.length,j={};++R<L;){var Z=w[R];j[Z[0]]=Z[1]}return j}function pee(w){return w&&w.length?w[0]:r}function xLe(w,R,L){var j=w==null?0:w.length;if(!j)return-1;var Z=L==null?0:xr(L);return Z<0&&(Z=So(j+Z,0)),r1(w,R,Z)}function _Le(w){var R=w==null?0:w.length;return R?su(w,0,-1):[]}var wLe=Rr(function(w){var R=ca(w,rk);return R.length&&R[0]===w[0]?q6(R):[]}),SLe=Rr(function(w){var R=lu(w),L=ca(w,rk);return R===lu(L)?R=r:L.pop(),L.length&&L[0]===w[0]?q6(L,Fn(R,2)):[]}),ELe=Rr(function(w){var R=lu(w),L=ca(w,rk);return R=typeof R=="function"?R:r,R&&L.pop(),L.length&&L[0]===w[0]?q6(L,r,R):[]});function CLe(w,R){return w==null?"":_4e.call(w,R)}function lu(w){var R=w==null?0:w.length;return R?w[R-1]:r}function MLe(w,R,L){var j=w==null?0:w.length;if(!j)return-1;var Z=j;return L!==r&&(Z=xr(L),Z=Z<0?So(j+Z,0):Ts(Z,j-1)),R===R?a4e(w,R,Z):fT(w,YQ,Z,!0)}function TLe(w,R){return w&&w.length?CJ(w,xr(R)):r}var ALe=Rr(gee);function gee(w,R){return w&&w.length&&R&&R.length?Z6(w,R):w}function RLe(w,R,L){return w&&w.length&&R&&R.length?Z6(w,R,Fn(L,2)):w}function PLe(w,R,L){return w&&w.length&&R&&R.length?Z6(w,R,r,L):w}var NLe=Th(function(w,R){var L=w==null?0:w.length,j=G6(w,R);return AJ(w,ca(R,function(Z){return Ah(Z,L)?+Z:Z}).sort($J)),j});function OLe(w,R){var L=[];if(!(w&&w.length))return L;var j=-1,Z=[],ae=w.length;for(R=Fn(R,3);++j<ae;){var we=w[j];R(we,j,w)&&(L.push(we),Z.push(j))}return AJ(w,Z),L}function vk(w){return w==null?w:C4e.call(w)}function ILe(w,R,L){var j=w==null?0:w.length;return j?(L&&typeof L!="number"&&el(w,R,L)?(R=0,L=j):(R=R==null?0:xr(R),L=L===r?j:xr(L)),su(w,R,L)):[]}function DLe(w,R){return OT(w,R)}function LLe(w,R,L){return ek(w,R,Fn(L,2))}function kLe(w,R){var L=w==null?0:w.length;if(L){var j=OT(w,R);if(j<L&&ld(w[j],R))return j}return-1}function FLe(w,R){return OT(w,R,!0)}function $Le(w,R,L){return ek(w,R,Fn(L,2),!0)}function BLe(w,R){var L=w==null?0:w.length;if(L){var j=OT(w,R,!0)-1;if(ld(w[j],R))return j}return-1}function zLe(w){return w&&w.length?PJ(w):[]}function ULe(w,R){return w&&w.length?PJ(w,Fn(R,2)):[]}function VLe(w){var R=w==null?0:w.length;return R?su(w,1,R):[]}function GLe(w,R,L){return w&&w.length?(R=L||R===r?1:xr(R),su(w,0,R<0?0:R)):[]}function jLe(w,R,L){var j=w==null?0:w.length;return j?(R=L||R===r?1:xr(R),R=j-R,su(w,R<0?0:R,j)):[]}function HLe(w,R){return w&&w.length?IT(w,Fn(R,3),!1,!0):[]}function WLe(w,R){return w&&w.length?IT(w,Fn(R,3)):[]}var qLe=Rr(function(w){return lg(os(w,1,Ua,!0))}),YLe=Rr(function(w){var R=lu(w);return Ua(R)&&(R=r),lg(os(w,1,Ua,!0),Fn(R,2))}),XLe=Rr(function(w){var R=lu(w);return R=typeof R=="function"?R:r,lg(os(w,1,Ua,!0),r,R)});function KLe(w){return w&&w.length?lg(w):[]}function ZLe(w,R){return w&&w.length?lg(w,Fn(R,2)):[]}function QLe(w,R){return R=typeof R=="function"?R:r,w&&w.length?lg(w,r,R):[]}function yk(w){if(!(w&&w.length))return[];var R=0;return w=rg(w,function(L){if(Ua(L))return R=So(L.length,R),!0}),L6(R,function(L){return ca(w,O6(L))})}function mee(w,R){if(!(w&&w.length))return[];var L=yk(w);return R==null?L:ca(L,function(j){return sc(R,r,j)})}var JLe=Rr(function(w,R){return Ua(w)?Dw(w,R):[]}),e6e=Rr(function(w){return nk(rg(w,Ua))}),t6e=Rr(function(w){var R=lu(w);return Ua(R)&&(R=r),nk(rg(w,Ua),Fn(R,2))}),n6e=Rr(function(w){var R=lu(w);return R=typeof R=="function"?R:r,nk(rg(w,Ua),r,R)}),r6e=Rr(yk);function i6e(w,R){return DJ(w||[],R||[],Iw)}function a6e(w,R){return DJ(w||[],R||[],Fw)}var o6e=Rr(function(w){var R=w.length,L=R>1?w[R-1]:r;return L=typeof L=="function"?(w.pop(),L):r,mee(w,L)});function vee(w){var R=ne(w);return R.__chain__=!0,R}function s6e(w,R){return R(w),w}function VT(w,R){return R(w)}var l6e=Th(function(w){var R=w.length,L=R?w[0]:0,j=this.__wrapped__,Z=function(ae){return G6(ae,w)};return R>1||this.__actions__.length||!(j instanceof $r)||!Ah(L)?this.thru(Z):(j=j.slice(L,+L+(R?1:0)),j.__actions__.push({func:VT,args:[Z],thisArg:r}),new au(j,this.__chain__).thru(function(ae){return R&&!ae.length&&ae.push(r),ae}))});function c6e(){return vee(this)}function u6e(){return new au(this.value(),this.__chain__)}function d6e(){this.__values__===r&&(this.__values__=Nee(this.value()));var w=this.__index__>=this.__values__.length,R=w?r:this.__values__[this.__index__++];return{done:w,value:R}}function f6e(){return this}function h6e(w){for(var R,L=this;L instanceof TT;){var j=uee(L);j.__index__=0,j.__values__=r,R?Z.__wrapped__=j:R=j;var Z=j;L=L.__wrapped__}return Z.__wrapped__=w,R}function p6e(){var w=this.__wrapped__;if(w instanceof $r){var R=w;return this.__actions__.length&&(R=new $r(this)),R=R.reverse(),R.__actions__.push({func:VT,args:[vk],thisArg:r}),new au(R,this.__chain__)}return this.thru(vk)}function g6e(){return IJ(this.__wrapped__,this.__actions__)}var m6e=DT(function(w,R,L){yi.call(w,L)?++w[L]:Ch(w,L,1)});function v6e(w,R,L){var j=cr(w)?WQ:sDe;return L&&el(w,R,L)&&(R=r),j(w,Fn(R,3))}function y6e(w,R){var L=cr(w)?rg:mJ;return L(w,Fn(R,3))}var b6e=jJ(dee),x6e=jJ(fee);function _6e(w,R){return os(GT(w,R),1)}function w6e(w,R){return os(GT(w,R),B)}function S6e(w,R,L){return L=L===r?1:xr(L),os(GT(w,R),L)}function yee(w,R){var L=cr(w)?ru:sg;return L(w,Fn(R,3))}function bee(w,R){var L=cr(w)?VIe:gJ;return L(w,Fn(R,3))}var E6e=DT(function(w,R,L){yi.call(w,L)?w[L].push(R):Ch(w,L,[R])});function C6e(w,R,L,j){w=Al(w)?w:g1(w),L=L&&!j?xr(L):0;var Z=w.length;return L<0&&(L=So(Z+L,0)),YT(w)?L<=Z&&w.indexOf(R,L)>-1:!!Z&&r1(w,R,L)>-1}var M6e=Rr(function(w,R,L){var j=-1,Z=typeof R=="function",ae=Al(w)?rt(w.length):[];return sg(w,function(we){ae[++j]=Z?sc(R,we,L):Lw(we,R,L)}),ae}),T6e=DT(function(w,R,L){Ch(w,L,R)});function GT(w,R){var L=cr(w)?ca:wJ;return L(w,Fn(R,3))}function A6e(w,R,L,j){return w==null?[]:(cr(R)||(R=R==null?[]:[R]),L=j?r:L,cr(L)||(L=L==null?[]:[L]),MJ(w,R,L))}var R6e=DT(function(w,R,L){w[L?0:1].push(R)},function(){return[[],[]]});function P6e(w,R,L){var j=cr(w)?P6:KQ,Z=arguments.length<3;return j(w,Fn(R,4),L,Z,sg)}function N6e(w,R,L){var j=cr(w)?GIe:KQ,Z=arguments.length<3;return j(w,Fn(R,4),L,Z,gJ)}function O6e(w,R){var L=cr(w)?rg:mJ;return L(w,WT(Fn(R,3)))}function I6e(w){var R=cr(w)?dJ:CDe;return R(w)}function D6e(w,R,L){(L?el(w,R,L):R===r)?R=1:R=xr(R);var j=cr(w)?nDe:MDe;return j(w,R)}function L6e(w){var R=cr(w)?rDe:ADe;return R(w)}function k6e(w){if(w==null)return 0;if(Al(w))return YT(w)?a1(w):w.length;var R=As(w);return R==J||R==ee?w.size:X6(w).length}function F6e(w,R,L){var j=cr(w)?N6:RDe;return L&&el(w,R,L)&&(R=r),j(w,Fn(R,3))}var $6e=Rr(function(w,R){if(w==null)return[];var L=R.length;return L>1&&el(w,R[0],R[1])?R=[]:L>2&&el(R[0],R[1],R[2])&&(R=[R[0]]),MJ(w,os(R,1),[])}),jT=y4e||function(){return as.Date.now()};function B6e(w,R){if(typeof R!="function")throw new iu(s);return w=xr(w),function(){if(--w<1)return R.apply(this,arguments)}}function xee(w,R,L){return R=L?r:R,R=w&&R==null?w.length:R,Mh(w,E,r,r,r,r,R)}function _ee(w,R){var L;if(typeof R!="function")throw new iu(s);return w=xr(w),function(){return--w>0&&(L=R.apply(this,arguments)),w<=1&&(R=r),L}}var bk=Rr(function(w,R,L){var j=v;if(L.length){var Z=ag(L,h1(bk));j|=S}return Mh(w,j,R,L,Z)}),wee=Rr(function(w,R,L){var j=v|y;if(L.length){var Z=ag(L,h1(wee));j|=S}return Mh(R,j,w,L,Z)});function See(w,R,L){R=L?r:R;var j=Mh(w,x,r,r,r,r,r,R);return j.placeholder=See.placeholder,j}function Eee(w,R,L){R=L?r:R;var j=Mh(w,_,r,r,r,r,r,R);return j.placeholder=Eee.placeholder,j}function Cee(w,R,L){var j,Z,ae,we,Ne,ze,St=0,Et=!1,Pt=!1,sn=!0;if(typeof w!="function")throw new iu(s);R=cu(R)||0,xa(L)&&(Et=!!L.leading,Pt="maxWait"in L,ae=Pt?So(cu(L.maxWait)||0,R):ae,sn="trailing"in L?!!L.trailing:sn);function Sn(Va){var cd=j,Nh=Z;return j=Z=r,St=Va,we=w.apply(Nh,cd),we}function Vn(Va){return St=Va,Ne=zw(Ir,R),Et?Sn(Va):we}function Sr(Va){var cd=Va-ze,Nh=Va-St,jee=R-cd;return Pt?Ts(jee,ae-Nh):jee}function Gn(Va){var cd=Va-ze,Nh=Va-St;return ze===r||cd>=R||cd<0||Pt&&Nh>=ae}function Ir(){var Va=jT();if(Gn(Va))return Hr(Va);Ne=zw(Ir,Sr(Va))}function Hr(Va){return Ne=r,sn&&j?Sn(Va):(j=Z=r,we)}function dc(){Ne!==r&&LJ(Ne),St=0,j=ze=Z=Ne=r}function tl(){return Ne===r?we:Hr(jT())}function fc(){var Va=jT(),cd=Gn(Va);if(j=arguments,Z=this,ze=Va,cd){if(Ne===r)return Vn(ze);if(Pt)return LJ(Ne),Ne=zw(Ir,R),Sn(ze)}return Ne===r&&(Ne=zw(Ir,R)),we}return fc.cancel=dc,fc.flush=tl,fc}var z6e=Rr(function(w,R){return pJ(w,1,R)}),U6e=Rr(function(w,R,L){return pJ(w,cu(R)||0,L)});function V6e(w){return Mh(w,P)}function HT(w,R){if(typeof w!="function"||R!=null&&typeof R!="function")throw new iu(s);var L=function(){var j=arguments,Z=R?R.apply(this,j):j[0],ae=L.cache;if(ae.has(Z))return ae.get(Z);var we=w.apply(this,j);return L.cache=ae.set(Z,we)||ae,we};return L.cache=new(HT.Cache||Eh),L}HT.Cache=Eh;function WT(w){if(typeof w!="function")throw new iu(s);return function(){var R=arguments;switch(R.length){case 0:return!w.call(this);case 1:return!w.call(this,R[0]);case 2:return!w.call(this,R[0],R[1]);case 3:return!w.call(this,R[0],R[1],R[2])}return!w.apply(this,R)}}function G6e(w){return _ee(2,w)}var j6e=PDe(function(w,R){R=R.length==1&&cr(R[0])?ca(R[0],lc(Fn())):ca(os(R,1),lc(Fn()));var L=R.length;return Rr(function(j){for(var Z=-1,ae=Ts(j.length,L);++Z<ae;)j[Z]=R[Z].call(this,j[Z]);return sc(w,this,j)})}),xk=Rr(function(w,R){var L=ag(R,h1(xk));return Mh(w,S,r,R,L)}),Mee=Rr(function(w,R){var L=ag(R,h1(Mee));return Mh(w,M,r,R,L)}),H6e=Th(function(w,R){return Mh(w,T,r,r,r,R)});function W6e(w,R){if(typeof w!="function")throw new iu(s);return R=R===r?R:xr(R),Rr(w,R)}function q6e(w,R){if(typeof w!="function")throw new iu(s);return R=R==null?0:So(xr(R),0),Rr(function(L){var j=L[R],Z=ug(L,0,R);return j&&ig(Z,j),sc(w,this,Z)})}function Y6e(w,R,L){var j=!0,Z=!0;if(typeof w!="function")throw new iu(s);return xa(L)&&(j="leading"in L?!!L.leading:j,Z="trailing"in L?!!L.trailing:Z),Cee(w,R,{leading:j,maxWait:R,trailing:Z})}function X6e(w){return xee(w,1)}function K6e(w,R){return xk(ik(R),w)}function Z6e(){if(!arguments.length)return[];var w=arguments[0];return cr(w)?w:[w]}function Q6e(w){return ou(w,p)}function J6e(w,R){return R=typeof R=="function"?R:r,ou(w,p,R)}function eke(w){return ou(w,f|p)}function tke(w,R){return R=typeof R=="function"?R:r,ou(w,f|p,R)}function nke(w,R){return R==null||hJ(w,R,jo(R))}function ld(w,R){return w===R||w!==w&&R!==R}var rke=$T(W6),ike=$T(function(w,R){return w>=R}),Dv=bJ(function(){return arguments}())?bJ:function(w){return Oa(w)&&yi.call(w,"callee")&&!aJ.call(w,"callee")},cr=rt.isArray,ake=zQ?lc(zQ):hDe;function Al(w){return w!=null&&qT(w.length)&&!Rh(w)}function Ua(w){return Oa(w)&&Al(w)}function oke(w){return w===!0||w===!1||Oa(w)&&Js(w)==Q}var dg=x4e||Nk,ske=UQ?lc(UQ):pDe;function lke(w){return Oa(w)&&w.nodeType===1&&!Uw(w)}function cke(w){if(w==null)return!0;if(Al(w)&&(cr(w)||typeof w=="string"||typeof w.splice=="function"||dg(w)||p1(w)||Dv(w)))return!w.length;var R=As(w);if(R==J||R==ee)return!w.size;if(Bw(w))return!X6(w).length;for(var L in w)if(yi.call(w,L))return!1;return!0}function uke(w,R){return kw(w,R)}function dke(w,R,L){L=typeof L=="function"?L:r;var j=L?L(w,R):r;return j===r?kw(w,R,r,L):!!j}function _k(w){if(!Oa(w))return!1;var R=Js(w);return R==ue||R==oe||typeof w.message=="string"&&typeof w.name=="string"&&!Uw(w)}function fke(w){return typeof w=="number"&&sJ(w)}function Rh(w){if(!xa(w))return!1;var R=Js(w);return R==le||R==me||R==q||R==Xe}function Tee(w){return typeof w=="number"&&w==xr(w)}function qT(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=F}function xa(w){var R=typeof w;return w!=null&&(R=="object"||R=="function")}function Oa(w){return w!=null&&typeof w=="object"}var Aee=VQ?lc(VQ):mDe;function hke(w,R){return w===R||Y6(w,R,dk(R))}function pke(w,R,L){return L=typeof L=="function"?L:r,Y6(w,R,dk(R),L)}function gke(w){return Ree(w)&&w!=+w}function mke(w){if(JDe(w))throw new ar(o);return xJ(w)}function vke(w){return w===null}function yke(w){return w==null}function Ree(w){return typeof w=="number"||Oa(w)&&Js(w)==pe}function Uw(w){if(!Oa(w)||Js(w)!=Me)return!1;var R=xT(w);if(R===null)return!0;var L=yi.call(R,"constructor")&&R.constructor;return typeof L=="function"&&L instanceof L&&mT.call(L)==p4e}var wk=GQ?lc(GQ):vDe;function bke(w){return Tee(w)&&w>=-9007199254740991&&w<=F}var Pee=jQ?lc(jQ):yDe;function YT(w){return typeof w=="string"||!cr(w)&&Oa(w)&&Js(w)==Y}function uc(w){return typeof w=="symbol"||Oa(w)&&Js(w)==ce}var p1=HQ?lc(HQ):bDe;function xke(w){return w===r}function _ke(w){return Oa(w)&&As(w)==Ae}function wke(w){return Oa(w)&&Js(w)==Ce}var Ske=$T(K6),Eke=$T(function(w,R){return w<=R});function Nee(w){if(!w)return[];if(Al(w))return YT(w)?od(w):Tl(w);if(Aw&&w[Aw])return n4e(w[Aw]());var R=As(w),L=R==J?F6:R==ee?hT:g1;return L(w)}function Ph(w){if(!w)return w===0?w:0;if(w=cu(w),w===B||w===-1/0){var R=w<0?-1:1;return R*G}return w===w?w:0}function xr(w){var R=Ph(w),L=R%1;return R===R?L?R-L:R:0}function Oee(w){return w?Pv(xr(w),0,U):0}function cu(w){if(typeof w=="number")return w;if(uc(w))return z;if(xa(w)){var R=typeof w.valueOf=="function"?w.valueOf():w;w=xa(R)?R+"":R}if(typeof w!="string")return w===0?w:+w;w=ZQ(w);var L=kn.test(w);return L||_n.test(w)?BIe(w.slice(2),L?2:8):yn.test(w)?z:+w}function Iee(w){return mf(w,Rl(w))}function Cke(w){return w?Pv(xr(w),-9007199254740991,F):w===0?w:0}function gi(w){return w==null?"":cc(w)}var Mke=d1(function(w,R){if(Bw(R)||Al(R)){mf(R,jo(R),w);return}for(var L in R)yi.call(R,L)&&Iw(w,L,R[L])}),Dee=d1(function(w,R){mf(R,Rl(R),w)}),XT=d1(function(w,R,L,j){mf(R,Rl(R),w,j)}),Tke=d1(function(w,R,L,j){mf(R,jo(R),w,j)}),Ake=Th(G6);function Rke(w,R){var L=u1(w);return R==null?L:fJ(L,R)}var Pke=Rr(function(w,R){w=ki(w);var L=-1,j=R.length,Z=j>2?R[2]:r;for(Z&&el(R[0],R[1],Z)&&(j=1);++L<j;)for(var ae=R[L],we=Rl(ae),Ne=-1,ze=we.length;++Ne<ze;){var St=we[Ne],Et=w[St];(Et===r||ld(Et,s1[St])&&!yi.call(w,St))&&(w[St]=ae[St])}return w}),Nke=Rr(function(w){return w.push(r,ZJ),sc(Lee,r,w)});function Oke(w,R){return qQ(w,Fn(R,3),gf)}function Ike(w,R){return qQ(w,Fn(R,3),H6)}function Dke(w,R){return w==null?w:j6(w,Fn(R,3),Rl)}function Lke(w,R){return w==null?w:vJ(w,Fn(R,3),Rl)}function kke(w,R){return w&&gf(w,Fn(R,3))}function Fke(w,R){return w&&H6(w,Fn(R,3))}function $ke(w){return w==null?[]:PT(w,jo(w))}function Bke(w){return w==null?[]:PT(w,Rl(w))}function Sk(w,R,L){var j=w==null?r:Nv(w,R);return j===r?L:j}function zke(w,R){return w!=null&&eee(w,R,cDe)}function Ek(w,R){return w!=null&&eee(w,R,uDe)}var Uke=WJ(function(w,R,L){R!=null&&typeof R.toString!="function"&&(R=vT.call(R)),w[R]=L},Mk(Pl)),Vke=WJ(function(w,R,L){R!=null&&typeof R.toString!="function"&&(R=vT.call(R)),yi.call(w,R)?w[R].push(L):w[R]=[L]},Fn),Gke=Rr(Lw);function jo(w){return Al(w)?uJ(w):X6(w)}function Rl(w){return Al(w)?uJ(w,!0):xDe(w)}function jke(w,R){var L={};return R=Fn(R,3),gf(w,function(j,Z,ae){Ch(L,R(j,Z,ae),j)}),L}function Hke(w,R){var L={};return R=Fn(R,3),gf(w,function(j,Z,ae){Ch(L,Z,R(j,Z,ae))}),L}var Wke=d1(function(w,R,L){NT(w,R,L)}),Lee=d1(function(w,R,L,j){NT(w,R,L,j)}),qke=Th(function(w,R){var L={};if(w==null)return L;var j=!1;R=ca(R,function(ae){return ae=cg(ae,w),j||(j=ae.length>1),ae}),mf(w,ck(w),L),j&&(L=ou(L,f|h|p,UDe));for(var Z=R.length;Z--;)tk(L,R[Z]);return L});function Yke(w,R){return kee(w,WT(Fn(R)))}var Xke=Th(function(w,R){return w==null?{}:wDe(w,R)});function kee(w,R){if(w==null)return{};var L=ca(ck(w),function(j){return[j]});return R=Fn(R),TJ(w,L,function(j,Z){return R(j,Z[0])})}function Kke(w,R,L){R=cg(R,w);var j=-1,Z=R.length;for(Z||(Z=1,w=r);++j<Z;){var ae=w==null?r:w[vf(R[j])];ae===r&&(j=Z,ae=L),w=Rh(ae)?ae.call(w):ae}return w}function Zke(w,R,L){return w==null?w:Fw(w,R,L)}function Qke(w,R,L,j){return j=typeof j=="function"?j:r,w==null?w:Fw(w,R,L,j)}var Fee=XJ(jo),$ee=XJ(Rl);function Jke(w,R,L){var j=cr(w),Z=j||dg(w)||p1(w);if(R=Fn(R,4),L==null){var ae=w&&w.constructor;Z?L=j?new ae:[]:xa(w)?L=Rh(ae)?u1(xT(w)):{}:L={}}return(Z?ru:gf)(w,function(we,Ne,ze){return R(L,we,Ne,ze)}),L}function e5e(w,R){return w==null?!0:tk(w,R)}function t5e(w,R,L){return w==null?w:OJ(w,R,ik(L))}function n5e(w,R,L,j){return j=typeof j=="function"?j:r,w==null?w:OJ(w,R,ik(L),j)}function g1(w){return w==null?[]:k6(w,jo(w))}function r5e(w){return w==null?[]:k6(w,Rl(w))}function i5e(w,R,L){return L===r&&(L=R,R=r),L!==r&&(L=cu(L),L=L===L?L:0),R!==r&&(R=cu(R),R=R===R?R:0),Pv(cu(w),R,L)}function a5e(w,R,L){return R=Ph(R),L===r?(L=R,R=0):L=Ph(L),w=cu(w),dDe(w,R,L)}function o5e(w,R,L){if(L&&typeof L!="boolean"&&el(w,R,L)&&(R=L=r),L===r&&(typeof R=="boolean"?(L=R,R=r):typeof w=="boolean"&&(L=w,w=r)),w===r&&R===r?(w=0,R=1):(w=Ph(w),R===r?(R=w,w=0):R=Ph(R)),w>R){var j=w;w=R,R=j}if(L||w%1||R%1){var Z=lJ();return Ts(w+Z*(R-w+$Ie("1e-"+((Z+"").length-1))),R)}return Q6(w,R)}var s5e=f1(function(w,R,L){return R=R.toLowerCase(),w+(L?Bee(R):R)});function Bee(w){return Ck(gi(w).toLowerCase())}function zee(w){return w=gi(w),w&&w.replace(de,ZIe).replace(gn,"")}function l5e(w,R,L){w=gi(w),R=cc(R);var j=w.length;L=L===r?j:Pv(xr(L),0,j);var Z=L;return L-=R.length,L>=0&&w.slice(L,Z)==R}function c5e(w){return w=gi(w),w&&nt.test(w)?w.replace(Le,QIe):w}function u5e(w){return w=gi(w),w&&be.test(w)?w.replace(ye,"\\$&"):w}var d5e=f1(function(w,R,L){return w+(L?"-":"")+R.toLowerCase()}),f5e=f1(function(w,R,L){return w+(L?" ":"")+R.toLowerCase()}),h5e=GJ("toLowerCase");function p5e(w,R,L){w=gi(w),R=xr(R);var j=R?a1(w):0;if(!R||j>=R)return w;var Z=(R-j)/2;return FT(ET(Z),L)+w+FT(ST(Z),L)}function g5e(w,R,L){w=gi(w),R=xr(R);var j=R?a1(w):0;return R&&j<R?w+FT(R-j,L):w}function m5e(w,R,L){w=gi(w),R=xr(R);var j=R?a1(w):0;return R&&j<R?FT(R-j,L)+w:w}function v5e(w,R,L){return L||R==null?R=0:R&&(R=+R),E4e(gi(w).replace(Se,""),R||0)}function y5e(w,R,L){return(L?el(w,R,L):R===r)?R=1:R=xr(R),J6(gi(w),R)}function b5e(){var w=arguments,R=gi(w[0]);return w.length<3?R:R.replace(w[1],w[2])}var x5e=f1(function(w,R,L){return w+(L?"_":"")+R.toLowerCase()});function _5e(w,R,L){return L&&typeof L!="number"&&el(w,R,L)&&(R=L=r),L=L===r?U:L>>>0,L?(w=gi(w),w&&(typeof R=="string"||R!=null&&!wk(R))&&(R=cc(R),!R&&i1(w))?ug(od(w),0,L):w.split(R,L)):[]}var w5e=f1(function(w,R,L){return w+(L?" ":"")+Ck(R)});function S5e(w,R,L){return w=gi(w),L=L==null?0:Pv(xr(L),0,w.length),R=cc(R),w.slice(L,L+R.length)==R}function E5e(w,R,L){var j=ne.templateSettings;L&&el(w,R,L)&&(R=r),w=gi(w),R=XT({},R,j,KJ);var Z=XT({},R.imports,j.imports,KJ),ae=jo(Z),we=k6(Z,ae),Ne,ze,St=0,Et=R.interpolate||Te,Pt="__p += '",sn=$6((R.escape||Te).source+"|"+Et.source+"|"+(Et===Ot?$t:Te).source+"|"+(R.evaluate||Te).source+"|$","g"),Sn="//# sourceURL="+(yi.call(R,"sourceURL")?(R.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Mw+"]")+`
`;w.replace(sn,function(Gn,Ir,Hr,dc,tl,fc){return Hr||(Hr=dc),Pt+=w.slice(St,fc).replace(Oe,JIe),Ir&&(Ne=!0,Pt+=`' +
__e(`+Ir+`) +
'`),tl&&(ze=!0,Pt+=`';
`+tl+`;
__p += '`),Hr&&(Pt+=`' +
((__t = (`+Hr+`)) == null ? '' : __t) +
'`),St=fc+Gn.length,Gn}),Pt+=`';
`;var Vn=yi.call(R,"variable")&&R.variable;if(!Vn)Pt=`with (obj) {
`+Pt+`
}
`;else if(Rt.test(Vn))throw new ar(l);Pt=(ze?Pt.replace(mt,""):Pt).replace(xe,"$1").replace(vt,"$1;"),Pt="function("+(Vn||"obj")+`) {
`+(Vn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ne?", __e = _.escape":"")+(ze?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Pt+`return __p
}`;var Sr=Vee(function(){return li(ae,Sn+"return "+Pt).apply(r,we)});if(Sr.source=Pt,_k(Sr))throw Sr;return Sr}function C5e(w){return gi(w).toLowerCase()}function M5e(w){return gi(w).toUpperCase()}function T5e(w,R,L){if(w=gi(w),w&&(L||R===r))return ZQ(w);if(!w||!(R=cc(R)))return w;var j=od(w),Z=od(R),ae=QQ(j,Z),we=JQ(j,Z)+1;return ug(j,ae,we).join("")}function A5e(w,R,L){if(w=gi(w),w&&(L||R===r))return w.slice(0,tJ(w)+1);if(!w||!(R=cc(R)))return w;var j=od(w),Z=JQ(j,od(R))+1;return ug(j,0,Z).join("")}function R5e(w,R,L){if(w=gi(w),w&&(L||R===r))return w.replace(Se,"");if(!w||!(R=cc(R)))return w;var j=od(w),Z=QQ(j,od(R));return ug(j,Z).join("")}function P5e(w,R){var L=A,j=N;if(xa(R)){var Z="separator"in R?R.separator:Z;L="length"in R?xr(R.length):L,j="omission"in R?cc(R.omission):j}w=gi(w);var ae=w.length;if(i1(w)){var we=od(w);ae=we.length}if(L>=ae)return w;var Ne=L-a1(j);if(Ne<1)return j;var ze=we?ug(we,0,Ne).join(""):w.slice(0,Ne);if(Z===r)return ze+j;if(we&&(Ne+=ze.length-Ne),wk(Z)){if(w.slice(Ne).search(Z)){var St,Et=ze;for(Z.global||(Z=$6(Z.source,gi(en.exec(Z))+"g")),Z.lastIndex=0;St=Z.exec(Et);)var Pt=St.index;ze=ze.slice(0,Pt===r?Ne:Pt)}}else if(w.indexOf(cc(Z),Ne)!=Ne){var sn=ze.lastIndexOf(Z);sn>-1&&(ze=ze.slice(0,sn))}return ze+j}function N5e(w){return w=gi(w),w&&Ye.test(w)?w.replace(Ue,o4e):w}var O5e=f1(function(w,R,L){return w+(L?" ":"")+R.toUpperCase()}),Ck=GJ("toUpperCase");function Uee(w,R,L){return w=gi(w),R=L?r:R,R===r?t4e(w)?c4e(w):WIe(w):w.match(R)||[]}var Vee=Rr(function(w,R){try{return sc(w,r,R)}catch(L){return _k(L)?L:new ar(L)}}),I5e=Th(function(w,R){return ru(R,function(L){L=vf(L),Ch(w,L,bk(w[L],w))}),w});function D5e(w){var R=w==null?0:w.length,L=Fn();return w=R?ca(w,function(j){if(typeof j[1]!="function")throw new iu(s);return[L(j[0]),j[1]]}):[],Rr(function(j){for(var Z=-1;++Z<R;){var ae=w[Z];if(sc(ae[0],this,j))return sc(ae[1],this,j)}})}function L5e(w){return oDe(ou(w,f))}function Mk(w){return function(){return w}}function k5e(w,R){return w==null||w!==w?R:w}var F5e=HJ(),$5e=HJ(!0);function Pl(w){return w}function Tk(w){return _J(typeof w=="function"?w:ou(w,f))}function B5e(w){return SJ(ou(w,f))}function z5e(w,R){return EJ(w,ou(R,f))}var U5e=Rr(function(w,R){return function(L){return Lw(L,w,R)}}),V5e=Rr(function(w,R){return function(L){return Lw(w,L,R)}});function Ak(w,R,L){var j=jo(R),Z=PT(R,j);L==null&&!(xa(R)&&(Z.length||!j.length))&&(L=R,R=w,w=this,Z=PT(R,jo(R)));var ae=!(xa(L)&&"chain"in L)||!!L.chain,we=Rh(w);return ru(Z,function(Ne){var ze=R[Ne];w[Ne]=ze,we&&(w.prototype[Ne]=function(){var St=this.__chain__;if(ae||St){var Et=w(this.__wrapped__),Pt=Et.__actions__=Tl(this.__actions__);return Pt.push({func:ze,args:arguments,thisArg:w}),Et.__chain__=St,Et}return ze.apply(w,ig([this.value()],arguments))})}),w}function G5e(){return as._===this&&(as._=g4e),this}function Rk(){}function j5e(w){return w=xr(w),Rr(function(R){return CJ(R,w)})}var H5e=ok(ca),W5e=ok(WQ),q5e=ok(N6);function Gee(w){return hk(w)?O6(vf(w)):SDe(w)}function Y5e(w){return function(R){return w==null?r:Nv(w,R)}}var X5e=qJ(),K5e=qJ(!0);function Pk(){return[]}function Nk(){return!1}function Z5e(){return{}}function Q5e(){return""}function J5e(){return!0}function eFe(w,R){if(w=xr(w),w<1||w>F)return[];var L=U,j=Ts(w,U);R=Fn(R),w-=U;for(var Z=L6(j,R);++L<w;)R(L);return Z}function tFe(w){return cr(w)?ca(w,vf):uc(w)?[w]:Tl(cee(gi(w)))}function nFe(w){var R=++h4e;return gi(w)+R}var rFe=kT(function(w,R){return w+R},0),iFe=sk("ceil"),aFe=kT(function(w,R){return w/R},1),oFe=sk("floor");function sFe(w){return w&&w.length?RT(w,Pl,W6):r}function lFe(w,R){return w&&w.length?RT(w,Fn(R,2),W6):r}function cFe(w){return XQ(w,Pl)}function uFe(w,R){return XQ(w,Fn(R,2))}function dFe(w){return w&&w.length?RT(w,Pl,K6):r}function fFe(w,R){return w&&w.length?RT(w,Fn(R,2),K6):r}var hFe=kT(function(w,R){return w*R},1),pFe=sk("round"),gFe=kT(function(w,R){return w-R},0);function mFe(w){return w&&w.length?D6(w,Pl):0}function vFe(w,R){return w&&w.length?D6(w,Fn(R,2)):0}return ne.after=B6e,ne.ary=xee,ne.assign=Mke,ne.assignIn=Dee,ne.assignInWith=XT,ne.assignWith=Tke,ne.at=Ake,ne.before=_ee,ne.bind=bk,ne.bindAll=I5e,ne.bindKey=wee,ne.castArray=Z6e,ne.chain=vee,ne.chunk=oLe,ne.compact=sLe,ne.concat=lLe,ne.cond=D5e,ne.conforms=L5e,ne.constant=Mk,ne.countBy=m6e,ne.create=Rke,ne.curry=See,ne.curryRight=Eee,ne.debounce=Cee,ne.defaults=Pke,ne.defaultsDeep=Nke,ne.defer=z6e,ne.delay=U6e,ne.difference=cLe,ne.differenceBy=uLe,ne.differenceWith=dLe,ne.drop=fLe,ne.dropRight=hLe,ne.dropRightWhile=pLe,ne.dropWhile=gLe,ne.fill=mLe,ne.filter=y6e,ne.flatMap=_6e,ne.flatMapDeep=w6e,ne.flatMapDepth=S6e,ne.flatten=hee,ne.flattenDeep=vLe,ne.flattenDepth=yLe,ne.flip=V6e,ne.flow=F5e,ne.flowRight=$5e,ne.fromPairs=bLe,ne.functions=$ke,ne.functionsIn=Bke,ne.groupBy=E6e,ne.initial=_Le,ne.intersection=wLe,ne.intersectionBy=SLe,ne.intersectionWith=ELe,ne.invert=Uke,ne.invertBy=Vke,ne.invokeMap=M6e,ne.iteratee=Tk,ne.keyBy=T6e,ne.keys=jo,ne.keysIn=Rl,ne.map=GT,ne.mapKeys=jke,ne.mapValues=Hke,ne.matches=B5e,ne.matchesProperty=z5e,ne.memoize=HT,ne.merge=Wke,ne.mergeWith=Lee,ne.method=U5e,ne.methodOf=V5e,ne.mixin=Ak,ne.negate=WT,ne.nthArg=j5e,ne.omit=qke,ne.omitBy=Yke,ne.once=G6e,ne.orderBy=A6e,ne.over=H5e,ne.overArgs=j6e,ne.overEvery=W5e,ne.overSome=q5e,ne.partial=xk,ne.partialRight=Mee,ne.partition=R6e,ne.pick=Xke,ne.pickBy=kee,ne.property=Gee,ne.propertyOf=Y5e,ne.pull=ALe,ne.pullAll=gee,ne.pullAllBy=RLe,ne.pullAllWith=PLe,ne.pullAt=NLe,ne.range=X5e,ne.rangeRight=K5e,ne.rearg=H6e,ne.reject=O6e,ne.remove=OLe,ne.rest=W6e,ne.reverse=vk,ne.sampleSize=D6e,ne.set=Zke,ne.setWith=Qke,ne.shuffle=L6e,ne.slice=ILe,ne.sortBy=$6e,ne.sortedUniq=zLe,ne.sortedUniqBy=ULe,ne.split=_5e,ne.spread=q6e,ne.tail=VLe,ne.take=GLe,ne.takeRight=jLe,ne.takeRightWhile=HLe,ne.takeWhile=WLe,ne.tap=s6e,ne.throttle=Y6e,ne.thru=VT,ne.toArray=Nee,ne.toPairs=Fee,ne.toPairsIn=$ee,ne.toPath=tFe,ne.toPlainObject=Iee,ne.transform=Jke,ne.unary=X6e,ne.union=qLe,ne.unionBy=YLe,ne.unionWith=XLe,ne.uniq=KLe,ne.uniqBy=ZLe,ne.uniqWith=QLe,ne.unset=e5e,ne.unzip=yk,ne.unzipWith=mee,ne.update=t5e,ne.updateWith=n5e,ne.values=g1,ne.valuesIn=r5e,ne.without=JLe,ne.words=Uee,ne.wrap=K6e,ne.xor=e6e,ne.xorBy=t6e,ne.xorWith=n6e,ne.zip=r6e,ne.zipObject=i6e,ne.zipObjectDeep=a6e,ne.zipWith=o6e,ne.entries=Fee,ne.entriesIn=$ee,ne.extend=Dee,ne.extendWith=XT,Ak(ne,ne),ne.add=rFe,ne.attempt=Vee,ne.camelCase=s5e,ne.capitalize=Bee,ne.ceil=iFe,ne.clamp=i5e,ne.clone=Q6e,ne.cloneDeep=eke,ne.cloneDeepWith=tke,ne.cloneWith=J6e,ne.conformsTo=nke,ne.deburr=zee,ne.defaultTo=k5e,ne.divide=aFe,ne.endsWith=l5e,ne.eq=ld,ne.escape=c5e,ne.escapeRegExp=u5e,ne.every=v6e,ne.find=b6e,ne.findIndex=dee,ne.findKey=Oke,ne.findLast=x6e,ne.findLastIndex=fee,ne.findLastKey=Ike,ne.floor=oFe,ne.forEach=yee,ne.forEachRight=bee,ne.forIn=Dke,ne.forInRight=Lke,ne.forOwn=kke,ne.forOwnRight=Fke,ne.get=Sk,ne.gt=rke,ne.gte=ike,ne.has=zke,ne.hasIn=Ek,ne.head=pee,ne.identity=Pl,ne.includes=C6e,ne.indexOf=xLe,ne.inRange=a5e,ne.invoke=Gke,ne.isArguments=Dv,ne.isArray=cr,ne.isArrayBuffer=ake,ne.isArrayLike=Al,ne.isArrayLikeObject=Ua,ne.isBoolean=oke,ne.isBuffer=dg,ne.isDate=ske,ne.isElement=lke,ne.isEmpty=cke,ne.isEqual=uke,ne.isEqualWith=dke,ne.isError=_k,ne.isFinite=fke,ne.isFunction=Rh,ne.isInteger=Tee,ne.isLength=qT,ne.isMap=Aee,ne.isMatch=hke,ne.isMatchWith=pke,ne.isNaN=gke,ne.isNative=mke,ne.isNil=yke,ne.isNull=vke,ne.isNumber=Ree,ne.isObject=xa,ne.isObjectLike=Oa,ne.isPlainObject=Uw,ne.isRegExp=wk,ne.isSafeInteger=bke,ne.isSet=Pee,ne.isString=YT,ne.isSymbol=uc,ne.isTypedArray=p1,ne.isUndefined=xke,ne.isWeakMap=_ke,ne.isWeakSet=wke,ne.join=CLe,ne.kebabCase=d5e,ne.last=lu,ne.lastIndexOf=MLe,ne.lowerCase=f5e,ne.lowerFirst=h5e,ne.lt=Ske,ne.lte=Eke,ne.max=sFe,ne.maxBy=lFe,ne.mean=cFe,ne.meanBy=uFe,ne.min=dFe,ne.minBy=fFe,ne.stubArray=Pk,ne.stubFalse=Nk,ne.stubObject=Z5e,ne.stubString=Q5e,ne.stubTrue=J5e,ne.multiply=hFe,ne.nth=TLe,ne.noConflict=G5e,ne.noop=Rk,ne.now=jT,ne.pad=p5e,ne.padEnd=g5e,ne.padStart=m5e,ne.parseInt=v5e,ne.random=o5e,ne.reduce=P6e,ne.reduceRight=N6e,ne.repeat=y5e,ne.replace=b5e,ne.result=Kke,ne.round=pFe,ne.runInContext=ke,ne.sample=I6e,ne.size=k6e,ne.snakeCase=x5e,ne.some=F6e,ne.sortedIndex=DLe,ne.sortedIndexBy=LLe,ne.sortedIndexOf=kLe,ne.sortedLastIndex=FLe,ne.sortedLastIndexBy=$Le,ne.sortedLastIndexOf=BLe,ne.startCase=w5e,ne.startsWith=S5e,ne.subtract=gFe,ne.sum=mFe,ne.sumBy=vFe,ne.template=E5e,ne.times=eFe,ne.toFinite=Ph,ne.toInteger=xr,ne.toLength=Oee,ne.toLower=C5e,ne.toNumber=cu,ne.toSafeInteger=Cke,ne.toString=gi,ne.toUpper=M5e,ne.trim=T5e,ne.trimEnd=A5e,ne.trimStart=R5e,ne.truncate=P5e,ne.unescape=N5e,ne.uniqueId=nFe,ne.upperCase=O5e,ne.upperFirst=Ck,ne.each=yee,ne.eachRight=bee,ne.first=pee,Ak(ne,function(){var w={};return gf(ne,function(R,L){yi.call(ne.prototype,L)||(w[L]=R)}),w}(),{chain:!1}),ne.VERSION=i,ru(["bind","bindKey","curry","curryRight","partial","partialRight"],function(w){ne[w].placeholder=ne}),ru(["drop","take"],function(w,R){$r.prototype[w]=function(L){L=L===r?1:So(xr(L),0);var j=this.__filtered__&&!R?new $r(this):this.clone();return j.__filtered__?j.__takeCount__=Ts(L,j.__takeCount__):j.__views__.push({size:Ts(L,U),type:w+(j.__dir__<0?"Right":"")}),j},$r.prototype[w+"Right"]=function(L){return this.reverse()[w](L).reverse()}}),ru(["filter","map","takeWhile"],function(w,R){var L=R+1,j=L==D||L==$;$r.prototype[w]=function(Z){var ae=this.clone();return ae.__iteratees__.push({iteratee:Fn(Z,3),type:L}),ae.__filtered__=ae.__filtered__||j,ae}}),ru(["head","last"],function(w,R){var L="take"+(R?"Right":"");$r.prototype[w]=function(){return this[L](1).value()[0]}}),ru(["initial","tail"],function(w,R){var L="drop"+(R?"":"Right");$r.prototype[w]=function(){return this.__filtered__?new $r(this):this[L](1)}}),$r.prototype.compact=function(){return this.filter(Pl)},$r.prototype.find=function(w){return this.filter(w).head()},$r.prototype.findLast=function(w){return this.reverse().find(w)},$r.prototype.invokeMap=Rr(function(w,R){return typeof w=="function"?new $r(this):this.map(function(L){return Lw(L,w,R)})}),$r.prototype.reject=function(w){return this.filter(WT(Fn(w)))},$r.prototype.slice=function(w,R){w=xr(w);var L=this;return L.__filtered__&&(w>0||R<0)?new $r(L):(w<0?L=L.takeRight(-w):w&&(L=L.drop(w)),R!==r&&(R=xr(R),L=R<0?L.dropRight(-R):L.take(R-w)),L)},$r.prototype.takeRightWhile=function(w){return this.reverse().takeWhile(w).reverse()},$r.prototype.toArray=function(){return this.take(U)},gf($r.prototype,function(w,R){var L=/^(?:filter|find|map|reject)|While$/.test(R),j=/^(?:head|last)$/.test(R),Z=ne[j?"take"+(R=="last"?"Right":""):R],ae=j||/^find/.test(R);Z&&(ne.prototype[R]=function(){var we=this.__wrapped__,Ne=j?[1]:arguments,ze=we instanceof $r,St=Ne[0],Et=ze||cr(we),Pt=function(Ir){var Hr=Z.apply(ne,ig([Ir],Ne));return j&&sn?Hr[0]:Hr};Et&&L&&typeof St=="function"&&St.length!=1&&(ze=Et=!1);var sn=this.__chain__,Sn=!!this.__actions__.length,Vn=ae&&!sn,Sr=ze&&!Sn;if(!ae&&Et){we=Sr?we:new $r(this);var Gn=w.apply(we,Ne);return Gn.__actions__.push({func:VT,args:[Pt],thisArg:r}),new au(Gn,sn)}return Vn&&Sr?w.apply(this,Ne):(Gn=this.thru(Pt),Vn?j?Gn.value()[0]:Gn.value():Gn)})}),ru(["pop","push","shift","sort","splice","unshift"],function(w){var R=pT[w],L=/^(?:push|sort|unshift)$/.test(w)?"tap":"thru",j=/^(?:pop|shift)$/.test(w);ne.prototype[w]=function(){var Z=arguments;if(j&&!this.__chain__){var ae=this.value();return R.apply(cr(ae)?ae:[],Z)}return this[L](function(we){return R.apply(cr(we)?we:[],Z)})}}),gf($r.prototype,function(w,R){var L=ne[R];if(L){var j=L.name+"";yi.call(c1,j)||(c1[j]=[]),c1[j].push({name:R,func:L})}}),c1[LT(r,y).name]=[{name:"wrapper",func:r}],$r.prototype.clone=N4e,$r.prototype.reverse=O4e,$r.prototype.value=I4e,ne.prototype.at=l6e,ne.prototype.chain=c6e,ne.prototype.commit=u6e,ne.prototype.next=d6e,ne.prototype.plant=h6e,ne.prototype.reverse=p6e,ne.prototype.toJSON=ne.prototype.valueOf=ne.prototype.value=g6e,ne.prototype.first=ne.prototype.head,Aw&&(ne.prototype[Aw]=f6e),ne},o1=u4e();Mv?((Mv.exports=o1)._=o1,T6._=o1):as._=o1}).call(Qo)})(NO,NO.exports);var Cd=NO.exports;/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ow="171",gs={ROTATE:0,DOLLY:1,PAN:2},pp={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},V3e=0,AH=1,G3e=2,a3t=0,IK=1,o3t=2,Mc=3,Qd=0,va=1,dl=2,ml=0,$u=1,Xx=2,Kx=3,Zx=4,DK=5,Nc=100,LK=101,kK=102,j3e=103,H3e=104,FK=200,$K=201,BK=202,zK=203,fC=204,hC=205,UK=206,VK=207,GK=208,jK=209,HK=210,s3t=211,l3t=212,c3t=213,u3t=214,pC=0,gC=1,mC=2,Km=3,vC=4,yC=5,bC=6,xC=7,jM=0,W3e=1,q3e=2,tc=0,Y3e=1,X3e=2,K3e=3,Z3e=4,d3t=5,Q3e=6,J3e=7,WK=300,qu=301,Yu=302,Zm=303,Qm=304,Sy=306,Ey=1e3,Gf=1001,Cy=1002,na=1003,OO=1004,jf=1005,Lo=1006,gx=1007,Yl=1008,Ws=1009,q0=1010,Y0=1011,Bd=1012,Zo=1013,Ca=1014,Ka=1015,vl=1016,EL=1017,CL=1018,rh=1020,ML=35902,qK=1021,HM=1022,vs=1023,YK=1024,XK=1025,Jf=1026,ih=1027,WM=1028,sw=1029,My=1030,lw=1031,f3t=1032,cw=1033,X0=33776,Rm=33777,Pm=33778,Nm=33779,_C=35840,wC=35841,SC=35842,EC=35843,CC=36196,Qx=37492,Jx=37496,e_=37808,t_=37809,n_=37810,r_=37811,i_=37812,a_=37813,o_=37814,s_=37815,l_=37816,c_=37817,u_=37818,d_=37819,f_=37820,h_=37821,K0=36492,RH=36494,PH=36495,KK=36283,MC=36284,TC=36285,AC=36286,h3t=3200,p3t=3201,Bp=0,eAe=1,Oc="",Pn="srgb",Bu="srgb-linear",IO="linear",mi="srgb",g3t=0,Jv=7680,m3t=7681,v3t=7682,y3t=7683,b3t=34055,x3t=34056,_3t=5386,w3t=512,S3t=513,E3t=514,C3t=515,M3t=516,T3t=517,A3t=518,NH=519,ZK=512,TL=513,QK=514,AL=515,JK=516,eZ=517,tZ=518,nZ=519,DO=35044,Gb=35048,spe="300 es",ku=2e3,Ty=2001;class mv{addEventListener(e,r){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(r)===-1&&i[e].push(r)}hasEventListener(e,r){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(r)!==-1}removeEventListener(e,r){if(this._listeners===void 0)return;const a=this._listeners[e];if(a!==void 0){const o=a.indexOf(r);o!==-1&&a.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const a=i.slice(0);for(let o=0,s=a.length;o<s;o++)a[o].call(this,e);e.target=null}}}const Os=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let lpe=1234567;const Z2=Math.PI/180,p_=180/Math.PI;function Sp(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,r=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Os[n&255]+Os[n>>8&255]+Os[n>>16&255]+Os[n>>24&255]+"-"+Os[e&255]+Os[e>>8&255]+"-"+Os[e>>16&15|64]+Os[e>>24&255]+"-"+Os[r&63|128]+Os[r>>8&255]+"-"+Os[r>>16&255]+Os[r>>24&255]+Os[i&255]+Os[i>>8&255]+Os[i>>16&255]+Os[i>>24&255]).toLowerCase()}function mr(n,e,r){return Math.max(e,Math.min(r,n))}function rZ(n,e){return(n%e+e)%e}function R3t(n,e,r,i,a){return i+(n-e)*(a-i)/(r-e)}function P3t(n,e,r){return n!==e?(r-n)/(e-n):0}function Q2(n,e,r){return(1-r)*n+r*e}function N3t(n,e,r,i){return Q2(n,e,1-Math.exp(-r*i))}function O3t(n,e=1){return e-Math.abs(rZ(n,e*2)-e)}function I3t(n,e,r){return n<=e?0:n>=r?1:(n=(n-e)/(r-e),n*n*(3-2*n))}function D3t(n,e,r){return n<=e?0:n>=r?1:(n=(n-e)/(r-e),n*n*n*(n*(n*6-15)+10))}function L3t(n,e){return n+Math.floor(Math.random()*(e-n+1))}function k3t(n,e){return n+Math.random()*(e-n)}function F3t(n){return n*(.5-Math.random())}function $3t(n){n!==void 0&&(lpe=n);let e=lpe+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function B3t(n){return n*Z2}function z3t(n){return n*p_}function U3t(n){return(n&n-1)===0&&n!==0}function V3t(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function G3t(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function j3t(n,e,r,i,a){const o=Math.cos,s=Math.sin,l=o(r/2),c=s(r/2),u=o((e+i)/2),d=s((e+i)/2),f=o((e-i)/2),h=s((e-i)/2),p=o((i-e)/2),g=s((i-e)/2);switch(a){case"XYX":n.set(l*d,c*f,c*h,l*u);break;case"YZY":n.set(c*h,l*d,c*f,l*u);break;case"ZXZ":n.set(c*f,c*h,l*d,l*u);break;case"XZX":n.set(l*d,c*g,c*p,l*u);break;case"YXY":n.set(c*p,l*d,c*g,l*u);break;case"ZYZ":n.set(c*g,c*p,l*d,l*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function fl(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function gr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const LO={DEG2RAD:Z2,RAD2DEG:p_,generateUUID:Sp,clamp:mr,euclideanModulo:rZ,mapLinear:R3t,inverseLerp:P3t,lerp:Q2,damp:N3t,pingpong:O3t,smoothstep:I3t,smootherstep:D3t,randInt:L3t,randFloat:k3t,randFloatSpread:F3t,seededRandom:$3t,degToRad:B3t,radToDeg:z3t,isPowerOfTwo:U3t,ceilPowerOfTwo:V3t,floorPowerOfTwo:G3t,setQuaternionFromProperEuler:j3t,normalize:gr,denormalize:fl};class Nt{constructor(e=0,r=0){Nt.prototype.isVector2=!0,this.x=e,this.y=r}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,r){return this.x=e,this.y=r,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const r=this.x,i=this.y,a=e.elements;return this.x=a[0]*r+a[3]*i+a[6],this.y=a[1]*r+a[4]*i+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,r){return this.x=mr(this.x,e.x,r.x),this.y=mr(this.y,e.y,r.y),this}clampScalar(e,r){return this.x=mr(this.x,e,r),this.y=mr(this.y,e,r),this}clampLength(e,r){const i=this.length();return this.divideScalar(i||1).multiplyScalar(mr(i,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const i=this.dot(e)/r;return Math.acos(mr(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,i=this.y-e.y;return r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this}lerpVectors(e,r,i){return this.x=e.x+(r.x-e.x)*i,this.y=e.y+(r.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this}rotateAround(e,r){const i=Math.cos(r),a=Math.sin(r),o=this.x-e.x,s=this.y-e.y;return this.x=o*i-s*a+e.x,this.y=o*a+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Zn{constructor(e,r,i,a,o,s,l,c,u){Zn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,r,i,a,o,s,l,c,u)}set(e,r,i,a,o,s,l,c,u){const d=this.elements;return d[0]=e,d[1]=a,d[2]=l,d[3]=r,d[4]=o,d[5]=c,d[6]=i,d[7]=s,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const r=this.elements,i=e.elements;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],this}extractBasis(e,r,i){return e.setFromMatrix3Column(this,0),r.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const r=e.elements;return this.set(r[0],r[4],r[8],r[1],r[5],r[9],r[2],r[6],r[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const i=e.elements,a=r.elements,o=this.elements,s=i[0],l=i[3],c=i[6],u=i[1],d=i[4],f=i[7],h=i[2],p=i[5],g=i[8],m=a[0],v=a[3],y=a[6],b=a[1],x=a[4],_=a[7],S=a[2],M=a[5],E=a[8];return o[0]=s*m+l*b+c*S,o[3]=s*v+l*x+c*M,o[6]=s*y+l*_+c*E,o[1]=u*m+d*b+f*S,o[4]=u*v+d*x+f*M,o[7]=u*y+d*_+f*E,o[2]=h*m+p*b+g*S,o[5]=h*v+p*x+g*M,o[8]=h*y+p*_+g*E,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=e,r[4]*=e,r[7]*=e,r[2]*=e,r[5]*=e,r[8]*=e,this}determinant(){const e=this.elements,r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8];return r*s*d-r*l*u-i*o*d+i*l*c+a*o*u-a*s*c}invert(){const e=this.elements,r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=d*s-l*u,h=l*c-d*o,p=u*o-s*c,g=r*f+i*h+a*p;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/g;return e[0]=f*m,e[1]=(a*u-d*i)*m,e[2]=(l*i-a*s)*m,e[3]=h*m,e[4]=(d*r-a*c)*m,e[5]=(a*o-l*r)*m,e[6]=p*m,e[7]=(i*c-u*r)*m,e[8]=(s*r-i*o)*m,this}transpose(){let e;const r=this.elements;return e=r[1],r[1]=r[3],r[3]=e,e=r[2],r[2]=r[6],r[6]=e,e=r[5],r[5]=r[7],r[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const r=this.elements;return e[0]=r[0],e[1]=r[3],e[2]=r[6],e[3]=r[1],e[4]=r[4],e[5]=r[7],e[6]=r[2],e[7]=r[5],e[8]=r[8],this}setUvTransform(e,r,i,a,o,s,l){const c=Math.cos(o),u=Math.sin(o);return this.set(i*c,i*u,-i*(c*s+u*l)+s+e,-a*u,a*c,-a*(-u*s+c*l)+l+r,0,0,1),this}scale(e,r){return this.premultiply(X7.makeScale(e,r)),this}rotate(e){return this.premultiply(X7.makeRotation(-e)),this}translate(e,r){return this.premultiply(X7.makeTranslation(e,r)),this}makeTranslation(e,r){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,r,0,0,1),this}makeRotation(e){const r=Math.cos(e),i=Math.sin(e);return this.set(r,-i,0,i,r,0,0,0,1),this}makeScale(e,r){return this.set(e,0,0,0,r,0,0,0,1),this}equals(e){const r=this.elements,i=e.elements;for(let a=0;a<9;a++)if(r[a]!==i[a])return!1;return!0}fromArray(e,r=0){for(let i=0;i<9;i++)this.elements[i]=e[i+r];return this}toArray(e=[],r=0){const i=this.elements;return e[r]=i[0],e[r+1]=i[1],e[r+2]=i[2],e[r+3]=i[3],e[r+4]=i[4],e[r+5]=i[5],e[r+6]=i[6],e[r+7]=i[7],e[r+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const X7=new Zn;function tAe(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function RC(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function nAe(){const n=RC("canvas");return n.style.display="block",n}const cpe={};function h0(n){n in cpe||(cpe[n]=!0,console.warn(n))}function H3t(n,e,r){return new Promise(function(i,a){function o(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:a();break;case n.TIMEOUT_EXPIRED:setTimeout(o,r);break;default:i()}}setTimeout(o,r)})}function W3t(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function q3t(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const upe=new Zn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),dpe=new Zn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Y3t(){const n={enabled:!0,workingColorSpace:Bu,spaces:{},convert:function(a,o,s){return this.enabled===!1||o===s||!o||!s||(this.spaces[o].transfer===mi&&(a.r=Ep(a.r),a.g=Ep(a.g),a.b=Ep(a.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(a.applyMatrix3(this.spaces[o].toXYZ),a.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===mi&&(a.r=mx(a.r),a.g=mx(a.g),a.b=mx(a.b))),a},fromWorkingColorSpace:function(a,o){return this.convert(a,this.workingColorSpace,o)},toWorkingColorSpace:function(a,o){return this.convert(a,o,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===Oc?IO:this.spaces[a].transfer},getLuminanceCoefficients:function(a,o=this.workingColorSpace){return a.fromArray(this.spaces[o].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,o,s){return a.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],r=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Bu]:{primaries:e,whitePoint:i,transfer:IO,toXYZ:upe,fromXYZ:dpe,luminanceCoefficients:r,workingColorSpaceConfig:{unpackColorSpace:Pn},outputColorSpaceConfig:{drawingBufferColorSpace:Pn}},[Pn]:{primaries:e,whitePoint:i,transfer:mi,toXYZ:upe,fromXYZ:dpe,luminanceCoefficients:r,outputColorSpaceConfig:{drawingBufferColorSpace:Pn}}}),n}const Mr=Y3t();function Ep(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function mx(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let V1;class X3t{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{V1===void 0&&(V1=RC("canvas")),V1.width=e.width,V1.height=e.height;const i=V1.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=V1}return r.width>2048||r.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),r.toDataURL("image/jpeg",.6)):r.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const r=RC("canvas");r.width=e.width,r.height=e.height;const i=r.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const a=i.getImageData(0,0,e.width,e.height),o=a.data;for(let s=0;s<o.length;s++)o[s]=Ep(o[s]/255)*255;return i.putImageData(a,0,0),r}else if(e.data){const r=e.data.slice(0);for(let i=0;i<r.length;i++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[i]=Math.floor(Ep(r[i]/255)*255):r[i]=Ep(r[i]);return{data:r,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let K3t=0;class rAe{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:K3t++}),this.uuid=Sp(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},a=this.data;if(a!==null){let o;if(Array.isArray(a)){o=[];for(let s=0,l=a.length;s<l;s++)a[s].isDataTexture?o.push(K7(a[s].image)):o.push(K7(a[s]))}else o=K7(a);i.url=o}return r||(e.images[this.uuid]=i),i}}function K7(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?X3t.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Z3t=0;class ho extends mv{constructor(e=ho.DEFAULT_IMAGE,r=ho.DEFAULT_MAPPING,i=Gf,a=Gf,o=Lo,s=Yl,l=vs,c=Ws,u=ho.DEFAULT_ANISOTROPY,d=Oc){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Z3t++}),this.uuid=Sp(),this.name="",this.source=new rAe(e),this.mipmaps=[],this.mapping=r,this.channel=0,this.wrapS=i,this.wrapT=a,this.magFilter=o,this.minFilter=s,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Nt(0,0),this.repeat=new Nt(1,1),this.center=new Nt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Zn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const r=e===void 0||typeof e=="string";if(!r&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),r||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==WK)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ey:e.x=e.x-Math.floor(e.x);break;case Gf:e.x=e.x<0?0:1;break;case Cy:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ey:e.y=e.y-Math.floor(e.y);break;case Gf:e.y=e.y<0?0:1;break;case Cy:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ho.DEFAULT_IMAGE=null;ho.DEFAULT_MAPPING=WK;ho.DEFAULT_ANISOTROPY=1;class sr{constructor(e=0,r=0,i=0,a=1){sr.prototype.isVector4=!0,this.x=e,this.y=r,this.z=i,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,r,i,a){return this.x=e,this.y=r,this.z=i,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;case 3:this.w=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this.w=e.w+r.w,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this.w+=e.w*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this.w=e.w-r.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const r=this.x,i=this.y,a=this.z,o=this.w,s=e.elements;return this.x=s[0]*r+s[4]*i+s[8]*a+s[12]*o,this.y=s[1]*r+s[5]*i+s[9]*a+s[13]*o,this.z=s[2]*r+s[6]*i+s[10]*a+s[14]*o,this.w=s[3]*r+s[7]*i+s[11]*a+s[15]*o,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const r=Math.sqrt(1-e.w*e.w);return r<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/r,this.y=e.y/r,this.z=e.z/r),this}setAxisAngleFromRotationMatrix(e){let r,i,a,o;const c=e.elements,u=c[0],d=c[4],f=c[8],h=c[1],p=c[5],g=c[9],m=c[2],v=c[6],y=c[10];if(Math.abs(d-h)<.01&&Math.abs(f-m)<.01&&Math.abs(g-v)<.01){if(Math.abs(d+h)<.1&&Math.abs(f+m)<.1&&Math.abs(g+v)<.1&&Math.abs(u+p+y-3)<.1)return this.set(1,0,0,0),this;r=Math.PI;const x=(u+1)/2,_=(p+1)/2,S=(y+1)/2,M=(d+h)/4,E=(f+m)/4,T=(g+v)/4;return x>_&&x>S?x<.01?(i=0,a=.707106781,o=.707106781):(i=Math.sqrt(x),a=M/i,o=E/i):_>S?_<.01?(i=.707106781,a=0,o=.707106781):(a=Math.sqrt(_),i=M/a,o=T/a):S<.01?(i=.707106781,a=.707106781,o=0):(o=Math.sqrt(S),i=E/o,a=T/o),this.set(i,a,o,r),this}let b=Math.sqrt((v-g)*(v-g)+(f-m)*(f-m)+(h-d)*(h-d));return Math.abs(b)<.001&&(b=1),this.x=(v-g)/b,this.y=(f-m)/b,this.z=(h-d)/b,this.w=Math.acos((u+p+y-1)/2),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this.w=r[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,r){return this.x=mr(this.x,e.x,r.x),this.y=mr(this.y,e.y,r.y),this.z=mr(this.z,e.z,r.z),this.w=mr(this.w,e.w,r.w),this}clampScalar(e,r){return this.x=mr(this.x,e,r),this.y=mr(this.y,e,r),this.z=mr(this.z,e,r),this.w=mr(this.w,e,r),this}clampLength(e,r){const i=this.length();return this.divideScalar(i||1).multiplyScalar(mr(i,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this.w+=(e.w-this.w)*r,this}lerpVectors(e,r,i){return this.x=e.x+(r.x-e.x)*i,this.y=e.y+(r.y-e.y)*i,this.z=e.z+(r.z-e.z)*i,this.w=e.w+(r.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this.w=e[r+3],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e[r+3]=this.w,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this.w=e.getW(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class uw extends mv{constructor(e=1,r=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=r,this.depth=1,this.scissor=new sr(0,0,e,r),this.scissorTest=!1,this.viewport=new sr(0,0,e,r);const a={width:e,height:r,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Lo,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const o=new ho(a,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);o.flipY=!1,o.generateMipmaps=i.generateMipmaps,o.internalFormat=i.internalFormat,this.textures=[];const s=i.count;for(let l=0;l<s;l++)this.textures[l]=o.clone(),this.textures[l].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,r,i=1){if(this.width!==e||this.height!==r||this.depth!==i){this.width=e,this.height=r,this.depth=i;for(let a=0,o=this.textures.length;a<o;a++)this.textures[a].image.width=e,this.textures[a].image.height=r,this.textures[a].image.depth=i;this.dispose()}this.viewport.set(0,0,e,r),this.scissor.set(0,0,e,r)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,a=e.textures.length;i<a;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const r=Object.assign({},e.texture.image);return this.texture.source=new rAe(r),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Jm extends uw{constructor(e=1,r=1,i={}){super(e,r,i),this.isWebGLRenderTarget=!0}}class iZ extends ho{constructor(e=null,r=1,i=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:r,height:i,depth:a},this.magFilter=na,this.minFilter=na,this.wrapR=Gf,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Q3t extends ho{constructor(e=null,r=1,i=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:r,height:i,depth:a},this.magFilter=na,this.minFilter=na,this.wrapR=Gf,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ah{constructor(e=0,r=0,i=0,a=1){this.isQuaternion=!0,this._x=e,this._y=r,this._z=i,this._w=a}static slerpFlat(e,r,i,a,o,s,l){let c=i[a+0],u=i[a+1],d=i[a+2],f=i[a+3];const h=o[s+0],p=o[s+1],g=o[s+2],m=o[s+3];if(l===0){e[r+0]=c,e[r+1]=u,e[r+2]=d,e[r+3]=f;return}if(l===1){e[r+0]=h,e[r+1]=p,e[r+2]=g,e[r+3]=m;return}if(f!==m||c!==h||u!==p||d!==g){let v=1-l;const y=c*h+u*p+d*g+f*m,b=y>=0?1:-1,x=1-y*y;if(x>Number.EPSILON){const S=Math.sqrt(x),M=Math.atan2(S,y*b);v=Math.sin(v*M)/S,l=Math.sin(l*M)/S}const _=l*b;if(c=c*v+h*_,u=u*v+p*_,d=d*v+g*_,f=f*v+m*_,v===1-l){const S=1/Math.sqrt(c*c+u*u+d*d+f*f);c*=S,u*=S,d*=S,f*=S}}e[r]=c,e[r+1]=u,e[r+2]=d,e[r+3]=f}static multiplyQuaternionsFlat(e,r,i,a,o,s){const l=i[a],c=i[a+1],u=i[a+2],d=i[a+3],f=o[s],h=o[s+1],p=o[s+2],g=o[s+3];return e[r]=l*g+d*f+c*p-u*h,e[r+1]=c*g+d*h+u*f-l*p,e[r+2]=u*g+d*p+l*h-c*f,e[r+3]=d*g-l*f-c*h-u*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,r,i,a){return this._x=e,this._y=r,this._z=i,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,r=!0){const i=e._x,a=e._y,o=e._z,s=e._order,l=Math.cos,c=Math.sin,u=l(i/2),d=l(a/2),f=l(o/2),h=c(i/2),p=c(a/2),g=c(o/2);switch(s){case"XYZ":this._x=h*d*f+u*p*g,this._y=u*p*f-h*d*g,this._z=u*d*g+h*p*f,this._w=u*d*f-h*p*g;break;case"YXZ":this._x=h*d*f+u*p*g,this._y=u*p*f-h*d*g,this._z=u*d*g-h*p*f,this._w=u*d*f+h*p*g;break;case"ZXY":this._x=h*d*f-u*p*g,this._y=u*p*f+h*d*g,this._z=u*d*g+h*p*f,this._w=u*d*f-h*p*g;break;case"ZYX":this._x=h*d*f-u*p*g,this._y=u*p*f+h*d*g,this._z=u*d*g-h*p*f,this._w=u*d*f+h*p*g;break;case"YZX":this._x=h*d*f+u*p*g,this._y=u*p*f+h*d*g,this._z=u*d*g-h*p*f,this._w=u*d*f-h*p*g;break;case"XZY":this._x=h*d*f-u*p*g,this._y=u*p*f-h*d*g,this._z=u*d*g+h*p*f,this._w=u*d*f+h*p*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return r===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,r){const i=r/2,a=Math.sin(i);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],l=r[5],c=r[9],u=r[2],d=r[6],f=r[10],h=i+l+f;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(d-c)*p,this._y=(o-u)*p,this._z=(s-a)*p}else if(i>l&&i>f){const p=2*Math.sqrt(1+i-l-f);this._w=(d-c)/p,this._x=.25*p,this._y=(a+s)/p,this._z=(o+u)/p}else if(l>f){const p=2*Math.sqrt(1+l-i-f);this._w=(o-u)/p,this._x=(a+s)/p,this._y=.25*p,this._z=(c+d)/p}else{const p=2*Math.sqrt(1+f-i-l);this._w=(s-a)/p,this._x=(o+u)/p,this._y=(c+d)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,r){let i=e.dot(r)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*r.z-e.z*r.y,this._y=e.z*r.x-e.x*r.z,this._z=e.x*r.y-e.y*r.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(mr(this.dot(e),-1,1)))}rotateTowards(e,r){const i=this.angleTo(e);if(i===0)return this;const a=Math.min(1,r/i);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,r){const i=e._x,a=e._y,o=e._z,s=e._w,l=r._x,c=r._y,u=r._z,d=r._w;return this._x=i*d+s*l+a*u-o*c,this._y=a*d+s*c+o*l-i*u,this._z=o*d+s*u+i*c-a*l,this._w=s*d-i*l-a*c-o*u,this._onChangeCallback(),this}slerp(e,r){if(r===0)return this;if(r===1)return this.copy(e);const i=this._x,a=this._y,o=this._z,s=this._w;let l=s*e._w+i*e._x+a*e._y+o*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=s,this._x=i,this._y=a,this._z=o,this;const c=1-l*l;if(c<=Number.EPSILON){const p=1-r;return this._w=p*s+r*this._w,this._x=p*i+r*this._x,this._y=p*a+r*this._y,this._z=p*o+r*this._z,this.normalize(),this}const u=Math.sqrt(c),d=Math.atan2(u,l),f=Math.sin((1-r)*d)/u,h=Math.sin(r*d)/u;return this._w=s*f+this._w*h,this._x=i*f+this._x*h,this._y=a*f+this._y*h,this._z=o*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,r,i){return this.copy(e).slerp(r,i)}random(){const e=2*Math.PI*Math.random(),r=2*Math.PI*Math.random(),i=Math.random(),a=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(a*Math.sin(e),a*Math.cos(e),o*Math.sin(r),o*Math.cos(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,r=0){return this._x=e[r],this._y=e[r+1],this._z=e[r+2],this._w=e[r+3],this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._w,e}fromBufferAttribute(e,r){return this._x=e.getX(r),this._y=e.getY(r),this._z=e.getZ(r),this._w=e.getW(r),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ge{constructor(e=0,r=0,i=0){ge.prototype.isVector3=!0,this.x=e,this.y=r,this.z=i}set(e,r,i){return i===void 0&&(i=this.z),this.x=e,this.y=r,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,r){switch(e){case 0:this.x=r;break;case 1:this.y=r;break;case 2:this.z=r;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,r){return this.x=e.x+r.x,this.y=e.y+r.y,this.z=e.z+r.z,this}addScaledVector(e,r){return this.x+=e.x*r,this.y+=e.y*r,this.z+=e.z*r,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,r){return this.x=e.x-r.x,this.y=e.y-r.y,this.z=e.z-r.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,r){return this.x=e.x*r.x,this.y=e.y*r.y,this.z=e.z*r.z,this}applyEuler(e){return this.applyQuaternion(fpe.setFromEuler(e))}applyAxisAngle(e,r){return this.applyQuaternion(fpe.setFromAxisAngle(e,r))}applyMatrix3(e){const r=this.x,i=this.y,a=this.z,o=e.elements;return this.x=o[0]*r+o[3]*i+o[6]*a,this.y=o[1]*r+o[4]*i+o[7]*a,this.z=o[2]*r+o[5]*i+o[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const r=this.x,i=this.y,a=this.z,o=e.elements,s=1/(o[3]*r+o[7]*i+o[11]*a+o[15]);return this.x=(o[0]*r+o[4]*i+o[8]*a+o[12])*s,this.y=(o[1]*r+o[5]*i+o[9]*a+o[13])*s,this.z=(o[2]*r+o[6]*i+o[10]*a+o[14])*s,this}applyQuaternion(e){const r=this.x,i=this.y,a=this.z,o=e.x,s=e.y,l=e.z,c=e.w,u=2*(s*a-l*i),d=2*(l*r-o*a),f=2*(o*i-s*r);return this.x=r+c*u+s*f-l*d,this.y=i+c*d+l*u-o*f,this.z=a+c*f+o*d-s*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const r=this.x,i=this.y,a=this.z,o=e.elements;return this.x=o[0]*r+o[4]*i+o[8]*a,this.y=o[1]*r+o[5]*i+o[9]*a,this.z=o[2]*r+o[6]*i+o[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,r){return this.x=mr(this.x,e.x,r.x),this.y=mr(this.y,e.y,r.y),this.z=mr(this.z,e.z,r.z),this}clampScalar(e,r){return this.x=mr(this.x,e,r),this.y=mr(this.y,e,r),this.z=mr(this.z,e,r),this}clampLength(e,r){const i=this.length();return this.divideScalar(i||1).multiplyScalar(mr(i,e,r))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,r){return this.x+=(e.x-this.x)*r,this.y+=(e.y-this.y)*r,this.z+=(e.z-this.z)*r,this}lerpVectors(e,r,i){return this.x=e.x+(r.x-e.x)*i,this.y=e.y+(r.y-e.y)*i,this.z=e.z+(r.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,r){const i=e.x,a=e.y,o=e.z,s=r.x,l=r.y,c=r.z;return this.x=a*c-o*l,this.y=o*s-i*c,this.z=i*l-a*s,this}projectOnVector(e){const r=e.lengthSq();if(r===0)return this.set(0,0,0);const i=e.dot(this)/r;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Z7.copy(this).projectOnVector(e),this.sub(Z7)}reflect(e){return this.sub(Z7.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const r=Math.sqrt(this.lengthSq()*e.lengthSq());if(r===0)return Math.PI/2;const i=this.dot(e)/r;return Math.acos(mr(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const r=this.x-e.x,i=this.y-e.y,a=this.z-e.z;return r*r+i*i+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,r,i){const a=Math.sin(r)*e;return this.x=a*Math.sin(i),this.y=Math.cos(r)*e,this.z=a*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,r,i){return this.x=e*Math.sin(r),this.y=i,this.z=e*Math.cos(r),this}setFromMatrixPosition(e){const r=e.elements;return this.x=r[12],this.y=r[13],this.z=r[14],this}setFromMatrixScale(e){const r=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=r,this.y=i,this.z=a,this}setFromMatrixColumn(e,r){return this.fromArray(e.elements,r*4)}setFromMatrix3Column(e,r){return this.fromArray(e.elements,r*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,r=0){return this.x=e[r],this.y=e[r+1],this.z=e[r+2],this}toArray(e=[],r=0){return e[r]=this.x,e[r+1]=this.y,e[r+2]=this.z,e}fromBufferAttribute(e,r){return this.x=e.getX(r),this.y=e.getY(r),this.z=e.getZ(r),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,r=Math.random()*2-1,i=Math.sqrt(1-r*r);return this.x=i*Math.cos(e),this.y=r,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Z7=new ge,fpe=new ah;class Xy{constructor(e=new ge(1/0,1/0,1/0),r=new ge(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=r}set(e,r){return this.min.copy(e),this.max.copy(r),this}setFromArray(e){this.makeEmpty();for(let r=0,i=e.length;r<i;r+=3)this.expandByPoint(hd.fromArray(e,r));return this}setFromBufferAttribute(e){this.makeEmpty();for(let r=0,i=e.count;r<i;r++)this.expandByPoint(hd.fromBufferAttribute(e,r));return this}setFromPoints(e){this.makeEmpty();for(let r=0,i=e.length;r<i;r++)this.expandByPoint(e[r]);return this}setFromCenterAndSize(e,r){const i=hd.copy(r).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,r=!1){return this.makeEmpty(),this.expandByObject(e,r)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,r=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const o=i.getAttribute("position");if(r===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let s=0,l=o.count;s<l;s++)e.isMesh===!0?e.getVertexPosition(s,hd):hd.fromBufferAttribute(o,s),hd.applyMatrix4(e.matrixWorld),this.expandByPoint(hd);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),BA.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),BA.copy(i.boundingBox)),BA.applyMatrix4(e.matrixWorld),this.union(BA)}const a=e.children;for(let o=0,s=a.length;o<s;o++)this.expandByObject(a[o],r);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,r){return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,hd),hd.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let r,i;return e.normal.x>0?(r=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(r=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(r+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(r+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(r+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(r+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),r<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(xS),zA.subVectors(this.max,xS),G1.subVectors(e.a,xS),j1.subVectors(e.b,xS),H1.subVectors(e.c,xS),wg.subVectors(j1,G1),Sg.subVectors(H1,j1),Vv.subVectors(G1,H1);let r=[0,-wg.z,wg.y,0,-Sg.z,Sg.y,0,-Vv.z,Vv.y,wg.z,0,-wg.x,Sg.z,0,-Sg.x,Vv.z,0,-Vv.x,-wg.y,wg.x,0,-Sg.y,Sg.x,0,-Vv.y,Vv.x,0];return!Q7(r,G1,j1,H1,zA)||(r=[1,0,0,0,1,0,0,0,1],!Q7(r,G1,j1,H1,zA))?!1:(UA.crossVectors(wg,Sg),r=[UA.x,UA.y,UA.z],Q7(r,G1,j1,H1,zA))}clampPoint(e,r){return r.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,hd).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(hd).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ih[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ih[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ih[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ih[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ih[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ih[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ih[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ih[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ih),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ih=[new ge,new ge,new ge,new ge,new ge,new ge,new ge,new ge],hd=new ge,BA=new Xy,G1=new ge,j1=new ge,H1=new ge,wg=new ge,Sg=new ge,Vv=new ge,xS=new ge,zA=new ge,UA=new ge,Gv=new ge;function Q7(n,e,r,i,a){for(let o=0,s=n.length-3;o<=s;o+=3){Gv.fromArray(n,o);const l=a.x*Math.abs(Gv.x)+a.y*Math.abs(Gv.y)+a.z*Math.abs(Gv.z),c=e.dot(Gv),u=r.dot(Gv),d=i.dot(Gv);if(Math.max(-Math.max(c,u,d),Math.min(c,u,d))>l)return!1}return!0}const J3t=new Xy,_S=new ge,J7=new ge;class RL{constructor(e=new ge,r=-1){this.isSphere=!0,this.center=e,this.radius=r}set(e,r){return this.center.copy(e),this.radius=r,this}setFromPoints(e,r){const i=this.center;r!==void 0?i.copy(r):J3t.setFromPoints(e).getCenter(i);let a=0;for(let o=0,s=e.length;o<s;o++)a=Math.max(a,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const r=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=r*r}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,r){const i=this.center.distanceToSquared(e);return r.copy(e),i>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;_S.subVectors(e,this.center);const r=_S.lengthSq();if(r>this.radius*this.radius){const i=Math.sqrt(r),a=(i-this.radius)*.5;this.center.addScaledVector(_S,a/i),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(J7.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(_S.copy(e.center).add(J7)),this.expandByPoint(_S.copy(e.center).sub(J7))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Dh=new ge,ez=new ge,VA=new ge,Eg=new ge,tz=new ge,GA=new ge,nz=new ge;class PL{constructor(e=new ge,r=new ge(0,0,-1)){this.origin=e,this.direction=r}set(e,r){return this.origin.copy(e),this.direction.copy(r),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,r){return r.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Dh)),this}closestPointToPoint(e,r){r.subVectors(e,this.origin);const i=r.dot(this.direction);return i<0?r.copy(this.origin):r.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const r=Dh.subVectors(e,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(e):(Dh.copy(this.origin).addScaledVector(this.direction,r),Dh.distanceToSquared(e))}distanceSqToSegment(e,r,i,a){ez.copy(e).add(r).multiplyScalar(.5),VA.copy(r).sub(e).normalize(),Eg.copy(this.origin).sub(ez);const o=e.distanceTo(r)*.5,s=-this.direction.dot(VA),l=Eg.dot(this.direction),c=-Eg.dot(VA),u=Eg.lengthSq(),d=Math.abs(1-s*s);let f,h,p,g;if(d>0)if(f=s*c-l,h=s*l-c,g=o*d,f>=0)if(h>=-g)if(h<=g){const m=1/d;f*=m,h*=m,p=f*(f+s*h+2*l)+h*(s*f+h+2*c)+u}else h=o,f=Math.max(0,-(s*h+l)),p=-f*f+h*(h+2*c)+u;else h=-o,f=Math.max(0,-(s*h+l)),p=-f*f+h*(h+2*c)+u;else h<=-g?(f=Math.max(0,-(-s*o+l)),h=f>0?-o:Math.min(Math.max(-o,-c),o),p=-f*f+h*(h+2*c)+u):h<=g?(f=0,h=Math.min(Math.max(-o,-c),o),p=h*(h+2*c)+u):(f=Math.max(0,-(s*o+l)),h=f>0?o:Math.min(Math.max(-o,-c),o),p=-f*f+h*(h+2*c)+u);else h=s>0?-o:o,f=Math.max(0,-(s*h+l)),p=-f*f+h*(h+2*c)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,f),a&&a.copy(ez).addScaledVector(VA,h),p}intersectSphere(e,r){Dh.subVectors(e.center,this.origin);const i=Dh.dot(this.direction),a=Dh.dot(Dh)-i*i,o=e.radius*e.radius;if(a>o)return null;const s=Math.sqrt(o-a),l=i-s,c=i+s;return c<0?null:l<0?this.at(c,r):this.at(l,r)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const r=e.normal.dot(this.direction);if(r===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/r;return i>=0?i:null}intersectPlane(e,r){const i=this.distanceToPlane(e);return i===null?null:this.at(i,r)}intersectsPlane(e){const r=e.distanceToPoint(this.origin);return r===0||e.normal.dot(this.direction)*r<0}intersectBox(e,r){let i,a,o,s,l,c;const u=1/this.direction.x,d=1/this.direction.y,f=1/this.direction.z,h=this.origin;return u>=0?(i=(e.min.x-h.x)*u,a=(e.max.x-h.x)*u):(i=(e.max.x-h.x)*u,a=(e.min.x-h.x)*u),d>=0?(o=(e.min.y-h.y)*d,s=(e.max.y-h.y)*d):(o=(e.max.y-h.y)*d,s=(e.min.y-h.y)*d),i>s||o>a||((o>i||isNaN(i))&&(i=o),(s<a||isNaN(a))&&(a=s),f>=0?(l=(e.min.z-h.z)*f,c=(e.max.z-h.z)*f):(l=(e.max.z-h.z)*f,c=(e.min.z-h.z)*f),i>c||l>a)||((l>i||i!==i)&&(i=l),(c<a||a!==a)&&(a=c),a<0)?null:this.at(i>=0?i:a,r)}intersectsBox(e){return this.intersectBox(e,Dh)!==null}intersectTriangle(e,r,i,a,o){tz.subVectors(r,e),GA.subVectors(i,e),nz.crossVectors(tz,GA);let s=this.direction.dot(nz),l;if(s>0){if(a)return null;l=1}else if(s<0)l=-1,s=-s;else return null;Eg.subVectors(this.origin,e);const c=l*this.direction.dot(GA.crossVectors(Eg,GA));if(c<0)return null;const u=l*this.direction.dot(tz.cross(Eg));if(u<0||c+u>s)return null;const d=-l*Eg.dot(nz);return d<0?null:this.at(d/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class jr{constructor(e,r,i,a,o,s,l,c,u,d,f,h,p,g,m,v){jr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,r,i,a,o,s,l,c,u,d,f,h,p,g,m,v)}set(e,r,i,a,o,s,l,c,u,d,f,h,p,g,m,v){const y=this.elements;return y[0]=e,y[4]=r,y[8]=i,y[12]=a,y[1]=o,y[5]=s,y[9]=l,y[13]=c,y[2]=u,y[6]=d,y[10]=f,y[14]=h,y[3]=p,y[7]=g,y[11]=m,y[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new jr().fromArray(this.elements)}copy(e){const r=this.elements,i=e.elements;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],this}copyPosition(e){const r=this.elements,i=e.elements;return r[12]=i[12],r[13]=i[13],r[14]=i[14],this}setFromMatrix3(e){const r=e.elements;return this.set(r[0],r[3],r[6],0,r[1],r[4],r[7],0,r[2],r[5],r[8],0,0,0,0,1),this}extractBasis(e,r,i){return e.setFromMatrixColumn(this,0),r.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,r,i){return this.set(e.x,r.x,i.x,0,e.y,r.y,i.y,0,e.z,r.z,i.z,0,0,0,0,1),this}extractRotation(e){const r=this.elements,i=e.elements,a=1/W1.setFromMatrixColumn(e,0).length(),o=1/W1.setFromMatrixColumn(e,1).length(),s=1/W1.setFromMatrixColumn(e,2).length();return r[0]=i[0]*a,r[1]=i[1]*a,r[2]=i[2]*a,r[3]=0,r[4]=i[4]*o,r[5]=i[5]*o,r[6]=i[6]*o,r[7]=0,r[8]=i[8]*s,r[9]=i[9]*s,r[10]=i[10]*s,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromEuler(e){const r=this.elements,i=e.x,a=e.y,o=e.z,s=Math.cos(i),l=Math.sin(i),c=Math.cos(a),u=Math.sin(a),d=Math.cos(o),f=Math.sin(o);if(e.order==="XYZ"){const h=s*d,p=s*f,g=l*d,m=l*f;r[0]=c*d,r[4]=-c*f,r[8]=u,r[1]=p+g*u,r[5]=h-m*u,r[9]=-l*c,r[2]=m-h*u,r[6]=g+p*u,r[10]=s*c}else if(e.order==="YXZ"){const h=c*d,p=c*f,g=u*d,m=u*f;r[0]=h+m*l,r[4]=g*l-p,r[8]=s*u,r[1]=s*f,r[5]=s*d,r[9]=-l,r[2]=p*l-g,r[6]=m+h*l,r[10]=s*c}else if(e.order==="ZXY"){const h=c*d,p=c*f,g=u*d,m=u*f;r[0]=h-m*l,r[4]=-s*f,r[8]=g+p*l,r[1]=p+g*l,r[5]=s*d,r[9]=m-h*l,r[2]=-s*u,r[6]=l,r[10]=s*c}else if(e.order==="ZYX"){const h=s*d,p=s*f,g=l*d,m=l*f;r[0]=c*d,r[4]=g*u-p,r[8]=h*u+m,r[1]=c*f,r[5]=m*u+h,r[9]=p*u-g,r[2]=-u,r[6]=l*c,r[10]=s*c}else if(e.order==="YZX"){const h=s*c,p=s*u,g=l*c,m=l*u;r[0]=c*d,r[4]=m-h*f,r[8]=g*f+p,r[1]=f,r[5]=s*d,r[9]=-l*d,r[2]=-u*d,r[6]=p*f+g,r[10]=h-m*f}else if(e.order==="XZY"){const h=s*c,p=s*u,g=l*c,m=l*u;r[0]=c*d,r[4]=-f,r[8]=u*d,r[1]=h*f+m,r[5]=s*d,r[9]=p*f-g,r[2]=g*f-p,r[6]=l*d,r[10]=m*f+h}return r[3]=0,r[7]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,this}makeRotationFromQuaternion(e){return this.compose(eAt,e,tAt)}lookAt(e,r,i){const a=this.elements;return mc.subVectors(e,r),mc.lengthSq()===0&&(mc.z=1),mc.normalize(),Cg.crossVectors(i,mc),Cg.lengthSq()===0&&(Math.abs(i.z)===1?mc.x+=1e-4:mc.z+=1e-4,mc.normalize(),Cg.crossVectors(i,mc)),Cg.normalize(),jA.crossVectors(mc,Cg),a[0]=Cg.x,a[4]=jA.x,a[8]=mc.x,a[1]=Cg.y,a[5]=jA.y,a[9]=mc.y,a[2]=Cg.z,a[6]=jA.z,a[10]=mc.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,r){const i=e.elements,a=r.elements,o=this.elements,s=i[0],l=i[4],c=i[8],u=i[12],d=i[1],f=i[5],h=i[9],p=i[13],g=i[2],m=i[6],v=i[10],y=i[14],b=i[3],x=i[7],_=i[11],S=i[15],M=a[0],E=a[4],T=a[8],P=a[12],A=a[1],N=a[5],O=a[9],I=a[13],D=a[2],k=a[6],$=a[10],B=a[14],F=a[3],G=a[7],z=a[11],U=a[15];return o[0]=s*M+l*A+c*D+u*F,o[4]=s*E+l*N+c*k+u*G,o[8]=s*T+l*O+c*$+u*z,o[12]=s*P+l*I+c*B+u*U,o[1]=d*M+f*A+h*D+p*F,o[5]=d*E+f*N+h*k+p*G,o[9]=d*T+f*O+h*$+p*z,o[13]=d*P+f*I+h*B+p*U,o[2]=g*M+m*A+v*D+y*F,o[6]=g*E+m*N+v*k+y*G,o[10]=g*T+m*O+v*$+y*z,o[14]=g*P+m*I+v*B+y*U,o[3]=b*M+x*A+_*D+S*F,o[7]=b*E+x*N+_*k+S*G,o[11]=b*T+x*O+_*$+S*z,o[15]=b*P+x*I+_*B+S*U,this}multiplyScalar(e){const r=this.elements;return r[0]*=e,r[4]*=e,r[8]*=e,r[12]*=e,r[1]*=e,r[5]*=e,r[9]*=e,r[13]*=e,r[2]*=e,r[6]*=e,r[10]*=e,r[14]*=e,r[3]*=e,r[7]*=e,r[11]*=e,r[15]*=e,this}determinant(){const e=this.elements,r=e[0],i=e[4],a=e[8],o=e[12],s=e[1],l=e[5],c=e[9],u=e[13],d=e[2],f=e[6],h=e[10],p=e[14],g=e[3],m=e[7],v=e[11],y=e[15];return g*(+o*c*f-a*u*f-o*l*h+i*u*h+a*l*p-i*c*p)+m*(+r*c*p-r*u*h+o*s*h-a*s*p+a*u*d-o*c*d)+v*(+r*u*f-r*l*p-o*s*f+i*s*p+o*l*d-i*u*d)+y*(-a*l*d-r*c*f+r*l*h+a*s*f-i*s*h+i*c*d)}transpose(){const e=this.elements;let r;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,this}setPosition(e,r,i){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=r,a[14]=i),this}invert(){const e=this.elements,r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],d=e[8],f=e[9],h=e[10],p=e[11],g=e[12],m=e[13],v=e[14],y=e[15],b=f*v*u-m*h*u+m*c*p-l*v*p-f*c*y+l*h*y,x=g*h*u-d*v*u-g*c*p+s*v*p+d*c*y-s*h*y,_=d*m*u-g*f*u+g*l*p-s*m*p-d*l*y+s*f*y,S=g*f*c-d*m*c-g*l*h+s*m*h+d*l*v-s*f*v,M=r*b+i*x+a*_+o*S;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/M;return e[0]=b*E,e[1]=(m*h*o-f*v*o-m*a*p+i*v*p+f*a*y-i*h*y)*E,e[2]=(l*v*o-m*c*o+m*a*u-i*v*u-l*a*y+i*c*y)*E,e[3]=(f*c*o-l*h*o-f*a*u+i*h*u+l*a*p-i*c*p)*E,e[4]=x*E,e[5]=(d*v*o-g*h*o+g*a*p-r*v*p-d*a*y+r*h*y)*E,e[6]=(g*c*o-s*v*o-g*a*u+r*v*u+s*a*y-r*c*y)*E,e[7]=(s*h*o-d*c*o+d*a*u-r*h*u-s*a*p+r*c*p)*E,e[8]=_*E,e[9]=(g*f*o-d*m*o-g*i*p+r*m*p+d*i*y-r*f*y)*E,e[10]=(s*m*o-g*l*o+g*i*u-r*m*u-s*i*y+r*l*y)*E,e[11]=(d*l*o-s*f*o-d*i*u+r*f*u+s*i*p-r*l*p)*E,e[12]=S*E,e[13]=(d*m*a-g*f*a+g*i*h-r*m*h-d*i*v+r*f*v)*E,e[14]=(g*l*a-s*m*a-g*i*c+r*m*c+s*i*v-r*l*v)*E,e[15]=(s*f*a-d*l*a+d*i*c-r*f*c-s*i*h+r*l*h)*E,this}scale(e){const r=this.elements,i=e.x,a=e.y,o=e.z;return r[0]*=i,r[4]*=a,r[8]*=o,r[1]*=i,r[5]*=a,r[9]*=o,r[2]*=i,r[6]*=a,r[10]*=o,r[3]*=i,r[7]*=a,r[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(r,i,a))}makeTranslation(e,r,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,r,0,0,1,i,0,0,0,1),this}makeRotationX(e){const r=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,r,-i,0,0,i,r,0,0,0,0,1),this}makeRotationY(e){const r=Math.cos(e),i=Math.sin(e);return this.set(r,0,i,0,0,1,0,0,-i,0,r,0,0,0,0,1),this}makeRotationZ(e){const r=Math.cos(e),i=Math.sin(e);return this.set(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,r){const i=Math.cos(r),a=Math.sin(r),o=1-i,s=e.x,l=e.y,c=e.z,u=o*s,d=o*l;return this.set(u*s+i,u*l-a*c,u*c+a*l,0,u*l+a*c,d*l+i,d*c-a*s,0,u*c-a*l,d*c+a*s,o*c*c+i,0,0,0,0,1),this}makeScale(e,r,i){return this.set(e,0,0,0,0,r,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,r,i,a,o,s){return this.set(1,i,o,0,e,1,s,0,r,a,1,0,0,0,0,1),this}compose(e,r,i){const a=this.elements,o=r._x,s=r._y,l=r._z,c=r._w,u=o+o,d=s+s,f=l+l,h=o*u,p=o*d,g=o*f,m=s*d,v=s*f,y=l*f,b=c*u,x=c*d,_=c*f,S=i.x,M=i.y,E=i.z;return a[0]=(1-(m+y))*S,a[1]=(p+_)*S,a[2]=(g-x)*S,a[3]=0,a[4]=(p-_)*M,a[5]=(1-(h+y))*M,a[6]=(v+b)*M,a[7]=0,a[8]=(g+x)*E,a[9]=(v-b)*E,a[10]=(1-(h+m))*E,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,r,i){const a=this.elements;let o=W1.set(a[0],a[1],a[2]).length();const s=W1.set(a[4],a[5],a[6]).length(),l=W1.set(a[8],a[9],a[10]).length();this.determinant()<0&&(o=-o),e.x=a[12],e.y=a[13],e.z=a[14],pd.copy(this);const u=1/o,d=1/s,f=1/l;return pd.elements[0]*=u,pd.elements[1]*=u,pd.elements[2]*=u,pd.elements[4]*=d,pd.elements[5]*=d,pd.elements[6]*=d,pd.elements[8]*=f,pd.elements[9]*=f,pd.elements[10]*=f,r.setFromRotationMatrix(pd),i.x=o,i.y=s,i.z=l,this}makePerspective(e,r,i,a,o,s,l=ku){const c=this.elements,u=2*o/(r-e),d=2*o/(i-a),f=(r+e)/(r-e),h=(i+a)/(i-a);let p,g;if(l===ku)p=-(s+o)/(s-o),g=-2*s*o/(s-o);else if(l===Ty)p=-s/(s-o),g=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=u,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=d,c[9]=h,c[13]=0,c[2]=0,c[6]=0,c[10]=p,c[14]=g,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,r,i,a,o,s,l=ku){const c=this.elements,u=1/(r-e),d=1/(i-a),f=1/(s-o),h=(r+e)*u,p=(i+a)*d;let g,m;if(l===ku)g=(s+o)*f,m=-2*f;else if(l===Ty)g=o*f,m=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-h,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-p,c[2]=0,c[6]=0,c[10]=m,c[14]=-g,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const r=this.elements,i=e.elements;for(let a=0;a<16;a++)if(r[a]!==i[a])return!1;return!0}fromArray(e,r=0){for(let i=0;i<16;i++)this.elements[i]=e[i+r];return this}toArray(e=[],r=0){const i=this.elements;return e[r]=i[0],e[r+1]=i[1],e[r+2]=i[2],e[r+3]=i[3],e[r+4]=i[4],e[r+5]=i[5],e[r+6]=i[6],e[r+7]=i[7],e[r+8]=i[8],e[r+9]=i[9],e[r+10]=i[10],e[r+11]=i[11],e[r+12]=i[12],e[r+13]=i[13],e[r+14]=i[14],e[r+15]=i[15],e}}const W1=new ge,pd=new jr,eAt=new ge(0,0,0),tAt=new ge(1,1,1),Cg=new ge,jA=new ge,mc=new ge,hpe=new jr,ppe=new ah;class Hc{constructor(e=0,r=0,i=0,a=Hc.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=r,this._z=i,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,r,i,a=this._order){return this._x=e,this._y=r,this._z=i,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,r=this._order,i=!0){const a=e.elements,o=a[0],s=a[4],l=a[8],c=a[1],u=a[5],d=a[9],f=a[2],h=a[6],p=a[10];switch(r){case"XYZ":this._y=Math.asin(mr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-mr(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(mr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-mr(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(mr(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-mr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+r)}return this._order=r,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,r,i){return hpe.makeRotationFromQuaternion(e),this.setFromRotationMatrix(hpe,r,i)}setFromVector3(e,r=this._order){return this.set(e.x,e.y,e.z,r)}reorder(e){return ppe.setFromEuler(this),this.setFromQuaternion(ppe,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],r=0){return e[r]=this._x,e[r+1]=this._y,e[r+2]=this._z,e[r+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Hc.DEFAULT_ORDER="XYZ";class aZ{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let nAt=0;const gpe=new ge,q1=new ah,Lh=new jr,HA=new ge,wS=new ge,rAt=new ge,iAt=new ah,mpe=new ge(1,0,0),vpe=new ge(0,1,0),ype=new ge(0,0,1),bpe={type:"added"},aAt={type:"removed"},Y1={type:"childadded",child:null},rz={type:"childremoved",child:null};class Za extends mv{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:nAt++}),this.uuid=Sp(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Za.DEFAULT_UP.clone();const e=new ge,r=new Hc,i=new ah,a=new ge(1,1,1);function o(){i.setFromEuler(r,!1)}function s(){r.setFromQuaternion(i,void 0,!1)}r._onChange(o),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new jr},normalMatrix:{value:new Zn}}),this.matrix=new jr,this.matrixWorld=new jr,this.matrixAutoUpdate=Za.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Za.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new aZ,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,r){this.quaternion.setFromAxisAngle(e,r)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,r){return q1.setFromAxisAngle(e,r),this.quaternion.multiply(q1),this}rotateOnWorldAxis(e,r){return q1.setFromAxisAngle(e,r),this.quaternion.premultiply(q1),this}rotateX(e){return this.rotateOnAxis(mpe,e)}rotateY(e){return this.rotateOnAxis(vpe,e)}rotateZ(e){return this.rotateOnAxis(ype,e)}translateOnAxis(e,r){return gpe.copy(e).applyQuaternion(this.quaternion),this.position.add(gpe.multiplyScalar(r)),this}translateX(e){return this.translateOnAxis(mpe,e)}translateY(e){return this.translateOnAxis(vpe,e)}translateZ(e){return this.translateOnAxis(ype,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Lh.copy(this.matrixWorld).invert())}lookAt(e,r,i){e.isVector3?HA.copy(e):HA.set(e,r,i);const a=this.parent;this.updateWorldMatrix(!0,!1),wS.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Lh.lookAt(wS,HA,this.up):Lh.lookAt(HA,wS,this.up),this.quaternion.setFromRotationMatrix(Lh),a&&(Lh.extractRotation(a.matrixWorld),q1.setFromRotationMatrix(Lh),this.quaternion.premultiply(q1.invert()))}add(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(bpe),Y1.child=e,this.dispatchEvent(Y1),Y1.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const r=this.children.indexOf(e);return r!==-1&&(e.parent=null,this.children.splice(r,1),e.dispatchEvent(aAt),rz.child=e,this.dispatchEvent(rz),rz.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Lh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Lh.multiply(e.parent.matrixWorld)),e.applyMatrix4(Lh),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(bpe),Y1.child=e,this.dispatchEvent(Y1),Y1.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,r){if(this[e]===r)return this;for(let i=0,a=this.children.length;i<a;i++){const s=this.children[i].getObjectByProperty(e,r);if(s!==void 0)return s}}getObjectsByProperty(e,r,i=[]){this[e]===r&&i.push(this);const a=this.children;for(let o=0,s=a.length;o<s;o++)a[o].getObjectsByProperty(e,r,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wS,e,rAt),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wS,iAt,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const r=this.matrixWorld.elements;return e.set(r[8],r[9],r[10]).normalize()}raycast(){}traverse(e){e(this);const r=this.children;for(let i=0,a=r.length;i<a;i++)r[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const r=this.children;for(let i=0,a=r.length;i<a;i++)r[i].traverseVisible(e)}traverseAncestors(e){const r=this.parent;r!==null&&(e(r),r.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const r=this.children;for(let i=0,a=r.length;i<a;i++)r[i].updateMatrixWorld(e)}updateWorldMatrix(e,r){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),r===!0){const a=this.children;for(let o=0,s=a.length;o<s;o++)a[o].updateWorldMatrix(!1,!0)}}toJSON(e){const r=e===void 0||typeof e=="string",i={};r&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.visibility=this._visibility,a.active=this._active,a.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.geometryCount=this._geometryCount,a.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(a.boundingSphere={center:a.boundingSphere.center.toArray(),radius:a.boundingSphere.radius}),this.boundingBox!==null&&(a.boundingBox={min:a.boundingBox.min.toArray(),max:a.boundingBox.max.toArray()}));function o(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=o(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++){const f=c[u];o(e.shapes,f)}else o(e.shapes,c)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(e.materials,this.material[c]));a.material=l}else a.material=o(e.materials,this.material);if(this.children.length>0){a.children=[];for(let l=0;l<this.children.length;l++)a.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];a.animations.push(o(e.animations,c))}}if(r){const l=s(e.geometries),c=s(e.materials),u=s(e.textures),d=s(e.images),f=s(e.shapes),h=s(e.skeletons),p=s(e.animations),g=s(e.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),u.length>0&&(i.textures=u),d.length>0&&(i.images=d),f.length>0&&(i.shapes=f),h.length>0&&(i.skeletons=h),p.length>0&&(i.animations=p),g.length>0&&(i.nodes=g)}return i.object=a,i;function s(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,r=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),r===!0)for(let i=0;i<e.children.length;i++){const a=e.children[i];this.add(a.clone())}return this}}Za.DEFAULT_UP=new ge(0,1,0);Za.DEFAULT_MATRIX_AUTO_UPDATE=!0;Za.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const gd=new ge,kh=new ge,iz=new ge,Fh=new ge,X1=new ge,K1=new ge,xpe=new ge,az=new ge,oz=new ge,sz=new ge,lz=new sr,cz=new sr,uz=new sr;class Iu{constructor(e=new ge,r=new ge,i=new ge){this.a=e,this.b=r,this.c=i}static getNormal(e,r,i,a){a.subVectors(i,r),gd.subVectors(e,r),a.cross(gd);const o=a.lengthSq();return o>0?a.multiplyScalar(1/Math.sqrt(o)):a.set(0,0,0)}static getBarycoord(e,r,i,a,o){gd.subVectors(a,r),kh.subVectors(i,r),iz.subVectors(e,r);const s=gd.dot(gd),l=gd.dot(kh),c=gd.dot(iz),u=kh.dot(kh),d=kh.dot(iz),f=s*u-l*l;if(f===0)return o.set(0,0,0),null;const h=1/f,p=(u*c-l*d)*h,g=(s*d-l*c)*h;return o.set(1-p-g,g,p)}static containsPoint(e,r,i,a){return this.getBarycoord(e,r,i,a,Fh)===null?!1:Fh.x>=0&&Fh.y>=0&&Fh.x+Fh.y<=1}static getInterpolation(e,r,i,a,o,s,l,c){return this.getBarycoord(e,r,i,a,Fh)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(o,Fh.x),c.addScaledVector(s,Fh.y),c.addScaledVector(l,Fh.z),c)}static getInterpolatedAttribute(e,r,i,a,o,s){return lz.setScalar(0),cz.setScalar(0),uz.setScalar(0),lz.fromBufferAttribute(e,r),cz.fromBufferAttribute(e,i),uz.fromBufferAttribute(e,a),s.setScalar(0),s.addScaledVector(lz,o.x),s.addScaledVector(cz,o.y),s.addScaledVector(uz,o.z),s}static isFrontFacing(e,r,i,a){return gd.subVectors(i,r),kh.subVectors(e,r),gd.cross(kh).dot(a)<0}set(e,r,i){return this.a.copy(e),this.b.copy(r),this.c.copy(i),this}setFromPointsAndIndices(e,r,i,a){return this.a.copy(e[r]),this.b.copy(e[i]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,r,i,a){return this.a.fromBufferAttribute(e,r),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return gd.subVectors(this.c,this.b),kh.subVectors(this.a,this.b),gd.cross(kh).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Iu.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,r){return Iu.getBarycoord(e,this.a,this.b,this.c,r)}getInterpolation(e,r,i,a,o){return Iu.getInterpolation(e,this.a,this.b,this.c,r,i,a,o)}containsPoint(e){return Iu.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Iu.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,r){const i=this.a,a=this.b,o=this.c;let s,l;X1.subVectors(a,i),K1.subVectors(o,i),az.subVectors(e,i);const c=X1.dot(az),u=K1.dot(az);if(c<=0&&u<=0)return r.copy(i);oz.subVectors(e,a);const d=X1.dot(oz),f=K1.dot(oz);if(d>=0&&f<=d)return r.copy(a);const h=c*f-d*u;if(h<=0&&c>=0&&d<=0)return s=c/(c-d),r.copy(i).addScaledVector(X1,s);sz.subVectors(e,o);const p=X1.dot(sz),g=K1.dot(sz);if(g>=0&&p<=g)return r.copy(o);const m=p*u-c*g;if(m<=0&&u>=0&&g<=0)return l=u/(u-g),r.copy(i).addScaledVector(K1,l);const v=d*g-p*f;if(v<=0&&f-d>=0&&p-g>=0)return xpe.subVectors(o,a),l=(f-d)/(f-d+(p-g)),r.copy(a).addScaledVector(xpe,l);const y=1/(v+m+h);return s=m*y,l=h*y,r.copy(i).addScaledVector(X1,s).addScaledVector(K1,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const iAe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Mg={h:0,s:0,l:0},WA={h:0,s:0,l:0};function dz(n,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?n+(e-n)*6*r:r<1/2?e:r<2/3?n+(e-n)*6*(2/3-r):n}class Tn{constructor(e,r,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,r,i)}set(e,r,i){if(r===void 0&&i===void 0){const a=e;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(e,r,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,r=Pn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Mr.toWorkingColorSpace(this,r),this}setRGB(e,r,i,a=Mr.workingColorSpace){return this.r=e,this.g=r,this.b=i,Mr.toWorkingColorSpace(this,a),this}setHSL(e,r,i,a=Mr.workingColorSpace){if(e=rZ(e,1),r=mr(r,0,1),i=mr(i,0,1),r===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+r):i+r-i*r,s=2*i-o;this.r=dz(s,o,e+1/3),this.g=dz(s,o,e),this.b=dz(s,o,e-1/3)}return Mr.toWorkingColorSpace(this,a),this}setStyle(e,r=Pn){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const s=a[1],l=a[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,r);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,r);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,r);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=a[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,r);if(s===6)return this.setHex(parseInt(o,16),r);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,r);return this}setColorName(e,r=Pn){const i=iAe[e.toLowerCase()];return i!==void 0?this.setHex(i,r):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ep(e.r),this.g=Ep(e.g),this.b=Ep(e.b),this}copyLinearToSRGB(e){return this.r=mx(e.r),this.g=mx(e.g),this.b=mx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Pn){return Mr.fromWorkingColorSpace(Is.copy(this),e),Math.round(mr(Is.r*255,0,255))*65536+Math.round(mr(Is.g*255,0,255))*256+Math.round(mr(Is.b*255,0,255))}getHexString(e=Pn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,r=Mr.workingColorSpace){Mr.fromWorkingColorSpace(Is.copy(this),r);const i=Is.r,a=Is.g,o=Is.b,s=Math.max(i,a,o),l=Math.min(i,a,o);let c,u;const d=(l+s)/2;if(l===s)c=0,u=0;else{const f=s-l;switch(u=d<=.5?f/(s+l):f/(2-s-l),s){case i:c=(a-o)/f+(a<o?6:0);break;case a:c=(o-i)/f+2;break;case o:c=(i-a)/f+4;break}c/=6}return e.h=c,e.s=u,e.l=d,e}getRGB(e,r=Mr.workingColorSpace){return Mr.fromWorkingColorSpace(Is.copy(this),r),e.r=Is.r,e.g=Is.g,e.b=Is.b,e}getStyle(e=Pn){Mr.fromWorkingColorSpace(Is.copy(this),e);const r=Is.r,i=Is.g,a=Is.b;return e!==Pn?`color(${e} ${r.toFixed(3)} ${i.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(r*255)},${Math.round(i*255)},${Math.round(a*255)})`}offsetHSL(e,r,i){return this.getHSL(Mg),this.setHSL(Mg.h+e,Mg.s+r,Mg.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,r){return this.r=e.r+r.r,this.g=e.g+r.g,this.b=e.b+r.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,r){return this.r+=(e.r-this.r)*r,this.g+=(e.g-this.g)*r,this.b+=(e.b-this.b)*r,this}lerpColors(e,r,i){return this.r=e.r+(r.r-e.r)*i,this.g=e.g+(r.g-e.g)*i,this.b=e.b+(r.b-e.b)*i,this}lerpHSL(e,r){this.getHSL(Mg),e.getHSL(WA);const i=Q2(Mg.h,WA.h,r),a=Q2(Mg.s,WA.s,r),o=Q2(Mg.l,WA.l,r);return this.setHSL(i,a,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const r=this.r,i=this.g,a=this.b,o=e.elements;return this.r=o[0]*r+o[3]*i+o[6]*a,this.g=o[1]*r+o[4]*i+o[7]*a,this.b=o[2]*r+o[5]*i+o[8]*a,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,r=0){return this.r=e[r],this.g=e[r+1],this.b=e[r+2],this}toArray(e=[],r=0){return e[r]=this.r,e[r+1]=this.g,e[r+2]=this.b,e}fromBufferAttribute(e,r){return this.r=e.getX(r),this.g=e.getY(r),this.b=e.getZ(r),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Is=new Tn;Tn.NAMES=iAe;let oAt=0;class Ks extends mv{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:oAt++}),this.uuid=Sp(),this.name="",this.type="Material",this.blending=$u,this.side=Qd,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=fC,this.blendDst=hC,this.blendEquation=Nc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Tn(0,0,0),this.blendAlpha=0,this.depthFunc=Km,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=NH,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Jv,this.stencilZFail=Jv,this.stencilZPass=Jv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const r in e){const i=e[r];if(i===void 0){console.warn(`THREE.Material: parameter '${r}' has value of undefined.`);continue}const a=this[r];if(a===void 0){console.warn(`THREE.Material: '${r}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(i):a&&a.isVector3&&i&&i.isVector3?a.copy(i):this[r]=i}}toJSON(e){const r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==$u&&(i.blending=this.blending),this.side!==Qd&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==fC&&(i.blendSrc=this.blendSrc),this.blendDst!==hC&&(i.blendDst=this.blendDst),this.blendEquation!==Nc&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Km&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==NH&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Jv&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Jv&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Jv&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function a(o){const s=[];for(const l in o){const c=o[l];delete c.metadata,s.push(c)}return s}if(r){const o=a(e.textures),s=a(e.images);o.length>0&&(i.textures=o),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const r=e.clippingPlanes;let i=null;if(r!==null){const a=r.length;i=new Array(a);for(let o=0;o!==a;++o)i[o]=r[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class dw extends Ks{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Tn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Hc,this.combine=jM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const tp=sAt();function sAt(){const n=new ArrayBuffer(4),e=new Float32Array(n),r=new Uint32Array(n),i=new Uint32Array(512),a=new Uint32Array(512);for(let c=0;c<256;++c){const u=c-127;u<-27?(i[c]=0,i[c|256]=32768,a[c]=24,a[c|256]=24):u<-14?(i[c]=1024>>-u-14,i[c|256]=1024>>-u-14|32768,a[c]=-u-1,a[c|256]=-u-1):u<=15?(i[c]=u+15<<10,i[c|256]=u+15<<10|32768,a[c]=13,a[c|256]=13):u<128?(i[c]=31744,i[c|256]=64512,a[c]=24,a[c|256]=24):(i[c]=31744,i[c|256]=64512,a[c]=13,a[c|256]=13)}const o=new Uint32Array(2048),s=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let u=c<<13,d=0;for(;!(u&8388608);)u<<=1,d-=8388608;u&=-8388609,d+=947912704,o[c]=u|d}for(let c=1024;c<2048;++c)o[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)s[c]=c<<23;s[31]=1199570944,s[32]=2147483648;for(let c=33;c<63;++c)s[c]=2147483648+(c-32<<23);s[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:r,baseTable:i,shiftTable:a,mantissaTable:o,exponentTable:s,offsetTable:l}}function vc(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=mr(n,-65504,65504),tp.floatView[0]=n;const e=tp.uint32View[0],r=e>>23&511;return tp.baseTable[r]+((e&8388607)>>tp.shiftTable[r])}function qA(n){const e=n>>10;return tp.uint32View[0]=tp.mantissaTable[tp.offsetTable[e]+(n&1023)]+tp.exponentTable[e],tp.floatView[0]}const eo=new ge,YA=new Nt;class bs{constructor(e,r,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=r,this.count=e!==void 0?e.length/r:0,this.normalized=i,this.usage=DO,this.updateRanges=[],this.gpuType=Ka,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,r){this.updateRanges.push({start:e,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,r,i){e*=this.itemSize,i*=r.itemSize;for(let a=0,o=this.itemSize;a<o;a++)this.array[e+a]=r.array[i+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let r=0,i=this.count;r<i;r++)YA.fromBufferAttribute(this,r),YA.applyMatrix3(e),this.setXY(r,YA.x,YA.y);else if(this.itemSize===3)for(let r=0,i=this.count;r<i;r++)eo.fromBufferAttribute(this,r),eo.applyMatrix3(e),this.setXYZ(r,eo.x,eo.y,eo.z);return this}applyMatrix4(e){for(let r=0,i=this.count;r<i;r++)eo.fromBufferAttribute(this,r),eo.applyMatrix4(e),this.setXYZ(r,eo.x,eo.y,eo.z);return this}applyNormalMatrix(e){for(let r=0,i=this.count;r<i;r++)eo.fromBufferAttribute(this,r),eo.applyNormalMatrix(e),this.setXYZ(r,eo.x,eo.y,eo.z);return this}transformDirection(e){for(let r=0,i=this.count;r<i;r++)eo.fromBufferAttribute(this,r),eo.transformDirection(e),this.setXYZ(r,eo.x,eo.y,eo.z);return this}set(e,r=0){return this.array.set(e,r),this}getComponent(e,r){let i=this.array[e*this.itemSize+r];return this.normalized&&(i=fl(i,this.array)),i}setComponent(e,r,i){return this.normalized&&(i=gr(i,this.array)),this.array[e*this.itemSize+r]=i,this}getX(e){let r=this.array[e*this.itemSize];return this.normalized&&(r=fl(r,this.array)),r}setX(e,r){return this.normalized&&(r=gr(r,this.array)),this.array[e*this.itemSize]=r,this}getY(e){let r=this.array[e*this.itemSize+1];return this.normalized&&(r=fl(r,this.array)),r}setY(e,r){return this.normalized&&(r=gr(r,this.array)),this.array[e*this.itemSize+1]=r,this}getZ(e){let r=this.array[e*this.itemSize+2];return this.normalized&&(r=fl(r,this.array)),r}setZ(e,r){return this.normalized&&(r=gr(r,this.array)),this.array[e*this.itemSize+2]=r,this}getW(e){let r=this.array[e*this.itemSize+3];return this.normalized&&(r=fl(r,this.array)),r}setW(e,r){return this.normalized&&(r=gr(r,this.array)),this.array[e*this.itemSize+3]=r,this}setXY(e,r,i){return e*=this.itemSize,this.normalized&&(r=gr(r,this.array),i=gr(i,this.array)),this.array[e+0]=r,this.array[e+1]=i,this}setXYZ(e,r,i,a){return e*=this.itemSize,this.normalized&&(r=gr(r,this.array),i=gr(i,this.array),a=gr(a,this.array)),this.array[e+0]=r,this.array[e+1]=i,this.array[e+2]=a,this}setXYZW(e,r,i,a,o){return e*=this.itemSize,this.normalized&&(r=gr(r,this.array),i=gr(i,this.array),a=gr(a,this.array),o=gr(o,this.array)),this.array[e+0]=r,this.array[e+1]=i,this.array[e+2]=a,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==DO&&(e.usage=this.usage),e}}class oZ extends bs{constructor(e,r,i){super(new Uint16Array(e),r,i)}}class sZ extends bs{constructor(e,r,i){super(new Uint32Array(e),r,i)}}class aAe extends bs{constructor(e,r,i){super(new Uint16Array(e),r,i),this.isFloat16BufferAttribute=!0}getX(e){let r=qA(this.array[e*this.itemSize]);return this.normalized&&(r=fl(r,this.array)),r}setX(e,r){return this.normalized&&(r=gr(r,this.array)),this.array[e*this.itemSize]=vc(r),this}getY(e){let r=qA(this.array[e*this.itemSize+1]);return this.normalized&&(r=fl(r,this.array)),r}setY(e,r){return this.normalized&&(r=gr(r,this.array)),this.array[e*this.itemSize+1]=vc(r),this}getZ(e){let r=qA(this.array[e*this.itemSize+2]);return this.normalized&&(r=fl(r,this.array)),r}setZ(e,r){return this.normalized&&(r=gr(r,this.array)),this.array[e*this.itemSize+2]=vc(r),this}getW(e){let r=qA(this.array[e*this.itemSize+3]);return this.normalized&&(r=fl(r,this.array)),r}setW(e,r){return this.normalized&&(r=gr(r,this.array)),this.array[e*this.itemSize+3]=vc(r),this}setXY(e,r,i){return e*=this.itemSize,this.normalized&&(r=gr(r,this.array),i=gr(i,this.array)),this.array[e+0]=vc(r),this.array[e+1]=vc(i),this}setXYZ(e,r,i,a){return e*=this.itemSize,this.normalized&&(r=gr(r,this.array),i=gr(i,this.array),a=gr(a,this.array)),this.array[e+0]=vc(r),this.array[e+1]=vc(i),this.array[e+2]=vc(a),this}setXYZW(e,r,i,a,o){return e*=this.itemSize,this.normalized&&(r=gr(r,this.array),i=gr(i,this.array),a=gr(a,this.array),o=gr(o,this.array)),this.array[e+0]=vc(r),this.array[e+1]=vc(i),this.array[e+2]=vc(a),this.array[e+3]=vc(o),this}}class Qa extends bs{constructor(e,r,i){super(new Float32Array(e),r,i)}}let lAt=0;const yu=new jr,fz=new Za,Z1=new ge,yc=new Xy,SS=new Xy,qo=new ge;class Qs extends mv{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:lAt++}),this.uuid=Sp(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(tAe(e)?sZ:oZ)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,r){return this.attributes[e]=r,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,r,i=0){this.groups.push({start:e,count:r,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,r){this.drawRange.start=e,this.drawRange.count=r}applyMatrix4(e){const r=this.attributes.position;r!==void 0&&(r.applyMatrix4(e),r.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new Zn().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return yu.makeRotationFromQuaternion(e),this.applyMatrix4(yu),this}rotateX(e){return yu.makeRotationX(e),this.applyMatrix4(yu),this}rotateY(e){return yu.makeRotationY(e),this.applyMatrix4(yu),this}rotateZ(e){return yu.makeRotationZ(e),this.applyMatrix4(yu),this}translate(e,r,i){return yu.makeTranslation(e,r,i),this.applyMatrix4(yu),this}scale(e,r,i){return yu.makeScale(e,r,i),this.applyMatrix4(yu),this}lookAt(e){return fz.lookAt(e),fz.updateMatrix(),this.applyMatrix4(fz.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Z1).negate(),this.translate(Z1.x,Z1.y,Z1.z),this}setFromPoints(e){const r=this.getAttribute("position");if(r===void 0){const i=[];for(let a=0,o=e.length;a<o;a++){const s=e[a];i.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Qa(i,3))}else{const i=Math.min(e.length,r.count);for(let a=0;a<i;a++){const o=e[a];r.setXYZ(a,o.x,o.y,o.z||0)}e.length>r.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),r.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Xy);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ge(-1/0,-1/0,-1/0),new ge(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),r)for(let i=0,a=r.length;i<a;i++){const o=r[i];yc.setFromBufferAttribute(o),this.morphTargetsRelative?(qo.addVectors(this.boundingBox.min,yc.min),this.boundingBox.expandByPoint(qo),qo.addVectors(this.boundingBox.max,yc.max),this.boundingBox.expandByPoint(qo)):(this.boundingBox.expandByPoint(yc.min),this.boundingBox.expandByPoint(yc.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new RL);const e=this.attributes.position,r=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ge,1/0);return}if(e){const i=this.boundingSphere.center;if(yc.setFromBufferAttribute(e),r)for(let o=0,s=r.length;o<s;o++){const l=r[o];SS.setFromBufferAttribute(l),this.morphTargetsRelative?(qo.addVectors(yc.min,SS.min),yc.expandByPoint(qo),qo.addVectors(yc.max,SS.max),yc.expandByPoint(qo)):(yc.expandByPoint(SS.min),yc.expandByPoint(SS.max))}yc.getCenter(i);let a=0;for(let o=0,s=e.count;o<s;o++)qo.fromBufferAttribute(e,o),a=Math.max(a,i.distanceToSquared(qo));if(r)for(let o=0,s=r.length;o<s;o++){const l=r[o],c=this.morphTargetsRelative;for(let u=0,d=l.count;u<d;u++)qo.fromBufferAttribute(l,u),c&&(Z1.fromBufferAttribute(e,u),qo.add(Z1)),a=Math.max(a,i.distanceToSquared(qo))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,r=this.attributes;if(e===null||r.position===void 0||r.normal===void 0||r.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=r.position,a=r.normal,o=r.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new bs(new Float32Array(4*i.count),4));const s=this.getAttribute("tangent"),l=[],c=[];for(let T=0;T<i.count;T++)l[T]=new ge,c[T]=new ge;const u=new ge,d=new ge,f=new ge,h=new Nt,p=new Nt,g=new Nt,m=new ge,v=new ge;function y(T,P,A){u.fromBufferAttribute(i,T),d.fromBufferAttribute(i,P),f.fromBufferAttribute(i,A),h.fromBufferAttribute(o,T),p.fromBufferAttribute(o,P),g.fromBufferAttribute(o,A),d.sub(u),f.sub(u),p.sub(h),g.sub(h);const N=1/(p.x*g.y-g.x*p.y);isFinite(N)&&(m.copy(d).multiplyScalar(g.y).addScaledVector(f,-p.y).multiplyScalar(N),v.copy(f).multiplyScalar(p.x).addScaledVector(d,-g.x).multiplyScalar(N),l[T].add(m),l[P].add(m),l[A].add(m),c[T].add(v),c[P].add(v),c[A].add(v))}let b=this.groups;b.length===0&&(b=[{start:0,count:e.count}]);for(let T=0,P=b.length;T<P;++T){const A=b[T],N=A.start,O=A.count;for(let I=N,D=N+O;I<D;I+=3)y(e.getX(I+0),e.getX(I+1),e.getX(I+2))}const x=new ge,_=new ge,S=new ge,M=new ge;function E(T){S.fromBufferAttribute(a,T),M.copy(S);const P=l[T];x.copy(P),x.sub(S.multiplyScalar(S.dot(P))).normalize(),_.crossVectors(M,P);const N=_.dot(c[T])<0?-1:1;s.setXYZW(T,x.x,x.y,x.z,N)}for(let T=0,P=b.length;T<P;++T){const A=b[T],N=A.start,O=A.count;for(let I=N,D=N+O;I<D;I+=3)E(e.getX(I+0)),E(e.getX(I+1)),E(e.getX(I+2))}}computeVertexNormals(){const e=this.index,r=this.getAttribute("position");if(r!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new bs(new Float32Array(r.count*3),3),this.setAttribute("normal",i);else for(let h=0,p=i.count;h<p;h++)i.setXYZ(h,0,0,0);const a=new ge,o=new ge,s=new ge,l=new ge,c=new ge,u=new ge,d=new ge,f=new ge;if(e)for(let h=0,p=e.count;h<p;h+=3){const g=e.getX(h+0),m=e.getX(h+1),v=e.getX(h+2);a.fromBufferAttribute(r,g),o.fromBufferAttribute(r,m),s.fromBufferAttribute(r,v),d.subVectors(s,o),f.subVectors(a,o),d.cross(f),l.fromBufferAttribute(i,g),c.fromBufferAttribute(i,m),u.fromBufferAttribute(i,v),l.add(d),c.add(d),u.add(d),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(m,c.x,c.y,c.z),i.setXYZ(v,u.x,u.y,u.z)}else for(let h=0,p=r.count;h<p;h+=3)a.fromBufferAttribute(r,h+0),o.fromBufferAttribute(r,h+1),s.fromBufferAttribute(r,h+2),d.subVectors(s,o),f.subVectors(a,o),d.cross(f),i.setXYZ(h+0,d.x,d.y,d.z),i.setXYZ(h+1,d.x,d.y,d.z),i.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let r=0,i=e.count;r<i;r++)qo.fromBufferAttribute(e,r),qo.normalize(),e.setXYZ(r,qo.x,qo.y,qo.z)}toNonIndexed(){function e(l,c){const u=l.array,d=l.itemSize,f=l.normalized,h=new u.constructor(c.length*d);let p=0,g=0;for(let m=0,v=c.length;m<v;m++){l.isInterleavedBufferAttribute?p=c[m]*l.data.stride+l.offset:p=c[m]*d;for(let y=0;y<d;y++)h[g++]=u[p++]}return new bs(h,d,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const r=new Qs,i=this.index.array,a=this.attributes;for(const l in a){const c=a[l],u=e(c,i);r.setAttribute(l,u)}const o=this.morphAttributes;for(const l in o){const c=[],u=o[l];for(let d=0,f=u.length;d<f;d++){const h=u[d],p=e(h,i);c.push(p)}r.morphAttributes[l]=c}r.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let l=0,c=s.length;l<c;l++){const u=s[l];r.addGroup(u.start,u.count,u.materialIndex)}return r}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};const r=this.index;r!==null&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});const i=this.attributes;for(const c in i){const u=i[c];e.data.attributes[c]=u.toJSON(e.data)}const a={};let o=!1;for(const c in this.morphAttributes){const u=this.morphAttributes[c],d=[];for(let f=0,h=u.length;f<h;f++){const p=u[f];d.push(p.toJSON(e.data))}d.length>0&&(a[c]=d,o=!0)}o&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const r={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(r));const a=e.attributes;for(const u in a){const d=a[u];this.setAttribute(u,d.clone(r))}const o=e.morphAttributes;for(const u in o){const d=[],f=o[u];for(let h=0,p=f.length;h<p;h++)d.push(f[h].clone(r));this.morphAttributes[u]=d}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,d=s.length;u<d;u++){const f=s[u];this.addGroup(f.start,f.count,f.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _pe=new jr,jv=new PL,XA=new RL,wpe=new ge,KA=new ge,ZA=new ge,QA=new ge,hz=new ge,JA=new ge,Spe=new ge,eR=new ge;class ko extends Za{constructor(e=new Qs,r=new dw){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const r=this.geometry.morphAttributes,i=Object.keys(r);if(i.length>0){const a=r[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=a.length;o<s;o++){const l=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=o}}}}getVertexPosition(e,r){const i=this.geometry,a=i.attributes.position,o=i.morphAttributes.position,s=i.morphTargetsRelative;r.fromBufferAttribute(a,e);const l=this.morphTargetInfluences;if(o&&l){JA.set(0,0,0);for(let c=0,u=o.length;c<u;c++){const d=l[c],f=o[c];d!==0&&(hz.fromBufferAttribute(f,e),s?JA.addScaledVector(hz,d):JA.addScaledVector(hz.sub(r),d))}r.add(JA)}return r}raycast(e,r){const i=this.geometry,a=this.material,o=this.matrixWorld;a!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),XA.copy(i.boundingSphere),XA.applyMatrix4(o),jv.copy(e.ray).recast(e.near),!(XA.containsPoint(jv.origin)===!1&&(jv.intersectSphere(XA,wpe)===null||jv.origin.distanceToSquared(wpe)>(e.far-e.near)**2))&&(_pe.copy(o).invert(),jv.copy(e.ray).applyMatrix4(_pe),!(i.boundingBox!==null&&jv.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,r,jv)))}_computeIntersections(e,r,i){let a;const o=this.geometry,s=this.material,l=o.index,c=o.attributes.position,u=o.attributes.uv,d=o.attributes.uv1,f=o.attributes.normal,h=o.groups,p=o.drawRange;if(l!==null)if(Array.isArray(s))for(let g=0,m=h.length;g<m;g++){const v=h[g],y=s[v.materialIndex],b=Math.max(v.start,p.start),x=Math.min(l.count,Math.min(v.start+v.count,p.start+p.count));for(let _=b,S=x;_<S;_+=3){const M=l.getX(_),E=l.getX(_+1),T=l.getX(_+2);a=tR(this,y,e,i,u,d,f,M,E,T),a&&(a.faceIndex=Math.floor(_/3),a.face.materialIndex=v.materialIndex,r.push(a))}}else{const g=Math.max(0,p.start),m=Math.min(l.count,p.start+p.count);for(let v=g,y=m;v<y;v+=3){const b=l.getX(v),x=l.getX(v+1),_=l.getX(v+2);a=tR(this,s,e,i,u,d,f,b,x,_),a&&(a.faceIndex=Math.floor(v/3),r.push(a))}}else if(c!==void 0)if(Array.isArray(s))for(let g=0,m=h.length;g<m;g++){const v=h[g],y=s[v.materialIndex],b=Math.max(v.start,p.start),x=Math.min(c.count,Math.min(v.start+v.count,p.start+p.count));for(let _=b,S=x;_<S;_+=3){const M=_,E=_+1,T=_+2;a=tR(this,y,e,i,u,d,f,M,E,T),a&&(a.faceIndex=Math.floor(_/3),a.face.materialIndex=v.materialIndex,r.push(a))}}else{const g=Math.max(0,p.start),m=Math.min(c.count,p.start+p.count);for(let v=g,y=m;v<y;v+=3){const b=v,x=v+1,_=v+2;a=tR(this,s,e,i,u,d,f,b,x,_),a&&(a.faceIndex=Math.floor(v/3),r.push(a))}}}}function cAt(n,e,r,i,a,o,s,l){let c;if(e.side===va?c=i.intersectTriangle(s,o,a,!0,l):c=i.intersectTriangle(a,o,s,e.side===Qd,l),c===null)return null;eR.copy(l),eR.applyMatrix4(n.matrixWorld);const u=r.ray.origin.distanceTo(eR);return u<r.near||u>r.far?null:{distance:u,point:eR.clone(),object:n}}function tR(n,e,r,i,a,o,s,l,c,u){n.getVertexPosition(l,KA),n.getVertexPosition(c,ZA),n.getVertexPosition(u,QA);const d=cAt(n,e,r,i,KA,ZA,QA,Spe);if(d){const f=new ge;Iu.getBarycoord(Spe,KA,ZA,QA,f),a&&(d.uv=Iu.getInterpolatedAttribute(a,l,c,u,f,new Nt)),o&&(d.uv1=Iu.getInterpolatedAttribute(o,l,c,u,f,new Nt)),s&&(d.normal=Iu.getInterpolatedAttribute(s,l,c,u,f,new ge),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const h={a:l,b:c,c:u,normal:new ge,materialIndex:0};Iu.getNormal(KA,ZA,QA,h.normal),d.face=h,d.barycoord=f}return d}class Ky extends Qs{constructor(e=1,r=1,i=1,a=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:r,depth:i,widthSegments:a,heightSegments:o,depthSegments:s};const l=this;a=Math.floor(a),o=Math.floor(o),s=Math.floor(s);const c=[],u=[],d=[],f=[];let h=0,p=0;g("z","y","x",-1,-1,i,r,e,s,o,0),g("z","y","x",1,-1,i,r,-e,s,o,1),g("x","z","y",1,1,e,i,r,a,s,2),g("x","z","y",1,-1,e,i,-r,a,s,3),g("x","y","z",1,-1,e,r,i,a,o,4),g("x","y","z",-1,-1,e,r,-i,a,o,5),this.setIndex(c),this.setAttribute("position",new Qa(u,3)),this.setAttribute("normal",new Qa(d,3)),this.setAttribute("uv",new Qa(f,2));function g(m,v,y,b,x,_,S,M,E,T,P){const A=_/E,N=S/T,O=_/2,I=S/2,D=M/2,k=E+1,$=T+1;let B=0,F=0;const G=new ge;for(let z=0;z<$;z++){const U=z*N-I;for(let H=0;H<k;H++){const X=H*A-O;G[m]=X*b,G[v]=U*x,G[y]=D,u.push(G.x,G.y,G.z),G[m]=0,G[v]=0,G[y]=M>0?1:-1,d.push(G.x,G.y,G.z),f.push(H/E),f.push(1-z/T),B+=1}}for(let z=0;z<T;z++)for(let U=0;U<E;U++){const H=h+U+k*z,X=h+U+k*(z+1),V=h+(U+1)+k*(z+1),W=h+(U+1)+k*z;c.push(H,X,W),c.push(X,V,W),F+=6}l.addGroup(p,F,P),p+=F,h+=B}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ky(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function g_(n){const e={};for(const r in n){e[r]={};for(const i in n[r]){const a=n[r][i];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[r][i]=null):e[r][i]=a.clone():Array.isArray(a)?e[r][i]=a.slice():e[r][i]=a}}return e}function il(n){const e={};for(let r=0;r<n.length;r++){const i=g_(n[r]);for(const a in i)e[a]=i[a]}return e}function uAt(n){const e=[];for(let r=0;r<n.length;r++)e.push(n[r].clone());return e}function oAe(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Mr.workingColorSpace}const sAe={clone:g_,merge:il};var dAt=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fAt=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class oh extends Ks{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=dAt,this.fragmentShader=fAt,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=g_(e.uniforms),this.uniformsGroups=uAt(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const r=super.toJSON(e);r.glslVersion=this.glslVersion,r.uniforms={};for(const a in this.uniforms){const s=this.uniforms[a].value;s&&s.isTexture?r.uniforms[a]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?r.uniforms[a]={type:"c",value:s.getHex()}:s&&s.isVector2?r.uniforms[a]={type:"v2",value:s.toArray()}:s&&s.isVector3?r.uniforms[a]={type:"v3",value:s.toArray()}:s&&s.isVector4?r.uniforms[a]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?r.uniforms[a]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?r.uniforms[a]={type:"m4",value:s.toArray()}:r.uniforms[a]={value:s}}Object.keys(this.defines).length>0&&(r.defines=this.defines),r.vertexShader=this.vertexShader,r.fragmentShader=this.fragmentShader,r.lights=this.lights,r.clipping=this.clipping;const i={};for(const a in this.extensions)this.extensions[a]===!0&&(i[a]=!0);return Object.keys(i).length>0&&(r.extensions=i),r}}class lAe extends Za{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new jr,this.projectionMatrix=new jr,this.projectionMatrixInverse=new jr,this.coordinateSystem=ku}copy(e,r){return super.copy(e,r),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,r){super.updateWorldMatrix(e,r),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Tg=new ge,Epe=new Nt,Cpe=new Nt;class ll extends lAe{constructor(e=50,r=1,i=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=a,this.focus=10,this.aspect=r,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const r=.5*this.getFilmHeight()/e;this.fov=p_*2*Math.atan(r),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Z2*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return p_*2*Math.atan(Math.tan(Z2*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,r,i){Tg.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Tg.x,Tg.y).multiplyScalar(-e/Tg.z),Tg.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Tg.x,Tg.y).multiplyScalar(-e/Tg.z)}getViewSize(e,r){return this.getViewBounds(e,Epe,Cpe),r.subVectors(Cpe,Epe)}setViewOffset(e,r,i,a,o,s){this.aspect=e/r,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=a,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let r=e*Math.tan(Z2*.5*this.fov)/this.zoom,i=2*r,a=this.aspect*i,o=-.5*a;const s=this.view;if(this.view!==null&&this.view.enabled){const c=s.fullWidth,u=s.fullHeight;o+=s.offsetX*a/c,r-=s.offsetY*i/u,a*=s.width/c,i*=s.height/u}const l=this.filmOffset;l!==0&&(o+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+a,r,r-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.fov=this.fov,r.object.zoom=this.zoom,r.object.near=this.near,r.object.far=this.far,r.object.focus=this.focus,r.object.aspect=this.aspect,this.view!==null&&(r.object.view=Object.assign({},this.view)),r.object.filmGauge=this.filmGauge,r.object.filmOffset=this.filmOffset,r}}const Q1=-90,J1=1;class cAe extends Za{constructor(e,r,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new ll(Q1,J1,e,r);a.layers=this.layers,this.add(a);const o=new ll(Q1,J1,e,r);o.layers=this.layers,this.add(o);const s=new ll(Q1,J1,e,r);s.layers=this.layers,this.add(s);const l=new ll(Q1,J1,e,r);l.layers=this.layers,this.add(l);const c=new ll(Q1,J1,e,r);c.layers=this.layers,this.add(c);const u=new ll(Q1,J1,e,r);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,r=this.children.concat(),[i,a,o,s,l,c]=r;for(const u of r)this.remove(u);if(e===ku)i.up.set(0,1,0),i.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Ty)i.up.set(0,-1,0),i.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of r)this.add(u),u.updateMatrixWorld()}update(e,r){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:a}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,s,l,c,u,d]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const m=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,a),e.render(r,o),e.setRenderTarget(i,1,a),e.render(r,s),e.setRenderTarget(i,2,a),e.render(r,l),e.setRenderTarget(i,3,a),e.render(r,c),e.setRenderTarget(i,4,a),e.render(r,u),i.texture.generateMipmaps=m,e.setRenderTarget(i,5,a),e.render(r,d),e.setRenderTarget(f,h,p),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class NL extends ho{constructor(e,r,i,a,o,s,l,c,u,d){e=e!==void 0?e:[],r=r!==void 0?r:qu,super(e,r,i,a,o,s,l,c,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class uAe extends Jm{constructor(e=1,r={}){super(e,e,r),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},a=[i,i,i,i,i,i];this.texture=new NL(a,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Lo}fromEquirectangularTexture(e,r){this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new Ky(5,5,5),o=new oh({name:"CubemapFromEquirect",uniforms:g_(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:va,blending:ml});o.uniforms.tEquirect.value=r;const s=new ko(a,o),l=r.minFilter;return r.minFilter===Yl&&(r.minFilter=Lo),new cAe(1,10,this).update(e,s),r.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}clear(e,r,i,a){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(r,i,a);e.setRenderTarget(o)}}class lZ extends Za{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Hc,this.environmentIntensity=1,this.environmentRotation=new Hc,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,r){return super.copy(e,r),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const r=super.toJSON(e);return this.fog!==null&&(r.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(r.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(r.object.backgroundIntensity=this.backgroundIntensity),r.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(r.object.environmentIntensity=this.environmentIntensity),r.object.environmentRotation=this.environmentRotation.toArray(),r}}class cZ{constructor(e,r){this.isInterleavedBuffer=!0,this.array=e,this.stride=r,this.count=e!==void 0?e.length/r:0,this.usage=DO,this.updateRanges=[],this.version=0,this.uuid=Sp()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,r){this.updateRanges.push({start:e,count:r})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,r,i){e*=this.stride,i*=r.stride;for(let a=0,o=this.stride;a<o;a++)this.array[e+a]=r.array[i+a];return this}set(e,r=0){return this.array.set(e,r),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Sp()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const r=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(r,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Sp()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const rl=new ge;class PC{constructor(e,r,i,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=r,this.offset=i,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let r=0,i=this.data.count;r<i;r++)rl.fromBufferAttribute(this,r),rl.applyMatrix4(e),this.setXYZ(r,rl.x,rl.y,rl.z);return this}applyNormalMatrix(e){for(let r=0,i=this.count;r<i;r++)rl.fromBufferAttribute(this,r),rl.applyNormalMatrix(e),this.setXYZ(r,rl.x,rl.y,rl.z);return this}transformDirection(e){for(let r=0,i=this.count;r<i;r++)rl.fromBufferAttribute(this,r),rl.transformDirection(e),this.setXYZ(r,rl.x,rl.y,rl.z);return this}getComponent(e,r){let i=this.array[e*this.data.stride+this.offset+r];return this.normalized&&(i=fl(i,this.array)),i}setComponent(e,r,i){return this.normalized&&(i=gr(i,this.array)),this.data.array[e*this.data.stride+this.offset+r]=i,this}setX(e,r){return this.normalized&&(r=gr(r,this.array)),this.data.array[e*this.data.stride+this.offset]=r,this}setY(e,r){return this.normalized&&(r=gr(r,this.array)),this.data.array[e*this.data.stride+this.offset+1]=r,this}setZ(e,r){return this.normalized&&(r=gr(r,this.array)),this.data.array[e*this.data.stride+this.offset+2]=r,this}setW(e,r){return this.normalized&&(r=gr(r,this.array)),this.data.array[e*this.data.stride+this.offset+3]=r,this}getX(e){let r=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(r=fl(r,this.array)),r}getY(e){let r=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(r=fl(r,this.array)),r}getZ(e){let r=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(r=fl(r,this.array)),r}getW(e){let r=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(r=fl(r,this.array)),r}setXY(e,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(r=gr(r,this.array),i=gr(i,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=i,this}setXYZ(e,r,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(r=gr(r,this.array),i=gr(i,this.array),a=gr(a,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=i,this.data.array[e+2]=a,this}setXYZW(e,r,i,a,o){return e=e*this.data.stride+this.offset,this.normalized&&(r=gr(r,this.array),i=gr(i,this.array),a=gr(a,this.array),o=gr(o,this.array)),this.data.array[e+0]=r,this.data.array[e+1]=i,this.data.array[e+2]=a,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)r.push(this.data.array[a+o])}return new bs(new this.array.constructor(r),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new PC(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const r=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)r.push(this.data.array[a+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:r,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class OL extends Ks{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Tn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let eb;const ES=new ge,tb=new ge,nb=new ge,rb=new Nt,CS=new Nt,dAe=new jr,nR=new ge,MS=new ge,rR=new ge,Mpe=new Nt,pz=new Nt,Tpe=new Nt;class fAe extends Za{constructor(e=new OL){if(super(),this.isSprite=!0,this.type="Sprite",eb===void 0){eb=new Qs;const r=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new cZ(r,5);eb.setIndex([0,1,2,0,2,3]),eb.setAttribute("position",new PC(i,3,0,!1)),eb.setAttribute("uv",new PC(i,2,3,!1))}this.geometry=eb,this.material=e,this.center=new Nt(.5,.5)}raycast(e,r){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),tb.setFromMatrixScale(this.matrixWorld),dAe.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),nb.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&tb.multiplyScalar(-nb.z);const i=this.material.rotation;let a,o;i!==0&&(o=Math.cos(i),a=Math.sin(i));const s=this.center;iR(nR.set(-.5,-.5,0),nb,s,tb,a,o),iR(MS.set(.5,-.5,0),nb,s,tb,a,o),iR(rR.set(.5,.5,0),nb,s,tb,a,o),Mpe.set(0,0),pz.set(1,0),Tpe.set(1,1);let l=e.ray.intersectTriangle(nR,MS,rR,!1,ES);if(l===null&&(iR(MS.set(-.5,.5,0),nb,s,tb,a,o),pz.set(0,1),l=e.ray.intersectTriangle(nR,rR,MS,!1,ES),l===null))return;const c=e.ray.origin.distanceTo(ES);c<e.near||c>e.far||r.push({distance:c,point:ES.clone(),uv:Iu.getInterpolation(ES,nR,MS,rR,Mpe,pz,Tpe,new Nt),face:null,object:this})}copy(e,r){return super.copy(e,r),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function iR(n,e,r,i,a,o){rb.subVectors(n,r).addScalar(.5).multiply(i),a!==void 0?(CS.x=o*rb.x-a*rb.y,CS.y=a*rb.x+o*rb.y):CS.copy(rb),n.copy(e),n.x+=CS.x,n.y+=CS.y,n.applyMatrix4(dAe)}class hAt extends ho{constructor(e=null,r=1,i=1,a,o,s,l,c,u=na,d=na,f,h){super(null,s,l,c,u,d,a,o,f,h),this.isDataTexture=!0,this.image={data:e,width:r,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class pAt extends bs{constructor(e,r,i,a=1){super(e,r,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const gz=new ge,gAt=new ge,mAt=new Zn;class Pd{constructor(e=new ge(1,0,0),r=0){this.isPlane=!0,this.normal=e,this.constant=r}set(e,r){return this.normal.copy(e),this.constant=r,this}setComponents(e,r,i,a){return this.normal.set(e,r,i),this.constant=a,this}setFromNormalAndCoplanarPoint(e,r){return this.normal.copy(e),this.constant=-r.dot(this.normal),this}setFromCoplanarPoints(e,r,i){const a=gz.subVectors(i,r).cross(gAt.subVectors(e,r)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,r){return r.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,r){const i=e.delta(gz),a=this.normal.dot(i);if(a===0)return this.distanceToPoint(e.start)===0?r.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/a;return o<0||o>1?null:r.copy(e.start).addScaledVector(i,o)}intersectsLine(e){const r=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return r<0&&i>0||i<0&&r>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,r){const i=r||mAt.getNormalMatrix(e),a=this.coplanarPoint(gz).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Hv=new RL,aR=new ge;class IL{constructor(e=new Pd,r=new Pd,i=new Pd,a=new Pd,o=new Pd,s=new Pd){this.planes=[e,r,i,a,o,s]}set(e,r,i,a,o,s){const l=this.planes;return l[0].copy(e),l[1].copy(r),l[2].copy(i),l[3].copy(a),l[4].copy(o),l[5].copy(s),this}copy(e){const r=this.planes;for(let i=0;i<6;i++)r[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,r=ku){const i=this.planes,a=e.elements,o=a[0],s=a[1],l=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],p=a[8],g=a[9],m=a[10],v=a[11],y=a[12],b=a[13],x=a[14],_=a[15];if(i[0].setComponents(c-o,h-u,v-p,_-y).normalize(),i[1].setComponents(c+o,h+u,v+p,_+y).normalize(),i[2].setComponents(c+s,h+d,v+g,_+b).normalize(),i[3].setComponents(c-s,h-d,v-g,_-b).normalize(),i[4].setComponents(c-l,h-f,v-m,_-x).normalize(),r===ku)i[5].setComponents(c+l,h+f,v+m,_+x).normalize();else if(r===Ty)i[5].setComponents(l,f,m,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+r);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Hv.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const r=e.geometry;r.boundingSphere===null&&r.computeBoundingSphere(),Hv.copy(r.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Hv)}intersectsSprite(e){return Hv.center.set(0,0,0),Hv.radius=.7071067811865476,Hv.applyMatrix4(e.matrixWorld),this.intersectsSphere(Hv)}intersectsSphere(e){const r=this.planes,i=e.center,a=-e.radius;for(let o=0;o<6;o++)if(r[o].distanceToPoint(i)<a)return!1;return!0}intersectsBox(e){const r=this.planes;for(let i=0;i<6;i++){const a=r[i];if(aR.x=a.normal.x>0?e.max.x:e.min.x,aR.y=a.normal.y>0?e.max.y:e.min.y,aR.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(aR)<0)return!1}return!0}containsPoint(e){const r=this.planes;for(let i=0;i<6;i++)if(r[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class DL extends Ks{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Tn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const kO=new ge,FO=new ge,Ape=new jr,TS=new PL,oR=new RL,mz=new ge,Rpe=new ge;class vAt extends Za{constructor(e=new Qs,r=new DL){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=r,this.updateMorphTargets()}copy(e,r){return super.copy(e,r),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const r=e.attributes.position,i=[0];for(let a=1,o=r.count;a<o;a++)kO.fromBufferAttribute(r,a-1),FO.fromBufferAttribute(r,a),i[a]=i[a-1],i[a]+=kO.distanceTo(FO);e.setAttribute("lineDistance",new Qa(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,r){const i=this.geometry,a=this.matrixWorld,o=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),oR.copy(i.boundingSphere),oR.applyMatrix4(a),oR.radius+=o,e.ray.intersectsSphere(oR)===!1)return;Ape.copy(a).invert(),TS.copy(e.ray).applyMatrix4(Ape);const l=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=this.isLineSegments?2:1,d=i.index,h=i.attributes.position;if(d!==null){const p=Math.max(0,s.start),g=Math.min(d.count,s.start+s.count);for(let m=p,v=g-1;m<v;m+=u){const y=d.getX(m),b=d.getX(m+1),x=sR(this,e,TS,c,y,b);x&&r.push(x)}if(this.isLineLoop){const m=d.getX(g-1),v=d.getX(p),y=sR(this,e,TS,c,m,v);y&&r.push(y)}}else{const p=Math.max(0,s.start),g=Math.min(h.count,s.start+s.count);for(let m=p,v=g-1;m<v;m+=u){const y=sR(this,e,TS,c,m,m+1);y&&r.push(y)}if(this.isLineLoop){const m=sR(this,e,TS,c,g-1,p);m&&r.push(m)}}}updateMorphTargets(){const r=this.geometry.morphAttributes,i=Object.keys(r);if(i.length>0){const a=r[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=a.length;o<s;o++){const l=a[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=o}}}}}function sR(n,e,r,i,a,o){const s=n.geometry.attributes.position;if(kO.fromBufferAttribute(s,a),FO.fromBufferAttribute(s,o),r.distanceSqToSegment(kO,FO,mz,Rpe)>i)return;mz.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(mz);if(!(c<e.near||c>e.far))return{distance:c,point:Rpe.clone().applyMatrix4(n.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:n}}class yAt extends Ks{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Tn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let jb=class extends Za{constructor(){super(),this.isGroup=!0,this.type="Group"}};class bAt extends ho{constructor(e,r){super({width:e,height:r}),this.isFramebufferTexture=!0,this.magFilter=na,this.minFilter=na,this.generateMipmaps=!1,this.needsUpdate=!0}}class hAe extends ho{constructor(e,r,i,a,o,s,l,c,u){super(e,r,i,a,o,s,l,c,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class vv extends ho{constructor(e,r,i,a,o,s,l,c,u,d=Jf){if(d!==Jf&&d!==ih)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===Jf&&(i=Ca),i===void 0&&d===ih&&(i=rh),super(null,a,o,s,l,c,d,i,u),this.isDepthTexture=!0,this.image={width:e,height:r},this.magFilter=l!==void 0?l:na,this.minFilter=c!==void 0?c:na,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const r=super.toJSON(e);return this.compareFunction!==null&&(r.compareFunction=this.compareFunction),r}}class Zp{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,r){const i=this.getUtoTmapping(e);return this.getPoint(i,r)}getPoints(e=5){const r=[];for(let i=0;i<=e;i++)r.push(this.getPoint(i/e));return r}getSpacedPoints(e=5){const r=[];for(let i=0;i<=e;i++)r.push(this.getPointAt(i/e));return r}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const r=[];let i,a=this.getPoint(0),o=0;r.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),o+=i.distanceTo(a),r.push(o),a=i;return this.cacheArcLengths=r,r}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,r){const i=this.getLengths();let a=0;const o=i.length;let s;r?s=r:s=e*i[o-1];let l=0,c=o-1,u;for(;l<=c;)if(a=Math.floor(l+(c-l)/2),u=i[a]-s,u<0)l=a+1;else if(u>0)c=a-1;else{c=a;break}if(a=c,i[a]===s)return a/(o-1);const d=i[a],h=i[a+1]-d,p=(s-d)/h;return(a+p)/(o-1)}getTangent(e,r){let a=e-1e-4,o=e+1e-4;a<0&&(a=0),o>1&&(o=1);const s=this.getPoint(a),l=this.getPoint(o),c=r||(s.isVector2?new Nt:new ge);return c.copy(l).sub(s).normalize(),c}getTangentAt(e,r){const i=this.getUtoTmapping(e);return this.getTangent(i,r)}computeFrenetFrames(e,r){const i=new ge,a=[],o=[],s=[],l=new ge,c=new jr;for(let p=0;p<=e;p++){const g=p/e;a[p]=this.getTangentAt(g,new ge)}o[0]=new ge,s[0]=new ge;let u=Number.MAX_VALUE;const d=Math.abs(a[0].x),f=Math.abs(a[0].y),h=Math.abs(a[0].z);d<=u&&(u=d,i.set(1,0,0)),f<=u&&(u=f,i.set(0,1,0)),h<=u&&i.set(0,0,1),l.crossVectors(a[0],i).normalize(),o[0].crossVectors(a[0],l),s[0].crossVectors(a[0],o[0]);for(let p=1;p<=e;p++){if(o[p]=o[p-1].clone(),s[p]=s[p-1].clone(),l.crossVectors(a[p-1],a[p]),l.length()>Number.EPSILON){l.normalize();const g=Math.acos(mr(a[p-1].dot(a[p]),-1,1));o[p].applyMatrix4(c.makeRotationAxis(l,g))}s[p].crossVectors(a[p],o[p])}if(r===!0){let p=Math.acos(mr(o[0].dot(o[e]),-1,1));p/=e,a[0].dot(l.crossVectors(o[0],o[e]))>0&&(p=-p);for(let g=1;g<=e;g++)o[g].applyMatrix4(c.makeRotationAxis(a[g],p*g)),s[g].crossVectors(a[g],o[g])}return{tangents:a,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class pAe extends Zp{constructor(e=0,r=0,i=1,a=1,o=0,s=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=r,this.xRadius=i,this.yRadius=a,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=l,this.aRotation=c}getPoint(e,r=new Nt){const i=r,a=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=a;for(;o>a;)o-=a;o<Number.EPSILON&&(s?o=0:o=a),this.aClockwise===!0&&!s&&(o===a?o=-a:o=o-a);const l=this.aStartAngle+e*o;let c=this.aX+this.xRadius*Math.cos(l),u=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const d=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=c-this.aX,p=u-this.aY;c=h*d-p*f+this.aX,u=h*f+p*d+this.aY}return i.set(c,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class xAt extends pAe{constructor(e,r,i,a,o,s){super(e,r,i,i,a,o,s),this.isArcCurve=!0,this.type="ArcCurve"}}function uZ(){let n=0,e=0,r=0,i=0;function a(o,s,l,c){n=o,e=l,r=-3*o+3*s-2*l-c,i=2*o-2*s+l+c}return{initCatmullRom:function(o,s,l,c,u){a(s,l,u*(l-o),u*(c-s))},initNonuniformCatmullRom:function(o,s,l,c,u,d,f){let h=(s-o)/u-(l-o)/(u+d)+(l-s)/d,p=(l-s)/d-(c-s)/(d+f)+(c-l)/f;h*=d,p*=d,a(s,l,h,p)},calc:function(o){const s=o*o,l=s*o;return n+e*o+r*s+i*l}}}const lR=new ge,vz=new uZ,yz=new uZ,bz=new uZ;class _At extends Zp{constructor(e=[],r=!1,i="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=r,this.curveType=i,this.tension=a}getPoint(e,r=new ge){const i=r,a=this.points,o=a.length,s=(o-(this.closed?0:1))*e;let l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/o)+1)*o:c===0&&l===o-1&&(l=o-2,c=1);let u,d;this.closed||l>0?u=a[(l-1)%o]:(lR.subVectors(a[0],a[1]).add(a[0]),u=lR);const f=a[l%o],h=a[(l+1)%o];if(this.closed||l+2<o?d=a[(l+2)%o]:(lR.subVectors(a[o-1],a[o-2]).add(a[o-1]),d=lR),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let g=Math.pow(u.distanceToSquared(f),p),m=Math.pow(f.distanceToSquared(h),p),v=Math.pow(h.distanceToSquared(d),p);m<1e-4&&(m=1),g<1e-4&&(g=m),v<1e-4&&(v=m),vz.initNonuniformCatmullRom(u.x,f.x,h.x,d.x,g,m,v),yz.initNonuniformCatmullRom(u.y,f.y,h.y,d.y,g,m,v),bz.initNonuniformCatmullRom(u.z,f.z,h.z,d.z,g,m,v)}else this.curveType==="catmullrom"&&(vz.initCatmullRom(u.x,f.x,h.x,d.x,this.tension),yz.initCatmullRom(u.y,f.y,h.y,d.y,this.tension),bz.initCatmullRom(u.z,f.z,h.z,d.z,this.tension));return i.set(vz.calc(c),yz.calc(c),bz.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let r=0,i=e.points.length;r<i;r++){const a=e.points[r];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let r=0,i=this.points.length;r<i;r++){const a=this.points[r];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let r=0,i=e.points.length;r<i;r++){const a=e.points[r];this.points.push(new ge().fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Ppe(n,e,r,i,a){const o=(i-e)*.5,s=(a-r)*.5,l=n*n,c=n*l;return(2*r-2*i+o+s)*c+(-3*r+3*i-2*o-s)*l+o*n+r}function wAt(n,e){const r=1-n;return r*r*e}function SAt(n,e){return 2*(1-n)*n*e}function EAt(n,e){return n*n*e}function J2(n,e,r,i){return wAt(n,e)+SAt(n,r)+EAt(n,i)}function CAt(n,e){const r=1-n;return r*r*r*e}function MAt(n,e){const r=1-n;return 3*r*r*n*e}function TAt(n,e){return 3*(1-n)*n*n*e}function AAt(n,e){return n*n*n*e}function eE(n,e,r,i,a){return CAt(n,e)+MAt(n,r)+TAt(n,i)+AAt(n,a)}class RAt extends Zp{constructor(e=new Nt,r=new Nt,i=new Nt,a=new Nt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=r,this.v2=i,this.v3=a}getPoint(e,r=new Nt){const i=r,a=this.v0,o=this.v1,s=this.v2,l=this.v3;return i.set(eE(e,a.x,o.x,s.x,l.x),eE(e,a.y,o.y,s.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class gAe extends Zp{constructor(e=new ge,r=new ge,i=new ge,a=new ge){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=r,this.v2=i,this.v3=a}getPoint(e,r=new ge){const i=r,a=this.v0,o=this.v1,s=this.v2,l=this.v3;return i.set(eE(e,a.x,o.x,s.x,l.x),eE(e,a.y,o.y,s.y,l.y),eE(e,a.z,o.z,s.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class PAt extends Zp{constructor(e=new Nt,r=new Nt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=r}getPoint(e,r=new Nt){const i=r;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,r){return this.getPoint(e,r)}getTangent(e,r=new Nt){return r.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,r){return this.getTangent(e,r)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class NAt extends Zp{constructor(e=new ge,r=new ge){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=r}getPoint(e,r=new ge){const i=r;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,r){return this.getPoint(e,r)}getTangent(e,r=new ge){return r.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,r){return this.getTangent(e,r)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class OAt extends Zp{constructor(e=new Nt,r=new Nt,i=new Nt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=r,this.v2=i}getPoint(e,r=new Nt){const i=r,a=this.v0,o=this.v1,s=this.v2;return i.set(J2(e,a.x,o.x,s.x),J2(e,a.y,o.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class dZ extends Zp{constructor(e=new ge,r=new ge,i=new ge){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=r,this.v2=i}getPoint(e,r=new ge){const i=r,a=this.v0,o=this.v1,s=this.v2;return i.set(J2(e,a.x,o.x,s.x),J2(e,a.y,o.y,s.y),J2(e,a.z,o.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class IAt extends Zp{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,r=new Nt){const i=r,a=this.points,o=(a.length-1)*e,s=Math.floor(o),l=o-s,c=a[s===0?s:s-1],u=a[s],d=a[s>a.length-2?a.length-1:s+1],f=a[s>a.length-3?a.length-1:s+2];return i.set(Ppe(l,c.x,u.x,d.x,f.x),Ppe(l,c.y,u.y,d.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let r=0,i=e.points.length;r<i;r++){const a=e.points[r];this.points.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let r=0,i=this.points.length;r<i;r++){const a=this.points[r];e.points.push(a.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let r=0,i=e.points.length;r<i;r++){const a=e.points[r];this.points.push(new Nt().fromArray(a))}return this}}var DAt=Object.freeze({__proto__:null,ArcCurve:xAt,CatmullRomCurve3:_At,CubicBezierCurve:RAt,CubicBezierCurve3:gAe,EllipseCurve:pAe,LineCurve:PAt,LineCurve3:NAt,QuadraticBezierCurve:OAt,QuadraticBezierCurve3:dZ,SplineCurve:IAt});class LL extends Qs{constructor(e=1,r=1,i=1,a=32,o=1,s=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:r,height:i,radialSegments:a,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:c};const u=this;a=Math.floor(a),o=Math.floor(o);const d=[],f=[],h=[],p=[];let g=0;const m=[],v=i/2;let y=0;b(),s===!1&&(e>0&&x(!0),r>0&&x(!1)),this.setIndex(d),this.setAttribute("position",new Qa(f,3)),this.setAttribute("normal",new Qa(h,3)),this.setAttribute("uv",new Qa(p,2));function b(){const _=new ge,S=new ge;let M=0;const E=(r-e)/i;for(let T=0;T<=o;T++){const P=[],A=T/o,N=A*(r-e)+e;for(let O=0;O<=a;O++){const I=O/a,D=I*c+l,k=Math.sin(D),$=Math.cos(D);S.x=N*k,S.y=-A*i+v,S.z=N*$,f.push(S.x,S.y,S.z),_.set(k,E,$).normalize(),h.push(_.x,_.y,_.z),p.push(I,1-A),P.push(g++)}m.push(P)}for(let T=0;T<a;T++)for(let P=0;P<o;P++){const A=m[P][T],N=m[P+1][T],O=m[P+1][T+1],I=m[P][T+1];(e>0||P!==0)&&(d.push(A,N,I),M+=3),(r>0||P!==o-1)&&(d.push(N,O,I),M+=3)}u.addGroup(y,M,0),y+=M}function x(_){const S=g,M=new Nt,E=new ge;let T=0;const P=_===!0?e:r,A=_===!0?1:-1;for(let O=1;O<=a;O++)f.push(0,v*A,0),h.push(0,A,0),p.push(.5,.5),g++;const N=g;for(let O=0;O<=a;O++){const D=O/a*c+l,k=Math.cos(D),$=Math.sin(D);E.x=P*$,E.y=v*A,E.z=P*k,f.push(E.x,E.y,E.z),h.push(0,A,0),M.x=k*.5+.5,M.y=$*.5*A+.5,p.push(M.x,M.y),g++}for(let O=0;O<a;O++){const I=S+O,D=N+O;_===!0?d.push(D,D+1,I):d.push(D+1,D,I),T+=3}u.addGroup(y,T,_===!0?1:2),y+=T}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new LL(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class fZ extends LL{constructor(e=1,r=1,i=32,a=1,o=!1,s=0,l=Math.PI*2){super(0,e,r,i,a,o,s,l),this.type="ConeGeometry",this.parameters={radius:e,height:r,radialSegments:i,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:l}}static fromJSON(e){return new fZ(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class kL extends Qs{constructor(e=1,r=1,i=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:r,widthSegments:i,heightSegments:a};const o=e/2,s=r/2,l=Math.floor(i),c=Math.floor(a),u=l+1,d=c+1,f=e/l,h=r/c,p=[],g=[],m=[],v=[];for(let y=0;y<d;y++){const b=y*h-s;for(let x=0;x<u;x++){const _=x*f-o;g.push(_,-b,0),m.push(0,0,1),v.push(x/l),v.push(1-y/c)}}for(let y=0;y<c;y++)for(let b=0;b<l;b++){const x=b+u*y,_=b+u*(y+1),S=b+1+u*(y+1),M=b+1+u*y;p.push(x,_,M),p.push(_,S,M)}this.setIndex(p),this.setAttribute("position",new Qa(g,3)),this.setAttribute("normal",new Qa(m,3)),this.setAttribute("uv",new Qa(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kL(e.width,e.height,e.widthSegments,e.heightSegments)}}class fw extends Qs{constructor(e=1,r=32,i=16,a=0,o=Math.PI*2,s=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:r,heightSegments:i,phiStart:a,phiLength:o,thetaStart:s,thetaLength:l},r=Math.max(3,Math.floor(r)),i=Math.max(2,Math.floor(i));const c=Math.min(s+l,Math.PI);let u=0;const d=[],f=new ge,h=new ge,p=[],g=[],m=[],v=[];for(let y=0;y<=i;y++){const b=[],x=y/i;let _=0;y===0&&s===0?_=.5/r:y===i&&c===Math.PI&&(_=-.5/r);for(let S=0;S<=r;S++){const M=S/r;f.x=-e*Math.cos(a+M*o)*Math.sin(s+x*l),f.y=e*Math.cos(s+x*l),f.z=e*Math.sin(a+M*o)*Math.sin(s+x*l),g.push(f.x,f.y,f.z),h.copy(f).normalize(),m.push(h.x,h.y,h.z),v.push(M+_,1-x),b.push(u++)}d.push(b)}for(let y=0;y<i;y++)for(let b=0;b<r;b++){const x=d[y][b+1],_=d[y][b],S=d[y+1][b],M=d[y+1][b+1];(y!==0||s>0)&&p.push(x,_,M),(y!==i-1||c<Math.PI)&&p.push(_,S,M)}this.setIndex(p),this.setAttribute("position",new Qa(g,3)),this.setAttribute("normal",new Qa(m,3)),this.setAttribute("uv",new Qa(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fw(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class hZ extends Qs{constructor(e=new dZ(new ge(-1,-1,0),new ge(-1,1,0),new ge(1,1,0)),r=64,i=1,a=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:r,radius:i,radialSegments:a,closed:o};const s=e.computeFrenetFrames(r,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const l=new ge,c=new ge,u=new Nt;let d=new ge;const f=[],h=[],p=[],g=[];m(),this.setIndex(g),this.setAttribute("position",new Qa(f,3)),this.setAttribute("normal",new Qa(h,3)),this.setAttribute("uv",new Qa(p,2));function m(){for(let x=0;x<r;x++)v(x);v(o===!1?r:0),b(),y()}function v(x){d=e.getPointAt(x/r,d);const _=s.normals[x],S=s.binormals[x];for(let M=0;M<=a;M++){const E=M/a*Math.PI*2,T=Math.sin(E),P=-Math.cos(E);c.x=P*_.x+T*S.x,c.y=P*_.y+T*S.y,c.z=P*_.z+T*S.z,c.normalize(),h.push(c.x,c.y,c.z),l.x=d.x+i*c.x,l.y=d.y+i*c.y,l.z=d.z+i*c.z,f.push(l.x,l.y,l.z)}}function y(){for(let x=1;x<=r;x++)for(let _=1;_<=a;_++){const S=(a+1)*(x-1)+(_-1),M=(a+1)*x+(_-1),E=(a+1)*x+_,T=(a+1)*(x-1)+_;g.push(S,M,T),g.push(M,E,T)}}function b(){for(let x=0;x<=r;x++)for(let _=0;_<=a;_++)u.x=x/r,u.y=_/a,p.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new hZ(new DAt[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class LAt extends Ks{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Tn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class mAe extends Ks{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Tn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bp,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Hc,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kAt extends mAe{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Nt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return mr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(r){this.ior=(1+.4*r)/(1-.4*r)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Tn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Tn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Tn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class FAt extends Ks{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Tn(16777215),this.specular=new Tn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bp,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Hc,this.combine=jM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class $At extends Ks{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Tn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bp,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class BAt extends Ks{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bp,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class vAe extends Ks{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Tn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Tn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bp,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Hc,this.combine=jM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zAt extends Ks{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=h3t,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class UAt extends Ks{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class VAt extends Ks{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Tn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Bp,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class GAt extends DL{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}const Npe={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class jAt{constructor(e,r,i){const a=this;let o=!1,s=0,l=0,c;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=r,this.onError=i,this.itemStart=function(d){l++,o===!1&&a.onStart!==void 0&&a.onStart(d,s,l),o=!0},this.itemEnd=function(d){s++,a.onProgress!==void 0&&a.onProgress(d,s,l),s===l&&(o=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(d){a.onError!==void 0&&a.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,f){return u.push(d,f),this},this.removeHandler=function(d){const f=u.indexOf(d);return f!==-1&&u.splice(f,2),this},this.getHandler=function(d){for(let f=0,h=u.length;f<h;f+=2){const p=u[f],g=u[f+1];if(p.global&&(p.lastIndex=0),p.test(d))return g}return null}}}const HAt=new jAt;class pZ{constructor(e){this.manager=e!==void 0?e:HAt,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,r){const i=this;return new Promise(function(a,o){i.load(e,a,r,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}pZ.DEFAULT_MATERIAL_NAME="__DEFAULT";class WAt extends pZ{constructor(e){super(e)}load(e,r,i,a){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Npe.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){r&&r(s),o.manager.itemEnd(e)},0),s;const l=RC("img");function c(){d(),Npe.add(e,this),r&&r(this),o.manager.itemEnd(e)}function u(f){d(),a&&a(f),o.manager.itemError(e),o.manager.itemEnd(e)}function d(){l.removeEventListener("load",c,!1),l.removeEventListener("error",u,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),o.manager.itemStart(e),l.src=e,l}}class qAt extends pZ{constructor(e){super(e)}load(e,r,i,a){const o=new ho,s=new WAt(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(l){o.image=l,o.needsUpdate=!0,r!==void 0&&r(o)},i,a),o}}class Zy extends Za{constructor(e,r=1){super(),this.isLight=!0,this.type="Light",this.color=new Tn(e),this.intensity=r}dispose(){}copy(e,r){return super.copy(e,r),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const r=super.toJSON(e);return r.object.color=this.color.getHex(),r.object.intensity=this.intensity,this.groundColor!==void 0&&(r.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(r.object.distance=this.distance),this.angle!==void 0&&(r.object.angle=this.angle),this.decay!==void 0&&(r.object.decay=this.decay),this.penumbra!==void 0&&(r.object.penumbra=this.penumbra),this.shadow!==void 0&&(r.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(r.object.target=this.target.uuid),r}}class YAt extends Zy{constructor(e,r,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Za.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Tn(r)}copy(e,r){return super.copy(e,r),this.groundColor.copy(e.groundColor),this}}const xz=new jr,Ope=new ge,Ipe=new ge;class gZ{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Nt(512,512),this.map=null,this.mapPass=null,this.matrix=new jr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new IL,this._frameExtents=new Nt(1,1),this._viewportCount=1,this._viewports=[new sr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const r=this.camera,i=this.matrix;Ope.setFromMatrixPosition(e.matrixWorld),r.position.copy(Ope),Ipe.setFromMatrixPosition(e.target.matrixWorld),r.lookAt(Ipe),r.updateMatrixWorld(),xz.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(xz),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(xz)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class XAt extends gZ{constructor(){super(new ll(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const r=this.camera,i=p_*2*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height,o=e.distance||r.far;(i!==r.fov||a!==r.aspect||o!==r.far)&&(r.fov=i,r.aspect=a,r.far=o,r.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class yAe extends Zy{constructor(e,r,i=0,a=Math.PI/3,o=0,s=2){super(e,r),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Za.DEFAULT_UP),this.updateMatrix(),this.target=new Za,this.distance=i,this.angle=a,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new XAt}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,r){return super.copy(e,r),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Dpe=new jr,AS=new ge,_z=new ge;class KAt extends gZ{constructor(){super(new ll(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Nt(4,2),this._viewportCount=6,this._viewports=[new sr(2,1,1,1),new sr(0,1,1,1),new sr(3,1,1,1),new sr(1,1,1,1),new sr(3,0,1,1),new sr(1,0,1,1)],this._cubeDirections=[new ge(1,0,0),new ge(-1,0,0),new ge(0,0,1),new ge(0,0,-1),new ge(0,1,0),new ge(0,-1,0)],this._cubeUps=[new ge(0,1,0),new ge(0,1,0),new ge(0,1,0),new ge(0,1,0),new ge(0,0,1),new ge(0,0,-1)]}updateMatrices(e,r=0){const i=this.camera,a=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),AS.setFromMatrixPosition(e.matrixWorld),i.position.copy(AS),_z.copy(i.position),_z.add(this._cubeDirections[r]),i.up.copy(this._cubeUps[r]),i.lookAt(_z),i.updateMatrixWorld(),a.makeTranslation(-AS.x,-AS.y,-AS.z),Dpe.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Dpe)}}class ZAt extends Zy{constructor(e,r,i=0,a=2){super(e,r),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=a,this.shadow=new KAt}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,r){return super.copy(e,r),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class qM extends lAe{constructor(e=-1,r=1,i=1,a=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=r,this.top=i,this.bottom=a,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,r){return super.copy(e,r),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,r,i,a,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=a,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),r=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let o=i-e,s=i+e,l=a+r,c=a-r;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,s=o+u*this.view.width,l-=d*this.view.offsetY,c=l-d*this.view.height}this.projectionMatrix.makeOrthographic(o,s,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const r=super.toJSON(e);return r.object.zoom=this.zoom,r.object.left=this.left,r.object.right=this.right,r.object.top=this.top,r.object.bottom=this.bottom,r.object.near=this.near,r.object.far=this.far,this.view!==null&&(r.object.view=Object.assign({},this.view)),r}}class QAt extends gZ{constructor(){super(new qM(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class bAe extends Zy{constructor(e,r){super(e,r),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Za.DEFAULT_UP),this.updateMatrix(),this.target=new Za,this.shadow=new QAt}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class xAe extends Zy{constructor(e,r){super(e,r),this.isAmbientLight=!0,this.type="AmbientLight"}}class JAt extends Zy{constructor(e,r,i=10,a=10){super(e,r),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const r=super.toJSON(e);return r.object.width=this.width,r.object.height=this.height,r}}class eRt{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ge)}set(e){for(let r=0;r<9;r++)this.coefficients[r].copy(e[r]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,r){const i=e.x,a=e.y,o=e.z,s=this.coefficients;return r.copy(s[0]).multiplyScalar(.282095),r.addScaledVector(s[1],.488603*a),r.addScaledVector(s[2],.488603*o),r.addScaledVector(s[3],.488603*i),r.addScaledVector(s[4],1.092548*(i*a)),r.addScaledVector(s[5],1.092548*(a*o)),r.addScaledVector(s[6],.315392*(3*o*o-1)),r.addScaledVector(s[7],1.092548*(i*o)),r.addScaledVector(s[8],.546274*(i*i-a*a)),r}getIrradianceAt(e,r){const i=e.x,a=e.y,o=e.z,s=this.coefficients;return r.copy(s[0]).multiplyScalar(.886227),r.addScaledVector(s[1],2*.511664*a),r.addScaledVector(s[2],2*.511664*o),r.addScaledVector(s[3],2*.511664*i),r.addScaledVector(s[4],2*.429043*i*a),r.addScaledVector(s[5],2*.429043*a*o),r.addScaledVector(s[6],.743125*o*o-.247708),r.addScaledVector(s[7],2*.429043*i*o),r.addScaledVector(s[8],.429043*(i*i-a*a)),r}add(e){for(let r=0;r<9;r++)this.coefficients[r].add(e.coefficients[r]);return this}addScaledSH(e,r){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],r);return this}scale(e){for(let r=0;r<9;r++)this.coefficients[r].multiplyScalar(e);return this}lerp(e,r){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],r);return this}equals(e){for(let r=0;r<9;r++)if(!this.coefficients[r].equals(e.coefficients[r]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,r=0){const i=this.coefficients;for(let a=0;a<9;a++)i[a].fromArray(e,r+a*3);return this}toArray(e=[],r=0){const i=this.coefficients;for(let a=0;a<9;a++)i[a].toArray(e,r+a*3);return e}static getBasisAt(e,r){const i=e.x,a=e.y,o=e.z;r[0]=.282095,r[1]=.488603*a,r[2]=.488603*o,r[3]=.488603*i,r[4]=1.092548*i*a,r[5]=1.092548*a*o,r[6]=.315392*(3*o*o-1),r[7]=1.092548*i*o,r[8]=.546274*(i*i-a*a)}}class tRt extends Zy{constructor(e=new eRt,r=1){super(void 0,r),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const r=super.toJSON(e);return r.object.sh=this.sh.toArray(),r}}class nRt extends ll{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class _Ae{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Lpe(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const r=Lpe();e=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=e}return e}}function Lpe(){return performance.now()}class rRt extends cZ{constructor(e,r,i=1){super(e,r),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const r=super.clone(e);return r.meshPerAttribute=this.meshPerAttribute,r}toJSON(e){const r=super.toJSON(e);return r.isInstancedInterleavedBuffer=!0,r.meshPerAttribute=this.meshPerAttribute,r}}const kpe=new jr;class wAe{constructor(e,r,i=0,a=1/0){this.ray=new PL(e,r),this.near=i,this.far=a,this.camera=null,this.layers=new aZ,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,r){this.ray.set(e,r)}setFromCamera(e,r){r.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(r.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(r).sub(this.ray.origin).normalize(),this.camera=r):r.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(r.near+r.far)/(r.near-r.far)).unproject(r),this.ray.direction.set(0,0,-1).transformDirection(r.matrixWorld),this.camera=r):console.error("THREE.Raycaster: Unsupported camera type: "+r.type)}setFromXRController(e){return kpe.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(kpe),this}intersectObject(e,r=!0,i=[]){return OH(e,this,i,r),i.sort(Fpe),i}intersectObjects(e,r=!0,i=[]){for(let a=0,o=e.length;a<o;a++)OH(e[a],this,i,r);return i.sort(Fpe),i}}function Fpe(n,e){return n.distance-e.distance}function OH(n,e,r,i){let a=!0;if(n.layers.test(e.layers)&&n.raycast(e,r)===!1&&(a=!1),a===!0&&i===!0){const o=n.children;for(let s=0,l=o.length;s<l;s++)OH(o[s],e,r,!0)}}class $pe{constructor(e=1,r=0,i=0){return this.radius=e,this.phi=r,this.theta=i,this}set(e,r,i){return this.radius=e,this.phi=r,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=mr(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,r,i){return this.radius=Math.sqrt(e*e+r*r+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(mr(r/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class FL extends mv{constructor(e,r=null){super(),this.object=e,this.domElement=r,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function Bpe(n,e,r,i){const a=iRt(i);switch(r){case qK:return n*e;case YK:return n*e;case XK:return n*e*2;case WM:return n*e/a.components*a.byteLength;case sw:return n*e/a.components*a.byteLength;case My:return n*e*2/a.components*a.byteLength;case lw:return n*e*2/a.components*a.byteLength;case HM:return n*e*3/a.components*a.byteLength;case vs:return n*e*4/a.components*a.byteLength;case cw:return n*e*4/a.components*a.byteLength;case X0:case Rm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Pm:case Nm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case wC:case EC:return Math.max(n,16)*Math.max(e,8)/4;case _C:case SC:return Math.max(n,8)*Math.max(e,8)/2;case CC:case Qx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Jx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case e_:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case t_:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case n_:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case r_:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case i_:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case a_:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case o_:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case s_:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case l_:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case c_:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case u_:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case d_:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case f_:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case h_:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case K0:case RH:case PH:return Math.ceil(n/4)*Math.ceil(e/4)*16;case KK:case MC:return Math.ceil(n/4)*Math.ceil(e/4)*8;case TC:case AC:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${r} format.`)}function iRt(n){switch(n){case Ws:case q0:return{byteLength:1,components:1};case Bd:case Y0:case vl:return{byteLength:2,components:1};case EL:case CL:return{byteLength:2,components:4};case Ca:case Zo:case Ka:return{byteLength:4,components:1};case ML:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ow}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ow);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function SAe(){let n=null,e=!1,r=null,i=null;function a(o,s){r(o,s),i=n.requestAnimationFrame(a)}return{start:function(){e!==!0&&r!==null&&(i=n.requestAnimationFrame(a),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){r=o},setContext:function(o){n=o}}}function aRt(n){const e=new WeakMap;function r(l,c){const u=l.array,d=l.usage,f=u.byteLength,h=n.createBuffer();n.bindBuffer(c,h),n.bufferData(c,u,d),l.onUploadCallback();let p;if(u instanceof Float32Array)p=n.FLOAT;else if(u instanceof Uint16Array)l.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)p=n.SHORT;else if(u instanceof Uint32Array)p=n.UNSIGNED_INT;else if(u instanceof Int32Array)p=n.INT;else if(u instanceof Int8Array)p=n.BYTE;else if(u instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:h,type:p,bytesPerElement:u.BYTES_PER_ELEMENT,version:l.version,size:f}}function i(l,c,u){const d=c.array,f=c.updateRanges;if(n.bindBuffer(u,l),f.length===0)n.bufferSubData(u,0,d);else{f.sort((p,g)=>p.start-g.start);let h=0;for(let p=1;p<f.length;p++){const g=f[h],m=f[p];m.start<=g.start+g.count+1?g.count=Math.max(g.count,m.start+m.count-g.start):(++h,f[h]=m)}f.length=h+1;for(let p=0,g=f.length;p<g;p++){const m=f[p];n.bufferSubData(u,m.start*d.BYTES_PER_ELEMENT,d,m.start,m.count)}c.clearUpdateRanges()}c.onUploadCallback()}function a(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function o(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(n.deleteBuffer(c.buffer),e.delete(l))}function s(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const d=e.get(l);(!d||d.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const u=e.get(l);if(u===void 0)e.set(l,r(l,c));else if(u.version<l.version){if(u.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,l,c),u.version=l.version}}return{get:a,remove:o,update:s}}var oRt=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,sRt=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,lRt=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,cRt=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,uRt=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,dRt=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,fRt=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,hRt=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,pRt=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,gRt=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,mRt=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,vRt=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,yRt=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,bRt=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,xRt=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,_Rt=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,wRt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,SRt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ERt=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,CRt=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,MRt=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,TRt=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,ARt=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,RRt=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,PRt=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,NRt=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ORt=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,IRt=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,DRt=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,LRt=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,kRt="gl_FragColor = linearToOutputTexel( gl_FragColor );",FRt=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,$Rt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,BRt=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,zRt=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,URt=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,VRt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,GRt=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,jRt=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,HRt=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,WRt=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,qRt=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,YRt=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,XRt=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,KRt=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,ZRt=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,QRt=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,JRt=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,ePt=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,tPt=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,nPt=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,rPt=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,iPt=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,aPt=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,oPt=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,sPt=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,lPt=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,cPt=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,uPt=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,dPt=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,fPt=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,hPt=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,pPt=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,gPt=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,mPt=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,vPt=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,yPt=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,bPt=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,xPt=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,_Pt=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,wPt=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,SPt=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,EPt=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,CPt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,MPt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,TPt=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,APt=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,RPt=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,PPt=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,NPt=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,OPt=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,IPt=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,DPt=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,LPt=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,kPt=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,FPt=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,$Pt=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,BPt=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,zPt=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,UPt=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,VPt=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,GPt=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,jPt=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,HPt=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,WPt=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,qPt=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,YPt=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,XPt=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,KPt=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,ZPt=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,QPt=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,JPt=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,eNt=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,tNt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,nNt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,rNt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,iNt=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const aNt=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,oNt=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,sNt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,lNt=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cNt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,uNt=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dNt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fNt=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,hNt=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,pNt=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,gNt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,mNt=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vNt=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,yNt=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,bNt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,xNt=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_Nt=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wNt=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SNt=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,ENt=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CNt=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,MNt=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,TNt=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ANt=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,RNt=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,PNt=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NNt=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ONt=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,INt=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,DNt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,LNt=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kNt=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,FNt=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,$Nt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Er={alphahash_fragment:oRt,alphahash_pars_fragment:sRt,alphamap_fragment:lRt,alphamap_pars_fragment:cRt,alphatest_fragment:uRt,alphatest_pars_fragment:dRt,aomap_fragment:fRt,aomap_pars_fragment:hRt,batching_pars_vertex:pRt,batching_vertex:gRt,begin_vertex:mRt,beginnormal_vertex:vRt,bsdfs:yRt,iridescence_fragment:bRt,bumpmap_pars_fragment:xRt,clipping_planes_fragment:_Rt,clipping_planes_pars_fragment:wRt,clipping_planes_pars_vertex:SRt,clipping_planes_vertex:ERt,color_fragment:CRt,color_pars_fragment:MRt,color_pars_vertex:TRt,color_vertex:ARt,common:RRt,cube_uv_reflection_fragment:PRt,defaultnormal_vertex:NRt,displacementmap_pars_vertex:ORt,displacementmap_vertex:IRt,emissivemap_fragment:DRt,emissivemap_pars_fragment:LRt,colorspace_fragment:kRt,colorspace_pars_fragment:FRt,envmap_fragment:$Rt,envmap_common_pars_fragment:BRt,envmap_pars_fragment:zRt,envmap_pars_vertex:URt,envmap_physical_pars_fragment:QRt,envmap_vertex:VRt,fog_vertex:GRt,fog_pars_vertex:jRt,fog_fragment:HRt,fog_pars_fragment:WRt,gradientmap_pars_fragment:qRt,lightmap_pars_fragment:YRt,lights_lambert_fragment:XRt,lights_lambert_pars_fragment:KRt,lights_pars_begin:ZRt,lights_toon_fragment:JRt,lights_toon_pars_fragment:ePt,lights_phong_fragment:tPt,lights_phong_pars_fragment:nPt,lights_physical_fragment:rPt,lights_physical_pars_fragment:iPt,lights_fragment_begin:aPt,lights_fragment_maps:oPt,lights_fragment_end:sPt,logdepthbuf_fragment:lPt,logdepthbuf_pars_fragment:cPt,logdepthbuf_pars_vertex:uPt,logdepthbuf_vertex:dPt,map_fragment:fPt,map_pars_fragment:hPt,map_particle_fragment:pPt,map_particle_pars_fragment:gPt,metalnessmap_fragment:mPt,metalnessmap_pars_fragment:vPt,morphinstance_vertex:yPt,morphcolor_vertex:bPt,morphnormal_vertex:xPt,morphtarget_pars_vertex:_Pt,morphtarget_vertex:wPt,normal_fragment_begin:SPt,normal_fragment_maps:EPt,normal_pars_fragment:CPt,normal_pars_vertex:MPt,normal_vertex:TPt,normalmap_pars_fragment:APt,clearcoat_normal_fragment_begin:RPt,clearcoat_normal_fragment_maps:PPt,clearcoat_pars_fragment:NPt,iridescence_pars_fragment:OPt,opaque_fragment:IPt,packing:DPt,premultiplied_alpha_fragment:LPt,project_vertex:kPt,dithering_fragment:FPt,dithering_pars_fragment:$Pt,roughnessmap_fragment:BPt,roughnessmap_pars_fragment:zPt,shadowmap_pars_fragment:UPt,shadowmap_pars_vertex:VPt,shadowmap_vertex:GPt,shadowmask_pars_fragment:jPt,skinbase_vertex:HPt,skinning_pars_vertex:WPt,skinning_vertex:qPt,skinnormal_vertex:YPt,specularmap_fragment:XPt,specularmap_pars_fragment:KPt,tonemapping_fragment:ZPt,tonemapping_pars_fragment:QPt,transmission_fragment:JPt,transmission_pars_fragment:eNt,uv_pars_fragment:tNt,uv_pars_vertex:nNt,uv_vertex:rNt,worldpos_vertex:iNt,background_vert:aNt,background_frag:oNt,backgroundCube_vert:sNt,backgroundCube_frag:lNt,cube_vert:cNt,cube_frag:uNt,depth_vert:dNt,depth_frag:fNt,distanceRGBA_vert:hNt,distanceRGBA_frag:pNt,equirect_vert:gNt,equirect_frag:mNt,linedashed_vert:vNt,linedashed_frag:yNt,meshbasic_vert:bNt,meshbasic_frag:xNt,meshlambert_vert:_Nt,meshlambert_frag:wNt,meshmatcap_vert:SNt,meshmatcap_frag:ENt,meshnormal_vert:CNt,meshnormal_frag:MNt,meshphong_vert:TNt,meshphong_frag:ANt,meshphysical_vert:RNt,meshphysical_frag:PNt,meshtoon_vert:NNt,meshtoon_frag:ONt,points_vert:INt,points_frag:DNt,shadow_vert:LNt,shadow_frag:kNt,sprite_vert:FNt,sprite_frag:$Nt},ln={common:{diffuse:{value:new Tn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Zn},alphaMap:{value:null},alphaMapTransform:{value:new Zn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Zn}},envmap:{envMap:{value:null},envMapRotation:{value:new Zn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Zn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Zn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Zn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Zn},normalScale:{value:new Nt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Zn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Zn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Zn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Zn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Tn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Tn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Zn},alphaTest:{value:0},uvTransform:{value:new Zn}},sprite:{diffuse:{value:new Tn(16777215)},opacity:{value:1},center:{value:new Nt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Zn},alphaMap:{value:null},alphaMapTransform:{value:new Zn},alphaTest:{value:0}}},Nf={basic:{uniforms:il([ln.common,ln.specularmap,ln.envmap,ln.aomap,ln.lightmap,ln.fog]),vertexShader:Er.meshbasic_vert,fragmentShader:Er.meshbasic_frag},lambert:{uniforms:il([ln.common,ln.specularmap,ln.envmap,ln.aomap,ln.lightmap,ln.emissivemap,ln.bumpmap,ln.normalmap,ln.displacementmap,ln.fog,ln.lights,{emissive:{value:new Tn(0)}}]),vertexShader:Er.meshlambert_vert,fragmentShader:Er.meshlambert_frag},phong:{uniforms:il([ln.common,ln.specularmap,ln.envmap,ln.aomap,ln.lightmap,ln.emissivemap,ln.bumpmap,ln.normalmap,ln.displacementmap,ln.fog,ln.lights,{emissive:{value:new Tn(0)},specular:{value:new Tn(1118481)},shininess:{value:30}}]),vertexShader:Er.meshphong_vert,fragmentShader:Er.meshphong_frag},standard:{uniforms:il([ln.common,ln.envmap,ln.aomap,ln.lightmap,ln.emissivemap,ln.bumpmap,ln.normalmap,ln.displacementmap,ln.roughnessmap,ln.metalnessmap,ln.fog,ln.lights,{emissive:{value:new Tn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Er.meshphysical_vert,fragmentShader:Er.meshphysical_frag},toon:{uniforms:il([ln.common,ln.aomap,ln.lightmap,ln.emissivemap,ln.bumpmap,ln.normalmap,ln.displacementmap,ln.gradientmap,ln.fog,ln.lights,{emissive:{value:new Tn(0)}}]),vertexShader:Er.meshtoon_vert,fragmentShader:Er.meshtoon_frag},matcap:{uniforms:il([ln.common,ln.bumpmap,ln.normalmap,ln.displacementmap,ln.fog,{matcap:{value:null}}]),vertexShader:Er.meshmatcap_vert,fragmentShader:Er.meshmatcap_frag},points:{uniforms:il([ln.points,ln.fog]),vertexShader:Er.points_vert,fragmentShader:Er.points_frag},dashed:{uniforms:il([ln.common,ln.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Er.linedashed_vert,fragmentShader:Er.linedashed_frag},depth:{uniforms:il([ln.common,ln.displacementmap]),vertexShader:Er.depth_vert,fragmentShader:Er.depth_frag},normal:{uniforms:il([ln.common,ln.bumpmap,ln.normalmap,ln.displacementmap,{opacity:{value:1}}]),vertexShader:Er.meshnormal_vert,fragmentShader:Er.meshnormal_frag},sprite:{uniforms:il([ln.sprite,ln.fog]),vertexShader:Er.sprite_vert,fragmentShader:Er.sprite_frag},background:{uniforms:{uvTransform:{value:new Zn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Er.background_vert,fragmentShader:Er.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Zn}},vertexShader:Er.backgroundCube_vert,fragmentShader:Er.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Er.cube_vert,fragmentShader:Er.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Er.equirect_vert,fragmentShader:Er.equirect_frag},distanceRGBA:{uniforms:il([ln.common,ln.displacementmap,{referencePosition:{value:new ge},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Er.distanceRGBA_vert,fragmentShader:Er.distanceRGBA_frag},shadow:{uniforms:il([ln.lights,ln.fog,{color:{value:new Tn(0)},opacity:{value:1}}]),vertexShader:Er.shadow_vert,fragmentShader:Er.shadow_frag}};Nf.physical={uniforms:il([Nf.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Zn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Zn},clearcoatNormalScale:{value:new Nt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Zn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Zn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Zn},sheen:{value:0},sheenColor:{value:new Tn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Zn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Zn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Zn},transmissionSamplerSize:{value:new Nt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Zn},attenuationDistance:{value:0},attenuationColor:{value:new Tn(0)},specularColor:{value:new Tn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Zn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Zn},anisotropyVector:{value:new Nt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Zn}}]),vertexShader:Er.meshphysical_vert,fragmentShader:Er.meshphysical_frag};const cR={r:0,b:0,g:0},Wv=new Hc,BNt=new jr;function zNt(n,e,r,i,a,o,s){const l=new Tn(0);let c=o===!0?0:1,u,d,f=null,h=0,p=null;function g(x){let _=x.isScene===!0?x.background:null;return _&&_.isTexture&&(_=(x.backgroundBlurriness>0?r:e).get(_)),_}function m(x){let _=!1;const S=g(x);S===null?y(l,c):S&&S.isColor&&(y(S,1),_=!0);const M=n.xr.getEnvironmentBlendMode();M==="additive"?i.buffers.color.setClear(0,0,0,1,s):M==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||_)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function v(x,_){const S=g(_);S&&(S.isCubeTexture||S.mapping===Sy)?(d===void 0&&(d=new ko(new Ky(1,1,1),new oh({name:"BackgroundCubeMaterial",uniforms:g_(Nf.backgroundCube.uniforms),vertexShader:Nf.backgroundCube.vertexShader,fragmentShader:Nf.backgroundCube.fragmentShader,side:va,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(M,E,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(d)),Wv.copy(_.backgroundRotation),Wv.x*=-1,Wv.y*=-1,Wv.z*=-1,S.isCubeTexture&&S.isRenderTargetTexture===!1&&(Wv.y*=-1,Wv.z*=-1),d.material.uniforms.envMap.value=S,d.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=_.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(BNt.makeRotationFromEuler(Wv)),d.material.toneMapped=Mr.getTransfer(S.colorSpace)!==mi,(f!==S||h!==S.version||p!==n.toneMapping)&&(d.material.needsUpdate=!0,f=S,h=S.version,p=n.toneMapping),d.layers.enableAll(),x.unshift(d,d.geometry,d.material,0,0,null)):S&&S.isTexture&&(u===void 0&&(u=new ko(new kL(2,2),new oh({name:"BackgroundMaterial",uniforms:g_(Nf.background.uniforms),vertexShader:Nf.background.vertexShader,fragmentShader:Nf.background.fragmentShader,side:Qd,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(u)),u.material.uniforms.t2D.value=S,u.material.uniforms.backgroundIntensity.value=_.backgroundIntensity,u.material.toneMapped=Mr.getTransfer(S.colorSpace)!==mi,S.matrixAutoUpdate===!0&&S.updateMatrix(),u.material.uniforms.uvTransform.value.copy(S.matrix),(f!==S||h!==S.version||p!==n.toneMapping)&&(u.material.needsUpdate=!0,f=S,h=S.version,p=n.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null))}function y(x,_){x.getRGB(cR,oAe(n)),i.buffers.color.setClear(cR.r,cR.g,cR.b,_,s)}function b(){d!==void 0&&(d.geometry.dispose(),d.material.dispose()),u!==void 0&&(u.geometry.dispose(),u.material.dispose())}return{getClearColor:function(){return l},setClearColor:function(x,_=1){l.set(x),c=_,y(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(x){c=x,y(l,c)},render:m,addToRenderList:v,dispose:b}}function UNt(n,e){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},a=h(null);let o=a,s=!1;function l(A,N,O,I,D){let k=!1;const $=f(I,O,N);o!==$&&(o=$,u(o.object)),k=p(A,I,O,D),k&&g(A,I,O,D),D!==null&&e.update(D,n.ELEMENT_ARRAY_BUFFER),(k||s)&&(s=!1,_(A,N,O,I),D!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(D).buffer))}function c(){return n.createVertexArray()}function u(A){return n.bindVertexArray(A)}function d(A){return n.deleteVertexArray(A)}function f(A,N,O){const I=O.wireframe===!0;let D=i[A.id];D===void 0&&(D={},i[A.id]=D);let k=D[N.id];k===void 0&&(k={},D[N.id]=k);let $=k[I];return $===void 0&&($=h(c()),k[I]=$),$}function h(A){const N=[],O=[],I=[];for(let D=0;D<r;D++)N[D]=0,O[D]=0,I[D]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:N,enabledAttributes:O,attributeDivisors:I,object:A,attributes:{},index:null}}function p(A,N,O,I){const D=o.attributes,k=N.attributes;let $=0;const B=O.getAttributes();for(const F in B)if(B[F].location>=0){const z=D[F];let U=k[F];if(U===void 0&&(F==="instanceMatrix"&&A.instanceMatrix&&(U=A.instanceMatrix),F==="instanceColor"&&A.instanceColor&&(U=A.instanceColor)),z===void 0||z.attribute!==U||U&&z.data!==U.data)return!0;$++}return o.attributesNum!==$||o.index!==I}function g(A,N,O,I){const D={},k=N.attributes;let $=0;const B=O.getAttributes();for(const F in B)if(B[F].location>=0){let z=k[F];z===void 0&&(F==="instanceMatrix"&&A.instanceMatrix&&(z=A.instanceMatrix),F==="instanceColor"&&A.instanceColor&&(z=A.instanceColor));const U={};U.attribute=z,z&&z.data&&(U.data=z.data),D[F]=U,$++}o.attributes=D,o.attributesNum=$,o.index=I}function m(){const A=o.newAttributes;for(let N=0,O=A.length;N<O;N++)A[N]=0}function v(A){y(A,0)}function y(A,N){const O=o.newAttributes,I=o.enabledAttributes,D=o.attributeDivisors;O[A]=1,I[A]===0&&(n.enableVertexAttribArray(A),I[A]=1),D[A]!==N&&(n.vertexAttribDivisor(A,N),D[A]=N)}function b(){const A=o.newAttributes,N=o.enabledAttributes;for(let O=0,I=N.length;O<I;O++)N[O]!==A[O]&&(n.disableVertexAttribArray(O),N[O]=0)}function x(A,N,O,I,D,k,$){$===!0?n.vertexAttribIPointer(A,N,O,D,k):n.vertexAttribPointer(A,N,O,I,D,k)}function _(A,N,O,I){m();const D=I.attributes,k=O.getAttributes(),$=N.defaultAttributeValues;for(const B in k){const F=k[B];if(F.location>=0){let G=D[B];if(G===void 0&&(B==="instanceMatrix"&&A.instanceMatrix&&(G=A.instanceMatrix),B==="instanceColor"&&A.instanceColor&&(G=A.instanceColor)),G!==void 0){const z=G.normalized,U=G.itemSize,H=e.get(G);if(H===void 0)continue;const X=H.buffer,V=H.type,W=H.bytesPerElement,K=V===n.INT||V===n.UNSIGNED_INT||G.gpuType===Zo;if(G.isInterleavedBufferAttribute){const q=G.data,Q=q.stride,ie=G.offset;if(q.isInstancedInterleavedBuffer){for(let oe=0;oe<F.locationSize;oe++)y(F.location+oe,q.meshPerAttribute);A.isInstancedMesh!==!0&&I._maxInstanceCount===void 0&&(I._maxInstanceCount=q.meshPerAttribute*q.count)}else for(let oe=0;oe<F.locationSize;oe++)v(F.location+oe);n.bindBuffer(n.ARRAY_BUFFER,X);for(let oe=0;oe<F.locationSize;oe++)x(F.location+oe,U/F.locationSize,V,z,Q*W,(ie+U/F.locationSize*oe)*W,K)}else{if(G.isInstancedBufferAttribute){for(let q=0;q<F.locationSize;q++)y(F.location+q,G.meshPerAttribute);A.isInstancedMesh!==!0&&I._maxInstanceCount===void 0&&(I._maxInstanceCount=G.meshPerAttribute*G.count)}else for(let q=0;q<F.locationSize;q++)v(F.location+q);n.bindBuffer(n.ARRAY_BUFFER,X);for(let q=0;q<F.locationSize;q++)x(F.location+q,U/F.locationSize,V,z,U*W,U/F.locationSize*q*W,K)}}else if($!==void 0){const z=$[B];if(z!==void 0)switch(z.length){case 2:n.vertexAttrib2fv(F.location,z);break;case 3:n.vertexAttrib3fv(F.location,z);break;case 4:n.vertexAttrib4fv(F.location,z);break;default:n.vertexAttrib1fv(F.location,z)}}}}b()}function S(){T();for(const A in i){const N=i[A];for(const O in N){const I=N[O];for(const D in I)d(I[D].object),delete I[D];delete N[O]}delete i[A]}}function M(A){if(i[A.id]===void 0)return;const N=i[A.id];for(const O in N){const I=N[O];for(const D in I)d(I[D].object),delete I[D];delete N[O]}delete i[A.id]}function E(A){for(const N in i){const O=i[N];if(O[A.id]===void 0)continue;const I=O[A.id];for(const D in I)d(I[D].object),delete I[D];delete O[A.id]}}function T(){P(),s=!0,o!==a&&(o=a,u(o.object))}function P(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:l,reset:T,resetDefaultState:P,dispose:S,releaseStatesOfGeometry:M,releaseStatesOfProgram:E,initAttributes:m,enableAttribute:v,disableUnusedAttributes:b}}function VNt(n,e,r){let i;function a(u){i=u}function o(u,d){n.drawArrays(i,u,d),r.update(d,i,1)}function s(u,d,f){f!==0&&(n.drawArraysInstanced(i,u,d,f),r.update(d,i,f))}function l(u,d,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,d,0,f);let p=0;for(let g=0;g<f;g++)p+=d[g];r.update(p,i,1)}function c(u,d,f,h){if(f===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let g=0;g<u.length;g++)s(u[g],d[g],h[g]);else{p.multiDrawArraysInstancedWEBGL(i,u,0,d,0,h,0,f);let g=0;for(let m=0;m<f;m++)g+=d[m]*h[m];r.update(g,i,1)}}this.setMode=a,this.render=o,this.renderInstances=s,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function GNt(n,e,r,i){let a;function o(){if(a!==void 0)return a;if(e.has("EXT_texture_filter_anisotropic")===!0){const E=e.get("EXT_texture_filter_anisotropic");a=n.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function s(E){return!(E!==vs&&i.convert(E)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(E){const T=E===vl&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(E!==Ws&&i.convert(E)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&E!==Ka&&!T)}function c(E){if(E==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";E="mediump"}return E==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=r.precision!==void 0?r.precision:"highp";const d=c(u);d!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",d,"instead."),u=d);const f=r.logarithmicDepthBuffer===!0,h=r.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),y=n.getParameter(n.MAX_VERTEX_ATTRIBS),b=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),x=n.getParameter(n.MAX_VARYING_VECTORS),_=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),S=g>0,M=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:l,precision:u,logarithmicDepthBuffer:f,reverseDepthBuffer:h,maxTextures:p,maxVertexTextures:g,maxTextureSize:m,maxCubemapSize:v,maxAttributes:y,maxVertexUniforms:b,maxVaryings:x,maxFragmentUniforms:_,vertexTextures:S,maxSamples:M}}function jNt(n){const e=this;let r=null,i=0,a=!1,o=!1;const s=new Pd,l=new Zn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const p=f.length!==0||h||i!==0||a;return a=h,i=f.length,p},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(f,h){r=d(f,h,0)},this.setState=function(f,h,p){const g=f.clippingPlanes,m=f.clipIntersection,v=f.clipShadows,y=n.get(f);if(!a||g===null||g.length===0||o&&!v)o?d(null):u();else{const b=o?0:i,x=b*4;let _=y.clippingState||null;c.value=_,_=d(g,h,x,p);for(let S=0;S!==x;++S)_[S]=r[S];y.clippingState=_,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=b}};function u(){c.value!==r&&(c.value=r,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(f,h,p,g){const m=f!==null?f.length:0;let v=null;if(m!==0){if(v=c.value,g!==!0||v===null){const y=p+m*4,b=h.matrixWorldInverse;l.getNormalMatrix(b),(v===null||v.length<y)&&(v=new Float32Array(y));for(let x=0,_=p;x!==m;++x,_+=4)s.copy(f[x]).applyMatrix4(b,l),s.normal.toArray(v,_),v[_+3]=s.constant}c.value=v,c.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,v}}function HNt(n){let e=new WeakMap;function r(s,l){return l===Zm?s.mapping=qu:l===Qm&&(s.mapping=Yu),s}function i(s){if(s&&s.isTexture){const l=s.mapping;if(l===Zm||l===Qm)if(e.has(s)){const c=e.get(s).texture;return r(c,s.mapping)}else{const c=s.image;if(c&&c.height>0){const u=new uAe(c.height);return u.fromEquirectangularTexture(n,s),e.set(s,u),s.addEventListener("dispose",a),r(u.texture,s.mapping)}else return null}}return s}function a(s){const l=s.target;l.removeEventListener("dispose",a);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}const Hb=4,zpe=[.125,.215,.35,.446,.526,.582],p0=20,wz=new qM,Upe=new Tn;let Sz=null,Ez=0,Cz=0,Mz=!1;const e0=(1+Math.sqrt(5))/2,ib=1/e0,Vpe=[new ge(-e0,ib,0),new ge(e0,ib,0),new ge(-ib,0,e0),new ge(ib,0,e0),new ge(0,e0,-ib),new ge(0,e0,ib),new ge(-1,1,-1),new ge(1,1,-1),new ge(-1,1,1),new ge(1,1,1)];let Gpe=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,r=0,i=.1,a=100){Sz=this._renderer.getRenderTarget(),Ez=this._renderer.getActiveCubeFace(),Cz=this._renderer.getActiveMipmapLevel(),Mz=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,i,a,o),r>0&&this._blur(o,0,0,r),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,r=null){return this._fromTexture(e,r)}fromCubemap(e,r=null){return this._fromTexture(e,r)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Wpe(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Hpe(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Sz,Ez,Cz),this._renderer.xr.enabled=Mz,e.scissorTest=!1,uR(e,0,0,e.width,e.height)}_fromTexture(e,r){e.mapping===qu||e.mapping===Yu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Sz=this._renderer.getRenderTarget(),Ez=this._renderer.getActiveCubeFace(),Cz=this._renderer.getActiveMipmapLevel(),Mz=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=r||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,i={magFilter:Lo,minFilter:Lo,generateMipmaps:!1,type:vl,format:vs,colorSpace:Bu,depthBuffer:!1},a=jpe(e,r,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==r){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=jpe(e,r,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=WNt(o)),this._blurMaterial=qNt(o,e,r)}return a}_compileMaterial(e){const r=new ko(this._lodPlanes[0],e);this._renderer.compile(r,wz)}_sceneToCubeUV(e,r,i,a){const l=new ll(90,1,r,i),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,h=d.toneMapping;d.getClearColor(Upe),d.toneMapping=tc,d.autoClear=!1;const p=new dw({name:"PMREM.Background",side:va,depthWrite:!1,depthTest:!1}),g=new ko(new Ky,p);let m=!1;const v=e.background;v?v.isColor&&(p.color.copy(v),e.background=null,m=!0):(p.color.copy(Upe),m=!0);for(let y=0;y<6;y++){const b=y%3;b===0?(l.up.set(0,c[y],0),l.lookAt(u[y],0,0)):b===1?(l.up.set(0,0,c[y]),l.lookAt(0,u[y],0)):(l.up.set(0,c[y],0),l.lookAt(0,0,u[y]));const x=this._cubeSize;uR(a,b*x,y>2?x:0,x,x),d.setRenderTarget(a),m&&d.render(g,l),d.render(e,l)}g.geometry.dispose(),g.material.dispose(),d.toneMapping=h,d.autoClear=f,e.background=v}_textureToCubeUV(e,r){const i=this._renderer,a=e.mapping===qu||e.mapping===Yu;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=Wpe()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Hpe());const o=a?this._cubemapMaterial:this._equirectMaterial,s=new ko(this._lodPlanes[0],o),l=o.uniforms;l.envMap.value=e;const c=this._cubeSize;uR(r,0,0,3*c,2*c),i.setRenderTarget(r),i.render(s,wz)}_applyPMREM(e){const r=this._renderer,i=r.autoClear;r.autoClear=!1;const a=this._lodPlanes.length;for(let o=1;o<a;o++){const s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),l=Vpe[(a-o-1)%Vpe.length];this._blur(e,o-1,o,s,l)}r.autoClear=i}_blur(e,r,i,a,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,r,i,a,"latitudinal",o),this._halfBlur(s,e,i,i,a,"longitudinal",o)}_halfBlur(e,r,i,a,o,s,l){const c=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=new ko(this._lodPlanes[a],u),h=u.uniforms,p=this._sizeLods[i]-1,g=isFinite(o)?Math.PI/(2*p):2*Math.PI/(2*p0-1),m=o/g,v=isFinite(o)?1+Math.floor(d*m):p0;v>p0&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${p0}`);const y=[];let b=0;for(let E=0;E<p0;++E){const T=E/m,P=Math.exp(-T*T/2);y.push(P),E===0?b+=P:E<v&&(b+=2*P)}for(let E=0;E<y.length;E++)y[E]=y[E]/b;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=y,h.latitudinal.value=s==="latitudinal",l&&(h.poleAxis.value=l);const{_lodMax:x}=this;h.dTheta.value=g,h.mipInt.value=x-i;const _=this._sizeLods[a],S=3*_*(a>x-Hb?a-x+Hb:0),M=4*(this._cubeSize-_);uR(r,S,M,3*_,2*_),c.setRenderTarget(r),c.render(f,wz)}};function WNt(n){const e=[],r=[],i=[];let a=n;const o=n-Hb+1+zpe.length;for(let s=0;s<o;s++){const l=Math.pow(2,a);r.push(l);let c=1/l;s>n-Hb?c=zpe[s-n+Hb-1]:s===0&&(c=0),i.push(c);const u=1/(l-2),d=-u,f=1+u,h=[d,d,f,d,f,f,d,d,f,f,d,f],p=6,g=6,m=3,v=2,y=1,b=new Float32Array(m*g*p),x=new Float32Array(v*g*p),_=new Float32Array(y*g*p);for(let M=0;M<p;M++){const E=M%3*2/3-1,T=M>2?0:-1,P=[E,T,0,E+2/3,T,0,E+2/3,T+1,0,E,T,0,E+2/3,T+1,0,E,T+1,0];b.set(P,m*g*M),x.set(h,v*g*M);const A=[M,M,M,M,M,M];_.set(A,y*g*M)}const S=new Qs;S.setAttribute("position",new bs(b,m)),S.setAttribute("uv",new bs(x,v)),S.setAttribute("faceIndex",new bs(_,y)),e.push(S),a>Hb&&a--}return{lodPlanes:e,sizeLods:r,sigmas:i}}function jpe(n,e,r){const i=new Jm(n,e,r);return i.texture.mapping=Sy,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function uR(n,e,r,i,a){n.viewport.set(e,r,i,a),n.scissor.set(e,r,i,a)}function qNt(n,e,r){const i=new Float32Array(p0),a=new ge(0,1,0);return new oh({name:"SphericalGaussianBlur",defines:{n:p0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:mZ(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ml,depthTest:!1,depthWrite:!1})}function Hpe(){return new oh({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:mZ(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ml,depthTest:!1,depthWrite:!1})}function Wpe(){return new oh({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:mZ(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ml,depthTest:!1,depthWrite:!1})}function mZ(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function YNt(n){let e=new WeakMap,r=null;function i(l){if(l&&l.isTexture){const c=l.mapping,u=c===Zm||c===Qm,d=c===qu||c===Yu;if(u||d){let f=e.get(l);const h=f!==void 0?f.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==h)return r===null&&(r=new Gpe(n)),f=u?r.fromEquirectangular(l,f):r.fromCubemap(l,f),f.texture.pmremVersion=l.pmremVersion,e.set(l,f),f.texture;if(f!==void 0)return f.texture;{const p=l.image;return u&&p&&p.height>0||d&&p&&a(p)?(r===null&&(r=new Gpe(n)),f=u?r.fromEquirectangular(l):r.fromCubemap(l),f.texture.pmremVersion=l.pmremVersion,e.set(l,f),l.addEventListener("dispose",o),f.texture):null}}}return l}function a(l){let c=0;const u=6;for(let d=0;d<u;d++)l[d]!==void 0&&c++;return c===u}function o(l){const c=l.target;c.removeEventListener("dispose",o);const u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}function s(){e=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:i,dispose:s}}function XNt(n){const e={};function r(i){if(e[i]!==void 0)return e[i];let a;switch(i){case"WEBGL_depth_texture":a=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=n.getExtension(i)}return e[i]=a,a}return{has:function(i){return r(i)!==null},init:function(){r("EXT_color_buffer_float"),r("WEBGL_clip_cull_distance"),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture"),r("WEBGL_render_shared_exponent")},get:function(i){const a=r(i);return a===null&&h0("THREE.WebGLRenderer: "+i+" extension not supported."),a}}}function KNt(n,e,r,i){const a={},o=new WeakMap;function s(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const g in h.attributes)e.remove(h.attributes[g]);h.removeEventListener("dispose",s),delete a[h.id];const p=o.get(h);p&&(e.remove(p),o.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,r.memory.geometries--}function l(f,h){return a[h.id]===!0||(h.addEventListener("dispose",s),a[h.id]=!0,r.memory.geometries++),h}function c(f){const h=f.attributes;for(const p in h)e.update(h[p],n.ARRAY_BUFFER)}function u(f){const h=[],p=f.index,g=f.attributes.position;let m=0;if(p!==null){const b=p.array;m=p.version;for(let x=0,_=b.length;x<_;x+=3){const S=b[x+0],M=b[x+1],E=b[x+2];h.push(S,M,M,E,E,S)}}else if(g!==void 0){const b=g.array;m=g.version;for(let x=0,_=b.length/3-1;x<_;x+=3){const S=x+0,M=x+1,E=x+2;h.push(S,M,M,E,E,S)}}else return;const v=new(tAe(h)?sZ:oZ)(h,1);v.version=m;const y=o.get(f);y&&e.remove(y),o.set(f,v)}function d(f){const h=o.get(f);if(h){const p=f.index;p!==null&&h.version<p.version&&u(f)}else u(f);return o.get(f)}return{get:l,update:c,getWireframeAttribute:d}}function ZNt(n,e,r){let i;function a(h){i=h}let o,s;function l(h){o=h.type,s=h.bytesPerElement}function c(h,p){n.drawElements(i,p,o,h*s),r.update(p,i,1)}function u(h,p,g){g!==0&&(n.drawElementsInstanced(i,p,o,h*s,g),r.update(p,i,g))}function d(h,p,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,p,0,o,h,0,g);let v=0;for(let y=0;y<g;y++)v+=p[y];r.update(v,i,1)}function f(h,p,g,m){if(g===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let y=0;y<h.length;y++)u(h[y]/s,p[y],m[y]);else{v.multiDrawElementsInstancedWEBGL(i,p,0,o,h,0,m,0,g);let y=0;for(let b=0;b<g;b++)y+=p[b]*m[b];r.update(y,i,1)}}this.setMode=a,this.setIndex=l,this.render=c,this.renderInstances=u,this.renderMultiDraw=d,this.renderMultiDrawInstances=f}function QNt(n){const e={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,l){switch(r.calls++,s){case n.TRIANGLES:r.triangles+=l*(o/3);break;case n.LINES:r.lines+=l*(o/2);break;case n.LINE_STRIP:r.lines+=l*(o-1);break;case n.LINE_LOOP:r.lines+=l*o;break;case n.POINTS:r.points+=l*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function a(){r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:e,render:r,programs:null,autoReset:!0,reset:a,update:i}}function JNt(n,e,r){const i=new WeakMap,a=new sr;function o(s,l,c){const u=s.morphTargetInfluences,d=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,f=d!==void 0?d.length:0;let h=i.get(l);if(h===void 0||h.count!==f){let P=function(){E.dispose(),i.delete(l),l.removeEventListener("dispose",P)};h!==void 0&&h.texture.dispose();const p=l.morphAttributes.position!==void 0,g=l.morphAttributes.normal!==void 0,m=l.morphAttributes.color!==void 0,v=l.morphAttributes.position||[],y=l.morphAttributes.normal||[],b=l.morphAttributes.color||[];let x=0;p===!0&&(x=1),g===!0&&(x=2),m===!0&&(x=3);let _=l.attributes.position.count*x,S=1;_>e.maxTextureSize&&(S=Math.ceil(_/e.maxTextureSize),_=e.maxTextureSize);const M=new Float32Array(_*S*4*f),E=new iZ(M,_,S,f);E.type=Ka,E.needsUpdate=!0;const T=x*4;for(let A=0;A<f;A++){const N=v[A],O=y[A],I=b[A],D=_*S*4*A;for(let k=0;k<N.count;k++){const $=k*T;p===!0&&(a.fromBufferAttribute(N,k),M[D+$+0]=a.x,M[D+$+1]=a.y,M[D+$+2]=a.z,M[D+$+3]=0),g===!0&&(a.fromBufferAttribute(O,k),M[D+$+4]=a.x,M[D+$+5]=a.y,M[D+$+6]=a.z,M[D+$+7]=0),m===!0&&(a.fromBufferAttribute(I,k),M[D+$+8]=a.x,M[D+$+9]=a.y,M[D+$+10]=a.z,M[D+$+11]=I.itemSize===4?a.w:1)}}h={count:f,texture:E,size:new Nt(_,S)},i.set(l,h),l.addEventListener("dispose",P)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(n,"morphTexture",s.morphTexture,r);else{let p=0;for(let m=0;m<u.length;m++)p+=u[m];const g=l.morphTargetsRelative?1:1-p;c.getUniforms().setValue(n,"morphTargetBaseInfluence",g),c.getUniforms().setValue(n,"morphTargetInfluences",u)}c.getUniforms().setValue(n,"morphTargetsTexture",h.texture,r),c.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:o}}function eOt(n,e,r,i){let a=new WeakMap;function o(c){const u=i.render.frame,d=c.geometry,f=e.get(c,d);if(a.get(f)!==u&&(e.update(f),a.set(f,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),a.get(c)!==u&&(r.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&r.update(c.instanceColor,n.ARRAY_BUFFER),a.set(c,u))),c.isSkinnedMesh){const h=c.skeleton;a.get(h)!==u&&(h.update(),a.set(h,u))}return f}function s(){a=new WeakMap}function l(c){const u=c.target;u.removeEventListener("dispose",l),r.remove(u.instanceMatrix),u.instanceColor!==null&&r.remove(u.instanceColor)}return{update:o,dispose:s}}const EAe=new ho,qpe=new vv(1,1),CAe=new iZ,MAe=new Q3t,TAe=new NL,Ype=[],Xpe=[],Kpe=new Float32Array(16),Zpe=new Float32Array(9),Qpe=new Float32Array(4);function hw(n,e,r){const i=n[0];if(i<=0||i>0)return n;const a=e*r;let o=Ype[a];if(o===void 0&&(o=new Float32Array(a),Ype[a]=o),e!==0){i.toArray(o,0);for(let s=1,l=0;s!==e;++s)l+=r,n[s].toArray(o,l)}return o}function Uo(n,e){if(n.length!==e.length)return!1;for(let r=0,i=n.length;r<i;r++)if(n[r]!==e[r])return!1;return!0}function Vo(n,e){for(let r=0,i=e.length;r<i;r++)n[r]=e[r]}function $L(n,e){let r=Xpe[e];r===void 0&&(r=new Int32Array(e),Xpe[e]=r);for(let i=0;i!==e;++i)r[i]=n.allocateTextureUnit();return r}function tOt(n,e){const r=this.cache;r[0]!==e&&(n.uniform1f(this.addr,e),r[0]=e)}function nOt(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(Uo(r,e))return;n.uniform2fv(this.addr,e),Vo(r,e)}}function rOt(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else if(e.r!==void 0)(r[0]!==e.r||r[1]!==e.g||r[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),r[0]=e.r,r[1]=e.g,r[2]=e.b);else{if(Uo(r,e))return;n.uniform3fv(this.addr,e),Vo(r,e)}}function iOt(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(Uo(r,e))return;n.uniform4fv(this.addr,e),Vo(r,e)}}function aOt(n,e){const r=this.cache,i=e.elements;if(i===void 0){if(Uo(r,e))return;n.uniformMatrix2fv(this.addr,!1,e),Vo(r,e)}else{if(Uo(r,i))return;Qpe.set(i),n.uniformMatrix2fv(this.addr,!1,Qpe),Vo(r,i)}}function oOt(n,e){const r=this.cache,i=e.elements;if(i===void 0){if(Uo(r,e))return;n.uniformMatrix3fv(this.addr,!1,e),Vo(r,e)}else{if(Uo(r,i))return;Zpe.set(i),n.uniformMatrix3fv(this.addr,!1,Zpe),Vo(r,i)}}function sOt(n,e){const r=this.cache,i=e.elements;if(i===void 0){if(Uo(r,e))return;n.uniformMatrix4fv(this.addr,!1,e),Vo(r,e)}else{if(Uo(r,i))return;Kpe.set(i),n.uniformMatrix4fv(this.addr,!1,Kpe),Vo(r,i)}}function lOt(n,e){const r=this.cache;r[0]!==e&&(n.uniform1i(this.addr,e),r[0]=e)}function cOt(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(Uo(r,e))return;n.uniform2iv(this.addr,e),Vo(r,e)}}function uOt(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(Uo(r,e))return;n.uniform3iv(this.addr,e),Vo(r,e)}}function dOt(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(Uo(r,e))return;n.uniform4iv(this.addr,e),Vo(r,e)}}function fOt(n,e){const r=this.cache;r[0]!==e&&(n.uniform1ui(this.addr,e),r[0]=e)}function hOt(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),r[0]=e.x,r[1]=e.y);else{if(Uo(r,e))return;n.uniform2uiv(this.addr,e),Vo(r,e)}}function pOt(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),r[0]=e.x,r[1]=e.y,r[2]=e.z);else{if(Uo(r,e))return;n.uniform3uiv(this.addr,e),Vo(r,e)}}function gOt(n,e){const r=this.cache;if(e.x!==void 0)(r[0]!==e.x||r[1]!==e.y||r[2]!==e.z||r[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),r[0]=e.x,r[1]=e.y,r[2]=e.z,r[3]=e.w);else{if(Uo(r,e))return;n.uniform4uiv(this.addr,e),Vo(r,e)}}function mOt(n,e,r){const i=this.cache,a=r.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a);let o;this.type===n.SAMPLER_2D_SHADOW?(qpe.compareFunction=AL,o=qpe):o=EAe,r.setTexture2D(e||o,a)}function vOt(n,e,r){const i=this.cache,a=r.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),r.setTexture3D(e||MAe,a)}function yOt(n,e,r){const i=this.cache,a=r.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),r.setTextureCube(e||TAe,a)}function bOt(n,e,r){const i=this.cache,a=r.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),r.setTexture2DArray(e||CAe,a)}function xOt(n){switch(n){case 5126:return tOt;case 35664:return nOt;case 35665:return rOt;case 35666:return iOt;case 35674:return aOt;case 35675:return oOt;case 35676:return sOt;case 5124:case 35670:return lOt;case 35667:case 35671:return cOt;case 35668:case 35672:return uOt;case 35669:case 35673:return dOt;case 5125:return fOt;case 36294:return hOt;case 36295:return pOt;case 36296:return gOt;case 35678:case 36198:case 36298:case 36306:case 35682:return mOt;case 35679:case 36299:case 36307:return vOt;case 35680:case 36300:case 36308:case 36293:return yOt;case 36289:case 36303:case 36311:case 36292:return bOt}}function _Ot(n,e){n.uniform1fv(this.addr,e)}function wOt(n,e){const r=hw(e,this.size,2);n.uniform2fv(this.addr,r)}function SOt(n,e){const r=hw(e,this.size,3);n.uniform3fv(this.addr,r)}function EOt(n,e){const r=hw(e,this.size,4);n.uniform4fv(this.addr,r)}function COt(n,e){const r=hw(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,r)}function MOt(n,e){const r=hw(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,r)}function TOt(n,e){const r=hw(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,r)}function AOt(n,e){n.uniform1iv(this.addr,e)}function ROt(n,e){n.uniform2iv(this.addr,e)}function POt(n,e){n.uniform3iv(this.addr,e)}function NOt(n,e){n.uniform4iv(this.addr,e)}function OOt(n,e){n.uniform1uiv(this.addr,e)}function IOt(n,e){n.uniform2uiv(this.addr,e)}function DOt(n,e){n.uniform3uiv(this.addr,e)}function LOt(n,e){n.uniform4uiv(this.addr,e)}function kOt(n,e,r){const i=this.cache,a=e.length,o=$L(r,a);Uo(i,o)||(n.uniform1iv(this.addr,o),Vo(i,o));for(let s=0;s!==a;++s)r.setTexture2D(e[s]||EAe,o[s])}function FOt(n,e,r){const i=this.cache,a=e.length,o=$L(r,a);Uo(i,o)||(n.uniform1iv(this.addr,o),Vo(i,o));for(let s=0;s!==a;++s)r.setTexture3D(e[s]||MAe,o[s])}function $Ot(n,e,r){const i=this.cache,a=e.length,o=$L(r,a);Uo(i,o)||(n.uniform1iv(this.addr,o),Vo(i,o));for(let s=0;s!==a;++s)r.setTextureCube(e[s]||TAe,o[s])}function BOt(n,e,r){const i=this.cache,a=e.length,o=$L(r,a);Uo(i,o)||(n.uniform1iv(this.addr,o),Vo(i,o));for(let s=0;s!==a;++s)r.setTexture2DArray(e[s]||CAe,o[s])}function zOt(n){switch(n){case 5126:return _Ot;case 35664:return wOt;case 35665:return SOt;case 35666:return EOt;case 35674:return COt;case 35675:return MOt;case 35676:return TOt;case 5124:case 35670:return AOt;case 35667:case 35671:return ROt;case 35668:case 35672:return POt;case 35669:case 35673:return NOt;case 5125:return OOt;case 36294:return IOt;case 36295:return DOt;case 36296:return LOt;case 35678:case 36198:case 36298:case 36306:case 35682:return kOt;case 35679:case 36299:case 36307:return FOt;case 35680:case 36300:case 36308:case 36293:return $Ot;case 36289:case 36303:case 36311:case 36292:return BOt}}class UOt{constructor(e,r,i){this.id=e,this.addr=i,this.cache=[],this.type=r.type,this.setValue=xOt(r.type)}}class VOt{constructor(e,r,i){this.id=e,this.addr=i,this.cache=[],this.type=r.type,this.size=r.size,this.setValue=zOt(r.type)}}class GOt{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,r,i){const a=this.seq;for(let o=0,s=a.length;o!==s;++o){const l=a[o];l.setValue(e,r[l.id],i)}}}const Tz=/(\w+)(\])?(\[|\.)?/g;function Jpe(n,e){n.seq.push(e),n.map[e.id]=e}function jOt(n,e,r){const i=n.name,a=i.length;for(Tz.lastIndex=0;;){const o=Tz.exec(i),s=Tz.lastIndex;let l=o[1];const c=o[2]==="]",u=o[3];if(c&&(l=l|0),u===void 0||u==="["&&s+2===a){Jpe(r,u===void 0?new UOt(l,n,e):new VOt(l,n,e));break}else{let f=r.map[l];f===void 0&&(f=new GOt(l),Jpe(r,f)),r=f}}}class RP{constructor(e,r){this.seq=[],this.map={};const i=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let a=0;a<i;++a){const o=e.getActiveUniform(r,a),s=e.getUniformLocation(r,o.name);jOt(o,s,this)}}setValue(e,r,i,a){const o=this.map[r];o!==void 0&&o.setValue(e,i,a)}setOptional(e,r,i){const a=r[i];a!==void 0&&this.setValue(e,i,a)}static upload(e,r,i,a){for(let o=0,s=r.length;o!==s;++o){const l=r[o],c=i[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,a)}}static seqWithValue(e,r){const i=[];for(let a=0,o=e.length;a!==o;++a){const s=e[a];s.id in r&&i.push(s)}return i}}function ege(n,e,r){const i=n.createShader(e);return n.shaderSource(i,r),n.compileShader(i),i}const HOt=37297;let WOt=0;function qOt(n,e){const r=n.split(`
`),i=[],a=Math.max(e-6,0),o=Math.min(e+6,r.length);for(let s=a;s<o;s++){const l=s+1;i.push(`${l===e?">":" "} ${l}: ${r[s]}`)}return i.join(`
`)}const tge=new Zn;function YOt(n){Mr._getMatrix(tge,Mr.workingColorSpace,n);const e=`mat3( ${tge.elements.map(r=>r.toFixed(4))} )`;switch(Mr.getTransfer(n)){case IO:return[e,"LinearTransferOETF"];case mi:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function nge(n,e,r){const i=n.getShaderParameter(e,n.COMPILE_STATUS),a=n.getShaderInfoLog(e).trim();if(i&&a==="")return"";const o=/ERROR: 0:(\d+)/.exec(a);if(o){const s=parseInt(o[1]);return r.toUpperCase()+`

`+a+`

`+qOt(n.getShaderSource(e),s)}else return a}function XOt(n,e){const r=YOt(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${r[1]}( vec4( value.rgb * ${r[0]}, value.a ) );`,"}"].join(`
`)}function KOt(n,e){let r;switch(e){case Y3e:r="Linear";break;case X3e:r="Reinhard";break;case K3e:r="Cineon";break;case Z3e:r="ACESFilmic";break;case Q3e:r="AgX";break;case J3e:r="Neutral";break;case d3t:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),r="Linear"}return"vec3 "+n+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}const dR=new ge;function ZOt(){Mr.getLuminanceCoefficients(dR);const n=dR.x.toFixed(4),e=dR.y.toFixed(4),r=dR.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${r} );`,"	return dot( weights, rgb );","}"].join(`
`)}function QOt(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(b2).join(`
`)}function JOt(n){const e=[];for(const r in n){const i=n[r];i!==!1&&e.push("#define "+r+" "+i)}return e.join(`
`)}function eIt(n,e){const r={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let a=0;a<i;a++){const o=n.getActiveAttrib(e,a),s=o.name;let l=1;o.type===n.FLOAT_MAT2&&(l=2),o.type===n.FLOAT_MAT3&&(l=3),o.type===n.FLOAT_MAT4&&(l=4),r[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:l}}return r}function b2(n){return n!==""}function rge(n,e){const r=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ige(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const tIt=/^[ \t]*#include +<([\w\d./]+)>/gm;function IH(n){return n.replace(tIt,rIt)}const nIt=new Map;function rIt(n,e){let r=Er[e];if(r===void 0){const i=nIt.get(e);if(i!==void 0)r=Er[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return IH(r)}const iIt=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function age(n){return n.replace(iIt,aIt)}function aIt(n,e,r,i){let a="";for(let o=parseInt(e);o<parseInt(r);o++)a+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return a}function oge(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function oIt(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===IK?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===o3t?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Mc&&(e="SHADOWMAP_TYPE_VSM"),e}function sIt(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case qu:case Yu:e="ENVMAP_TYPE_CUBE";break;case Sy:e="ENVMAP_TYPE_CUBE_UV";break}return e}function lIt(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Yu:e="ENVMAP_MODE_REFRACTION";break}return e}function cIt(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case jM:e="ENVMAP_BLENDING_MULTIPLY";break;case W3e:e="ENVMAP_BLENDING_MIX";break;case q3e:e="ENVMAP_BLENDING_ADD";break}return e}function uIt(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const r=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:i,maxMip:r}}function dIt(n,e,r,i){const a=n.getContext(),o=r.defines;let s=r.vertexShader,l=r.fragmentShader;const c=oIt(r),u=sIt(r),d=lIt(r),f=cIt(r),h=uIt(r),p=QOt(r),g=JOt(o),m=a.createProgram();let v,y,b=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(v=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g].filter(b2).join(`
`),v.length>0&&(v+=`
`),y=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g].filter(b2).join(`
`),y.length>0&&(y+=`
`)):(v=[oge(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g,r.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",r.batching?"#define USE_BATCHING":"",r.batchingColor?"#define USE_BATCHING_COLOR":"",r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.instancingMorph?"#define USE_INSTANCING_MORPH":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+d:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.displacementMap?"#define USE_DISPLACEMENTMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.mapUv?"#define MAP_UV "+r.mapUv:"",r.alphaMapUv?"#define ALPHAMAP_UV "+r.alphaMapUv:"",r.lightMapUv?"#define LIGHTMAP_UV "+r.lightMapUv:"",r.aoMapUv?"#define AOMAP_UV "+r.aoMapUv:"",r.emissiveMapUv?"#define EMISSIVEMAP_UV "+r.emissiveMapUv:"",r.bumpMapUv?"#define BUMPMAP_UV "+r.bumpMapUv:"",r.normalMapUv?"#define NORMALMAP_UV "+r.normalMapUv:"",r.displacementMapUv?"#define DISPLACEMENTMAP_UV "+r.displacementMapUv:"",r.metalnessMapUv?"#define METALNESSMAP_UV "+r.metalnessMapUv:"",r.roughnessMapUv?"#define ROUGHNESSMAP_UV "+r.roughnessMapUv:"",r.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+r.anisotropyMapUv:"",r.clearcoatMapUv?"#define CLEARCOATMAP_UV "+r.clearcoatMapUv:"",r.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+r.clearcoatNormalMapUv:"",r.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+r.clearcoatRoughnessMapUv:"",r.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+r.iridescenceMapUv:"",r.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+r.iridescenceThicknessMapUv:"",r.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+r.sheenColorMapUv:"",r.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+r.sheenRoughnessMapUv:"",r.specularMapUv?"#define SPECULARMAP_UV "+r.specularMapUv:"",r.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+r.specularColorMapUv:"",r.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+r.specularIntensityMapUv:"",r.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+r.transmissionMapUv:"",r.thicknessMapUv?"#define THICKNESSMAP_UV "+r.thicknessMapUv:"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(b2).join(`
`),y=[oge(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,g,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.envMap?"#define "+d:"",r.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.dispersion?"#define USE_DISPERSION":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents&&r.flatShading===!1?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor||r.batchingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+c:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==tc?"#define TONE_MAPPING":"",r.toneMapping!==tc?Er.tonemapping_pars_fragment:"",r.toneMapping!==tc?KOt("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",Er.colorspace_pars_fragment,XOt("linearToOutputTexel",r.outputColorSpace),ZOt(),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(b2).join(`
`)),s=IH(s),s=rge(s,r),s=ige(s,r),l=IH(l),l=rge(l,r),l=ige(l,r),s=age(s),l=age(l),r.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,v=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,y=["#define varying in",r.glslVersion===spe?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===spe?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const x=b+v+s,_=b+y+l,S=ege(a,a.VERTEX_SHADER,x),M=ege(a,a.FRAGMENT_SHADER,_);a.attachShader(m,S),a.attachShader(m,M),r.index0AttributeName!==void 0?a.bindAttribLocation(m,0,r.index0AttributeName):r.morphTargets===!0&&a.bindAttribLocation(m,0,"position"),a.linkProgram(m);function E(N){if(n.debug.checkShaderErrors){const O=a.getProgramInfoLog(m).trim(),I=a.getShaderInfoLog(S).trim(),D=a.getShaderInfoLog(M).trim();let k=!0,$=!0;if(a.getProgramParameter(m,a.LINK_STATUS)===!1)if(k=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(a,m,S,M);else{const B=nge(a,S,"vertex"),F=nge(a,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(m,a.VALIDATE_STATUS)+`

Material Name: `+N.name+`
Material Type: `+N.type+`

Program Info Log: `+O+`
`+B+`
`+F)}else O!==""?console.warn("THREE.WebGLProgram: Program Info Log:",O):(I===""||D==="")&&($=!1);$&&(N.diagnostics={runnable:k,programLog:O,vertexShader:{log:I,prefix:v},fragmentShader:{log:D,prefix:y}})}a.deleteShader(S),a.deleteShader(M),T=new RP(a,m),P=eIt(a,m)}let T;this.getUniforms=function(){return T===void 0&&E(this),T};let P;this.getAttributes=function(){return P===void 0&&E(this),P};let A=r.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return A===!1&&(A=a.getProgramParameter(m,HOt)),A},this.destroy=function(){i.releaseStatesOfProgram(this),a.deleteProgram(m),this.program=void 0},this.type=r.shaderType,this.name=r.shaderName,this.id=WOt++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=S,this.fragmentShader=M,this}let fIt=0;class hIt{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const r=e.vertexShader,i=e.fragmentShader,a=this._getShaderStage(r),o=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(a)===!1&&(s.add(a),a.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){const r=this.materialCache.get(e);for(const i of r)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const r=this.materialCache;let i=r.get(e);return i===void 0&&(i=new Set,r.set(e,i)),i}_getShaderStage(e){const r=this.shaderCache;let i=r.get(e);return i===void 0&&(i=new pIt(e),r.set(e,i)),i}}class pIt{constructor(e){this.id=fIt++,this.code=e,this.usedTimes=0}}function gIt(n,e,r,i,a,o,s){const l=new aZ,c=new hIt,u=new Set,d=[],f=a.logarithmicDepthBuffer,h=a.vertexTextures;let p=a.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(P){return u.add(P),P===0?"uv":`uv${P}`}function v(P,A,N,O,I){const D=O.fog,k=I.geometry,$=P.isMeshStandardMaterial?O.environment:null,B=(P.isMeshStandardMaterial?r:e).get(P.envMap||$),F=B&&B.mapping===Sy?B.image.height:null,G=g[P.type];P.precision!==null&&(p=a.getMaxPrecision(P.precision),p!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",p,"instead."));const z=k.morphAttributes.position||k.morphAttributes.normal||k.morphAttributes.color,U=z!==void 0?z.length:0;let H=0;k.morphAttributes.position!==void 0&&(H=1),k.morphAttributes.normal!==void 0&&(H=2),k.morphAttributes.color!==void 0&&(H=3);let X,V,W,K;if(G){const wt=Nf[G];X=wt.vertexShader,V=wt.fragmentShader}else X=P.vertexShader,V=P.fragmentShader,c.update(P),W=c.getVertexShaderID(P),K=c.getFragmentShaderID(P);const q=n.getRenderTarget(),Q=n.state.buffers.depth.getReversed(),ie=I.isInstancedMesh===!0,oe=I.isBatchedMesh===!0,ue=!!P.map,le=!!P.matcap,me=!!B,J=!!P.aoMap,pe=!!P.lightMap,ve=!!P.bumpMap,Me=!!P.normalMap,Re=!!P.displacementMap,Xe=!!P.emissiveMap,He=!!P.metalnessMap,ee=!!P.roughnessMap,Y=P.anisotropy>0,ce=P.clearcoat>0,_e=P.dispersion>0,Ae=P.iridescence>0,Ce=P.sheen>0,et=P.transmission>0,Ve=Y&&!!P.anisotropyMap,qe=ce&&!!P.clearcoatMap,dt=ce&&!!P.clearcoatNormalMap,Ge=ce&&!!P.clearcoatRoughnessMap,We=Ae&&!!P.iridescenceMap,Ze=Ae&&!!P.iridescenceThicknessMap,Ie=Ce&&!!P.sheenColorMap,De=Ce&&!!P.sheenRoughnessMap,bt=!!P.specularMap,Ke=!!P.specularColorMap,mt=!!P.specularIntensityMap,xe=et&&!!P.transmissionMap,vt=et&&!!P.thicknessMap,Ue=!!P.gradientMap,Le=!!P.alphaMap,Ye=P.alphaTest>0,nt=!!P.alphaHash,_t=!!P.extensions;let Gt=tc;P.toneMapped&&(q===null||q.isXRRenderTarget===!0)&&(Gt=n.toneMapping);const Ot={shaderID:G,shaderType:P.type,shaderName:P.name,vertexShader:X,fragmentShader:V,defines:P.defines,customVertexShaderID:W,customFragmentShaderID:K,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:p,batching:oe,batchingColor:oe&&I._colorsTexture!==null,instancing:ie,instancingColor:ie&&I.instanceColor!==null,instancingMorph:ie&&I.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:q===null?n.outputColorSpace:q.isXRRenderTarget===!0?q.texture.colorSpace:Bu,alphaToCoverage:!!P.alphaToCoverage,map:ue,matcap:le,envMap:me,envMapMode:me&&B.mapping,envMapCubeUVHeight:F,aoMap:J,lightMap:pe,bumpMap:ve,normalMap:Me,displacementMap:h&&Re,emissiveMap:Xe,normalMapObjectSpace:Me&&P.normalMapType===eAe,normalMapTangentSpace:Me&&P.normalMapType===Bp,metalnessMap:He,roughnessMap:ee,anisotropy:Y,anisotropyMap:Ve,clearcoat:ce,clearcoatMap:qe,clearcoatNormalMap:dt,clearcoatRoughnessMap:Ge,dispersion:_e,iridescence:Ae,iridescenceMap:We,iridescenceThicknessMap:Ze,sheen:Ce,sheenColorMap:Ie,sheenRoughnessMap:De,specularMap:bt,specularColorMap:Ke,specularIntensityMap:mt,transmission:et,transmissionMap:xe,thicknessMap:vt,gradientMap:Ue,opaque:P.transparent===!1&&P.blending===$u&&P.alphaToCoverage===!1,alphaMap:Le,alphaTest:Ye,alphaHash:nt,combine:P.combine,mapUv:ue&&m(P.map.channel),aoMapUv:J&&m(P.aoMap.channel),lightMapUv:pe&&m(P.lightMap.channel),bumpMapUv:ve&&m(P.bumpMap.channel),normalMapUv:Me&&m(P.normalMap.channel),displacementMapUv:Re&&m(P.displacementMap.channel),emissiveMapUv:Xe&&m(P.emissiveMap.channel),metalnessMapUv:He&&m(P.metalnessMap.channel),roughnessMapUv:ee&&m(P.roughnessMap.channel),anisotropyMapUv:Ve&&m(P.anisotropyMap.channel),clearcoatMapUv:qe&&m(P.clearcoatMap.channel),clearcoatNormalMapUv:dt&&m(P.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ge&&m(P.clearcoatRoughnessMap.channel),iridescenceMapUv:We&&m(P.iridescenceMap.channel),iridescenceThicknessMapUv:Ze&&m(P.iridescenceThicknessMap.channel),sheenColorMapUv:Ie&&m(P.sheenColorMap.channel),sheenRoughnessMapUv:De&&m(P.sheenRoughnessMap.channel),specularMapUv:bt&&m(P.specularMap.channel),specularColorMapUv:Ke&&m(P.specularColorMap.channel),specularIntensityMapUv:mt&&m(P.specularIntensityMap.channel),transmissionMapUv:xe&&m(P.transmissionMap.channel),thicknessMapUv:vt&&m(P.thicknessMap.channel),alphaMapUv:Le&&m(P.alphaMap.channel),vertexTangents:!!k.attributes.tangent&&(Me||Y),vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!k.attributes.color&&k.attributes.color.itemSize===4,pointsUvs:I.isPoints===!0&&!!k.attributes.uv&&(ue||Le),fog:!!D,useFog:P.fog===!0,fogExp2:!!D&&D.isFogExp2,flatShading:P.flatShading===!0,sizeAttenuation:P.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:Q,skinning:I.isSkinnedMesh===!0,morphTargets:k.morphAttributes.position!==void 0,morphNormals:k.morphAttributes.normal!==void 0,morphColors:k.morphAttributes.color!==void 0,morphTargetsCount:U,morphTextureStride:H,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numLightProbes:A.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:P.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:Gt,decodeVideoTexture:ue&&P.map.isVideoTexture===!0&&Mr.getTransfer(P.map.colorSpace)===mi,decodeVideoTextureEmissive:Xe&&P.emissiveMap.isVideoTexture===!0&&Mr.getTransfer(P.emissiveMap.colorSpace)===mi,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===dl,flipSided:P.side===va,useDepthPacking:P.depthPacking>=0,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionClipCullDistance:_t&&P.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(_t&&P.extensions.multiDraw===!0||oe)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:P.customProgramCacheKey()};return Ot.vertexUv1s=u.has(1),Ot.vertexUv2s=u.has(2),Ot.vertexUv3s=u.has(3),u.clear(),Ot}function y(P){const A=[];if(P.shaderID?A.push(P.shaderID):(A.push(P.customVertexShaderID),A.push(P.customFragmentShaderID)),P.defines!==void 0)for(const N in P.defines)A.push(N),A.push(P.defines[N]);return P.isRawShaderMaterial===!1&&(b(A,P),x(A,P),A.push(n.outputColorSpace)),A.push(P.customProgramCacheKey),A.join()}function b(P,A){P.push(A.precision),P.push(A.outputColorSpace),P.push(A.envMapMode),P.push(A.envMapCubeUVHeight),P.push(A.mapUv),P.push(A.alphaMapUv),P.push(A.lightMapUv),P.push(A.aoMapUv),P.push(A.bumpMapUv),P.push(A.normalMapUv),P.push(A.displacementMapUv),P.push(A.emissiveMapUv),P.push(A.metalnessMapUv),P.push(A.roughnessMapUv),P.push(A.anisotropyMapUv),P.push(A.clearcoatMapUv),P.push(A.clearcoatNormalMapUv),P.push(A.clearcoatRoughnessMapUv),P.push(A.iridescenceMapUv),P.push(A.iridescenceThicknessMapUv),P.push(A.sheenColorMapUv),P.push(A.sheenRoughnessMapUv),P.push(A.specularMapUv),P.push(A.specularColorMapUv),P.push(A.specularIntensityMapUv),P.push(A.transmissionMapUv),P.push(A.thicknessMapUv),P.push(A.combine),P.push(A.fogExp2),P.push(A.sizeAttenuation),P.push(A.morphTargetsCount),P.push(A.morphAttributeCount),P.push(A.numDirLights),P.push(A.numPointLights),P.push(A.numSpotLights),P.push(A.numSpotLightMaps),P.push(A.numHemiLights),P.push(A.numRectAreaLights),P.push(A.numDirLightShadows),P.push(A.numPointLightShadows),P.push(A.numSpotLightShadows),P.push(A.numSpotLightShadowsWithMaps),P.push(A.numLightProbes),P.push(A.shadowMapType),P.push(A.toneMapping),P.push(A.numClippingPlanes),P.push(A.numClipIntersection),P.push(A.depthPacking)}function x(P,A){l.disableAll(),A.supportsVertexTextures&&l.enable(0),A.instancing&&l.enable(1),A.instancingColor&&l.enable(2),A.instancingMorph&&l.enable(3),A.matcap&&l.enable(4),A.envMap&&l.enable(5),A.normalMapObjectSpace&&l.enable(6),A.normalMapTangentSpace&&l.enable(7),A.clearcoat&&l.enable(8),A.iridescence&&l.enable(9),A.alphaTest&&l.enable(10),A.vertexColors&&l.enable(11),A.vertexAlphas&&l.enable(12),A.vertexUv1s&&l.enable(13),A.vertexUv2s&&l.enable(14),A.vertexUv3s&&l.enable(15),A.vertexTangents&&l.enable(16),A.anisotropy&&l.enable(17),A.alphaHash&&l.enable(18),A.batching&&l.enable(19),A.dispersion&&l.enable(20),A.batchingColor&&l.enable(21),P.push(l.mask),l.disableAll(),A.fog&&l.enable(0),A.useFog&&l.enable(1),A.flatShading&&l.enable(2),A.logarithmicDepthBuffer&&l.enable(3),A.reverseDepthBuffer&&l.enable(4),A.skinning&&l.enable(5),A.morphTargets&&l.enable(6),A.morphNormals&&l.enable(7),A.morphColors&&l.enable(8),A.premultipliedAlpha&&l.enable(9),A.shadowMapEnabled&&l.enable(10),A.doubleSided&&l.enable(11),A.flipSided&&l.enable(12),A.useDepthPacking&&l.enable(13),A.dithering&&l.enable(14),A.transmission&&l.enable(15),A.sheen&&l.enable(16),A.opaque&&l.enable(17),A.pointsUvs&&l.enable(18),A.decodeVideoTexture&&l.enable(19),A.decodeVideoTextureEmissive&&l.enable(20),A.alphaToCoverage&&l.enable(21),P.push(l.mask)}function _(P){const A=g[P.type];let N;if(A){const O=Nf[A];N=sAe.clone(O.uniforms)}else N=P.uniforms;return N}function S(P,A){let N;for(let O=0,I=d.length;O<I;O++){const D=d[O];if(D.cacheKey===A){N=D,++N.usedTimes;break}}return N===void 0&&(N=new dIt(n,A,P,o),d.push(N)),N}function M(P){if(--P.usedTimes===0){const A=d.indexOf(P);d[A]=d[d.length-1],d.pop(),P.destroy()}}function E(P){c.remove(P)}function T(){c.dispose()}return{getParameters:v,getProgramCacheKey:y,getUniforms:_,acquireProgram:S,releaseProgram:M,releaseShaderCache:E,programs:d,dispose:T}}function mIt(){let n=new WeakMap;function e(s){return n.has(s)}function r(s){let l=n.get(s);return l===void 0&&(l={},n.set(s,l)),l}function i(s){n.delete(s)}function a(s,l,c){n.get(s)[l]=c}function o(){n=new WeakMap}return{has:e,get:r,remove:i,update:a,dispose:o}}function vIt(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function sge(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function lge(){const n=[];let e=0;const r=[],i=[],a=[];function o(){e=0,r.length=0,i.length=0,a.length=0}function s(f,h,p,g,m,v){let y=n[e];return y===void 0?(y={id:f.id,object:f,geometry:h,material:p,groupOrder:g,renderOrder:f.renderOrder,z:m,group:v},n[e]=y):(y.id=f.id,y.object=f,y.geometry=h,y.material=p,y.groupOrder=g,y.renderOrder=f.renderOrder,y.z=m,y.group=v),e++,y}function l(f,h,p,g,m,v){const y=s(f,h,p,g,m,v);p.transmission>0?i.push(y):p.transparent===!0?a.push(y):r.push(y)}function c(f,h,p,g,m,v){const y=s(f,h,p,g,m,v);p.transmission>0?i.unshift(y):p.transparent===!0?a.unshift(y):r.unshift(y)}function u(f,h){r.length>1&&r.sort(f||vIt),i.length>1&&i.sort(h||sge),a.length>1&&a.sort(h||sge)}function d(){for(let f=e,h=n.length;f<h;f++){const p=n[f];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:r,transmissive:i,transparent:a,init:o,push:l,unshift:c,finish:d,sort:u}}function yIt(){let n=new WeakMap;function e(i,a){const o=n.get(i);let s;return o===void 0?(s=new lge,n.set(i,[s])):a>=o.length?(s=new lge,o.push(s)):s=o[a],s}function r(){n=new WeakMap}return{get:e,dispose:r}}function bIt(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let r;switch(e.type){case"DirectionalLight":r={direction:new ge,color:new Tn};break;case"SpotLight":r={position:new ge,direction:new ge,color:new Tn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new ge,color:new Tn,distance:0,decay:0};break;case"HemisphereLight":r={direction:new ge,skyColor:new Tn,groundColor:new Tn};break;case"RectAreaLight":r={color:new Tn,position:new ge,halfWidth:new ge,halfHeight:new ge};break}return n[e.id]=r,r}}}function xIt(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let r;switch(e.type){case"DirectionalLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Nt};break;case"SpotLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Nt};break;case"PointLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Nt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=r,r}}}let _It=0;function wIt(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function SIt(n){const e=new bIt,r=xIt(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new ge);const a=new ge,o=new jr,s=new jr;function l(u){let d=0,f=0,h=0;for(let P=0;P<9;P++)i.probe[P].set(0,0,0);let p=0,g=0,m=0,v=0,y=0,b=0,x=0,_=0,S=0,M=0,E=0;u.sort(wIt);for(let P=0,A=u.length;P<A;P++){const N=u[P],O=N.color,I=N.intensity,D=N.distance,k=N.shadow&&N.shadow.map?N.shadow.map.texture:null;if(N.isAmbientLight)d+=O.r*I,f+=O.g*I,h+=O.b*I;else if(N.isLightProbe){for(let $=0;$<9;$++)i.probe[$].addScaledVector(N.sh.coefficients[$],I);E++}else if(N.isDirectionalLight){const $=e.get(N);if($.color.copy(N.color).multiplyScalar(N.intensity),N.castShadow){const B=N.shadow,F=r.get(N);F.shadowIntensity=B.intensity,F.shadowBias=B.bias,F.shadowNormalBias=B.normalBias,F.shadowRadius=B.radius,F.shadowMapSize=B.mapSize,i.directionalShadow[p]=F,i.directionalShadowMap[p]=k,i.directionalShadowMatrix[p]=N.shadow.matrix,b++}i.directional[p]=$,p++}else if(N.isSpotLight){const $=e.get(N);$.position.setFromMatrixPosition(N.matrixWorld),$.color.copy(O).multiplyScalar(I),$.distance=D,$.coneCos=Math.cos(N.angle),$.penumbraCos=Math.cos(N.angle*(1-N.penumbra)),$.decay=N.decay,i.spot[m]=$;const B=N.shadow;if(N.map&&(i.spotLightMap[S]=N.map,S++,B.updateMatrices(N),N.castShadow&&M++),i.spotLightMatrix[m]=B.matrix,N.castShadow){const F=r.get(N);F.shadowIntensity=B.intensity,F.shadowBias=B.bias,F.shadowNormalBias=B.normalBias,F.shadowRadius=B.radius,F.shadowMapSize=B.mapSize,i.spotShadow[m]=F,i.spotShadowMap[m]=k,_++}m++}else if(N.isRectAreaLight){const $=e.get(N);$.color.copy(O).multiplyScalar(I),$.halfWidth.set(N.width*.5,0,0),$.halfHeight.set(0,N.height*.5,0),i.rectArea[v]=$,v++}else if(N.isPointLight){const $=e.get(N);if($.color.copy(N.color).multiplyScalar(N.intensity),$.distance=N.distance,$.decay=N.decay,N.castShadow){const B=N.shadow,F=r.get(N);F.shadowIntensity=B.intensity,F.shadowBias=B.bias,F.shadowNormalBias=B.normalBias,F.shadowRadius=B.radius,F.shadowMapSize=B.mapSize,F.shadowCameraNear=B.camera.near,F.shadowCameraFar=B.camera.far,i.pointShadow[g]=F,i.pointShadowMap[g]=k,i.pointShadowMatrix[g]=N.shadow.matrix,x++}i.point[g]=$,g++}else if(N.isHemisphereLight){const $=e.get(N);$.skyColor.copy(N.color).multiplyScalar(I),$.groundColor.copy(N.groundColor).multiplyScalar(I),i.hemi[y]=$,y++}}v>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ln.LTC_FLOAT_1,i.rectAreaLTC2=ln.LTC_FLOAT_2):(i.rectAreaLTC1=ln.LTC_HALF_1,i.rectAreaLTC2=ln.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=f,i.ambient[2]=h;const T=i.hash;(T.directionalLength!==p||T.pointLength!==g||T.spotLength!==m||T.rectAreaLength!==v||T.hemiLength!==y||T.numDirectionalShadows!==b||T.numPointShadows!==x||T.numSpotShadows!==_||T.numSpotMaps!==S||T.numLightProbes!==E)&&(i.directional.length=p,i.spot.length=m,i.rectArea.length=v,i.point.length=g,i.hemi.length=y,i.directionalShadow.length=b,i.directionalShadowMap.length=b,i.pointShadow.length=x,i.pointShadowMap.length=x,i.spotShadow.length=_,i.spotShadowMap.length=_,i.directionalShadowMatrix.length=b,i.pointShadowMatrix.length=x,i.spotLightMatrix.length=_+S-M,i.spotLightMap.length=S,i.numSpotLightShadowsWithMaps=M,i.numLightProbes=E,T.directionalLength=p,T.pointLength=g,T.spotLength=m,T.rectAreaLength=v,T.hemiLength=y,T.numDirectionalShadows=b,T.numPointShadows=x,T.numSpotShadows=_,T.numSpotMaps=S,T.numLightProbes=E,i.version=_It++)}function c(u,d){let f=0,h=0,p=0,g=0,m=0;const v=d.matrixWorldInverse;for(let y=0,b=u.length;y<b;y++){const x=u[y];if(x.isDirectionalLight){const _=i.directional[f];_.direction.setFromMatrixPosition(x.matrixWorld),a.setFromMatrixPosition(x.target.matrixWorld),_.direction.sub(a),_.direction.transformDirection(v),f++}else if(x.isSpotLight){const _=i.spot[p];_.position.setFromMatrixPosition(x.matrixWorld),_.position.applyMatrix4(v),_.direction.setFromMatrixPosition(x.matrixWorld),a.setFromMatrixPosition(x.target.matrixWorld),_.direction.sub(a),_.direction.transformDirection(v),p++}else if(x.isRectAreaLight){const _=i.rectArea[g];_.position.setFromMatrixPosition(x.matrixWorld),_.position.applyMatrix4(v),s.identity(),o.copy(x.matrixWorld),o.premultiply(v),s.extractRotation(o),_.halfWidth.set(x.width*.5,0,0),_.halfHeight.set(0,x.height*.5,0),_.halfWidth.applyMatrix4(s),_.halfHeight.applyMatrix4(s),g++}else if(x.isPointLight){const _=i.point[h];_.position.setFromMatrixPosition(x.matrixWorld),_.position.applyMatrix4(v),h++}else if(x.isHemisphereLight){const _=i.hemi[m];_.direction.setFromMatrixPosition(x.matrixWorld),_.direction.transformDirection(v),m++}}}return{setup:l,setupView:c,state:i}}function cge(n){const e=new SIt(n),r=[],i=[];function a(d){u.camera=d,r.length=0,i.length=0}function o(d){r.push(d)}function s(d){i.push(d)}function l(){e.setup(r)}function c(d){e.setupView(r,d)}const u={lightsArray:r,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:a,state:u,setupLights:l,setupLightsView:c,pushLight:o,pushShadow:s}}function EIt(n){let e=new WeakMap;function r(a,o=0){const s=e.get(a);let l;return s===void 0?(l=new cge(n),e.set(a,[l])):o>=s.length?(l=new cge(n),s.push(l)):l=s[o],l}function i(){e=new WeakMap}return{get:r,dispose:i}}const CIt=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,MIt=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function TIt(n,e,r){let i=new IL;const a=new Nt,o=new Nt,s=new sr,l=new zAt({depthPacking:p3t}),c=new UAt,u={},d=r.maxTextureSize,f={[Qd]:va,[va]:Qd,[dl]:dl},h=new oh({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Nt},radius:{value:4}},vertexShader:CIt,fragmentShader:MIt}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const g=new Qs;g.setAttribute("position",new bs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new ko(g,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=IK;let y=this.type;this.render=function(M,E,T){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||M.length===0)return;const P=n.getRenderTarget(),A=n.getActiveCubeFace(),N=n.getActiveMipmapLevel(),O=n.state;O.setBlending(ml),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);const I=y!==Mc&&this.type===Mc,D=y===Mc&&this.type!==Mc;for(let k=0,$=M.length;k<$;k++){const B=M[k],F=B.shadow;if(F===void 0){console.warn("THREE.WebGLShadowMap:",B,"has no shadow.");continue}if(F.autoUpdate===!1&&F.needsUpdate===!1)continue;a.copy(F.mapSize);const G=F.getFrameExtents();if(a.multiply(G),o.copy(F.mapSize),(a.x>d||a.y>d)&&(a.x>d&&(o.x=Math.floor(d/G.x),a.x=o.x*G.x,F.mapSize.x=o.x),a.y>d&&(o.y=Math.floor(d/G.y),a.y=o.y*G.y,F.mapSize.y=o.y)),F.map===null||I===!0||D===!0){const U=this.type!==Mc?{minFilter:na,magFilter:na}:{};F.map!==null&&F.map.dispose(),F.map=new Jm(a.x,a.y,U),F.map.texture.name=B.name+".shadowMap",F.camera.updateProjectionMatrix()}n.setRenderTarget(F.map),n.clear();const z=F.getViewportCount();for(let U=0;U<z;U++){const H=F.getViewport(U);s.set(o.x*H.x,o.y*H.y,o.x*H.z,o.y*H.w),O.viewport(s),F.updateMatrices(B,U),i=F.getFrustum(),_(E,T,F.camera,B,this.type)}F.isPointLightShadow!==!0&&this.type===Mc&&b(F,T),F.needsUpdate=!1}y=this.type,v.needsUpdate=!1,n.setRenderTarget(P,A,N)};function b(M,E){const T=e.update(m);h.defines.VSM_SAMPLES!==M.blurSamples&&(h.defines.VSM_SAMPLES=M.blurSamples,p.defines.VSM_SAMPLES=M.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new Jm(a.x,a.y)),h.uniforms.shadow_pass.value=M.map.texture,h.uniforms.resolution.value=M.mapSize,h.uniforms.radius.value=M.radius,n.setRenderTarget(M.mapPass),n.clear(),n.renderBufferDirect(E,null,T,h,m,null),p.uniforms.shadow_pass.value=M.mapPass.texture,p.uniforms.resolution.value=M.mapSize,p.uniforms.radius.value=M.radius,n.setRenderTarget(M.map),n.clear(),n.renderBufferDirect(E,null,T,p,m,null)}function x(M,E,T,P){let A=null;const N=T.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(N!==void 0)A=N;else if(A=T.isPointLight===!0?c:l,n.localClippingEnabled&&E.clipShadows===!0&&Array.isArray(E.clippingPlanes)&&E.clippingPlanes.length!==0||E.displacementMap&&E.displacementScale!==0||E.alphaMap&&E.alphaTest>0||E.map&&E.alphaTest>0){const O=A.uuid,I=E.uuid;let D=u[O];D===void 0&&(D={},u[O]=D);let k=D[I];k===void 0&&(k=A.clone(),D[I]=k,E.addEventListener("dispose",S)),A=k}if(A.visible=E.visible,A.wireframe=E.wireframe,P===Mc?A.side=E.shadowSide!==null?E.shadowSide:E.side:A.side=E.shadowSide!==null?E.shadowSide:f[E.side],A.alphaMap=E.alphaMap,A.alphaTest=E.alphaTest,A.map=E.map,A.clipShadows=E.clipShadows,A.clippingPlanes=E.clippingPlanes,A.clipIntersection=E.clipIntersection,A.displacementMap=E.displacementMap,A.displacementScale=E.displacementScale,A.displacementBias=E.displacementBias,A.wireframeLinewidth=E.wireframeLinewidth,A.linewidth=E.linewidth,T.isPointLight===!0&&A.isMeshDistanceMaterial===!0){const O=n.properties.get(A);O.light=T}return A}function _(M,E,T,P,A){if(M.visible===!1)return;if(M.layers.test(E.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&A===Mc)&&(!M.frustumCulled||i.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,M.matrixWorld);const I=e.update(M),D=M.material;if(Array.isArray(D)){const k=I.groups;for(let $=0,B=k.length;$<B;$++){const F=k[$],G=D[F.materialIndex];if(G&&G.visible){const z=x(M,G,P,A);M.onBeforeShadow(n,M,E,T,I,z,F),n.renderBufferDirect(T,null,I,z,M,F),M.onAfterShadow(n,M,E,T,I,z,F)}}}else if(D.visible){const k=x(M,D,P,A);M.onBeforeShadow(n,M,E,T,I,k,null),n.renderBufferDirect(T,null,I,k,M,null),M.onAfterShadow(n,M,E,T,I,k,null)}}const O=M.children;for(let I=0,D=O.length;I<D;I++)_(O[I],E,T,P,A)}function S(M){M.target.removeEventListener("dispose",S);for(const T in u){const P=u[T],A=M.target.uuid;A in P&&(P[A].dispose(),delete P[A])}}}const AIt={[pC]:gC,[mC]:bC,[vC]:xC,[Km]:yC,[gC]:pC,[bC]:mC,[xC]:vC,[yC]:Km};function RIt(n,e){function r(){let xe=!1;const vt=new sr;let Ue=null;const Le=new sr(0,0,0,0);return{setMask:function(Ye){Ue!==Ye&&!xe&&(n.colorMask(Ye,Ye,Ye,Ye),Ue=Ye)},setLocked:function(Ye){xe=Ye},setClear:function(Ye,nt,_t,Gt,Ot){Ot===!0&&(Ye*=Gt,nt*=Gt,_t*=Gt),vt.set(Ye,nt,_t,Gt),Le.equals(vt)===!1&&(n.clearColor(Ye,nt,_t,Gt),Le.copy(vt))},reset:function(){xe=!1,Ue=null,Le.set(-1,0,0,0)}}}function i(){let xe=!1,vt=!1,Ue=null,Le=null,Ye=null;return{setReversed:function(nt){if(vt!==nt){const _t=e.get("EXT_clip_control");vt?_t.clipControlEXT(_t.LOWER_LEFT_EXT,_t.ZERO_TO_ONE_EXT):_t.clipControlEXT(_t.LOWER_LEFT_EXT,_t.NEGATIVE_ONE_TO_ONE_EXT);const Gt=Ye;Ye=null,this.setClear(Gt)}vt=nt},getReversed:function(){return vt},setTest:function(nt){nt?q(n.DEPTH_TEST):Q(n.DEPTH_TEST)},setMask:function(nt){Ue!==nt&&!xe&&(n.depthMask(nt),Ue=nt)},setFunc:function(nt){if(vt&&(nt=AIt[nt]),Le!==nt){switch(nt){case pC:n.depthFunc(n.NEVER);break;case gC:n.depthFunc(n.ALWAYS);break;case mC:n.depthFunc(n.LESS);break;case Km:n.depthFunc(n.LEQUAL);break;case vC:n.depthFunc(n.EQUAL);break;case yC:n.depthFunc(n.GEQUAL);break;case bC:n.depthFunc(n.GREATER);break;case xC:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Le=nt}},setLocked:function(nt){xe=nt},setClear:function(nt){Ye!==nt&&(vt&&(nt=1-nt),n.clearDepth(nt),Ye=nt)},reset:function(){xe=!1,Ue=null,Le=null,Ye=null,vt=!1}}}function a(){let xe=!1,vt=null,Ue=null,Le=null,Ye=null,nt=null,_t=null,Gt=null,Ot=null;return{setTest:function(wt){xe||(wt?q(n.STENCIL_TEST):Q(n.STENCIL_TEST))},setMask:function(wt){vt!==wt&&!xe&&(n.stencilMask(wt),vt=wt)},setFunc:function(wt,Ft,wn){(Ue!==wt||Le!==Ft||Ye!==wn)&&(n.stencilFunc(wt,Ft,wn),Ue=wt,Le=Ft,Ye=wn)},setOp:function(wt,Ft,wn){(nt!==wt||_t!==Ft||Gt!==wn)&&(n.stencilOp(wt,Ft,wn),nt=wt,_t=Ft,Gt=wn)},setLocked:function(wt){xe=wt},setClear:function(wt){Ot!==wt&&(n.clearStencil(wt),Ot=wt)},reset:function(){xe=!1,vt=null,Ue=null,Le=null,Ye=null,nt=null,_t=null,Gt=null,Ot=null}}}const o=new r,s=new i,l=new a,c=new WeakMap,u=new WeakMap;let d={},f={},h=new WeakMap,p=[],g=null,m=!1,v=null,y=null,b=null,x=null,_=null,S=null,M=null,E=new Tn(0,0,0),T=0,P=!1,A=null,N=null,O=null,I=null,D=null;const k=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let $=!1,B=0;const F=n.getParameter(n.VERSION);F.indexOf("WebGL")!==-1?(B=parseFloat(/^WebGL (\d)/.exec(F)[1]),$=B>=1):F.indexOf("OpenGL ES")!==-1&&(B=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),$=B>=2);let G=null,z={};const U=n.getParameter(n.SCISSOR_BOX),H=n.getParameter(n.VIEWPORT),X=new sr().fromArray(U),V=new sr().fromArray(H);function W(xe,vt,Ue,Le){const Ye=new Uint8Array(4),nt=n.createTexture();n.bindTexture(xe,nt),n.texParameteri(xe,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(xe,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let _t=0;_t<Ue;_t++)xe===n.TEXTURE_3D||xe===n.TEXTURE_2D_ARRAY?n.texImage3D(vt,0,n.RGBA,1,1,Le,0,n.RGBA,n.UNSIGNED_BYTE,Ye):n.texImage2D(vt+_t,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ye);return nt}const K={};K[n.TEXTURE_2D]=W(n.TEXTURE_2D,n.TEXTURE_2D,1),K[n.TEXTURE_CUBE_MAP]=W(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),K[n.TEXTURE_2D_ARRAY]=W(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),K[n.TEXTURE_3D]=W(n.TEXTURE_3D,n.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),l.setClear(0),q(n.DEPTH_TEST),s.setFunc(Km),ve(!1),Me(AH),q(n.CULL_FACE),J(ml);function q(xe){d[xe]!==!0&&(n.enable(xe),d[xe]=!0)}function Q(xe){d[xe]!==!1&&(n.disable(xe),d[xe]=!1)}function ie(xe,vt){return f[xe]!==vt?(n.bindFramebuffer(xe,vt),f[xe]=vt,xe===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=vt),xe===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=vt),!0):!1}function oe(xe,vt){let Ue=p,Le=!1;if(xe){Ue=h.get(vt),Ue===void 0&&(Ue=[],h.set(vt,Ue));const Ye=xe.textures;if(Ue.length!==Ye.length||Ue[0]!==n.COLOR_ATTACHMENT0){for(let nt=0,_t=Ye.length;nt<_t;nt++)Ue[nt]=n.COLOR_ATTACHMENT0+nt;Ue.length=Ye.length,Le=!0}}else Ue[0]!==n.BACK&&(Ue[0]=n.BACK,Le=!0);Le&&n.drawBuffers(Ue)}function ue(xe){return g!==xe?(n.useProgram(xe),g=xe,!0):!1}const le={[Nc]:n.FUNC_ADD,[LK]:n.FUNC_SUBTRACT,[kK]:n.FUNC_REVERSE_SUBTRACT};le[j3e]=n.MIN,le[H3e]=n.MAX;const me={[FK]:n.ZERO,[$K]:n.ONE,[BK]:n.SRC_COLOR,[fC]:n.SRC_ALPHA,[HK]:n.SRC_ALPHA_SATURATE,[GK]:n.DST_COLOR,[UK]:n.DST_ALPHA,[zK]:n.ONE_MINUS_SRC_COLOR,[hC]:n.ONE_MINUS_SRC_ALPHA,[jK]:n.ONE_MINUS_DST_COLOR,[VK]:n.ONE_MINUS_DST_ALPHA,[s3t]:n.CONSTANT_COLOR,[l3t]:n.ONE_MINUS_CONSTANT_COLOR,[c3t]:n.CONSTANT_ALPHA,[u3t]:n.ONE_MINUS_CONSTANT_ALPHA};function J(xe,vt,Ue,Le,Ye,nt,_t,Gt,Ot,wt){if(xe===ml){m===!0&&(Q(n.BLEND),m=!1);return}if(m===!1&&(q(n.BLEND),m=!0),xe!==DK){if(xe!==v||wt!==P){if((y!==Nc||_!==Nc)&&(n.blendEquation(n.FUNC_ADD),y=Nc,_=Nc),wt)switch(xe){case $u:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Xx:n.blendFunc(n.ONE,n.ONE);break;case Kx:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Zx:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",xe);break}else switch(xe){case $u:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Xx:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Kx:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Zx:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",xe);break}b=null,x=null,S=null,M=null,E.set(0,0,0),T=0,v=xe,P=wt}return}Ye=Ye||vt,nt=nt||Ue,_t=_t||Le,(vt!==y||Ye!==_)&&(n.blendEquationSeparate(le[vt],le[Ye]),y=vt,_=Ye),(Ue!==b||Le!==x||nt!==S||_t!==M)&&(n.blendFuncSeparate(me[Ue],me[Le],me[nt],me[_t]),b=Ue,x=Le,S=nt,M=_t),(Gt.equals(E)===!1||Ot!==T)&&(n.blendColor(Gt.r,Gt.g,Gt.b,Ot),E.copy(Gt),T=Ot),v=xe,P=!1}function pe(xe,vt){xe.side===dl?Q(n.CULL_FACE):q(n.CULL_FACE);let Ue=xe.side===va;vt&&(Ue=!Ue),ve(Ue),xe.blending===$u&&xe.transparent===!1?J(ml):J(xe.blending,xe.blendEquation,xe.blendSrc,xe.blendDst,xe.blendEquationAlpha,xe.blendSrcAlpha,xe.blendDstAlpha,xe.blendColor,xe.blendAlpha,xe.premultipliedAlpha),s.setFunc(xe.depthFunc),s.setTest(xe.depthTest),s.setMask(xe.depthWrite),o.setMask(xe.colorWrite);const Le=xe.stencilWrite;l.setTest(Le),Le&&(l.setMask(xe.stencilWriteMask),l.setFunc(xe.stencilFunc,xe.stencilRef,xe.stencilFuncMask),l.setOp(xe.stencilFail,xe.stencilZFail,xe.stencilZPass)),Xe(xe.polygonOffset,xe.polygonOffsetFactor,xe.polygonOffsetUnits),xe.alphaToCoverage===!0?q(n.SAMPLE_ALPHA_TO_COVERAGE):Q(n.SAMPLE_ALPHA_TO_COVERAGE)}function ve(xe){A!==xe&&(xe?n.frontFace(n.CW):n.frontFace(n.CCW),A=xe)}function Me(xe){xe!==V3e?(q(n.CULL_FACE),xe!==N&&(xe===AH?n.cullFace(n.BACK):xe===G3e?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Q(n.CULL_FACE),N=xe}function Re(xe){xe!==O&&($&&n.lineWidth(xe),O=xe)}function Xe(xe,vt,Ue){xe?(q(n.POLYGON_OFFSET_FILL),(I!==vt||D!==Ue)&&(n.polygonOffset(vt,Ue),I=vt,D=Ue)):Q(n.POLYGON_OFFSET_FILL)}function He(xe){xe?q(n.SCISSOR_TEST):Q(n.SCISSOR_TEST)}function ee(xe){xe===void 0&&(xe=n.TEXTURE0+k-1),G!==xe&&(n.activeTexture(xe),G=xe)}function Y(xe,vt,Ue){Ue===void 0&&(G===null?Ue=n.TEXTURE0+k-1:Ue=G);let Le=z[Ue];Le===void 0&&(Le={type:void 0,texture:void 0},z[Ue]=Le),(Le.type!==xe||Le.texture!==vt)&&(G!==Ue&&(n.activeTexture(Ue),G=Ue),n.bindTexture(xe,vt||K[xe]),Le.type=xe,Le.texture=vt)}function ce(){const xe=z[G];xe!==void 0&&xe.type!==void 0&&(n.bindTexture(xe.type,null),xe.type=void 0,xe.texture=void 0)}function _e(){try{n.compressedTexImage2D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Ae(){try{n.compressedTexImage3D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Ce(){try{n.texSubImage2D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function et(){try{n.texSubImage3D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Ve(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function qe(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function dt(){try{n.texStorage2D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Ge(){try{n.texStorage3D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function We(){try{n.texImage2D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Ze(){try{n.texImage3D.apply(n,arguments)}catch(xe){console.error("THREE.WebGLState:",xe)}}function Ie(xe){X.equals(xe)===!1&&(n.scissor(xe.x,xe.y,xe.z,xe.w),X.copy(xe))}function De(xe){V.equals(xe)===!1&&(n.viewport(xe.x,xe.y,xe.z,xe.w),V.copy(xe))}function bt(xe,vt){let Ue=u.get(vt);Ue===void 0&&(Ue=new WeakMap,u.set(vt,Ue));let Le=Ue.get(xe);Le===void 0&&(Le=n.getUniformBlockIndex(vt,xe.name),Ue.set(xe,Le))}function Ke(xe,vt){const Le=u.get(vt).get(xe);c.get(vt)!==Le&&(n.uniformBlockBinding(vt,Le,xe.__bindingPointIndex),c.set(vt,Le))}function mt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),s.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},G=null,z={},f={},h=new WeakMap,p=[],g=null,m=!1,v=null,y=null,b=null,x=null,_=null,S=null,M=null,E=new Tn(0,0,0),T=0,P=!1,A=null,N=null,O=null,I=null,D=null,X.set(0,0,n.canvas.width,n.canvas.height),V.set(0,0,n.canvas.width,n.canvas.height),o.reset(),s.reset(),l.reset()}return{buffers:{color:o,depth:s,stencil:l},enable:q,disable:Q,bindFramebuffer:ie,drawBuffers:oe,useProgram:ue,setBlending:J,setMaterial:pe,setFlipSided:ve,setCullFace:Me,setLineWidth:Re,setPolygonOffset:Xe,setScissorTest:He,activeTexture:ee,bindTexture:Y,unbindTexture:ce,compressedTexImage2D:_e,compressedTexImage3D:Ae,texImage2D:We,texImage3D:Ze,updateUBOMapping:bt,uniformBlockBinding:Ke,texStorage2D:dt,texStorage3D:Ge,texSubImage2D:Ce,texSubImage3D:et,compressedTexSubImage2D:Ve,compressedTexSubImage3D:qe,scissor:Ie,viewport:De,reset:mt}}function PIt(n,e,r,i,a,o,s){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Nt,d=new WeakMap;let f;const h=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(ee,Y){return p?new OffscreenCanvas(ee,Y):RC("canvas")}function m(ee,Y,ce){let _e=1;const Ae=He(ee);if((Ae.width>ce||Ae.height>ce)&&(_e=ce/Math.max(Ae.width,Ae.height)),_e<1)if(typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ee instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ee instanceof ImageBitmap||typeof VideoFrame<"u"&&ee instanceof VideoFrame){const Ce=Math.floor(_e*Ae.width),et=Math.floor(_e*Ae.height);f===void 0&&(f=g(Ce,et));const Ve=Y?g(Ce,et):f;return Ve.width=Ce,Ve.height=et,Ve.getContext("2d").drawImage(ee,0,0,Ce,et),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ae.width+"x"+Ae.height+") to ("+Ce+"x"+et+")."),Ve}else return"data"in ee&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ae.width+"x"+Ae.height+")."),ee;return ee}function v(ee){return ee.generateMipmaps}function y(ee){n.generateMipmap(ee)}function b(ee){return ee.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:ee.isWebGL3DRenderTarget?n.TEXTURE_3D:ee.isWebGLArrayRenderTarget||ee.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function x(ee,Y,ce,_e,Ae=!1){if(ee!==null){if(n[ee]!==void 0)return n[ee];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ee+"'")}let Ce=Y;if(Y===n.RED&&(ce===n.FLOAT&&(Ce=n.R32F),ce===n.HALF_FLOAT&&(Ce=n.R16F),ce===n.UNSIGNED_BYTE&&(Ce=n.R8)),Y===n.RED_INTEGER&&(ce===n.UNSIGNED_BYTE&&(Ce=n.R8UI),ce===n.UNSIGNED_SHORT&&(Ce=n.R16UI),ce===n.UNSIGNED_INT&&(Ce=n.R32UI),ce===n.BYTE&&(Ce=n.R8I),ce===n.SHORT&&(Ce=n.R16I),ce===n.INT&&(Ce=n.R32I)),Y===n.RG&&(ce===n.FLOAT&&(Ce=n.RG32F),ce===n.HALF_FLOAT&&(Ce=n.RG16F),ce===n.UNSIGNED_BYTE&&(Ce=n.RG8)),Y===n.RG_INTEGER&&(ce===n.UNSIGNED_BYTE&&(Ce=n.RG8UI),ce===n.UNSIGNED_SHORT&&(Ce=n.RG16UI),ce===n.UNSIGNED_INT&&(Ce=n.RG32UI),ce===n.BYTE&&(Ce=n.RG8I),ce===n.SHORT&&(Ce=n.RG16I),ce===n.INT&&(Ce=n.RG32I)),Y===n.RGB_INTEGER&&(ce===n.UNSIGNED_BYTE&&(Ce=n.RGB8UI),ce===n.UNSIGNED_SHORT&&(Ce=n.RGB16UI),ce===n.UNSIGNED_INT&&(Ce=n.RGB32UI),ce===n.BYTE&&(Ce=n.RGB8I),ce===n.SHORT&&(Ce=n.RGB16I),ce===n.INT&&(Ce=n.RGB32I)),Y===n.RGBA_INTEGER&&(ce===n.UNSIGNED_BYTE&&(Ce=n.RGBA8UI),ce===n.UNSIGNED_SHORT&&(Ce=n.RGBA16UI),ce===n.UNSIGNED_INT&&(Ce=n.RGBA32UI),ce===n.BYTE&&(Ce=n.RGBA8I),ce===n.SHORT&&(Ce=n.RGBA16I),ce===n.INT&&(Ce=n.RGBA32I)),Y===n.RGB&&ce===n.UNSIGNED_INT_5_9_9_9_REV&&(Ce=n.RGB9_E5),Y===n.RGBA){const et=Ae?IO:Mr.getTransfer(_e);ce===n.FLOAT&&(Ce=n.RGBA32F),ce===n.HALF_FLOAT&&(Ce=n.RGBA16F),ce===n.UNSIGNED_BYTE&&(Ce=et===mi?n.SRGB8_ALPHA8:n.RGBA8),ce===n.UNSIGNED_SHORT_4_4_4_4&&(Ce=n.RGBA4),ce===n.UNSIGNED_SHORT_5_5_5_1&&(Ce=n.RGB5_A1)}return(Ce===n.R16F||Ce===n.R32F||Ce===n.RG16F||Ce===n.RG32F||Ce===n.RGBA16F||Ce===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ce}function _(ee,Y){let ce;return ee?Y===null||Y===Ca||Y===rh?ce=n.DEPTH24_STENCIL8:Y===Ka?ce=n.DEPTH32F_STENCIL8:Y===Bd&&(ce=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Y===null||Y===Ca||Y===rh?ce=n.DEPTH_COMPONENT24:Y===Ka?ce=n.DEPTH_COMPONENT32F:Y===Bd&&(ce=n.DEPTH_COMPONENT16),ce}function S(ee,Y){return v(ee)===!0||ee.isFramebufferTexture&&ee.minFilter!==na&&ee.minFilter!==Lo?Math.log2(Math.max(Y.width,Y.height))+1:ee.mipmaps!==void 0&&ee.mipmaps.length>0?ee.mipmaps.length:ee.isCompressedTexture&&Array.isArray(ee.image)?Y.mipmaps.length:1}function M(ee){const Y=ee.target;Y.removeEventListener("dispose",M),T(Y),Y.isVideoTexture&&d.delete(Y)}function E(ee){const Y=ee.target;Y.removeEventListener("dispose",E),A(Y)}function T(ee){const Y=i.get(ee);if(Y.__webglInit===void 0)return;const ce=ee.source,_e=h.get(ce);if(_e){const Ae=_e[Y.__cacheKey];Ae.usedTimes--,Ae.usedTimes===0&&P(ee),Object.keys(_e).length===0&&h.delete(ce)}i.remove(ee)}function P(ee){const Y=i.get(ee);n.deleteTexture(Y.__webglTexture);const ce=ee.source,_e=h.get(ce);delete _e[Y.__cacheKey],s.memory.textures--}function A(ee){const Y=i.get(ee);if(ee.depthTexture&&(ee.depthTexture.dispose(),i.remove(ee.depthTexture)),ee.isWebGLCubeRenderTarget)for(let _e=0;_e<6;_e++){if(Array.isArray(Y.__webglFramebuffer[_e]))for(let Ae=0;Ae<Y.__webglFramebuffer[_e].length;Ae++)n.deleteFramebuffer(Y.__webglFramebuffer[_e][Ae]);else n.deleteFramebuffer(Y.__webglFramebuffer[_e]);Y.__webglDepthbuffer&&n.deleteRenderbuffer(Y.__webglDepthbuffer[_e])}else{if(Array.isArray(Y.__webglFramebuffer))for(let _e=0;_e<Y.__webglFramebuffer.length;_e++)n.deleteFramebuffer(Y.__webglFramebuffer[_e]);else n.deleteFramebuffer(Y.__webglFramebuffer);if(Y.__webglDepthbuffer&&n.deleteRenderbuffer(Y.__webglDepthbuffer),Y.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Y.__webglMultisampledFramebuffer),Y.__webglColorRenderbuffer)for(let _e=0;_e<Y.__webglColorRenderbuffer.length;_e++)Y.__webglColorRenderbuffer[_e]&&n.deleteRenderbuffer(Y.__webglColorRenderbuffer[_e]);Y.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Y.__webglDepthRenderbuffer)}const ce=ee.textures;for(let _e=0,Ae=ce.length;_e<Ae;_e++){const Ce=i.get(ce[_e]);Ce.__webglTexture&&(n.deleteTexture(Ce.__webglTexture),s.memory.textures--),i.remove(ce[_e])}i.remove(ee)}let N=0;function O(){N=0}function I(){const ee=N;return ee>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ee+" texture units while this GPU supports only "+a.maxTextures),N+=1,ee}function D(ee){const Y=[];return Y.push(ee.wrapS),Y.push(ee.wrapT),Y.push(ee.wrapR||0),Y.push(ee.magFilter),Y.push(ee.minFilter),Y.push(ee.anisotropy),Y.push(ee.internalFormat),Y.push(ee.format),Y.push(ee.type),Y.push(ee.generateMipmaps),Y.push(ee.premultiplyAlpha),Y.push(ee.flipY),Y.push(ee.unpackAlignment),Y.push(ee.colorSpace),Y.join()}function k(ee,Y){const ce=i.get(ee);if(ee.isVideoTexture&&Re(ee),ee.isRenderTargetTexture===!1&&ee.version>0&&ce.__version!==ee.version){const _e=ee.image;if(_e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(_e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{V(ce,ee,Y);return}}r.bindTexture(n.TEXTURE_2D,ce.__webglTexture,n.TEXTURE0+Y)}function $(ee,Y){const ce=i.get(ee);if(ee.version>0&&ce.__version!==ee.version){V(ce,ee,Y);return}r.bindTexture(n.TEXTURE_2D_ARRAY,ce.__webglTexture,n.TEXTURE0+Y)}function B(ee,Y){const ce=i.get(ee);if(ee.version>0&&ce.__version!==ee.version){V(ce,ee,Y);return}r.bindTexture(n.TEXTURE_3D,ce.__webglTexture,n.TEXTURE0+Y)}function F(ee,Y){const ce=i.get(ee);if(ee.version>0&&ce.__version!==ee.version){W(ce,ee,Y);return}r.bindTexture(n.TEXTURE_CUBE_MAP,ce.__webglTexture,n.TEXTURE0+Y)}const G={[Ey]:n.REPEAT,[Gf]:n.CLAMP_TO_EDGE,[Cy]:n.MIRRORED_REPEAT},z={[na]:n.NEAREST,[OO]:n.NEAREST_MIPMAP_NEAREST,[jf]:n.NEAREST_MIPMAP_LINEAR,[Lo]:n.LINEAR,[gx]:n.LINEAR_MIPMAP_NEAREST,[Yl]:n.LINEAR_MIPMAP_LINEAR},U={[ZK]:n.NEVER,[nZ]:n.ALWAYS,[TL]:n.LESS,[AL]:n.LEQUAL,[QK]:n.EQUAL,[tZ]:n.GEQUAL,[JK]:n.GREATER,[eZ]:n.NOTEQUAL};function H(ee,Y){if(Y.type===Ka&&e.has("OES_texture_float_linear")===!1&&(Y.magFilter===Lo||Y.magFilter===gx||Y.magFilter===jf||Y.magFilter===Yl||Y.minFilter===Lo||Y.minFilter===gx||Y.minFilter===jf||Y.minFilter===Yl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(ee,n.TEXTURE_WRAP_S,G[Y.wrapS]),n.texParameteri(ee,n.TEXTURE_WRAP_T,G[Y.wrapT]),(ee===n.TEXTURE_3D||ee===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ee,n.TEXTURE_WRAP_R,G[Y.wrapR]),n.texParameteri(ee,n.TEXTURE_MAG_FILTER,z[Y.magFilter]),n.texParameteri(ee,n.TEXTURE_MIN_FILTER,z[Y.minFilter]),Y.compareFunction&&(n.texParameteri(ee,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ee,n.TEXTURE_COMPARE_FUNC,U[Y.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Y.magFilter===na||Y.minFilter!==jf&&Y.minFilter!==Yl||Y.type===Ka&&e.has("OES_texture_float_linear")===!1)return;if(Y.anisotropy>1||i.get(Y).__currentAnisotropy){const ce=e.get("EXT_texture_filter_anisotropic");n.texParameterf(ee,ce.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,a.getMaxAnisotropy())),i.get(Y).__currentAnisotropy=Y.anisotropy}}}function X(ee,Y){let ce=!1;ee.__webglInit===void 0&&(ee.__webglInit=!0,Y.addEventListener("dispose",M));const _e=Y.source;let Ae=h.get(_e);Ae===void 0&&(Ae={},h.set(_e,Ae));const Ce=D(Y);if(Ce!==ee.__cacheKey){Ae[Ce]===void 0&&(Ae[Ce]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,ce=!0),Ae[Ce].usedTimes++;const et=Ae[ee.__cacheKey];et!==void 0&&(Ae[ee.__cacheKey].usedTimes--,et.usedTimes===0&&P(Y)),ee.__cacheKey=Ce,ee.__webglTexture=Ae[Ce].texture}return ce}function V(ee,Y,ce){let _e=n.TEXTURE_2D;(Y.isDataArrayTexture||Y.isCompressedArrayTexture)&&(_e=n.TEXTURE_2D_ARRAY),Y.isData3DTexture&&(_e=n.TEXTURE_3D);const Ae=X(ee,Y),Ce=Y.source;r.bindTexture(_e,ee.__webglTexture,n.TEXTURE0+ce);const et=i.get(Ce);if(Ce.version!==et.__version||Ae===!0){r.activeTexture(n.TEXTURE0+ce);const Ve=Mr.getPrimaries(Mr.workingColorSpace),qe=Y.colorSpace===Oc?null:Mr.getPrimaries(Y.colorSpace),dt=Y.colorSpace===Oc||Ve===qe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Y.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Y.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,dt);let Ge=m(Y.image,!1,a.maxTextureSize);Ge=Xe(Y,Ge);const We=o.convert(Y.format,Y.colorSpace),Ze=o.convert(Y.type);let Ie=x(Y.internalFormat,We,Ze,Y.colorSpace,Y.isVideoTexture);H(_e,Y);let De;const bt=Y.mipmaps,Ke=Y.isVideoTexture!==!0,mt=et.__version===void 0||Ae===!0,xe=Ce.dataReady,vt=S(Y,Ge);if(Y.isDepthTexture)Ie=_(Y.format===ih,Y.type),mt&&(Ke?r.texStorage2D(n.TEXTURE_2D,1,Ie,Ge.width,Ge.height):r.texImage2D(n.TEXTURE_2D,0,Ie,Ge.width,Ge.height,0,We,Ze,null));else if(Y.isDataTexture)if(bt.length>0){Ke&&mt&&r.texStorage2D(n.TEXTURE_2D,vt,Ie,bt[0].width,bt[0].height);for(let Ue=0,Le=bt.length;Ue<Le;Ue++)De=bt[Ue],Ke?xe&&r.texSubImage2D(n.TEXTURE_2D,Ue,0,0,De.width,De.height,We,Ze,De.data):r.texImage2D(n.TEXTURE_2D,Ue,Ie,De.width,De.height,0,We,Ze,De.data);Y.generateMipmaps=!1}else Ke?(mt&&r.texStorage2D(n.TEXTURE_2D,vt,Ie,Ge.width,Ge.height),xe&&r.texSubImage2D(n.TEXTURE_2D,0,0,0,Ge.width,Ge.height,We,Ze,Ge.data)):r.texImage2D(n.TEXTURE_2D,0,Ie,Ge.width,Ge.height,0,We,Ze,Ge.data);else if(Y.isCompressedTexture)if(Y.isCompressedArrayTexture){Ke&&mt&&r.texStorage3D(n.TEXTURE_2D_ARRAY,vt,Ie,bt[0].width,bt[0].height,Ge.depth);for(let Ue=0,Le=bt.length;Ue<Le;Ue++)if(De=bt[Ue],Y.format!==vs)if(We!==null)if(Ke){if(xe)if(Y.layerUpdates.size>0){const Ye=Bpe(De.width,De.height,Y.format,Y.type);for(const nt of Y.layerUpdates){const _t=De.data.subarray(nt*Ye/De.data.BYTES_PER_ELEMENT,(nt+1)*Ye/De.data.BYTES_PER_ELEMENT);r.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ue,0,0,nt,De.width,De.height,1,We,_t)}Y.clearLayerUpdates()}else r.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ue,0,0,0,De.width,De.height,Ge.depth,We,De.data)}else r.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ue,Ie,De.width,De.height,Ge.depth,0,De.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ke?xe&&r.texSubImage3D(n.TEXTURE_2D_ARRAY,Ue,0,0,0,De.width,De.height,Ge.depth,We,Ze,De.data):r.texImage3D(n.TEXTURE_2D_ARRAY,Ue,Ie,De.width,De.height,Ge.depth,0,We,Ze,De.data)}else{Ke&&mt&&r.texStorage2D(n.TEXTURE_2D,vt,Ie,bt[0].width,bt[0].height);for(let Ue=0,Le=bt.length;Ue<Le;Ue++)De=bt[Ue],Y.format!==vs?We!==null?Ke?xe&&r.compressedTexSubImage2D(n.TEXTURE_2D,Ue,0,0,De.width,De.height,We,De.data):r.compressedTexImage2D(n.TEXTURE_2D,Ue,Ie,De.width,De.height,0,De.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ke?xe&&r.texSubImage2D(n.TEXTURE_2D,Ue,0,0,De.width,De.height,We,Ze,De.data):r.texImage2D(n.TEXTURE_2D,Ue,Ie,De.width,De.height,0,We,Ze,De.data)}else if(Y.isDataArrayTexture)if(Ke){if(mt&&r.texStorage3D(n.TEXTURE_2D_ARRAY,vt,Ie,Ge.width,Ge.height,Ge.depth),xe)if(Y.layerUpdates.size>0){const Ue=Bpe(Ge.width,Ge.height,Y.format,Y.type);for(const Le of Y.layerUpdates){const Ye=Ge.data.subarray(Le*Ue/Ge.data.BYTES_PER_ELEMENT,(Le+1)*Ue/Ge.data.BYTES_PER_ELEMENT);r.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Le,Ge.width,Ge.height,1,We,Ze,Ye)}Y.clearLayerUpdates()}else r.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ge.width,Ge.height,Ge.depth,We,Ze,Ge.data)}else r.texImage3D(n.TEXTURE_2D_ARRAY,0,Ie,Ge.width,Ge.height,Ge.depth,0,We,Ze,Ge.data);else if(Y.isData3DTexture)Ke?(mt&&r.texStorage3D(n.TEXTURE_3D,vt,Ie,Ge.width,Ge.height,Ge.depth),xe&&r.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ge.width,Ge.height,Ge.depth,We,Ze,Ge.data)):r.texImage3D(n.TEXTURE_3D,0,Ie,Ge.width,Ge.height,Ge.depth,0,We,Ze,Ge.data);else if(Y.isFramebufferTexture){if(mt)if(Ke)r.texStorage2D(n.TEXTURE_2D,vt,Ie,Ge.width,Ge.height);else{let Ue=Ge.width,Le=Ge.height;for(let Ye=0;Ye<vt;Ye++)r.texImage2D(n.TEXTURE_2D,Ye,Ie,Ue,Le,0,We,Ze,null),Ue>>=1,Le>>=1}}else if(bt.length>0){if(Ke&&mt){const Ue=He(bt[0]);r.texStorage2D(n.TEXTURE_2D,vt,Ie,Ue.width,Ue.height)}for(let Ue=0,Le=bt.length;Ue<Le;Ue++)De=bt[Ue],Ke?xe&&r.texSubImage2D(n.TEXTURE_2D,Ue,0,0,We,Ze,De):r.texImage2D(n.TEXTURE_2D,Ue,Ie,We,Ze,De);Y.generateMipmaps=!1}else if(Ke){if(mt){const Ue=He(Ge);r.texStorage2D(n.TEXTURE_2D,vt,Ie,Ue.width,Ue.height)}xe&&r.texSubImage2D(n.TEXTURE_2D,0,0,0,We,Ze,Ge)}else r.texImage2D(n.TEXTURE_2D,0,Ie,We,Ze,Ge);v(Y)&&y(_e),et.__version=Ce.version,Y.onUpdate&&Y.onUpdate(Y)}ee.__version=Y.version}function W(ee,Y,ce){if(Y.image.length!==6)return;const _e=X(ee,Y),Ae=Y.source;r.bindTexture(n.TEXTURE_CUBE_MAP,ee.__webglTexture,n.TEXTURE0+ce);const Ce=i.get(Ae);if(Ae.version!==Ce.__version||_e===!0){r.activeTexture(n.TEXTURE0+ce);const et=Mr.getPrimaries(Mr.workingColorSpace),Ve=Y.colorSpace===Oc?null:Mr.getPrimaries(Y.colorSpace),qe=Y.colorSpace===Oc||et===Ve?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Y.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Y.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,qe);const dt=Y.isCompressedTexture||Y.image[0].isCompressedTexture,Ge=Y.image[0]&&Y.image[0].isDataTexture,We=[];for(let Le=0;Le<6;Le++)!dt&&!Ge?We[Le]=m(Y.image[Le],!0,a.maxCubemapSize):We[Le]=Ge?Y.image[Le].image:Y.image[Le],We[Le]=Xe(Y,We[Le]);const Ze=We[0],Ie=o.convert(Y.format,Y.colorSpace),De=o.convert(Y.type),bt=x(Y.internalFormat,Ie,De,Y.colorSpace),Ke=Y.isVideoTexture!==!0,mt=Ce.__version===void 0||_e===!0,xe=Ae.dataReady;let vt=S(Y,Ze);H(n.TEXTURE_CUBE_MAP,Y);let Ue;if(dt){Ke&&mt&&r.texStorage2D(n.TEXTURE_CUBE_MAP,vt,bt,Ze.width,Ze.height);for(let Le=0;Le<6;Le++){Ue=We[Le].mipmaps;for(let Ye=0;Ye<Ue.length;Ye++){const nt=Ue[Ye];Y.format!==vs?Ie!==null?Ke?xe&&r.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ye,0,0,nt.width,nt.height,Ie,nt.data):r.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ye,bt,nt.width,nt.height,0,nt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ke?xe&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ye,0,0,nt.width,nt.height,Ie,De,nt.data):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ye,bt,nt.width,nt.height,0,Ie,De,nt.data)}}}else{if(Ue=Y.mipmaps,Ke&&mt){Ue.length>0&&vt++;const Le=He(We[0]);r.texStorage2D(n.TEXTURE_CUBE_MAP,vt,bt,Le.width,Le.height)}for(let Le=0;Le<6;Le++)if(Ge){Ke?xe&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,We[Le].width,We[Le].height,Ie,De,We[Le].data):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,bt,We[Le].width,We[Le].height,0,Ie,De,We[Le].data);for(let Ye=0;Ye<Ue.length;Ye++){const _t=Ue[Ye].image[Le].image;Ke?xe&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ye+1,0,0,_t.width,_t.height,Ie,De,_t.data):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ye+1,bt,_t.width,_t.height,0,Ie,De,_t.data)}}else{Ke?xe&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,0,0,Ie,De,We[Le]):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0,bt,Ie,De,We[Le]);for(let Ye=0;Ye<Ue.length;Ye++){const nt=Ue[Ye];Ke?xe&&r.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ye+1,0,0,Ie,De,nt.image[Le]):r.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ye+1,bt,Ie,De,nt.image[Le])}}}v(Y)&&y(n.TEXTURE_CUBE_MAP),Ce.__version=Ae.version,Y.onUpdate&&Y.onUpdate(Y)}ee.__version=Y.version}function K(ee,Y,ce,_e,Ae,Ce){const et=o.convert(ce.format,ce.colorSpace),Ve=o.convert(ce.type),qe=x(ce.internalFormat,et,Ve,ce.colorSpace),dt=i.get(Y),Ge=i.get(ce);if(Ge.__renderTarget=Y,!dt.__hasExternalTextures){const We=Math.max(1,Y.width>>Ce),Ze=Math.max(1,Y.height>>Ce);Ae===n.TEXTURE_3D||Ae===n.TEXTURE_2D_ARRAY?r.texImage3D(Ae,Ce,qe,We,Ze,Y.depth,0,et,Ve,null):r.texImage2D(Ae,Ce,qe,We,Ze,0,et,Ve,null)}r.bindFramebuffer(n.FRAMEBUFFER,ee),Me(Y)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,_e,Ae,Ge.__webglTexture,0,ve(Y)):(Ae===n.TEXTURE_2D||Ae>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ae<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,_e,Ae,Ge.__webglTexture,Ce),r.bindFramebuffer(n.FRAMEBUFFER,null)}function q(ee,Y,ce){if(n.bindRenderbuffer(n.RENDERBUFFER,ee),Y.depthBuffer){const _e=Y.depthTexture,Ae=_e&&_e.isDepthTexture?_e.type:null,Ce=_(Y.stencilBuffer,Ae),et=Y.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ve=ve(Y);Me(Y)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ve,Ce,Y.width,Y.height):ce?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ve,Ce,Y.width,Y.height):n.renderbufferStorage(n.RENDERBUFFER,Ce,Y.width,Y.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,et,n.RENDERBUFFER,ee)}else{const _e=Y.textures;for(let Ae=0;Ae<_e.length;Ae++){const Ce=_e[Ae],et=o.convert(Ce.format,Ce.colorSpace),Ve=o.convert(Ce.type),qe=x(Ce.internalFormat,et,Ve,Ce.colorSpace),dt=ve(Y);ce&&Me(Y)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,dt,qe,Y.width,Y.height):Me(Y)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,dt,qe,Y.width,Y.height):n.renderbufferStorage(n.RENDERBUFFER,qe,Y.width,Y.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Q(ee,Y){if(Y&&Y.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(n.FRAMEBUFFER,ee),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const _e=i.get(Y.depthTexture);_e.__renderTarget=Y,(!_e.__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),k(Y.depthTexture,0);const Ae=_e.__webglTexture,Ce=ve(Y);if(Y.depthTexture.format===Jf)Me(Y)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ae,0,Ce):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ae,0);else if(Y.depthTexture.format===ih)Me(Y)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ae,0,Ce):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ae,0);else throw new Error("Unknown depthTexture format")}function ie(ee){const Y=i.get(ee),ce=ee.isWebGLCubeRenderTarget===!0;if(Y.__boundDepthTexture!==ee.depthTexture){const _e=ee.depthTexture;if(Y.__depthDisposeCallback&&Y.__depthDisposeCallback(),_e){const Ae=()=>{delete Y.__boundDepthTexture,delete Y.__depthDisposeCallback,_e.removeEventListener("dispose",Ae)};_e.addEventListener("dispose",Ae),Y.__depthDisposeCallback=Ae}Y.__boundDepthTexture=_e}if(ee.depthTexture&&!Y.__autoAllocateDepthBuffer){if(ce)throw new Error("target.depthTexture not supported in Cube render targets");Q(Y.__webglFramebuffer,ee)}else if(ce){Y.__webglDepthbuffer=[];for(let _e=0;_e<6;_e++)if(r.bindFramebuffer(n.FRAMEBUFFER,Y.__webglFramebuffer[_e]),Y.__webglDepthbuffer[_e]===void 0)Y.__webglDepthbuffer[_e]=n.createRenderbuffer(),q(Y.__webglDepthbuffer[_e],ee,!1);else{const Ae=ee.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ce=Y.__webglDepthbuffer[_e];n.bindRenderbuffer(n.RENDERBUFFER,Ce),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ae,n.RENDERBUFFER,Ce)}}else if(r.bindFramebuffer(n.FRAMEBUFFER,Y.__webglFramebuffer),Y.__webglDepthbuffer===void 0)Y.__webglDepthbuffer=n.createRenderbuffer(),q(Y.__webglDepthbuffer,ee,!1);else{const _e=ee.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ae=Y.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Ae),n.framebufferRenderbuffer(n.FRAMEBUFFER,_e,n.RENDERBUFFER,Ae)}r.bindFramebuffer(n.FRAMEBUFFER,null)}function oe(ee,Y,ce){const _e=i.get(ee);Y!==void 0&&K(_e.__webglFramebuffer,ee,ee.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ce!==void 0&&ie(ee)}function ue(ee){const Y=ee.texture,ce=i.get(ee),_e=i.get(Y);ee.addEventListener("dispose",E);const Ae=ee.textures,Ce=ee.isWebGLCubeRenderTarget===!0,et=Ae.length>1;if(et||(_e.__webglTexture===void 0&&(_e.__webglTexture=n.createTexture()),_e.__version=Y.version,s.memory.textures++),Ce){ce.__webglFramebuffer=[];for(let Ve=0;Ve<6;Ve++)if(Y.mipmaps&&Y.mipmaps.length>0){ce.__webglFramebuffer[Ve]=[];for(let qe=0;qe<Y.mipmaps.length;qe++)ce.__webglFramebuffer[Ve][qe]=n.createFramebuffer()}else ce.__webglFramebuffer[Ve]=n.createFramebuffer()}else{if(Y.mipmaps&&Y.mipmaps.length>0){ce.__webglFramebuffer=[];for(let Ve=0;Ve<Y.mipmaps.length;Ve++)ce.__webglFramebuffer[Ve]=n.createFramebuffer()}else ce.__webglFramebuffer=n.createFramebuffer();if(et)for(let Ve=0,qe=Ae.length;Ve<qe;Ve++){const dt=i.get(Ae[Ve]);dt.__webglTexture===void 0&&(dt.__webglTexture=n.createTexture(),s.memory.textures++)}if(ee.samples>0&&Me(ee)===!1){ce.__webglMultisampledFramebuffer=n.createFramebuffer(),ce.__webglColorRenderbuffer=[],r.bindFramebuffer(n.FRAMEBUFFER,ce.__webglMultisampledFramebuffer);for(let Ve=0;Ve<Ae.length;Ve++){const qe=Ae[Ve];ce.__webglColorRenderbuffer[Ve]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ce.__webglColorRenderbuffer[Ve]);const dt=o.convert(qe.format,qe.colorSpace),Ge=o.convert(qe.type),We=x(qe.internalFormat,dt,Ge,qe.colorSpace,ee.isXRRenderTarget===!0),Ze=ve(ee);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ze,We,ee.width,ee.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ve,n.RENDERBUFFER,ce.__webglColorRenderbuffer[Ve])}n.bindRenderbuffer(n.RENDERBUFFER,null),ee.depthBuffer&&(ce.__webglDepthRenderbuffer=n.createRenderbuffer(),q(ce.__webglDepthRenderbuffer,ee,!0)),r.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ce){r.bindTexture(n.TEXTURE_CUBE_MAP,_e.__webglTexture),H(n.TEXTURE_CUBE_MAP,Y);for(let Ve=0;Ve<6;Ve++)if(Y.mipmaps&&Y.mipmaps.length>0)for(let qe=0;qe<Y.mipmaps.length;qe++)K(ce.__webglFramebuffer[Ve][qe],ee,Y,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,qe);else K(ce.__webglFramebuffer[Ve],ee,Y,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0);v(Y)&&y(n.TEXTURE_CUBE_MAP),r.unbindTexture()}else if(et){for(let Ve=0,qe=Ae.length;Ve<qe;Ve++){const dt=Ae[Ve],Ge=i.get(dt);r.bindTexture(n.TEXTURE_2D,Ge.__webglTexture),H(n.TEXTURE_2D,dt),K(ce.__webglFramebuffer,ee,dt,n.COLOR_ATTACHMENT0+Ve,n.TEXTURE_2D,0),v(dt)&&y(n.TEXTURE_2D)}r.unbindTexture()}else{let Ve=n.TEXTURE_2D;if((ee.isWebGL3DRenderTarget||ee.isWebGLArrayRenderTarget)&&(Ve=ee.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),r.bindTexture(Ve,_e.__webglTexture),H(Ve,Y),Y.mipmaps&&Y.mipmaps.length>0)for(let qe=0;qe<Y.mipmaps.length;qe++)K(ce.__webglFramebuffer[qe],ee,Y,n.COLOR_ATTACHMENT0,Ve,qe);else K(ce.__webglFramebuffer,ee,Y,n.COLOR_ATTACHMENT0,Ve,0);v(Y)&&y(Ve),r.unbindTexture()}ee.depthBuffer&&ie(ee)}function le(ee){const Y=ee.textures;for(let ce=0,_e=Y.length;ce<_e;ce++){const Ae=Y[ce];if(v(Ae)){const Ce=b(ee),et=i.get(Ae).__webglTexture;r.bindTexture(Ce,et),y(Ce),r.unbindTexture()}}}const me=[],J=[];function pe(ee){if(ee.samples>0){if(Me(ee)===!1){const Y=ee.textures,ce=ee.width,_e=ee.height;let Ae=n.COLOR_BUFFER_BIT;const Ce=ee.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,et=i.get(ee),Ve=Y.length>1;if(Ve)for(let qe=0;qe<Y.length;qe++)r.bindFramebuffer(n.FRAMEBUFFER,et.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.RENDERBUFFER,null),r.bindFramebuffer(n.FRAMEBUFFER,et.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.TEXTURE_2D,null,0);r.bindFramebuffer(n.READ_FRAMEBUFFER,et.__webglMultisampledFramebuffer),r.bindFramebuffer(n.DRAW_FRAMEBUFFER,et.__webglFramebuffer);for(let qe=0;qe<Y.length;qe++){if(ee.resolveDepthBuffer&&(ee.depthBuffer&&(Ae|=n.DEPTH_BUFFER_BIT),ee.stencilBuffer&&ee.resolveStencilBuffer&&(Ae|=n.STENCIL_BUFFER_BIT)),Ve){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,et.__webglColorRenderbuffer[qe]);const dt=i.get(Y[qe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,dt,0)}n.blitFramebuffer(0,0,ce,_e,0,0,ce,_e,Ae,n.NEAREST),c===!0&&(me.length=0,J.length=0,me.push(n.COLOR_ATTACHMENT0+qe),ee.depthBuffer&&ee.resolveDepthBuffer===!1&&(me.push(Ce),J.push(Ce),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,J)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,me))}if(r.bindFramebuffer(n.READ_FRAMEBUFFER,null),r.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ve)for(let qe=0;qe<Y.length;qe++){r.bindFramebuffer(n.FRAMEBUFFER,et.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.RENDERBUFFER,et.__webglColorRenderbuffer[qe]);const dt=i.get(Y[qe]).__webglTexture;r.bindFramebuffer(n.FRAMEBUFFER,et.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+qe,n.TEXTURE_2D,dt,0)}r.bindFramebuffer(n.DRAW_FRAMEBUFFER,et.__webglMultisampledFramebuffer)}else if(ee.depthBuffer&&ee.resolveDepthBuffer===!1&&c){const Y=ee.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Y])}}}function ve(ee){return Math.min(a.maxSamples,ee.samples)}function Me(ee){const Y=i.get(ee);return ee.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function Re(ee){const Y=s.render.frame;d.get(ee)!==Y&&(d.set(ee,Y),ee.update())}function Xe(ee,Y){const ce=ee.colorSpace,_e=ee.format,Ae=ee.type;return ee.isCompressedTexture===!0||ee.isVideoTexture===!0||ce!==Bu&&ce!==Oc&&(Mr.getTransfer(ce)===mi?(_e!==vs||Ae!==Ws)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ce)),Y}function He(ee){return typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement?(u.width=ee.naturalWidth||ee.width,u.height=ee.naturalHeight||ee.height):typeof VideoFrame<"u"&&ee instanceof VideoFrame?(u.width=ee.displayWidth,u.height=ee.displayHeight):(u.width=ee.width,u.height=ee.height),u}this.allocateTextureUnit=I,this.resetTextureUnits=O,this.setTexture2D=k,this.setTexture2DArray=$,this.setTexture3D=B,this.setTextureCube=F,this.rebindTextures=oe,this.setupRenderTarget=ue,this.updateRenderTargetMipmap=le,this.updateMultisampleRenderTarget=pe,this.setupDepthRenderbuffer=ie,this.setupFrameBufferTexture=K,this.useMultisampledRTT=Me}function NIt(n,e){function r(i,a=Oc){let o;const s=Mr.getTransfer(a);if(i===Ws)return n.UNSIGNED_BYTE;if(i===EL)return n.UNSIGNED_SHORT_4_4_4_4;if(i===CL)return n.UNSIGNED_SHORT_5_5_5_1;if(i===ML)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===q0)return n.BYTE;if(i===Y0)return n.SHORT;if(i===Bd)return n.UNSIGNED_SHORT;if(i===Zo)return n.INT;if(i===Ca)return n.UNSIGNED_INT;if(i===Ka)return n.FLOAT;if(i===vl)return n.HALF_FLOAT;if(i===qK)return n.ALPHA;if(i===HM)return n.RGB;if(i===vs)return n.RGBA;if(i===YK)return n.LUMINANCE;if(i===XK)return n.LUMINANCE_ALPHA;if(i===Jf)return n.DEPTH_COMPONENT;if(i===ih)return n.DEPTH_STENCIL;if(i===WM)return n.RED;if(i===sw)return n.RED_INTEGER;if(i===My)return n.RG;if(i===lw)return n.RG_INTEGER;if(i===cw)return n.RGBA_INTEGER;if(i===X0||i===Rm||i===Pm||i===Nm)if(s===mi)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===X0)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Rm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Pm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Nm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===X0)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Rm)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Pm)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Nm)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===_C||i===wC||i===SC||i===EC)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===_C)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===wC)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===SC)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===EC)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===CC||i===Qx||i===Jx)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(i===CC||i===Qx)return s===mi?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===Jx)return s===mi?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===e_||i===t_||i===n_||i===r_||i===i_||i===a_||i===o_||i===s_||i===l_||i===c_||i===u_||i===d_||i===f_||i===h_)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(i===e_)return s===mi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===t_)return s===mi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===n_)return s===mi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===r_)return s===mi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===i_)return s===mi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===a_)return s===mi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===o_)return s===mi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===s_)return s===mi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===l_)return s===mi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===c_)return s===mi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===u_)return s===mi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===d_)return s===mi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===f_)return s===mi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===h_)return s===mi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===K0||i===RH||i===PH)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(i===K0)return s===mi?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===RH)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===PH)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===KK||i===MC||i===TC||i===AC)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(i===K0)return o.COMPRESSED_RED_RGTC1_EXT;if(i===MC)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===TC)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===AC)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===rh?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:r}}const OIt={type:"move"};class Az{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new jb,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new jb,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ge,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ge),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new jb,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ge,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ge),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const r=this._hand;if(r)for(const i of e.hand.values())this._getHandJoint(r,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,r,i){let a=null,o=null,s=null;const l=this._targetRay,c=this._grip,u=this._hand;if(e&&r.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(const m of e.hand.values()){const v=r.getJointPose(m,i),y=this._getHandJoint(u,m);v!==null&&(y.matrix.fromArray(v.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=v.radius),y.visible=v!==null}const d=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],h=d.position.distanceTo(f.position),p=.02,g=.005;u.inputState.pinching&&h>p+g?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=p-g&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(o=r.getPose(e.gripSpace,i),o!==null&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(a=r.getPose(e.targetRaySpace,i),a===null&&o!==null&&(a=o),a!==null&&(l.matrix.fromArray(a.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,a.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(a.linearVelocity)):l.hasLinearVelocity=!1,a.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(a.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(OIt)))}return l!==null&&(l.visible=a!==null),c!==null&&(c.visible=o!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,r){if(e.joints[r.jointName]===void 0){const i=new jb;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[r.jointName]=i,e.add(i)}return e.joints[r.jointName]}}const IIt=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,DIt=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class LIt{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,r,i){if(this.texture===null){const a=new ho,o=e.properties.get(a);o.__webglTexture=r.texture,(r.depthNear!=i.depthNear||r.depthFar!=i.depthFar)&&(this.depthNear=r.depthNear,this.depthFar=r.depthFar),this.texture=a}}getMesh(e){if(this.texture!==null&&this.mesh===null){const r=e.cameras[0].viewport,i=new oh({vertexShader:IIt,fragmentShader:DIt,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new ko(new kL(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class kIt extends mv{constructor(e,r){super();const i=this;let a=null,o=1,s=null,l="local-floor",c=1,u=null,d=null,f=null,h=null,p=null,g=null;const m=new LIt,v=r.getContextAttributes();let y=null,b=null;const x=[],_=[],S=new Nt;let M=null;const E=new ll;E.viewport=new sr;const T=new ll;T.viewport=new sr;const P=[E,T],A=new nRt;let N=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(V){let W=x[V];return W===void 0&&(W=new Az,x[V]=W),W.getTargetRaySpace()},this.getControllerGrip=function(V){let W=x[V];return W===void 0&&(W=new Az,x[V]=W),W.getGripSpace()},this.getHand=function(V){let W=x[V];return W===void 0&&(W=new Az,x[V]=W),W.getHandSpace()};function I(V){const W=_.indexOf(V.inputSource);if(W===-1)return;const K=x[W];K!==void 0&&(K.update(V.inputSource,V.frame,u||s),K.dispatchEvent({type:V.type,data:V.inputSource}))}function D(){a.removeEventListener("select",I),a.removeEventListener("selectstart",I),a.removeEventListener("selectend",I),a.removeEventListener("squeeze",I),a.removeEventListener("squeezestart",I),a.removeEventListener("squeezeend",I),a.removeEventListener("end",D),a.removeEventListener("inputsourceschange",k);for(let V=0;V<x.length;V++){const W=_[V];W!==null&&(_[V]=null,x[V].disconnect(W))}N=null,O=null,m.reset(),e.setRenderTarget(y),p=null,h=null,f=null,a=null,b=null,X.stop(),i.isPresenting=!1,e.setPixelRatio(M),e.setSize(S.width,S.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(V){o=V,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(V){l=V,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(V){u=V},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return f},this.getFrame=function(){return g},this.getSession=function(){return a},this.setSession=async function(V){if(a=V,a!==null){if(y=e.getRenderTarget(),a.addEventListener("select",I),a.addEventListener("selectstart",I),a.addEventListener("selectend",I),a.addEventListener("squeeze",I),a.addEventListener("squeezestart",I),a.addEventListener("squeezeend",I),a.addEventListener("end",D),a.addEventListener("inputsourceschange",k),v.xrCompatible!==!0&&await r.makeXRCompatible(),M=e.getPixelRatio(),e.getSize(S),a.renderState.layers===void 0){const W={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:o};p=new XRWebGLLayer(a,r,W),a.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),b=new Jm(p.framebufferWidth,p.framebufferHeight,{format:vs,type:Ws,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let W=null,K=null,q=null;v.depth&&(q=v.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,W=v.stencil?ih:Jf,K=v.stencil?rh:Ca);const Q={colorFormat:r.RGBA8,depthFormat:q,scaleFactor:o};f=new XRWebGLBinding(a,r),h=f.createProjectionLayer(Q),a.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),b=new Jm(h.textureWidth,h.textureHeight,{format:vs,type:Ws,depthTexture:new vv(h.textureWidth,h.textureHeight,K,void 0,void 0,void 0,void 0,void 0,void 0,W),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}b.isXRRenderTarget=!0,this.setFoveation(c),u=null,s=await a.requestReferenceSpace(l),X.setContext(a),X.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};function k(V){for(let W=0;W<V.removed.length;W++){const K=V.removed[W],q=_.indexOf(K);q>=0&&(_[q]=null,x[q].disconnect(K))}for(let W=0;W<V.added.length;W++){const K=V.added[W];let q=_.indexOf(K);if(q===-1){for(let ie=0;ie<x.length;ie++)if(ie>=_.length){_.push(K),q=ie;break}else if(_[ie]===null){_[ie]=K,q=ie;break}if(q===-1)break}const Q=x[q];Q&&Q.connect(K)}}const $=new ge,B=new ge;function F(V,W,K){$.setFromMatrixPosition(W.matrixWorld),B.setFromMatrixPosition(K.matrixWorld);const q=$.distanceTo(B),Q=W.projectionMatrix.elements,ie=K.projectionMatrix.elements,oe=Q[14]/(Q[10]-1),ue=Q[14]/(Q[10]+1),le=(Q[9]+1)/Q[5],me=(Q[9]-1)/Q[5],J=(Q[8]-1)/Q[0],pe=(ie[8]+1)/ie[0],ve=oe*J,Me=oe*pe,Re=q/(-J+pe),Xe=Re*-J;if(W.matrixWorld.decompose(V.position,V.quaternion,V.scale),V.translateX(Xe),V.translateZ(Re),V.matrixWorld.compose(V.position,V.quaternion,V.scale),V.matrixWorldInverse.copy(V.matrixWorld).invert(),Q[10]===-1)V.projectionMatrix.copy(W.projectionMatrix),V.projectionMatrixInverse.copy(W.projectionMatrixInverse);else{const He=oe+Re,ee=ue+Re,Y=ve-Xe,ce=Me+(q-Xe),_e=le*ue/ee*He,Ae=me*ue/ee*He;V.projectionMatrix.makePerspective(Y,ce,_e,Ae,He,ee),V.projectionMatrixInverse.copy(V.projectionMatrix).invert()}}function G(V,W){W===null?V.matrixWorld.copy(V.matrix):V.matrixWorld.multiplyMatrices(W.matrixWorld,V.matrix),V.matrixWorldInverse.copy(V.matrixWorld).invert()}this.updateCamera=function(V){if(a===null)return;let W=V.near,K=V.far;m.texture!==null&&(m.depthNear>0&&(W=m.depthNear),m.depthFar>0&&(K=m.depthFar)),A.near=T.near=E.near=W,A.far=T.far=E.far=K,(N!==A.near||O!==A.far)&&(a.updateRenderState({depthNear:A.near,depthFar:A.far}),N=A.near,O=A.far),E.layers.mask=V.layers.mask|2,T.layers.mask=V.layers.mask|4,A.layers.mask=E.layers.mask|T.layers.mask;const q=V.parent,Q=A.cameras;G(A,q);for(let ie=0;ie<Q.length;ie++)G(Q[ie],q);Q.length===2?F(A,E,T):A.projectionMatrix.copy(E.projectionMatrix),z(V,A,q)};function z(V,W,K){K===null?V.matrix.copy(W.matrixWorld):(V.matrix.copy(K.matrixWorld),V.matrix.invert(),V.matrix.multiply(W.matrixWorld)),V.matrix.decompose(V.position,V.quaternion,V.scale),V.updateMatrixWorld(!0),V.projectionMatrix.copy(W.projectionMatrix),V.projectionMatrixInverse.copy(W.projectionMatrixInverse),V.isPerspectiveCamera&&(V.fov=p_*2*Math.atan(1/V.projectionMatrix.elements[5]),V.zoom=1)}this.getCamera=function(){return A},this.getFoveation=function(){if(!(h===null&&p===null))return c},this.setFoveation=function(V){c=V,h!==null&&(h.fixedFoveation=V),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=V)},this.hasDepthSensing=function(){return m.texture!==null},this.getDepthSensingMesh=function(){return m.getMesh(A)};let U=null;function H(V,W){if(d=W.getViewerPose(u||s),g=W,d!==null){const K=d.views;p!==null&&(e.setRenderTargetFramebuffer(b,p.framebuffer),e.setRenderTarget(b));let q=!1;K.length!==A.cameras.length&&(A.cameras.length=0,q=!0);for(let ie=0;ie<K.length;ie++){const oe=K[ie];let ue=null;if(p!==null)ue=p.getViewport(oe);else{const me=f.getViewSubImage(h,oe);ue=me.viewport,ie===0&&(e.setRenderTargetTextures(b,me.colorTexture,h.ignoreDepthValues?void 0:me.depthStencilTexture),e.setRenderTarget(b))}let le=P[ie];le===void 0&&(le=new ll,le.layers.enable(ie),le.viewport=new sr,P[ie]=le),le.matrix.fromArray(oe.transform.matrix),le.matrix.decompose(le.position,le.quaternion,le.scale),le.projectionMatrix.fromArray(oe.projectionMatrix),le.projectionMatrixInverse.copy(le.projectionMatrix).invert(),le.viewport.set(ue.x,ue.y,ue.width,ue.height),ie===0&&(A.matrix.copy(le.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),q===!0&&A.cameras.push(le)}const Q=a.enabledFeatures;if(Q&&Q.includes("depth-sensing")){const ie=f.getDepthInformation(K[0]);ie&&ie.isValid&&ie.texture&&m.init(e,ie,a.renderState)}}for(let K=0;K<x.length;K++){const q=_[K],Q=x[K];q!==null&&Q!==void 0&&Q.update(q,W,u||s)}U&&U(V,W),W.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:W}),g=null}const X=new SAe;X.setAnimationLoop(H),this.setAnimationLoop=function(V){U=V},this.dispose=function(){}}}const qv=new Hc,FIt=new jr;function $It(n,e){function r(v,y){v.matrixAutoUpdate===!0&&v.updateMatrix(),y.value.copy(v.matrix)}function i(v,y){y.color.getRGB(v.fogColor.value,oAe(n)),y.isFog?(v.fogNear.value=y.near,v.fogFar.value=y.far):y.isFogExp2&&(v.fogDensity.value=y.density)}function a(v,y,b,x,_){y.isMeshBasicMaterial||y.isMeshLambertMaterial?o(v,y):y.isMeshToonMaterial?(o(v,y),f(v,y)):y.isMeshPhongMaterial?(o(v,y),d(v,y)):y.isMeshStandardMaterial?(o(v,y),h(v,y),y.isMeshPhysicalMaterial&&p(v,y,_)):y.isMeshMatcapMaterial?(o(v,y),g(v,y)):y.isMeshDepthMaterial?o(v,y):y.isMeshDistanceMaterial?(o(v,y),m(v,y)):y.isMeshNormalMaterial?o(v,y):y.isLineBasicMaterial?(s(v,y),y.isLineDashedMaterial&&l(v,y)):y.isPointsMaterial?c(v,y,b,x):y.isSpriteMaterial?u(v,y):y.isShadowMaterial?(v.color.value.copy(y.color),v.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function o(v,y){v.opacity.value=y.opacity,y.color&&v.diffuse.value.copy(y.color),y.emissive&&v.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(v.map.value=y.map,r(y.map,v.mapTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,r(y.alphaMap,v.alphaMapTransform)),y.bumpMap&&(v.bumpMap.value=y.bumpMap,r(y.bumpMap,v.bumpMapTransform),v.bumpScale.value=y.bumpScale,y.side===va&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,r(y.normalMap,v.normalMapTransform),v.normalScale.value.copy(y.normalScale),y.side===va&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,r(y.displacementMap,v.displacementMapTransform),v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias),y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap,r(y.emissiveMap,v.emissiveMapTransform)),y.specularMap&&(v.specularMap.value=y.specularMap,r(y.specularMap,v.specularMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);const b=e.get(y),x=b.envMap,_=b.envMapRotation;x&&(v.envMap.value=x,qv.copy(_),qv.x*=-1,qv.y*=-1,qv.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(qv.y*=-1,qv.z*=-1),v.envMapRotation.value.setFromMatrix4(FIt.makeRotationFromEuler(qv)),v.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=y.reflectivity,v.ior.value=y.ior,v.refractionRatio.value=y.refractionRatio),y.lightMap&&(v.lightMap.value=y.lightMap,v.lightMapIntensity.value=y.lightMapIntensity,r(y.lightMap,v.lightMapTransform)),y.aoMap&&(v.aoMap.value=y.aoMap,v.aoMapIntensity.value=y.aoMapIntensity,r(y.aoMap,v.aoMapTransform))}function s(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,y.map&&(v.map.value=y.map,r(y.map,v.mapTransform))}function l(v,y){v.dashSize.value=y.dashSize,v.totalSize.value=y.dashSize+y.gapSize,v.scale.value=y.scale}function c(v,y,b,x){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.size.value=y.size*b,v.scale.value=x*.5,y.map&&(v.map.value=y.map,r(y.map,v.uvTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,r(y.alphaMap,v.alphaMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest)}function u(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.rotation.value=y.rotation,y.map&&(v.map.value=y.map,r(y.map,v.mapTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,r(y.alphaMap,v.alphaMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest)}function d(v,y){v.specular.value.copy(y.specular),v.shininess.value=Math.max(y.shininess,1e-4)}function f(v,y){y.gradientMap&&(v.gradientMap.value=y.gradientMap)}function h(v,y){v.metalness.value=y.metalness,y.metalnessMap&&(v.metalnessMap.value=y.metalnessMap,r(y.metalnessMap,v.metalnessMapTransform)),v.roughness.value=y.roughness,y.roughnessMap&&(v.roughnessMap.value=y.roughnessMap,r(y.roughnessMap,v.roughnessMapTransform)),y.envMap&&(v.envMapIntensity.value=y.envMapIntensity)}function p(v,y,b){v.ior.value=y.ior,y.sheen>0&&(v.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),v.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(v.sheenColorMap.value=y.sheenColorMap,r(y.sheenColorMap,v.sheenColorMapTransform)),y.sheenRoughnessMap&&(v.sheenRoughnessMap.value=y.sheenRoughnessMap,r(y.sheenRoughnessMap,v.sheenRoughnessMapTransform))),y.clearcoat>0&&(v.clearcoat.value=y.clearcoat,v.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(v.clearcoatMap.value=y.clearcoatMap,r(y.clearcoatMap,v.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,r(y.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(v.clearcoatNormalMap.value=y.clearcoatNormalMap,r(y.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===va&&v.clearcoatNormalScale.value.negate())),y.dispersion>0&&(v.dispersion.value=y.dispersion),y.iridescence>0&&(v.iridescence.value=y.iridescence,v.iridescenceIOR.value=y.iridescenceIOR,v.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(v.iridescenceMap.value=y.iridescenceMap,r(y.iridescenceMap,v.iridescenceMapTransform)),y.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=y.iridescenceThicknessMap,r(y.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),y.transmission>0&&(v.transmission.value=y.transmission,v.transmissionSamplerMap.value=b.texture,v.transmissionSamplerSize.value.set(b.width,b.height),y.transmissionMap&&(v.transmissionMap.value=y.transmissionMap,r(y.transmissionMap,v.transmissionMapTransform)),v.thickness.value=y.thickness,y.thicknessMap&&(v.thicknessMap.value=y.thicknessMap,r(y.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=y.attenuationDistance,v.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(v.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(v.anisotropyMap.value=y.anisotropyMap,r(y.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=y.specularIntensity,v.specularColor.value.copy(y.specularColor),y.specularColorMap&&(v.specularColorMap.value=y.specularColorMap,r(y.specularColorMap,v.specularColorMapTransform)),y.specularIntensityMap&&(v.specularIntensityMap.value=y.specularIntensityMap,r(y.specularIntensityMap,v.specularIntensityMapTransform))}function g(v,y){y.matcap&&(v.matcap.value=y.matcap)}function m(v,y){const b=e.get(y).light;v.referencePosition.value.setFromMatrixPosition(b.matrixWorld),v.nearDistance.value=b.shadow.camera.near,v.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:a}}function BIt(n,e,r,i){let a={},o={},s=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(b,x){const _=x.program;i.uniformBlockBinding(b,_)}function u(b,x){let _=a[b.id];_===void 0&&(g(b),_=d(b),a[b.id]=_,b.addEventListener("dispose",v));const S=x.program;i.updateUBOMapping(b,S);const M=e.render.frame;o[b.id]!==M&&(h(b),o[b.id]=M)}function d(b){const x=f();b.__bindingPointIndex=x;const _=n.createBuffer(),S=b.__size,M=b.usage;return n.bindBuffer(n.UNIFORM_BUFFER,_),n.bufferData(n.UNIFORM_BUFFER,S,M),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,x,_),_}function f(){for(let b=0;b<l;b++)if(s.indexOf(b)===-1)return s.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(b){const x=a[b.id],_=b.uniforms,S=b.__cache;n.bindBuffer(n.UNIFORM_BUFFER,x);for(let M=0,E=_.length;M<E;M++){const T=Array.isArray(_[M])?_[M]:[_[M]];for(let P=0,A=T.length;P<A;P++){const N=T[P];if(p(N,M,P,S)===!0){const O=N.__offset,I=Array.isArray(N.value)?N.value:[N.value];let D=0;for(let k=0;k<I.length;k++){const $=I[k],B=m($);typeof $=="number"||typeof $=="boolean"?(N.__data[0]=$,n.bufferSubData(n.UNIFORM_BUFFER,O+D,N.__data)):$.isMatrix3?(N.__data[0]=$.elements[0],N.__data[1]=$.elements[1],N.__data[2]=$.elements[2],N.__data[3]=0,N.__data[4]=$.elements[3],N.__data[5]=$.elements[4],N.__data[6]=$.elements[5],N.__data[7]=0,N.__data[8]=$.elements[6],N.__data[9]=$.elements[7],N.__data[10]=$.elements[8],N.__data[11]=0):($.toArray(N.__data,D),D+=B.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,O,N.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(b,x,_,S){const M=b.value,E=x+"_"+_;if(S[E]===void 0)return typeof M=="number"||typeof M=="boolean"?S[E]=M:S[E]=M.clone(),!0;{const T=S[E];if(typeof M=="number"||typeof M=="boolean"){if(T!==M)return S[E]=M,!0}else if(T.equals(M)===!1)return T.copy(M),!0}return!1}function g(b){const x=b.uniforms;let _=0;const S=16;for(let E=0,T=x.length;E<T;E++){const P=Array.isArray(x[E])?x[E]:[x[E]];for(let A=0,N=P.length;A<N;A++){const O=P[A],I=Array.isArray(O.value)?O.value:[O.value];for(let D=0,k=I.length;D<k;D++){const $=I[D],B=m($),F=_%S,G=F%B.boundary,z=F+G;_+=G,z!==0&&S-z<B.storage&&(_+=S-z),O.__data=new Float32Array(B.storage/Float32Array.BYTES_PER_ELEMENT),O.__offset=_,_+=B.storage}}}const M=_%S;return M>0&&(_+=S-M),b.__size=_,b.__cache={},this}function m(b){const x={boundary:0,storage:0};return typeof b=="number"||typeof b=="boolean"?(x.boundary=4,x.storage=4):b.isVector2?(x.boundary=8,x.storage=8):b.isVector3||b.isColor?(x.boundary=16,x.storage=12):b.isVector4?(x.boundary=16,x.storage=16):b.isMatrix3?(x.boundary=48,x.storage=48):b.isMatrix4?(x.boundary=64,x.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),x}function v(b){const x=b.target;x.removeEventListener("dispose",v);const _=s.indexOf(x.__bindingPointIndex);s.splice(_,1),n.deleteBuffer(a[x.id]),delete a[x.id],delete o[x.id]}function y(){for(const b in a)n.deleteBuffer(a[b]);s=[],a={},o={}}return{bind:c,update:u,dispose:y}}class zIt{constructor(e={}){const{canvas:r=nAe(),context:i=null,depth:a=!0,stencil:o=!1,alpha:s=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=s;const g=new Uint32Array(4),m=new Int32Array(4);let v=null,y=null;const b=[],x=[];this.domElement=r,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Pn,this.toneMapping=tc,this.toneMappingExposure=1;const _=this;let S=!1,M=0,E=0,T=null,P=-1,A=null;const N=new sr,O=new sr;let I=null;const D=new Tn(0);let k=0,$=r.width,B=r.height,F=1,G=null,z=null;const U=new sr(0,0,$,B),H=new sr(0,0,$,B);let X=!1;const V=new IL;let W=!1,K=!1;const q=new jr,Q=new jr,ie=new ge,oe=new sr,ue={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let le=!1;function me(){return T===null?F:1}let J=i;function pe(te,de){return r.getContext(te,de)}try{const te={alpha:!0,depth:a,stencil:o,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in r&&r.setAttribute("data-engine",`three.js r${ow}`),r.addEventListener("webglcontextlost",Le,!1),r.addEventListener("webglcontextrestored",Ye,!1),r.addEventListener("webglcontextcreationerror",nt,!1),J===null){const de="webgl2";if(J=pe(de,te),J===null)throw pe(de)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(te){throw console.error("THREE.WebGLRenderer: "+te.message),te}let ve,Me,Re,Xe,He,ee,Y,ce,_e,Ae,Ce,et,Ve,qe,dt,Ge,We,Ze,Ie,De,bt,Ke,mt,xe;function vt(){ve=new XNt(J),ve.init(),Ke=new NIt(J,ve),Me=new GNt(J,ve,e,Ke),Re=new RIt(J,ve),Me.reverseDepthBuffer&&h&&Re.buffers.depth.setReversed(!0),Xe=new QNt(J),He=new mIt,ee=new PIt(J,ve,Re,He,Me,Ke,Xe),Y=new HNt(_),ce=new YNt(_),_e=new aRt(J),mt=new UNt(J,_e),Ae=new KNt(J,_e,Xe,mt),Ce=new eOt(J,Ae,_e,Xe),Ie=new JNt(J,Me,ee),Ge=new jNt(He),et=new gIt(_,Y,ce,ve,Me,mt,Ge),Ve=new $It(_,He),qe=new yIt,dt=new EIt(ve),Ze=new zNt(_,Y,ce,Re,Ce,p,c),We=new TIt(_,Ce,Me),xe=new BIt(J,Xe,Me,Re),De=new VNt(J,ve,Xe),bt=new ZNt(J,ve,Xe),Xe.programs=et.programs,_.capabilities=Me,_.extensions=ve,_.properties=He,_.renderLists=qe,_.shadowMap=We,_.state=Re,_.info=Xe}vt();const Ue=new kIt(_,J);this.xr=Ue,this.getContext=function(){return J},this.getContextAttributes=function(){return J.getContextAttributes()},this.forceContextLoss=function(){const te=ve.get("WEBGL_lose_context");te&&te.loseContext()},this.forceContextRestore=function(){const te=ve.get("WEBGL_lose_context");te&&te.restoreContext()},this.getPixelRatio=function(){return F},this.setPixelRatio=function(te){te!==void 0&&(F=te,this.setSize($,B,!1))},this.getSize=function(te){return te.set($,B)},this.setSize=function(te,de,Te=!0){if(Ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}$=te,B=de,r.width=Math.floor(te*F),r.height=Math.floor(de*F),Te===!0&&(r.style.width=te+"px",r.style.height=de+"px"),this.setViewport(0,0,te,de)},this.getDrawingBufferSize=function(te){return te.set($*F,B*F).floor()},this.setDrawingBufferSize=function(te,de,Te){$=te,B=de,F=Te,r.width=Math.floor(te*Te),r.height=Math.floor(de*Te),this.setViewport(0,0,te,de)},this.getCurrentViewport=function(te){return te.copy(N)},this.getViewport=function(te){return te.copy(U)},this.setViewport=function(te,de,Te,Oe){te.isVector4?U.set(te.x,te.y,te.z,te.w):U.set(te,de,Te,Oe),Re.viewport(N.copy(U).multiplyScalar(F).round())},this.getScissor=function(te){return te.copy(H)},this.setScissor=function(te,de,Te,Oe){te.isVector4?H.set(te.x,te.y,te.z,te.w):H.set(te,de,Te,Oe),Re.scissor(O.copy(H).multiplyScalar(F).round())},this.getScissorTest=function(){return X},this.setScissorTest=function(te){Re.setScissorTest(X=te)},this.setOpaqueSort=function(te){G=te},this.setTransparentSort=function(te){z=te},this.getClearColor=function(te){return te.copy(Ze.getClearColor())},this.setClearColor=function(){Ze.setClearColor.apply(Ze,arguments)},this.getClearAlpha=function(){return Ze.getClearAlpha()},this.setClearAlpha=function(){Ze.setClearAlpha.apply(Ze,arguments)},this.clear=function(te=!0,de=!0,Te=!0){let Oe=0;if(te){let Ee=!1;if(T!==null){const ut=T.texture.format;Ee=ut===cw||ut===lw||ut===sw}if(Ee){const ut=T.texture.type,Dt=ut===Ws||ut===Ca||ut===Bd||ut===rh||ut===EL||ut===CL,Bt=Ze.getClearColor(),Zt=Ze.getClearAlpha(),dn=Bt.r,kt=Bt.g,zt=Bt.b;Dt?(g[0]=dn,g[1]=kt,g[2]=zt,g[3]=Zt,J.clearBufferuiv(J.COLOR,0,g)):(m[0]=dn,m[1]=kt,m[2]=zt,m[3]=Zt,J.clearBufferiv(J.COLOR,0,m))}else Oe|=J.COLOR_BUFFER_BIT}de&&(Oe|=J.DEPTH_BUFFER_BIT),Te&&(Oe|=J.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),J.clear(Oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){r.removeEventListener("webglcontextlost",Le,!1),r.removeEventListener("webglcontextrestored",Ye,!1),r.removeEventListener("webglcontextcreationerror",nt,!1),Ze.dispose(),qe.dispose(),dt.dispose(),He.dispose(),Y.dispose(),ce.dispose(),Ce.dispose(),mt.dispose(),xe.dispose(),et.dispose(),Ue.dispose(),Ue.removeEventListener("sessionstart",ye),Ue.removeEventListener("sessionend",be),Se.stop()};function Le(te){te.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function Ye(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const te=Xe.autoReset,de=We.enabled,Te=We.autoUpdate,Oe=We.needsUpdate,Ee=We.type;vt(),Xe.autoReset=te,We.enabled=de,We.autoUpdate=Te,We.needsUpdate=Oe,We.type=Ee}function nt(te){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",te.statusMessage)}function _t(te){const de=te.target;de.removeEventListener("dispose",_t),Gt(de)}function Gt(te){Ot(te),He.remove(te)}function Ot(te){const de=He.get(te).programs;de!==void 0&&(de.forEach(function(Te){et.releaseProgram(Te)}),te.isShaderMaterial&&et.releaseShaderCache(te))}this.renderBufferDirect=function(te,de,Te,Oe,Ee,ut){de===null&&(de=ue);const Dt=Ee.isMesh&&Ee.matrixWorld.determinant()<0,Bt=en(te,de,Te,Oe,Ee);Re.setMaterial(Oe,Dt);let Zt=Te.index,dn=1;if(Oe.wireframe===!0){if(Zt=Ae.getWireframeAttribute(Te),Zt===void 0)return;dn=2}const kt=Te.drawRange,zt=Te.attributes.position;let En=kt.start*dn,Bn=(kt.start+kt.count)*dn;ut!==null&&(En=Math.max(En,ut.start*dn),Bn=Math.min(Bn,(ut.start+ut.count)*dn)),Zt!==null?(En=Math.max(En,0),Bn=Math.min(Bn,Zt.count)):zt!=null&&(En=Math.max(En,0),Bn=Math.min(Bn,zt.count));const In=Bn-En;if(In<0||In===1/0)return;mt.setup(Ee,Oe,Bt,Te,Zt);let zn,Rn=De;if(Zt!==null&&(zn=_e.get(Zt),Rn=bt,Rn.setIndex(zn)),Ee.isMesh)Oe.wireframe===!0?(Re.setLineWidth(Oe.wireframeLinewidth*me()),Rn.setMode(J.LINES)):Rn.setMode(J.TRIANGLES);else if(Ee.isLine){let fn=Oe.linewidth;fn===void 0&&(fn=1),Re.setLineWidth(fn*me()),Ee.isLineSegments?Rn.setMode(J.LINES):Ee.isLineLoop?Rn.setMode(J.LINE_LOOP):Rn.setMode(J.LINE_STRIP)}else Ee.isPoints?Rn.setMode(J.POINTS):Ee.isSprite&&Rn.setMode(J.TRIANGLES);if(Ee.isBatchedMesh)if(Ee._multiDrawInstances!==null)Rn.renderMultiDrawInstances(Ee._multiDrawStarts,Ee._multiDrawCounts,Ee._multiDrawCount,Ee._multiDrawInstances);else if(ve.get("WEBGL_multi_draw"))Rn.renderMultiDraw(Ee._multiDrawStarts,Ee._multiDrawCounts,Ee._multiDrawCount);else{const fn=Ee._multiDrawStarts,Yr=Ee._multiDrawCounts,Hn=Ee._multiDrawCount,Yi=Zt?_e.get(Zt).bytesPerElement:1,sa=He.get(Oe).currentProgram.getUniforms();for(let Cn=0;Cn<Hn;Cn++)sa.setValue(J,"_gl_DrawID",Cn),Rn.render(fn[Cn]/Yi,Yr[Cn])}else if(Ee.isInstancedMesh)Rn.renderInstances(En,In,Ee.count);else if(Te.isInstancedBufferGeometry){const fn=Te._maxInstanceCount!==void 0?Te._maxInstanceCount:1/0,Yr=Math.min(Te.instanceCount,fn);Rn.renderInstances(En,In,Yr)}else Rn.render(En,In)};function wt(te,de,Te){te.transparent===!0&&te.side===dl&&te.forceSinglePass===!1?(te.side=va,te.needsUpdate=!0,Rt(te,de,Te),te.side=Qd,te.needsUpdate=!0,Rt(te,de,Te),te.side=dl):Rt(te,de,Te)}this.compile=function(te,de,Te=null){Te===null&&(Te=te),y=dt.get(Te),y.init(de),x.push(y),Te.traverseVisible(function(Ee){Ee.isLight&&Ee.layers.test(de.layers)&&(y.pushLight(Ee),Ee.castShadow&&y.pushShadow(Ee))}),te!==Te&&te.traverseVisible(function(Ee){Ee.isLight&&Ee.layers.test(de.layers)&&(y.pushLight(Ee),Ee.castShadow&&y.pushShadow(Ee))}),y.setupLights();const Oe=new Set;return te.traverse(function(Ee){if(!(Ee.isMesh||Ee.isPoints||Ee.isLine||Ee.isSprite))return;const ut=Ee.material;if(ut)if(Array.isArray(ut))for(let Dt=0;Dt<ut.length;Dt++){const Bt=ut[Dt];wt(Bt,Te,Ee),Oe.add(Bt)}else wt(ut,Te,Ee),Oe.add(ut)}),x.pop(),y=null,Oe},this.compileAsync=function(te,de,Te=null){const Oe=this.compile(te,de,Te);return new Promise(Ee=>{function ut(){if(Oe.forEach(function(Dt){He.get(Dt).currentProgram.isReady()&&Oe.delete(Dt)}),Oe.size===0){Ee(te);return}setTimeout(ut,10)}ve.get("KHR_parallel_shader_compile")!==null?ut():setTimeout(ut,10)})};let Ft=null;function wn(te){Ft&&Ft(te)}function ye(){Se.stop()}function be(){Se.start()}const Se=new SAe;Se.setAnimationLoop(wn),typeof self<"u"&&Se.setContext(self),this.setAnimationLoop=function(te){Ft=te,Ue.setAnimationLoop(te),te===null?Se.stop():Se.start()},Ue.addEventListener("sessionstart",ye),Ue.addEventListener("sessionend",be),this.render=function(te,de){if(de!==void 0&&de.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;if(te.matrixWorldAutoUpdate===!0&&te.updateMatrixWorld(),de.parent===null&&de.matrixWorldAutoUpdate===!0&&de.updateMatrixWorld(),Ue.enabled===!0&&Ue.isPresenting===!0&&(Ue.cameraAutoUpdate===!0&&Ue.updateCamera(de),de=Ue.getCamera()),te.isScene===!0&&te.onBeforeRender(_,te,de,T),y=dt.get(te,x.length),y.init(de),x.push(y),Q.multiplyMatrices(de.projectionMatrix,de.matrixWorldInverse),V.setFromProjectionMatrix(Q),K=this.localClippingEnabled,W=Ge.init(this.clippingPlanes,K),v=qe.get(te,b.length),v.init(),b.push(v),Ue.enabled===!0&&Ue.isPresenting===!0){const ut=_.xr.getDepthSensingMesh();ut!==null&&je(ut,de,-1/0,_.sortObjects)}je(te,de,0,_.sortObjects),v.finish(),_.sortObjects===!0&&v.sort(G,z),le=Ue.enabled===!1||Ue.isPresenting===!1||Ue.hasDepthSensing()===!1,le&&Ze.addToRenderList(v,te),this.info.render.frame++,W===!0&&Ge.beginShadows();const Te=y.state.shadowsArray;We.render(Te,te,de),W===!0&&Ge.endShadows(),this.info.autoReset===!0&&this.info.reset();const Oe=v.opaque,Ee=v.transmissive;if(y.setupLights(),de.isArrayCamera){const ut=de.cameras;if(Ee.length>0)for(let Dt=0,Bt=ut.length;Dt<Bt;Dt++){const Zt=ut[Dt];ft(Oe,Ee,te,Zt)}le&&Ze.render(te);for(let Dt=0,Bt=ut.length;Dt<Bt;Dt++){const Zt=ut[Dt];tt(v,te,Zt,Zt.viewport)}}else Ee.length>0&&ft(Oe,Ee,te,de),le&&Ze.render(te),tt(v,te,de);T!==null&&(ee.updateMultisampleRenderTarget(T),ee.updateRenderTargetMipmap(T)),te.isScene===!0&&te.onAfterRender(_,te,de),mt.resetDefaultState(),P=-1,A=null,x.pop(),x.length>0?(y=x[x.length-1],W===!0&&Ge.setGlobalState(_.clippingPlanes,y.state.camera)):y=null,b.pop(),b.length>0?v=b[b.length-1]:v=null};function je(te,de,Te,Oe){if(te.visible===!1)return;if(te.layers.test(de.layers)){if(te.isGroup)Te=te.renderOrder;else if(te.isLOD)te.autoUpdate===!0&&te.update(de);else if(te.isLight)y.pushLight(te),te.castShadow&&y.pushShadow(te);else if(te.isSprite){if(!te.frustumCulled||V.intersectsSprite(te)){Oe&&oe.setFromMatrixPosition(te.matrixWorld).applyMatrix4(Q);const Dt=Ce.update(te),Bt=te.material;Bt.visible&&v.push(te,Dt,Bt,Te,oe.z,null)}}else if((te.isMesh||te.isLine||te.isPoints)&&(!te.frustumCulled||V.intersectsObject(te))){const Dt=Ce.update(te),Bt=te.material;if(Oe&&(te.boundingSphere!==void 0?(te.boundingSphere===null&&te.computeBoundingSphere(),oe.copy(te.boundingSphere.center)):(Dt.boundingSphere===null&&Dt.computeBoundingSphere(),oe.copy(Dt.boundingSphere.center)),oe.applyMatrix4(te.matrixWorld).applyMatrix4(Q)),Array.isArray(Bt)){const Zt=Dt.groups;for(let dn=0,kt=Zt.length;dn<kt;dn++){const zt=Zt[dn],En=Bt[zt.materialIndex];En&&En.visible&&v.push(te,Dt,En,Te,oe.z,zt)}}else Bt.visible&&v.push(te,Dt,Bt,Te,oe.z,null)}}const ut=te.children;for(let Dt=0,Bt=ut.length;Dt<Bt;Dt++)je(ut[Dt],de,Te,Oe)}function tt(te,de,Te,Oe){const Ee=te.opaque,ut=te.transmissive,Dt=te.transparent;y.setupLightsView(Te),W===!0&&Ge.setGlobalState(_.clippingPlanes,Te),Oe&&Re.viewport(N.copy(Oe)),Ee.length>0&&Tt(Ee,de,Te),ut.length>0&&Tt(ut,de,Te),Dt.length>0&&Tt(Dt,de,Te),Re.buffers.depth.setTest(!0),Re.buffers.depth.setMask(!0),Re.buffers.color.setMask(!0),Re.setPolygonOffset(!1)}function ft(te,de,Te,Oe){if((Te.isScene===!0?Te.overrideMaterial:null)!==null)return;y.state.transmissionRenderTarget[Oe.id]===void 0&&(y.state.transmissionRenderTarget[Oe.id]=new Jm(1,1,{generateMipmaps:!0,type:ve.has("EXT_color_buffer_half_float")||ve.has("EXT_color_buffer_float")?vl:Ws,minFilter:Yl,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Mr.workingColorSpace}));const ut=y.state.transmissionRenderTarget[Oe.id],Dt=Oe.viewport||N;ut.setSize(Dt.z,Dt.w);const Bt=_.getRenderTarget();_.setRenderTarget(ut),_.getClearColor(D),k=_.getClearAlpha(),k<1&&_.setClearColor(16777215,.5),_.clear(),le&&Ze.render(Te);const Zt=_.toneMapping;_.toneMapping=tc;const dn=Oe.viewport;if(Oe.viewport!==void 0&&(Oe.viewport=void 0),y.setupLightsView(Oe),W===!0&&Ge.setGlobalState(_.clippingPlanes,Oe),Tt(te,Te,Oe),ee.updateMultisampleRenderTarget(ut),ee.updateRenderTargetMipmap(ut),ve.has("WEBGL_multisampled_render_to_texture")===!1){let kt=!1;for(let zt=0,En=de.length;zt<En;zt++){const Bn=de[zt],In=Bn.object,zn=Bn.geometry,Rn=Bn.material,fn=Bn.group;if(Rn.side===dl&&In.layers.test(Oe.layers)){const Yr=Rn.side;Rn.side=va,Rn.needsUpdate=!0,It(In,Te,Oe,zn,Rn,fn),Rn.side=Yr,Rn.needsUpdate=!0,kt=!0}}kt===!0&&(ee.updateMultisampleRenderTarget(ut),ee.updateRenderTargetMipmap(ut))}_.setRenderTarget(Bt),_.setClearColor(D,k),dn!==void 0&&(Oe.viewport=dn),_.toneMapping=Zt}function Tt(te,de,Te){const Oe=de.isScene===!0?de.overrideMaterial:null;for(let Ee=0,ut=te.length;Ee<ut;Ee++){const Dt=te[Ee],Bt=Dt.object,Zt=Dt.geometry,dn=Oe===null?Dt.material:Oe,kt=Dt.group;Bt.layers.test(Te.layers)&&It(Bt,de,Te,Zt,dn,kt)}}function It(te,de,Te,Oe,Ee,ut){te.onBeforeRender(_,de,Te,Oe,Ee,ut),te.modelViewMatrix.multiplyMatrices(Te.matrixWorldInverse,te.matrixWorld),te.normalMatrix.getNormalMatrix(te.modelViewMatrix),Ee.onBeforeRender(_,de,Te,Oe,te,ut),Ee.transparent===!0&&Ee.side===dl&&Ee.forceSinglePass===!1?(Ee.side=va,Ee.needsUpdate=!0,_.renderBufferDirect(Te,de,Oe,Ee,te,ut),Ee.side=Qd,Ee.needsUpdate=!0,_.renderBufferDirect(Te,de,Oe,Ee,te,ut),Ee.side=dl):_.renderBufferDirect(Te,de,Oe,Ee,te,ut),te.onAfterRender(_,de,Te,Oe,Ee,ut)}function Rt(te,de,Te){de.isScene!==!0&&(de=ue);const Oe=He.get(te),Ee=y.state.lights,ut=y.state.shadowsArray,Dt=Ee.state.version,Bt=et.getParameters(te,Ee.state,ut,de,Te),Zt=et.getProgramCacheKey(Bt);let dn=Oe.programs;Oe.environment=te.isMeshStandardMaterial?de.environment:null,Oe.fog=de.fog,Oe.envMap=(te.isMeshStandardMaterial?ce:Y).get(te.envMap||Oe.environment),Oe.envMapRotation=Oe.environment!==null&&te.envMap===null?de.environmentRotation:te.envMapRotation,dn===void 0&&(te.addEventListener("dispose",_t),dn=new Map,Oe.programs=dn);let kt=dn.get(Zt);if(kt!==void 0){if(Oe.currentProgram===kt&&Oe.lightsStateVersion===Dt)return $t(te,Bt),kt}else Bt.uniforms=et.getUniforms(te),te.onBeforeCompile(Bt,_),kt=et.acquireProgram(Bt,Zt),dn.set(Zt,kt),Oe.uniforms=Bt.uniforms;const zt=Oe.uniforms;return(!te.isShaderMaterial&&!te.isRawShaderMaterial||te.clipping===!0)&&(zt.clippingPlanes=Ge.uniform),$t(te,Bt),Oe.needsLights=kn(te),Oe.lightsStateVersion=Dt,Oe.needsLights&&(zt.ambientLightColor.value=Ee.state.ambient,zt.lightProbe.value=Ee.state.probe,zt.directionalLights.value=Ee.state.directional,zt.directionalLightShadows.value=Ee.state.directionalShadow,zt.spotLights.value=Ee.state.spot,zt.spotLightShadows.value=Ee.state.spotShadow,zt.rectAreaLights.value=Ee.state.rectArea,zt.ltc_1.value=Ee.state.rectAreaLTC1,zt.ltc_2.value=Ee.state.rectAreaLTC2,zt.pointLights.value=Ee.state.point,zt.pointLightShadows.value=Ee.state.pointShadow,zt.hemisphereLights.value=Ee.state.hemi,zt.directionalShadowMap.value=Ee.state.directionalShadowMap,zt.directionalShadowMatrix.value=Ee.state.directionalShadowMatrix,zt.spotShadowMap.value=Ee.state.spotShadowMap,zt.spotLightMatrix.value=Ee.state.spotLightMatrix,zt.spotLightMap.value=Ee.state.spotLightMap,zt.pointShadowMap.value=Ee.state.pointShadowMap,zt.pointShadowMatrix.value=Ee.state.pointShadowMatrix),Oe.currentProgram=kt,Oe.uniformsList=null,kt}function Lt(te){if(te.uniformsList===null){const de=te.currentProgram.getUniforms();te.uniformsList=RP.seqWithValue(de.seq,te.uniforms)}return te.uniformsList}function $t(te,de){const Te=He.get(te);Te.outputColorSpace=de.outputColorSpace,Te.batching=de.batching,Te.batchingColor=de.batchingColor,Te.instancing=de.instancing,Te.instancingColor=de.instancingColor,Te.instancingMorph=de.instancingMorph,Te.skinning=de.skinning,Te.morphTargets=de.morphTargets,Te.morphNormals=de.morphNormals,Te.morphColors=de.morphColors,Te.morphTargetsCount=de.morphTargetsCount,Te.numClippingPlanes=de.numClippingPlanes,Te.numIntersection=de.numClipIntersection,Te.vertexAlphas=de.vertexAlphas,Te.vertexTangents=de.vertexTangents,Te.toneMapping=de.toneMapping}function en(te,de,Te,Oe,Ee){de.isScene!==!0&&(de=ue),ee.resetTextureUnits();const ut=de.fog,Dt=Oe.isMeshStandardMaterial?de.environment:null,Bt=T===null?_.outputColorSpace:T.isXRRenderTarget===!0?T.texture.colorSpace:Bu,Zt=(Oe.isMeshStandardMaterial?ce:Y).get(Oe.envMap||Dt),dn=Oe.vertexColors===!0&&!!Te.attributes.color&&Te.attributes.color.itemSize===4,kt=!!Te.attributes.tangent&&(!!Oe.normalMap||Oe.anisotropy>0),zt=!!Te.morphAttributes.position,En=!!Te.morphAttributes.normal,Bn=!!Te.morphAttributes.color;let In=tc;Oe.toneMapped&&(T===null||T.isXRRenderTarget===!0)&&(In=_.toneMapping);const zn=Te.morphAttributes.position||Te.morphAttributes.normal||Te.morphAttributes.color,Rn=zn!==void 0?zn.length:0,fn=He.get(Oe),Yr=y.state.lights;if(W===!0&&(K===!0||te!==A)){const Dn=te===A&&Oe.id===P;Ge.setState(Oe,te,Dn)}let Hn=!1;Oe.version===fn.__version?(fn.needsLights&&fn.lightsStateVersion!==Yr.state.version||fn.outputColorSpace!==Bt||Ee.isBatchedMesh&&fn.batching===!1||!Ee.isBatchedMesh&&fn.batching===!0||Ee.isBatchedMesh&&fn.batchingColor===!0&&Ee.colorTexture===null||Ee.isBatchedMesh&&fn.batchingColor===!1&&Ee.colorTexture!==null||Ee.isInstancedMesh&&fn.instancing===!1||!Ee.isInstancedMesh&&fn.instancing===!0||Ee.isSkinnedMesh&&fn.skinning===!1||!Ee.isSkinnedMesh&&fn.skinning===!0||Ee.isInstancedMesh&&fn.instancingColor===!0&&Ee.instanceColor===null||Ee.isInstancedMesh&&fn.instancingColor===!1&&Ee.instanceColor!==null||Ee.isInstancedMesh&&fn.instancingMorph===!0&&Ee.morphTexture===null||Ee.isInstancedMesh&&fn.instancingMorph===!1&&Ee.morphTexture!==null||fn.envMap!==Zt||Oe.fog===!0&&fn.fog!==ut||fn.numClippingPlanes!==void 0&&(fn.numClippingPlanes!==Ge.numPlanes||fn.numIntersection!==Ge.numIntersection)||fn.vertexAlphas!==dn||fn.vertexTangents!==kt||fn.morphTargets!==zt||fn.morphNormals!==En||fn.morphColors!==Bn||fn.toneMapping!==In||fn.morphTargetsCount!==Rn)&&(Hn=!0):(Hn=!0,fn.__version=Oe.version);let Yi=fn.currentProgram;Hn===!0&&(Yi=Rt(Oe,de,Ee));let sa=!1,Cn=!1,Mn=!1;const Un=Yi.getUniforms(),rn=fn.uniforms;if(Re.useProgram(Yi.program)&&(sa=!0,Cn=!0,Mn=!0),Oe.id!==P&&(P=Oe.id,Cn=!0),sa||A!==te){Re.buffers.depth.getReversed()?(q.copy(te.projectionMatrix),W3t(q),q3t(q),Un.setValue(J,"projectionMatrix",q)):Un.setValue(J,"projectionMatrix",te.projectionMatrix),Un.setValue(J,"viewMatrix",te.matrixWorldInverse);const hr=Un.map.cameraPosition;hr!==void 0&&hr.setValue(J,ie.setFromMatrixPosition(te.matrixWorld)),Me.logarithmicDepthBuffer&&Un.setValue(J,"logDepthBufFC",2/(Math.log(te.far+1)/Math.LN2)),(Oe.isMeshPhongMaterial||Oe.isMeshToonMaterial||Oe.isMeshLambertMaterial||Oe.isMeshBasicMaterial||Oe.isMeshStandardMaterial||Oe.isShaderMaterial)&&Un.setValue(J,"isOrthographic",te.isOrthographicCamera===!0),A!==te&&(A=te,Cn=!0,Mn=!0)}if(Ee.isSkinnedMesh){Un.setOptional(J,Ee,"bindMatrix"),Un.setOptional(J,Ee,"bindMatrixInverse");const Dn=Ee.skeleton;Dn&&(Dn.boneTexture===null&&Dn.computeBoneTexture(),Un.setValue(J,"boneTexture",Dn.boneTexture,ee))}Ee.isBatchedMesh&&(Un.setOptional(J,Ee,"batchingTexture"),Un.setValue(J,"batchingTexture",Ee._matricesTexture,ee),Un.setOptional(J,Ee,"batchingIdTexture"),Un.setValue(J,"batchingIdTexture",Ee._indirectTexture,ee),Un.setOptional(J,Ee,"batchingColorTexture"),Ee._colorsTexture!==null&&Un.setValue(J,"batchingColorTexture",Ee._colorsTexture,ee));const Wt=Te.morphAttributes;if((Wt.position!==void 0||Wt.normal!==void 0||Wt.color!==void 0)&&Ie.update(Ee,Te,Yi),(Cn||fn.receiveShadow!==Ee.receiveShadow)&&(fn.receiveShadow=Ee.receiveShadow,Un.setValue(J,"receiveShadow",Ee.receiveShadow)),Oe.isMeshGouraudMaterial&&Oe.envMap!==null&&(rn.envMap.value=Zt,rn.flipEnvMap.value=Zt.isCubeTexture&&Zt.isRenderTargetTexture===!1?-1:1),Oe.isMeshStandardMaterial&&Oe.envMap===null&&de.environment!==null&&(rn.envMapIntensity.value=de.environmentIntensity),Cn&&(Un.setValue(J,"toneMappingExposure",_.toneMappingExposure),fn.needsLights&&yn(rn,Mn),ut&&Oe.fog===!0&&Ve.refreshFogUniforms(rn,ut),Ve.refreshMaterialUniforms(rn,Oe,F,B,y.state.transmissionRenderTarget[te.id]),RP.upload(J,Lt(fn),rn,ee)),Oe.isShaderMaterial&&Oe.uniformsNeedUpdate===!0&&(RP.upload(J,Lt(fn),rn,ee),Oe.uniformsNeedUpdate=!1),Oe.isSpriteMaterial&&Un.setValue(J,"center",Ee.center),Un.setValue(J,"modelViewMatrix",Ee.modelViewMatrix),Un.setValue(J,"normalMatrix",Ee.normalMatrix),Un.setValue(J,"modelMatrix",Ee.matrixWorld),Oe.isShaderMaterial||Oe.isRawShaderMaterial){const Dn=Oe.uniformsGroups;for(let hr=0,Li=Dn.length;hr<Li;hr++){const Ui=Dn[hr];xe.update(Ui,Yi),xe.bind(Ui,Yi)}}return Yi}function yn(te,de){te.ambientLightColor.needsUpdate=de,te.lightProbe.needsUpdate=de,te.directionalLights.needsUpdate=de,te.directionalLightShadows.needsUpdate=de,te.pointLights.needsUpdate=de,te.pointLightShadows.needsUpdate=de,te.spotLights.needsUpdate=de,te.spotLightShadows.needsUpdate=de,te.rectAreaLights.needsUpdate=de,te.hemisphereLights.needsUpdate=de}function kn(te){return te.isMeshLambertMaterial||te.isMeshToonMaterial||te.isMeshPhongMaterial||te.isMeshStandardMaterial||te.isShadowMaterial||te.isShaderMaterial&&te.lights===!0}this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(te,de,Te){He.get(te.texture).__webglTexture=de,He.get(te.depthTexture).__webglTexture=Te;const Oe=He.get(te);Oe.__hasExternalTextures=!0,Oe.__autoAllocateDepthBuffer=Te===void 0,Oe.__autoAllocateDepthBuffer||ve.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Oe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(te,de){const Te=He.get(te);Te.__webglFramebuffer=de,Te.__useDefaultFramebuffer=de===void 0},this.setRenderTarget=function(te,de=0,Te=0){T=te,M=de,E=Te;let Oe=!0,Ee=null,ut=!1,Dt=!1;if(te){const Zt=He.get(te);if(Zt.__useDefaultFramebuffer!==void 0)Re.bindFramebuffer(J.FRAMEBUFFER,null),Oe=!1;else if(Zt.__webglFramebuffer===void 0)ee.setupRenderTarget(te);else if(Zt.__hasExternalTextures)ee.rebindTextures(te,He.get(te.texture).__webglTexture,He.get(te.depthTexture).__webglTexture);else if(te.depthBuffer){const zt=te.depthTexture;if(Zt.__boundDepthTexture!==zt){if(zt!==null&&He.has(zt)&&(te.width!==zt.image.width||te.height!==zt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ee.setupDepthRenderbuffer(te)}}const dn=te.texture;(dn.isData3DTexture||dn.isDataArrayTexture||dn.isCompressedArrayTexture)&&(Dt=!0);const kt=He.get(te).__webglFramebuffer;te.isWebGLCubeRenderTarget?(Array.isArray(kt[de])?Ee=kt[de][Te]:Ee=kt[de],ut=!0):te.samples>0&&ee.useMultisampledRTT(te)===!1?Ee=He.get(te).__webglMultisampledFramebuffer:Array.isArray(kt)?Ee=kt[Te]:Ee=kt,N.copy(te.viewport),O.copy(te.scissor),I=te.scissorTest}else N.copy(U).multiplyScalar(F).floor(),O.copy(H).multiplyScalar(F).floor(),I=X;if(Re.bindFramebuffer(J.FRAMEBUFFER,Ee)&&Oe&&Re.drawBuffers(te,Ee),Re.viewport(N),Re.scissor(O),Re.setScissorTest(I),ut){const Zt=He.get(te.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_CUBE_MAP_POSITIVE_X+de,Zt.__webglTexture,Te)}else if(Dt){const Zt=He.get(te.texture),dn=de||0;J.framebufferTextureLayer(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,Zt.__webglTexture,Te||0,dn)}P=-1},this.readRenderTargetPixels=function(te,de,Te,Oe,Ee,ut,Dt){if(!(te&&te.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Bt=He.get(te).__webglFramebuffer;if(te.isWebGLCubeRenderTarget&&Dt!==void 0&&(Bt=Bt[Dt]),Bt){Re.bindFramebuffer(J.FRAMEBUFFER,Bt);try{const Zt=te.texture,dn=Zt.format,kt=Zt.type;if(!Me.textureFormatReadable(dn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Me.textureTypeReadable(kt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}de>=0&&de<=te.width-Oe&&Te>=0&&Te<=te.height-Ee&&J.readPixels(de,Te,Oe,Ee,Ke.convert(dn),Ke.convert(kt),ut)}finally{const Zt=T!==null?He.get(T).__webglFramebuffer:null;Re.bindFramebuffer(J.FRAMEBUFFER,Zt)}}},this.readRenderTargetPixelsAsync=async function(te,de,Te,Oe,Ee,ut,Dt){if(!(te&&te.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Bt=He.get(te).__webglFramebuffer;if(te.isWebGLCubeRenderTarget&&Dt!==void 0&&(Bt=Bt[Dt]),Bt){const Zt=te.texture,dn=Zt.format,kt=Zt.type;if(!Me.textureFormatReadable(dn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Me.textureTypeReadable(kt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(de>=0&&de<=te.width-Oe&&Te>=0&&Te<=te.height-Ee){Re.bindFramebuffer(J.FRAMEBUFFER,Bt);const zt=J.createBuffer();J.bindBuffer(J.PIXEL_PACK_BUFFER,zt),J.bufferData(J.PIXEL_PACK_BUFFER,ut.byteLength,J.STREAM_READ),J.readPixels(de,Te,Oe,Ee,Ke.convert(dn),Ke.convert(kt),0);const En=T!==null?He.get(T).__webglFramebuffer:null;Re.bindFramebuffer(J.FRAMEBUFFER,En);const Bn=J.fenceSync(J.SYNC_GPU_COMMANDS_COMPLETE,0);return J.flush(),await H3t(J,Bn,4),J.bindBuffer(J.PIXEL_PACK_BUFFER,zt),J.getBufferSubData(J.PIXEL_PACK_BUFFER,0,ut),J.deleteBuffer(zt),J.deleteSync(Bn),ut}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(te,de=null,Te=0){te.isTexture!==!0&&(h0("WebGLRenderer: copyFramebufferToTexture function signature has changed."),de=arguments[0]||null,te=arguments[1]);const Oe=Math.pow(2,-Te),Ee=Math.floor(te.image.width*Oe),ut=Math.floor(te.image.height*Oe),Dt=de!==null?de.x:0,Bt=de!==null?de.y:0;ee.setTexture2D(te,0),J.copyTexSubImage2D(J.TEXTURE_2D,Te,0,0,Dt,Bt,Ee,ut),Re.unbindTexture()};const qn=J.createFramebuffer(),_n=J.createFramebuffer();this.copyTextureToTexture=function(te,de,Te=null,Oe=null,Ee=0,ut=null){te.isTexture!==!0&&(h0("WebGLRenderer: copyTextureToTexture function signature has changed."),Oe=arguments[0]||null,te=arguments[1],de=arguments[2],ut=arguments[3]||0,Te=null),ut===null&&(Ee!==0?(h0("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ut=Ee,Ee=0):ut=0);let Dt,Bt,Zt,dn,kt,zt,En,Bn,In;const zn=te.isCompressedTexture?te.mipmaps[ut]:te.image;if(Te!==null)Dt=Te.max.x-Te.min.x,Bt=Te.max.y-Te.min.y,Zt=Te.isBox3?Te.max.z-Te.min.z:1,dn=Te.min.x,kt=Te.min.y,zt=Te.isBox3?Te.min.z:0;else{const Wt=Math.pow(2,-Ee);Dt=Math.floor(zn.width*Wt),Bt=Math.floor(zn.height*Wt),te.isDataArrayTexture?Zt=zn.depth:te.isData3DTexture?Zt=Math.floor(zn.depth*Wt):Zt=1,dn=0,kt=0,zt=0}Oe!==null?(En=Oe.x,Bn=Oe.y,In=Oe.z):(En=0,Bn=0,In=0);const Rn=Ke.convert(de.format),fn=Ke.convert(de.type);let Yr;de.isData3DTexture?(ee.setTexture3D(de,0),Yr=J.TEXTURE_3D):de.isDataArrayTexture||de.isCompressedArrayTexture?(ee.setTexture2DArray(de,0),Yr=J.TEXTURE_2D_ARRAY):(ee.setTexture2D(de,0),Yr=J.TEXTURE_2D),J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,de.flipY),J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),J.pixelStorei(J.UNPACK_ALIGNMENT,de.unpackAlignment);const Hn=J.getParameter(J.UNPACK_ROW_LENGTH),Yi=J.getParameter(J.UNPACK_IMAGE_HEIGHT),sa=J.getParameter(J.UNPACK_SKIP_PIXELS),Cn=J.getParameter(J.UNPACK_SKIP_ROWS),Mn=J.getParameter(J.UNPACK_SKIP_IMAGES);J.pixelStorei(J.UNPACK_ROW_LENGTH,zn.width),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,zn.height),J.pixelStorei(J.UNPACK_SKIP_PIXELS,dn),J.pixelStorei(J.UNPACK_SKIP_ROWS,kt),J.pixelStorei(J.UNPACK_SKIP_IMAGES,zt);const Un=te.isDataArrayTexture||te.isData3DTexture,rn=de.isDataArrayTexture||de.isData3DTexture;if(te.isDepthTexture){const Wt=He.get(te),Dn=He.get(de),hr=He.get(Wt.__renderTarget),Li=He.get(Dn.__renderTarget);Re.bindFramebuffer(J.READ_FRAMEBUFFER,hr.__webglFramebuffer),Re.bindFramebuffer(J.DRAW_FRAMEBUFFER,Li.__webglFramebuffer);for(let Ui=0;Ui<Zt;Ui++)Un&&(J.framebufferTextureLayer(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,He.get(te).__webglTexture,Ee,zt+Ui),J.framebufferTextureLayer(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,He.get(de).__webglTexture,ut,In+Ui)),J.blitFramebuffer(dn,kt,Dt,Bt,En,Bn,Dt,Bt,J.DEPTH_BUFFER_BIT,J.NEAREST);Re.bindFramebuffer(J.READ_FRAMEBUFFER,null),Re.bindFramebuffer(J.DRAW_FRAMEBUFFER,null)}else if(Ee!==0||te.isRenderTargetTexture||He.has(te)){const Wt=He.get(te),Dn=He.get(de);Re.bindFramebuffer(J.READ_FRAMEBUFFER,qn),Re.bindFramebuffer(J.DRAW_FRAMEBUFFER,_n);for(let hr=0;hr<Zt;hr++)Un?J.framebufferTextureLayer(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,Wt.__webglTexture,Ee,zt+hr):J.framebufferTexture2D(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,Wt.__webglTexture,Ee),rn?J.framebufferTextureLayer(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,Dn.__webglTexture,ut,In+hr):J.framebufferTexture2D(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,Dn.__webglTexture,ut),Ee!==0?J.blitFramebuffer(dn,kt,Dt,Bt,En,Bn,Dt,Bt,J.COLOR_BUFFER_BIT,J.NEAREST):rn?J.copyTexSubImage3D(Yr,ut,En,Bn,In+hr,dn,kt,Dt,Bt):J.copyTexSubImage2D(Yr,ut,En,Bn,dn,kt,Dt,Bt);Re.bindFramebuffer(J.READ_FRAMEBUFFER,null),Re.bindFramebuffer(J.DRAW_FRAMEBUFFER,null)}else rn?te.isDataTexture||te.isData3DTexture?J.texSubImage3D(Yr,ut,En,Bn,In,Dt,Bt,Zt,Rn,fn,zn.data):de.isCompressedArrayTexture?J.compressedTexSubImage3D(Yr,ut,En,Bn,In,Dt,Bt,Zt,Rn,zn.data):J.texSubImage3D(Yr,ut,En,Bn,In,Dt,Bt,Zt,Rn,fn,zn):te.isDataTexture?J.texSubImage2D(J.TEXTURE_2D,ut,En,Bn,Dt,Bt,Rn,fn,zn.data):te.isCompressedTexture?J.compressedTexSubImage2D(J.TEXTURE_2D,ut,En,Bn,zn.width,zn.height,Rn,zn.data):J.texSubImage2D(J.TEXTURE_2D,ut,En,Bn,Dt,Bt,Rn,fn,zn);J.pixelStorei(J.UNPACK_ROW_LENGTH,Hn),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,Yi),J.pixelStorei(J.UNPACK_SKIP_PIXELS,sa),J.pixelStorei(J.UNPACK_SKIP_ROWS,Cn),J.pixelStorei(J.UNPACK_SKIP_IMAGES,Mn),ut===0&&de.generateMipmaps&&J.generateMipmap(Yr),Re.unbindTexture()},this.copyTextureToTexture3D=function(te,de,Te=null,Oe=null,Ee=0){return te.isTexture!==!0&&(h0("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Te=arguments[0]||null,Oe=arguments[1]||null,te=arguments[2],de=arguments[3],Ee=arguments[4]||0),h0('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(te,de,Te,Oe,Ee)},this.initRenderTarget=function(te){He.get(te).__webglFramebuffer===void 0&&ee.setupRenderTarget(te)},this.initTexture=function(te){te.isCubeTexture?ee.setTextureCube(te,0):te.isData3DTexture?ee.setTexture3D(te,0):te.isDataArrayTexture||te.isCompressedArrayTexture?ee.setTexture2DArray(te,0):ee.setTexture2D(te,0),Re.unbindTexture()},this.resetState=function(){M=0,E=0,T=null,Re.reset(),mt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ku}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const r=this.getContext();r.drawingBufferColorspace=Mr._getDrawingBufferColorSpace(e),r.unpackColorSpace=Mr._getUnpackColorSpace()}}const vx=new Pd,np=new Nt,AAe=new ge,Rz=new Nt,PP=new Nt,$O=new ge,DH=new ge,RAe=new jr,PAe=new ge,NAe=new ge;let Gl=null,Ef=null;const rp=[],Om={NONE:-1,PAN:0,ROTATE:1};class UIt extends FL{constructor(e,r,i=null){super(r,i),this.objects=e,this.recursive=!0,this.transformGroup=!1,this.rotateSpeed=1,this.raycaster=new wAe,this.mouseButtons={LEFT:gs.PAN,MIDDLE:gs.PAN,RIGHT:gs.ROTATE},this.touches={ONE:pp.PAN},this._onPointerMove=VIt.bind(this),this._onPointerDown=GIt.bind(this),this._onPointerCancel=jIt.bind(this),this._onContextMenu=HIt.bind(this),i!==null&&this.connect()}connect(){this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerCancel),this.domElement.addEventListener("pointerleave",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerCancel),this.domElement.removeEventListener("pointerleave",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto",this.domElement.style.cursor=""}dispose(){this.disconnect()}_updatePointer(e){const r=this.domElement.getBoundingClientRect();np.x=(e.clientX-r.left)/r.width*2-1,np.y=-(e.clientY-r.top)/r.height*2+1}_updateState(e){let r;if(e.pointerType==="touch")r=this.touches.ONE;else switch(e.button){case 0:r=this.mouseButtons.LEFT;break;case 1:r=this.mouseButtons.MIDDLE;break;case 2:r=this.mouseButtons.RIGHT;break;default:r=null}switch(r){case gs.PAN:case pp.PAN:this.state=Om.PAN;break;case gs.ROTATE:case pp.ROTATE:this.state=Om.ROTATE;break;default:this.state=Om.NONE}}getRaycaster(){return console.warn("THREE.DragControls: getRaycaster() has been deprecated. Use controls.raycaster instead."),this.raycaster}setObjects(e){console.warn("THREE.DragControls: setObjects() has been deprecated. Use controls.objects instead."),this.objects=e}getObjects(){return console.warn("THREE.DragControls: getObjects() has been deprecated. Use controls.objects instead."),this.objects}activate(){console.warn("THREE.DragControls: activate() has been renamed to connect()."),this.connect()}deactivate(){console.warn("THREE.DragControls: deactivate() has been renamed to disconnect()."),this.disconnect()}set mode(e){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}get mode(){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}}function VIt(n){const e=this.object,r=this.domElement,i=this.raycaster;if(this.enabled!==!1){if(this._updatePointer(n),i.setFromCamera(np,e),Gl)this.state===Om.PAN?i.ray.intersectPlane(vx,$O)&&Gl.position.copy($O.sub(AAe).applyMatrix4(RAe)):this.state===Om.ROTATE&&(Rz.subVectors(np,PP).multiplyScalar(this.rotateSpeed),Gl.rotateOnWorldAxis(PAe,Rz.x),Gl.rotateOnWorldAxis(NAe.normalize(),-Rz.y)),this.dispatchEvent({type:"drag",object:Gl}),PP.copy(np);else if(n.pointerType==="mouse"||n.pointerType==="pen")if(rp.length=0,i.setFromCamera(np,e),i.intersectObjects(this.objects,this.recursive,rp),rp.length>0){const a=rp[0].object;vx.setFromNormalAndCoplanarPoint(e.getWorldDirection(vx.normal),DH.setFromMatrixPosition(a.matrixWorld)),Ef!==a&&Ef!==null&&(this.dispatchEvent({type:"hoveroff",object:Ef}),r.style.cursor="auto",Ef=null),Ef!==a&&(this.dispatchEvent({type:"hoveron",object:a}),r.style.cursor="pointer",Ef=a)}else Ef!==null&&(this.dispatchEvent({type:"hoveroff",object:Ef}),r.style.cursor="auto",Ef=null);PP.copy(np)}}function GIt(n){const e=this.object,r=this.domElement,i=this.raycaster;this.enabled!==!1&&(this._updatePointer(n),this._updateState(n),rp.length=0,i.setFromCamera(np,e),i.intersectObjects(this.objects,this.recursive,rp),rp.length>0&&(this.transformGroup===!0?Gl=OAe(rp[0].object):Gl=rp[0].object,vx.setFromNormalAndCoplanarPoint(e.getWorldDirection(vx.normal),DH.setFromMatrixPosition(Gl.matrixWorld)),i.ray.intersectPlane(vx,$O)&&(this.state===Om.PAN?(RAe.copy(Gl.parent.matrixWorld).invert(),AAe.copy($O).sub(DH.setFromMatrixPosition(Gl.matrixWorld))):this.state===Om.ROTATE&&(PAe.set(0,1,0).applyQuaternion(e.quaternion).normalize(),NAe.set(1,0,0).applyQuaternion(e.quaternion).normalize())),r.style.cursor="move",this.dispatchEvent({type:"dragstart",object:Gl})),PP.copy(np))}function jIt(){this.enabled!==!1&&(Gl&&(this.dispatchEvent({type:"dragend",object:Gl}),Gl=null),this.domElement.style.cursor=Ef?"pointer":"auto",this.state=Om.NONE)}function HIt(n){this.enabled!==!1&&n.preventDefault()}function OAe(n,e=null){return n.isGroup&&(e=n),n.parent===null?e:OAe(n.parent,e)}var vZ=function(e){qIt(e);var r=WIt(e);return e.on=r.on,e.off=r.off,e.fire=r.fire,e};function WIt(n){var e=Object.create(null);return{on:function(r,i,a){if(typeof i!="function")throw new Error("callback is expected to be a function");var o=e[r];return o||(o=e[r]=[]),o.push({callback:i,ctx:a}),n},off:function(r,i){var a=typeof r>"u";if(a)return e=Object.create(null),n;if(e[r]){var o=typeof i!="function";if(o)delete e[r];else for(var s=e[r],l=0;l<s.length;++l)s[l].callback===i&&s.splice(l,1)}return n},fire:function(r){var i=e[r];if(!i)return n;var a;arguments.length>1&&(a=Array.prototype.splice.call(arguments,1));for(var o=0;o<i.length;++o){var s=i[o];s.callback.apply(s.ctx,a)}return n}}}function qIt(n){if(!n)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],r=0;r<e.length;++r)if(n.hasOwnProperty(e[r]))throw new Error("Subject cannot be eventified, since it already has property '"+e[r]+"'")}var YIt=KIt,XIt=vZ;function KIt(n){if(n=n||{},"uniqueLinkId"in n&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),n.multigraph=n.uniqueLinkId),n.multigraph===void 0&&(n.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,r=new Map,i={},a=0,o=n.multigraph?_:x,s=[],l=$,c=$,u=$,d=$,f={version:20,addNode:m,addLink:b,removeLink:T,removeNode:y,getNode:v,getNodeCount:S,getLinkCount:M,getEdgeCount:M,getLinksCount:M,getNodesCount:S,getLinks:E,forEachNode:G,forEachLinkedNode:I,forEachLink:O,beginUpdate:u,endUpdate:d,clear:N,hasLink:A,hasNode:v,getLink:A};return XIt(f),h(),f;function h(){var z=f.on;f.on=U;function U(){return f.beginUpdate=u=B,f.endUpdate=d=F,l=p,c=g,f.on=z,z.apply(f,arguments)}}function p(z,U){s.push({link:z,changeType:U})}function g(z,U){s.push({node:z,changeType:U})}function m(z,U){if(z===void 0)throw new Error("Invalid node identifier");u();var H=v(z);return H?(H.data=U,c(H,"update")):(H=new ZIt(z,U),c(H,"add")),e.set(z,H),d(),H}function v(z){return e.get(z)}function y(z){var U=v(z);if(!U)return!1;u();var H=U.links;return H&&(H.forEach(P),U.links=null),e.delete(z),c(U,"remove"),d(),!0}function b(z,U,H){u();var X=v(z)||m(z),V=v(U)||m(U),W=o(z,U,H),K=r.has(W.id);return r.set(W.id,W),uge(X,W),z!==U&&uge(V,W),l(W,K?"update":"add"),d(),W}function x(z,U,H){var X=fR(z,U),V=r.get(X);return V?(V.data=H,V):new dge(z,U,H,X)}function _(z,U,H){var X=fR(z,U),V=i.hasOwnProperty(X);if(V||A(z,U)){V||(i[X]=0);var W="@"+ ++i[X];X=fR(z+W,U+W)}return new dge(z,U,H,X)}function S(){return e.size}function M(){return r.size}function E(z){var U=v(z);return U?U.links:null}function T(z,U){return U!==void 0&&(z=A(z,U)),P(z)}function P(z){if(!z||!r.get(z.id))return!1;u(),r.delete(z.id);var U=v(z.fromId),H=v(z.toId);return U&&U.links.delete(z),H&&H.links.delete(z),l(z,"remove"),d(),!0}function A(z,U){if(!(z===void 0||U===void 0))return r.get(fR(z,U))}function N(){u(),G(function(z){y(z.id)}),d()}function O(z){if(typeof z=="function")for(var U=r.values(),H=U.next();!H.done;){if(z(H.value))return!0;H=U.next()}}function I(z,U,H){var X=v(z);if(X&&X.links&&typeof U=="function")return H?k(X.links,z,U):D(X.links,z,U)}function D(z,U,H){for(var X,V=z.values(),W=V.next();!W.done;){var K=W.value,q=K.fromId===U?K.toId:K.fromId;if(X=H(e.get(q),K),X)return!0;W=V.next()}}function k(z,U,H){for(var X,V=z.values(),W=V.next();!W.done;){var K=W.value;if(K.fromId===U&&(X=H(e.get(K.toId),K),X))return!0;W=V.next()}}function $(){}function B(){a+=1}function F(){a-=1,a===0&&s.length>0&&(f.fire("changed",s),s.length=0)}function G(z){if(typeof z!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+z);for(var U=e.values(),H=U.next();!H.done;){if(z(H.value))return!0;H=U.next()}}}function ZIt(n,e){this.id=n,this.links=null,this.data=e}function uge(n,e){n.links?n.links.add(e):n.links=new Set([e])}function dge(n,e,r,i){this.fromId=n,this.toId=e,this.data=r,this.id=i}function fR(n,e){return n.toString()+"👉 "+e.toString()}const QIt=Sl(YIt);var yZ={exports:{}},YM={exports:{}},IAe=function(e){return e===0?"x":e===1?"y":e===2?"z":"c"+(e+1)};const JIt=IAe;var pw=function(e){return r;function r(i,a){let o=a&&a.indent||0,s=a&&a.join!==void 0?a.join:`
`,l=Array(o+1).join(" "),c=[];for(let u=0;u<e;++u){let d=JIt(u),f=u===0?"":l;c.push(f+i.replace(/{var}/g,d))}return c.join(s)}};const DAe=pw;YM.exports=e4t;YM.exports.generateCreateBodyFunctionBody=LAe;YM.exports.getVectorCode=FAe;YM.exports.getBodyCode=kAe;function e4t(n,e){let r=LAe(n,e),{Body:i}=new Function(r)();return i}function LAe(n,e){return`
${FAe(n,e)}
${kAe(n)}
return {Body: Body, Vector: Vector};
`}function kAe(n){let e=DAe(n),r=e("{var}",{join:", "});return`
function Body(${r}) {
  this.isPinned = false;
  this.pos = new Vector(${r});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${r}) {
  ${e("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function FAe(n,e){let r=DAe(n),i="";return e&&(i=`${r(`
   var v{var};
Object.defineProperty(this, '{var}', {
  set: function(v) { 
    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');
    v{var} = v; 
  },
  get: function() { return v{var}; }
});`)}`),`function Vector(${r("{var}",{join:", "})}) {
  ${i}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${r('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${r("this.{var} = v.{var};",{indent:4})}
    } else {
      ${r('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${r("this.{var} = ",{join:""})}0;
  };`}var t4t=YM.exports,yv={exports:{}};const bZ=pw,Ag=IAe;yv.exports=n4t;yv.exports.generateQuadTreeFunctionBody=$Ae;yv.exports.getInsertStackCode=GAe;yv.exports.getQuadNodeCode=VAe;yv.exports.isSamePosition=BAe;yv.exports.getChildBodyCode=UAe;yv.exports.setChildBodyCode=zAe;function n4t(n){let e=$Ae(n);return new Function(e)()}function $Ae(n){let e=bZ(n),r=Math.pow(2,n);return`
${GAe()}
${VAe(n)}
${BAe(n)}
${UAe(n)}
${zAe(n)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${s("      node.")}
      node.body = null;
      node.mass = ${e("node.mass_{var} = ",{join:""})}0;
      ${e("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${e("var d{var};",{indent:4})}
    var r; 
    ${e("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${e("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${e("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${e("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < θ, treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${Ag(0)} - node.min_${Ag(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${e("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${o()}
        }
      }
    }

    ${e("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${e("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${e("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${e("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${e("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${e("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${e("root.min_{var} = {var}min;",{indent:4})}
    ${e("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${e("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${e("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${e("var min_{var} = node.min_{var};",{indent:8})}
        ${e("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${a(8)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${e("child.min_{var} = min_{var};",{indent:10})}
          ${e("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${e("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${e("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`;function a(l){let c=[],u=Array(l+1).join(" ");for(let d=0;d<n;++d)c.push(u+`if (${Ag(d)} > max_${Ag(d)}) {`),c.push(u+`  quadIdx = quadIdx + ${Math.pow(2,d)};`),c.push(u+`  min_${Ag(d)} = max_${Ag(d)};`),c.push(u+`  max_${Ag(d)} = node.max_${Ag(d)};`),c.push(u+"}");return c.join(`
`)}function o(){let l=Array(11).join(" "),c=[];for(let u=0;u<r;++u)c.push(l+`if (node.quad${u}) {`),c.push(l+`  queue[pushIdx] = node.quad${u};`),c.push(l+"  queueLength += 1;"),c.push(l+"  pushIdx += 1;"),c.push(l+"}");return c.join(`
`)}function s(l){let c=[];for(let u=0;u<r;++u)c.push(`${l}quad${u} = null;`);return c.join(`
`)}}function BAe(n){let e=bZ(n);return`
  function isSamePosition(point1, point2) {
    ${e("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${e("d{var} < 1e-8",{join:" && "})};
  }  
`}function zAe(n){var e=Math.pow(2,n);return`
function setChild(node, idx, child) {
  ${r()}
}`;function r(){let i=[];for(let a=0;a<e;++a){let o=a===0?"  ":"  else ";i.push(`${o}if (idx === ${a}) node.quad${a} = child;`)}return i.join(`
`)}}function UAe(n){return`function getChild(node, idx) {
${e()}
  return null;
}`;function e(){let r=[],i=Math.pow(2,n);for(let a=0;a<i;++a)r.push(`  if (idx === ${a}) return node.quad${a};`);return r.join(`
`)}}function VAe(n){let e=bZ(n),r=Math.pow(2,n);var i=`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${a("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${e("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${e("this.min_{var} = 0;",{indent:2})}
  ${e("this.max_{var} = 0;",{indent:2})}
}
`;return i;function a(o){let s=[];for(let l=0;l<r;++l)s.push(`${o}quad${l} = null;`);return s.join(`
`)}}function GAe(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}var r4t=yv.exports,xZ={exports:{}};xZ.exports=a4t;xZ.exports.generateFunctionBody=jAe;const i4t=pw;function a4t(n){let e=jAe(n);return new Function("bodies","settings","random",e)}function jAe(n){let e=i4t(n);return`
  var boundingBox = {
    ${e("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${e("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${e("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${e("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${e("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${e("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${e("var max_{var} = -Infinity;",{indent:4})}
    ${e("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${e("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${e("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${e("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${e("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${e("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}var o4t=xZ.exports,_Z={exports:{}};const s4t=pw;_Z.exports=l4t;_Z.exports.generateCreateDragForceFunctionBody=HAe;function l4t(n){let e=HAe(n);return new Function("options",e)}function HAe(n){return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${s4t(n)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}var c4t=_Z.exports,wZ={exports:{}};const u4t=pw;wZ.exports=d4t;wZ.exports.generateCreateSpringForceFunctionBody=WAe;function d4t(n){let e=WAe(n);return new Function("options","random",e)}function WAe(n){let e=u4t(n);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${e("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${e("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${e("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}var f4t=wZ.exports,SZ={exports:{}};const h4t=pw;SZ.exports=p4t;SZ.exports.generateIntegratorFunctionBody=qAe;function p4t(n){let e=qAe(n);return new Function("bodies","timeStep","adaptiveTimeStepWeight",e)}function qAe(n){let e=h4t(n);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${e("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${e("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${e("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${e("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${e("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${e("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${e("body.pos.{var} += d{var};",{indent:4})}

    ${e("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${e("t{var} * t{var}",{join:" + "})})/length;
`}var g4t=SZ.exports,Pz,fge;function m4t(){if(fge)return Pz;fge=1,Pz=n;function n(e,r,i,a){this.from=e,this.to=r,this.length=i,this.coefficient=a}return Pz}var Nz,hge;function v4t(){if(hge)return Nz;hge=1,Nz=n;function n(e,r){var i;if(e||(e={}),r){for(i in r)if(r.hasOwnProperty(i)){var a=e.hasOwnProperty(i),o=typeof r[i],s=!a||typeof e[i]!==o;s?e[i]=r[i]:o==="object"&&(e[i]=n(e[i],r[i]))}}return e}return Nz}var RS={exports:{}},pge;function y4t(){if(pge)return RS.exports;pge=1,RS.exports=n,RS.exports.random=n,RS.exports.randomIterator=l;function n(c){var u=typeof c=="number"?c:+new Date;return new e(u)}function e(c){this.seed=c}e.prototype.next=s,e.prototype.nextDouble=o,e.prototype.uniform=o,e.prototype.gaussian=r,e.prototype.random=o;function r(){var c,u,d;do u=this.nextDouble()*2-1,d=this.nextDouble()*2-1,c=u*u+d*d;while(c>=1||c===0);return u*Math.sqrt(-2*Math.log(c)/c)}e.prototype.levy=i;function i(){var c=1.5,u=Math.pow(a(1+c)*Math.sin(Math.PI*c/2)/(a((1+c)/2)*c*Math.pow(2,(c-1)/2)),1/c);return this.gaussian()*u/Math.pow(Math.abs(this.gaussian()),1/c)}function a(c){return Math.sqrt(2*Math.PI/c)*Math.pow(1/Math.E*(c+1/(12*c-1/(10*c))),c)}function o(){var c=this.seed;return c=c+2127912214+(c<<12)&4294967295,c=(c^3345072700^c>>>19)&4294967295,c=c+374761393+(c<<5)&4294967295,c=(c+3550635116^c<<9)&4294967295,c=c+4251993797+(c<<3)&4294967295,c=(c^3042594569^c>>>16)&4294967295,this.seed=c,(c&268435455)/268435456}function s(c){return Math.floor(this.nextDouble()*c)}function l(c,u){var d=u||n();if(typeof d.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:h,shuffle:f};function f(){var p,g,m;for(p=c.length-1;p>0;--p)g=d.next(p+1),m=c[g],c[g]=c[p],c[p]=m;return c}function h(p){var g,m,v;for(g=c.length-1;g>0;--g)m=d.next(g+1),v=c[m],c[m]=c[g],c[g]=v,p(v);c.length&&p(c[0])}}return RS.exports}var YAe=C4t,b4t=t4t,x4t=r4t,_4t=o4t,w4t=c4t,S4t=f4t,E4t=g4t,gge={};function C4t(n){var e=m4t(),r=v4t(),i=vZ;if(n){if(n.springCoeff!==void 0)throw new Error("springCoeff was renamed to springCoefficient");if(n.dragCoeff!==void 0)throw new Error("dragCoeff was renamed to dragCoefficient")}n=r(n,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var a=gge[n.dimensions];if(!a){var o=n.dimensions;a={Body:b4t(o,n.debug),createQuadTree:x4t(o),createBounds:_4t(o),createDragForce:w4t(o),createSpringForce:S4t(o),integrate:E4t(o)},gge[o]=a}var s=a.Body,l=a.createQuadTree,c=a.createBounds,u=a.createDragForce,d=a.createSpringForce,f=a.integrate,h=k=>new s(k),p=y4t().random(42),g=[],m=[],v=l(n,p),y=c(g,n,p),b=d(n,p),x=u(n),_=0,S=[],M=new Map,E=0;A("nbody",I),A("spring",D);var T={bodies:g,quadTree:v,springs:m,settings:n,addForce:A,removeForce:N,getForces:O,step:function(){for(var k=0;k<S.length;++k)S[k](E);var $=f(g,n.timeStep,n.adaptiveTimeStepWeight);return E+=1,$},addBody:function(k){if(!k)throw new Error("Body is required");return g.push(k),k},addBodyAt:function(k){if(!k)throw new Error("Body position is required");var $=h(k);return g.push($),$},removeBody:function(k){if(k){var $=g.indexOf(k);if(!($<0))return g.splice($,1),g.length===0&&y.reset(),!0}},addSpring:function(k,$,B,F){if(!k||!$)throw new Error("Cannot add null spring to force simulator");typeof B!="number"&&(B=-1);var G=new e(k,$,B,F>=0?F:-1);return m.push(G),G},getTotalMovement:function(){return _},removeSpring:function(k){if(k){var $=m.indexOf(k);if($>-1)return m.splice($,1),!0}},getBestNewBodyPosition:function(k){return y.getBestNewPosition(k)},getBBox:P,getBoundingBox:P,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(k){return k!==void 0?(n.gravity=k,v.options({gravity:k}),this):n.gravity},theta:function(k){return k!==void 0?(n.theta=k,v.options({theta:k}),this):n.theta},random:p};return M4t(n,T),i(T),T;function P(){return y.update(),y.box}function A(k,$){if(M.has(k))throw new Error("Force "+k+" is already added");M.set(k,$),S.push($)}function N(k){var $=S.indexOf(M.get(k));$<0||(S.splice($,1),M.delete(k))}function O(){return M}function I(){if(g.length!==0){v.insertBodies(g);for(var k=g.length;k--;){var $=g[k];$.isPinned||($.reset(),v.updateBodyForce($),x.update($))}}}function D(){for(var k=m.length;k--;)b.update(m[k])}}function M4t(n,e){for(var r in n)T4t(n,e,r)}function T4t(n,e,r){if(n.hasOwnProperty(r)&&typeof e[r]!="function"){var i=Number.isFinite(n[r]);i?e[r]=function(a){if(a!==void 0){if(!Number.isFinite(a))throw new Error("Value of "+r+" should be a valid number.");return n[r]=a,e}return n[r]}:e[r]=function(a){return a!==void 0?(n[r]=a,e):n[r]}}}yZ.exports=R4t;yZ.exports.simulator=YAe;var A4t=vZ;function R4t(n,e){if(!n)throw new Error("Graph structure cannot be undefined");var r=e&&e.createSimulator||YAe,i=r(e);if(Array.isArray(e))throw new Error("Physics settings is expected to be an object");var a=n.version>19?I:O;e&&typeof e.nodeMass=="function"&&(a=e.nodeMass);var o=new Map,s={},l=0,c=i.settings.springTransform||P4t;x(),v();var u=!1,d={step:function(){if(l===0)return f(!0),!0;var D=i.step();d.lastMove=D,d.fire("step");var k=D/l,$=k<=.01;return f($),$},getNodePosition:function(D){return N(D).pos},setNodePosition:function(D){var k=N(D);k.setPosition.apply(k,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(D){var k=s[D];if(k)return{from:k.from.pos,to:k.to.pos}},getGraphRect:function(){return i.getBBox()},forEachBody:h,pinNode:function(D,k){var $=N(D.id);$.isPinned=!!k},isNodePinned:function(D){return N(D.id).isPinned},dispose:function(){n.off("changed",b),d.fire("disposed")},getBody:m,getSpring:g,getForceVectorLength:p,simulator:i,graph:n,lastMove:0};return A4t(d),d;function f(D){u!==D&&(u=D,y(D))}function h(D){o.forEach(D)}function p(){var D=0,k=0;return h(function($){D+=Math.abs($.force.x),k+=Math.abs($.force.y)}),Math.sqrt(D*D+k*k)}function g(D,k){var $;if(k===void 0)typeof D!="object"?$=D:$=D.id;else{var B=n.hasLink(D,k);if(!B)return;$=B.id}return s[$]}function m(D){return o.get(D)}function v(){n.on("changed",b)}function y(D){d.fire("stable",D)}function b(D){for(var k=0;k<D.length;++k){var $=D[k];$.changeType==="add"?($.node&&_($.node.id),$.link&&M($.link)):$.changeType==="remove"&&($.node&&S($.node),$.link&&E($.link))}l=n.getNodesCount()}function x(){l=0,n.forEachNode(function(D){_(D.id),l+=1}),n.forEachLink(M)}function _(D){var k=o.get(D);if(!k){var $=n.getNode(D);if(!$)throw new Error("initBody() was called with unknown node id");var B=$.position;if(!B){var F=T($);B=i.getBestNewBodyPosition(F)}k=i.addBodyAt(B),k.id=D,o.set(D,k),P(D),A($)&&(k.isPinned=!0)}}function S(D){var k=D.id,$=o.get(k);$&&(o.delete(k),i.removeBody($))}function M(D){P(D.fromId),P(D.toId);var k=o.get(D.fromId),$=o.get(D.toId),B=i.addSpring(k,$,D.length);c(D,B),s[D.id]=B}function E(D){var k=s[D.id];if(k){var $=n.getNode(D.fromId),B=n.getNode(D.toId);$&&P($.id),B&&P(B.id),delete s[D.id],i.removeSpring(k)}}function T(D){var k=[];if(!D.links)return k;for(var $=Math.min(D.links.length,2),B=0;B<$;++B){var F=D.links[B],G=F.fromId!==D.id?o.get(F.fromId):o.get(F.toId);G&&G.pos&&k.push(G)}return k}function P(D){var k=o.get(D);if(k.mass=a(D),Number.isNaN(k.mass))throw new Error("Node mass should be a number")}function A(D){return D&&(D.isPinned||D.data&&D.data.isPinned)}function N(D){var k=o.get(D);return k||(_(D),k=o.get(D)),k}function O(D){var k=n.getLinks(D);return k?1+k.length/3:1}function I(D){var k=n.getLinks(D);return k?1+k.size/3:1}}function P4t(){}var N4t=yZ.exports;const O4t=Sl(N4t);function LH(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var I4t=typeof global=="object"&&global&&global.Object===Object&&global,D4t=typeof self=="object"&&self&&self.Object===Object&&self,XAe=I4t||D4t||Function("return this")(),Oz=function(){return XAe.Date.now()},L4t=/\s/;function k4t(n){for(var e=n.length;e--&&L4t.test(n.charAt(e)););return e}var F4t=/^\s+/;function $4t(n){return n&&n.slice(0,k4t(n)+1).replace(F4t,"")}var BO=XAe.Symbol,KAe=Object.prototype,B4t=KAe.hasOwnProperty,z4t=KAe.toString,PS=BO?BO.toStringTag:void 0;function U4t(n){var e=B4t.call(n,PS),r=n[PS];try{n[PS]=void 0;var i=!0}catch{}var a=z4t.call(n);return i&&(e?n[PS]=r:delete n[PS]),a}var V4t=Object.prototype,G4t=V4t.toString;function j4t(n){return G4t.call(n)}var H4t="[object Null]",W4t="[object Undefined]",mge=BO?BO.toStringTag:void 0;function q4t(n){return n==null?n===void 0?W4t:H4t:mge&&mge in Object(n)?U4t(n):j4t(n)}function Y4t(n){return n!=null&&typeof n=="object"}var X4t="[object Symbol]";function K4t(n){return typeof n=="symbol"||Y4t(n)&&q4t(n)==X4t}var vge=NaN,Z4t=/^[-+]0x[0-9a-f]+$/i,Q4t=/^0b[01]+$/i,J4t=/^0o[0-7]+$/i,eDt=parseInt;function yge(n){if(typeof n=="number")return n;if(K4t(n))return vge;if(LH(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=LH(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=$4t(n);var r=Q4t.test(n);return r||J4t.test(n)?eDt(n.slice(2),r?2:8):Z4t.test(n)?vge:+n}var tDt="Expected a function",nDt=Math.max,rDt=Math.min;function iDt(n,e,r){var i,a,o,s,l,c,u=0,d=!1,f=!1,h=!0;if(typeof n!="function")throw new TypeError(tDt);e=yge(e)||0,LH(r)&&(d=!!r.leading,f="maxWait"in r,o=f?nDt(yge(r.maxWait)||0,e):o,h="trailing"in r?!!r.trailing:h);function p(M){var E=i,T=a;return i=a=void 0,u=M,s=n.apply(T,E),s}function g(M){return u=M,l=setTimeout(y,e),d?p(M):s}function m(M){var E=M-c,T=M-u,P=e-E;return f?rDt(P,o-T):P}function v(M){var E=M-c,T=M-u;return c===void 0||E>=e||E<0||f&&T>=o}function y(){var M=Oz();if(v(M))return b(M);l=setTimeout(y,m(M))}function b(M){return l=void 0,h&&i?p(M):(i=a=void 0,s)}function x(){l!==void 0&&clearTimeout(l),u=0,i=c=a=l=void 0}function _(){return l===void 0?s:b(Oz())}function S(){var M=Oz(),E=v(M);if(i=arguments,a=this,c=M,E){if(l===void 0)return g(c);if(f)return clearTimeout(l),l=setTimeout(y,e),p(c)}return l===void 0&&(l=setTimeout(y,e)),s}return S.cancel=x,S.flush=_,S}function bge(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function aDt(n){if(Array.isArray(n))return n}function oDt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function sDt(n,e,r){return Object.defineProperty(n,"prototype",{writable:!1}),n}function lDt(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,o,s,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function cDt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uDt(n,e){return aDt(n)||lDt(n,e)||dDt(n,e)||cDt()}function dDt(n,e){if(n){if(typeof n=="string")return bge(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bge(n,e):void 0}}var fDt=sDt(function n(e,r){var i=r.default,a=i===void 0?null:i,o=r.triggerUpdate,s=o===void 0?!0:o,l=r.onChange,c=l===void 0?function(u,d){}:l;oDt(this,n),this.name=e,this.defaultVal=a,this.triggerUpdate=s,this.onChange=c});function BL(n){var e=n.stateInit,r=e===void 0?function(){return{}}:e,i=n.props,a=i===void 0?{}:i,o=n.methods,s=o===void 0?{}:o,l=n.aliases,c=l===void 0?{}:l,u=n.init,d=u===void 0?function(){}:u,f=n.update,h=f===void 0?function(){}:f,p=Object.keys(a).map(function(g){return new fDt(g,a[g])});return function g(){for(var m=arguments.length,v=new Array(m),y=0;y<m;y++)v[y]=arguments[y];var b=!!(this instanceof g&&this.constructor),x=b?v.shift():void 0,_=v[0],S=_===void 0?{}:_,M=Object.assign({},r instanceof Function?r(S):r,{initialised:!1}),E={};function T(N){return P(N,S),A(),T}var P=function(O,I){d.call(T,O,M,I),M.initialised=!0},A=iDt(function(){M.initialised&&(h.call(T,M,E),E={})},1);return p.forEach(function(N){T[N.name]=O(N);function O(I){var D=I.name,k=I.triggerUpdate,$=k===void 0?!1:k,B=I.onChange,F=B===void 0?function(U,H){}:B,G=I.defaultVal,z=G===void 0?null:G;return function(U){var H=M[D];if(!arguments.length)return H;var X=U===void 0?z:U;return M[D]=X,F.call(T,X,M,H),!E.hasOwnProperty(D)&&(E[D]=H),$&&A(),T}}}),Object.keys(s).forEach(function(N){T[N]=function(){for(var O,I=arguments.length,D=new Array(I),k=0;k<I;k++)D[k]=arguments[k];return(O=s[N]).call.apply(O,[T,M].concat(D))}}),Object.entries(c).forEach(function(N){var O=uDt(N,2),I=O[0],D=O[1];return T[I]=T[D]}),T.resetProps=function(){return p.forEach(function(N){T[N.name](N.defaultVal)}),T},T.resetProps(),M._rerender=A,b&&x&&T(x),T}}var ti=function(n){return typeof n=="function"?n:typeof n=="string"?function(e){return e[n]}:function(e){return n}};class xge extends Map{constructor(e,r=gDt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[i,a]of e)this.set(i,a)}get(e){return super.get(_ge(this,e))}has(e){return super.has(_ge(this,e))}set(e,r){return super.set(hDt(this,e),r)}delete(e){return super.delete(pDt(this,e))}}function _ge({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):r}function hDt({_intern:n,_key:e},r){const i=e(r);return n.has(i)?n.get(i):(n.set(i,r),r)}function pDt({_intern:n,_key:e},r){const i=e(r);return n.has(i)&&(r=n.get(i),n.delete(i)),r}function gDt(n){return n!==null&&typeof n=="object"?n.valueOf():n}function mDt(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let a of n)(a=e(a,++i,n))!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}return r}function vDt(n,e){let r;if(e===void 0)for(const i of n)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let a of n)(a=e(a,++i,n))!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}return r}function kH(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function yDt(n){if(Array.isArray(n))return n}function bDt(n){if(Array.isArray(n))return kH(n)}function ZAe(n,e,r){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function xDt(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _Dt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ds(n,e){return n.get(ZAe(n,e))}function ab(n,e,r){xDt(n,e),e.set(n,r)}function hR(n,e,r){return n.set(ZAe(n,e),r),r}function wDt(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,NDt(i.key),i)}}function SDt(n,e,r){return e&&wDt(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function EDt(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function CDt(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,o,s,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function MDt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TDt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ADt(n,e){return yDt(n)||CDt(n,e)||QAe(n,e)||MDt()}function RDt(n){return bDt(n)||EDt(n)||QAe(n)||TDt()}function PDt(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function NDt(n){var e=PDt(n,"string");return typeof e=="symbol"?e:e+""}function QAe(n,e){if(n){if(typeof n=="string")return kH(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kH(n,e):void 0}}var ob=new WeakMap,NS=new WeakMap,sb=new WeakMap,Iz=new WeakMap,Dz=new WeakMap,Lz=new WeakMap,ODt=function(){function n(){_Dt(this,n),ab(this,ob,new Map),ab(this,NS,new Map),ab(this,sb,function(e){return e}),ab(this,Iz,function(){return{}}),ab(this,Dz,function(){}),ab(this,Lz,function(){})}return SDt(n,[{key:"getObj",value:function(r){return Ds(ob,this).get(Ds(sb,this).call(this,r))}},{key:"getData",value:function(r){return Ds(NS,this).get(r)}},{key:"entries",value:function(){return RDt(Ds(NS,this).entries()).map(function(r){var i=ADt(r,2),a=i[0],o=i[1];return[o,a]})}},{key:"id",value:function(r){return hR(sb,this,ti(r)),this}},{key:"onCreateObj",value:function(r){return hR(Iz,this,r),this}},{key:"onUpdateObj",value:function(r){return hR(Dz,this,r),this}},{key:"onRemoveObj",value:function(r){return hR(Lz,this,r),this}},{key:"digest",value:function(r){var i=this;r.filter(function(o){return!Ds(ob,i).has(Ds(sb,i).call(i,o))}).forEach(function(o){var s=Ds(Iz,i).call(i,o);Ds(ob,i).set(Ds(sb,i).call(i,o),s),Ds(NS,i).set(s,o)});var a=new Map(r.map(function(o){return[Ds(sb,i).call(i,o),o]}));return Ds(ob,this).forEach(function(o,s){a.has(s)?Ds(Dz,i).call(i,o,a.get(s)):(Ds(Lz,i).call(i,o,s),Ds(ob,i).delete(s),Ds(NS,i).delete(o))}),this}},{key:"clear",value:function(){return this.digest([]),this}}])}();function IDt(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const wge=Symbol("implicit");function JAe(){var n=new xge,e=[],r=[],i=wge;function a(o){let s=n.get(o);if(s===void 0){if(i!==wge)return i;n.set(o,s=e.push(o)-1)}return r[s%r.length]}return a.domain=function(o){if(!arguments.length)return e.slice();e=[],n=new xge;for(const s of o)n.has(s)||n.set(s,e.push(s)-1);return a},a.range=function(o){return arguments.length?(r=Array.from(o),a):r.slice()},a.unknown=function(o){return arguments.length?(i=o,a):i},a.copy=function(){return JAe(e,r).unknown(i)},IDt.apply(a,arguments),a}function DDt(n){for(var e=n.length/6|0,r=new Array(e),i=0;i<e;)r[i]="#"+n.slice(i*6,++i*6);return r}const LDt=DDt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function zO(n){"@babel/helpers - typeof";return zO=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zO(n)}var kDt=/^\s+/,FDt=/\s+$/;function An(n,e){if(n=n||"",e=e||{},n instanceof An)return n;if(!(this instanceof An))return new An(n,e);var r=$Dt(n);this._originalInput=n,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}An.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),r,i,a,o,s,l;return r=e.r/255,i=e.g/255,a=e.b/255,r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),a<=.03928?l=a/12.92:l=Math.pow((a+.055)/1.055,2.4),.2126*o+.7152*s+.0722*l},setAlpha:function(e){return this._a=eRe(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=Ege(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=Ege(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),a=Math.round(e.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+a+"%)":"hsva("+r+", "+i+"%, "+a+"%, "+this._roundA+")"},toHsl:function(){var e=Sge(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=Sge(this._r,this._g,this._b),r=Math.round(e.h*360),i=Math.round(e.s*100),a=Math.round(e.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+a+"%)":"hsla("+r+", "+i+"%, "+a+"%, "+this._roundA+")"},toHex:function(e){return Cge(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return VDt(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(pa(this._r,255)*100)+"%",g:Math.round(pa(this._g,255)*100)+"%",b:Math.round(pa(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(pa(this._r,255)*100)+"%, "+Math.round(pa(this._g,255)*100)+"%, "+Math.round(pa(this._b,255)*100)+"%)":"rgba("+Math.round(pa(this._r,255)*100)+"%, "+Math.round(pa(this._g,255)*100)+"%, "+Math.round(pa(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:eLt[Cge(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var r="#"+Mge(this._r,this._g,this._b,this._a),i=r,a=this._gradientType?"GradientType = 1, ":"";if(e){var o=An(e);i="#"+Mge(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+a+"startColorstr="+r+",endColorstr="+i+")"},toString:function(e){var r=!!e;e=e||this._format;var i=!1,a=this._a<1&&this._a>=0,o=!r&&a&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return o?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return An(this.toString())},_applyModification:function(e,r){var i=e.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(WDt,arguments)},brighten:function(){return this._applyModification(qDt,arguments)},darken:function(){return this._applyModification(YDt,arguments)},desaturate:function(){return this._applyModification(GDt,arguments)},saturate:function(){return this._applyModification(jDt,arguments)},greyscale:function(){return this._applyModification(HDt,arguments)},spin:function(){return this._applyModification(XDt,arguments)},_applyCombination:function(e,r){return e.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(QDt,arguments)},complement:function(){return this._applyCombination(KDt,arguments)},monochromatic:function(){return this._applyCombination(JDt,arguments)},splitcomplement:function(){return this._applyCombination(ZDt,arguments)},triad:function(){return this._applyCombination(Tge,[3])},tetrad:function(){return this._applyCombination(Tge,[4])}};An.fromRatio=function(n,e){if(zO(n)=="object"){var r={};for(var i in n)n.hasOwnProperty(i)&&(i==="a"?r[i]=n[i]:r[i]=x2(n[i]));n=r}return An(n,e)};function $Dt(n){var e={r:0,g:0,b:0},r=1,i=null,a=null,o=null,s=!1,l=!1;return typeof n=="string"&&(n=iLt(n)),zO(n)=="object"&&($h(n.r)&&$h(n.g)&&$h(n.b)?(e=BDt(n.r,n.g,n.b),s=!0,l=String(n.r).substr(-1)==="%"?"prgb":"rgb"):$h(n.h)&&$h(n.s)&&$h(n.v)?(i=x2(n.s),a=x2(n.v),e=UDt(n.h,i,a),s=!0,l="hsv"):$h(n.h)&&$h(n.s)&&$h(n.l)&&(i=x2(n.s),o=x2(n.l),e=zDt(n.h,i,o),s=!0,l="hsl"),n.hasOwnProperty("a")&&(r=n.a)),r=eRe(r),{ok:s,format:n.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:r}}function BDt(n,e,r){return{r:pa(n,255)*255,g:pa(e,255)*255,b:pa(r,255)*255}}function Sge(n,e,r){n=pa(n,255),e=pa(e,255),r=pa(r,255);var i=Math.max(n,e,r),a=Math.min(n,e,r),o,s,l=(i+a)/2;if(i==a)o=s=0;else{var c=i-a;switch(s=l>.5?c/(2-i-a):c/(i+a),i){case n:o=(e-r)/c+(e<r?6:0);break;case e:o=(r-n)/c+2;break;case r:o=(n-e)/c+4;break}o/=6}return{h:o,s,l}}function zDt(n,e,r){var i,a,o;n=pa(n,360),e=pa(e,100),r=pa(r,100);function s(u,d,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?u+(d-u)*6*f:f<1/2?d:f<2/3?u+(d-u)*(2/3-f)*6:u}if(e===0)i=a=o=r;else{var l=r<.5?r*(1+e):r+e-r*e,c=2*r-l;i=s(c,l,n+1/3),a=s(c,l,n),o=s(c,l,n-1/3)}return{r:i*255,g:a*255,b:o*255}}function Ege(n,e,r){n=pa(n,255),e=pa(e,255),r=pa(r,255);var i=Math.max(n,e,r),a=Math.min(n,e,r),o,s,l=i,c=i-a;if(s=i===0?0:c/i,i==a)o=0;else{switch(i){case n:o=(e-r)/c+(e<r?6:0);break;case e:o=(r-n)/c+2;break;case r:o=(n-e)/c+4;break}o/=6}return{h:o,s,v:l}}function UDt(n,e,r){n=pa(n,360)*6,e=pa(e,100),r=pa(r,100);var i=Math.floor(n),a=n-i,o=r*(1-e),s=r*(1-a*e),l=r*(1-(1-a)*e),c=i%6,u=[r,s,o,o,l,r][c],d=[l,r,r,s,o,o][c],f=[o,o,l,r,r,s][c];return{r:u*255,g:d*255,b:f*255}}function Cge(n,e,r,i){var a=[zd(Math.round(n).toString(16)),zd(Math.round(e).toString(16)),zd(Math.round(r).toString(16))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function VDt(n,e,r,i,a){var o=[zd(Math.round(n).toString(16)),zd(Math.round(e).toString(16)),zd(Math.round(r).toString(16)),zd(tRe(i))];return a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function Mge(n,e,r,i){var a=[zd(tRe(i)),zd(Math.round(n).toString(16)),zd(Math.round(e).toString(16)),zd(Math.round(r).toString(16))];return a.join("")}An.equals=function(n,e){return!n||!e?!1:An(n).toRgbString()==An(e).toRgbString()};An.random=function(){return An.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function GDt(n,e){e=e===0?0:e||10;var r=An(n).toHsl();return r.s-=e/100,r.s=zL(r.s),An(r)}function jDt(n,e){e=e===0?0:e||10;var r=An(n).toHsl();return r.s+=e/100,r.s=zL(r.s),An(r)}function HDt(n){return An(n).desaturate(100)}function WDt(n,e){e=e===0?0:e||10;var r=An(n).toHsl();return r.l+=e/100,r.l=zL(r.l),An(r)}function qDt(n,e){e=e===0?0:e||10;var r=An(n).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(e/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(e/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(e/100)))),An(r)}function YDt(n,e){e=e===0?0:e||10;var r=An(n).toHsl();return r.l-=e/100,r.l=zL(r.l),An(r)}function XDt(n,e){var r=An(n).toHsl(),i=(r.h+e)%360;return r.h=i<0?360+i:i,An(r)}function KDt(n){var e=An(n).toHsl();return e.h=(e.h+180)%360,An(e)}function Tge(n,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var r=An(n).toHsl(),i=[An(n)],a=360/e,o=1;o<e;o++)i.push(An({h:(r.h+o*a)%360,s:r.s,l:r.l}));return i}function ZDt(n){var e=An(n).toHsl(),r=e.h;return[An(n),An({h:(r+72)%360,s:e.s,l:e.l}),An({h:(r+216)%360,s:e.s,l:e.l})]}function QDt(n,e,r){e=e||6,r=r||30;var i=An(n).toHsl(),a=360/r,o=[An(n)];for(i.h=(i.h-(a*e>>1)+720)%360;--e;)i.h=(i.h+a)%360,o.push(An(i));return o}function JDt(n,e){e=e||6;for(var r=An(n).toHsv(),i=r.h,a=r.s,o=r.v,s=[],l=1/e;e--;)s.push(An({h:i,s:a,v:o})),o=(o+l)%1;return s}An.mix=function(n,e,r){r=r===0?0:r||50;var i=An(n).toRgb(),a=An(e).toRgb(),o=r/100,s={r:(a.r-i.r)*o+i.r,g:(a.g-i.g)*o+i.g,b:(a.b-i.b)*o+i.b,a:(a.a-i.a)*o+i.a};return An(s)};An.readability=function(n,e){var r=An(n),i=An(e);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};An.isReadable=function(n,e,r){var i=An.readability(n,e),a,o;switch(o=!1,a=aLt(r),a.level+a.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7;break}return o};An.mostReadable=function(n,e,r){var i=null,a=0,o,s,l,c;r=r||{},s=r.includeFallbackColors,l=r.level,c=r.size;for(var u=0;u<e.length;u++)o=An.readability(n,e[u]),o>a&&(a=o,i=An(e[u]));return An.isReadable(n,i,{level:l,size:c})||!s?i:(r.includeFallbackColors=!1,An.mostReadable(n,["#fff","#000"],r))};var FH=An.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},eLt=An.hexNames=tLt(FH);function tLt(n){var e={};for(var r in n)n.hasOwnProperty(r)&&(e[n[r]]=r);return e}function eRe(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function pa(n,e){nLt(n)&&(n="100%");var r=rLt(n);return n=Math.min(e,Math.max(0,parseFloat(n))),r&&(n=parseInt(n*e,10)/100),Math.abs(n-e)<1e-6?1:n%e/parseFloat(e)}function zL(n){return Math.min(1,Math.max(0,n))}function wc(n){return parseInt(n,16)}function nLt(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1}function rLt(n){return typeof n=="string"&&n.indexOf("%")!=-1}function zd(n){return n.length==1?"0"+n:""+n}function x2(n){return n<=1&&(n=n*100+"%"),n}function tRe(n){return Math.round(parseFloat(n)*255).toString(16)}function Age(n){return wc(n)/255}var md=function(){var n="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",r="(?:"+e+")|(?:"+n+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",a="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+a),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function $h(n){return!!md.CSS_UNIT.exec(n)}function iLt(n){n=n.replace(kDt,"").replace(FDt,"").toLowerCase();var e=!1;if(FH[n])n=FH[n],e=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=md.rgb.exec(n))?{r:r[1],g:r[2],b:r[3]}:(r=md.rgba.exec(n))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=md.hsl.exec(n))?{h:r[1],s:r[2],l:r[3]}:(r=md.hsla.exec(n))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=md.hsv.exec(n))?{h:r[1],s:r[2],v:r[3]}:(r=md.hsva.exec(n))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=md.hex8.exec(n))?{r:wc(r[1]),g:wc(r[2]),b:wc(r[3]),a:Age(r[4]),format:e?"name":"hex8"}:(r=md.hex6.exec(n))?{r:wc(r[1]),g:wc(r[2]),b:wc(r[3]),format:e?"name":"hex"}:(r=md.hex4.exec(n))?{r:wc(r[1]+""+r[1]),g:wc(r[2]+""+r[2]),b:wc(r[3]+""+r[3]),a:Age(r[4]+""+r[4]),format:e?"name":"hex8"}:(r=md.hex3.exec(n))?{r:wc(r[1]+""+r[1]),g:wc(r[2]+""+r[2]),b:wc(r[3]+""+r[3]),format:e?"name":"hex"}:!1}function aLt(n){var e,r;return n=n||{level:"AA",size:"small"},e=(n.level||"AA").toUpperCase(),r=(n.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:e,size:r}}function $H(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function oLt(n){if(Array.isArray(n))return n}function sLt(n){if(Array.isArray(n))return $H(n)}function nRe(n,e,r){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}function lLt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function rRe(n,e,r){return e=m_(e),mLt(n,EZ()?Reflect.construct(e,r||[],m_(n).constructor):e.apply(n,r))}function cLt(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function iRe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function kz(n,e){return n.get(nRe(n,e))}function Rge(n,e,r){cLt(n,e),e.set(n,r)}function Pge(n,e,r){return n.set(nRe(n,e),r),r}function aRe(n,e,r){if(EZ())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var a=new(n.bind.apply(n,i));return a}function uLt(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,lRe(i.key),i)}}function oRe(n,e,r){return e&&uLt(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function UL(n,e,r){return(e=lRe(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function BH(){return BH=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(n,e,r){var i=vLt(n,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?n:r):a.value}},BH.apply(null,arguments)}function m_(n){return m_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m_(n)}function sRe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&zH(n,e)}function EZ(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EZ=function(){return!!n})()}function dLt(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function fLt(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,o,s,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function hLt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pLt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nge(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),r.push.apply(r,i)}return r}function gLt(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Nge(Object(r),!0).forEach(function(i){UL(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Nge(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function mLt(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lLt(n)}function zH(n,e){return zH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},zH(n,e)}function tE(n,e){return oLt(n)||fLt(n,e)||cRe(n,e)||hLt()}function vLt(n,e){for(;!{}.hasOwnProperty.call(n,e)&&(n=m_(n))!==null;);return n}function Fz(n,e,r,i){var a=BH(m_(n.prototype),e,r);return typeof a=="function"?function(o){return a.apply(r,o)}:a}function Md(n){return sLt(n)||dLt(n)||cRe(n)||pLt()}function yLt(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function lRe(n){var e=yLt(n,"string");return typeof e=="symbol"?e:e+""}function UH(n){"@babel/helpers - typeof";return UH=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UH(n)}function cRe(n,e){if(n){if(typeof n=="string")return $H(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$H(n,e):void 0}}var uRe=function(e){e instanceof Array?e.forEach(uRe):(e.map&&e.map.dispose(),e.dispose())},dRe=function(e){e.geometry&&e.geometry.dispose(),e.material&&uRe(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(dRe)},VH=function(e){for(;e.children.length;){var r=e.children[0];e.remove(r),dRe(r)}},$z=new WeakMap,pR=new WeakMap,OS=function(n){function e(r){var i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.dataBindAttr,s=o===void 0?"__data":o,l=a.objBindAttr,c=l===void 0?"__threeObj":l;return iRe(this,e),i=rRe(this,e),UL(i,"scene",void 0),Rge(i,$z,void 0),Rge(i,pR,void 0),i.scene=r,Pge($z,i,s),Pge(pR,i,c),i.onRemoveObj(function(){}),i}return sRe(e,n),oRe(e,[{key:"onCreateObj",value:function(i){var a=this;return Fz(e,"onCreateObj",this)([function(o){var s=i(o);return o[kz(pR,a)]=s,s[kz($z,a)]=o,a.scene.add(s),s}]),this}},{key:"onRemoveObj",value:function(i){var a=this;return Fz(e,"onRemoveObj",this)([function(o,s){var l=Fz(e,"getData",a)([o]);i(o,s),a.scene.remove(o),VH(o),delete l[kz(pR,a)]}]),this}}])}(ODt),IS=function(e){return isNaN(e)?parseInt(An(e).toHex(),16):e},Bz=function(e){return isNaN(e)?An(e).getAlpha():1},bLt=JAe(LDt);function Oge(n,e,r){!e||typeof r!="string"||n.filter(function(i){return!i[r]}).forEach(function(i){i[r]=bLt(e(i))})}function xLt(n,e){var r=n.nodes,i=n.links,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=a.nodeFilter,s=o===void 0?function(){return!0}:o,l=a.onLoopError,c=l===void 0?function(p){throw"Invalid DAG structure! Found cycle in node path: ".concat(p.join(" -> "),".")}:l,u={};r.forEach(function(p){return u[e(p)]={data:p,out:[],depth:-1,skip:!s(p)}}),i.forEach(function(p){var g=p.source,m=p.target,v=_(g),y=_(m);if(!u.hasOwnProperty(v))throw"Missing source node with id: ".concat(v);if(!u.hasOwnProperty(y))throw"Missing target node with id: ".concat(y);var b=u[v],x=u[y];b.out.push(x);function _(S){return UH(S)==="object"?e(S):S}});var d=[];h(Object.values(u));var f=Object.assign.apply(Object,[{}].concat(Md(Object.entries(u).filter(function(p){var g=tE(p,2),m=g[1];return!m.skip}).map(function(p){var g=tE(p,2),m=g[0],v=g[1];return UL({},m,v.depth)}))));return f;function h(p){for(var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,v=function(){var _=p[y];if(g.indexOf(_)!==-1){var S=[].concat(Md(g.slice(g.indexOf(_))),[_]).map(function(M){return e(M.data)});return d.some(function(M){return M.length===S.length&&M.every(function(E,T){return E===S[T]})})||(d.push(S),c(S)),1}m>_.depth&&(_.depth=m,h(_.out,[].concat(Md(g),[_]),m+(_.skip?0:1)))},y=0,b=p.length;y<b;y++)v()}}var jn=window.THREE?window.THREE:{Group:jb,Mesh:ko,MeshLambertMaterial:vAe,Color:Tn,BufferGeometry:Qs,BufferAttribute:bs,Matrix4:jr,Vector3:ge,SphereGeometry:fw,CylinderGeometry:LL,TubeGeometry:hZ,ConeGeometry:fZ,Line:vAt,LineBasicMaterial:DL,QuadraticBezierCurve3:dZ,CubicBezierCurve3:gAe,Box3:Xy},Ige={graph:QIt,forcelayout:O4t},_Lt=2,zz=new jn.BufferGeometry().setAttribute?"setAttribute":"addAttribute",gR=new jn.BufferGeometry().applyMatrix4?"applyMatrix4":"applyMatrix",wLt=BL({props:{jsonUrl:{onChange:function(e,r){var i=this;e&&!r.fetchingJson&&(r.fetchingJson=!0,r.onLoading(),fetch(e).then(function(a){return a.json()}).then(function(a){r.fetchingJson=!1,r.onFinishLoading(a),i.graphData(a)}))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,r){r.engineRunning=!1}},numDimensions:{default:3,onChange:function(e,r){var i=r.d3ForceLayout.force("charge");i&&i.strength(e>2?-60:-30),e<3&&a(r.graphData.nodes,"z"),e<2&&a(r.graphData.nodes,"y");function a(o,s){o.forEach(function(l){delete l[s],delete l["v".concat(s)]})}}},dagMode:{onChange:function(e,r){!e&&r.forceEngine==="d3"&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=i.fz=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,r){r.d3ForceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,r){r.d3ForceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,r){r.d3ForceLayout.velocityDecay(e)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(e){return e._flushObjects=!0,e._rerender(),this},d3Force:function(e,r,i){return i===void 0?e.d3ForceLayout.force(r):(e.d3ForceLayout.force(r,i),this)},d3ReheatSimulation:function(e){return e.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var r=e.forceEngine!=="ngraph";return e.engineRunning&&i(),a(),o(),this;function i(){++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||r&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.layout[r?"tick":"step"](),e.onEngineTick());var s=ti(e.nodeThreeObjectExtend);e.nodeDataMapper.entries().forEach(function(h){var p=tE(h,2),g=p[0],m=p[1];if(m){var v=r?g:e.layout.getNodePosition(g[e.nodeId]),y=s(g);(!e.nodePositionUpdate||!e.nodePositionUpdate(y?m.children[0]:m,{x:v.x,y:v.y,z:v.z},g)||y)&&(m.position.x=v.x,m.position.y=v.y||0,m.position.z=v.z||0)}});var l=ti(e.linkWidth),c=ti(e.linkCurvature),u=ti(e.linkCurveRotation),d=ti(e.linkThreeObjectExtend);e.linkDataMapper.entries().forEach(function(h){var p=tE(h,2),g=p[0],m=p[1];if(m){var v=r?g:e.layout.getLinkPosition(e.layout.graph.getLink(g.source,g.target).id),y=v[r?"source":"from"],b=v[r?"target":"to"];if(!(!y||!b||!y.hasOwnProperty("x")||!b.hasOwnProperty("x"))){f(g);var x=d(g);if(!(e.linkPositionUpdate&&e.linkPositionUpdate(x?m.children[1]:m,{start:{x:y.x,y:y.y,z:y.z},end:{x:b.x,y:b.y,z:b.z}},g)&&!x)){var _=30,S=g.__curve,M=m.children.length?m.children[0]:m;if(M.type==="Line"){if(S){var T=S.getPoints(_);M.geometry.getAttribute("position").array.length!==T.length*3&&M.geometry[zz]("position",new jn.BufferAttribute(new Float32Array(T.length*3),3)),M.geometry.setFromPoints(T)}else{var E=M.geometry.getAttribute("position");(!E||!E.array||E.array.length!==6)&&M.geometry[zz]("position",E=new jn.BufferAttribute(new Float32Array(2*3),3)),E.array[0]=y.x,E.array[1]=y.y||0,E.array[2]=y.z||0,E.array[3]=b.x,E.array[4]=b.y||0,E.array[5]=b.z||0,E.needsUpdate=!0}M.geometry.computeBoundingSphere()}else if(M.type==="Mesh")if(S){M.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(M.position.set(0,0,0),M.rotation.set(0,0,0),M.scale.set(1,1,1));var k=Math.ceil(l(g)*10)/10,$=k/2,B=new jn.TubeGeometry(S,_,$,e.linkResolution,!1);M.geometry.dispose(),M.geometry=B}else{if(!M.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var P=Math.ceil(l(g)*10)/10,A=P/2,N=new jn.CylinderGeometry(A,A,1,e.linkResolution,1,!1);N[gR](new jn.Matrix4().makeTranslation(0,1/2,0)),N[gR](new jn.Matrix4().makeRotationX(Math.PI/2)),M.geometry.dispose(),M.geometry=N}var O=new jn.Vector3(y.x,y.y||0,y.z||0),I=new jn.Vector3(b.x,b.y||0,b.z||0),D=O.distanceTo(I);M.position.x=O.x,M.position.y=O.y,M.position.z=O.z,M.scale.z=D,M.parent.localToWorld(I),M.lookAt(I)}}}}});function f(h){var p=r?h:e.layout.getLinkPosition(e.layout.graph.getLink(h.source,h.target).id),g=p[r?"source":"from"],m=p[r?"target":"to"];if(!(!g||!m||!g.hasOwnProperty("x")||!m.hasOwnProperty("x"))){var v=c(h);if(!v)h.__curve=null;else{var y=new jn.Vector3(g.x,g.y||0,g.z||0),b=new jn.Vector3(m.x,m.y||0,m.z||0),x=y.distanceTo(b),_,S=u(h);if(x>0){var M=m.x-g.x,E=m.y-g.y||0,T=new jn.Vector3().subVectors(b,y),P=T.clone().multiplyScalar(v).cross(M!==0||E!==0?new jn.Vector3(0,0,1):new jn.Vector3(0,1,0)).applyAxisAngle(T.normalize(),S).add(new jn.Vector3().addVectors(y,b).divideScalar(2));_=new jn.QuadraticBezierCurve3(y,P,b)}else{var A=v*70,N=-S,O=N+Math.PI/2;_=new jn.CubicBezierCurve3(y,new jn.Vector3(A*Math.cos(O),A*Math.sin(O),0).add(y),new jn.Vector3(A*Math.cos(N),A*Math.sin(N),0).add(y),b)}h.__curve=_}}}}function a(){var s=ti(e.linkDirectionalArrowRelPos),l=ti(e.linkDirectionalArrowLength),c=ti(e.nodeVal);e.arrowDataMapper.entries().forEach(function(u){var d=tE(u,2),f=d[0],h=d[1];if(h){var p=r?f:e.layout.getLinkPosition(e.layout.graph.getLink(f.source,f.target).id),g=p[r?"source":"from"],m=p[r?"target":"to"];if(!(!g||!m||!g.hasOwnProperty("x")||!m.hasOwnProperty("x"))){var v=Math.cbrt(Math.max(0,c(g)||1))*e.nodeRelSize,y=Math.cbrt(Math.max(0,c(m)||1))*e.nodeRelSize,b=l(f),x=s(f),_=f.__curve?function(A){return f.__curve.getPoint(A)}:function(A){var N=function(I,D,k,$){return D[I]+(k[I]-D[I])*$||0};return{x:N("x",g,m,A),y:N("y",g,m,A),z:N("z",g,m,A)}},S=f.__curve?f.__curve.getLength():Math.sqrt(["x","y","z"].map(function(A){return Math.pow((m[A]||0)-(g[A]||0),2)}).reduce(function(A,N){return A+N},0)),M=v+b+(S-v-y-b)*x,E=_(M/S),T=_((M-b)/S);["x","y","z"].forEach(function(A){return h.position[A]=T[A]});var P=aRe(jn.Vector3,Md(["x","y","z"].map(function(A){return E[A]})));h.parent.localToWorld(P),h.lookAt(P)}}})}function o(){var s=ti(e.linkDirectionalParticleSpeed);e.graphData.links.forEach(function(l){var c=e.particlesDataMapper.getObj(l),u=c&&c.children,d=l.__singleHopPhotonsObj&&l.__singleHopPhotonsObj.children;if(!((!d||!d.length)&&(!u||!u.length))){var f=r?l:e.layout.getLinkPosition(e.layout.graph.getLink(l.source,l.target).id),h=f[r?"source":"from"],p=f[r?"target":"to"];if(!(!h||!p||!h.hasOwnProperty("x")||!p.hasOwnProperty("x"))){var g=s(l),m=l.__curve?function(y){return l.__curve.getPoint(y)}:function(y){var b=function(_,S,M,E){return S[_]+(M[_]-S[_])*E||0};return{x:b("x",h,p,y),y:b("y",h,p,y),z:b("z",h,p,y)}},v=[].concat(Md(u||[]),Md(d||[]));v.forEach(function(y,b){var x=y.parent.__linkThreeObjType==="singleHopPhotons";if(y.hasOwnProperty("__progressRatio")||(y.__progressRatio=x?0:b/u.length),y.__progressRatio+=g,y.__progressRatio>=1)if(!x)y.__progressRatio=y.__progressRatio%1;else{y.parent.remove(y),VH(y);return}var _=y.__progressRatio,S=m(_);["x","y","z"].forEach(function(M){return y.position[M]=S[M]})})}}})}},emitParticle:function(e,r){if(r&&e.graphData.links.includes(r)){if(!r.__singleHopPhotonsObj){var i=new jn.Group;i.__linkThreeObjType="singleHopPhotons",r.__singleHopPhotonsObj=i,e.graphScene.add(i)}var a=ti(e.linkDirectionalParticleWidth),o=Math.ceil(a(r)*10)/10/2,s=e.linkDirectionalParticleResolution,l=new jn.SphereGeometry(o,s,s),c=ti(e.linkColor),u=ti(e.linkDirectionalParticleColor),d=u(r)||c(r)||"#f0f0f0",f=new jn.Color(IS(d)),h=e.linkOpacity*3,p=new jn.MeshLambertMaterial({color:f,transparent:!0,opacity:h});r.__singleHopPhotonsObj.add(new jn.Mesh(l,p))}return this},getGraphBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0};if(!e.initialised)return null;var i=function a(o){var s=[];if(o.geometry){o.geometry.computeBoundingBox();var l=new jn.Box3;l.copy(o.geometry.boundingBox).applyMatrix4(o.matrixWorld),s.push(l)}return s.concat.apply(s,Md((o.children||[]).filter(function(c){return!c.hasOwnProperty("__graphObjType")||c.__graphObjType==="node"&&r(c.__data)}).map(a)))}(e.graphScene);return i.length?Object.assign.apply(Object,Md(["x","y","z"].map(function(a){return UL({},a,[vDt(i,function(o){return o.min[a]}),mDt(i,function(o){return o.max[a]})])}))):null}},stateInit:function(){return{d3ForceLayout:F0t().force("link",R0t()).force("charge",$0t()).force("center",h0t()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,r){r.graphScene=e,r.nodeDataMapper=new OS(e,{objBindAttr:"__threeObj"}),r.linkDataMapper=new OS(e,{objBindAttr:"__lineObj"}),r.arrowDataMapper=new OS(e,{objBindAttr:"__arrowObj"}),r.particlesDataMapper=new OS(e,{objBindAttr:"__photonsObj"})},update:function(e,r){var i=function(W){return W.some(function(K){return r.hasOwnProperty(K)})};if(e.engineRunning=!1,typeof e.onUpdate=="function"&&e.onUpdate(),e.nodeAutoColorBy!==null&&i(["nodeAutoColorBy","graphData","nodeColor"])&&Oge(e.graphData.nodes,ti(e.nodeAutoColorBy),e.nodeColor),e.linkAutoColorBy!==null&&i(["linkAutoColorBy","graphData","linkColor"])&&Oge(e.graphData.links,ti(e.linkAutoColorBy),e.linkColor),e._flushObjects||i(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var a=ti(e.nodeThreeObject),o=ti(e.nodeThreeObjectExtend),s=ti(e.nodeVal),l=ti(e.nodeColor),c=ti(e.nodeVisibility),u={},d={};(e._flushObjects||i(["nodeThreeObject","nodeThreeObjectExtend"]))&&e.nodeDataMapper.clear(),e.nodeDataMapper.onCreateObj(function(V){var W=a(V),K=o(V);W&&e.nodeThreeObject===W&&(W=W.clone());var q;return W&&!K?q=W:(q=new jn.Mesh,q.__graphDefaultObj=!0,W&&K&&q.add(W)),q.__graphObjType="node",q}).onUpdateObj(function(V,W){if(V.__graphDefaultObj){var K=s(W)||1,q=Math.cbrt(K)*e.nodeRelSize,Q=e.nodeResolution;(!V.geometry.type.match(/^Sphere(Buffer)?Geometry$/)||V.geometry.parameters.radius!==q||V.geometry.parameters.widthSegments!==Q)&&(u.hasOwnProperty(K)||(u[K]=new jn.SphereGeometry(q,Q,Q)),V.geometry.dispose(),V.geometry=u[K]);var ie=l(W),oe=new jn.Color(IS(ie||"#ffffaa")),ue=e.nodeOpacity*Bz(ie);(V.material.type!=="MeshLambertMaterial"||!V.material.color.equals(oe)||V.material.opacity!==ue)&&(d.hasOwnProperty(ie)||(d[ie]=new jn.MeshLambertMaterial({color:oe,transparent:!0,opacity:ue})),V.material.dispose(),V.material=d[ie])}}).digest(e.graphData.nodes.filter(c))}if(e._flushObjects||i(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var f=ti(e.linkThreeObject),h=ti(e.linkThreeObjectExtend),p=ti(e.linkMaterial),g=ti(e.linkVisibility),m=ti(e.linkColor),v=ti(e.linkWidth),y={},b={},x={},_=e.graphData.links.filter(g);if((e._flushObjects||i(["linkThreeObject","linkThreeObjectExtend","linkWidth"]))&&e.linkDataMapper.clear(),e.linkDataMapper.onRemoveObj(function(V){var W=V.__data&&V.__data.__singleHopPhotonsObj;W&&(W.parent.remove(W),VH(W),delete V.__data.__singleHopPhotonsObj)}).onCreateObj(function(V){var W=f(V),K=h(V);W&&e.linkThreeObject===W&&(W=W.clone());var q;if(!W||K){var Q=!!v(V);if(Q)q=new jn.Mesh;else{var ie=new jn.BufferGeometry;ie[zz]("position",new jn.BufferAttribute(new Float32Array(2*3),3)),q=new jn.Line(ie)}}var oe;return W?K?(oe=new jn.Group,oe.__graphDefaultObj=!0,oe.add(q),oe.add(W)):oe=W:(oe=q,oe.__graphDefaultObj=!0),oe.renderOrder=10,oe.__graphObjType="link",oe}).onUpdateObj(function(V,W){if(V.__graphDefaultObj){var K=V.children.length?V.children[0]:V,q=Math.ceil(v(W)*10)/10,Q=!!q;if(Q){var ie=q/2,oe=e.linkResolution;if(!K.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||K.geometry.parameters.radiusTop!==ie||K.geometry.parameters.radialSegments!==oe){if(!y.hasOwnProperty(q)){var ue=new jn.CylinderGeometry(ie,ie,1,oe,1,!1);ue[gR](new jn.Matrix4().makeTranslation(0,1/2,0)),ue[gR](new jn.Matrix4().makeRotationX(Math.PI/2)),y[q]=ue}K.geometry.dispose(),K.geometry=y[q]}}var le=p(W);if(le)K.material=le;else{var me=m(W),J=new jn.Color(IS(me||"#f0f0f0")),pe=e.linkOpacity*Bz(me),ve=Q?"MeshLambertMaterial":"LineBasicMaterial";if(K.material.type!==ve||!K.material.color.equals(J)||K.material.opacity!==pe){var Me=Q?b:x;Me.hasOwnProperty(me)||(Me[me]=new jn[ve]({color:J,transparent:pe<1,opacity:pe,depthWrite:pe>=1})),K.material.dispose(),K.material=Me[me]}}}}).digest(_),e.linkDirectionalArrowLength||r.hasOwnProperty("linkDirectionalArrowLength")){var S=ti(e.linkDirectionalArrowLength),M=ti(e.linkDirectionalArrowColor);e.arrowDataMapper.onCreateObj(function(){var V=new jn.Mesh(void 0,new jn.MeshLambertMaterial({transparent:!0}));return V.__linkThreeObjType="arrow",V}).onUpdateObj(function(V,W){var K=S(W),q=e.linkDirectionalArrowResolution;if(!V.geometry.type.match(/^Cone(Buffer)?Geometry$/)||V.geometry.parameters.height!==K||V.geometry.parameters.radialSegments!==q){var Q=new jn.ConeGeometry(K*.25,K,q);Q.translate(0,K/2,0),Q.rotateX(Math.PI/2),V.geometry.dispose(),V.geometry=Q}var ie=M(W)||m(W)||"#f0f0f0";V.material.color=new jn.Color(IS(ie)),V.material.opacity=e.linkOpacity*3*Bz(ie)}).digest(_.filter(S))}if(e.linkDirectionalParticles||r.hasOwnProperty("linkDirectionalParticles")){var E=ti(e.linkDirectionalParticles),T=ti(e.linkDirectionalParticleWidth),P=ti(e.linkDirectionalParticleColor),A={},N={};e.particlesDataMapper.onCreateObj(function(){var V=new jn.Group;return V.__linkThreeObjType="photons",V.__photonDataMapper=new OS(V),V}).onUpdateObj(function(V,W){var K=Math.round(Math.abs(E(W))),q=!!V.children.length&&V.children[0],Q=Math.ceil(T(W)*10)/10/2,ie=e.linkDirectionalParticleResolution,oe;q&&q.geometry.parameters.radius===Q&&q.geometry.parameters.widthSegments===ie?oe=q.geometry:(N.hasOwnProperty(Q)||(N[Q]=new jn.SphereGeometry(Q,ie,ie)),oe=N[Q],q&&q.geometry.dispose());var ue=P(W)||m(W)||"#f0f0f0",le=new jn.Color(IS(ue)),me=e.linkOpacity*3,J;q&&q.material.color.equals(le)&&q.material.opacity===me?J=q.material:(A.hasOwnProperty(ue)||(A[ue]=new jn.MeshLambertMaterial({color:le,transparent:!0,opacity:me})),J=A[ue],q&&q.material.dispose()),V.__photonDataMapper.id(function(pe){return pe.idx}).onCreateObj(function(){return new jn.Mesh(oe,J)}).onUpdateObj(function(pe){pe.geometry=oe,pe.material=J}).digest(Md(new Array(K)).map(function(pe,ve){return{idx:ve}}))}).digest(_.filter(E))}}if(e._flushObjects=!1,i(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){e.engineRunning=!1,e.graphData.links.forEach(function(V){V.source=V[e.linkSource],V.target=V[e.linkTarget]});var O=e.forceEngine!=="ngraph",I;if(O){(I=e.d3ForceLayout).stop().alpha(1).numDimensions(e.numDimensions).nodes(e.graphData.nodes);var D=e.d3ForceLayout.force("link");D&&D.id(function(V){return V[e.nodeId]}).links(e.graphData.links);var k=e.dagMode&&xLt(e.graphData,function(V){return V[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),$=Math.max.apply(Math,Md(Object.values(k||[]))),B=e.dagLevelDistance||e.graphData.nodes.length/($||1)*_Lt*(["radialin","radialout"].indexOf(e.dagMode)!==-1?.7:1);if(["lr","rl","td","bu","zin","zout"].includes(r.dagMode)){var F=["lr","rl"].includes(r.dagMode)?"fx":["td","bu"].includes(r.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(V){return delete V[F]})}if(["lr","rl","td","bu","zin","zout"].includes(e.dagMode)){var G=["rl","td","zout"].includes(e.dagMode),z=function(W){return(k[W[e.nodeId]]-$/2)*B*(G?-1:1)},U=["lr","rl"].includes(e.dagMode)?"fx":["td","bu"].includes(e.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(V){return V[U]=z(V)})}e.d3ForceLayout.force("dagRadial",["radialin","radialout"].indexOf(e.dagMode)!==-1?B0t(function(V){var W=k[V[e.nodeId]]||-1;return(e.dagMode==="radialin"?$-W:W)*B}).strength(function(V){return e.dagNodeFilter(V)?1:0}):null)}else{var H=Ige.graph();e.graphData.nodes.forEach(function(V){H.addNode(V[e.nodeId])}),e.graphData.links.forEach(function(V){H.addLink(V.source,V.target)}),I=Ige.forcelayout(H,gLt({dimensions:e.numDimensions},e.ngraphPhysics)),I.graph=H}for(var X=0;X<e.warmupTicks&&!(O&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin);X++)I[O?"tick":"step"]();e.layout=I,this.resetCountdown()}e.engineRunning=!0,e.onFinishUpdate()}});function SLt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=function(a){function o(){var s;iRe(this,o);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return s=rRe(this,o,[].concat(c)),s.__kapsuleInstance=aRe(n,[].concat(Md(r?[s]:[]),c)),s}return sRe(o,a),oRe(o)}(e);return Object.keys(n()).forEach(function(a){return i.prototype[a]=function(){var o,s=(o=this.__kapsuleInstance)[a].apply(o,arguments);return s===this.__kapsuleInstance?this:s}}),i}var ELt=window.THREE?window.THREE:{Group:jb},fRe=SLt(wLt,ELt.Group,!0);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const CLt=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveMap","envMap","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"];class MLt{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=e.object.isSkinnedMesh===!0,this.refreshUniforms=CLt,this.renderId=0}firstInitialization(e){return this.renderObjects.has(e)===!1?(this.getRenderObjectData(e),!0):!1}getRenderObjectData(e){let r=this.renderObjects.get(e);if(r===void 0){const{geometry:i,material:a,object:o}=e;if(r={material:this.getMaterialData(a),geometry:{attributes:this.getAttributesData(i.attributes),indexVersion:i.index?i.index.version:null,drawRange:{start:i.drawRange.start,count:i.drawRange.count}},worldMatrix:o.matrixWorld.clone()},o.center&&(r.center=o.center.clone()),o.morphTargetInfluences&&(r.morphTargetInfluences=o.morphTargetInfluences.slice()),e.bundle!==null&&(r.version=e.bundle.version),r.material.transmission>0){const{width:s,height:l}=e.context;r.bufferWidth=s,r.bufferHeight=l}this.renderObjects.set(e,r)}return r}getAttributesData(e){const r={};for(const i in e){const a=e[i];r[i]={version:a.version}}return r}containsNode(e){const r=e.material;for(const i in r)if(r[i]&&r[i].isNode)return!0;return e.renderer.nodes.modelViewMatrix!==null||e.renderer.nodes.modelNormalViewMatrix!==null}getMaterialData(e){const r={};for(const i of this.refreshUniforms){const a=e[i];a!=null&&(typeof a=="object"&&a.clone!==void 0?a.isTexture===!0?r[i]={id:a.id,version:a.version}:r[i]=a.clone():r[i]=a)}return r}equals(e){const{object:r,material:i,geometry:a}=e,o=this.getRenderObjectData(e);if(o.worldMatrix.equals(r.matrixWorld)!==!0)return o.worldMatrix.copy(r.matrixWorld),!1;const s=o.material;for(const m in s){const v=s[m],y=i[m];if(v.equals!==void 0){if(v.equals(y)===!1)return v.copy(y),!1}else if(y.isTexture===!0){if(v.id!==y.id||v.version!==y.version)return v.id=y.id,v.version=y.version,!1}else if(v!==y)return s[m]=y,!1}if(s.transmission>0){const{width:m,height:v}=e.context;if(o.bufferWidth!==m||o.bufferHeight!==v)return o.bufferWidth=m,o.bufferHeight=v,!1}const l=o.geometry,c=a.attributes,u=l.attributes,d=Object.keys(u),f=Object.keys(c);if(d.length!==f.length)return o.geometry.attributes=this.getAttributesData(c),!1;for(const m of d){const v=u[m],y=c[m];if(y===void 0)return delete u[m],!1;if(v.version!==y.version)return v.version=y.version,!1}const h=a.index,p=l.indexVersion,g=h?h.version:null;if(p!==g)return l.indexVersion=g,!1;if(l.drawRange.start!==a.drawRange.start||l.drawRange.count!==a.drawRange.count)return l.drawRange.start=a.drawRange.start,l.drawRange.count=a.drawRange.count,!1;if(o.morphTargetInfluences){let m=!1;for(let v=0;v<o.morphTargetInfluences.length;v++)o.morphTargetInfluences[v]!==r.morphTargetInfluences[v]&&(m=!0);if(m)return!0}return o.center&&o.center.equals(r.center)===!1?(o.center.copy(r.center),!0):(e.bundle!==null&&(o.version=e.bundle.version),!0)}needsRefresh(e,r){if(this.hasNode||this.hasAnimation||this.firstInitialization(e))return!0;const{renderId:i}=r;if(this.renderId!==i)return this.renderId=i,!0;const a=e.object.static===!0,o=e.bundle!==null&&e.bundle.static===!0&&this.getRenderObjectData(e).version===e.bundle.version;return a||o?!1:this.equals(e)!==!0}}function NC(n,e=0){let r=3735928559^e,i=1103547991^e;if(n instanceof Array)for(let a=0,o;a<n.length;a++)o=n[a],r=Math.imul(r^o,2654435761),i=Math.imul(i^o,1597334677);else for(let a=0,o;a<n.length;a++)o=n.charCodeAt(a),r=Math.imul(r^o,2654435761),i=Math.imul(i^o,1597334677);return r=Math.imul(r^r>>>16,2246822507),r^=Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507),i^=Math.imul(r^r>>>13,3266489909),4294967296*(2097151&i)+(r>>>0)}const TLt=n=>NC(n),hRe=n=>NC(n),pRe=(...n)=>NC(n);function gRe(n,e=!1){const r=[];n.isNode===!0&&(r.push(n.id),n=n.getSelf());for(const{property:i,childNode:a}of UO(n))r.push(r,NC(i.slice(0,-4)),a.getCacheKey(e));return NC(r)}function*UO(n,e=!1){for(const r in n){if(r.startsWith("_")===!0)continue;const i=n[r];if(Array.isArray(i)===!0)for(let a=0;a<i.length;a++){const o=i[a];o&&(o.isNode===!0||e&&typeof o.toJSON=="function")&&(yield{property:r,index:a,childNode:o})}else if(i&&i.isNode===!0)yield{property:r,childNode:i};else if(typeof i=="object")for(const a in i){const o=i[a];o&&(o.isNode===!0||e&&typeof o.toJSON=="function")&&(yield{property:r,index:a,childNode:o})}}}const ALt=new Map([[1,"float"],[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]);function RLt(n){return ALt.get(n)}function VO(n){if(n==null)return null;const e=typeof n;return n.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":n.isVector2===!0?"vec2":n.isVector3===!0?"vec3":n.isVector4===!0?"vec4":n.isMatrix3===!0?"mat3":n.isMatrix4===!0?"mat4":n.isColor===!0?"color":n instanceof ArrayBuffer?"ArrayBuffer":null}function mRe(n,...e){const r=n?n.slice(-4):void 0;return e.length===1&&(r==="vec2"?e=[e[0],e[0]]:r==="vec3"?e=[e[0],e[0],e[0]]:r==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),n==="color"?new Tn(...e):r==="vec2"?new Nt(...e):r==="vec3"?new ge(...e):r==="vec4"?new sr(...e):r==="mat3"?new Zn(...e):r==="mat4"?new jr(...e):n==="bool"?e[0]||!1:n==="float"||n==="int"||n==="uint"?e[0]||0:n==="string"?e[0]||"":n==="ArrayBuffer"?NLt(e[0]):null}function PLt(n){let e="";const r=new Uint8Array(n);for(let i=0;i<r.length;i++)e+=String.fromCharCode(r[i]);return btoa(e)}function NLt(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0)).buffer}const Dge={VERTEX:"vertex"},Tr={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},gp={READ_ONLY:"readOnly",WRITE_ONLY:"writeOnly",READ_WRITE:"readWrite"},OLt=["fragment","vertex"],Lge=["setup","analyze","generate"],kge=[...OLt,"compute"],gw=["x","y","z","w"];let ILt=0;class fr extends mv{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=Tr.NONE,this.updateBeforeType=Tr.NONE,this.updateAfterType=Tr.NONE,this.uuid=LO.generateUUID(),this.version=0,this._cacheKey=null,this._cacheKeyVersion=0,this.global=!1,this.isNode=!0,Object.defineProperty(this,"id",{value:ILt++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,r){return this.updateType=r,this.update=e.bind(this.getSelf()),this}onFrameUpdate(e){return this.onUpdate(e,Tr.FRAME)}onRenderUpdate(e){return this.onUpdate(e,Tr.RENDER)}onObjectUpdate(e){return this.onUpdate(e,Tr.OBJECT)}onReference(e){return this.updateReference=e.bind(this.getSelf()),this}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of UO(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const r of this.getChildren())r.traverse(e)}getCacheKey(e=!1){return e=e||this.version!==this._cacheKeyVersion,(e===!0||this._cacheKey===null)&&(this._cacheKey=gRe(this,e),this._cacheKeyVersion=this.version),this._cacheKey}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const r=this.getNodeType(e);return e.getElementType(r)}getNodeType(e){const r=e.getNodeProperties(this);return r.outputNode?r.outputNode.getNodeType(e):this.nodeType}getShared(e){const r=this.getHash(e);return e.getNodeFromHash(r)||this}setup(e){const r=e.getNodeProperties(this);let i=0;for(const a of this.getChildren())r["node"+i++]=a;return null}analyze(e){if(e.increaseUsage(this)===1){const i=e.getNodeProperties(this);for(const a of Object.values(i))a&&a.isNode===!0&&a.build(e)}}generate(e,r){const{outputNode:i}=e.getNodeProperties(this);if(i&&i.isNode===!0)return i.build(e,r)}updateBefore(){console.warn("Abstract function.")}updateAfter(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e,r=null){const i=this.getShared(e);if(this!==i)return i.build(e,r);e.addNode(this),e.addChain(this);let a=null;const o=e.getBuildStage();if(o==="setup"){this.updateReference(e);const s=e.getNodeProperties(this);if(s.initialized!==!0){const l=e.stack.nodes.length;s.initialized=!0,s.outputNode=this.setup(e),s.outputNode!==null&&e.stack.nodes.length;for(const c of Object.values(s))c&&c.isNode===!0&&c.build(e)}}else if(o==="analyze")this.analyze(e);else if(o==="generate")if(this.generate.length===1){const l=this.getNodeType(e),c=e.getDataFromNode(this);a=c.snippet,a===void 0?(a=this.generate(e)||"",c.snippet=a):c.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),a=e.format(a,l,r)}else a=this.generate(e,r)||"";return e.removeChain(this),e.addSequentialNode(this),a}getSerializeChildren(){return UO(this)}serialize(e){const r=this.getSerializeChildren(),i={};for(const{property:a,index:o,childNode:s}of r)o!==void 0?(i[a]===void 0&&(i[a]=Number.isInteger(o)?[]:{}),i[a][o]=s.toJSON(e.meta).uuid):i[a]=s.toJSON(e.meta).uuid;Object.keys(i).length>0&&(e.inputNodes=i)}deserialize(e){if(e.inputNodes!==void 0){const r=e.meta.nodes;for(const i in e.inputNodes)if(Array.isArray(e.inputNodes[i])){const a=[];for(const o of e.inputNodes[i])a.push(r[o]);this[i]=a}else if(typeof e.inputNodes[i]=="object"){const a={};for(const o in e.inputNodes[i]){const s=e.inputNodes[i][o];a[o]=r[s]}this[i]=a}else{const a=e.inputNodes[i];this[i]=r[a]}}}toJSON(e){const{uuid:r,type:i}=this,a=e===void 0||typeof e=="string";a&&(e={textures:{},images:{},nodes:{}});let o=e.nodes[r];o===void 0&&(o={uuid:r,type:i,meta:e,metadata:{version:4.6,type:"Node",generator:"Node.toJSON"}},a!==!0&&(e.nodes[o.uuid]=o),this.serialize(o),delete o.meta);function s(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}if(a){const l=s(e.textures),c=s(e.images),u=s(e.nodes);l.length>0&&(o.textures=l),c.length>0&&(o.images=c),u.length>0&&(o.nodes=u)}return o}}class XM extends fr{static get type(){return"ArrayElementNode"}constructor(e,r){super(),this.node=e,this.indexNode=r,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const r=this.node.build(e),i=this.indexNode.build(e,"uint");return`${r}[ ${i} ]`}}class vRe extends fr{static get type(){return"ConvertNode"}constructor(e,r){super(),this.node=e,this.convertTo=r}getNodeType(e){const r=this.node.getNodeType(e);let i=null;for(const a of this.convertTo.split("|"))(i===null||e.getTypeLength(r)===e.getTypeLength(a))&&(i=a);return i}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,r){const i=this.node,a=this.getNodeType(e),o=i.build(e,a);return e.format(o,a,r)}}class bo extends fr{static get type(){return"TempNode"}constructor(e){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,r){if(e.getBuildStage()==="generate"){const a=e.getVectorType(this.getNodeType(e,r)),o=e.getDataFromNode(this);if(o.propertyName!==void 0)return e.format(o.propertyName,a,r);if(a!=="void"&&r!=="void"&&this.hasDependencies(e)){const s=super.build(e,a),l=e.getVarFromNode(this,null,a),c=e.getPropertyName(l);return e.addLineFlowCode(`${c} = ${s}`,this),o.snippet=s,o.propertyName=c,e.format(o.propertyName,a,r)}}return super.build(e,r)}}class DLt extends bo{static get type(){return"JoinNode"}constructor(e=[],r=null){super(r),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((r,i)=>r+e.getTypeLength(i.getNodeType(e)),0))}generate(e,r){const i=this.getNodeType(e),a=this.nodes,o=e.getComponentType(i),s=[];for(const c of a){let u=c.build(e);const d=e.getComponentType(c.getNodeType(e));d!==o&&(u=e.format(u,d,o)),s.push(u)}const l=`${e.getType(i)}( ${s.join(", ")} )`;return e.format(l,i,r)}}const LLt=gw.join("");class Fge extends fr{static get type(){return"SplitNode"}constructor(e,r="x"){super(),this.node=e,this.components=r,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const r of this.components)e=Math.max(gw.indexOf(r)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}generate(e,r){const i=this.node,a=e.getTypeLength(i.getNodeType(e));let o=null;if(a>1){let s=null;this.getVectorLength()>=a&&(s=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const c=i.build(e,s);this.components.length===a&&this.components===LLt.slice(0,this.components.length)?o=e.format(c,s,r):o=e.format(`${c}.${this.components}`,this.getNodeType(e),r)}else o=i.build(e,r);return o}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class kLt extends bo{static get type(){return"SetNode"}constructor(e,r,i){super(),this.sourceNode=e,this.components=r,this.targetNode=i}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:r,components:i,targetNode:a}=this,o=this.getNodeType(e),s=e.getTypeFromLength(i.length,a.getNodeType(e)),l=a.build(e,s),c=r.build(e,o),u=e.getTypeLength(o),d=[];for(let f=0;f<u;f++){const h=gw[f];h===i[0]?(d.push(l),f+=i.length-1):d.push(c+"."+h)}return`${e.getType(o)}( ${d.join(", ")} )`}}class FLt extends bo{static get type(){return"FlipNode"}constructor(e,r){super(),this.sourceNode=e,this.components=r}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:r,sourceNode:i}=this,a=this.getNodeType(e),o=i.build(e),s=e.getVarFromNode(this),l=e.getPropertyName(s);e.addLineFlowCode(l+" = "+o,this);const c=e.getTypeLength(a),u=[];let d=0;for(let f=0;f<c;f++){const h=gw[f];h===r[d]?(u.push("1.0 - "+(l+"."+h)),d++):u.push(l+"."+h)}return`${e.getType(a)}( ${u.join(", ")} )`}}class CZ extends fr{static get type(){return"InputNode"}constructor(e,r=null){super(r),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?VO(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=VO(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=PLt(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?mRe(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}class Qp extends CZ{static get type(){return"ConstNode"}constructor(e,r=null){super(e,r),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,r){const i=this.getNodeType(e);return e.format(this.generateConst(e),i,r)}}let v_=null;const Wb=new Map;function pt(n,e){if(Wb.has(n)){console.warn(`Redefinition of method chaining ${n}`);return}if(typeof e!="function")throw new Error(`Node element ${n} is not a function`);Wb.set(n,e)}const yRe=n=>n.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),$ge=n=>yRe(n).split("").sort().join(""),bRe={setup(n,e){const r=e.shift();return n(jL(r),...e)},get(n,e,r){if(typeof e=="string"&&n[e]===void 0){if(n.isStackNode!==!0&&e==="assign")return(...i)=>(v_.assign(r,...i),r);if(Wb.has(e)){const i=Wb.get(e);return n.isStackNode?(...a)=>r.add(i(...a)):(...a)=>i(r,...a)}else{if(e==="self")return n;if(e.endsWith("Assign")&&Wb.has(e.slice(0,e.length-6))){const i=Wb.get(e.slice(0,e.length-6));return n.isStackNode?(...a)=>r.assign(a[0],i(...a)):(...a)=>r.assign(i(r,...a))}else{if(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0)return e=yRe(e),Ht(new Fge(r,e));if(/^set[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=$ge(e.slice(3).toLowerCase()),i=>Ht(new kLt(n,e,i));if(/^flip[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=$ge(e.slice(4).toLowerCase()),()=>Ht(new FLt(Ht(n),e));if(e==="width"||e==="height"||e==="depth")return e==="width"?e="x":e==="height"?e="y":e==="depth"&&(e="z"),Ht(new Fge(n,e));if(/^\d+$/.test(e)===!0)return Ht(new XM(r,new Qp(Number(e),"uint")))}}}return Reflect.get(n,e,r)},set(n,e,r,i){return typeof e=="string"&&n[e]===void 0&&(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0||e==="width"||e==="height"||e==="depth"||/^\d+$/.test(e)===!0)?(i[e].assign(r),!0):Reflect.set(n,e,r,i)}},Uz=new WeakMap,Bge=new WeakMap,$Lt=function(n,e=null){const r=VO(n);if(r==="node"){let i=Uz.get(n);return i===void 0&&(i=new Proxy(n,bRe),Uz.set(n,i),Uz.set(i,i)),i}else{if(e===null&&(r==="float"||r==="boolean")||r&&r!=="shader"&&r!=="string")return Ht(GH(n,e));if(r==="shader")return Xt(n)}return n},BLt=function(n,e=null){for(const r in n)n[r]=Ht(n[r],e);return n},zLt=function(n,e=null){const r=n.length;for(let i=0;i<r;i++)n[i]=Ht(n[i],e);return n},ULt=function(n,e=null,r=null,i=null){const a=o=>Ht(i!==null?Object.assign(o,i):o);return e===null?(...o)=>a(new n(...yx(o))):r!==null?(r=Ht(r),(...o)=>a(new n(e,...yx(o),r))):(...o)=>a(new n(e,...yx(o)))},VLt=function(n,...e){return Ht(new n(...yx(e)))};class GLt extends fr{constructor(e,r){super(),this.shaderNode=e,this.inputNodes=r}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}call(e){const{shaderNode:r,inputNodes:i}=this,a=e.getNodeProperties(r);if(a.onceOutput)return a.onceOutput;let o=null;if(r.layout){let s=Bge.get(e.constructor);s===void 0&&(s=new WeakMap,Bge.set(e.constructor,s));let l=s.get(r);l===void 0&&(l=Ht(e.buildFunctionNode(r)),s.set(r,l)),e.currentFunctionNode!==null&&e.currentFunctionNode.includes.push(l),o=Ht(l.call(i))}else{const s=r.jsFunc,l=i!==null?s(i,e):s(e);o=Ht(l)}return r.once&&(a.onceOutput=o),o}getOutputNode(e){const r=e.getNodeProperties(this);return r.outputNode===null&&(r.outputNode=this.setupOutput(e)),r.outputNode}setup(e){return this.getOutputNode(e)}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}generate(e,r){return this.getOutputNode(e).build(e,r)}}class jLt extends fr{constructor(e,r){super(r),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}call(e=null){return jL(e),Ht(new GLt(this,e))}setup(){return this.call()}}const HLt=[!1,!0],WLt=[0,1,2,3],qLt=[-1,-2],xRe=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],MZ=new Map;for(const n of HLt)MZ.set(n,new Qp(n));const TZ=new Map;for(const n of WLt)TZ.set(n,new Qp(n,"uint"));const AZ=new Map([...TZ].map(n=>new Qp(n.value,"int")));for(const n of qLt)AZ.set(n,new Qp(n,"int"));const VL=new Map([...AZ].map(n=>new Qp(n.value)));for(const n of xRe)VL.set(n,new Qp(n));for(const n of xRe)VL.set(-n,new Qp(-n));const GL={bool:MZ,uint:TZ,ints:AZ,float:VL},zge=new Map([...MZ,...VL]),GH=(n,e)=>zge.has(n)?zge.get(n):n.isNode===!0?n:new Qp(n,e),YLt=n=>{try{return n.getNodeType()}catch{return}},xo=function(n,e=null){return(...r)=>{if((r.length===0||!["bool","float","int","uint"].includes(n)&&r.every(a=>typeof a!="object"))&&(r=[mRe(n,...r)]),r.length===1&&e!==null&&e.has(r[0]))return Ht(e.get(r[0]));if(r.length===1){const a=GH(r[0],n);return YLt(a)===n?Ht(a):Ht(new vRe(a,n))}const i=r.map(a=>GH(a));return Ht(new DLt(i,n))}},Uge=n=>typeof n=="object"&&n!==null?n.value:n,XLt=n=>n!=null?n.nodeType||n.convertTo||(typeof n=="string"?n:null):null;function NP(n,e){return new Proxy(new jLt(n,e),bRe)}const Ht=(n,e=null)=>$Lt(n,e),jL=(n,e=null)=>new BLt(n,e),yx=(n,e=null)=>new zLt(n,e),Ct=(...n)=>new ULt(...n),Kt=(...n)=>new VLt(...n),Xt=(n,e)=>{const r=new NP(n,e),i=(...a)=>{let o;return jL(a),a[0]&&a[0].isNode?o=[...a]:o=a[0],r.call(o)};return i.shaderNode=r,i.setLayout=a=>(r.setLayout(a),i),i.once=()=>(r.once=!0,i),i};pt("toGlobal",n=>(n.global=!0,n));const GO=n=>{v_=n},_Re=()=>v_,po=(...n)=>v_.If(...n);function KLt(n){return v_&&v_.add(n),n}pt("append",KLt);const ZLt=new xo("color"),ht=new xo("float",GL.float),Fa=new xo("int",GL.ints),QLt=new xo("uint",GL.uint),wRe=new xo("bool",GL.bool),Jt=new xo("vec2"),Kh=new xo("ivec2"),JLt=new xo("uvec2"),e6t=new xo("bvec2"),yt=new xo("vec3"),t6t=new xo("ivec3"),n6t=new xo("uvec3"),r6t=new xo("bvec3"),ur=new xo("vec4"),i6t=new xo("ivec4"),a6t=new xo("uvec4"),o6t=new xo("bvec4"),RZ=new xo("mat2"),_l=new xo("mat3"),bx=new xo("mat4");pt("toColor",ZLt);pt("toFloat",ht);pt("toInt",Fa);pt("toUint",QLt);pt("toBool",wRe);pt("toVec2",Jt);pt("toIVec2",Kh);pt("toUVec2",JLt);pt("toBVec2",e6t);pt("toVec3",yt);pt("toIVec3",t6t);pt("toUVec3",n6t);pt("toBVec3",r6t);pt("toVec4",ur);pt("toIVec4",i6t);pt("toUVec4",a6t);pt("toBVec4",o6t);pt("toMat2",RZ);pt("toMat3",_l);pt("toMat4",bx);const s6t=Ct(XM),l6t=(n,e)=>Ht(new vRe(Ht(n),e));pt("element",s6t);pt("convert",l6t);class SRe extends fr{static get type(){return"UniformGroupNode"}constructor(e,r=!1,i=1){super("string"),this.name=e,this.version=0,this.shared=r,this.order=i,this.isUniformGroup=!0}set needsUpdate(e){e===!0&&this.version++}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const c6t=n=>new SRe(n),ERe=(n,e=0)=>new SRe(n,!0,e),u6t=ERe("frame"),rr=ERe("render"),CRe=c6t("object");class KM extends CZ{static get type(){return"UniformNode"}constructor(e,r=null){super(e,r),this.isUniformNode=!0,this.name="",this.groupNode=CRe}label(e){return this.name=e,this}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,r){const i=this.getSelf();return e=e.bind(i),super.onUpdate(a=>{const o=e(a,i);o!==void 0&&(this.value=o)},r)}generate(e,r){const i=this.getNodeType(e),a=this.getUniformHash(e);let o=e.getNodeFromHash(a);o===void 0&&(e.setHashNode(this,a),o=this);const s=o.getInputType(e),l=e.getUniformFromNode(o,s,e.shaderStage,this.name||e.context.label),c=e.getPropertyName(l);return e.context.label!==void 0&&delete e.context.label,e.format(c,i,r)}}const lr=(n,e)=>{const r=XLt(e||n),i=n&&n.isNode===!0?n.node&&n.node.value||n.value:n;return Ht(new KM(i,r))};class vi extends fr{static get type(){return"PropertyNode"}constructor(e,r=null,i=!1){super(e),this.name=r,this.varying=i,this.isPropertyNode=!0}getHash(e){return this.name||super.getHash(e)}isGlobal(){return!0}generate(e){let r;return this.varying===!0?(r=e.getVaryingFromNode(this,this.name),r.needsInterpolation=!0):r=e.getVarFromNode(this,this.name),e.getPropertyName(r)}}const d6t=(n,e)=>Ht(new vi(n,e)),jO=(n,e)=>Ht(new vi(n,e,!0)),di=Kt(vi,"vec4","DiffuseColor"),Vge=Kt(vi,"vec3","EmissiveColor"),ip=Kt(vi,"float","Roughness"),HO=Kt(vi,"float","Metalness"),jH=Kt(vi,"float","Clearcoat"),WO=Kt(vi,"float","ClearcoatRoughness"),qb=Kt(vi,"vec3","Sheen"),PZ=Kt(vi,"float","SheenRoughness"),NZ=Kt(vi,"float","Iridescence"),MRe=Kt(vi,"float","IridescenceIOR"),TRe=Kt(vi,"float","IridescenceThickness"),HH=Kt(vi,"float","AlphaT"),t0=Kt(vi,"float","Anisotropy"),OP=Kt(vi,"vec3","AnisotropyT"),xx=Kt(vi,"vec3","AnisotropyB"),Ec=Kt(vi,"color","SpecularColor"),qO=Kt(vi,"float","SpecularF90"),WH=Kt(vi,"float","Shininess"),f6t=Kt(vi,"vec4","Output"),Vz=Kt(vi,"float","dashSize"),Gge=Kt(vi,"float","gapSize"),IP=Kt(vi,"float","IOR"),qH=Kt(vi,"float","Transmission"),ARe=Kt(vi,"float","Thickness"),RRe=Kt(vi,"float","AttenuationDistance"),PRe=Kt(vi,"color","AttenuationColor"),NRe=Kt(vi,"float","Dispersion");class h6t extends bo{static get type(){return"AssignNode"}constructor(e,r){super(),this.targetNode=e,this.sourceNode=r}hasDependencies(){return!1}getNodeType(e,r){return r!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:r}=this;if(e.isAvailable("swizzleAssign")===!1&&r.isSplitNode&&r.components.length>1){const i=e.getTypeLength(r.node.getNodeType(e));return gw.join("").slice(0,i)!==r.components}return!1}generate(e,r){const{targetNode:i,sourceNode:a}=this,o=this.needsSplitAssign(e),s=i.getNodeType(e),l=i.context({assign:!0}).build(e),c=a.build(e,s),u=a.getNodeType(e),d=e.getDataFromNode(this);let f;if(d.initialized===!0)r!=="void"&&(f=l);else if(o){const h=e.getVarFromNode(this,null,s),p=e.getPropertyName(h);e.addLineFlowCode(`${p} = ${c}`,this);const g=i.node.context({assign:!0}).build(e);for(let m=0;m<i.components.length;m++){const v=i.components[m];e.addLineFlowCode(`${g}.${v} = ${p}[ ${m} ]`,this)}r!=="void"&&(f=l)}else f=`${l} = ${c}`,(r==="void"||u==="void")&&(e.addLineFlowCode(f,this),r!=="void"&&(f=l));return d.initialized=!0,e.format(f,s,r)}}const p6t=Ct(h6t);pt("assign",p6t);class g6t extends bo{static get type(){return"FunctionCallNode"}constructor(e=null,r={}){super(),this.functionNode=e,this.parameters=r}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}generate(e){const r=[],i=this.functionNode,a=i.getInputs(e),o=this.parameters,s=(c,u)=>{const d=u.type,f=d==="pointer";let h;return f?h="&"+c.build(e):h=c.build(e,d),h};if(Array.isArray(o))for(let c=0;c<o.length;c++)r.push(s(o[c],a[c]));else for(const c of a){const u=o[c.name];if(u!==void 0)r.push(s(u,c));else throw new Error(`FunctionCallNode: Input '${c.name}' not found in FunctionNode.`)}return`${i.build(e,"property")}( ${r.join(", ")} )`}}const m6t=(n,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?yx(e):jL(e[0]),Ht(new g6t(Ht(n),e)));pt("call",m6t);class ya extends bo{static get type(){return"OperatorNode"}constructor(e,r,i,...a){if(super(),a.length>0){let o=new ya(e,r,i);for(let s=0;s<a.length-1;s++)o=new ya(e,o,a[s]);r=o,i=a[a.length-1]}this.op=e,this.aNode=r,this.bNode=i}getNodeType(e,r){const i=this.op,a=this.aNode,o=this.bNode,s=a.getNodeType(e),l=typeof o<"u"?o.getNodeType(e):null;if(s==="void"||l==="void")return"void";if(i==="%")return s;if(i==="~"||i==="&"||i==="|"||i==="^"||i===">>"||i==="<<")return e.getIntegerType(s);if(i==="!"||i==="=="||i==="&&"||i==="||"||i==="^^")return"bool";if(i==="<"||i===">"||i==="<="||i===">="){const c=r?e.getTypeLength(r):Math.max(e.getTypeLength(s),e.getTypeLength(l));return c>1?`bvec${c}`:"bool"}else return s==="float"&&e.isMatrix(l)?l:e.isMatrix(s)&&e.isVector(l)?e.getVectorFromMatrix(s):e.isVector(s)&&e.isMatrix(l)?e.getVectorFromMatrix(l):e.getTypeLength(l)>e.getTypeLength(s)?l:s}generate(e,r){const i=this.op,a=this.aNode,o=this.bNode,s=this.getNodeType(e,r);let l=null,c=null;s!=="void"?(l=a.getNodeType(e),c=typeof o<"u"?o.getNodeType(e):null,i==="<"||i===">"||i==="<="||i===">="||i==="=="?e.isVector(l)?c=l:l!==c&&(l=c="float"):i===">>"||i==="<<"?(l=s,c=e.changeComponentType(c,"uint")):e.isMatrix(l)&&e.isVector(c)?c=e.getVectorFromMatrix(l):e.isVector(l)&&e.isMatrix(c)?l=e.getVectorFromMatrix(c):l=c=s):l=c=s;const u=a.build(e,l),d=typeof o<"u"?o.build(e,c):null,f=e.getTypeLength(r),h=e.getFunctionOperator(i);if(r!=="void")return i==="<"&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("lessThan",r)}( ${u}, ${d} )`,s,r):e.format(`( ${u} < ${d} )`,s,r):i==="<="&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("lessThanEqual",r)}( ${u}, ${d} )`,s,r):e.format(`( ${u} <= ${d} )`,s,r):i===">"&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("greaterThan",r)}( ${u}, ${d} )`,s,r):e.format(`( ${u} > ${d} )`,s,r):i===">="&&f>1?e.useComparisonMethod?e.format(`${e.getMethod("greaterThanEqual",r)}( ${u}, ${d} )`,s,r):e.format(`( ${u} >= ${d} )`,s,r):i==="!"||i==="~"?e.format(`(${i}${u})`,l,r):h?e.format(`${h}( ${u}, ${d} )`,s,r):e.format(`( ${u} ${i} ${d} )`,s,r);if(l!=="void")return h?e.format(`${h}( ${u}, ${d} )`,s,r):e.format(`${u} ${i} ${d}`,s,r)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const wl=Ct(ya,"+"),jl=Ct(ya,"-"),Or=Ct(ya,"*"),zp=Ct(ya,"/"),ORe=Ct(ya,"%"),v6t=Ct(ya,"=="),y6t=Ct(ya,"!="),b6t=Ct(ya,"<"),x6t=Ct(ya,">"),_6t=Ct(ya,"<="),w6t=Ct(ya,">="),S6t=Ct(ya,"&&"),E6t=Ct(ya,"||"),C6t=Ct(ya,"!"),M6t=Ct(ya,"^^"),T6t=Ct(ya,"&"),A6t=Ct(ya,"~"),R6t=Ct(ya,"|"),P6t=Ct(ya,"^"),N6t=Ct(ya,"<<"),O6t=Ct(ya,">>");pt("add",wl);pt("sub",jl);pt("mul",Or);pt("div",zp);pt("modInt",ORe);pt("equal",v6t);pt("notEqual",y6t);pt("lessThan",b6t);pt("greaterThan",x6t);pt("lessThanEqual",_6t);pt("greaterThanEqual",w6t);pt("and",S6t);pt("or",E6t);pt("not",C6t);pt("xor",M6t);pt("bitAnd",T6t);pt("bitNot",A6t);pt("bitOr",R6t);pt("bitXor",P6t);pt("shiftLeft",N6t);pt("shiftRight",O6t);const I6t=(...n)=>(console.warn("TSL.OperatorNode: .remainder() has been renamed to .modInt()."),ORe(...n));pt("remainder",I6t);class $e extends bo{static get type(){return"MathNode"}constructor(e,r,i=null,a=null){super(),this.method=e,this.aNode=r,this.bNode=i,this.cNode=a}getInputType(e){const r=this.aNode.getNodeType(e),i=this.bNode?this.bNode.getNodeType(e):null,a=this.cNode?this.cNode.getNodeType(e):null,o=e.isMatrix(r)?0:e.getTypeLength(r),s=e.isMatrix(i)?0:e.getTypeLength(i),l=e.isMatrix(a)?0:e.getTypeLength(a);return o>s&&o>l?r:s>l?i:l>o?a:r}getNodeType(e){const r=this.method;return r===$e.LENGTH||r===$e.DISTANCE||r===$e.DOT?"float":r===$e.CROSS?"vec3":r===$e.ALL?"bool":r===$e.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):r===$e.MOD?this.aNode.getNodeType(e):this.getInputType(e)}generate(e,r){const i=this.method,a=this.getNodeType(e),o=this.getInputType(e),s=this.aNode,l=this.bNode,c=this.cNode,u=e.renderer.isWebGLRenderer===!0;if(i===$e.TRANSFORM_DIRECTION){let d=s,f=l;e.isMatrix(d.getNodeType(e))?f=ur(yt(f),0):d=ur(yt(d),0);const h=Or(d,f).xyz;return IC(h).build(e,r)}else{if(i===$e.NEGATE)return e.format("( - "+s.build(e,o)+" )",a,r);if(i===$e.ONE_MINUS)return jl(1,s).build(e,r);if(i===$e.RECIPROCAL)return zp(1,s).build(e,r);if(i===$e.DIFFERENCE)return Pu(jl(s,l)).build(e,r);{const d=[];return i===$e.CROSS||i===$e.MOD?d.push(s.build(e,a),l.build(e,a)):u&&i===$e.STEP?d.push(s.build(e,e.getTypeLength(s.getNodeType(e))===1?"float":o),l.build(e,o)):u&&(i===$e.MIN||i===$e.MAX)||i===$e.MOD?d.push(s.build(e,o),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":o)):i===$e.REFRACT?d.push(s.build(e,o),l.build(e,o),c.build(e,"float")):i===$e.MIX?d.push(s.build(e,o),l.build(e,o),c.build(e,e.getTypeLength(c.getNodeType(e))===1?"float":o)):(d.push(s.build(e,o)),l!==null&&d.push(l.build(e,o)),c!==null&&d.push(c.build(e,o))),e.format(`${e.getMethod(i,a)}( ${d.join(", ")} )`,a,r)}}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}$e.ALL="all";$e.ANY="any";$e.EQUALS="equals";$e.RADIANS="radians";$e.DEGREES="degrees";$e.EXP="exp";$e.EXP2="exp2";$e.LOG="log";$e.LOG2="log2";$e.SQRT="sqrt";$e.INVERSE_SQRT="inversesqrt";$e.FLOOR="floor";$e.CEIL="ceil";$e.NORMALIZE="normalize";$e.FRACT="fract";$e.SIN="sin";$e.COS="cos";$e.TAN="tan";$e.ASIN="asin";$e.ACOS="acos";$e.ATAN="atan";$e.ABS="abs";$e.SIGN="sign";$e.LENGTH="length";$e.NEGATE="negate";$e.ONE_MINUS="oneMinus";$e.DFDX="dFdx";$e.DFDY="dFdy";$e.ROUND="round";$e.RECIPROCAL="reciprocal";$e.TRUNC="trunc";$e.FWIDTH="fwidth";$e.BITCAST="bitcast";$e.TRANSPOSE="transpose";$e.ATAN2="atan2";$e.MIN="min";$e.MAX="max";$e.MOD="mod";$e.STEP="step";$e.REFLECT="reflect";$e.DISTANCE="distance";$e.DIFFERENCE="difference";$e.DOT="dot";$e.CROSS="cross";$e.POW="pow";$e.TRANSFORM_DIRECTION="transformDirection";$e.MIX="mix";$e.CLAMP="clamp";$e.REFRACT="refract";$e.SMOOTHSTEP="smoothstep";$e.FACEFORWARD="faceforward";const D6t=ht(1e-6),L6t=ht(Math.PI),IRe=Ct($e,$e.ALL),k6t=Ct($e,$e.ANY),F6t=Ct($e,$e.EQUALS),$6t=Ct($e,$e.RADIANS),B6t=Ct($e,$e.DEGREES),DRe=Ct($e,$e.EXP),OC=Ct($e,$e.EXP2),LRe=Ct($e,$e.LOG),Cp=Ct($e,$e.LOG2),OZ=Ct($e,$e.SQRT),z6t=Ct($e,$e.INVERSE_SQRT),Z0=Ct($e,$e.FLOOR),IZ=Ct($e,$e.CEIL),IC=Ct($e,$e.NORMALIZE),bv=Ct($e,$e.FRACT),Nd=Ct($e,$e.SIN),Ug=Ct($e,$e.COS),U6t=Ct($e,$e.TAN),V6t=Ct($e,$e.ASIN),G6t=Ct($e,$e.ACOS),j6t=Ct($e,$e.ATAN),Pu=Ct($e,$e.ABS),YO=Ct($e,$e.SIGN),Im=Ct($e,$e.LENGTH),H6t=Ct($e,$e.NEGATE),W6t=Ct($e,$e.ONE_MINUS),kRe=Ct($e,$e.DFDX),FRe=Ct($e,$e.DFDY),q6t=Ct($e,$e.ROUND),Y6t=Ct($e,$e.RECIPROCAL),X6t=Ct($e,$e.TRUNC),K6t=Ct($e,$e.FWIDTH);$e.BITCAST;const Z6t=Ct($e,$e.TRANSPOSE),Q6t=Ct($e,$e.ATAN2),DC=Ct($e,$e.MIN),ic=Ct($e,$e.MAX),$Re=Ct($e,$e.MOD),BRe=Ct($e,$e.STEP),J6t=Ct($e,$e.REFLECT),ekt=Ct($e,$e.DISTANCE),tkt=Ct($e,$e.DIFFERENCE),DZ=Ct($e,$e.DOT),zRe=Ct($e,$e.CROSS),HL=Ct($e,$e.POW),URe=Ct($e,$e.POW,2),nkt=Ct($e,$e.POW,3),rkt=Ct($e,$e.POW,4),ikt=Ct($e,$e.TRANSFORM_DIRECTION),akt=n=>Or(YO(n),HL(Pu(n),1/3)),okt=n=>DZ(n,n),ea=Ct($e,$e.MIX),Up=(n,e=0,r=1)=>Ht(new $e($e.CLAMP,Ht(n),Ht(e),Ht(r))),skt=n=>Up(n),VRe=Ct($e,$e.REFRACT),Ay=Ct($e,$e.SMOOTHSTEP),lkt=Ct($e,$e.FACEFORWARD),ckt=Xt(([n])=>{const i=43758.5453,a=DZ(n.xy,Jt(12.9898,78.233)),o=$Re(a,L6t);return bv(Nd(o).mul(i))}),ukt=(n,e,r)=>ea(e,r,n),dkt=(n,e,r)=>Ay(e,r,n);pt("all",IRe);pt("any",k6t);pt("equals",F6t);pt("radians",$6t);pt("degrees",B6t);pt("exp",DRe);pt("exp2",OC);pt("log",LRe);pt("log2",Cp);pt("sqrt",OZ);pt("inverseSqrt",z6t);pt("floor",Z0);pt("ceil",IZ);pt("normalize",IC);pt("fract",bv);pt("sin",Nd);pt("cos",Ug);pt("tan",U6t);pt("asin",V6t);pt("acos",G6t);pt("atan",j6t);pt("abs",Pu);pt("sign",YO);pt("length",Im);pt("lengthSq",okt);pt("negate",H6t);pt("oneMinus",W6t);pt("dFdx",kRe);pt("dFdy",FRe);pt("round",q6t);pt("reciprocal",Y6t);pt("trunc",X6t);pt("fwidth",K6t);pt("atan2",Q6t);pt("min",DC);pt("max",ic);pt("mod",$Re);pt("step",BRe);pt("reflect",J6t);pt("distance",ekt);pt("dot",DZ);pt("cross",zRe);pt("pow",HL);pt("pow2",URe);pt("pow3",nkt);pt("pow4",rkt);pt("transformDirection",ikt);pt("mix",ukt);pt("clamp",Up);pt("refract",VRe);pt("smoothstep",dkt);pt("faceForward",lkt);pt("difference",tkt);pt("saturate",skt);pt("cbrt",akt);pt("transpose",Z6t);pt("rand",ckt);class fkt extends fr{static get type(){return"ConditionalNode"}constructor(e,r,i=null){super(),this.condNode=e,this.ifNode=r,this.elseNode=i}getNodeType(e){const r=this.ifNode.getNodeType(e);if(this.elseNode!==null){const i=this.elseNode.getNodeType(e);if(e.getTypeLength(i)>e.getTypeLength(r))return i}return r}setup(e){const r=this.condNode.cache(),i=this.ifNode.cache(),a=this.elseNode?this.elseNode.cache():null,o=e.context.nodeBlock;e.getDataFromNode(i).parentNodeBlock=o,a!==null&&(e.getDataFromNode(a).parentNodeBlock=o);const s=e.getNodeProperties(this);s.condNode=r,s.ifNode=i.context({nodeBlock:i}),s.elseNode=a?a.context({nodeBlock:a}):null}generate(e,r){const i=this.getNodeType(e),a=e.getDataFromNode(this);if(a.nodeProperty!==void 0)return a.nodeProperty;const{condNode:o,ifNode:s,elseNode:l}=e.getNodeProperties(this),c=r!=="void",u=c?d6t(i).build(e):"";a.nodeProperty=u;const d=o.build(e,"bool");e.addFlowCode(`
${e.tab}if ( ${d} ) {

`).addFlowTab();let f=s.build(e,i);if(f&&(c?f=u+" = "+f+";":f="return "+f+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+f+`

`+e.tab+"}"),l!==null){e.addFlowCode(` else {

`).addFlowTab();let h=l.build(e,i);h&&(c?h=u+" = "+h+";":h="return "+h+";"),e.removeFlowTab().addFlowCode(e.tab+"	"+h+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(u,i,r)}}const Xl=Ct(fkt);pt("select",Xl);const hkt=(...n)=>(console.warn("TSL.ConditionalNode: cond() has been renamed to select()."),Xl(...n));pt("cond",hkt);class GRe extends fr{static get type(){return"ContextNode"}constructor(e,r={}){super(),this.isContextNode=!0,this.node=e,this.value=r}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}analyze(e){this.node.build(e)}setup(e){const r=e.getContext();e.setContext({...e.context,...this.value});const i=this.node.build(e);return e.setContext(r),i}generate(e,r){const i=e.getContext();e.setContext({...e.context,...this.value});const a=this.node.build(e,r);return e.setContext(i),a}}const LZ=Ct(GRe),pkt=(n,e)=>LZ(n,{label:e});pt("context",LZ);pt("label",pkt);class jRe extends fr{static get type(){return"VarNode"}constructor(e,r=null){super(),this.node=e,this.name=r,this.global=!0,this.isVarNode=!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const{node:r,name:i}=this,a=e.getVarFromNode(this,i,e.getVectorType(this.getNodeType(e))),o=e.getPropertyName(a),s=r.build(e,a.type);return e.addLineFlowCode(`${o} = ${s}`,this),o}}const HRe=Ct(jRe);pt("toVar",(...n)=>HRe(...n).append());const gkt=n=>(console.warn('TSL: "temp" is deprecated. Use ".toVar()" instead.'),HRe(n));pt("temp",gkt);class mkt extends fr{static get type(){return"VaryingNode"}constructor(e,r=null){super(),this.node=e,this.name=r,this.isVaryingNode=!0}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const r=e.getNodeProperties(this);let i=r.varying;if(i===void 0){const a=this.name,o=this.getNodeType(e);r.varying=i=e.getVaryingFromNode(this,a,o),r.node=this.node}return i.needsInterpolation||(i.needsInterpolation=e.shaderStage==="fragment"),i}setup(e){this.setupVarying(e)}analyze(e){return this.setupVarying(e),this.node.analyze(e)}generate(e){const r=e.getNodeProperties(this),i=this.setupVarying(e);if(r.propertyName===void 0){const a=this.getNodeType(e),o=e.getPropertyName(i,Dge.VERTEX);e.flowNodeFromShaderStage(Dge.VERTEX,this.node,a,o),r.propertyName=o}return e.getPropertyName(i)}}const Jp=Ct(mkt);pt("varying",Jp);const vkt=Xt(([n])=>{const e=n.mul(.9478672986).add(.0521327014).pow(2.4),r=n.mul(.0773993808),i=n.lessThanEqual(.04045);return ea(e,r,i)}).setLayout({name:"sRGBTransferEOTF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),ykt=Xt(([n])=>{const e=n.pow(.41666).mul(1.055).sub(.055),r=n.mul(12.92),i=n.lessThanEqual(.0031308);return ea(e,r,i)}).setLayout({name:"sRGBTransferOETF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),ZM="WorkingColorSpace",kZ="OutputColorSpace";class WL extends bo{static get type(){return"ColorSpaceNode"}constructor(e,r,i){super("vec4"),this.colorNode=e,this.source=r,this.target=i}resolveColorSpace(e,r){return r===ZM?Mr.workingColorSpace:r===kZ?e.context.outputColorSpace||e.renderer.outputColorSpace:r}setup(e){const{colorNode:r}=this,i=this.resolveColorSpace(e,this.source),a=this.resolveColorSpace(e,this.target);let o=r;return Mr.enabled===!1||i===a||!i||!a||(Mr.getTransfer(i)===mi&&(o=ur(vkt(o.rgb),o.a)),Mr.getPrimaries(i)!==Mr.getPrimaries(a)&&(o=ur(_l(Mr._getMatrix(new Zn,i,a)).mul(o.rgb),o.a)),Mr.getTransfer(a)===mi&&(o=ur(ykt(o.rgb),o.a))),o}}const bkt=n=>Ht(new WL(Ht(n),ZM,kZ)),xkt=n=>Ht(new WL(Ht(n),kZ,ZM)),_kt=(n,e)=>Ht(new WL(Ht(n),ZM,e)),WRe=(n,e)=>Ht(new WL(Ht(n),e,ZM));pt("toOutputColorSpace",bkt);pt("toWorkingColorSpace",xkt);pt("workingToColorSpace",_kt);pt("colorSpaceToWorking",WRe);let wkt=class extends XM{static get type(){return"ReferenceElementNode"}constructor(e,r){super(e,r),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const r=super.generate(e),i=this.referenceNode.getNodeType(),a=this.getNodeType();return e.format(r,i,a)}};class qRe extends fr{static get type(){return"ReferenceBaseNode"}constructor(e,r,i=null,a=null){super(),this.property=e,this.uniformType=r,this.object=i,this.count=a,this.properties=e.split("."),this.reference=i,this.node=null,this.group=null,this.updateType=Tr.OBJECT}setGroup(e){return this.group=e,this}element(e){return Ht(new wkt(this,Ht(e)))}setNodeType(e){const r=lr(null,e).getSelf();this.group!==null&&r.setGroup(this.group),this.node=r}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:r}=this;let i=e[r[0]];for(let a=1;a<r.length;a++)i=i[r[a]];return i}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const Skt=(n,e,r)=>Ht(new qRe(n,e,r));class Ekt extends qRe{static get type(){return"RendererReferenceNode"}constructor(e,r,i=null){super(e,r,i),this.renderer=i,this.setGroup(rr)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const Ckt=(n,e,r)=>Ht(new Ekt(n,e,r));class Mkt extends bo{static get type(){return"ToneMappingNode"}constructor(e,r=Akt,i=null){super("vec3"),this.toneMapping=e,this.exposureNode=r,this.colorNode=i}getCacheKey(){return pRe(super.getCacheKey(),this.toneMapping)}setup(e){const r=this.colorNode||e.context.color,i=this.toneMapping;if(i===tc)return r;let a=null;const o=e.renderer.library.getToneMappingFunction(i);return o!==null?a=ur(o(r.rgb,this.exposureNode),r.a):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",i),a=r),a}}const Tkt=(n,e,r)=>Ht(new Mkt(n,Ht(e),Ht(r))),Akt=Ckt("toneMappingExposure","float");pt("toneMapping",(n,e,r)=>Tkt(e,r,n));class Rkt extends CZ{static get type(){return"BufferAttributeNode"}constructor(e,r=null,i=0,a=0){super(e,r),this.isBufferNode=!0,this.bufferType=r,this.bufferStride=i,this.bufferOffset=a,this.usage=DO,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let r=e.globalCache.getData(this.value);return r===void 0&&(r={node:this},e.globalCache.setData(this.value,r)),r.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const r=this.getNodeType(e),i=this.value,a=e.getTypeLength(r),o=this.bufferStride||a,s=this.bufferOffset,l=i.isInterleavedBuffer===!0?i:new cZ(i,o),c=new PC(l,a,s);l.setUsage(this.usage),this.attribute=c,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const r=this.getNodeType(e),i=e.getBufferAttributeFromNode(this,r),a=e.getPropertyName(i);let o=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=a,o=a):o=Jp(this).build(e,r),o}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}const FZ=(n,e,r,i)=>Ht(new Rkt(n,e,r,i)),Pkt=(n,e,r,i)=>FZ(n,e,r,i).setUsage(Gb),jge=(n,e,r,i)=>FZ(n,e,r,i).setInstanced(!0),Hge=(n,e,r,i)=>Pkt(n,e,r,i).setInstanced(!0);pt("toAttribute",n=>FZ(n.value));class Nkt extends fr{static get type(){return"ComputeNode"}constructor(e,r,i=[64]){super("void"),this.isComputeNode=!0,this.computeNode=e,this.count=r,this.workgroupSize=i,this.dispatchCount=0,this.version=1,this.updateBeforeType=Tr.OBJECT,this.onInitFunction=null,this.updateDispatchCount()}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}updateDispatchCount(){const{count:e,workgroupSize:r}=this;let i=r[0];for(let a=1;a<r.length;a++)i*=r[a];this.dispatchCount=Math.ceil(e/i)}onInit(e){return this.onInitFunction=e,this}updateBefore({renderer:e}){e.compute(this)}generate(e){const{shaderStage:r}=e;if(r==="compute"){const i=this.computeNode.build(e,"void");i!==""&&e.addLineFlowCode(i,this)}}}const Okt=(n,e,r)=>Ht(new Nkt(Ht(n),e,r));pt("compute",Okt);class Ikt extends fr{static get type(){return"CacheNode"}constructor(e,r=!0){super(),this.node=e,this.parent=r,this.isCacheNode=!0}getNodeType(e){return this.node.getNodeType(e)}build(e,...r){const i=e.getCache(),a=e.getCacheFromNode(this,this.parent);e.setCache(a);const o=this.node.build(e,...r);return e.setCache(i),o}}const DP=(n,...e)=>Ht(new Ikt(Ht(n),...e));pt("cache",DP);class Dkt extends fr{static get type(){return"BypassNode"}constructor(e,r){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=r}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const r=this.callNode.build(e,"void");return r!==""&&e.addLineFlowCode(r,this),this.outputNode.build(e)}}const Lkt=Ct(Dkt);pt("bypass",Lkt);class YRe extends fr{static get type(){return"RemapNode"}constructor(e,r,i,a=ht(0),o=ht(1)){super(),this.node=e,this.inLowNode=r,this.inHighNode=i,this.outLowNode=a,this.outHighNode=o,this.doClamp=!0}setup(){const{node:e,inLowNode:r,inHighNode:i,outLowNode:a,outHighNode:o,doClamp:s}=this;let l=e.sub(r).div(i.sub(r));return s===!0&&(l=l.clamp()),l.mul(o.sub(a)).add(a)}}const kkt=Ct(YRe,null,null,{doClamp:!1}),Fkt=Ct(YRe);pt("remap",kkt);pt("remapClamp",Fkt);class XRe extends fr{static get type(){return"ExpressionNode"}constructor(e="",r="void"){super(r),this.snippet=e}generate(e,r){const i=this.getNodeType(e),a=this.snippet;if(i==="void")e.addLineFlowCode(a,this);else return e.format(`( ${a} )`,i,r)}}const LC=Ct(XRe),$kt=n=>(n?Xl(n,LC("discard")):LC("discard")).append();pt("discard",$kt);class Bkt extends bo{static get type(){return"RenderOutputNode"}constructor(e,r,i){super("vec4"),this.colorNode=e,this.toneMapping=r,this.outputColorSpace=i,this.isRenderOutput=!0}setup({context:e}){let r=this.colorNode||e.color;const i=(this.toneMapping!==null?this.toneMapping:e.toneMapping)||tc,a=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||Oc;return i!==tc&&(r=r.toneMapping(i)),a!==Oc&&a!==Mr.workingColorSpace&&(r=r.workingToColorSpace(a)),r}}const zkt=(n,e=null,r=null)=>Ht(new Bkt(Ht(n),e,r));pt("renderOutput",zkt);class Ukt extends fr{static get type(){return"AttributeNode"}constructor(e,r=null){super(r),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let r=this.nodeType;if(r===null){const i=this.getAttributeName(e);if(e.hasGeometryAttribute(i)){const a=e.geometry.getAttribute(i);r=e.getTypeFromAttribute(a)}else r="float"}return r}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const r=this.getAttributeName(e),i=this.getNodeType(e);if(e.hasGeometryAttribute(r)===!0){const o=e.geometry.getAttribute(r),s=e.getTypeFromAttribute(o),l=e.getAttribute(r,s);return e.shaderStage==="vertex"?e.format(l.name,s,i):Jp(this).build(e,i)}else return console.warn(`AttributeNode: Vertex attribute "${r}" not found on geometry.`),e.generateConst(i)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const Vp=(n,e)=>Ht(new Ukt(n,e)),qL=n=>Vp("uv"+(n>0?n:""),"vec2");class Vkt extends fr{static get type(){return"TextureSizeNode"}constructor(e,r=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=r}generate(e,r){const i=this.textureNode.build(e,"property"),a=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${i}, ${a} )`,this.getNodeType(e),r)}}const nE=Ct(Vkt);class Gkt extends KM{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=Tr.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,r=e.images,i=r&&r.length>0?r[0]&&r[0].image||r[0]:e.image;if(i&&i.width!==void 0){const{width:a,height:o}=i;this.value=Math.log2(Math.max(a,o))}}}const jkt=Ct(Gkt);class QM extends KM{static get type(){return"TextureNode"}constructor(e,r=null,i=null,a=null){super(e),this.isTextureNode=!0,this.uvNode=r,this.levelNode=i,this.biasNode=a,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=Tr.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this.setUpdateMatrix(r===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===Ca?"uvec4":this.value.type===Zo?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return qL(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=lr(this.value.matrix)),this._matrixUniform.mul(yt(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?Tr.FRAME:Tr.NONE,this}setupUV(e,r){const i=this.value;return e.isFlipY()&&(i.image instanceof ImageBitmap&&i.flipY===!0||i.isRenderTargetTexture===!0||i.isFramebufferTexture===!0||i.isDepthTexture===!0)&&(this.sampler?r=r.flipY():r=r.setY(Fa(nE(this,this.levelNode).y).sub(r.y).sub(1))),r}setup(e){const r=e.getNodeProperties(this);r.referenceNode=this.referenceNode;let i=this.uvNode;(i===null||e.context.forceUVContext===!0)&&e.context.getUV&&(i=e.context.getUV(this)),i||(i=this.getDefaultUV()),this.updateMatrix===!0&&(i=this.getTransformedUV(i)),i=this.setupUV(e,i);let a=this.levelNode;a===null&&e.context.getTextureLevel&&(a=e.context.getTextureLevel(this)),r.uvNode=i,r.levelNode=a,r.biasNode=this.biasNode,r.compareNode=this.compareNode,r.gradNode=this.gradNode,r.depthNode=this.depthNode}generateUV(e,r){return r.build(e,this.sampler===!0?"vec2":"ivec2")}generateSnippet(e,r,i,a,o,s,l,c){const u=this.value;let d;return a?d=e.generateTextureLevel(u,r,i,a,s):o?d=e.generateTextureBias(u,r,i,o,s):c?d=e.generateTextureGrad(u,r,i,c,s):l?d=e.generateTextureCompare(u,r,i,l,s):this.sampler===!1?d=e.generateTextureLoad(u,r,i,s):d=e.generateTexture(u,r,i,s),d}generate(e,r){const i=e.getNodeProperties(this),a=this.value;if(!a||a.isTexture!==!0)throw new Error("TextureNode: Need a three.js texture.");const o=super.generate(e,"property");if(r==="sampler")return o+"_sampler";if(e.isReference(r))return o;{const s=e.getDataFromNode(this);let l=s.propertyName;if(l===void 0){const{uvNode:d,levelNode:f,biasNode:h,compareNode:p,depthNode:g,gradNode:m}=i,v=this.generateUV(e,d),y=f?f.build(e,"float"):null,b=h?h.build(e,"float"):null,x=g?g.build(e,"int"):null,_=p?p.build(e,"float"):null,S=m?[m[0].build(e,"vec2"),m[1].build(e,"vec2")]:null,M=e.getVarFromNode(this);l=e.getPropertyName(M);const E=this.generateSnippet(e,o,v,y,b,x,_,S);e.addLineFlowCode(`${l} = ${E}`,this),s.snippet=E,s.propertyName=l}let c=l;const u=this.getNodeType(e);return e.needsToWorkingColorSpace(a)&&(c=WRe(LC(c,u),a.colorSpace).setup(e).build(e,u)),e.format(c,u,r)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){const r=this.clone();return r.uvNode=Ht(e),r.referenceNode=this.getSelf(),Ht(r)}blur(e){const r=this.clone();return r.biasNode=Ht(e).mul(jkt(r)),r.referenceNode=this.getSelf(),Ht(r)}level(e){const r=this.clone();return r.levelNode=Ht(e),r.referenceNode=this.getSelf(),Ht(r)}size(e){return nE(this,e)}bias(e){const r=this.clone();return r.biasNode=Ht(e),r.referenceNode=this.getSelf(),Ht(r)}compare(e){const r=this.clone();return r.compareNode=Ht(e),r.referenceNode=this.getSelf(),Ht(r)}grad(e,r){const i=this.clone();return i.gradNode=[Ht(e),Ht(r)],i.referenceNode=this.getSelf(),Ht(i)}depth(e){const r=this.clone();return r.depthNode=Ht(e),r.referenceNode=this.getSelf(),Ht(r)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,r=this._matrixUniform;r!==null&&(r.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e}}const ni=Ct(QM),xd=(...n)=>ni(...n).setSampler(!1),g0=lr("float").label("cameraNear").setGroup(rr).onRenderUpdate(({camera:n})=>n.near),m0=lr("float").label("cameraFar").setGroup(rr).onRenderUpdate(({camera:n})=>n.far),XO=lr("mat4").label("cameraProjectionMatrix").setGroup(rr).onRenderUpdate(({camera:n})=>n.projectionMatrix),eg=lr("mat4").label("cameraViewMatrix").setGroup(rr).onRenderUpdate(({camera:n})=>n.matrixWorldInverse),Hkt=lr(new ge).label("cameraPosition").setGroup(rr).onRenderUpdate(({camera:n},e)=>e.value.setFromMatrixPosition(n.matrixWorld));class ii extends fr{static get type(){return"Object3DNode"}constructor(e,r=null){super(),this.scope=e,this.object3d=r,this.updateType=Tr.OBJECT,this._uniformNode=new KM(null)}getNodeType(){const e=this.scope;if(e===ii.WORLD_MATRIX)return"mat4";if(e===ii.POSITION||e===ii.VIEW_POSITION||e===ii.DIRECTION||e===ii.SCALE)return"vec3"}update(e){const r=this.object3d,i=this._uniformNode,a=this.scope;if(a===ii.WORLD_MATRIX)i.value=r.matrixWorld;else if(a===ii.POSITION)i.value=i.value||new ge,i.value.setFromMatrixPosition(r.matrixWorld);else if(a===ii.SCALE)i.value=i.value||new ge,i.value.setFromMatrixScale(r.matrixWorld);else if(a===ii.DIRECTION)i.value=i.value||new ge,r.getWorldDirection(i.value);else if(a===ii.VIEW_POSITION){const o=e.camera;i.value=i.value||new ge,i.value.setFromMatrixPosition(r.matrixWorld),i.value.applyMatrix4(o.matrixWorldInverse)}}generate(e){const r=this.scope;return r===ii.WORLD_MATRIX?this._uniformNode.nodeType="mat4":(r===ii.POSITION||r===ii.VIEW_POSITION||r===ii.DIRECTION||r===ii.SCALE)&&(this._uniformNode.nodeType="vec3"),this._uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}ii.WORLD_MATRIX="worldMatrix";ii.POSITION="position";ii.SCALE="scale";ii.VIEW_POSITION="viewPosition";ii.DIRECTION="direction";ii.DIRECTION;ii.WORLD_MATRIX;const Wkt=Ct(ii,ii.POSITION);ii.SCALE;ii.VIEW_POSITION;class sh extends ii{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}sh.DIRECTION;const Ry=Kt(sh,sh.WORLD_MATRIX);sh.POSITION;sh.SCALE;sh.VIEW_POSITION;const qkt=lr(new Zn).onObjectUpdate(({object:n},e)=>e.value.getNormalMatrix(n.matrixWorld)),YL=eg.mul(Ry).toVar("modelViewMatrix"),KRe=Vp("position","vec3"),xs=KRe.varying("positionLocal"),Wge=KRe.varying("positionPrevious"),kC=Ry.mul(xs).xyz.varying("v_positionWorld"),ZRe=xs.transformDirection(Ry).varying("v_positionWorldDirection").normalize().toVar("positionWorldDirection"),No=YL.mul(xs).xyz.varying("v_positionView"),Ma=No.negate().varying("v_positionViewDirection").normalize().toVar("positionViewDirection");class Ykt extends fr{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){const{renderer:r,material:i}=e;return r.coordinateSystem===ku&&i.side===va?"false":e.getFrontFacing()}}const Xkt=Kt(Ykt),XL=ht(Xkt).mul(2).sub(1),QRe=Vp("normal","vec3"),lh=Xt(n=>n.geometry.hasAttribute("normal")===!1?(console.warn('TSL.NormalNode: Vertex attribute "normal" not found on geometry.'),yt(0,1,0)):QRe,"vec3").once()().toVar("normalLocal"),Kkt=No.dFdx().cross(No.dFdy()).normalize().toVar("normalFlat"),Jd=Xt(n=>{let e;return n.material.flatShading===!0?e=Kkt:e=Jp(ePe(lh),"v_normalView").normalize(),e},"vec3").once()().toVar("normalView"),JRe=Jp(Jd.transformDirection(eg),"v_normalWorld").normalize().toVar("normalWorld"),co=Xt(n=>n.context.setupNormal(),"vec3").once()().mul(XL).toVar("transformedNormalView"),$Z=co.transformDirection(eg).toVar("transformedNormalWorld"),_2=Xt(n=>n.context.setupClearcoatNormal(),"vec3").once()().mul(XL).toVar("transformedClearcoatNormalView"),Zkt=Xt(([n,e=Ry])=>{const r=_l(e),i=n.div(yt(r[0].dot(r[0]),r[1].dot(r[1]),r[2].dot(r[2])));return r.mul(i).xyz}),ePe=Xt(([n],e)=>{const r=e.renderer.nodes.modelNormalViewMatrix;if(r!==null)return r.transformDirection(n);const i=qkt.mul(n);return eg.transformDirection(i)}),Qkt=lr(0).onReference(({material:n})=>n).onRenderUpdate(({material:n})=>n.refractionRatio),Jkt=Ma.negate().reflect(co),e5t=Ma.negate().refract(co,Qkt),t5t=Jkt.transformDirection(eg).toVar("reflectVector"),n5t=e5t.transformDirection(eg).toVar("reflectVector");class r5t extends QM{static get type(){return"CubeTextureNode"}constructor(e,r=null,i=null,a=null){super(e,r,i,a),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===qu?t5t:e.mapping===Yu?n5t:(console.error('THREE.CubeTextureNode: Mapping "%s" not supported.',e.mapping),yt(0,0,0))}setUpdateMatrix(){}setupUV(e,r){const i=this.value;return e.renderer.coordinateSystem===Ty||!i.isRenderTargetTexture?yt(r.x.negate(),r.yz):r}generateUV(e,r){return r.build(e,"vec3")}}const FC=Ct(r5t);class tPe extends KM{static get type(){return"BufferNode"}constructor(e,r,i=0){super(e,r),this.isBufferNode=!0,this.bufferType=r,this.bufferCount=i}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const BZ=(n,e,r)=>Ht(new tPe(n,e,r));class i5t extends XM{static get type(){return"UniformArrayElementNode"}constructor(e,r){super(e,r),this.isArrayBufferElementNode=!0}generate(e){const r=super.generate(e),i=this.getNodeType();return e.format(r,"vec4",i)}}class a5t extends tPe{static get type(){return"UniformArrayNode"}constructor(e,r=null){super(null,"vec4"),this.array=e,this.elementType=r,this._elementType=null,this._elementLength=0,this.updateType=Tr.RENDER,this.isArrayBufferNode=!0}getElementType(){return this.elementType||this._elementType}getElementLength(){return this._elementLength}update(){const{array:e,value:r}=this,i=this.getElementLength(),a=this.getElementType();if(i===1)for(let o=0;o<e.length;o++){const s=o*4;r[s]=e[o]}else if(a==="color")for(let o=0;o<e.length;o++){const s=o*4,l=e[o];r[s]=l.r,r[s+1]=l.g,r[s+2]=l.b||0}else for(let o=0;o<e.length;o++){const s=o*4,l=e[o];r[s]=l.x,r[s+1]=l.y,r[s+2]=l.z||0,r[s+3]=l.w||0}}setup(e){const r=this.array.length;this._elementType=this.elementType===null?VO(this.array[0]):this.elementType,this._elementLength=e.getTypeLength(this._elementType);let i=Float32Array;return this._elementType.charAt(0)==="i"?i=Int32Array:this._elementType.charAt(0)==="u"&&(i=Uint32Array),this.value=new i(r*4),this.bufferCount=r,this.bufferType=e.changeComponentType("vec4",e.getComponentType(this._elementType)),super.setup(e)}element(e){return Ht(new i5t(this,Ht(e)))}}const qg=(n,e)=>Ht(new a5t(n,e));class o5t extends XM{static get type(){return"ReferenceElementNode"}constructor(e,r){super(e,r),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const r=super.generate(e),i=this.referenceNode.getNodeType(),a=this.getNodeType();return e.format(r,i,a)}}class zZ extends fr{static get type(){return"ReferenceNode"}constructor(e,r,i=null,a=null){super(),this.property=e,this.uniformType=r,this.object=i,this.count=a,this.properties=e.split("."),this.reference=i,this.node=null,this.group=null,this.name=null,this.updateType=Tr.OBJECT}element(e){return Ht(new o5t(this,Ht(e)))}setGroup(e){return this.group=e,this}label(e){return this.name=e,this}setNodeType(e){let r=null;this.count!==null?r=BZ(null,e,this.count):Array.isArray(this.getValueFromReference())?r=qg(null,e):e==="texture"?r=ni(null):e==="cubeTexture"?r=FC(null):r=lr(null,e),this.group!==null&&r.setGroup(this.group),this.name!==null&&r.label(this.name),this.node=r.getSelf()}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:r}=this;let i=e[r[0]];for(let a=1;a<r.length;a++)i=i[r[a]];return i}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const Si=(n,e,r)=>Ht(new zZ(n,e,r)),qge=(n,e,r,i)=>Ht(new zZ(n,e,i,r));class s5t extends zZ{static get type(){return"MaterialReferenceNode"}constructor(e,r,i=null){super(e,r,i),this.material=i,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const Yg=(n,e,r)=>Ht(new s5t(n,e,r)),nPe=Xt(n=>(n.geometry.hasAttribute("tangent")===!1&&n.geometry.computeTangents(),Vp("tangent","vec4")))(),UZ=nPe.xyz.toVar("tangentLocal"),rPe=YL.mul(ur(UZ,0)).xyz.varying("v_tangentView").normalize().toVar("tangentView"),l5t=n=>n.mul(nPe.w).xyz,c5t=Jp(l5t(Jd.cross(rPe)),"v_bitangentView").normalize().toVar("bitangentView"),w2=_l(rPe,c5t,Jd),u5t=(()=>{let n=xx.cross(Ma);return n=n.cross(xx).normalize(),n=ea(n,co,t0.mul(ip.oneMinus()).oneMinus().pow2().pow2()).normalize(),n})(),d5t=Xt(n=>{const{eye_pos:e,surf_norm:r,mapN:i,uv:a}=n,o=e.dFdx(),s=e.dFdy(),l=a.dFdx(),c=a.dFdy(),u=r,d=s.cross(u),f=u.cross(o),h=d.mul(l.x).add(f.mul(c.x)),p=d.mul(l.y).add(f.mul(c.y)),g=h.dot(h).max(p.dot(p)),m=XL.mul(g.inverseSqrt());return wl(h.mul(i.x,m),p.mul(i.y,m),u.mul(i.z)).normalize()});class f5t extends bo{static get type(){return"NormalMapNode"}constructor(e,r=null){super("vec3"),this.node=e,this.scaleNode=r,this.normalMapType=Bp}setup(e){const{normalMapType:r,scaleNode:i}=this;let a=this.node.mul(2).sub(1);i!==null&&(a=yt(a.xy.mul(i),a.z));let o=null;return r===eAe?o=ePe(a):r===Bp&&(e.hasGeometryAttribute("tangent")===!0?o=w2.mul(a).normalize():o=d5t({eye_pos:No,surf_norm:Jd,mapN:a,uv:qL()})),o}}const Yge=Ct(f5t),h5t=Xt(({textureNode:n,bumpScale:e})=>{const r=a=>n.cache().context({getUV:o=>a(o.uvNode||qL()),forceUVContext:!0}),i=ht(r(a=>a));return Jt(ht(r(a=>a.add(a.dFdx()))).sub(i),ht(r(a=>a.add(a.dFdy()))).sub(i)).mul(e)}),p5t=Xt(n=>{const{surf_pos:e,surf_norm:r,dHdxy:i}=n,a=e.dFdx().normalize(),o=e.dFdy().normalize(),s=r,l=o.cross(s),c=s.cross(a),u=a.dot(l).mul(XL),d=u.sign().mul(i.x.mul(l).add(i.y.mul(c)));return u.abs().mul(r).sub(d).normalize()});class g5t extends bo{static get type(){return"BumpMapNode"}constructor(e,r=null){super("vec3"),this.textureNode=e,this.scaleNode=r}setup(){const e=this.scaleNode!==null?this.scaleNode:1,r=h5t({textureNode:this.textureNode,bumpScale:e});return p5t({surf_pos:No,surf_norm:Jd,dHdxy:r})}}const m5t=Ct(g5t),Xge=new Map;class ct extends fr{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,r){let i=Xge.get(e);return i===void 0&&(i=Yg(e,r),Xge.set(e,i)),i}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const r=e.context.material,i=this.scope;let a=null;if(i===ct.COLOR){const o=r.color!==void 0?this.getColor(i):yt();r.map&&r.map.isTexture===!0?a=o.mul(this.getTexture("map")):a=o}else if(i===ct.OPACITY){const o=this.getFloat(i);r.alphaMap&&r.alphaMap.isTexture===!0?a=o.mul(this.getTexture("alpha")):a=o}else if(i===ct.SPECULAR_STRENGTH)r.specularMap&&r.specularMap.isTexture===!0?a=this.getTexture("specular").r:a=ht(1);else if(i===ct.SPECULAR_INTENSITY){const o=this.getFloat(i);r.specularMap?a=o.mul(this.getTexture(i).a):a=o}else if(i===ct.SPECULAR_COLOR){const o=this.getColor(i);r.specularColorMap&&r.specularColorMap.isTexture===!0?a=o.mul(this.getTexture(i).rgb):a=o}else if(i===ct.ROUGHNESS){const o=this.getFloat(i);r.roughnessMap&&r.roughnessMap.isTexture===!0?a=o.mul(this.getTexture(i).g):a=o}else if(i===ct.METALNESS){const o=this.getFloat(i);r.metalnessMap&&r.metalnessMap.isTexture===!0?a=o.mul(this.getTexture(i).b):a=o}else if(i===ct.EMISSIVE){const o=this.getFloat("emissiveIntensity"),s=this.getColor(i).mul(o);r.emissiveMap&&r.emissiveMap.isTexture===!0?a=s.mul(this.getTexture(i)):a=s}else if(i===ct.NORMAL)r.normalMap?(a=Yge(this.getTexture("normal"),this.getCache("normalScale","vec2")),a.normalMapType=r.normalMapType):r.bumpMap?a=m5t(this.getTexture("bump").r,this.getFloat("bumpScale")):a=Jd;else if(i===ct.CLEARCOAT){const o=this.getFloat(i);r.clearcoatMap&&r.clearcoatMap.isTexture===!0?a=o.mul(this.getTexture(i).r):a=o}else if(i===ct.CLEARCOAT_ROUGHNESS){const o=this.getFloat(i);r.clearcoatRoughnessMap&&r.clearcoatRoughnessMap.isTexture===!0?a=o.mul(this.getTexture(i).r):a=o}else if(i===ct.CLEARCOAT_NORMAL)r.clearcoatNormalMap?a=Yge(this.getTexture(i),this.getCache(i+"Scale","vec2")):a=Jd;else if(i===ct.SHEEN){const o=this.getColor("sheenColor").mul(this.getFloat("sheen"));r.sheenColorMap&&r.sheenColorMap.isTexture===!0?a=o.mul(this.getTexture("sheenColor").rgb):a=o}else if(i===ct.SHEEN_ROUGHNESS){const o=this.getFloat(i);r.sheenRoughnessMap&&r.sheenRoughnessMap.isTexture===!0?a=o.mul(this.getTexture(i).a):a=o,a=a.clamp(.07,1)}else if(i===ct.ANISOTROPY)if(r.anisotropyMap&&r.anisotropyMap.isTexture===!0){const o=this.getTexture(i);a=RZ(DS.x,DS.y,DS.y.negate(),DS.x).mul(o.rg.mul(2).sub(Jt(1)).normalize().mul(o.b))}else a=DS;else if(i===ct.IRIDESCENCE_THICKNESS){const o=Si("1","float",r.iridescenceThicknessRange);if(r.iridescenceThicknessMap){const s=Si("0","float",r.iridescenceThicknessRange);a=o.sub(s).mul(this.getTexture(i).g).add(s)}else a=o}else if(i===ct.TRANSMISSION){const o=this.getFloat(i);r.transmissionMap?a=o.mul(this.getTexture(i).r):a=o}else if(i===ct.THICKNESS){const o=this.getFloat(i);r.thicknessMap?a=o.mul(this.getTexture(i).g):a=o}else if(i===ct.IOR)a=this.getFloat(i);else if(i===ct.LIGHT_MAP)a=this.getTexture(i).rgb.mul(this.getFloat("lightMapIntensity"));else if(i===ct.AO_MAP)a=this.getTexture(i).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else{const o=this.getNodeType(e);a=this.getCache(i,o)}return a}}ct.ALPHA_TEST="alphaTest";ct.COLOR="color";ct.OPACITY="opacity";ct.SHININESS="shininess";ct.SPECULAR="specular";ct.SPECULAR_STRENGTH="specularStrength";ct.SPECULAR_INTENSITY="specularIntensity";ct.SPECULAR_COLOR="specularColor";ct.REFLECTIVITY="reflectivity";ct.ROUGHNESS="roughness";ct.METALNESS="metalness";ct.NORMAL="normal";ct.CLEARCOAT="clearcoat";ct.CLEARCOAT_ROUGHNESS="clearcoatRoughness";ct.CLEARCOAT_NORMAL="clearcoatNormal";ct.EMISSIVE="emissive";ct.ROTATION="rotation";ct.SHEEN="sheen";ct.SHEEN_ROUGHNESS="sheenRoughness";ct.ANISOTROPY="anisotropy";ct.IRIDESCENCE="iridescence";ct.IRIDESCENCE_IOR="iridescenceIOR";ct.IRIDESCENCE_THICKNESS="iridescenceThickness";ct.IOR="ior";ct.TRANSMISSION="transmission";ct.THICKNESS="thickness";ct.ATTENUATION_DISTANCE="attenuationDistance";ct.ATTENUATION_COLOR="attenuationColor";ct.LINE_SCALE="scale";ct.LINE_DASH_SIZE="dashSize";ct.LINE_GAP_SIZE="gapSize";ct.LINE_WIDTH="linewidth";ct.LINE_DASH_OFFSET="dashOffset";ct.POINT_WIDTH="pointWidth";ct.DISPERSION="dispersion";ct.LIGHT_MAP="light";ct.AO_MAP="ao";const v5t=Kt(ct,ct.ALPHA_TEST),y5t=Kt(ct,ct.COLOR),b5t=Kt(ct,ct.SHININESS),x5t=Kt(ct,ct.EMISSIVE),iPe=Kt(ct,ct.OPACITY),_5t=Kt(ct,ct.SPECULAR),Kge=Kt(ct,ct.SPECULAR_INTENSITY),w5t=Kt(ct,ct.SPECULAR_COLOR),LP=Kt(ct,ct.SPECULAR_STRENGTH),Gz=Kt(ct,ct.REFLECTIVITY),S5t=Kt(ct,ct.ROUGHNESS),E5t=Kt(ct,ct.METALNESS),C5t=Kt(ct,ct.NORMAL).context({getUV:null}),M5t=Kt(ct,ct.CLEARCOAT),T5t=Kt(ct,ct.CLEARCOAT_ROUGHNESS),A5t=Kt(ct,ct.CLEARCOAT_NORMAL).context({getUV:null}),R5t=Kt(ct,ct.ROTATION),P5t=Kt(ct,ct.SHEEN),N5t=Kt(ct,ct.SHEEN_ROUGHNESS),O5t=Kt(ct,ct.ANISOTROPY),I5t=Kt(ct,ct.IRIDESCENCE),D5t=Kt(ct,ct.IRIDESCENCE_IOR),L5t=Kt(ct,ct.IRIDESCENCE_THICKNESS),k5t=Kt(ct,ct.TRANSMISSION),F5t=Kt(ct,ct.THICKNESS),$5t=Kt(ct,ct.IOR),B5t=Kt(ct,ct.ATTENUATION_DISTANCE),z5t=Kt(ct,ct.ATTENUATION_COLOR),U5t=Kt(ct,ct.LINE_SCALE),V5t=Kt(ct,ct.LINE_DASH_SIZE),G5t=Kt(ct,ct.LINE_GAP_SIZE);ct.LINE_WIDTH;const j5t=Kt(ct,ct.LINE_DASH_OFFSET);ct.POINT_WIDTH;const H5t=Kt(ct,ct.DISPERSION),aPe=Kt(ct,ct.LIGHT_MAP),W5t=Kt(ct,ct.AO_MAP),DS=lr(new Nt).onReference(function(n){return n.material}).onRenderUpdate(function({material:n}){this.value.set(n.anisotropy*Math.cos(n.anisotropyRotation),n.anisotropy*Math.sin(n.anisotropyRotation))});class q5t extends bo{static get type(){return"ModelViewProjectionNode"}constructor(e=null){super("vec4"),this.positionNode=e}setup(e){if(e.shaderStage==="fragment")return Jp(e.context.mvp);const r=this.positionNode||xs,i=e.renderer.nodes.modelViewMatrix||YL;return XO.mul(i).mul(r)}}const oPe=Ct(q5t);class ta extends fr{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isInstanceIndexNode=!0}generate(e){const r=this.getNodeType(e),i=this.scope;let a;if(i===ta.VERTEX)a=e.getVertexIndex();else if(i===ta.INSTANCE)a=e.getInstanceIndex();else if(i===ta.DRAW)a=e.getDrawIndex();else if(i===ta.INVOCATION_LOCAL)a=e.getInvocationLocalIndex();else if(i===ta.INVOCATION_SUBGROUP)a=e.getInvocationSubgroupIndex();else if(i===ta.SUBGROUP)a=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+i);let o;return e.shaderStage==="vertex"||e.shaderStage==="compute"?o=a:o=Jp(this).build(e,r),o}}ta.VERTEX="vertex";ta.INSTANCE="instance";ta.SUBGROUP="subgroup";ta.INVOCATION_LOCAL="invocationLocal";ta.INVOCATION_SUBGROUP="invocationSubgroup";ta.DRAW="draw";const Y5t=Kt(ta,ta.VERTEX),VZ=Kt(ta,ta.INSTANCE);ta.SUBGROUP;ta.INVOCATION_SUBGROUP;ta.INVOCATION_LOCAL;const X5t=Kt(ta,ta.DRAW);class K5t extends fr{static get type(){return"InstanceNode"}constructor(e,r,i){super("void"),this.count=e,this.instanceMatrix=r,this.instanceColor=i,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=Tr.FRAME,this.buffer=null,this.bufferColor=null}setup(e){const{count:r,instanceMatrix:i,instanceColor:a}=this;let{instanceMatrixNode:o,instanceColorNode:s}=this;if(o===null){if(r<=1e3)o=BZ(i.array,"mat4",Math.max(r,1)).element(VZ);else{const c=new rRt(i.array,16,1);this.buffer=c;const u=i.usage===Gb?Hge:jge,d=[u(c,"vec4",16,0),u(c,"vec4",16,4),u(c,"vec4",16,8),u(c,"vec4",16,12)];o=bx(...d)}this.instanceMatrixNode=o}if(a&&s===null){const c=new pAt(a.array,3),u=a.usage===Gb?Hge:jge;this.bufferColor=c,s=yt(u(c,"vec3",3,0)),this.instanceColorNode=s}const l=o.mul(xs).xyz;if(xs.assign(l),e.hasGeometryAttribute("normal")){const c=Zkt(lh,o);lh.assign(c)}this.instanceColorNode!==null&&jO("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){this.instanceMatrix.usage!==Gb&&this.buffer!=null&&this.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMatrix.version),this.instanceColor&&this.instanceColor.usage!==Gb&&this.bufferColor!=null&&this.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceColor.version)}}class Z5t extends K5t{static get type(){return"InstancedMeshNode"}constructor(e){const{count:r,instanceMatrix:i,instanceColor:a}=e;super(r,i,a),this.instanceMesh=e}}const Q5t=Ct(Z5t);class J5t extends fr{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(e.getDrawIndex()===null?this.batchingIdNode=VZ:this.batchingIdNode=X5t);const i=Xt(([g])=>{const m=nE(xd(this.batchMesh._indirectTexture),0),v=Fa(g).modInt(Fa(m)),y=Fa(g).div(Fa(m));return xd(this.batchMesh._indirectTexture,Kh(v,y)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(Fa(this.batchingIdNode)),a=this.batchMesh._matricesTexture,o=nE(xd(a),0),s=ht(i).mul(4).toInt().toVar(),l=s.modInt(o),c=s.div(Fa(o)),u=bx(xd(a,Kh(l,c)),xd(a,Kh(l.add(1),c)),xd(a,Kh(l.add(2),c)),xd(a,Kh(l.add(3),c))),d=this.batchMesh._colorsTexture;if(d!==null){const m=Xt(([v])=>{const y=nE(xd(d),0).x,b=v,x=b.modInt(y),_=b.div(y);return xd(d,Kh(x,_)).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(i);jO("vec3","vBatchColor").assign(m)}const f=_l(u);xs.assign(u.mul(xs));const h=lh.div(yt(f[0].dot(f[0]),f[1].dot(f[1]),f[2].dot(f[2]))),p=f.mul(h).xyz;lh.assign(p),e.hasGeometryAttribute("tangent")&&UZ.mulAssign(f)}}const eFt=Ct(J5t),Zge=new WeakMap;class tFt extends fr{static get type(){return"SkinningNode"}constructor(e,r=!1){super("void"),this.skinnedMesh=e,this.useReference=r,this.updateType=Tr.OBJECT,this.skinIndexNode=Vp("skinIndex","uvec4"),this.skinWeightNode=Vp("skinWeight","vec4");let i,a,o;r?(i=Si("bindMatrix","mat4"),a=Si("bindMatrixInverse","mat4"),o=qge("skeleton.boneMatrices","mat4",e.skeleton.bones.length)):(i=lr(e.bindMatrix,"mat4"),a=lr(e.bindMatrixInverse,"mat4"),o=BZ(e.skeleton.boneMatrices,"mat4",e.skeleton.bones.length)),this.bindMatrixNode=i,this.bindMatrixInverseNode=a,this.boneMatricesNode=o,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,r=xs){const{skinIndexNode:i,skinWeightNode:a,bindMatrixNode:o,bindMatrixInverseNode:s}=this,l=e.element(i.x),c=e.element(i.y),u=e.element(i.z),d=e.element(i.w),f=o.mul(r),h=wl(l.mul(a.x).mul(f),c.mul(a.y).mul(f),u.mul(a.z).mul(f),d.mul(a.w).mul(f));return s.mul(h).xyz}getSkinnedNormal(e=this.boneMatricesNode,r=lh){const{skinIndexNode:i,skinWeightNode:a,bindMatrixNode:o,bindMatrixInverseNode:s}=this,l=e.element(i.x),c=e.element(i.y),u=e.element(i.z),d=e.element(i.w);let f=wl(a.x.mul(l),a.y.mul(c),a.z.mul(u),a.w.mul(d));return f=s.mul(f).mul(o),f.transformDirection(r).xyz}getPreviousSkinnedPosition(e){const r=e.object;return this.previousBoneMatricesNode===null&&(r.skeleton.previousBoneMatrices=new Float32Array(r.skeleton.boneMatrices),this.previousBoneMatricesNode=qge("skeleton.previousBoneMatrices","mat4",r.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,Wge)}needsPreviousBoneMatrices(e){const r=e.renderer.getMRT();return r&&r.has("velocity")}setup(e){this.needsPreviousBoneMatrices(e)&&Wge.assign(this.getPreviousSkinnedPosition(e));const r=this.getSkinnedPosition();if(xs.assign(r),e.hasGeometryAttribute("normal")){const i=this.getSkinnedNormal();lh.assign(i),e.hasGeometryAttribute("tangent")&&UZ.assign(i)}}generate(e,r){if(r!=="void")return xs.build(e,r)}update(e){const i=(this.useReference?e.object:this.skinnedMesh).skeleton;Zge.get(i)!==e.frameId&&(Zge.set(i,e.frameId),this.previousBoneMatricesNode!==null&&i.previousBoneMatrices.set(i.boneMatrices),i.update())}}const nFt=n=>Ht(new tFt(n,!0));class rFt extends fr{static get type(){return"LoopNode"}constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const r=e.getNodeProperties(this);if(r.stackNode!==void 0)return r;const i={};for(let o=0,s=this.params.length-1;o<s;o++){const l=this.params[o],c=l.isNode!==!0&&l.name||this.getVarName(o),u=l.isNode!==!0&&l.type||"int";i[c]=LC(c,u)}const a=e.addStack();return r.returnsNode=this.params[this.params.length-1](i,a,e),r.stackNode=a,e.removeStack(),r}getNodeType(e){const{returnsNode:r}=this.getProperties(e);return r?r.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const r=this.getProperties(e),i=this.params,a=r.stackNode;for(let l=0,c=i.length-1;l<c;l++){const u=i[l];let d=null,f=null,h=null,p=null,g=null,m=null;u.isNode?(p="int",h=this.getVarName(l),d="0",f=u.build(e,p),g="<"):(p=u.type||"int",h=u.name||this.getVarName(l),d=u.start,f=u.end,g=u.condition,m=u.update,typeof d=="number"?d=e.generateConst(p,d):d&&d.isNode&&(d=d.build(e,p)),typeof f=="number"?f=e.generateConst(p,f):f&&f.isNode&&(f=f.build(e,p)),d!==void 0&&f===void 0?(d=d+" - 1",f="0",g=">="):f!==void 0&&d===void 0&&(d="0",g="<"),g===void 0&&(Number(d)>Number(f)?g=">=":g="<"));const v={start:d,end:f},y=v.start,b=v.end;let x="",_="",S="";m||(p==="int"||p==="uint"?g.includes("<")?m="++":m="--":g.includes("<")?m="+= 1.":m="-= 1."),x+=e.getVar(p,h)+" = "+y,_+=h+" "+g+" "+b,S+=h+" "+m;const M=`for ( ${x}; ${_}; ${S} )`;e.addFlowCode((l===0?`
`:"")+e.tab+M+` {

`).addFlowTab()}const o=a.build(e,"void"),s=r.returnsNode?r.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+o);for(let l=0,c=this.params.length-1;l<c;l++)e.addFlowCode((l===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),s}}const kd=(...n)=>Ht(new rFt(yx(n,"int"))).append(),iFt=()=>LC("break").append(),jz=new WeakMap,bc=new sr,Qge=Xt(({bufferMap:n,influence:e,stride:r,width:i,depth:a,offset:o})=>{const s=Fa(Y5t).mul(r).add(o),l=s.div(i),c=s.sub(l.mul(i));return xd(n,Kh(c,l)).depth(a).mul(e)});function aFt(n){const e=n.morphAttributes.position!==void 0,r=n.morphAttributes.normal!==void 0,i=n.morphAttributes.color!==void 0,a=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,o=a!==void 0?a.length:0;let s=jz.get(n);if(s===void 0||s.count!==o){let y=function(){m.dispose(),jz.delete(n),n.removeEventListener("dispose",y)};s!==void 0&&s.texture.dispose();const l=n.morphAttributes.position||[],c=n.morphAttributes.normal||[],u=n.morphAttributes.color||[];let d=0;e===!0&&(d=1),r===!0&&(d=2),i===!0&&(d=3);let f=n.attributes.position.count*d,h=1;const p=4096;f>p&&(h=Math.ceil(f/p),f=p);const g=new Float32Array(f*h*4*o),m=new iZ(g,f,h,o);m.type=Ka,m.needsUpdate=!0;const v=d*4;for(let b=0;b<o;b++){const x=l[b],_=c[b],S=u[b],M=f*h*4*b;for(let E=0;E<x.count;E++){const T=E*v;e===!0&&(bc.fromBufferAttribute(x,E),g[M+T+0]=bc.x,g[M+T+1]=bc.y,g[M+T+2]=bc.z,g[M+T+3]=0),r===!0&&(bc.fromBufferAttribute(_,E),g[M+T+4]=bc.x,g[M+T+5]=bc.y,g[M+T+6]=bc.z,g[M+T+7]=0),i===!0&&(bc.fromBufferAttribute(S,E),g[M+T+8]=bc.x,g[M+T+9]=bc.y,g[M+T+10]=bc.z,g[M+T+11]=S.itemSize===4?bc.w:1)}}s={count:o,texture:m,stride:d,size:new Nt(f,h)},jz.set(n,s),n.addEventListener("dispose",y)}return s}class oFt extends fr{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=lr(1),this.updateType=Tr.OBJECT}setup(e){const{geometry:r}=e,i=r.morphAttributes.position!==void 0,a=r.hasAttribute("normal")&&r.morphAttributes.normal!==void 0,o=r.morphAttributes.position||r.morphAttributes.normal||r.morphAttributes.color,s=o!==void 0?o.length:0,{texture:l,stride:c,size:u}=aFt(r);i===!0&&xs.mulAssign(this.morphBaseInfluence),a===!0&&lh.mulAssign(this.morphBaseInfluence);const d=Fa(u.width);kd(s,({i:f})=>{const h=ht(0).toVar();this.mesh.count>1&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?h.assign(xd(this.mesh.morphTexture,Kh(Fa(f).add(1),Fa(VZ))).r):h.assign(Si("morphTargetInfluences","float").element(f).toVar()),i===!0&&xs.addAssign(Qge({bufferMap:l,influence:h,stride:c,width:d,depth:f,offset:Fa(0)})),a===!0&&lh.addAssign(Qge({bufferMap:l,influence:h,stride:c,width:d,depth:f,offset:Fa(1)}))})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((r,i)=>r+i,0)}}const sFt=Ct(oFt);class mw extends fr{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}generate(){console.warn("Abstract function.")}}class lFt extends mw{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}class cFt extends GRe{static get type(){return"LightingContextNode"}constructor(e,r=null,i=null,a=null){super(e),this.lightingModel=r,this.backdropNode=i,this.backdropAlphaNode=a,this._value=null}getContext(){const{backdropNode:e,backdropAlphaNode:r}=this,i=yt().toVar("directDiffuse"),a=yt().toVar("directSpecular"),o=yt().toVar("indirectDiffuse"),s=yt().toVar("indirectSpecular"),l={directDiffuse:i,directSpecular:a,indirectDiffuse:o,indirectSpecular:s};return{radiance:yt().toVar("radiance"),irradiance:yt().toVar("irradiance"),iblIrradiance:yt().toVar("iblIrradiance"),ambientOcclusion:ht(1).toVar("ambientOcclusion"),reflectedLight:l,backdrop:e,backdropAlpha:r}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const uFt=Ct(cFt);class dFt extends mw{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}let LS,kS;class io extends fr{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===io.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=Tr.NONE;return(this.scope===io.SIZE||this.scope===io.VIEWPORT)&&(e=Tr.RENDER),this.updateType=e,e}update({renderer:e}){const r=e.getRenderTarget();this.scope===io.VIEWPORT?r!==null?kS.copy(r.viewport):(e.getViewport(kS),kS.multiplyScalar(e.getPixelRatio())):r!==null?(LS.width=r.width,LS.height=r.height):e.getDrawingBufferSize(LS)}setup(){const e=this.scope;let r=null;return e===io.SIZE?r=lr(LS||(LS=new Nt)):e===io.VIEWPORT?r=lr(kS||(kS=new sr)):r=Jt(KL.div(YH)),r}generate(e){if(this.scope===io.COORDINATE){let r=e.getFragCoord();if(e.isFlipY()){const i=e.getNodeProperties(YH).outputNode.build(e);r=`${e.getType("vec2")}( ${r}.x, ${i}.y - ${r}.y )`}return r}return super.generate(e)}}io.COORDINATE="coordinate";io.VIEWPORT="viewport";io.SIZE="size";io.UV="uv";const $C=Kt(io,io.UV),YH=Kt(io,io.SIZE),KL=Kt(io,io.COORDINATE),sPe=Kt(io,io.VIEWPORT);sPe.zw;sPe.xy;const FS=new Nt;class lPe extends QM{static get type(){return"ViewportTextureNode"}constructor(e=$C,r=null,i=null){i===null&&(i=new bAt,i.minFilter=Yl),super(i,e,r),this.generateMipmaps=!1,this.isOutputTextureNode=!0,this.updateBeforeType=Tr.FRAME}updateBefore(e){const r=e.renderer;r.getDrawingBufferSize(FS);const i=this.value;(i.image.width!==FS.width||i.image.height!==FS.height)&&(i.image.width=FS.width,i.image.height=FS.height,i.needsUpdate=!0);const a=i.generateMipmaps;i.generateMipmaps=this.generateMipmaps,r.copyFramebufferToTexture(i),i.generateMipmaps=a}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const cPe=Ct(lPe,null,null,{generateMipmaps:!0});let Hz=null;class fFt extends lPe{static get type(){return"ViewportDepthTextureNode"}constructor(e=$C,r=null){Hz===null&&(Hz=new vv),super(e,r,Hz)}}const hFt=Ct(fFt);class Kl extends fr{static get type(){return"ViewportDepthNode"}constructor(e,r=null){super("float"),this.scope=e,this.valueNode=r,this.isViewportDepthNode=!0}generate(e){const{scope:r}=this;return r===Kl.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:r}=this,i=this.valueNode;let a=null;if(r===Kl.DEPTH_BASE)i!==null&&(a=fPe().assign(i));else if(r===Kl.DEPTH)e.isPerspectiveCamera?a=pFt(No.z,g0,m0):a=rE(No.z,g0,m0);else if(r===Kl.LINEAR_DEPTH)if(i!==null)if(e.isPerspectiveCamera){const o=uPe(i,g0,m0);a=rE(o,g0,m0)}else a=i;else a=rE(No.z,g0,m0);return a}}Kl.DEPTH_BASE="depthBase";Kl.DEPTH="depth";Kl.LINEAR_DEPTH="linearDepth";const rE=(n,e,r)=>n.add(e).div(e.sub(r)),pFt=(n,e,r)=>e.add(n).mul(r).div(r.sub(e).mul(n)),uPe=(n,e,r)=>e.mul(r).div(r.sub(e).mul(n).sub(r)),dPe=(n,e,r)=>{e=e.max(1e-6).toVar();const i=Cp(n.negate().div(e)),a=Cp(r.div(e));return i.div(a)},fPe=Ct(Kl,Kl.DEPTH_BASE),hPe=Kt(Kl,Kl.DEPTH),gFt=Ct(Kl,Kl.LINEAR_DEPTH);hFt();hPe.assign=n=>fPe(n);class mFt extends fr{constructor(e){super("float"),this.name=e,this.isBuiltinNode=!0}generate(){return this.name}}const vFt=Ct(mFt);class zu extends fr{static get type(){return"ClippingNode"}constructor(e=zu.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const r=e.clippingContext,{intersectionPlanes:i,unionPlanes:a}=r;return this.hardwareClipping=e.material.hardwareClipping,this.scope===zu.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(i,a):this.scope===zu.HARDWARE?this.setupHardwareClipping(a,e):this.setupDefault(i,a)}setupAlphaToCoverage(e,r){return Xt(()=>{const i=ht().toVar("distanceToPlane"),a=ht().toVar("distanceToGradient"),o=ht(1).toVar("clipOpacity"),s=r.length;if(!this.hardwareClipping&&s>0){const c=qg(r);kd(s,({i:u})=>{const d=c.element(u);i.assign(No.dot(d.xyz).negate().add(d.w)),a.assign(i.fwidth().div(2)),o.mulAssign(Ay(a.negate(),a,i))})}const l=e.length;if(l>0){const c=qg(e),u=ht(1).toVar("intersectionClipOpacity");kd(l,({i:d})=>{const f=c.element(d);i.assign(No.dot(f.xyz).negate().add(f.w)),a.assign(i.fwidth().div(2)),u.mulAssign(Ay(a.negate(),a,i).oneMinus())}),o.mulAssign(u.oneMinus())}di.a.mulAssign(o),di.a.equal(0).discard()})()}setupDefault(e,r){return Xt(()=>{const i=r.length;if(!this.hardwareClipping&&i>0){const o=qg(r);kd(i,({i:s})=>{const l=o.element(s);No.dot(l.xyz).greaterThan(l.w).discard()})}const a=e.length;if(a>0){const o=qg(e),s=wRe(!0).toVar("clipped");kd(a,({i:l})=>{const c=o.element(l);s.assign(No.dot(c.xyz).greaterThan(c.w).and(s))}),s.discard()}})()}setupHardwareClipping(e,r){const i=e.length;return r.enableHardwareClipping(i),Xt(()=>{const a=qg(e),o=vFt(r.getClipDistance());kd(i,({i:s})=>{const l=a.element(s),c=No.dot(l.xyz).sub(l.w).negate();o.element(s).assign(c)})})()}}zu.ALPHA_TO_COVERAGE="alphaToCoverage";zu.DEFAULT="default";zu.HARDWARE="hardware";const yFt=()=>Ht(new zu),bFt=()=>Ht(new zu(zu.ALPHA_TO_COVERAGE)),xFt=()=>Ht(new zu(zu.HARDWARE)),_Ft=.05,Jge=Xt(([n])=>bv(Or(1e4,Nd(Or(17,n.x).add(Or(.1,n.y)))).mul(wl(.1,Pu(Nd(Or(13,n.y).add(n.x))))))),eme=Xt(([n])=>Jge(Jt(Jge(n.xy),n.z))),wFt=Xt(([n])=>{const e=ic(Im(kRe(n.xyz)),Im(FRe(n.xyz))),r=ht(1).div(ht(_Ft).mul(e)).toVar("pixScale"),i=Jt(OC(Z0(Cp(r))),OC(IZ(Cp(r)))),a=Jt(eme(Z0(i.x.mul(n.xyz))),eme(Z0(i.y.mul(n.xyz)))),o=bv(Cp(r)),s=wl(Or(o.oneMinus(),a.x),Or(o,a.y)),l=DC(o,o.oneMinus()),c=yt(s.mul(s).div(Or(2,l).mul(jl(1,l))),s.sub(Or(.5,l)).div(jl(1,l)),jl(1,jl(1,s).mul(jl(1,s)).div(Or(2,l).mul(jl(1,l))))),u=s.lessThan(l.oneMinus()).select(s.lessThan(l).select(c.x,c.y),c.z);return Up(u,1e-6,1)}).setLayout({name:"getAlphaHashThreshold",type:"float",inputs:[{name:"position",type:"vec3"}]});class vo extends Ks{static get type(){return"NodeMaterial"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isNodeMaterial=!0,this.forceSinglePass=!1,this.fog=!0,this.lights=!1,this.hardwareClipping=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.positionNode=null,this.geometryNode=null,this.depthNode=null,this.shadowPositionNode=null,this.receivedShadowNode=null,this.castShadowNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null}customProgramCacheKey(){return this.type+gRe(this)}build(e){this.setup(e)}setupObserver(e){return new MLt(e)}setup(e){e.context.setupNormal=()=>this.setupNormal(e);const r=e.renderer,i=r.getRenderTarget();e.addStack(),e.stack.outputNode=this.vertexNode||this.setupPosition(e),this.geometryNode!==null&&(e.stack.outputNode=e.stack.outputNode.bypass(this.geometryNode)),e.addFlow("vertex",e.removeStack()),e.addStack();let a;const o=this.setupClipping(e);if(this.depthWrite===!0&&(i!==null?i.depthBuffer===!0&&this.setupDepth(e):r.depth===!0&&this.setupDepth(e)),this.fragmentNode===null){this.setupDiffuseColor(e),this.setupVariants(e);const s=this.setupLighting(e);o!==null&&e.stack.add(o);const l=ur(s,di.a).max(0);if(a=this.setupOutput(e,l),f6t.assign(a),this.outputNode!==null&&(a=this.outputNode),i!==null){const c=r.getMRT(),u=this.mrtNode;c!==null?(a=c,u!==null&&(a=c.merge(u))):u!==null&&(a=u)}}else{let s=this.fragmentNode;s.isOutputStructNode!==!0&&(s=ur(s)),a=this.setupOutput(e,s)}e.stack.outputNode=a,e.addFlow("fragment",e.removeStack()),e.monitor=this.setupObserver(e)}setupClipping(e){if(e.clippingContext===null)return null;const{unionPlanes:r,intersectionPlanes:i}=e.clippingContext;let a=null;if(r.length>0||i.length>0){const o=e.renderer.samples;this.alphaToCoverage&&o>1?a=bFt():e.stack.add(yFt())}return a}setupHardwareClipping(e){if(this.hardwareClipping=!1,e.clippingContext===null)return;const r=e.clippingContext.unionPlanes.length;r>0&&r<=8&&e.isAvailable("clipDistance")&&(e.stack.add(xFt()),this.hardwareClipping=!0)}setupDepth(e){const{renderer:r,camera:i}=e;let a=this.depthNode;if(a===null){const o=r.getMRT();o&&o.has("depth")?a=o.get("depth"):r.logarithmicDepthBuffer===!0&&(i.isPerspectiveCamera?a=dPe(No.z,g0,m0):a=rE(No.z,g0,m0))}a!==null&&hPe.assign(a).append()}setupPosition(e){const{object:r}=e,i=r.geometry;if(e.addStack(),(i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color)&&sFt(r).append(),r.isSkinnedMesh===!0&&nFt(r).append(),this.displacementMap){const o=Yg("displacementMap","texture"),s=Yg("displacementScale","float"),l=Yg("displacementBias","float");xs.addAssign(lh.normalize().mul(o.x.mul(s).add(l)))}r.isBatchedMesh&&eFt(r).append(),r.isInstancedMesh&&r.instanceMatrix&&r.instanceMatrix.isInstancedBufferAttribute===!0&&Q5t(r).append(),this.positionNode!==null&&xs.assign(this.positionNode),this.setupHardwareClipping(e);const a=oPe();return e.context.vertex=e.removeStack(),e.context.mvp=a,a}setupDiffuseColor({object:e,geometry:r}){let i=this.colorNode?ur(this.colorNode):y5t;this.vertexColors===!0&&r.hasAttribute("color")&&(i=ur(i.xyz.mul(Vp("color","vec3")),i.a)),e.instanceColor&&(i=jO("vec3","vInstanceColor").mul(i)),e.isBatchedMesh&&e._colorsTexture&&(i=jO("vec3","vBatchColor").mul(i)),di.assign(i);const a=this.opacityNode?ht(this.opacityNode):iPe;if(di.a.assign(di.a.mul(a)),this.alphaTestNode!==null||this.alphaTest>0){const o=this.alphaTestNode!==null?ht(this.alphaTestNode):v5t;di.a.lessThanEqual(o).discard()}this.alphaHash===!0&&di.a.lessThan(wFt(xs)).discard(),this.transparent===!1&&this.blending===$u&&this.alphaToCoverage===!1&&di.a.assign(1)}setupVariants(){}setupOutgoingLight(){return this.lights===!0?yt(0):di.rgb}setupNormal(){return this.normalNode?yt(this.normalNode):C5t}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?Yg("envMap","cubeTexture"):Yg("envMap","texture")),e}setupLightMap(e){let r=null;return e.material.lightMap&&(r=new dFt(aPe)),r}setupLights(e){const r=[],i=this.setupEnvironment(e);i&&i.isLightingNode&&r.push(i);const a=this.setupLightMap(e);if(a&&a.isLightingNode&&r.push(a),this.aoNode!==null||e.material.aoMap){const s=this.aoNode!==null?this.aoNode:W5t;r.push(new lFt(s))}let o=this.lightsNode||e.lightsNode;return r.length>0&&(o=e.renderer.lighting.createNode([...o.getLights(),...r])),o}setupLightingModel(){}setupLighting(e){const{material:r}=e,{backdropNode:i,backdropAlphaNode:a,emissiveNode:o}=this,l=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let c=this.setupOutgoingLight(e);if(l&&l.getScope().hasLights){const u=this.setupLightingModel(e);c=uFt(l,u,i,a)}else i!==null&&(c=yt(a!==null?ea(c,i,a):i));return(o&&o.isNode===!0||r.emissive&&r.emissive.isColor===!0)&&(Vge.assign(yt(o||x5t)),c=c.add(Vge)),c}setupOutput(e,r){if(this.fog===!0){const i=e.fogNode;i&&(r=ur(i.mix(r.rgb,i.colorNode),r.a))}return r}setDefaultValues(e){for(const i in e){const a=e[i];this[i]===void 0&&(this[i]=a,a&&a.clone&&(this[i]=a.clone()))}const r=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const i in r)Object.getOwnPropertyDescriptor(this.constructor.prototype,i)===void 0&&r[i].get!==void 0&&Object.defineProperty(this.constructor.prototype,i,r[i])}toJSON(e){const r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{},nodes:{}});const i=Ks.prototype.toJSON.call(this,e),a=UO(this);i.inputNodes={};for(const{property:s,childNode:l}of a)i.inputNodes[s]=l.toJSON(e).uuid;function o(s){const l=[];for(const c in s){const u=s[c];delete u.metadata,l.push(u)}return l}if(r){const s=o(e.textures),l=o(e.images),c=o(e.nodes);s.length>0&&(i.textures=s),l.length>0&&(i.images=l),c.length>0&&(i.nodes=c)}return i}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.positionNode=e.positionNode,this.geometryNode=e.geometryNode,this.depthNode=e.depthNode,this.shadowPositionNode=e.shadowPositionNode,this.receivedShadowNode=e.receivedShadowNode,this.castShadowNode=e.castShadowNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}}const SFt=new DL;class EFt extends vo{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.lights=!1,this.setDefaultValues(SFt),this.setValues(e)}}const CFt=new GAt;class MFt extends vo{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.lights=!1,this.setDefaultValues(CFt),this.dashOffset=0,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode?ht(this.offsetNodeNode):j5t,r=this.dashScaleNode?ht(this.dashScaleNode):U5t,i=this.dashSizeNode?ht(this.dashSizeNode):V5t,a=this.dashSizeNode?ht(this.dashGapNode):G5t;Vz.assign(i),Gge.assign(a);const o=Jp(Vp("lineDistance").mul(r));(e?o.add(e):o).mod(Vz.add(Gge)).greaterThan(Vz).discard()}}const TFt=n=>Ht(n).mul(.5).add(.5),AFt=new BAt;class RFt extends vo{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.lights=!1,this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(AFt),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?ht(this.opacityNode):iPe;di.assign(ur(TFt(co),e))}}class PFt extends bo{static get type(){return"EquirectUVNode"}constructor(e=ZRe){super("vec2"),this.dirNode=e}setup(){const e=this.dirNode,r=e.z.atan2(e.x).mul(1/(Math.PI*2)).add(.5),i=e.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return Jt(r,i)}}const pPe=Ct(PFt);class gPe extends uAe{constructor(e=1,r={}){super(e,r),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,r){const i=r.minFilter,a=r.generateMipmaps;r.generateMipmaps=!0,this.texture.type=r.type,this.texture.colorSpace=r.colorSpace,this.texture.generateMipmaps=r.generateMipmaps,this.texture.minFilter=r.minFilter,this.texture.magFilter=r.magFilter;const o=new Ky(5,5,5),s=pPe(ZRe),l=new vo;l.colorNode=ni(r,s,0),l.side=va,l.blending=ml;const c=new ko(o,l),u=new lZ;u.add(c),r.minFilter===Yl&&(r.minFilter=Lo);const d=new cAe(1,10,this),f=e.getMRT();return e.setMRT(null),d.update(e,u),e.setMRT(f),r.minFilter=i,r.currentGenerateMipmaps=a,c.geometry.dispose(),c.material.dispose(),this}}const iE=new WeakMap;class NFt extends bo{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=FC();const r=new NL;r.isRenderTargetTexture=!0,this._defaultTexture=r,this.updateBeforeType=Tr.RENDER}updateBefore(e){const{renderer:r,material:i}=e,a=this.envNode;if(a.isTextureNode||a.isMaterialReferenceNode){const o=a.isTextureNode?a.value:i[a.property];if(o&&o.isTexture){const s=o.mapping;if(s===Zm||s===Qm){if(iE.has(o)){const l=iE.get(o);tme(l,o.mapping),this._cubeTexture=l}else{const l=o.image;if(OFt(l)){const c=new gPe(l.height);c.fromEquirectangularTexture(r,o),tme(c.texture,o.mapping),this._cubeTexture=c.texture,iE.set(o,c.texture),o.addEventListener("dispose",mPe)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}function OFt(n){return n==null?!1:n.height>0}function mPe(n){const e=n.target;e.removeEventListener("dispose",mPe);const r=iE.get(e);r!==void 0&&(iE.delete(e),r.dispose())}function tme(n,e){e===Zm?n.mapping=qu:e===Qm&&(n.mapping=Yu)}const vPe=Ct(NFt);class GZ extends mw{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=vPe(this.envNode)}}class IFt extends mw{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){const r=ht(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(r)}}class ZL{start(){}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class yPe extends ZL{constructor(){super()}indirect(e,r,i){const a=e.ambientOcclusion,o=e.reflectedLight,s=i.context.irradianceLightMap;o.indirectDiffuse.assign(ur(0)),s?o.indirectDiffuse.addAssign(s):o.indirectDiffuse.addAssign(ur(1,1,1,0)),o.indirectDiffuse.mulAssign(a),o.indirectDiffuse.mulAssign(di.rgb)}finish(e,r,i){const a=i.material,o=e.outgoingLight,s=i.context.environment;if(s)switch(a.combine){case jM:o.rgb.assign(ea(o.rgb,o.rgb.mul(s.rgb),LP.mul(Gz)));break;case W3e:o.rgb.assign(ea(o.rgb,s.rgb,LP.mul(Gz)));break;case q3e:o.rgb.addAssign(s.rgb.mul(LP.mul(Gz)));break;default:console.warn("THREE.BasicLightingModel: Unsupported .combine value:",a.combine);break}}}const DFt=new dw;class LFt extends vo{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(DFt),this.setValues(e)}setupNormal(){return Jd}setupEnvironment(e){const r=super.setupEnvironment(e);return r?new GZ(r):null}setupLightMap(e){let r=null;return e.material.lightMap&&(r=new IFt(aPe)),r}setupOutgoingLight(){return di.rgb}setupLightingModel(){return new yPe}}const BC=Xt(({f0:n,f90:e,dotVH:r})=>{const i=r.mul(-5.55473).sub(6.98316).mul(r).exp2();return n.mul(i.oneMinus()).add(e.mul(i))}),y_=Xt(n=>n.diffuseColor.mul(1/Math.PI)),kFt=()=>ht(.25),FFt=Xt(({dotNH:n})=>WH.mul(ht(.5)).add(1).mul(ht(1/Math.PI)).mul(n.pow(WH))),$Ft=Xt(({lightDirection:n})=>{const e=n.add(Ma).normalize(),r=co.dot(e).clamp(),i=Ma.dot(e).clamp(),a=BC({f0:Ec,f90:1,dotVH:i}),o=kFt(),s=FFt({dotNH:r});return a.mul(o).mul(s)});class bPe extends yPe{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:r,reflectedLight:i}){const o=co.dot(e).clamp().mul(r);i.directDiffuse.addAssign(o.mul(y_({diffuseColor:di.rgb}))),this.specular===!0&&i.directSpecular.addAssign(o.mul($Ft({lightDirection:e})).mul(LP))}indirect({ambientOcclusion:e,irradiance:r,reflectedLight:i}){i.indirectDiffuse.addAssign(r.mul(y_({diffuseColor:di}))),i.indirectDiffuse.mulAssign(e)}}const BFt=new vAe;class zFt extends vo{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(BFt),this.setValues(e)}setupEnvironment(e){const r=super.setupEnvironment(e);return r?new GZ(r):null}setupLightingModel(){return new bPe(!1)}}const UFt=new FAt;class VFt extends vo{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(UFt),this.setValues(e)}setupEnvironment(e){const r=super.setupEnvironment(e);return r?new GZ(r):null}setupLightingModel(){return new bPe}setupVariants(){const e=(this.shininessNode?ht(this.shininessNode):b5t).max(1e-4);WH.assign(e);const r=this.specularNode||_5t;Ec.assign(r)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const GFt=Xt(n=>{if(n.geometry.hasAttribute("normal")===!1)return ht(0);const e=Jd.dFdx().abs().max(Jd.dFdy().abs());return e.x.max(e.y).max(e.z)}),xPe=Xt(n=>{const{roughness:e}=n,r=GFt();let i=e.max(.0525);return i=i.add(r),i=i.min(1),i}),jFt=Xt(({alpha:n,dotNL:e,dotNV:r})=>{const i=n.pow2(),a=e.mul(i.add(i.oneMinus().mul(r.pow2())).sqrt()),o=r.mul(i.add(i.oneMinus().mul(e.pow2())).sqrt());return zp(.5,a.add(o).max(D6t))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),HFt=Xt(({alphaT:n,alphaB:e,dotTV:r,dotBV:i,dotTL:a,dotBL:o,dotNV:s,dotNL:l})=>{const c=l.mul(yt(n.mul(r),e.mul(i),s).length()),u=s.mul(yt(n.mul(a),e.mul(o),l).length());return zp(.5,c.add(u)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),WFt=Xt(({alpha:n,dotNH:e})=>{const r=n.pow2(),i=e.pow2().mul(r.oneMinus()).oneMinus();return r.div(i.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),qFt=ht(1/Math.PI),YFt=Xt(({alphaT:n,alphaB:e,dotNH:r,dotTH:i,dotBH:a})=>{const o=n.mul(e),s=yt(e.mul(i),n.mul(a),o.mul(r)),l=s.dot(s),c=o.div(l);return qFt.mul(o.mul(c.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),nme=Xt(n=>{const{lightDirection:e,f0:r,f90:i,roughness:a,f:o,USE_IRIDESCENCE:s,USE_ANISOTROPY:l}=n,c=n.normalView||co,u=a.pow2(),d=e.add(Ma).normalize(),f=c.dot(e).clamp(),h=c.dot(Ma).clamp(),p=c.dot(d).clamp(),g=Ma.dot(d).clamp();let m=BC({f0:r,f90:i,dotVH:g}),v,y;if(Uge(s)&&(m=NZ.mix(m,o)),Uge(l)){const b=OP.dot(e),x=OP.dot(Ma),_=OP.dot(d),S=xx.dot(e),M=xx.dot(Ma),E=xx.dot(d);v=HFt({alphaT:HH,alphaB:u,dotTV:x,dotBV:M,dotTL:b,dotBL:S,dotNV:h,dotNL:f}),y=YFt({alphaT:HH,alphaB:u,dotNH:p,dotTH:_,dotBH:E})}else v=jFt({alpha:u,dotNL:f,dotNV:h}),y=WFt({alpha:u,dotNH:p});return m.mul(v).mul(y)}),_Pe=Xt(({roughness:n,dotNV:e})=>{const r=ur(-1,-.0275,-.572,.022),i=ur(1,.0425,1.04,-.04),a=n.mul(r).add(i),o=a.x.mul(a.x).min(e.mul(-9.28).exp2()).mul(a.x).add(a.y);return Jt(-1.04,1.04).mul(o).add(a.zw)}).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),wPe=Xt(n=>{const{dotNV:e,specularColor:r,specularF90:i,roughness:a}=n,o=_Pe({dotNV:e,roughness:a});return r.mul(o.x).add(i.mul(o.y))}),XFt=Xt(({f:n,f90:e,dotVH:r})=>{const i=r.oneMinus().saturate(),a=i.mul(i),o=i.mul(a,a).clamp(0,.9999);return n.sub(yt(e).mul(o)).div(o.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),KFt=Xt(({roughness:n,dotNH:e})=>{const r=n.pow2(),i=ht(1).div(r),o=e.pow2().oneMinus().max(.0078125);return ht(2).add(i).mul(o.pow(i.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),ZFt=Xt(({dotNV:n,dotNL:e})=>ht(1).div(ht(4).mul(e.add(n).sub(e.mul(n))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),QFt=Xt(({lightDirection:n})=>{const e=n.add(Ma).normalize(),r=co.dot(n).clamp(),i=co.dot(Ma).clamp(),a=co.dot(e).clamp(),o=KFt({roughness:PZ,dotNH:a}),s=ZFt({dotNV:i,dotNL:r});return qb.mul(o).mul(s)}),JFt=Xt(({N:n,V:e,roughness:r})=>{const o=.0078125,s=n.dot(e).saturate(),l=Jt(r,s.oneMinus().sqrt());return l.assign(l.mul(.984375).add(o)),l}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),e8t=Xt(({f:n})=>{const e=n.length();return ic(e.mul(e).add(n.z).div(e.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),mR=Xt(({v1:n,v2:e})=>{const r=n.dot(e),i=r.abs().toVar(),a=i.mul(.0145206).add(.4965155).mul(i).add(.8543985).toVar(),o=i.add(4.1616724).mul(i).add(3.417594).toVar(),s=a.div(o),l=r.greaterThan(0).select(s,ic(r.mul(r).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(s));return n.cross(e).mul(l)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),rme=Xt(({N:n,V:e,P:r,mInv:i,p0:a,p1:o,p2:s,p3:l})=>{const c=o.sub(a).toVar(),u=l.sub(a).toVar(),d=c.cross(u),f=yt().toVar();return po(d.dot(r.sub(a)).greaterThanEqual(0),()=>{const h=e.sub(n.mul(e.dot(n))).normalize(),p=n.cross(h).negate(),g=i.mul(_l(h,p,n).transpose()).toVar(),m=g.mul(a.sub(r)).normalize().toVar(),v=g.mul(o.sub(r)).normalize().toVar(),y=g.mul(s.sub(r)).normalize().toVar(),b=g.mul(l.sub(r)).normalize().toVar(),x=yt(0).toVar();x.addAssign(mR({v1:m,v2:v})),x.addAssign(mR({v1:v,v2:y})),x.addAssign(mR({v1:y,v2:b})),x.addAssign(mR({v1:b,v2:m})),f.assign(yt(e8t({f:x})))}),f}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),QL=1/6,SPe=n=>Or(QL,Or(n,Or(n,n.negate().add(3)).sub(3)).add(1)),XH=n=>Or(QL,Or(n,Or(n,Or(3,n).sub(6))).add(4)),EPe=n=>Or(QL,Or(n,Or(n,Or(-3,n).add(3)).add(3)).add(1)),KH=n=>Or(QL,HL(n,3)),ime=n=>SPe(n).add(XH(n)),ame=n=>EPe(n).add(KH(n)),ome=n=>wl(-1,XH(n).div(SPe(n).add(XH(n)))),sme=n=>wl(1,KH(n).div(EPe(n).add(KH(n)))),lme=(n,e,r)=>{const i=n.uvNode,a=Or(i,e.zw).add(.5),o=Z0(a),s=bv(a),l=ime(s.x),c=ame(s.x),u=ome(s.x),d=sme(s.x),f=ome(s.y),h=sme(s.y),p=Jt(o.x.add(u),o.y.add(f)).sub(.5).mul(e.xy),g=Jt(o.x.add(d),o.y.add(f)).sub(.5).mul(e.xy),m=Jt(o.x.add(u),o.y.add(h)).sub(.5).mul(e.xy),v=Jt(o.x.add(d),o.y.add(h)).sub(.5).mul(e.xy),y=ime(s.y).mul(wl(l.mul(n.uv(p).level(r)),c.mul(n.uv(g).level(r)))),b=ame(s.y).mul(wl(l.mul(n.uv(m).level(r)),c.mul(n.uv(v).level(r))));return y.add(b)},t8t=Xt(([n,e=ht(3)])=>{const r=Jt(n.size(Fa(e))),i=Jt(n.size(Fa(e.add(1)))),a=zp(1,r),o=zp(1,i),s=lme(n,ur(a,r),Z0(e)),l=lme(n,ur(o,i),IZ(e));return bv(e).mix(s,l)}),cme=Xt(([n,e,r,i,a])=>{const o=yt(VRe(e.negate(),IC(n),zp(1,i))),s=yt(Im(a[0].xyz),Im(a[1].xyz),Im(a[2].xyz));return IC(o).mul(r.mul(s))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),n8t=Xt(([n,e])=>n.mul(Up(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),r8t=cPe(),i8t=cPe(),ume=Xt(([n,e,r],{material:i})=>{const o=(i.side==va?r8t:i8t).uv(n),s=Cp(YH.x).mul(n8t(e,r));return t8t(o,s)}),dme=Xt(([n,e,r])=>(po(r.notEqual(0),()=>{const i=LRe(e).negate().div(r);return DRe(i.negate().mul(n))}),yt(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),a8t=Xt(([n,e,r,i,a,o,s,l,c,u,d,f,h,p,g])=>{let m,v;if(g){m=ur().toVar(),v=yt().toVar();const S=d.sub(1).mul(g.mul(.025)),M=yt(d.sub(S),d,d.add(S));kd({start:0,end:3},({i:E})=>{const T=M.element(E),P=cme(n,e,f,T,l),A=s.add(P),N=u.mul(c.mul(ur(A,1))),O=Jt(N.xy.div(N.w)).toVar();O.addAssign(1),O.divAssign(2),O.assign(Jt(O.x,O.y.oneMinus()));const I=ume(O,r,T);m.element(E).assign(I.element(E)),m.a.addAssign(I.a),v.element(E).assign(i.element(E).mul(dme(Im(P),h,p).element(E)))}),m.a.divAssign(3)}else{const S=cme(n,e,f,d,l),M=s.add(S),E=u.mul(c.mul(ur(M,1))),T=Jt(E.xy.div(E.w)).toVar();T.addAssign(1),T.divAssign(2),T.assign(Jt(T.x,T.y.oneMinus())),m=ume(T,r,d),v=i.mul(dme(Im(S),h,p))}const y=v.rgb.mul(m.rgb),b=n.dot(e).clamp(),x=yt(wPe({dotNV:b,specularColor:a,specularF90:o,roughness:r})),_=v.r.add(v.g,v.b).div(3);return ur(x.oneMinus().mul(y),m.a.oneMinus().mul(_).oneMinus())}),o8t=_l(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),s8t=n=>{const e=n.sqrt();return yt(1).add(e).div(yt(1).sub(e))},fme=(n,e)=>n.sub(e).div(n.add(e)).pow2(),l8t=(n,e)=>{const r=n.mul(2*Math.PI*1e-9),i=yt(54856e-17,44201e-17,52481e-17),a=yt(1681e3,1795300,2208400),o=yt(43278e5,93046e5,66121e5),s=ht(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(r.mul(2239900).add(e.x).cos()).mul(r.pow2().mul(-45282e5).exp());let l=i.mul(o.mul(2*Math.PI).sqrt()).mul(a.mul(r).add(e).cos()).mul(r.pow2().negate().mul(o).exp());return l=yt(l.x.add(s),l.y,l.z).div(10685e-11),o8t.mul(l)},c8t=Xt(({outsideIOR:n,eta2:e,cosTheta1:r,thinFilmThickness:i,baseF0:a})=>{const o=ea(n,e,Ay(0,.03,i)),l=n.div(o).pow2().mul(r.pow2().oneMinus()).oneMinus();po(l.lessThan(0),()=>yt(1));const c=l.sqrt(),u=fme(o,n),d=BC({f0:u,f90:1,dotVH:r}),f=d.oneMinus(),h=o.lessThan(n).select(Math.PI,0),p=ht(Math.PI).sub(h),g=s8t(a.clamp(0,.9999)),m=fme(g,o.toVec3()),v=BC({f0:m,f90:1,dotVH:c}),y=yt(g.x.lessThan(o).select(Math.PI,0),g.y.lessThan(o).select(Math.PI,0),g.z.lessThan(o).select(Math.PI,0)),b=o.mul(i,c,2),x=yt(p).add(y),_=d.mul(v).clamp(1e-5,.9999),S=_.sqrt(),M=f.pow2().mul(v).div(yt(1).sub(_)),T=d.add(M).toVar(),P=M.sub(f).toVar();return kd({start:1,end:2,condition:"<=",name:"m"},({m:A})=>{P.mulAssign(S);const N=l8t(ht(A).mul(b),ht(A).mul(x)).mul(2);T.addAssign(P.mul(N))}),T.max(yt(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),u8t=Xt(({normal:n,viewDir:e,roughness:r})=>{const i=n.dot(e).saturate(),a=r.pow2(),o=Xl(r.lessThan(.25),ht(-339.2).mul(a).add(ht(161.4).mul(r)).sub(25.9),ht(-8.48).mul(a).add(ht(14.3).mul(r)).sub(9.95)),s=Xl(r.lessThan(.25),ht(44).mul(a).sub(ht(23.7).mul(r)).add(3.26),ht(1.97).mul(a).sub(ht(3.27).mul(r)).add(.72));return Xl(r.lessThan(.25),0,ht(.1).mul(r).sub(.025)).add(o.mul(i).add(s).exp()).mul(1/Math.PI).saturate()}),Wz=yt(.04),qz=ht(1);class CPe extends ZL{constructor(e=!1,r=!1,i=!1,a=!1,o=!1,s=!1){super(),this.clearcoat=e,this.sheen=r,this.iridescence=i,this.anisotropy=a,this.transmission=o,this.dispersion=s,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=yt().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=yt().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=yt().toVar("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=yt().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=yt().toVar("sheenSpecularIndirect")),this.iridescence===!0){const r=co.dot(Ma).clamp();this.iridescenceFresnel=c8t({outsideIOR:ht(1),eta2:MRe,cosTheta1:r,thinFilmThickness:TRe,baseF0:Ec}),this.iridescenceF0=XFt({f:this.iridescenceFresnel,f90:1,dotVH:r})}if(this.transmission===!0){const r=kC,i=Hkt.sub(kC).normalize(),a=$Z;e.backdrop=a8t(a,i,ip,di,Ec,qO,r,Ry,eg,XO,IP,ARe,PRe,RRe,this.dispersion?NRe:null),e.backdropAlpha=qH,di.a.mulAssign(ea(1,e.backdrop.a,qH))}}computeMultiscattering(e,r,i){const a=co.dot(Ma).clamp(),o=_Pe({roughness:ip,dotNV:a}),l=(this.iridescenceF0?NZ.mix(Ec,this.iridescenceF0):Ec).mul(o.x).add(i.mul(o.y)),u=o.x.add(o.y).oneMinus(),d=Ec.add(Ec.oneMinus().mul(.047619)),f=l.mul(d).div(u.mul(d).oneMinus());e.addAssign(l),r.addAssign(f.mul(u))}direct({lightDirection:e,lightColor:r,reflectedLight:i}){const o=co.dot(e).clamp().mul(r);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(o.mul(QFt({lightDirection:e}))),this.clearcoat===!0){const l=_2.dot(e).clamp().mul(r);this.clearcoatSpecularDirect.addAssign(l.mul(nme({lightDirection:e,f0:Wz,f90:qz,roughness:WO,normalView:_2})))}i.directDiffuse.addAssign(o.mul(y_({diffuseColor:di.rgb}))),i.directSpecular.addAssign(o.mul(nme({lightDirection:e,f0:Ec,f90:1,roughness:ip,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:r,halfWidth:i,halfHeight:a,reflectedLight:o,ltc_1:s,ltc_2:l}){const c=r.add(i).sub(a),u=r.sub(i).sub(a),d=r.sub(i).add(a),f=r.add(i).add(a),h=co,p=Ma,g=No.toVar(),m=JFt({N:h,V:p,roughness:ip}),v=s.uv(m).toVar(),y=l.uv(m).toVar(),b=_l(yt(v.x,0,v.y),yt(0,1,0),yt(v.z,0,v.w)).toVar(),x=Ec.mul(y.x).add(Ec.oneMinus().mul(y.y)).toVar();o.directSpecular.addAssign(e.mul(x).mul(rme({N:h,V:p,P:g,mInv:b,p0:c,p1:u,p2:d,p3:f}))),o.directDiffuse.addAssign(e.mul(di).mul(rme({N:h,V:p,P:g,mInv:_l(1,0,0,0,1,0,0,0,1),p0:c,p1:u,p2:d,p3:f})))}indirect(e,r,i){this.indirectDiffuse(e,r,i),this.indirectSpecular(e,r,i),this.ambientOcclusion(e,r,i)}indirectDiffuse({irradiance:e,reflectedLight:r}){r.indirectDiffuse.addAssign(e.mul(y_({diffuseColor:di})))}indirectSpecular({radiance:e,iblIrradiance:r,reflectedLight:i}){if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(r.mul(qb,u8t({normal:co,viewDir:Ma,roughness:PZ}))),this.clearcoat===!0){const u=_2.dot(Ma).clamp(),d=wPe({dotNV:u,specularColor:Wz,specularF90:qz,roughness:WO});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(d))}const a=yt().toVar("singleScattering"),o=yt().toVar("multiScattering"),s=r.mul(1/Math.PI);this.computeMultiscattering(a,o,qO);const l=a.add(o),c=di.mul(l.r.max(l.g).max(l.b).oneMinus());i.indirectSpecular.addAssign(e.mul(a)),i.indirectSpecular.addAssign(o.mul(s)),i.indirectDiffuse.addAssign(c.mul(s))}ambientOcclusion({ambientOcclusion:e,reflectedLight:r}){const a=co.dot(Ma).clamp().add(e),o=ip.mul(-16).oneMinus().negate().exp2(),s=e.sub(a.pow(o).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(e),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(e),r.indirectDiffuse.mulAssign(e),r.indirectSpecular.mulAssign(s)}finish(e){const{outgoingLight:r}=e;if(this.clearcoat===!0){const i=_2.dot(Ma).clamp(),a=BC({dotVH:i,f0:Wz,f90:qz}),o=r.mul(jH.mul(a).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(jH));r.assign(o)}if(this.sheen===!0){const i=qb.r.max(qb.g).max(qb.b).mul(.157).oneMinus(),a=r.mul(i).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);r.assign(a)}}}const hme=ht(1),ZH=ht(-2),vR=ht(.8),Yz=ht(-1),yR=ht(.4),Xz=ht(2),bR=ht(.305),Kz=ht(3),pme=ht(.21),d8t=ht(4),gme=ht(4),f8t=ht(16),h8t=Xt(([n])=>{const e=yt(Pu(n)).toVar(),r=ht(-1).toVar();return po(e.x.greaterThan(e.z),()=>{po(e.x.greaterThan(e.y),()=>{r.assign(Xl(n.x.greaterThan(0),0,3))}).Else(()=>{r.assign(Xl(n.y.greaterThan(0),1,4))})}).Else(()=>{po(e.z.greaterThan(e.y),()=>{r.assign(Xl(n.z.greaterThan(0),2,5))}).Else(()=>{r.assign(Xl(n.y.greaterThan(0),1,4))})}),r}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),p8t=Xt(([n,e])=>{const r=Jt().toVar();return po(e.equal(0),()=>{r.assign(Jt(n.z,n.y).div(Pu(n.x)))}).ElseIf(e.equal(1),()=>{r.assign(Jt(n.x.negate(),n.z.negate()).div(Pu(n.y)))}).ElseIf(e.equal(2),()=>{r.assign(Jt(n.x.negate(),n.y).div(Pu(n.z)))}).ElseIf(e.equal(3),()=>{r.assign(Jt(n.z.negate(),n.y).div(Pu(n.x)))}).ElseIf(e.equal(4),()=>{r.assign(Jt(n.x.negate(),n.z).div(Pu(n.y)))}).Else(()=>{r.assign(Jt(n.x,n.y).div(Pu(n.z)))}),Or(.5,r.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),g8t=Xt(([n])=>{const e=ht(0).toVar();return po(n.greaterThanEqual(vR),()=>{e.assign(hme.sub(n).mul(Yz.sub(ZH)).div(hme.sub(vR)).add(ZH))}).ElseIf(n.greaterThanEqual(yR),()=>{e.assign(vR.sub(n).mul(Xz.sub(Yz)).div(vR.sub(yR)).add(Yz))}).ElseIf(n.greaterThanEqual(bR),()=>{e.assign(yR.sub(n).mul(Kz.sub(Xz)).div(yR.sub(bR)).add(Xz))}).ElseIf(n.greaterThanEqual(pme),()=>{e.assign(bR.sub(n).mul(d8t.sub(Kz)).div(bR.sub(pme)).add(Kz))}).Else(()=>{e.assign(ht(-2).mul(Cp(Or(1.16,n))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),m8t=Xt(([n,e])=>{const r=n.toVar();r.assign(Or(2,r).sub(1));const i=yt(r,1).toVar();return po(e.equal(0),()=>{i.assign(i.zyx)}).ElseIf(e.equal(1),()=>{i.assign(i.xzy),i.xz.mulAssign(-1)}).ElseIf(e.equal(2),()=>{i.x.mulAssign(-1)}).ElseIf(e.equal(3),()=>{i.assign(i.zyx),i.xz.mulAssign(-1)}).ElseIf(e.equal(4),()=>{i.assign(i.xzy),i.xy.mulAssign(-1)}).ElseIf(e.equal(5),()=>{i.z.mulAssign(-1)}),i}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),v8t=Xt(([n,e,r,i,a,o])=>{const s=ht(r),l=yt(e),c=Up(g8t(s),ZH,o),u=bv(c),d=Z0(c),f=yt(QH(n,l,d,i,a,o)).toVar();return po(u.notEqual(0),()=>{const h=yt(QH(n,l,d.add(1),i,a,o)).toVar();f.assign(ea(f,h,u))}),f}),QH=Xt(([n,e,r,i,a,o])=>{const s=ht(r).toVar(),l=yt(e),c=ht(h8t(l)).toVar(),u=ht(ic(gme.sub(s),0)).toVar();s.assign(ic(s,gme));const d=ht(OC(s)).toVar(),f=Jt(p8t(l,c).mul(d.sub(2)).add(1)).toVar();return po(c.greaterThan(2),()=>{f.y.addAssign(d),c.subAssign(3)}),f.x.addAssign(c.mul(d)),f.x.addAssign(u.mul(Or(3,f8t))),f.y.addAssign(Or(4,OC(o).sub(d))),f.x.mulAssign(i),f.y.mulAssign(a),n.uv(f).grad(Jt(),Jt())}),Zz=Xt(({envMap:n,mipInt:e,outputDirection:r,theta:i,axis:a,CUBEUV_TEXEL_WIDTH:o,CUBEUV_TEXEL_HEIGHT:s,CUBEUV_MAX_MIP:l})=>{const c=Ug(i),u=r.mul(c).add(a.cross(r).mul(Nd(i))).add(a.mul(a.dot(r).mul(c.oneMinus())));return QH(n,u,e,o,s,l)}),y8t=Xt(({n,latitudinal:e,poleAxis:r,outputDirection:i,weights:a,samples:o,dTheta:s,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f})=>{const h=yt(Xl(e,r,zRe(r,i))).toVar();po(IRe(h.equals(yt(0))),()=>{h.assign(yt(i.z,0,i.x.negate()))}),h.assign(IC(h));const p=yt().toVar();return p.addAssign(a.element(Fa(0)).mul(Zz({theta:0,axis:h,outputDirection:i,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f}))),kd({start:Fa(1),end:n},({i:g})=>{po(g.greaterThanEqual(o),()=>{iFt()});const m=ht(s.mul(ht(g))).toVar();p.addAssign(a.element(g).mul(Zz({theta:m.mul(-1),axis:h,outputDirection:i,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f}))),p.addAssign(a.element(g).mul(Zz({theta:m,axis:h,outputDirection:i,mipInt:l,envMap:c,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:d,CUBEUV_MAX_MIP:f})))}),ur(p,1)});let KO=null;const mme=new WeakMap;function b8t(n){const e=Math.log2(n)-2,r=1/n;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:r,maxMip:e}}function x8t(n){let e=mme.get(n);if((e!==void 0?e.pmremVersion:-1)!==n.pmremVersion){const i=n.image;if(n.isCubeTexture)if(w8t(i))e=KO.fromCubemap(n,e);else return null;else if(S8t(i))e=KO.fromEquirectangular(n,e);else return null;e.pmremVersion=n.pmremVersion,mme.set(n,e)}return e.texture}class _8t extends bo{static get type(){return"PMREMNode"}constructor(e,r=null,i=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=r,this.levelNode=i,this._generator=null;const a=new ho;a.isRenderTargetTexture=!0,this._texture=ni(a),this._width=lr(0),this._height=lr(0),this._maxMip=lr(0),this.updateBeforeType=Tr.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const r=b8t(e.image.height);this._texture.value=e,this._width.value=r.texelWidth,this._height.value=r.texelHeight,this._maxMip.value=r.maxMip}updateBefore(){let e=this._pmrem;const r=e?e.pmremVersion:-1,i=this._value;r!==i.pmremVersion&&(i.isPMREMTexture===!0?e=i:e=x8t(i),e!==null&&(this._pmrem=e,this.updateFromTexture(e)))}setup(e){KO===null&&(KO=e.createPMREMGenerator()),this.updateBefore(e);let r=this.uvNode;r===null&&e.context.getUV&&(r=e.context.getUV(this));const i=this.value;e.renderer.coordinateSystem===ku&&i.isPMREMTexture!==!0&&i.isRenderTargetTexture===!0&&(r=yt(r.x.negate(),r.yz));let a=this.levelNode;return a===null&&e.context.getTextureLevel&&(a=e.context.getTextureLevel(this)),v8t(this._texture,r,a,this._width,this._height,this._maxMip)}}function w8t(n){if(n==null)return!1;let e=0;const r=6;for(let i=0;i<r;i++)n[i]!==void 0&&e++;return e===r}function S8t(n){return n==null?!1:n.height>0}const MPe=Ct(_8t),vme=new WeakMap;class E8t extends mw{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){const{material:r}=e;let i=this.envNode;if(i.isTextureNode||i.isMaterialReferenceNode){const p=i.isTextureNode?i.value:r[i.property];let g=vme.get(p);g===void 0&&(g=MPe(p),vme.set(p,g)),i=g}const o=r.envMap?Si("envMapIntensity","float",e.material):Si("environmentIntensity","float",e.scene),l=r.useAnisotropy===!0||r.anisotropy>0?u5t:co,c=i.context(yme(ip,l)).mul(o),u=i.context(C8t($Z)).mul(Math.PI).mul(o),d=DP(c),f=DP(u);e.context.radiance.addAssign(d),e.context.iblIrradiance.addAssign(f);const h=e.context.lightingModel.clearcoatRadiance;if(h){const p=i.context(yme(WO,_2)).mul(o),g=DP(p);h.addAssign(g)}}}const yme=(n,e)=>{let r=null;return{getUV:()=>(r===null&&(r=Ma.negate().reflect(e),r=n.mul(n).mix(r,e).normalize(),r=r.transformDirection(eg)),r),getTextureLevel:()=>n}},C8t=n=>({getUV:()=>n,getTextureLevel:()=>ht(1)}),M8t=new mAe;class TPe extends vo{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(M8t),this.setValues(e)}setupEnvironment(e){let r=super.setupEnvironment(e);return r===null&&e.environmentNode&&(r=e.environmentNode),r?new E8t(r):null}setupLightingModel(){return new CPe}setupSpecular(){const e=ea(yt(.04),di.rgb,HO);Ec.assign(e),qO.assign(1)}setupVariants(){const e=this.metalnessNode?ht(this.metalnessNode):E5t;HO.assign(e);let r=this.roughnessNode?ht(this.roughnessNode):S5t;r=xPe({roughness:r}),ip.assign(r),this.setupSpecular(),di.assign(ur(di.rgb.mul(e.oneMinus()),di.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const T8t=new kAt;class A8t extends TPe{static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(T8t),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?ht(this.iorNode):$5t;IP.assign(e),Ec.assign(ea(DC(URe(IP.sub(1).div(IP.add(1))).mul(w5t),yt(1)).mul(Kge),di.rgb,HO)),qO.assign(ea(Kge,1,HO))}setupLightingModel(){return new CPe(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const r=this.clearcoatNode?ht(this.clearcoatNode):M5t,i=this.clearcoatRoughnessNode?ht(this.clearcoatRoughnessNode):T5t;jH.assign(r),WO.assign(xPe({roughness:i}))}if(this.useSheen){const r=this.sheenNode?yt(this.sheenNode):P5t,i=this.sheenRoughnessNode?ht(this.sheenRoughnessNode):N5t;qb.assign(r),PZ.assign(i)}if(this.useIridescence){const r=this.iridescenceNode?ht(this.iridescenceNode):I5t,i=this.iridescenceIORNode?ht(this.iridescenceIORNode):D5t,a=this.iridescenceThicknessNode?ht(this.iridescenceThicknessNode):L5t;NZ.assign(r),MRe.assign(i),TRe.assign(a)}if(this.useAnisotropy){const r=(this.anisotropyNode?Jt(this.anisotropyNode):O5t).toVar();t0.assign(r.length()),po(t0.equal(0),()=>{r.assign(Jt(1,0))}).Else(()=>{r.divAssign(Jt(t0)),t0.assign(t0.saturate())}),HH.assign(t0.pow2().mix(ip.pow2(),1)),OP.assign(w2[0].mul(r.x).add(w2[1].mul(r.y))),xx.assign(w2[1].mul(r.x).sub(w2[0].mul(r.y)))}if(this.useTransmission){const r=this.transmissionNode?ht(this.transmissionNode):k5t,i=this.thicknessNode?ht(this.thicknessNode):F5t,a=this.attenuationDistanceNode?ht(this.attenuationDistanceNode):B5t,o=this.attenuationColorNode?yt(this.attenuationColorNode):z5t;if(qH.assign(r),ARe.assign(i),RRe.assign(a),PRe.assign(o),this.useDispersion){const s=this.dispersionNode?ht(this.dispersionNode):H5t;NRe.assign(s)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?yt(this.clearcoatNormalNode):A5t}setup(e){e.context.setupClearcoatNormal=()=>this.setupClearcoatNormal(e),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}const R8t=Xt(({normal:n,lightDirection:e,builder:r})=>{const i=n.dot(e),a=Jt(i.mul(.5).add(.5),0);if(r.material.gradientMap){const o=Yg("gradientMap","texture").context({getUV:()=>a});return yt(o.r)}else{const o=a.fwidth().mul(.5);return ea(yt(.7),yt(1),Ay(ht(.7).sub(o.x),ht(.7).add(o.x),a.x))}});class P8t extends ZL{direct({lightDirection:e,lightColor:r,reflectedLight:i},a,o){const s=R8t({normal:QRe,lightDirection:e,builder:o}).mul(r);i.directDiffuse.addAssign(s.mul(y_({diffuseColor:di.rgb})))}indirect({ambientOcclusion:e,irradiance:r,reflectedLight:i}){i.indirectDiffuse.addAssign(r.mul(y_({diffuseColor:di}))),i.indirectDiffuse.mulAssign(e)}}const N8t=new $At;class O8t extends vo{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(N8t),this.setValues(e)}setupLightingModel(){return new P8t}}class I8t extends bo{static get type(){return"MatcapUVNode"}constructor(){super("vec2")}setup(){const e=yt(Ma.z,0,Ma.x.negate()).normalize(),r=Ma.cross(e);return Jt(e.dot(co),r.dot(co)).mul(.495).add(.5)}}const D8t=Kt(I8t),L8t=new VAt;class k8t extends vo{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.lights=!1,this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(L8t),this.setValues(e)}setupVariants(e){const r=D8t;let i;e.material.matcap?i=Yg("matcap","texture").context({getUV:()=>r}):i=yt(ea(.2,.8,r.y)),di.rgb.mulAssign(i.rgb)}}const F8t=new yAt;class $8t extends vo{static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.isPointsNodeMaterial=!0,this.lights=!1,this.transparent=!0,this.sizeNode=null,this.setDefaultValues(F8t),this.setValues(e)}copy(e){return this.sizeNode=e.sizeNode,super.copy(e)}}class B8t extends bo{static get type(){return"RotateNode"}constructor(e,r){super(),this.positionNode=e,this.rotationNode=r}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:r,positionNode:i}=this;if(this.getNodeType(e)==="vec2"){const o=r.cos(),s=r.sin();return RZ(o,s,s.negate(),o).mul(i)}else{const o=r,s=bx(ur(1,0,0,0),ur(0,Ug(o.x),Nd(o.x).negate(),0),ur(0,Nd(o.x),Ug(o.x),0),ur(0,0,0,1)),l=bx(ur(Ug(o.y),0,Nd(o.y),0),ur(0,1,0,0),ur(Nd(o.y).negate(),0,Ug(o.y),0),ur(0,0,0,1)),c=bx(ur(Ug(o.z),Nd(o.z).negate(),0,0),ur(Nd(o.z),Ug(o.z),0,0),ur(0,0,1,0),ur(0,0,0,1));return s.mul(l).mul(c).mul(ur(i,1)).xyz}}}const z8t=Ct(B8t),U8t=new OL;class V8t extends vo{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this.lights=!1,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.setDefaultValues(U8t),this.setValues(e)}setupPosition({object:e,camera:r,context:i}){const a=this.sizeAttenuation,{positionNode:o,rotationNode:s,scaleNode:l}=this,c=xs;let u=YL.mul(yt(o||0)),d=Jt(Ry[0].xyz.length(),Ry[1].xyz.length());if(l!==null&&(d=d.mul(l)),!a)if(r.isPerspectiveCamera)d=d.mul(u.z.negate());else{const m=ht(2).div(XO.element(1).element(1));d=d.mul(m.mul(2))}let f=c.xy;if(e.center&&e.center.isVector2===!0){const m=Skt("center","vec2");f=f.sub(m.sub(.5))}f=f.mul(d);const h=ht(s||R5t),p=z8t(f,h);u=ur(u.xy.add(p),u.zw);const g=XO.mul(u);return i.vertex=c,g}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}class G8t extends ZL{constructor(){super(),this.shadowNode=ht(1).toVar("shadowMask")}direct({shadowMask:e}){this.shadowNode.mulAssign(e)}finish(e){di.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(di.rgb)}}const j8t=new LAt;class H8t extends vo{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.setDefaultValues(j8t),this.setValues(e)}setupLightingModel(){return new G8t}}Xt(({texture:n,uv:e})=>{const i=yt().toVar();return po(e.x.lessThan(1e-4),()=>{i.assign(yt(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{i.assign(yt(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{i.assign(yt(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{i.assign(yt(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{i.assign(yt(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{i.assign(yt(0,0,-1))}).Else(()=>{const o=n.uv(e.add(yt(-.01,0,0))).r.sub(n.uv(e.add(yt(.01,0,0))).r),s=n.uv(e.add(yt(0,-.01,0))).r.sub(n.uv(e.add(yt(0,.01,0))).r),l=n.uv(e.add(yt(0,0,-.01))).r.sub(n.uv(e.add(yt(0,0,.01))).r);i.assign(yt(o,s,l))}),i.normalize()});class W8t{constructor(e,r){this.nodes=e,this.info=r,this._context=self,this._animationLoop=null,this._requestId=null}start(){const e=(r,i)=>{this._requestId=this._context.requestAnimationFrame(e),this.info.autoReset===!0&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this._animationLoop!==null&&this._animationLoop(r,i)};e()}stop(){this._context.cancelAnimationFrame(this._requestId),this._requestId=null}setAnimationLoop(e){this._animationLoop=e}setContext(e){this._context=e}dispose(){this.stop()}}class ch{constructor(){this.weakMap=new WeakMap}get(e){let r=this.weakMap;for(let i=0;i<e.length;i++)if(r=r.get(e[i]),r===void 0)return;return r.get(e[e.length-1])}set(e,r){let i=this.weakMap;for(let a=0;a<e.length;a++){const o=e[a];i.has(o)===!1&&i.set(o,new WeakMap),i=i.get(o)}return i.set(e[e.length-1],r)}delete(e){let r=this.weakMap;for(let i=0;i<e.length;i++)if(r=r.get(e[i]),r===void 0)return!1;return r.delete(e[e.length-1])}}let q8t=0;function Y8t(n){const e=Object.keys(n);let r=Object.getPrototypeOf(n);for(;r;){const i=Object.getOwnPropertyDescriptors(r);for(const a in i)if(i[a]!==void 0){const o=i[a];o&&typeof o.get=="function"&&e.push(a)}r=Object.getPrototypeOf(r)}return e}class X8t{constructor(e,r,i,a,o,s,l,c,u,d){this._nodes=e,this._geometries=r,this.id=q8t++,this.renderer=i,this.object=a,this.material=o,this.scene=s,this.camera=l,this.lightsNode=c,this.context=u,this.geometry=a.geometry,this.version=o.version,this.drawRange=null,this.attributes=null,this.pipeline=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.clippingContext=d,this.clippingContextCacheKey=d!==null?d.cacheKey:"",this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.material.addEventListener("dispose",this.onMaterialDispose)}updateClipping(e){this.clippingContext=e}get clippingNeedsUpdate(){return this.clippingContext===null||this.clippingContext.cacheKey===this.clippingContextCacheKey?!1:(this.clippingContextCacheKey=this.clippingContext.cacheKey,!0)}get hardwareClippingPlanes(){return this.material.hardwareClipping===!0?this.clippingContext.unionClippingCount:0}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().monitor)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getIndex(){return this._geometries.getIndex(this)}getIndirect(){return this._geometries.getIndirect(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}setGeometry(e){this.geometry=e,this.attributes=null}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,r=this.geometry,i=[],a=new Set;for(const o of e){const s=o.node&&o.node.attribute?o.node.attribute:r.getAttribute(o.name);if(s===void 0)continue;i.push(s);const l=s.isInterleavedBufferAttribute?s.data:s;a.add(l)}return this.attributes=i,this.vertexBuffers=Array.from(a.values()),i}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){const{object:e,material:r,geometry:i,group:a,drawRange:o}=this,s=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),l=this.getIndex(),c=l!==null,u=i.isInstancedBufferGeometry?i.instanceCount:e.count>1?e.count:1;if(u===0)return null;if(s.instanceCount=u,e.isBatchedMesh===!0)return s;let d=1;r.wireframe===!0&&!e.isPoints&&!e.isLineSegments&&!e.isLine&&!e.isLineLoop&&(d=2);let f=o.start*d,h=(o.start+o.count)*d;a!==null&&(f=Math.max(f,a.start*d),h=Math.min(h,(a.start+a.count)*d));const p=i.attributes.position;let g=1/0;c?g=l.count:p!=null&&(g=p.count),f=Math.max(f,0),h=Math.min(h,g);const m=h-f;return m<0||m===1/0?null:(s.vertexCount=m,s.firstVertex=f,s)}getGeometryCacheKey(){const{geometry:e}=this;let r="";for(const i of Object.keys(e.attributes).sort()){const a=e.attributes[i];r+=i+",",a.data&&(r+=a.data.stride+","),a.offset&&(r+=a.offset+","),a.itemSize&&(r+=a.itemSize+","),a.normalized&&(r+="n,")}return e.index&&(r+="index,"),r}getMaterialCacheKey(){const{object:e,material:r}=this;let i=r.customProgramCacheKey();for(const a of Y8t(r)){if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(a))continue;const o=r[a];let s;if(o!==null){const l=typeof o;l==="number"?s=o!==0?"1":"0":l==="object"?(s="{",o.isTexture&&(s+=o.mapping),s+="}"):s=String(o)}else s=String(o);i+=s+","}return i+=this.clippingContextCacheKey+",",e.geometry&&(i+=this.getGeometryCacheKey()),e.skeleton&&(i+=e.skeleton.bones.length+","),e.morphTargetInfluences&&(i+=e.morphTargetInfluences.length+","),e.isBatchedMesh&&(i+=e._matricesTexture.uuid+",",e._colorsTexture!==null&&(i+=e._colorsTexture.uuid+",")),e.count>1&&(i+=e.uuid+","),i+=e.receiveShadow+",",TLt(i)}get needsGeometryUpdate(){return this.geometry.id!==this.object.geometry.id}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=this._nodes.getCacheKey(this.scene,this.lightsNode);return this.object.receiveShadow&&(e+=1),e}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.onDispose()}}const lb=[];class K8t{constructor(e,r,i,a,o,s){this.renderer=e,this.nodes=r,this.geometries=i,this.pipelines=a,this.bindings=o,this.info=s,this.chainMaps={}}get(e,r,i,a,o,s,l,c){const u=this.getChainMap(c);lb[0]=e,lb[1]=r,lb[2]=s,lb[3]=o;let d=u.get(lb);return d===void 0?(d=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,r,i,a,o,s,l,c),u.set(lb,d)):(d.updateClipping(l),d.needsGeometryUpdate&&d.setGeometry(e.geometry),(d.version!==r.version||d.needsUpdate)&&(d.initialCacheKey!==d.getCacheKey()?(d.dispose(),d=this.get(e,r,i,a,o,s,l,c)):d.version=r.version)),d}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new ch)}dispose(){this.chainMaps={}}createRenderObject(e,r,i,a,o,s,l,c,u,d,f){const h=this.getChainMap(f),p=new X8t(e,r,i,a,o,s,l,c,u,d);return p.onDispose=()=>{this.pipelines.delete(p),this.bindings.delete(p),this.nodes.delete(p),h.delete(p.getChainArray())},p}}class xv{constructor(){this.data=new WeakMap}get(e){let r=this.data.get(e);return r===void 0&&(r={},this.data.set(e,r)),r}delete(e){let r;return this.data.has(e)&&(r=this.data.get(e),this.data.delete(e)),r}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}const Hf={VERTEX:1,INDEX:2,STORAGE:3,INDIRECT:4},Xg=16,Z8t=211,Q8t=212;class J8t extends xv{constructor(e){super(),this.backend=e}delete(e){const r=super.delete(e);return r!==void 0&&this.backend.destroyAttribute(e),r}update(e,r){const i=this.get(e);if(i.version===void 0)r===Hf.VERTEX?this.backend.createAttribute(e):r===Hf.INDEX?this.backend.createIndexAttribute(e):r===Hf.STORAGE?this.backend.createStorageAttribute(e):r===Hf.INDIRECT&&this.backend.createIndirectStorageAttribute(e),i.version=this._getBufferAttribute(e).version;else{const a=this._getBufferAttribute(e);(i.version<a.version||a.usage===Gb)&&(this.backend.updateAttribute(e),i.version=a.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function e$t(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function APe(n){return n.index!==null?n.index.version:n.attributes.position.version}function bme(n){const e=[],r=n.index,i=n.attributes.position;if(r!==null){const o=r.array;for(let s=0,l=o.length;s<l;s+=3){const c=o[s+0],u=o[s+1],d=o[s+2];e.push(c,u,u,d,d,c)}}else{const o=i.array;for(let s=0,l=o.length/3-1;s<l;s+=3){const c=s+0,u=s+1,d=s+2;e.push(c,u,u,d,d,c)}}const a=new(e$t(e)?sZ:oZ)(e,1);return a.version=APe(n),a}class t$t extends xv{constructor(e,r){super(),this.attributes=e,this.info=r,this.wireframes=new WeakMap,this.attributeCall=new WeakMap}has(e){const r=e.geometry;return super.has(r)&&this.get(r).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const r=e.geometry,i=this.get(r);i.initialized=!0,this.info.memory.geometries++;const a=()=>{this.info.memory.geometries--;const o=r.index,s=e.getAttributes();o!==null&&this.attributes.delete(o);for(const c of s)this.attributes.delete(c);const l=this.wireframes.get(r);l!==void 0&&this.attributes.delete(l),r.removeEventListener("dispose",a)};r.addEventListener("dispose",a)}updateAttributes(e){const r=e.getAttributes();for(const o of r)o.isStorageBufferAttribute||o.isStorageInstancedBufferAttribute?this.updateAttribute(o,Hf.STORAGE):this.updateAttribute(o,Hf.VERTEX);const i=this.getIndex(e);i!==null&&this.updateAttribute(i,Hf.INDEX);const a=e.geometry.indirect;a!==null&&this.updateAttribute(a,Hf.INDIRECT)}updateAttribute(e,r){const i=this.info.render.calls;e.isInterleavedBufferAttribute?this.attributeCall.get(e)===void 0?(this.attributes.update(e,r),this.attributeCall.set(e,i)):this.attributeCall.get(e.data)!==i&&(this.attributes.update(e,r),this.attributeCall.set(e.data,i),this.attributeCall.set(e,i)):this.attributeCall.get(e)!==i&&(this.attributes.update(e,r),this.attributeCall.set(e,i))}getIndirect(e){return e.geometry.indirect}getIndex(e){const{geometry:r,material:i}=e;let a=r.index;if(i.wireframe===!0){const o=this.wireframes;let s=o.get(r);s===void 0?(s=bme(r),o.set(r,s)):s.version!==APe(r)&&(this.attributes.delete(s),s=bme(r),o.set(r,s)),a=s}return a}}class n$t{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0,previousFrameCalls:0,timestampCalls:0},this.compute={calls:0,frameCalls:0,timestamp:0,previousFrameCalls:0,timestampCalls:0},this.memory={geometries:0,textures:0}}update(e,r,i){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=i*(r/3):e.isPoints?this.render.points+=i*r:e.isLineSegments?this.render.lines+=i*(r/2):e.isLine?this.render.lines+=i*(r-1):console.error("THREE.WebGPUInfo: Unknown object type.")}updateTimestamp(e,r){this[e].timestampCalls===0&&(this[e].timestamp=0),this[e].timestamp+=r,this[e].timestampCalls++,this[e].timestampCalls>=this[e].previousFrameCalls&&(this[e].timestampCalls=0)}reset(){const e=this.render.frameCalls;this.render.previousFrameCalls=e;const r=this.compute.frameCalls;this.compute.previousFrameCalls=r,this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class RPe{constructor(e){this.cacheKey=e,this.usedTimes=0}}class r$t extends RPe{constructor(e,r,i){super(e),this.vertexProgram=r,this.fragmentProgram=i}}class i$t extends RPe{constructor(e,r){super(e),this.computeProgram=r,this.isComputePipeline=!0}}let a$t=0;class Qz{constructor(e,r,i=null,a=null){this.id=a$t++,this.code=e,this.stage=r,this.transforms=i,this.attributes=a,this.usedTimes=0}}class o$t extends xv{constructor(e,r){super(),this.backend=e,this.nodes=r,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,r){const{backend:i}=this,a=this.get(e);if(this._needsComputeUpdate(e)){const o=a.pipeline;o&&(o.usedTimes--,o.computeProgram.usedTimes--);const s=this.nodes.getForCompute(e);let l=this.programs.compute.get(s.computeShader);l===void 0&&(o&&o.computeProgram.usedTimes===0&&this._releaseProgram(o.computeProgram),l=new Qz(s.computeShader,"compute",s.transforms,s.nodeAttributes),this.programs.compute.set(s.computeShader,l),i.createProgram(l));const c=this._getComputeCacheKey(e,l);let u=this.caches.get(c);u===void 0&&(o&&o.usedTimes===0&&this._releasePipeline(o),u=this._getComputePipeline(e,l,c,r)),u.usedTimes++,l.usedTimes++,a.version=e.version,a.pipeline=u}return a.pipeline}getForRender(e,r=null){const{backend:i}=this,a=this.get(e);if(this._needsRenderUpdate(e)){const o=a.pipeline;o&&(o.usedTimes--,o.vertexProgram.usedTimes--,o.fragmentProgram.usedTimes--);const s=e.getNodeBuilderState();let l=this.programs.vertex.get(s.vertexShader);l===void 0&&(o&&o.vertexProgram.usedTimes===0&&this._releaseProgram(o.vertexProgram),l=new Qz(s.vertexShader,"vertex"),this.programs.vertex.set(s.vertexShader,l),i.createProgram(l));let c=this.programs.fragment.get(s.fragmentShader);c===void 0&&(o&&o.fragmentProgram.usedTimes===0&&this._releaseProgram(o.fragmentProgram),c=new Qz(s.fragmentShader,"fragment"),this.programs.fragment.set(s.fragmentShader,c),i.createProgram(c));const u=this._getRenderCacheKey(e,l,c);let d=this.caches.get(u);d===void 0?(o&&o.usedTimes===0&&this._releasePipeline(o),d=this._getRenderPipeline(e,l,c,u,r)):e.pipeline=d,d.usedTimes++,l.usedTimes++,c.usedTimes++,a.pipeline=d}return a.pipeline}delete(e){const r=this.get(e).pipeline;return r&&(r.usedTimes--,r.usedTimes===0&&this._releasePipeline(r),r.isComputePipeline?(r.computeProgram.usedTimes--,r.computeProgram.usedTimes===0&&this._releaseProgram(r.computeProgram)):(r.fragmentProgram.usedTimes--,r.vertexProgram.usedTimes--,r.vertexProgram.usedTimes===0&&this._releaseProgram(r.vertexProgram),r.fragmentProgram.usedTimes===0&&this._releaseProgram(r.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,r,i,a){i=i||this._getComputeCacheKey(e,r);let o=this.caches.get(i);return o===void 0&&(o=new i$t(i,r),this.caches.set(i,o),this.backend.createComputePipeline(o,a)),o}_getRenderPipeline(e,r,i,a,o){a=a||this._getRenderCacheKey(e,r,i);let s=this.caches.get(a);return s===void 0&&(s=new r$t(a,r,i),this.caches.set(a,s),e.pipeline=s,this.backend.createRenderPipeline(e,o)),s}_getComputeCacheKey(e,r){return e.id+","+r.id}_getRenderCacheKey(e,r,i){return r.id+","+i.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const r=e.code,i=e.stage;this.programs[i].delete(r)}_needsComputeUpdate(e){const r=this.get(e);return r.pipeline===void 0||r.version!==e.version}_needsRenderUpdate(e){return this.get(e).pipeline===void 0||this.backend.needsRenderUpdate(e)}}class s$t extends xv{constructor(e,r,i,a,o,s){super(),this.backend=e,this.textures=i,this.pipelines=o,this.attributes=a,this.nodes=r,this.info=s,this.pipelines.bindings=this}getForRender(e){const r=e.getBindings();for(const i of r){const a=this.get(i);a.bindGroup===void 0&&(this._init(i),this.backend.createBindings(i,r,0),a.bindGroup=i)}return r}getForCompute(e){const r=this.nodes.getForCompute(e).bindings;for(const i of r){const a=this.get(i);a.bindGroup===void 0&&(this._init(i),this.backend.createBindings(i,r,0),a.bindGroup=i)}return r}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}_updateBindings(e){for(const r of e)this._update(r,e)}_init(e){for(const r of e.bindings)if(r.isSampledTexture)this.textures.updateTexture(r.texture);else if(r.isStorageBuffer){const i=r.attribute,a=i.isIndirectStorageBufferAttribute?Hf.INDIRECT:Hf.STORAGE;this.attributes.update(i,a)}}_update(e,r){const{backend:i}=this;let a=!1,o=!0,s=0,l=0;for(const c of e.bindings)if(!(c.isNodeUniformsGroup&&!this.nodes.updateGroup(c))){if(c.isUniformBuffer)c.update()&&i.updateBinding(c);else if(c.isSampler)c.update();else if(c.isSampledTexture){const u=this.textures.get(c.texture);c.needsBindingsUpdate(u.generation)&&(a=!0);const d=c.update(),f=c.texture;d&&this.textures.updateTexture(f);const h=i.get(f);if(h.externalTexture!==void 0||u.isDefaultTexture?o=!1:(s=s*10+f.id,l+=f.version),i.isWebGPUBackend===!0&&h.texture===void 0&&h.externalTexture===void 0&&(console.error("Bindings._update: binding should be available:",c,d,f,c.textureNode.value,a),this.textures.updateTexture(f),a=!0),f.isStorageTexture===!0){const p=this.get(f);c.store===!0?p.needsMipmap=!0:this.textures.needsMipmaps(f)&&p.needsMipmap===!0&&(this.backend.generateMipmaps(f),p.needsMipmap=!1)}}}a===!0&&this.backend.updateBindings(e,r,o?s:0,l)}}function l$t(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function xme(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function _me(n){return(n.transmission>0||n.transmissionNode)&&n.side===dl&&n.forceSinglePass===!1}class c$t{constructor(e,r,i){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparentDoublePass=[],this.transparent=[],this.bundles=[],this.lightsNode=e.getNode(r,i),this.lightsArray=[],this.scene=r,this.camera=i,this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparentDoublePass.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,r,i,a,o,s,l){let c=this.renderItems[this.renderItemsIndex];return c===void 0?(c={id:e.id,object:e,geometry:r,material:i,groupOrder:a,renderOrder:e.renderOrder,z:o,group:s,clippingContext:l},this.renderItems[this.renderItemsIndex]=c):(c.id=e.id,c.object=e,c.geometry=r,c.material=i,c.groupOrder=a,c.renderOrder=e.renderOrder,c.z=o,c.group=s,c.clippingContext=l),this.renderItemsIndex++,c}push(e,r,i,a,o,s,l){const c=this.getNextRenderItem(e,r,i,a,o,s,l);e.occlusionTest===!0&&this.occlusionQueryCount++,i.transparent===!0||i.transmission>0?(_me(i)&&this.transparentDoublePass.push(c),this.transparent.push(c)):this.opaque.push(c)}unshift(e,r,i,a,o,s,l){const c=this.getNextRenderItem(e,r,i,a,o,s,l);i.transparent===!0||i.transmission>0?(_me(i)&&this.transparentDoublePass.unshift(c),this.transparent.unshift(c)):this.opaque.unshift(c)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}sort(e,r){this.opaque.length>1&&this.opaque.sort(e||l$t),this.transparentDoublePass.length>1&&this.transparentDoublePass.sort(r||xme),this.transparent.length>1&&this.transparent.sort(r||xme)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,r=this.renderItems.length;e<r;e++){const i=this.renderItems[e];if(i.id===null)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.groupOrder=null,i.renderOrder=null,i.z=null,i.group=null,i.clippingContext=null}}}class u$t{constructor(e){this.lighting=e,this.lists=new ch}get(e,r){const i=this.lists,a=[e,r];let o=i.get(a);return o===void 0&&(o=new c$t(this.lighting,e,r),i.set(a,o)),o}dispose(){this.lists=new ch}}let d$t=0;class f$t{constructor(){this.id=d$t++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new sr,this.scissor=!1,this.scissorValue=new sr,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.sampleCount=1,this.width=0,this.height=0,this.isRenderContext=!0}getCacheKey(){return PPe(this)}}function PPe(n){const{textures:e,activeCubeFace:r}=n,i=[r];for(const a of e)i.push(a.id);return hRe(i)}class h$t{constructor(){this.chainMaps={}}get(e,r,i=null){const a=[e,r];let o;if(i===null)o="default";else{const c=i.texture.format;o=`${i.textures.length}:${c}:${i.samples}:${i.depthBuffer}:${i.stencilBuffer}`}const s=this.getChainMap(o);let l=s.get(a);return l===void 0&&(l=new f$t,s.set(a,l)),i!==null&&(l.sampleCount=i.samples===0?1:i.samples),l}getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new ch)}dispose(){this.chainMaps={}}}const p$t=new ge;class g$t extends xv{constructor(e,r,i){super(),this.renderer=e,this.backend=r,this.info=i}updateRenderTarget(e,r=0){const i=this.get(e),a=e.samples===0?1:e.samples,o=i.depthTextureMips||(i.depthTextureMips={}),s=e.textures,l=this.getSize(s[0]),c=l.width>>r,u=l.height>>r;let d=e.depthTexture||o[r];const f=e.depthBuffer===!0||e.stencilBuffer===!0;let h=!1;d===void 0&&f&&(d=new vv,d.format=e.stencilBuffer?ih:Jf,d.type=e.stencilBuffer?rh:Ca,d.image.width=c,d.image.height=u,o[r]=d),(i.width!==l.width||l.height!==i.height)&&(h=!0,d&&(d.needsUpdate=!0,d.image.width=c,d.image.height=u)),i.width=l.width,i.height=l.height,i.textures=s,i.depthTexture=d||null,i.depth=e.depthBuffer,i.stencil=e.stencilBuffer,i.renderTarget=e,i.sampleCount!==a&&(h=!0,d&&(d.needsUpdate=!0),i.sampleCount=a);const p={sampleCount:a};for(let g=0;g<s.length;g++){const m=s[g];h&&(m.needsUpdate=!0),this.updateTexture(m,p)}if(d&&this.updateTexture(d,p),i.initialized!==!0){i.initialized=!0;const g=()=>{e.removeEventListener("dispose",g);for(let m=0;m<s.length;m++)this._destroyTexture(s[m]);d&&this._destroyTexture(d),this.delete(e)};e.addEventListener("dispose",g)}}updateTexture(e,r={}){const i=this.get(e);if(i.initialized===!0&&i.version===e.version)return;const a=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,o=this.backend;if(a&&i.initialized===!0&&(o.destroySampler(e),o.destroyTexture(e)),e.isFramebufferTexture){const u=this.renderer.getRenderTarget();u?e.type=u.texture.type:e.type=Ws}const{width:s,height:l,depth:c}=this.getSize(e);if(r.width=s,r.height=l,r.depth=c,r.needsMipmaps=this.needsMipmaps(e),r.levels=r.needsMipmaps?this.getMipLevels(e,s,l):1,a||e.isStorageTexture===!0)o.createSampler(e),o.createTexture(e,r),i.generation=e.version;else if(i.initialized!==!0&&o.createSampler(e),e.version>0){const d=e.image;if(d===void 0)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(d.complete===!1)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const f=[];for(const h of e.images)f.push(h);r.images=f}else r.image=d;(i.isDefaultTexture===void 0||i.isDefaultTexture===!0)&&(o.createTexture(e,r),i.isDefaultTexture=!1,i.generation=e.version),e.source.dataReady===!0&&o.updateTexture(e,r),r.needsMipmaps&&e.mipmaps.length===0&&o.generateMipmaps(e)}}else o.createDefaultTexture(e),i.isDefaultTexture=!0,i.generation=e.version;if(i.initialized!==!0){i.initialized=!0,i.generation=e.version,this.info.memory.textures++;const u=()=>{e.removeEventListener("dispose",u),this._destroyTexture(e),this.info.memory.textures--};e.addEventListener("dispose",u)}i.version=e.version}getSize(e,r=p$t){let i=e.images?e.images[0]:e.image;return i?(i.image!==void 0&&(i=i.image),r.width=i.width||1,r.height=i.height||1,r.depth=e.isCubeTexture?6:i.depth||1):r.width=r.height=r.depth=1,r}getMipLevels(e,r,i){let a;return e.isCompressedTexture?e.mipmaps?a=e.mipmaps.length:a=1:a=Math.floor(Math.log2(Math.max(r,i)))+1,a}needsMipmaps(e){return this.isEnvironmentTexture(e)||e.isCompressedTexture===!0||e.generateMipmaps}isEnvironmentTexture(e){const r=e.mapping;return r===Zm||r===Qm||r===qu||r===Yu}_destroyTexture(e){this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e)}}class jZ extends Tn{constructor(e,r,i,a=1){super(e,r,i),this.a=a}set(e,r,i,a=1){return this.a=a,super.set(e,r,i)}copy(e){return e.a!==void 0&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}class m$t extends vi{static get type(){return"ParameterNode"}constructor(e,r=null){super(e,r),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}class v$t extends fr{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this.isStackNode=!0}getNodeType(e){return this.outputNode?this.outputNode.getNodeType(e):"void"}add(e){return this.nodes.push(e),this}If(e,r){const i=new NP(r);return this._currentCond=Xl(e,i),this.add(this._currentCond)}ElseIf(e,r){const i=new NP(r),a=Xl(e,i);return this._currentCond.elseNode=a,this._currentCond=a,this}Else(e){return this._currentCond.elseNode=new NP(e),this}build(e,...r){const i=_Re();GO(this);for(const a of this.nodes)a.build(e,"void");return GO(i),this.outputNode?this.outputNode.build(e,...r):super.build(e,...r)}else(...e){return console.warn("TSL.StackNode: .else() has been renamed to .Else()."),this.Else(...e)}elseif(...e){return console.warn("TSL.StackNode: .elseif() has been renamed to .ElseIf()."),this.ElseIf(...e)}}const Jz=Ct(v$t);new Pd;new ge;new ge;new ge;new jr;new ge(0,0,-1);new sr;new ge;new ge;new sr;new Nt;const y$t=new uw;$C.flipX();y$t.depthTexture=new vv(1,1);const eU=new qM(-1,1,1,-1,0,1);class b$t extends Qs{constructor(e=!1){super();const r=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new Qa([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Qa(r,2))}}const x$t=new b$t;class NPe extends ko{constructor(e=null){super(x$t,e),this.camera=eU,this.isQuadMesh=!0}renderAsync(e){return e.renderAsync(this,eU)}render(e){e.render(this,eU)}}const $S=new Hc,tU=new jr;class Zl extends fr{static get type(){return"SceneNode"}constructor(e=Zl.BACKGROUND_BLURRINESS,r=null){super(),this.scope=e,this.scene=r}setup(e){const r=this.scope,i=this.scene!==null?this.scene:e.scene;let a;return r===Zl.BACKGROUND_BLURRINESS?a=Si("backgroundBlurriness","float",i):r===Zl.BACKGROUND_INTENSITY?a=Si("backgroundIntensity","float",i):r===Zl.BACKGROUND_ROTATION?a=lr("mat4").label("backgroundRotation").setGroup(rr).onRenderUpdate(()=>{const o=i.background;return o!==null&&o.isTexture&&o.mapping!==WK?($S.copy(i.backgroundRotation),$S.x*=-1,$S.y*=-1,$S.z*=-1,tU.makeRotationFromEuler($S)):tU.identity(),tU}):console.error("THREE.SceneNode: Unknown scope:",r),a}}Zl.BACKGROUND_BLURRINESS="backgroundBlurriness";Zl.BACKGROUND_INTENSITY="backgroundIntensity";Zl.BACKGROUND_ROTATION="backgroundRotation";const _$t=Kt(Zl,Zl.BACKGROUND_BLURRINESS),wme=Kt(Zl,Zl.BACKGROUND_INTENSITY),w$t=Kt(Zl,Zl.BACKGROUND_ROTATION),S$t=new Nt;class E$t extends QM{static get type(){return"PassTextureNode"}constructor(e,r){super(r),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return e.object.isQuadMesh&&this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class Sme extends E$t{static get type(){return"PassMultipleTextureNode"}constructor(e,r,i=!1){super(e,null),this.textureName=r,this.previousTexture=i}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){return new this.constructor(this.passNode,this.textureName,this.previousTexture)}}class JL extends bo{static get type(){return"PassNode"}constructor(e,r,i,a={}){super("vec4"),this.scope=e,this.scene=r,this.camera=i,this.options=a,this._pixelRatio=1,this._width=1,this._height=1;const o=new vv;o.isRenderTargetTexture=!0,o.name="depth";const s=new uw(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:vl,...a});s.texture.name="output",s.depthTexture=o,this.renderTarget=s,this.updateBeforeType=Tr.FRAME,this._textures={output:s.texture,depth:o},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=lr(0),this._cameraFar=lr(0),this._mrt=null,this.isPassNode=!0}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}isGlobal(){return!0}getTexture(e){let r=this._textures[e];return r===void 0&&(r=this.renderTarget.texture.clone(),r.isRenderTargetTexture=!0,r.name=e,this._textures[e]=r,this.renderTarget.textures.push(r)),r}getPreviousTexture(e){let r=this._previousTextures[e];return r===void 0&&(r=this.getTexture(e).clone(),r.isRenderTargetTexture=!0,this._previousTextures[e]=r),r}toggleTexture(e){const r=this._previousTextures[e];if(r!==void 0){const i=this._textures[e],a=this.renderTarget.textures.indexOf(i);this.renderTarget.textures[a]=r,this._textures[e]=r,this._previousTextures[e]=i,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let r=this._textureNodes[e];return r===void 0&&(r=Ht(new Sme(this,e)),r.updateTexture(),this._textureNodes[e]=r),r}getPreviousTextureNode(e="output"){let r=this._previousTextureNodes[e];return r===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),r=Ht(new Sme(this,e,!0)),r.updateTexture(),this._previousTextureNodes[e]=r),r}getViewZNode(e="depth"){let r=this._viewZNodes[e];if(r===void 0){const i=this._cameraNear,a=this._cameraFar;this._viewZNodes[e]=r=uPe(this.getTextureNode(e),i,a)}return r}getLinearDepthNode(e="depth"){let r=this._linearDepthNodes[e];if(r===void 0){const i=this._cameraNear,a=this._cameraFar,o=this.getViewZNode(e);this._linearDepthNodes[e]=r=rE(o,i,a)}return r}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,e.backend.isWebGLBackend===!0&&(this.renderTarget.samples=0),this.renderTarget.depthTexture.isMultisampleRenderTargetTexture=this.renderTarget.samples>1,this.scope===JL.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:r}=e,{scene:i,camera:a}=this;this._pixelRatio=r.getPixelRatio();const o=r.getSize(S$t);this.setSize(o.width,o.height);const s=r.getRenderTarget(),l=r.getMRT();this._cameraNear.value=a.near,this._cameraFar.value=a.far;for(const c in this._previousTextures)this.toggleTexture(c);r.setRenderTarget(this.renderTarget),r.setMRT(this._mrt),r.render(i,a),r.setRenderTarget(s),r.setMRT(l)}setSize(e,r){this._width=e,this._height=r;const i=this._width*this._pixelRatio,a=this._height*this._pixelRatio;this.renderTarget.setSize(i,a)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}JL.COLOR="color";JL.DEPTH="depth";const C$t=Xt(([n,e])=>n.mul(e).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),M$t=Xt(([n,e])=>(n=n.mul(e),n.div(n.add(1)).clamp())).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),T$t=Xt(([n,e])=>{n=n.mul(e),n=n.sub(.004).max(0);const r=n.mul(n.mul(6.2).add(.5)),i=n.mul(n.mul(6.2).add(1.7)).add(.06);return r.div(i).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),A$t=Xt(([n])=>{const e=n.mul(n.add(.0245786)).sub(90537e-9),r=n.mul(n.add(.432951).mul(.983729)).add(.238081);return e.div(r)}),R$t=Xt(([n,e])=>{const r=_l(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),i=_l(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return n=n.mul(e).div(.6),n=r.mul(n),n=A$t(n),n=i.mul(n),n.clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),P$t=_l(yt(1.6605,-.1246,-.0182),yt(-.5876,1.1329,-.1006),yt(-.0728,-.0083,1.1187)),N$t=_l(yt(.6274,.0691,.0164),yt(.3293,.9195,.088),yt(.0433,.0113,.8956)),O$t=Xt(([n])=>{const e=yt(n).toVar(),r=yt(e.mul(e)).toVar(),i=yt(r.mul(r)).toVar();return ht(15.5).mul(i.mul(r)).sub(Or(40.14,i.mul(e))).add(Or(31.96,i).sub(Or(6.868,r.mul(e))).add(Or(.4298,r).add(Or(.1191,e).sub(.00232))))}),I$t=Xt(([n,e])=>{const r=yt(n).toVar(),i=_l(yt(.856627153315983,.137318972929847,.11189821299995),yt(.0951212405381588,.761241990602591,.0767994186031903),yt(.0482516061458583,.101439036467562,.811302368396859)),a=_l(yt(1.1271005818144368,-.1413297634984383,-.14132976349843826),yt(-.11060664309660323,1.157823702216272,-.11060664309660294),yt(-.016493938717834573,-.016493938717834257,1.2519364065950405)),o=ht(-12.47393),s=ht(4.026069);return r.mulAssign(e),r.assign(N$t.mul(r)),r.assign(i.mul(r)),r.assign(ic(r,1e-10)),r.assign(Cp(r)),r.assign(r.sub(o).div(s.sub(o))),r.assign(Up(r,0,1)),r.assign(O$t(r)),r.assign(a.mul(r)),r.assign(HL(ic(yt(0),r),yt(2.2))),r.assign(P$t.mul(r)),r.assign(Up(r,0,1)),r}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),D$t=Xt(([n,e])=>{const r=ht(.76),i=ht(.15);n=n.mul(e);const a=DC(n.r,DC(n.g,n.b)),o=Xl(a.lessThan(.08),a.sub(Or(6.25,a.mul(a))),.04);n.subAssign(o);const s=ic(n.r,ic(n.g,n.b));po(s.lessThan(r),()=>n);const l=jl(1,r),c=jl(1,l.mul(l).div(s.add(l.sub(r))));n.mulAssign(c.div(s));const u=jl(1,zp(1,i.mul(s.sub(c)).add(1)));return ea(n,yt(c),u)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class Mo extends fr{static get type(){return"CodeNode"}constructor(e="",r=[],i=""){super("code"),this.isCodeNode=!0,this.code=e,this.language=i,this.includes=r}isGlobal(){return!0}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const r=this.getIncludes(e);for(const a of r)a.build(e);const i=e.getCodeFromNode(this,this.getNodeType(e));return i.code=this.code,i.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}class L$t extends Mo{static get type(){return"FunctionNode"}constructor(e="",r=[],i=""){super(e,r,i)}getNodeType(e){return this.getNodeFunction(e).type}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const r=e.getDataFromNode(this);let i=r.nodeFunction;return i===void 0&&(i=e.parser.parseFunction(this.code),r.nodeFunction=i),i}generate(e,r){super.generate(e);const i=this.getNodeFunction(e),a=i.name,o=i.type,s=e.getCodeFromNode(this,o);a!==""&&(s.name=a);const l=e.getPropertyName(s),c=this.getNodeFunction(e).getCode(l);return s.code=c+`
`,r==="property"?l:e.format(`${l}()`,o,r)}}class OPe extends fr{static get type(){return"FogNode"}constructor(e,r){super("float"),this.isFogNode=!0,this.colorNode=e,this.factorNode=r}getViewZNode(e){let r;const i=e.context.getViewZ;return i!==void 0&&(r=i(this)),(r||No.z).negate()}setup(){return this.factorNode}}class k$t extends OPe{static get type(){return"FogRangeNode"}constructor(e,r,i){super(e),this.isFogRangeNode=!0,this.nearNode=r,this.farNode=i}setup(e){const r=this.getViewZNode(e);return Ay(this.nearNode,this.farNode,r)}}const F$t=Ct(k$t);class $$t extends OPe{static get type(){return"FogExp2Node"}constructor(e,r){super(e),this.isFogExp2Node=!0,this.densityNode=r}setup(e){const r=this.getViewZNode(e),i=this.densityNode;return i.mul(i,r,r).negate().exp().oneMinus()}}const B$t=Ct($$t);class z$t extends fr{constructor(e){super(),this.scope=e}generate(e){const{scope:r}=this,{renderer:i}=e;i.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${r}Barrier 
`):e.addLineFlowCode(`${r}Barrier()`,this)}}Ct(z$t);class xh extends bo{static get type(){return"AtomicFunctionNode"}constructor(e,r,i,a=null){super("uint"),this.method=e,this.pointerNode=r,this.valueNode=i,this.storeNode=a}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const r=this.method,i=this.getNodeType(e),a=this.getInputType(e),o=this.pointerNode,s=this.valueNode,l=[];l.push(`&${o.build(e,a)}`),l.push(s.build(e,a));const c=`${e.getMethod(r,i)}( ${l.join(", ")} )`;if(this.storeNode!==null){const u=this.storeNode.build(e,a);e.addLineFlowCode(`${u} = ${c}`,this)}else e.addLineFlowCode(c,this)}}xh.ATOMIC_LOAD="atomicLoad";xh.ATOMIC_STORE="atomicStore";xh.ATOMIC_ADD="atomicAdd";xh.ATOMIC_SUB="atomicSub";xh.ATOMIC_MAX="atomicMax";xh.ATOMIC_MIN="atomicMin";xh.ATOMIC_AND="atomicAnd";xh.ATOMIC_OR="atomicOr";xh.ATOMIC_XOR="atomicXor";Ct(xh);let xR;function JM(n){xR=xR||new WeakMap;let e=xR.get(n);return e===void 0&&xR.set(n,e={}),e}function IPe(n){const e=JM(n);return e.shadowMatrix||(e.shadowMatrix=lr("mat4").setGroup(rr).onRenderUpdate(()=>(n.shadow.updateMatrices(n),n.shadow.matrix)))}function U$t(n){const e=JM(n);if(e.projectionUV===void 0){const r=IPe(n).mul(kC);e.projectionUV=r.xyz.div(r.w)}return e.projectionUV}function DPe(n){const e=JM(n);return e.position||(e.position=lr(new ge).setGroup(rr).onRenderUpdate((r,i)=>i.value.setFromMatrixPosition(n.matrixWorld)))}function V$t(n){const e=JM(n);return e.targetPosition||(e.targetPosition=lr(new ge).setGroup(rr).onRenderUpdate((r,i)=>i.value.setFromMatrixPosition(n.target.matrixWorld)))}function HZ(n){const e=JM(n);return e.viewPosition||(e.viewPosition=lr(new ge).setGroup(rr).onRenderUpdate(({camera:r},i)=>{i.value=i.value||new ge,i.value.setFromMatrixPosition(n.matrixWorld),i.value.applyMatrix4(r.matrixWorldInverse)}))}const LPe=n=>eg.transformDirection(DPe(n).sub(V$t(n))),G$t=n=>n.sort((e,r)=>e.id-r.id),j$t=(n,e)=>{for(const r of e)if(r.isAnalyticLightNode&&r.light.id===n)return r;return null},nU=new WeakMap;class kPe extends fr{static get type(){return"LightsNode"}constructor(){super("vec3"),this.totalDiffuseNode=yt().toVar("totalDiffuse"),this.totalSpecularNode=yt().toVar("totalSpecular"),this.outgoingLightNode=yt().toVar("outgoingLight"),this._lights=[],this._lightNodes=null,this._lightNodesHash=null,this.global=!0}getHash(e){if(this._lightNodesHash===null){this._lightNodes===null&&this.setupLightsNode(e);const r=[];for(const i of this._lightNodes)r.push(i.getSelf().getHash());this._lightNodesHash="lights-"+r.join(",")}return this._lightNodesHash}analyze(e){const r=e.getDataFromNode(this);for(const i of r.nodes)i.build(e)}setupLightsNode(e){const r=[],i=this._lightNodes,a=G$t(this._lights),o=e.renderer.library;for(const s of a)if(s.isNode)r.push(Ht(s));else{let l=null;if(i!==null&&(l=j$t(s.id,i)),l===null){const c=o.getLightNodeClass(s.constructor);if(c===null){console.warn(`LightsNode.setupNodeLights: Light node not found for ${s.constructor.name}`);continue}let u=null;nU.has(s)?u=nU.get(s):(u=Ht(new c(s)),nU.set(s,u)),r.push(u)}}this._lightNodes=r}setupLights(e,r){for(const i of r)i.build(e)}setup(e){this._lightNodes===null&&this.setupLightsNode(e);const r=e.context,i=r.lightingModel;let a=this.outgoingLightNode;if(i){const{_lightNodes:o,totalDiffuseNode:s,totalSpecularNode:l}=this;r.outgoingLight=a;const c=e.addStack(),u=e.getDataFromNode(this);u.nodes=c.nodes,i.start(r,c,e),this.setupLights(e,o),i.indirect(r,c,e);const{backdrop:d,backdropAlpha:f}=r,{directDiffuse:h,directSpecular:p,indirectDiffuse:g,indirectSpecular:m}=r.reflectedLight;let v=h.add(g);d!==null&&(f!==null?v=yt(f.mix(v,d)):v=yt(d),r.material.transparent=!0),s.assign(v),l.assign(p.add(m)),a.assign(s.add(l)),i.finish(r,c,e),a=a.bypass(e.removeStack())}return a}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}get hasLights(){return this._lights.length>0}}const Eme=new WeakMap,Cme=yt().toVar("shadowWorldPosition"),H$t=Xt(([n,e,r])=>{let i=kC.sub(n).length();return i=i.sub(e).div(r.sub(e)),i=i.saturate(),i}),W$t=n=>{const e=n.shadow.camera,r=Si("near","float",e).setGroup(rr),i=Si("far","float",e).setGroup(rr),a=Wkt(n);return H$t(a,r,i)},q$t=n=>{let e=Eme.get(n);if(e===void 0){const r=n.isPointLight?W$t(n):null;e=new vo,e.colorNode=ur(0,0,0,1),e.depthNode=r,e.isShadowNodeMaterial=!0,e.blending=ml,e.name="ShadowMaterial",Eme.set(n,e)}return e},Y$t=Xt(({depthTexture:n,shadowCoord:e})=>ni(n,e.xy).compare(e.z)),X$t=Xt(({depthTexture:n,shadowCoord:e,shadow:r})=>{const i=(m,v)=>ni(n,m).compare(v),a=Si("mapSize","vec2",r).setGroup(rr),o=Si("radius","float",r).setGroup(rr),s=Jt(1).div(a),l=s.x.negate().mul(o),c=s.y.negate().mul(o),u=s.x.mul(o),d=s.y.mul(o),f=l.div(2),h=c.div(2),p=u.div(2),g=d.div(2);return wl(i(e.xy.add(Jt(l,c)),e.z),i(e.xy.add(Jt(0,c)),e.z),i(e.xy.add(Jt(u,c)),e.z),i(e.xy.add(Jt(f,h)),e.z),i(e.xy.add(Jt(0,h)),e.z),i(e.xy.add(Jt(p,h)),e.z),i(e.xy.add(Jt(l,0)),e.z),i(e.xy.add(Jt(f,0)),e.z),i(e.xy,e.z),i(e.xy.add(Jt(p,0)),e.z),i(e.xy.add(Jt(u,0)),e.z),i(e.xy.add(Jt(f,g)),e.z),i(e.xy.add(Jt(0,g)),e.z),i(e.xy.add(Jt(p,g)),e.z),i(e.xy.add(Jt(l,d)),e.z),i(e.xy.add(Jt(0,d)),e.z),i(e.xy.add(Jt(u,d)),e.z)).mul(1/17)}),K$t=Xt(({depthTexture:n,shadowCoord:e,shadow:r})=>{const i=(d,f)=>ni(n,d).compare(f),a=Si("mapSize","vec2",r).setGroup(rr),o=Jt(1).div(a),s=o.x,l=o.y,c=e.xy,u=bv(c.mul(a).add(.5));return c.subAssign(u.mul(o)),wl(i(c,e.z),i(c.add(Jt(s,0)),e.z),i(c.add(Jt(0,l)),e.z),i(c.add(o),e.z),ea(i(c.add(Jt(s.negate(),0)),e.z),i(c.add(Jt(s.mul(2),0)),e.z),u.x),ea(i(c.add(Jt(s.negate(),l)),e.z),i(c.add(Jt(s.mul(2),l)),e.z),u.x),ea(i(c.add(Jt(0,l.negate())),e.z),i(c.add(Jt(0,l.mul(2))),e.z),u.y),ea(i(c.add(Jt(s,l.negate())),e.z),i(c.add(Jt(s,l.mul(2))),e.z),u.y),ea(ea(i(c.add(Jt(s.negate(),l.negate())),e.z),i(c.add(Jt(s.mul(2),l.negate())),e.z),u.x),ea(i(c.add(Jt(s.negate(),l.mul(2))),e.z),i(c.add(Jt(s.mul(2),l.mul(2))),e.z),u.x),u.y)).mul(1/9)}),Z$t=Xt(({depthTexture:n,shadowCoord:e})=>{const r=ht(1).toVar(),i=ni(n).uv(e.xy).rg,a=BRe(e.z,i.x);return po(a.notEqual(ht(1)),()=>{const o=e.z.sub(i.x),s=ic(0,i.y.mul(i.y));let l=s.div(s.add(o.mul(o)));l=Up(jl(l,.3).div(.95-.3)),r.assign(Up(ic(a,l)))}),r}),Q$t=Xt(({samples:n,radius:e,size:r,shadowPass:i})=>{const a=ht(0).toVar(),o=ht(0).toVar(),s=n.lessThanEqual(ht(1)).select(ht(0),ht(2).div(n.sub(1))),l=n.lessThanEqual(ht(1)).select(ht(0),ht(-1));kd({start:Fa(0),end:Fa(n),type:"int",condition:"<"},({i:u})=>{const d=l.add(ht(u).mul(s)),f=i.uv(wl(KL.xy,Jt(0,d).mul(e)).div(r)).x;a.addAssign(f),o.addAssign(f.mul(f))}),a.divAssign(n),o.divAssign(n);const c=OZ(o.sub(a.mul(a)));return Jt(a,c)}),J$t=Xt(({samples:n,radius:e,size:r,shadowPass:i})=>{const a=ht(0).toVar(),o=ht(0).toVar(),s=n.lessThanEqual(ht(1)).select(ht(0),ht(2).div(n.sub(1))),l=n.lessThanEqual(ht(1)).select(ht(0),ht(-1));kd({start:Fa(0),end:Fa(n),type:"int",condition:"<"},({i:u})=>{const d=l.add(ht(u).mul(s)),f=i.uv(wl(KL.xy,Jt(d,0).mul(e)).div(r));a.addAssign(f.x),o.addAssign(wl(f.y.mul(f.y),f.x.mul(f.x)))}),a.divAssign(n),o.divAssign(n);const c=OZ(o.sub(a.mul(a)));return Jt(a,c)}),eBt=[Y$t,X$t,K$t,Z$t],_R=new NPe;class FPe extends fr{static get type(){return"ShadowNode"}constructor(e,r=null){super(),this.light=e,this.shadow=r||e.shadow,this.shadowMap=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this.updateBeforeType=Tr.RENDER,this._node=null,this.isShadowNode=!0}setupShadowFilter(e,{filterFn:r,depthTexture:i,shadowCoord:a,shadow:o}){const s=a.x.greaterThanEqual(0).and(a.x.lessThanEqual(1)).and(a.y.greaterThanEqual(0)).and(a.y.lessThanEqual(1)).and(a.z.lessThanEqual(1)),l=r({depthTexture:i,shadowCoord:a,shadow:o});return s.select(l,ht(1))}setupShadowCoord(e,r){const{shadow:i}=this,{renderer:a}=e,o=Si("bias","float",i).setGroup(rr);let s=r,l;if(i.camera.isOrthographicCamera||a.logarithmicDepthBuffer!==!0)s=s.xyz.div(s.w),l=s.z,a.coordinateSystem===Ty&&(l=l.mul(2).sub(1));else{const c=s.w;s=s.xy.div(c);const u=Si("near","float",i.camera).setGroup(rr),d=Si("far","float",i.camera).setGroup(rr);l=dPe(c.negate(),u,d)}return s=yt(s.x,s.y.oneMinus(),l.add(o)),s}getShadowFilterFn(e){return eBt[e]}setupShadow(e){const{renderer:r}=e,{light:i,shadow:a}=this,o=r.shadowMap.type,s=new vv(a.mapSize.width,a.mapSize.height);s.compareFunction=TL;const l=e.createRenderTarget(a.mapSize.width,a.mapSize.height);if(l.depthTexture=s,a.camera.updateProjectionMatrix(),o===Mc){s.compareFunction=null,this.vsmShadowMapVertical=e.createRenderTarget(a.mapSize.width,a.mapSize.height,{format:My,type:vl}),this.vsmShadowMapHorizontal=e.createRenderTarget(a.mapSize.width,a.mapSize.height,{format:My,type:vl});const y=ni(s),b=ni(this.vsmShadowMapVertical.texture),x=Si("blurSamples","float",a).setGroup(rr),_=Si("radius","float",a).setGroup(rr),S=Si("mapSize","vec2",a).setGroup(rr);let M=this.vsmMaterialVertical||(this.vsmMaterialVertical=new vo);M.fragmentNode=Q$t({samples:x,radius:_,size:S,shadowPass:y}).context(e.getSharedContext()),M.name="VSMVertical",M=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new vo),M.fragmentNode=J$t({samples:x,radius:_,size:S,shadowPass:b}).context(e.getSharedContext()),M.name="VSMHorizontal"}const c=Si("intensity","float",a).setGroup(rr),u=Si("normalBias","float",a).setGroup(rr),d=IPe(i).mul(Cme.add($Z.mul(u))),f=this.setupShadowCoord(e,d),h=a.filterNode||this.getShadowFilterFn(r.shadowMap.type)||null;if(h===null)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");const p=o===Mc?this.vsmShadowMapHorizontal.texture:s,g=this.setupShadowFilter(e,{filterFn:h,shadowTexture:l.texture,depthTexture:p,shadowCoord:f,shadow:a}),m=ni(l.texture,f),v=ea(1,g.rgb.mix(m,1),c.mul(m.a)).toVar();return this.shadowMap=l,this.shadow.map=l,v}setup(e){if(e.renderer.shadowMap.enabled!==!1)return Xt(({material:r})=>{Cme.assign(r.shadowPositionNode||kC);let i=this._node;return i===null&&(this._node=i=this.setupShadow(e)),e.material.shadowNode&&console.warn('THREE.NodeMaterial: ".shadowNode" is deprecated. Use ".castShadowNode" instead.'),e.material.receivedShadowNode&&(i=e.material.receivedShadowNode(i)),i})()}renderShadow(e){const{shadow:r,shadowMap:i}=this,{renderer:a,scene:o}=e;i.setSize(r.mapSize.width,r.mapSize.height),a.render(o,r.camera)}updateShadow(e){const{shadowMap:r,light:i,shadow:a}=this,{renderer:o,scene:s,camera:l}=e,c=o.shadowMap.type,u=r.depthTexture.version;this._depthVersionCached=u;const d=s.overrideMaterial;s.overrideMaterial=q$t(i),a.camera.layers.mask=l.layers.mask;const f=o.getRenderTarget(),h=o.getRenderObjectFunction(),p=o.getMRT();o.setMRT(null),o.setRenderObjectFunction((g,...m)=>{(g.castShadow===!0||g.receiveShadow&&c===Mc)&&o.renderObject(g,...m)}),o.setRenderTarget(r),this.renderShadow(e),o.setRenderObjectFunction(h),i.isPointLight!==!0&&c===Mc&&this.vsmPass(o),o.setRenderTarget(f),o.setMRT(p),s.overrideMaterial=d}vsmPass(e){const{shadow:r}=this;this.vsmShadowMapVertical.setSize(r.mapSize.width,r.mapSize.height),this.vsmShadowMapHorizontal.setSize(r.mapSize.width,r.mapSize.height),e.setRenderTarget(this.vsmShadowMapVertical),_R.material=this.vsmMaterialVertical,_R.render(e),e.setRenderTarget(this.vsmShadowMapHorizontal),_R.material=this.vsmMaterialHorizontal,_R.render(e)}dispose(){this.shadowMap.dispose(),this.shadowMap=null,this.vsmShadowMapVertical!==null&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),this.vsmShadowMapHorizontal!==null&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null),this.updateBeforeType=Tr.NONE}updateBefore(e){const{shadow:r}=this;(r.needsUpdate||r.autoUpdate)&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(r.needsUpdate=!1))}}const tBt=(n,e)=>Ht(new FPe(n,e));class Qy extends mw{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.light=e,this.color=new Tn,this.colorNode=e&&e.colorNode||lr(this.color).setGroup(rr),this.baseColorNode=null,this.shadowNode=null,this.shadowColorNode=null,this.isAnalyticLightNode=!0,this.updateType=Tr.FRAME}getCacheKey(){return pRe(super.getCacheKey(),this.light.id,this.light.castShadow?1:0)}getHash(){return this.light.uuid}setupShadowNode(){return tBt(this.light)}setupShadow(e){const{renderer:r}=e;if(r.shadowMap.enabled===!1)return;let i=this.shadowColorNode;if(i===null){const a=this.light.shadow.shadowNode;let o;a!==void 0?o=Ht(a):o=this.setupShadowNode(e),this.shadowNode=o,this.shadowColorNode=i=this.colorNode.mul(o),this.baseColorNode=this.colorNode}this.colorNode=i}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):this.shadowNode!==null&&(this.shadowNode.dispose(),this.shadowNode=null,this.shadowColorNode=null)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const $Pe=Xt(n=>{const{lightDistance:e,cutoffDistance:r,decayExponent:i}=n,a=e.pow(i).max(.01).reciprocal();return r.greaterThan(0).select(a.mul(e.div(r).pow4().oneMinus().clamp().pow2()),a)}),nBt=new Tn,Cf=Xt(([n,e])=>{const r=n.toVar(),i=Pu(r),a=zp(1,ic(i.x,ic(i.y,i.z)));i.mulAssign(a),r.mulAssign(a.mul(e.mul(2).oneMinus()));const o=Jt(r.xy).toVar(),l=e.mul(1.5).oneMinus();return po(i.z.greaterThanEqual(l),()=>{po(r.z.greaterThan(0),()=>{o.x.assign(jl(4,r.x))})}).ElseIf(i.x.greaterThanEqual(l),()=>{const c=YO(r.x);o.x.assign(r.z.mul(c).add(c.mul(2)))}).ElseIf(i.y.greaterThanEqual(l),()=>{const c=YO(r.y);o.x.assign(r.x.add(c.mul(2)).add(2)),o.y.assign(r.z.mul(c).sub(2))}),Jt(.125,.25).mul(o).add(Jt(.375,.75)).flipY()}).setLayout({name:"cubeToUV",type:"vec2",inputs:[{name:"pos",type:"vec3"},{name:"texelSizeY",type:"float"}]}),rBt=Xt(({depthTexture:n,bd3D:e,dp:r,texelSize:i})=>ni(n,Cf(e,i.y)).compare(r)),iBt=Xt(({depthTexture:n,bd3D:e,dp:r,texelSize:i,shadow:a})=>{const o=Si("radius","float",a).setGroup(rr),s=Jt(-1,1).mul(o).mul(i.y);return ni(n,Cf(e.add(s.xyy),i.y)).compare(r).add(ni(n,Cf(e.add(s.yyy),i.y)).compare(r)).add(ni(n,Cf(e.add(s.xyx),i.y)).compare(r)).add(ni(n,Cf(e.add(s.yyx),i.y)).compare(r)).add(ni(n,Cf(e,i.y)).compare(r)).add(ni(n,Cf(e.add(s.xxy),i.y)).compare(r)).add(ni(n,Cf(e.add(s.yxy),i.y)).compare(r)).add(ni(n,Cf(e.add(s.xxx),i.y)).compare(r)).add(ni(n,Cf(e.add(s.yxx),i.y)).compare(r)).mul(1/9)}),aBt=Xt(({filterFn:n,depthTexture:e,shadowCoord:r,shadow:i})=>{const a=r.xyz.toVar(),o=a.length(),s=lr("float").setGroup(rr).onRenderUpdate(()=>i.camera.near),l=lr("float").setGroup(rr).onRenderUpdate(()=>i.camera.far),c=Si("bias","float",i).setGroup(rr),u=lr(i.mapSize).setGroup(rr),d=ht(1).toVar();return po(o.sub(l).lessThanEqual(0).and(o.sub(s).greaterThanEqual(0)),()=>{const f=o.sub(s).div(l.sub(s)).toVar();f.addAssign(c);const h=a.normalize(),p=Jt(1).div(u.mul(Jt(4,2)));d.assign(n({depthTexture:e,bd3D:h,dp:f,texelSize:p,shadow:i}))}),d}),Mme=new sr,cb=new Nt,BS=new Nt;class oBt extends FPe{static get type(){return"PointShadowNode"}constructor(e,r=null){super(e,r)}getShadowFilterFn(e){return e===a3t?rBt:iBt}setupShadowCoord(e,r){return r}setupShadowFilter(e,{filterFn:r,shadowTexture:i,depthTexture:a,shadowCoord:o,shadow:s}){return aBt({filterFn:r,shadowTexture:i,depthTexture:a,shadowCoord:o,shadow:s})}renderShadow(e){const{shadow:r,shadowMap:i,light:a}=this,{renderer:o,scene:s}=e,l=r.getFrameExtents();BS.copy(r.mapSize),BS.multiply(l),i.setSize(BS.width,BS.height),cb.copy(r.mapSize);const c=o.autoClear,u=o.getClearColor(nBt),d=o.getClearAlpha();o.autoClear=!1,o.setClearColor(r.clearColor,r.clearAlpha),o.clear();const f=r.getViewportCount();for(let h=0;h<f;h++){const p=r.getViewport(h),g=cb.x*p.x,m=BS.y-cb.y-cb.y*p.y;Mme.set(g,m,cb.x*p.z,cb.y*p.w),i.viewport.copy(Mme),r.updateMatrices(a,h),o.render(s,r.camera)}o.autoClear=c,o.setClearColor(u,d)}}const sBt=(n,e)=>Ht(new oBt(n,e)),lBt=Xt(({color:n,lightViewPosition:e,cutoffDistance:r,decayExponent:i},a)=>{const o=a.context.lightingModel,s=e.sub(No),l=s.normalize(),c=s.length(),u=$Pe({lightDistance:c,cutoffDistance:r,decayExponent:i}),d=n.mul(u),f=a.context.reflectedLight;o.direct({lightDirection:l,lightColor:d,reflectedLight:f},a.stack,a)});class cBt extends Qy{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=lr(0).setGroup(rr),this.decayExponentNode=lr(0).setGroup(rr)}update(e){const{light:r}=this;super.update(e),this.cutoffDistanceNode.value=r.distance,this.decayExponentNode.value=r.decay}setupShadowNode(){return sBt(this.light)}setup(e){super.setup(e),lBt({color:this.colorNode,lightViewPosition:HZ(this.light),cutoffDistance:this.cutoffDistanceNode,decayExponent:this.decayExponentNode}).append()}}const uBt=Xt(([n,e])=>{const r=n.x,i=n.y,a=n.z;let o=e.element(0).mul(.886227);return o=o.add(e.element(1).mul(2*.511664).mul(i)),o=o.add(e.element(2).mul(2*.511664).mul(a)),o=o.add(e.element(3).mul(2*.511664).mul(r)),o=o.add(e.element(4).mul(2*.429043).mul(r).mul(i)),o=o.add(e.element(5).mul(2*.429043).mul(i).mul(a)),o=o.add(e.element(6).mul(a.mul(a).mul(.743125).sub(.247708))),o=o.add(e.element(7).mul(2*.429043).mul(r).mul(a)),o=o.add(e.element(8).mul(.429043).mul(Or(r,r).sub(Or(i,i)))),o}),Bh=new jZ;class dBt extends xv{constructor(e,r){super(),this.renderer=e,this.nodes=r}update(e,r,i){const a=this.renderer,o=this.nodes.getBackgroundNode(e)||e.background;let s=!1;if(o===null)a._clearColor.getRGB(Bh,Bu),Bh.a=a._clearColor.a;else if(o.isColor===!0)o.getRGB(Bh,Bu),Bh.a=1,s=!0;else if(o.isNode===!0){const l=this.get(e),c=o;Bh.copy(a._clearColor);let u=l.backgroundMesh;if(u===void 0){const f=LZ(ur(c).mul(wme),{getUV:()=>w$t.mul(JRe),getTextureLevel:()=>_$t});let h=oPe();h=h.setZ(h.w);const p=new vo;p.name="Background.material",p.side=va,p.depthTest=!1,p.depthWrite=!1,p.fog=!1,p.lights=!1,p.vertexNode=h,p.colorNode=f,l.backgroundMeshNode=f,l.backgroundMesh=u=new ko(new fw(1,32,32),p),u.frustumCulled=!1,u.name="Background.mesh",u.onBeforeRender=function(g,m,v){this.matrixWorld.copyPosition(v.matrixWorld)}}const d=c.getCacheKey();l.backgroundCacheKey!==d&&(l.backgroundMeshNode.node=ur(c).mul(wme),l.backgroundMeshNode.needsUpdate=!0,u.material.needsUpdate=!0,l.backgroundCacheKey=d),r.unshift(u,u.geometry,u.material,0,0,null,null)}else console.error("THREE.Renderer: Unsupported background configuration.",o);if(a.autoClear===!0||s===!0){const l=i.clearColorValue;l.r=Bh.r,l.g=Bh.g,l.b=Bh.b,l.a=Bh.a,(a.backend.isWebGLBackend===!0||a.alpha===!0)&&(l.r*=l.a,l.g*=l.a,l.b*=l.a),i.depthClearValue=a._clearDepth,i.stencilClearValue=a._clearStencil,i.clearColor=a.autoClearColor===!0,i.clearDepth=a.autoClearDepth===!0,i.clearStencil=a.autoClearStencil===!0}else i.clearColor=!1,i.clearDepth=!1,i.clearStencil=!1}}let fBt=0;class JH{constructor(e="",r=[],i=0,a=[]){this.name=e,this.bindings=r,this.index=i,this.bindingsReference=a,this.id=fBt++}}class hBt{constructor(e,r,i,a,o,s,l,c,u,d=[]){this.vertexShader=e,this.fragmentShader=r,this.computeShader=i,this.transforms=d,this.nodeAttributes=a,this.bindings=o,this.updateNodes=s,this.updateBeforeNodes=l,this.updateAfterNodes=c,this.monitor=u,this.usedTimes=0}createBindings(){const e=[];for(const r of this.bindings)if(r.bindings[0].groupNode.shared!==!0){const a=new JH(r.name,[],r.index,r);e.push(a);for(const o of r.bindings)a.bindings.push(o.clone())}else e.push(r);return e}}class Tme{constructor(e,r,i=null){this.isNodeAttribute=!0,this.name=e,this.type=r,this.node=i}}class pBt{constructor(e,r,i){this.isNodeUniform=!0,this.name=e,this.type=r,this.node=i.getSelf()}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class BPe{constructor(e,r){this.isNodeVar=!0,this.name=e,this.type=r}}class gBt extends BPe{constructor(e,r){super(e,r),this.needsInterpolation=!1,this.isNodeVarying=!0}}class mBt{constructor(e,r,i=""){this.name=e,this.type=r,this.code=i,Object.defineProperty(this,"isNodeCode",{value:!0})}}let vBt=0;class rU{constructor(e=null){this.id=vBt++,this.nodesData=new WeakMap,this.parent=e}getData(e){let r=this.nodesData.get(e);return r===void 0&&this.parent!==null&&(r=this.parent.getData(e)),r}setData(e,r){this.nodesData.set(e,r)}}class Jy{constructor(e,r){this.name=e,this.value=r,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class yBt extends Jy{constructor(e,r=0){super(e,r),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class bBt extends Jy{constructor(e,r=new Nt){super(e,r),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class xBt extends Jy{constructor(e,r=new ge){super(e,r),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class _Bt extends Jy{constructor(e,r=new sr){super(e,r),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class wBt extends Jy{constructor(e,r=new Tn){super(e,r),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class SBt extends Jy{constructor(e,r=new Zn){super(e,r),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class EBt extends Jy{constructor(e,r=new jr){super(e,r),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class CBt extends yBt{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class MBt extends bBt{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class TBt extends xBt{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class ABt extends _Bt{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class RBt extends wBt{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class PBt extends SBt{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class NBt extends EBt{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}const Yb=4,Ame=[.125,.215,.35,.446,.526,.582],v0=20,iU=new qM(-1,1,1,-1,0,1),OBt=new ll(90,1),Rme=new Tn;let aU=null,oU=0,sU=0;const n0=(1+Math.sqrt(5))/2,ub=1/n0,Pme=[new ge(-n0,ub,0),new ge(n0,ub,0),new ge(-ub,0,n0),new ge(ub,0,n0),new ge(0,n0,-ub),new ge(0,n0,ub),new ge(-1,1,-1),new ge(1,1,-1),new ge(-1,1,1),new ge(1,1,1)],IBt=[3,1,5,0,4,2],lU=m8t(qL(),Vp("faceIndex")).normalize(),WZ=yt(lU.x,lU.y.negate(),lU.z);class DBt{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}get _hasInitialized(){return this._renderer.hasInitialized()}fromScene(e,r=0,i=.1,a=100,o=null){if(this._setSize(256),this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromScene() called before the backend is initialized. Try using .fromSceneAsync() instead.");const l=o||this._allocateTargets();return this.fromSceneAsync(e,r,i,a,l),l}aU=this._renderer.getRenderTarget(),oU=this._renderer.getActiveCubeFace(),sU=this._renderer.getActiveMipmapLevel();const s=o||this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,a,s),r>0&&this._blur(s,0,0,r),this._applyPMREM(s),this._cleanup(s),s}async fromSceneAsync(e,r=0,i=.1,a=100,o=null){return this._hasInitialized===!1&&await this._renderer.init(),this.fromScene(e,r,i,a,o)}fromEquirectangular(e,r=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromEquirectangular() called before the backend is initialized. Try using .fromEquirectangularAsync() instead."),this._setSizeFromTexture(e);const i=r||this._allocateTargets();return this.fromEquirectangularAsync(e,i),i}return this._fromTexture(e,r)}async fromEquirectangularAsync(e,r=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,r)}fromCubemap(e,r=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromCubemap() called before the backend is initialized. Try using .fromCubemapAsync() instead."),this._setSizeFromTexture(e);const i=r||this._allocateTargets();return this.fromCubemapAsync(e,r),i}return this._fromTexture(e,r)}async fromCubemapAsync(e,r=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,r)}async compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Ome(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Ime(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSizeFromTexture(e){e.mapping===qu||e.mapping===Yu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4)}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(aU,oU,sU),e.scissorTest=!1,wR(e,0,0,e.width,e.height)}_fromTexture(e,r){this._setSizeFromTexture(e),aU=this._renderer.getRenderTarget(),oU=this._renderer.getActiveCubeFace(),sU=this._renderer.getActiveMipmapLevel();const i=r||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),r=4*this._cubeSize,i={magFilter:Lo,minFilter:Lo,generateMipmaps:!1,type:vl,format:vs,colorSpace:Bu},a=Nme(e,r,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==r){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Nme(e,r,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas,lodMeshes:this._lodMeshes}=LBt(o)),this._blurMaterial=kBt(o,e,r)}return a}async _compileMaterial(e){const r=new ko(this._lodPlanes[0],e);await this._renderer.compile(r,iU)}_sceneToCubeUV(e,r,i,a){const o=OBt;o.near=r,o.far=i;const s=[-1,1,-1,-1,-1,-1],l=[1,1,1,-1,-1,-1],c=this._renderer,u=c.autoClear;c.getClearColor(Rme),c.autoClear=!1;let d=this._backgroundBox;if(d===null){const p=new dw({name:"PMREM.Background",side:va,depthWrite:!1,depthTest:!1});d=new ko(new Ky,p)}let f=!1;const h=e.background;h?h.isColor&&(d.material.color.copy(h),e.background=null,f=!0):(d.material.color.copy(Rme),f=!0),c.setRenderTarget(a),c.clear(),f&&c.render(d,o);for(let p=0;p<6;p++){const g=p%3;g===0?(o.up.set(0,s[p],0),o.lookAt(l[p],0,0)):g===1?(o.up.set(0,0,s[p]),o.lookAt(0,l[p],0)):(o.up.set(0,s[p],0),o.lookAt(0,0,l[p]));const m=this._cubeSize;wR(a,g*m,p>2?m:0,m,m),c.render(e,o)}c.autoClear=u,e.background=h}_textureToCubeUV(e,r){const i=this._renderer,a=e.mapping===qu||e.mapping===Yu;a?this._cubemapMaterial===null&&(this._cubemapMaterial=Ome(e)):this._equirectMaterial===null&&(this._equirectMaterial=Ime(e));const o=a?this._cubemapMaterial:this._equirectMaterial;o.fragmentNode.value=e;const s=this._lodMeshes[0];s.material=o;const l=this._cubeSize;wR(r,0,0,3*l,2*l),i.setRenderTarget(r),i.render(s,iU)}_applyPMREM(e){const r=this._renderer,i=r.autoClear;r.autoClear=!1;const a=this._lodPlanes.length;for(let o=1;o<a;o++){const s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),l=Pme[(a-o-1)%Pme.length];this._blur(e,o-1,o,s,l)}r.autoClear=i}_blur(e,r,i,a,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,r,i,a,"latitudinal",o),this._halfBlur(s,e,i,i,a,"longitudinal",o)}_halfBlur(e,r,i,a,o,s,l){const c=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=this._lodMeshes[a];f.material=u;const h=u.uniforms,p=this._sizeLods[i]-1,g=isFinite(o)?Math.PI/(2*p):2*Math.PI/(2*v0-1),m=o/g,v=isFinite(o)?1+Math.floor(d*m):v0;v>v0&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${v0}`);const y=[];let b=0;for(let E=0;E<v0;++E){const T=E/m,P=Math.exp(-T*T/2);y.push(P),E===0?b+=P:E<v&&(b+=2*P)}for(let E=0;E<y.length;E++)y[E]=y[E]/b;e.texture.frame=(e.texture.frame||0)+1,h.envMap.value=e.texture,h.samples.value=v,h.weights.array=y,h.latitudinal.value=s==="latitudinal"?1:0,l&&(h.poleAxis.value=l);const{_lodMax:x}=this;h.dTheta.value=g,h.mipInt.value=x-i;const _=this._sizeLods[a],S=3*_*(a>x-Yb?a-x+Yb:0),M=4*(this._cubeSize-_);wR(r,S,M,3*_,2*_),c.setRenderTarget(r),c.render(f,iU)}}function LBt(n){const e=[],r=[],i=[],a=[];let o=n;const s=n-Yb+1+Ame.length;for(let l=0;l<s;l++){const c=Math.pow(2,o);r.push(c);let u=1/c;l>n-Yb?u=Ame[l-n+Yb-1]:l===0&&(u=0),i.push(u);const d=1/(c-2),f=-d,h=1+d,p=[f,f,h,f,h,h,f,f,h,h,f,h],g=6,m=6,v=3,y=2,b=1,x=new Float32Array(v*m*g),_=new Float32Array(y*m*g),S=new Float32Array(b*m*g);for(let E=0;E<g;E++){const T=E%3*2/3-1,P=E>2?0:-1,A=[T,P,0,T+2/3,P,0,T+2/3,P+1,0,T,P,0,T+2/3,P+1,0,T,P+1,0],N=IBt[E];x.set(A,v*m*N),_.set(p,y*m*N);const O=[N,N,N,N,N,N];S.set(O,b*m*N)}const M=new Qs;M.setAttribute("position",new bs(x,v)),M.setAttribute("uv",new bs(_,y)),M.setAttribute("faceIndex",new bs(S,b)),e.push(M),a.push(new ko(M,null)),o>Yb&&o--}return{lodPlanes:e,sizeLods:r,sigmas:i,lodMeshes:a}}function Nme(n,e,r){const i=new uw(n,e,r);return i.texture.mapping=Sy,i.texture.name="PMREM.cubeUv",i.texture.isPMREMTexture=!0,i.scissorTest=!0,i}function wR(n,e,r,i,a){n.viewport.set(e,r,i,a),n.scissor.set(e,r,i,a)}function qZ(n){const e=new vo;return e.depthTest=!1,e.depthWrite=!1,e.blending=ml,e.name=`PMREM_${n}`,e}function kBt(n,e,r){const i=qg(new Array(v0).fill(0)),a=lr(new ge(0,1,0)),o=lr(0),s=ht(v0),l=lr(0),c=lr(1),u=ni(null),d=lr(0),f=ht(1/e),h=ht(1/r),p=ht(n),g={n:s,latitudinal:l,weights:i,poleAxis:a,outputDirection:WZ,dTheta:o,samples:c,envMap:u,mipInt:d,CUBEUV_TEXEL_WIDTH:f,CUBEUV_TEXEL_HEIGHT:h,CUBEUV_MAX_MIP:p},m=qZ("blur");return m.uniforms=g,m.fragmentNode=y8t({...g,latitudinal:l.equal(1)}),m}function Ome(n){const e=qZ("cubemap");return e.fragmentNode=FC(n,WZ),e}function Ime(n){const e=qZ("equirect");return e.fragmentNode=ni(n,pPe(WZ),0),e}const Dme=new WeakMap,FBt=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),SR=n=>/e/g.test(n)?String(n).replace(/\+/g,""):(n=Number(n),n+(n%1?"":".0"));class zPe{constructor(e,r,i){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=r,this.parser=i,this.scene=null,this.camera=null,this.nodes=[],this.sequentialNodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.monitor=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.flow={code:""},this.chaining=[],this.stack=Jz(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new rU,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null,this.useComparisonMethod=!1}getBindGroupsCache(){let e=Dme.get(this.renderer);return e===void 0&&(e=new ch,Dme.set(this.renderer,e)),e}createRenderTarget(e,r,i){return new uw(e,r,i)}createCubeRenderTarget(e,r){return new gPe(e,r)}createPMREMGenerator(){return new DBt(this.renderer)}includes(e){return this.nodes.includes(e)}_getBindGroup(e,r){const i=this.getBindGroupsCache(),a=[];let o=!0;for(const l of r)a.push(l),o=o&&l.groupNode.shared!==!0;let s;return o?(s=i.get(a),s===void 0&&(s=new JH(e,a,this.bindingsIndexes[e].group,a),i.set(a,s))):s=new JH(e,a,this.bindingsIndexes[e].group,a),s}getBindGroupArray(e,r){const i=this.bindings[r];let a=i[e];return a===void 0&&(this.bindingsIndexes[e]===void 0&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),i[e]=a=[]),a}getBindings(){let e=this.bindGroups;if(e===null){const r={},i=this.bindings;for(const a of kge)for(const o in i[a]){const s=i[a][o];(r[o]||(r[o]=[])).push(...s)}e=[];for(const a in r){const o=r[a],s=this._getBindGroup(a,o);e.push(s)}this.bindGroups=e}return e}sortBindingGroups(){const e=this.getBindings();e.sort((r,i)=>r.bindings[0].groupNode.order-i.bindings[0].groupNode.order);for(let r=0;r<e.length;r++){const i=e[r];this.bindingsIndexes[i.name].group=r,i.index=r}}setHashNode(e,r){this.hashNodes[r]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}addSequentialNode(e){this.sequentialNodes.includes(e)===!1&&this.sequentialNodes.push(e)}buildUpdateNodes(){for(const e of this.nodes)e.getUpdateType()!==Tr.NONE&&this.updateNodes.push(e.getSelf());for(const e of this.sequentialNodes){const r=e.getUpdateBeforeType(),i=e.getUpdateAfterType();r!==Tr.NONE&&this.updateBeforeNodes.push(e.getSelf()),i!==Tr.NONE&&this.updateAfterNodes.push(e.getSelf())}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return e.magFilter===Lo||e.magFilter===gx||e.magFilter===jf||e.magFilter===Yl||e.minFilter===Lo||e.minFilter===gx||e.minFilter===jf||e.minFilter===Yl}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,r){return this.flowNodes[e].push(r),r}setContext(e){this.context=e}getContext(){return this.context}getSharedContext(){return{...this.context},this.context}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,r=!0){const i=this.getDataFromNode(e);return i.cache===void 0&&(i.cache=new rU(r?this.getCache():null)),i.cache}isAvailable(){return!1}getVertexIndex(){console.warn("Abstract function.")}getInstanceIndex(){console.warn("Abstract function.")}getDrawIndex(){console.warn("Abstract function.")}getFrontFacing(){console.warn("Abstract function.")}getFragCoord(){console.warn("Abstract function.")}isFlipY(){return!1}increaseUsage(e){const r=this.getDataFromNode(e);return r.usageCount=r.usageCount===void 0?1:r.usageCount+1,r.usageCount}generateTexture(){console.warn("Abstract function.")}generateTextureLod(){console.warn("Abstract function.")}generateConst(e,r=null){if(r===null&&(e==="float"||e==="int"||e==="uint"?r=0:e==="bool"?r=!1:e==="color"?r=new Tn:e==="vec2"?r=new Nt:e==="vec3"?r=new ge:e==="vec4"&&(r=new sr)),e==="float")return SR(r);if(e==="int")return`${Math.round(r)}`;if(e==="uint")return r>=0?`${Math.round(r)}u`:"0u";if(e==="bool")return r?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${SR(r.r)}, ${SR(r.g)}, ${SR(r.b)} )`;const i=this.getTypeLength(e),a=this.getComponentType(e),o=s=>this.generateConst(a,s);if(i===2)return`${this.getType(e)}( ${o(r.x)}, ${o(r.y)} )`;if(i===3)return`${this.getType(e)}( ${o(r.x)}, ${o(r.y)}, ${o(r.z)} )`;if(i===4)return`${this.getType(e)}( ${o(r.x)}, ${o(r.y)}, ${o(r.z)}, ${o(r.w)} )`;if(i>4&&r&&(r.isMatrix3||r.isMatrix4))return`${this.getType(e)}( ${r.elements.map(o).join(", ")} )`;if(i>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,r){const i=this.attributes;for(const o of i)if(o.name===e)return o;const a=new Tme(e,r);return i.push(a),a}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="depthTexture"||e==="texture3D"}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){const r=e.type;if(e.isDataTexture){if(r===Zo)return"int";if(r===Ca)return"uint"}return"float"}getElementType(e){return e==="mat2"?"vec2":e==="mat3"?"vec3":e==="mat4"?"vec4":this.getComponentType(e)}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const r=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return r===null?null:r[1]==="b"?"bool":r[1]==="i"?"int":r[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="texture3D"?"vec4":e}getTypeFromLength(e,r="float"){if(e===1)return r;const i=RLt(e);return(r==="float"?"":r[0])+i}getTypeFromArray(e){return FBt.get(e.constructor)}getTypeFromAttribute(e){let r=e;e.isInterleavedBufferAttribute&&(r=e.data);const i=r.array,a=e.itemSize,o=e.normalized;let s;return!(e instanceof aAe)&&o!==!0&&(s=this.getTypeFromArray(i)),this.getTypeFromLength(a,s)}getTypeLength(e){const r=this.getVectorType(e),i=/vec([2-4])/.exec(r);return i!==null?Number(i[1]):r==="float"||r==="bool"||r==="int"||r==="uint"?1:/mat2/.test(e)===!0?4:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,r){return this.getTypeFromLength(this.getTypeLength(e),r)}getIntegerType(e){const r=this.getComponentType(e);return r==="int"||r==="uint"?e:this.changeComponentType(e,"int")}addStack(){return this.stack=Jz(this.stack),this.stacks.push(_Re()||this.stack),GO(this.stack),this.stack}removeStack(){const e=this.stack;return this.stack=e.parent,GO(this.stacks.pop()),e}getDataFromNode(e,r=this.shaderStage,i=null){i=i===null?e.isGlobal(this)?this.globalCache:this.cache:i;let a=i.getData(e);return a===void 0&&(a={},i.setData(e,a)),a[r]===void 0&&(a[r]={}),a[r]}getNodeProperties(e,r="any"){const i=this.getDataFromNode(e,r);return i.properties||(i.properties={outputNode:null})}getBufferAttributeFromNode(e,r){const i=this.getDataFromNode(e);let a=i.bufferAttribute;if(a===void 0){const o=this.uniforms.index++;a=new Tme("nodeAttribute"+o,r,e),this.bufferAttributes.push(a),i.bufferAttribute=a}return a}getStructTypeFromNode(e,r=this.shaderStage){const i=this.getDataFromNode(e,r);if(i.structType===void 0){const a=this.structs.index++;e.name=`StructType${a}`,this.structs[r].push(e),i.structType=e}return e}getUniformFromNode(e,r,i=this.shaderStage,a=null){const o=this.getDataFromNode(e,i,this.globalCache);let s=o.uniform;if(s===void 0){const l=this.uniforms.index++;s=new pBt(a||"nodeUniform"+l,r,e),this.uniforms[i].push(s),o.uniform=s}return s}getVarFromNode(e,r=null,i=e.getNodeType(this),a=this.shaderStage){const o=this.getDataFromNode(e,a);let s=o.variable;if(s===void 0){const l=this.vars[a]||(this.vars[a]=[]);r===null&&(r="nodeVar"+l.length),s=new BPe(r,i),l.push(s),o.variable=s}return s}getVaryingFromNode(e,r=null,i=e.getNodeType(this)){const a=this.getDataFromNode(e,"any");let o=a.varying;if(o===void 0){const s=this.varyings,l=s.length;r===null&&(r="nodeVarying"+l),o=new gBt(r,i),s.push(o),a.varying=o}return o}getCodeFromNode(e,r,i=this.shaderStage){const a=this.getDataFromNode(e);let o=a.code;if(o===void 0){const s=this.codes[i]||(this.codes[i]=[]),l=s.length;o=new mBt("nodeCode"+l,r),s.push(o),a.code=o}return o}addFlowCodeHierarchy(e,r){const{flowCodes:i,flowCodeBlock:a}=this.getDataFromNode(e);let o=!0,s=r;for(;s;){if(a.get(s)===!0){o=!1;break}s=this.getDataFromNode(s).parentNodeBlock}if(o)for(const l of i)this.addLineFlowCode(l)}addLineFlowCodeBlock(e,r,i){const a=this.getDataFromNode(e),o=a.flowCodes||(a.flowCodes=[]),s=a.flowCodeBlock||(a.flowCodeBlock=new WeakMap);o.push(r),s.set(i,!0)}addLineFlowCode(e,r=null){return e===""?this:(r!==null&&this.context.nodeBlock&&this.addLineFlowCodeBlock(r,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const r=e.getNodeType(this),i=this.flowChildNode(e,r);return this.flowsData.set(e,i),i}buildFunctionNode(e){const r=new L$t,i=this.currentFunctionNode;return this.currentFunctionNode=r,r.code=this.buildFunctionCode(e),this.currentFunctionNode=i,r}flowShaderNode(e){const r=e.layout,i={[Symbol.iterator](){let s=0;const l=Object.values(this);return{next:()=>({value:l[s],done:s++>=l.length})}}};for(const s of r.inputs)i[s.name]=new m$t(s.type,s.name);e.layout=null;const a=e.call(i),o=this.flowStagesNode(a,r.type);return e.layout=r,o}flowStagesNode(e,r=null){const i=this.flow,a=this.vars,o=this.cache,s=this.buildStage,l=this.stack,c={code:""};this.flow=c,this.vars={},this.cache=new rU,this.stack=Jz();for(const u of Lge)this.setBuildStage(u),c.result=e.build(this,r);return c.vars=this.getVars(this.shaderStage),this.flow=i,this.vars=a,this.cache=o,this.stack=l,this.setBuildStage(s),c}getFunctionOperator(){return null}flowChildNode(e,r=null){const i=this.flow,a={code:""};return this.flow=a,a.result=e.build(this,r),this.flow=i,a}flowNodeFromShaderStage(e,r,i=null,a=null){const o=this.shaderStage;this.setShaderStage(e);const s=this.flowChildNode(r,i);return a!==null&&(s.code+=`${this.tab+a} = ${s.result};
`),this.flowCode[e]=this.flowCode[e]+s.code,this.setShaderStage(o),s}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){console.warn("Abstract function.")}getVaryings(){console.warn("Abstract function.")}getVar(e,r){return`${this.getType(e)} ${r}`}getVars(e){let r="";const i=this.vars[e];if(i!==void 0)for(const a of i)r+=`${this.getVar(a.type,a.name)}; `;return r}getUniforms(){console.warn("Abstract function.")}getCodes(e){const r=this.codes[e];let i="";if(r!==void 0)for(const a of r)i+=a.code+`
`;return i}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){console.warn("Abstract function.")}build(){const{object:e,material:r,renderer:i}=this;if(r!==null){let a=i.library.fromMaterial(r);a===null&&(console.error(`NodeMaterial: Material "${r.type}" is not compatible.`),a=new vo),a.build(this)}else this.addFlow("compute",e);for(const a of Lge){this.setBuildStage(a),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const o of kge){this.setShaderStage(o);const s=this.flowNodes[o];for(const l of s)a==="generate"?this.flowNode(l):l.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,r){if(r==="float"||r==="int"||r==="uint")return new CBt(e);if(r==="vec2"||r==="ivec2"||r==="uvec2")return new MBt(e);if(r==="vec3"||r==="ivec3"||r==="uvec3")return new TBt(e);if(r==="vec4"||r==="ivec4"||r==="uvec4")return new ABt(e);if(r==="color")return new RBt(e);if(r==="mat3")return new PBt(e);if(r==="mat4")return new NBt(e);throw new Error(`Uniform "${r}" not declared.`)}createNodeMaterial(e="NodeMaterial"){throw new Error(`THREE.NodeBuilder: createNodeMaterial() was deprecated. Use new ${e}() instead.`)}format(e,r,i){if(r=this.getVectorType(r),i=this.getVectorType(i),r===i||i===null||this.isReference(i))return e;const a=this.getTypeLength(r),o=this.getTypeLength(i);return a===16&&o===9?`${this.getType(i)}(${e}[0].xyz, ${e}[1].xyz, ${e}[2].xyz)`:a===9&&o===4?`${this.getType(i)}(${e}[0].xy, ${e}[1].xy)`:a>4||o>4||o===0?e:a===o?`${this.getType(i)}( ${e} )`:a>o?this.format(`${e}.${"xyz".slice(0,o)}`,this.getTypeFromLength(o,this.getComponentType(r)),i):o===4&&a>1?`${this.getType(i)}( ${this.format(e,r,"vec3")}, 1.0 )`:a===2?`${this.getType(i)}( ${this.format(e,r,"vec2")}, 0.0 )`:(a===1&&o>1&&r!==this.getComponentType(i)&&(e=`${this.getType(this.getComponentType(i))}( ${e} )`),`${this.getType(i)}( ${e} )`)}getSignature(){return`// Three.js r${ow} - Node System
`}}class Lme{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.startTime=null,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,r){let i=e.get(r);return i===void 0&&(i={renderMap:new WeakMap,frameMap:new WeakMap},e.set(r,i)),i}updateBeforeNode(e){const r=e.getUpdateBeforeType(),i=e.updateReference(this);if(r===Tr.FRAME){const{frameMap:a}=this._getMaps(this.updateBeforeMap,i);a.get(i)!==this.frameId&&e.updateBefore(this)!==!1&&a.set(i,this.frameId)}else if(r===Tr.RENDER){const{renderMap:a}=this._getMaps(this.updateBeforeMap,i);a.get(i)!==this.renderId&&e.updateBefore(this)!==!1&&a.set(i,this.renderId)}else r===Tr.OBJECT&&e.updateBefore(this)}updateAfterNode(e){const r=e.getUpdateAfterType(),i=e.updateReference(this);if(r===Tr.FRAME){const{frameMap:a}=this._getMaps(this.updateAfterMap,i);a.get(i)!==this.frameId&&e.updateAfter(this)!==!1&&a.set(i,this.frameId)}else if(r===Tr.RENDER){const{renderMap:a}=this._getMaps(this.updateAfterMap,i);a.get(i)!==this.renderId&&e.updateAfter(this)!==!1&&a.set(i,this.renderId)}else r===Tr.OBJECT&&e.updateAfter(this)}updateNode(e){const r=e.getUpdateType(),i=e.updateReference(this);if(r===Tr.FRAME){const{frameMap:a}=this._getMaps(this.updateMap,i);a.get(i)!==this.frameId&&e.update(this)!==!1&&a.set(i,this.frameId)}else if(r===Tr.RENDER){const{renderMap:a}=this._getMaps(this.updateMap,i);a.get(i)!==this.renderId&&e.update(this)!==!1&&a.set(i,this.renderId)}else r===Tr.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class YZ{constructor(e,r,i=null,a="",o=!1){this.type=e,this.name=r,this.count=i,this.qualifier=a,this.isConst=o}}YZ.isNodeFunctionInput=!0;class $Bt extends Qy{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setup(e){super.setup(e);const r=e.context.lightingModel,i=this.colorNode,a=LPe(this.light),o=e.context.reflectedLight;r.direct({lightDirection:a,lightColor:i,reflectedLight:o},e.stack,e)}}const cU=new jr,ER=new jr;let zS=null;class BBt extends Qy{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=lr(new ge).setGroup(rr),this.halfWidth=lr(new ge).setGroup(rr),this.updateType=Tr.RENDER}update(e){super.update(e);const{light:r}=this,i=e.camera.matrixWorldInverse;ER.identity(),cU.copy(r.matrixWorld),cU.premultiply(i),ER.extractRotation(cU),this.halfWidth.value.set(r.width*.5,0,0),this.halfHeight.value.set(0,r.height*.5,0),this.halfWidth.value.applyMatrix4(ER),this.halfHeight.value.applyMatrix4(ER)}setup(e){super.setup(e);let r,i;e.isAvailable("float32Filterable")?(r=ni(zS.LTC_FLOAT_1),i=ni(zS.LTC_FLOAT_2)):(r=ni(zS.LTC_HALF_1),i=ni(zS.LTC_HALF_2));const{colorNode:a,light:o}=this,s=e.context.lightingModel,l=HZ(o),c=e.context.reflectedLight;s.directRectArea({lightColor:a,lightPosition:l,halfWidth:this.halfWidth,halfHeight:this.halfHeight,reflectedLight:c,ltc_1:r,ltc_2:i},e.stack,e)}static setLTC(e){zS=e}}class UPe extends Qy{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=lr(0).setGroup(rr),this.penumbraCosNode=lr(0).setGroup(rr),this.cutoffDistanceNode=lr(0).setGroup(rr),this.decayExponentNode=lr(0).setGroup(rr)}update(e){super.update(e);const{light:r}=this;this.coneCosNode.value=Math.cos(r.angle),this.penumbraCosNode.value=Math.cos(r.angle*(1-r.penumbra)),this.cutoffDistanceNode.value=r.distance,this.decayExponentNode.value=r.decay}getSpotAttenuation(e){const{coneCosNode:r,penumbraCosNode:i}=this;return Ay(r,i,e)}setup(e){super.setup(e);const r=e.context.lightingModel,{colorNode:i,cutoffDistanceNode:a,decayExponentNode:o,light:s}=this,l=HZ(s).sub(No),c=l.normalize(),u=c.dot(LPe(s)),d=this.getSpotAttenuation(u),f=l.length(),h=$Pe({lightDistance:f,cutoffDistance:a,decayExponent:o});let p=i.mul(d).mul(h);if(s.map){const m=U$t(s),v=ni(s.map,m.xy).onRenderUpdate(()=>s.map);p=m.mul(2).sub(1).abs().lessThan(1).all().select(p.mul(v),p)}const g=e.context.reflectedLight;r.direct({lightDirection:c,lightColor:p,reflectedLight:g},e.stack,e)}}class zBt extends UPe{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e){const r=this.light.iesMap;let i=null;if(r&&r.isTexture===!0){const a=e.acos().mul(1/Math.PI);i=ni(r,Jt(a,0),0).r}else i=super.getSpotAttenuation(e);return i}}class UBt extends Qy{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class VBt extends Qy{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=DPe(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=lr(new Tn).setGroup(rr)}update(e){const{light:r}=this;super.update(e),this.lightPositionNode.object3d=r,this.groundColorNode.value.copy(r.groundColor).multiplyScalar(r.intensity)}setup(e){const{colorNode:r,groundColorNode:i,lightDirectionNode:a}=this,s=Jd.dot(a).mul(.5).add(.5),l=ea(i,r,s);e.context.irradiance.addAssign(l)}}class GBt extends Qy{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const r=[];for(let i=0;i<9;i++)r.push(new ge);this.lightProbe=qg(r)}update(e){const{light:r}=this;super.update(e);for(let i=0;i<9;i++)this.lightProbe.array[i].copy(r.sh.coefficients[i]).multiplyScalar(r.intensity)}setup(e){const r=uBt(JRe,this.lightProbe);e.context.irradiance.addAssign(r)}}class VPe{parseFunction(){console.warn("Abstract function.")}}class XZ{constructor(e,r,i="",a=""){this.type=e,this.inputs=r,this.name=i,this.precision=a}getCode(){console.warn("Abstract function.")}}XZ.isNodeFunction=!0;const jBt=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,HBt=/[a-z_0-9]+/ig,kme="#pragma main",WBt=n=>{n=n.trim();const e=n.indexOf(kme),r=e!==-1?n.slice(e+kme.length):n,i=r.match(jBt);if(i!==null&&i.length===5){const a=i[4],o=[];let s=null;for(;(s=HBt.exec(a))!==null;)o.push(s);const l=[];let c=0;for(;c<o.length;){const g=o[c][0]==="const";g===!0&&c++;let m=o[c][0];m==="in"||m==="out"||m==="inout"?c++:m="";const v=o[c++][0];let y=Number.parseInt(o[c][0]);Number.isNaN(y)===!1?c++:y=null;const b=o[c++][0];l.push(new YZ(v,b,y,m,g))}const u=r.substring(i[0].length),d=i[3]!==void 0?i[3]:"",f=i[2],h=i[1]!==void 0?i[1]:"",p=e!==-1?n.slice(0,e):"";return{type:f,inputs:l,name:d,precision:h,inputsCode:a,blockCode:u,headerCode:p}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class qBt extends XZ{constructor(e){const{type:r,inputs:i,name:a,precision:o,inputsCode:s,blockCode:l,headerCode:c}=WBt(e);super(r,i,a,o),this.inputsCode=s,this.blockCode=l,this.headerCode=c}getCode(e=this.name){let r;const i=this.blockCode;if(i!==""){const{type:a,inputsCode:o,headerCode:s,precision:l}=this;let c=`${a} ${e} ( ${o.trim()} )`;l!==""&&(c=`${l} ${c}`),r=s+c+i}else r="";return r}}class YBt extends VPe{parseFunction(e){return new qBt(e)}}const Fme=new WeakMap;class XBt extends xv{constructor(e,r){super(),this.renderer=e,this.backend=r,this.nodeFrame=new Lme,this.nodeBuilderCache=new Map,this.callHashCache=new ch,this.groupsData=new ch}updateGroup(e){const r=e.groupNode,i=r.name;if(i===CRe.name)return!0;if(i===rr.name){const s=this.get(e),l=this.nodeFrame.renderId;return s.renderId!==l?(s.renderId=l,!0):!1}if(i===u6t.name){const s=this.get(e),l=this.nodeFrame.frameId;return s.frameId!==l?(s.frameId=l,!0):!1}const a=[r,e];let o=this.groupsData.get(a);return o===void 0&&this.groupsData.set(a,o={}),o.version!==r.version?(o.version=r.version,!0):!1}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const r=this.get(e);let i=r.nodeBuilderState;if(i===void 0){const{nodeBuilderCache:a}=this,o=this.getForRenderCacheKey(e);if(i=a.get(o),i===void 0){const s=this.backend.createNodeBuilder(e.object,this.renderer);s.scene=e.scene,s.material=e.material,s.camera=e.camera,s.context.material=e.material,s.lightsNode=e.lightsNode,s.environmentNode=this.getEnvironmentNode(e.scene),s.fogNode=this.getFogNode(e.scene),s.clippingContext=e.clippingContext,s.build(),i=this._createNodeBuilderState(s),a.set(o,i)}i.usedTimes++,r.nodeBuilderState=i}return i}delete(e){if(e.isRenderObject){const r=this.get(e).nodeBuilderState;r.usedTimes--,r.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const r=this.get(e);let i=r.nodeBuilderState;if(i===void 0){const a=this.backend.createNodeBuilder(e,this.renderer);a.build(),i=this._createNodeBuilderState(a),r.nodeBuilderState=i}return i}_createNodeBuilderState(e){return new hBt(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.monitor,e.transforms)}getEnvironmentNode(e){return e.environmentNode||this.get(e).environmentNode||null}getBackgroundNode(e){return e.backgroundNode||this.get(e).backgroundNode||null}getFogNode(e){return e.fogNode||this.get(e).fogNode||null}getCacheKey(e,r){const i=[e,r],a=this.renderer.info.calls;let o=this.callHashCache.get(i);if(o===void 0||o.callId!==a){const s=this.getEnvironmentNode(e),l=this.getFogNode(e),c=[];r&&c.push(r.getCacheKey(!0)),s&&c.push(s.getCacheKey()),l&&c.push(l.getCacheKey()),c.push(this.renderer.shadowMap.enabled?1:0),o={callId:a,cacheKey:hRe(c)},this.callHashCache.set(i,o)}return o.cacheKey}updateScene(e){this.updateEnvironment(e),this.updateFog(e),this.updateBackground(e)}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){const r=this.get(e),i=e.background;if(i){const a=e.backgroundBlurriness===0&&r.backgroundBlurriness>0||e.backgroundBlurriness>0&&r.backgroundBlurriness===0;if(r.background!==i||a){let o=null;if(i.isCubeTexture===!0||i.mapping===Zm||i.mapping===Qm||i.mapping===Sy)if(e.backgroundBlurriness>0||i.mapping===Sy)o=MPe(i);else{let s;i.isCubeTexture===!0?s=FC(i):s=ni(i),o=vPe(s)}else i.isTexture===!0?o=ni(i,$C.flipY()).setUpdateMatrix(!0):i.isColor!==!0&&console.error("WebGPUNodes: Unsupported background configuration.",i);r.backgroundNode=o,r.background=i,r.backgroundBlurriness=e.backgroundBlurriness}}else r.backgroundNode&&(delete r.backgroundNode,delete r.background)}updateFog(e){const r=this.get(e),i=e.fog;if(i){if(r.fog!==i){let a=null;if(i.isFogExp2){const o=Si("color","color",i).setGroup(rr),s=Si("density","float",i).setGroup(rr);a=B$t(o,s)}else if(i.isFog){const o=Si("color","color",i).setGroup(rr),s=Si("near","float",i).setGroup(rr),l=Si("far","float",i).setGroup(rr);a=F$t(o,s,l)}else console.error("WebGPUNodes: Unsupported fog configuration.",i);r.fogNode=a,r.fog=i}}else delete r.fogNode,delete r.fog}updateEnvironment(e){const r=this.get(e),i=e.environment;if(i){if(r.environment!==i){let a=null;i.isCubeTexture===!0?a=FC(i):i.isTexture===!0?a=ni(i):console.error("Nodes: Unsupported environment configuration.",i),r.environmentNode=a,r.environment=i}}else r.environmentNode&&(delete r.environmentNode,delete r.environment)}getNodeFrame(e=this.renderer,r=null,i=null,a=null,o=null){const s=this.nodeFrame;return s.renderer=e,s.scene=r,s.object=i,s.camera=a,s.material=o,s}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){const e=this.renderer;return e.toneMapping+","+e.currentColorSpace}hasOutputChange(e){return Fme.get(e)!==this.getOutputCacheKey()}getOutputNode(e){const r=this.renderer,i=this.getOutputCacheKey(),a=ni(e,$C).renderOutput(r.toneMapping,r.currentColorSpace);return Fme.set(e,i),a}updateBefore(e){const r=e.getNodeBuilderState();for(const i of r.updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(i)}updateAfter(e){const r=e.getNodeBuilderState();for(const i of r.updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(i)}updateForCompute(e){const r=this.getNodeFrame(),i=this.getForCompute(e);for(const a of i.updateNodes)r.updateNode(a)}updateForRender(e){const r=this.getNodeFrameForRender(e),i=e.getNodeBuilderState();for(const a of i.updateNodes)r.updateNode(a)}needsRefresh(e){const r=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,r)}dispose(){super.dispose(),this.nodeFrame=new Lme,this.nodeBuilderCache=new Map}}const uU=new Pd;class ZO{constructor(e=null){this.version=0,this.clipIntersection=null,this.cacheKey="",e===null?(this.intersectionPlanes=[],this.unionPlanes=[],this.viewNormalMatrix=new Zn,this.clippingGroupContexts=new WeakMap,this.shadowPass=!1):(this.viewNormalMatrix=e.viewNormalMatrix,this.clippingGroupContexts=e.clippingGroupContexts,this.shadowPass=e.shadowPass,this.viewMatrix=e.viewMatrix),this.parentVersion=null}projectPlanes(e,r,i){const a=e.length;for(let o=0;o<a;o++){uU.copy(e[o]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);const s=r[i+o],l=uU.normal;s.x=-l.x,s.y=-l.y,s.z=-l.z,s.w=uU.constant}}updateGlobal(e,r){this.shadowPass=e.overrideMaterial!==null&&e.overrideMaterial.isShadowNodeMaterial,this.viewMatrix=r.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix)}update(e,r){let i=!1;e.version!==this.parentVersion&&(this.intersectionPlanes=Array.from(e.intersectionPlanes),this.unionPlanes=Array.from(e.unionPlanes),this.parentVersion=e.version),this.clipIntersection!==r.clipIntersection&&(this.clipIntersection=r.clipIntersection,this.clipIntersection?this.unionPlanes.length=e.unionPlanes.length:this.intersectionPlanes.length=e.intersectionPlanes.length);const a=r.clippingPlanes,o=a.length;let s,l;if(this.clipIntersection?(s=this.intersectionPlanes,l=e.intersectionPlanes.length):(s=this.unionPlanes,l=e.unionPlanes.length),s.length!==l+o){s.length=l+o;for(let c=0;c<o;c++)s[l+c]=new sr;i=!0}this.projectPlanes(a,s,l),i&&(this.version++,this.cacheKey=`${this.intersectionPlanes.length}:${this.unionPlanes.length}`)}getGroupContext(e){if(this.shadowPass&&!e.clipShadows)return this;let r=this.clippingGroupContexts.get(e);return r===void 0&&(r=new ZO(this),this.clippingGroupContexts.set(e,r)),r.update(this,e),r}get unionClippingCount(){return this.unionPlanes.length}}class KBt{constructor(e,r){this.scene=e,this.camera=r}clone(){return Object.assign(new this.constructor,this)}}class ZBt{constructor(){this.lists=new ch}get(e,r){const i=this.lists,a=[e,r];let o=i.get(a);return o===void 0&&(o=new KBt(e,r),i.set(a,o)),o}dispose(){this.lists=new ch}}class GPe{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let r=null;const i=this.getMaterialNodeClass(e.type);if(i!==null){r=new i;for(const a in e)r[a]=e[a]}return r}addToneMapping(e,r){this.addType(e,r,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,r){this.addType(e,r,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,r){this.addClass(e,r,this.lightNodes)}addType(e,r,i){if(i.has(r)){console.warn(`Redefinition of node ${r}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof r=="function"||typeof r=="object")throw new Error(`Base class ${r} is not a class.`);i.set(r,e)}addClass(e,r,i){if(i.has(r)){console.warn(`Redefinition of node ${r.name}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof r!="function")throw new Error(`Base class ${r.name} is not a class.`);i.set(r,e)}}const QBt=new kPe;class JBt extends ch{constructor(){super()}createNode(e=[]){return new kPe().setLights(e)}getNode(e,r){if(e.isQuadMesh)return QBt;const i=[e,r];let a=this.get(i);return a===void 0&&(a=this.createNode(),this.set(i,a)),a}}const $me=new lZ,CR=new Nt,dU=new sr,fU=new IL,MR=new jr,Rg=new sr;class e9t{constructor(e,r={}){this.isRenderer=!0;const{logarithmicDepthBuffer:i=!1,alpha:a=!0,depth:o=!0,stencil:s=!1,antialias:l=!1,samples:c=0,getFallback:u=null}=r;this.domElement=e.getDomElement(),this.backend=e,this.samples=c||l===!0?4:0,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=a,this.logarithmicDepthBuffer=i,this.outputColorSpace=Pn,this.toneMapping=tc,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=o,this.stencil=s,this.info=new n$t,this.nodes={modelViewMatrix:null,modelNormalViewMatrix:null},this.library=new GPe,this.lighting=new JBt,this._getFallback=u,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new sr(0,0,this._width,this._height),this._scissor=new sr(0,0,this._width,this._height),this._scissorTest=!1,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new NPe(new vo),this._quad.material.type="Renderer_output",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const d=this.alpha===!0?0:1;this._clearColor=new jZ(0,0,0,d),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._isDeviceLost=!1,this.onDeviceLost=this._onDeviceLost,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:IK},this.xr={enabled:!1},this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(f,h,p)=>{await this.compileAsync(f,h);const g=this._renderLists.get(f,h),m=this._renderContexts.get(f,h,this._renderTarget),v=f.overrideMaterial||p.material,y=this._objects.get(p,v,f,h,g.lightsNode,m,m.clippingContext),{fragmentShader:b,vertexShader:x}=y.getNodeBuilderState();return{fragmentShader:b,vertexShader:x}}}}async init(){if(this._initialized)throw new Error("Renderer: Backend has already been initialized.");return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,r)=>{let i=this.backend;try{await i.init(this)}catch(a){if(this._getFallback!==null)try{this.backend=i=this._getFallback(a),await i.init(this)}catch(o){r(o);return}else{r(a);return}}this._nodes=new XBt(this,i),this._animation=new W8t(this._nodes,this.info),this._attributes=new J8t(i),this._background=new dBt(this,this._nodes),this._geometries=new t$t(this._attributes,this.info),this._textures=new g$t(this,i,this.info),this._pipelines=new o$t(i,this._nodes),this._bindings=new s$t(i,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new K8t(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new u$t(this.lighting),this._bundles=new ZBt,this._renderContexts=new h$t,this._animation.start(),this._initialized=!0,e()}),this._initPromise)}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,r,i=null){if(this._isDeviceLost===!0)return;this._initialized===!1&&await this.init();const a=this._nodes.nodeFrame,o=a.renderId,s=this._currentRenderContext,l=this._currentRenderObjectFunction,c=this._compilationPromises,u=e.isScene===!0?e:$me;i===null&&(i=e);const d=this._renderTarget,f=this._renderContexts.get(i,r,d),h=this._activeMipmapLevel,p=[];this._currentRenderContext=f,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=p,a.renderId++,a.update(),f.depth=this.depth,f.stencil=this.stencil,f.clippingContext||(f.clippingContext=new ZO),f.clippingContext.updateGlobal(u,r),u.onBeforeRender(this,e,r,d);const g=this._renderLists.get(e,r);if(g.begin(),this._projectObject(e,r,0,g,f.clippingContext),i!==e&&i.traverseVisible(function(x){x.isLight&&x.layers.test(r.layers)&&g.pushLight(x)}),g.finish(),d!==null){this._textures.updateRenderTarget(d,h);const x=this._textures.get(d);f.textures=x.textures,f.depthTexture=x.depthTexture}else f.textures=null,f.depthTexture=null;this._nodes.updateScene(u),this._background.update(u,g,f);const m=g.opaque,v=g.transparent,y=g.transparentDoublePass,b=g.lightsNode;this.opaque===!0&&m.length>0&&this._renderObjects(m,r,u,b),this.transparent===!0&&v.length>0&&this._renderTransparents(v,y,r,u,b),a.renderId=o,this._currentRenderContext=s,this._currentRenderObjectFunction=l,this._compilationPromises=c,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(p)}async renderAsync(e,r){this._initialized===!1&&await this.init();const i=this._renderScene(e,r);await this.backend.resolveTimestampAsync(i,"render")}async waitForGPU(){await this.backend.waitForGPU()}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}_onDeviceLost(e){let r=`THREE.WebGPURenderer: ${e.api} Device Lost:

Message: ${e.message}`;e.reason&&(r+=`
Reason: ${e.reason}`),console.error(r),this._isDeviceLost=!0}_renderBundle(e,r,i){const{bundleGroup:a,camera:o,renderList:s}=e,l=this._currentRenderContext,c=this._bundles.get(a,o),u=this.backend.get(c);u.renderContexts===void 0&&(u.renderContexts=new Set);const d=a.version!==u.version,f=u.renderContexts.has(l)===!1||d;if(u.renderContexts.add(l),f){this.backend.beginBundle(l),(u.renderObjects===void 0||d)&&(u.renderObjects=[]),this._currentRenderBundle=c;const h=s.opaque;this.opaque===!0&&h.length>0&&this._renderObjects(h,o,r,i),this._currentRenderBundle=null,this.backend.finishBundle(l,c),u.version=a.version}else{const{renderObjects:h}=u;for(let p=0,g=h.length;p<g;p++){const m=h[p];this._nodes.needsRefresh(m)&&(this._nodes.updateBefore(m),this._nodes.updateForRender(m),this._bindings.updateForRender(m),this._nodes.updateAfter(m))}}this.backend.addBundle(l,c)}render(e,r){if(this._initialized===!1)return console.warn("THREE.Renderer: .render() called before the backend is initialized. Try using .renderAsync() instead."),this.renderAsync(e,r);this._renderScene(e,r)}_getFrameBufferTarget(){const{currentToneMapping:e,currentColorSpace:r}=this;if(e!==tc===!1&&r!==Bu===!1)return null;const{width:o,height:s}=this.getDrawingBufferSize(CR),{depth:l,stencil:c}=this;let u=this._frameBufferTarget;return u===null&&(u=new uw(o,s,{depthBuffer:l,stencilBuffer:c,type:vl,format:vs,colorSpace:Bu,generateMipmaps:!1,minFilter:Lo,magFilter:Lo,samples:this.samples}),u.isPostProcessingRenderTarget=!0,this._frameBufferTarget=u),u.depthBuffer=l,u.stencilBuffer=c,u.setSize(o,s),u.viewport.copy(this._viewport),u.scissor.copy(this._scissor),u.viewport.multiplyScalar(this._pixelRatio),u.scissor.multiplyScalar(this._pixelRatio),u.scissorTest=this._scissorTest,u}_renderScene(e,r,i=!0){if(this._isDeviceLost===!0)return;const a=i?this._getFrameBufferTarget():null,o=this._nodes.nodeFrame,s=o.renderId,l=this._currentRenderContext,c=this._currentRenderObjectFunction,u=e.isScene===!0?e:$me,d=this._renderTarget,f=this._activeCubeFace,h=this._activeMipmapLevel;let p;a!==null?(p=a,this.setRenderTarget(p)):p=d;const g=this._renderContexts.get(e,r,p);this._currentRenderContext=g,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,o.renderId=this.info.calls;const m=this.coordinateSystem;r.coordinateSystem!==m&&(r.coordinateSystem=m,r.updateProjectionMatrix()),e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),r.parent===null&&r.matrixWorldAutoUpdate===!0&&r.updateMatrixWorld();let v=this._viewport,y=this._scissor,b=this._pixelRatio;p!==null&&(v=p.viewport,y=p.scissor,b=1),this.getDrawingBufferSize(CR),dU.set(0,0,CR.width,CR.height);const x=v.minDepth===void 0?0:v.minDepth,_=v.maxDepth===void 0?1:v.maxDepth;g.viewportValue.copy(v).multiplyScalar(b).floor(),g.viewportValue.width>>=h,g.viewportValue.height>>=h,g.viewportValue.minDepth=x,g.viewportValue.maxDepth=_,g.viewport=g.viewportValue.equals(dU)===!1,g.scissorValue.copy(y).multiplyScalar(b).floor(),g.scissor=this._scissorTest&&g.scissorValue.equals(dU)===!1,g.scissorValue.width>>=h,g.scissorValue.height>>=h,g.clippingContext||(g.clippingContext=new ZO),g.clippingContext.updateGlobal(u,r),u.onBeforeRender(this,e,r,p),MR.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),fU.setFromProjectionMatrix(MR,m);const S=this._renderLists.get(e,r);if(S.begin(),this._projectObject(e,r,0,S,g.clippingContext),S.finish(),this.sortObjects===!0&&S.sort(this._opaqueSort,this._transparentSort),p!==null){this._textures.updateRenderTarget(p,h);const N=this._textures.get(p);g.textures=N.textures,g.depthTexture=N.depthTexture,g.width=N.width,g.height=N.height,g.renderTarget=p,g.depth=p.depthBuffer,g.stencil=p.stencilBuffer}else g.textures=null,g.depthTexture=null,g.width=this.domElement.width,g.height=this.domElement.height,g.depth=this.depth,g.stencil=this.stencil;g.width>>=h,g.height>>=h,g.activeCubeFace=f,g.activeMipmapLevel=h,g.occlusionQueryCount=S.occlusionQueryCount,this._nodes.updateScene(u),this._background.update(u,S,g),this.backend.beginRender(g);const{bundles:M,lightsNode:E,transparentDoublePass:T,transparent:P,opaque:A}=S;if(M.length>0&&this._renderBundles(M,u,E),this.opaque===!0&&A.length>0&&this._renderObjects(A,r,u,E),this.transparent===!0&&P.length>0&&this._renderTransparents(P,T,r,u,E),this.backend.finishRender(g),o.renderId=s,this._currentRenderContext=l,this._currentRenderObjectFunction=c,a!==null){this.setRenderTarget(d,f,h);const N=this._quad;this._nodes.hasOutputChange(p.texture)&&(N.material.fragmentNode=this._nodes.getOutputNode(p.texture),N.material.needsUpdate=!0),this._renderScene(N,N.camera,!1)}return u.onAfterRender(this,e,r,p),g}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){this._initialized===!1&&await this.init(),this._animation.setAnimationLoop(e)}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio!==e&&(this._pixelRatio=e,this.setSize(this._width,this._height,!1))}setDrawingBufferSize(e,r,i){this._width=e,this._height=r,this._pixelRatio=i,this.domElement.width=Math.floor(e*i),this.domElement.height=Math.floor(r*i),this.setViewport(0,0,e,r),this._initialized&&this.backend.updateSize()}setSize(e,r,i=!0){this._width=e,this._height=r,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(r*this._pixelRatio),i===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=r+"px"),this.setViewport(0,0,e,r),this._initialized&&this.backend.updateSize()}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){const r=this._scissor;return e.x=r.x,e.y=r.y,e.width=r.width,e.height=r.height,e}setScissor(e,r,i,a){const o=this._scissor;e.isVector4?o.copy(e):o.set(e,r,i,a)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e,this.backend.setScissorTest(e)}getViewport(e){return e.copy(this._viewport)}setViewport(e,r,i,a,o=0,s=1){const l=this._viewport;e.isVector4?l.copy(e):l.set(e,r,i,a),l.minDepth=o,l.maxDepth=s}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,r=1){this._clearColor.set(e),this._clearColor.a=r}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const r=this._currentRenderContext;return r&&this.backend.isOccluded(r,e)}clear(e=!0,r=!0,i=!0){if(this._initialized===!1)return console.warn("THREE.Renderer: .clear() called before the backend is initialized. Try using .clearAsync() instead."),this.clearAsync(e,r,i);const a=this._renderTarget||this._getFrameBufferTarget();let o=null;if(a!==null&&(this._textures.updateRenderTarget(a),o=this._textures.get(a)),this.backend.clear(e,r,i,o),a!==null&&this._renderTarget===null){const s=this._quad;this._nodes.hasOutputChange(a.texture)&&(s.material.fragmentNode=this._nodes.getOutputNode(a.texture),s.material.needsUpdate=!0),this._renderScene(s,s.camera,!1)}}clearColor(){return this.clear(!0,!1,!1)}clearDepth(){return this.clear(!1,!0,!1)}clearStencil(){return this.clear(!1,!1,!0)}async clearAsync(e=!0,r=!0,i=!0){this._initialized===!1&&await this.init(),this.clear(e,r,i)}clearColorAsync(){return this.clearAsync(!0,!1,!1)}clearDepthAsync(){return this.clearAsync(!1,!0,!1)}clearStencilAsync(){return this.clearAsync(!1,!1,!0)}get currentToneMapping(){return this._renderTarget!==null?tc:this.toneMapping}get currentColorSpace(){return this._renderTarget!==null?Bu:this.outputColorSpace}dispose(){this.info.dispose(),this.backend.dispose(),this._animation.dispose(),this._objects.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,r=0,i=0){this._renderTarget=e,this._activeCubeFace=r,this._activeMipmapLevel=i}getRenderTarget(){return this._renderTarget}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}compute(e){if(this.isDeviceLost===!0)return;if(this._initialized===!1)return console.warn("THREE.Renderer: .compute() called before the backend is initialized. Try using .computeAsync() instead."),this.computeAsync(e);const r=this._nodes.nodeFrame,i=r.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,r.renderId=this.info.calls;const a=this.backend,o=this._pipelines,s=this._bindings,l=this._nodes,c=Array.isArray(e)?e:[e];if(c[0]===void 0||c[0].isComputeNode!==!0)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");a.beginCompute(e);for(const u of c){if(o.has(u)===!1){const h=()=>{u.removeEventListener("dispose",h),o.delete(u),s.delete(u),l.delete(u)};u.addEventListener("dispose",h);const p=u.onInitFunction;p!==null&&p.call(u,{renderer:this})}l.updateForCompute(u),s.updateForCompute(u);const d=s.getForCompute(u),f=o.getForCompute(u,d);a.compute(e,u,d,f)}a.finishCompute(e),r.renderId=i}async computeAsync(e){this._initialized===!1&&await this.init(),this.compute(e),await this.backend.resolveTimestampAsync(e,"compute")}async hasFeatureAsync(e){return this._initialized===!1&&await this.init(),this.backend.hasFeature(e)}hasFeature(e){return this._initialized===!1?(console.warn("THREE.Renderer: .hasFeature() called before the backend is initialized. Try using .hasFeatureAsync() instead."),!1):this.backend.hasFeature(e)}hasInitialized(){return this._initialized}async initTextureAsync(e){this._initialized===!1&&await this.init(),this._textures.updateTexture(e)}initTexture(e){if(this._initialized===!1)return console.warn("THREE.Renderer: .initTexture() called before the backend is initialized. Try using .initTextureAsync() instead."),!1;this._textures.updateTexture(e)}copyFramebufferToTexture(e,r=null){if(r!==null)if(r.isVector2)r=Rg.set(r.x,r.y,e.image.width,e.image.height).floor();else if(r.isVector4)r=Rg.copy(r).floor();else{console.error("THREE.Renderer.copyFramebufferToTexture: Invalid rectangle.");return}else r=Rg.set(0,0,e.image.width,e.image.height);let i=this._currentRenderContext,a;i!==null?a=i.renderTarget:(a=this._renderTarget||this._getFrameBufferTarget(),a!==null&&(this._textures.updateRenderTarget(a),i=this._textures.get(a))),this._textures.updateTexture(e,{renderTarget:a}),this.backend.copyFramebufferToTexture(e,i,r)}copyTextureToTexture(e,r,i=null,a=null,o=0){this._textures.updateTexture(e),this._textures.updateTexture(r),this.backend.copyTextureToTexture(e,r,i,a,o)}readRenderTargetPixelsAsync(e,r,i,a,o,s=0,l=0){return this.backend.copyTextureToBuffer(e.textures[s],r,i,a,o,l)}_projectObject(e,r,i,a,o){if(e.visible===!1)return;if(e.layers.test(r.layers)){if(e.isGroup)i=e.renderOrder,e.isClippingGroup&&e.enabled&&(o=o.getGroupContext(e));else if(e.isLOD)e.autoUpdate===!0&&e.update(r);else if(e.isLight)a.pushLight(e);else if(e.isSprite){if(!e.frustumCulled||fU.intersectsSprite(e)){this.sortObjects===!0&&Rg.setFromMatrixPosition(e.matrixWorld).applyMatrix4(MR);const{geometry:c,material:u}=e;u.visible&&a.push(e,c,u,i,Rg.z,null,o)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||fU.intersectsObject(e))){const{geometry:c,material:u}=e;if(this.sortObjects===!0&&(c.boundingSphere===null&&c.computeBoundingSphere(),Rg.copy(c.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(MR)),Array.isArray(u)){const d=c.groups;for(let f=0,h=d.length;f<h;f++){const p=d[f],g=u[p.materialIndex];g&&g.visible&&a.push(e,c,g,i,Rg.z,p,o)}}else u.visible&&a.push(e,c,u,i,Rg.z,null,o)}}if(e.isBundleGroup===!0&&this.backend.beginBundle!==void 0){const c=a;a=this._renderLists.get(e,r),a.begin(),c.pushBundle({bundleGroup:e,camera:r,renderList:a}),a.finish()}const l=e.children;for(let c=0,u=l.length;c<u;c++)this._projectObject(l[c],r,i,a,o)}_renderBundles(e,r,i){for(const a of e)this._renderBundle(a,r,i)}_renderTransparents(e,r,i,a,o){if(r.length>0){for(const{material:s}of r)s.side=va;this._renderObjects(r,i,a,o,"backSide");for(const{material:s}of r)s.side=Qd;this._renderObjects(e,i,a,o);for(const{material:s}of r)s.side=dl}else this._renderObjects(e,i,a,o)}_renderObjects(e,r,i,a,o=null){for(let s=0,l=e.length;s<l;s++){const c=e[s],{object:u,geometry:d,material:f,group:h,clippingContext:p}=c;if(r.isArrayCamera){const g=r.cameras;for(let m=0,v=g.length;m<v;m++){const y=g[m];if(u.layers.test(y.layers)){const b=y.viewport,x=b.minDepth===void 0?0:b.minDepth,_=b.maxDepth===void 0?1:b.maxDepth,S=this._currentRenderContext.viewportValue;S.copy(b).multiplyScalar(this._pixelRatio).floor(),S.minDepth=x,S.maxDepth=_,this.backend.updateViewport(this._currentRenderContext),this._currentRenderObjectFunction(u,i,y,d,f,h,a,p,o)}}}else this._currentRenderObjectFunction(u,i,r,d,f,h,a,p,o)}}renderObject(e,r,i,a,o,s,l,c=null,u=null){let d,f,h;if(e.onBeforeRender(this,r,i,a,o,s),r.overrideMaterial!==null){const p=r.overrideMaterial;o.positionNode&&o.positionNode.isNode&&(d=p.positionNode,p.positionNode=o.positionNode),p.alphaTest=o.alphaTest,p.alphaMap=o.alphaMap,p.isShadowNodeMaterial&&(p.side=o.shadowSide===null?o.side:o.shadowSide,o.depthNode&&o.depthNode.isNode&&(h=p.depthNode,p.depthNode=o.depthNode),o.castShadowNode&&o.castShadowNode.isNode&&(f=p.colorNode,p.colorNode=o.castShadowNode)),o=p}o.transparent===!0&&o.side===dl&&o.forceSinglePass===!1?(o.side=va,this._handleObjectFunction(e,o,r,i,l,s,c,"backSide"),o.side=Qd,this._handleObjectFunction(e,o,r,i,l,s,c,u),o.side=dl):this._handleObjectFunction(e,o,r,i,l,s,c,u),d!==void 0&&(r.overrideMaterial.positionNode=d),h!==void 0&&(r.overrideMaterial.depthNode=h),f!==void 0&&(r.overrideMaterial.colorNode=f),e.onAfterRender(this,r,i,a,o,s)}_renderObjectDirect(e,r,i,a,o,s,l,c){const u=this._objects.get(e,r,i,a,o,this._currentRenderContext,l,c);u.drawRange=e.geometry.drawRange,u.group=s;const d=this._nodes.needsRefresh(u);d&&(this._nodes.updateBefore(u),this._geometries.updateForRender(u),this._nodes.updateForRender(u),this._bindings.updateForRender(u)),this._pipelines.updateForRender(u),this._currentRenderBundle!==null&&(this.backend.get(this._currentRenderBundle).renderObjects.push(u),u.bundle=this._currentRenderBundle.scene),this.backend.draw(u,this.info),d&&this._nodes.updateAfter(u)}_createObjectPipeline(e,r,i,a,o,s,l){const c=this._objects.get(e,r,i,a,o,this._currentRenderContext,s,l);this._nodes.updateBefore(c),this._geometries.updateForRender(c),this._nodes.updateForRender(c),this._bindings.updateForRender(c),this._pipelines.getForRender(c,this._compilationPromises),this._nodes.updateAfter(c)}get compile(){return this.compileAsync}}class KZ{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}function t9t(n){return n+(Xg-n%Xg)%Xg}class jPe extends KZ{constructor(e,r=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=r}get byteLength(){return t9t(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}}class HPe extends jPe{constructor(e,r=null){super(e,r),this.isUniformBuffer=!0}}let n9t=0;class WPe extends HPe{constructor(e,r){super("UniformBuffer_"+n9t++,e?e.value:null),this.nodeUniform=e,this.groupNode=r}get buffer(){return this.nodeUniform.value}}class r9t extends HPe{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const r=this.uniforms.indexOf(e);return r!==-1&&this.uniforms.splice(r,1),this}get values(){return this._values===null&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;if(e===null){const r=this.byteLength;e=new Float32Array(new ArrayBuffer(r)),this._buffer=e}return e}get byteLength(){let e=0;for(let r=0,i=this.uniforms.length;r<i;r++){const a=this.uniforms[r],{boundary:o,itemSize:s}=a,l=e%Xg,c=Xg-l;l!==0&&c-o<0?e+=Xg-l:l%o!==0&&(e+=l%o),a.offset=e/this.bytesPerElement,e+=s*this.bytesPerElement}return Math.ceil(e/Xg)*Xg}update(){let e=!1;for(const r of this.uniforms)this.updateByType(r)===!0&&(e=!0);return e}updateByType(e){if(e.isNumberUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let r=!1;const i=this.values,a=e.getValue(),o=e.offset,s=e.getType();if(i[o]!==a){const l=this._getBufferForType(s);l[o]=i[o]=a,r=!0}return r}updateVector2(e){let r=!1;const i=this.values,a=e.getValue(),o=e.offset,s=e.getType();if(i[o+0]!==a.x||i[o+1]!==a.y){const l=this._getBufferForType(s);l[o+0]=i[o+0]=a.x,l[o+1]=i[o+1]=a.y,r=!0}return r}updateVector3(e){let r=!1;const i=this.values,a=e.getValue(),o=e.offset,s=e.getType();if(i[o+0]!==a.x||i[o+1]!==a.y||i[o+2]!==a.z){const l=this._getBufferForType(s);l[o+0]=i[o+0]=a.x,l[o+1]=i[o+1]=a.y,l[o+2]=i[o+2]=a.z,r=!0}return r}updateVector4(e){let r=!1;const i=this.values,a=e.getValue(),o=e.offset,s=e.getType();if(i[o+0]!==a.x||i[o+1]!==a.y||i[o+2]!==a.z||i[o+4]!==a.w){const l=this._getBufferForType(s);l[o+0]=i[o+0]=a.x,l[o+1]=i[o+1]=a.y,l[o+2]=i[o+2]=a.z,l[o+3]=i[o+3]=a.w,r=!0}return r}updateColor(e){let r=!1;const i=this.values,a=e.getValue(),o=e.offset;if(i[o+0]!==a.r||i[o+1]!==a.g||i[o+2]!==a.b){const s=this.buffer;s[o+0]=i[o+0]=a.r,s[o+1]=i[o+1]=a.g,s[o+2]=i[o+2]=a.b,r=!0}return r}updateMatrix3(e){let r=!1;const i=this.values,a=e.getValue().elements,o=e.offset;if(i[o+0]!==a[0]||i[o+1]!==a[1]||i[o+2]!==a[2]||i[o+4]!==a[3]||i[o+5]!==a[4]||i[o+6]!==a[5]||i[o+8]!==a[6]||i[o+9]!==a[7]||i[o+10]!==a[8]){const s=this.buffer;s[o+0]=i[o+0]=a[0],s[o+1]=i[o+1]=a[1],s[o+2]=i[o+2]=a[2],s[o+4]=i[o+4]=a[3],s[o+5]=i[o+5]=a[4],s[o+6]=i[o+6]=a[5],s[o+8]=i[o+8]=a[6],s[o+9]=i[o+9]=a[7],s[o+10]=i[o+10]=a[8],r=!0}return r}updateMatrix4(e){let r=!1;const i=this.values,a=e.getValue().elements,o=e.offset;return a9t(i,a,o)===!1&&(this.buffer.set(a,o),i9t(i,a,o),r=!0),r}_getBufferForType(e){return e==="int"||e==="ivec2"||e==="ivec3"||e==="ivec4"?new Int32Array(this.buffer.buffer):e==="uint"||e==="uvec2"||e==="uvec3"||e==="uvec4"?new Uint32Array(this.buffer.buffer):this.buffer}}function i9t(n,e,r){for(let i=0,a=e.length;i<a;i++)n[r+i]=e[i]}function a9t(n,e,r){for(let i=0,a=e.length;i<a;i++)if(n[r+i]!==e[i])return!1;return!0}let o9t=0;class qPe extends r9t{constructor(e,r){super(e),this.id=o9t++,this.groupNode=r,this.isNodeUniformsGroup=!0}getNodes(){const e=[];for(const r of this.uniforms){const i=r.nodeUniform.node;if(!i)throw new Error("NodeUniformsGroup: Uniform has no node.");e.push(i)}return e}}let s9t=0;class l9t extends KZ{constructor(e,r){super(e),this.id=s9t++,this.texture=r,this.version=r?r.version:0,this.store=!1,this.generation=null,this.isSampledTexture=!0}needsBindingsUpdate(e){const{texture:r}=this;return e!==this.generation?(this.generation=e,!0):r.isVideoTexture}update(){const{texture:e,version:r}=this;return r!==e.version?(this.version=e.version,!0):!1}}class e6 extends l9t{constructor(e,r,i,a=null){super(e,r?r.value:null),this.textureNode=r,this.groupNode=i,this.access=a}needsBindingsUpdate(e){return this.textureNode.value!==this.texture||super.needsBindingsUpdate(e)}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class YPe extends e6{constructor(e,r,i,a){super(e,r,i,a),this.isSampledCubeTexture=!0}}class XPe extends e6{constructor(e,r,i,a){super(e,r,i,a),this.isSampledTexture3D=!0}}const c9t={atan2:"atan",textureDimensions:"textureSize",equals:"equal"},u9t={low:"lowp",medium:"mediump",high:"highp"},Bme={swizzleAssign:!0,storageBuffer:!1},zme=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
`;class d9t extends zPe{constructor(e,r){super(e,r,new YBt),this.uniformGroups={},this.transforms=[],this.extensions={},this.builtins={vertex:[],fragment:[],compute:[]},this.useComparisonMethod=!0}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==Oc}getMethod(e){return c9t[e]||e}getOutputStructName(){return""}buildFunctionCode(e){const r=e.layout,i=this.flowShaderNode(e),a=[];for(const s of r.inputs)a.push(this.getType(s.type)+" "+s.name);return`${this.getType(r.type)} ${r.name}( ${a.join(", ")} ) {

	${i.vars}

${i.code}
	return ${i.result};

}`}setupPBO(e){const r=e.value;if(r.pbo===void 0){const i=r.array,a=r.count*r.itemSize,{itemSize:o}=r,s=r.array.constructor.name.toLowerCase().includes("int");let l=s?sw:WM;o===2?l=s?lw:My:o===3?l=s?f3t:HM:o===4&&(l=s?cw:vs);const c={Float32Array:Ka,Uint8Array:Ws,Uint16Array:Bd,Uint32Array:Ca,Int8Array:q0,Int16Array:Y0,Int32Array:Zo,Uint8ClampedArray:Ws},u=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(a/o))));let d=Math.ceil(a/o/u);u*d*o<a&&d++;const f=u*d*o,h=new i.constructor(f);h.set(i,0),r.array=h;const p=new hAt(r.array,u,d,l,c[r.array.constructor.name]||Ka);p.needsUpdate=!0,p.isPBOTexture=!0;const g=new QM(p,null,null);g.setPrecision("high"),r.pboNode=g,r.pbo=g.value,this.getUniformFromNode(r.pboNode,"texture",this.shaderStage,this.context.label)}}getPropertyName(e,r=this.shaderStage){return e.isNodeUniform&&e.node.isTextureNode!==!0&&e.node.isBufferNode!==!0?r.charAt(0)+"_"+e.name:super.getPropertyName(e,r)}generatePBO(e){const{node:r,indexNode:i}=e,a=r.value;if(this.renderer.backend.has(a)){const d=this.renderer.backend.get(a);d.pbo=a.pbo}const o=this.getUniformFromNode(a.pboNode,"texture",this.shaderStage,this.context.label),s=this.getPropertyName(o);this.increaseUsage(i);const l=i.build(this,"uint"),c=this.getDataFromNode(e);let u=c.propertyName;if(u===void 0){const d=this.getVarFromNode(e);u=this.getPropertyName(d);const f=this.getDataFromNode(r);let h=f.propertySizeName;h===void 0&&(h=u+"Size",this.getVarFromNode(r,h,"uint"),this.addLineFlowCode(`${h} = uint( textureSize( ${s}, 0 ).x )`,e),f.propertySizeName=h);const{itemSize:p}=a,g="."+gw.join("").slice(0,p),m=`ivec2(${l} % ${h}, ${l} / ${h})`,v=this.generateTextureLoad(null,s,m,null,"0");let y="vec4";a.pbo.type===Ca?y="uvec4":a.pbo.type===Zo&&(y="ivec4"),this.addLineFlowCode(`${u} = ${y}(${v})${g}`,e),c.propertyName=u}return u}generateTextureLoad(e,r,i,a,o="0"){return a?`texelFetch( ${r}, ivec3( ${i}, ${a} ), ${o} )`:`texelFetch( ${r}, ${i}, ${o} )`}generateTexture(e,r,i,a){return e.isDepthTexture?`texture( ${r}, ${i} ).x`:(a&&(i=`vec3( ${i}, ${a} )`),`texture( ${r}, ${i} )`)}generateTextureLevel(e,r,i,a){return`textureLod( ${r}, ${i}, ${a} )`}generateTextureBias(e,r,i,a){return`texture( ${r}, ${i}, ${a} )`}generateTextureGrad(e,r,i,a){return`textureGrad( ${r}, ${i}, ${a[0]}, ${a[1]} )`}generateTextureCompare(e,r,i,a,o,s=this.shaderStage){if(s==="fragment")return`texture( ${r}, vec3( ${i}, ${a} ) )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${s} shader.`)}getVars(e){const r=[],i=this.vars[e];if(i!==void 0)for(const a of i)r.push(`${this.getVar(a.type,a.name)};`);return r.join(`
	`)}getUniforms(e){const r=this.uniforms[e],i=[],a={};for(const s of r){let l=null,c=!1;if(s.type==="texture"){const d=s.node.value;let f="";d.isDataTexture===!0&&(d.type===Ca?f="u":d.type===Zo&&(f="i")),d.compareFunction?l=`sampler2DShadow ${s.name};`:d.isDataArrayTexture===!0||d.isCompressedArrayTexture===!0?l=`${f}sampler2DArray ${s.name};`:l=`${f}sampler2D ${s.name};`}else if(s.type==="cubeTexture")l=`samplerCube ${s.name};`;else if(s.type==="texture3D")l=`sampler3D ${s.name};`;else if(s.type==="buffer"){const d=s.node,f=this.getType(d.bufferType),h=d.bufferCount,p=h>0?h:"";l=`${d.name} {
	${f} ${s.name}[${p}];
};
`}else l=`${this.getVectorType(s.type)} ${this.getPropertyName(s,e)};`,c=!0;const u=s.node.precision;if(u!==null&&(l=u9t[u]+" "+l),c){l="	"+l;const d=s.groupNode.name;(a[d]||(a[d]=[])).push(l)}else l="uniform "+l,i.push(l)}let o="";for(const s in a){const l=a[s];o+=this._getGLSLUniformStruct(e+"_"+s,l.join(`
`))+`
`}return o+=i.join(`
`),o}getTypeFromAttribute(e){let r=super.getTypeFromAttribute(e);if(/^[iu]/.test(r)&&e.gpuType!==Zo){let i=e;e.isInterleavedBufferAttribute&&(i=e.data);const a=i.array;a instanceof Uint32Array||a instanceof Int32Array||(r=r.slice(1))}return r}getAttributes(e){let r="";if(e==="vertex"||e==="compute"){const i=this.getAttributesArray();let a=0;for(const o of i)r+=`layout( location = ${a++} ) in ${o.type} ${o.name};
`}return r}getStructMembers(e){const r=[],i=e.getMemberTypes();for(let a=0;a<i.length;a++){const o=i[a];r.push(`layout( location = ${a} ) out ${o} m${a};`)}return r.join(`
`)}getStructs(e){const r=[],i=this.structs[e];if(i.length===0)return`layout( location = 0 ) out vec4 fragColor;
`;for(let a=0,o=i.length;a<o;a++){const s=i[a];let l=`
`;l+=this.getStructMembers(s),l+=`
`,r.push(l)}return r.join(`

`)}getVaryings(e){let r="";const i=this.varyings;if(e==="vertex"||e==="compute")for(const a of i){e==="compute"&&(a.needsInterpolation=!0);const o=this.getType(a.type),s=o.includes("int")||o.includes("uv")||o.includes("iv")?"flat ":"";r+=`${s}${a.needsInterpolation?"out":"/*out*/"} ${o} ${a.name};
`}else if(e==="fragment"){for(const a of i)if(a.needsInterpolation){const o=this.getType(a.type),s=o.includes("int")||o.includes("uv")||o.includes("iv")?"flat ":"";r+=`${s}in ${o} ${a.name};
`}}for(const a of this.builtins[e])r+=`${a};
`;return r}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){return`uint( gl_InstanceID ) % ${this.object.workgroupSize.reduce((i,a)=>i*a,1)}u`}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,r,i=this.shaderStage){const a=this.extensions[i]||(this.extensions[i]=new Map);a.has(e)===!1&&a.set(e,{name:e,behavior:r})}getExtensions(e){const r=[];if(e==="vertex"){const a=this.renderer.backend.extensions;this.object.isBatchedMesh&&a.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}const i=this.extensions[e];if(i!==void 0)for(const{name:a,behavior:o}of i.values())r.push(`#extension ${a} : ${o}`);return r.join(`
`)}getClipDistance(){return"gl_ClipDistance"}isAvailable(e){let r=Bme[e];if(r===void 0){let i;switch(r=!1,e){case"float32Filterable":i="OES_texture_float_linear";break;case"clipDistance":i="WEBGL_clip_cull_distance";break}if(i!==void 0){const a=this.renderer.backend.extensions;a.has(i)&&(a.get(i),r=!0)}Bme[e]=r}return r}isFlipY(){return!0}enableHardwareClipping(e){this.enableExtension("GL_ANGLE_clip_cull_distance","require"),this.builtins.vertex.push(`out float gl_ClipDistance[ ${e} ]`)}registerTransform(e,r){this.transforms.push({varyingName:e,attributeNode:r})}getTransforms(){const e=this.transforms;let r="";for(let i=0;i<e.length;i++){const a=e[i],o=this.getPropertyName(a.attributeNode);r+=`${a.varyingName} = ${o};
	`}return r}_getGLSLUniformStruct(e,r){return`
layout( std140 ) uniform ${e} {
${r}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions 
${e.extensions}

// precision
${zme}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// precision
${zme}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

${e.structs}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const r in e){let i=`// code

`;i+=this.flowCode[r];const a=this.flowNodes[r],o=a[a.length-1];for(const l of a){const c=this.getFlowData(l),u=l.name;u&&(i.length>0&&(i+=`
`),i+=`	// flow -> ${u}
	`),i+=`${c.code}
	`,l===o&&r!=="compute"&&(i+=`// result
	`,r==="vertex"?(i+="gl_Position = ",i+=`${c.result};`):r==="fragment"&&(l.outputNode.isOutputStructNode||(i+="fragColor = ",i+=`${c.result};`)))}const s=e[r];s.extensions=this.getExtensions(r),s.uniforms=this.getUniforms(r),s.attributes=this.getAttributes(r),s.varyings=this.getVaryings(r),s.vars=this.getVars(r),s.structs=this.getStructs(r),s.codes=this.getCodes(r),s.transforms=this.getTransforms(r),s.flow=i}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,r,i,a=null){const o=super.getUniformFromNode(e,r,i,a),s=this.getDataFromNode(e,i,this.globalCache);let l=s.uniformGPU;if(l===void 0){const c=e.groupNode,u=c.name,d=this.getBindGroupArray(u,i);if(r==="texture")l=new e6(o.name,o.node,c),d.push(l);else if(r==="cubeTexture")l=new YPe(o.name,o.node,c),d.push(l);else if(r==="texture3D")l=new XPe(o.name,o.node,c),d.push(l);else if(r==="buffer"){e.name=`NodeBuffer_${e.id}`,o.name=`buffer${e.id}`;const f=new WPe(e,c);f.name=e.name,d.push(f),l=f}else{const f=this.uniformGroups[i]||(this.uniformGroups[i]={});let h=f[u];h===void 0&&(h=new qPe(i+"_"+u,c),f[u]=h,d.push(h)),l=this.getNodeUniform(o,r),h.addUniform(l)}s.uniformGPU=l}return o}}let hU=null,pU=null,db=null;class KPe{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null}async init(e){this.renderer=e}begin(){}finish(){}draw(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}createRenderPipeline(){}createComputePipeline(){}destroyPipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}createSampler(){}createDefaultTexture(){}createTexture(){}copyTextureToBuffer(){}createAttribute(){}createIndexAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}resolveTimestampAsync(){}hasFeatureAsync(){}hasFeature(){}getInstanceCount(e){const{object:r,geometry:i}=e;return i.isInstancedBufferGeometry?i.instanceCount:r.count>1?r.count:1}getDrawingBufferSize(){return hU=hU||new Nt,this.renderer.getDrawingBufferSize(hU)}getScissor(){return pU=pU||new sr,this.renderer.getScissor(pU)}setScissorTest(){}getClearColor(){const e=this.renderer;return db=db||new jZ,e.getClearColor(db),db.getRGB(db,this.renderer.currentColorSpace),db}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:nAe(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${ow} webgpu`),this.domElement=e),e}set(e,r){this.data.set(e,r)}get(e){let r=this.data.get(e);return r===void 0&&(r={},this.data.set(e,r)),r}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}dispose(){}}let f9t=0;class h9t{constructor(e,r){this.buffers=[e.bufferGPU,r],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[this.activeBufferIndex^1]}switchBuffers(){this.activeBufferIndex^=1}}class p9t{constructor(e){this.backend=e}createAttribute(e,r){const i=this.backend,{gl:a}=i,o=e.array,s=e.usage||a.STATIC_DRAW,l=e.isInterleavedBufferAttribute?e.data:e,c=i.get(l);let u=c.bufferGPU;u===void 0&&(u=this._createBuffer(a,r,o,s),c.bufferGPU=u,c.bufferType=r,c.version=l.version);let d;if(o instanceof Float32Array)d=a.FLOAT;else if(o instanceof Uint16Array)e.isFloat16BufferAttribute?d=a.HALF_FLOAT:d=a.UNSIGNED_SHORT;else if(o instanceof Int16Array)d=a.SHORT;else if(o instanceof Uint32Array)d=a.UNSIGNED_INT;else if(o instanceof Int32Array)d=a.INT;else if(o instanceof Int8Array)d=a.BYTE;else if(o instanceof Uint8Array)d=a.UNSIGNED_BYTE;else if(o instanceof Uint8ClampedArray)d=a.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+o);let f={bufferGPU:u,bufferType:r,type:d,byteLength:o.byteLength,bytesPerElement:o.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:d===a.INT||d===a.UNSIGNED_INT||e.gpuType===Zo,id:f9t++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){const h=this._createBuffer(a,r,o,s);f=new h9t(f,h)}i.set(e,f)}updateAttribute(e){const r=this.backend,{gl:i}=r,a=e.array,o=e.isInterleavedBufferAttribute?e.data:e,s=r.get(o),l=s.bufferType,c=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(i.bindBuffer(l,s.bufferGPU),c.length===0)i.bufferSubData(l,0,a);else{for(let u=0,d=c.length;u<d;u++){const f=c[u];i.bufferSubData(l,f.start*a.BYTES_PER_ELEMENT,a,f.start,f.count)}o.clearUpdateRanges()}i.bindBuffer(l,null),s.version=o.version}destroyAttribute(e){const r=this.backend,{gl:i}=r;e.isInterleavedBufferAttribute&&r.delete(e.data);const a=r.get(e);i.deleteBuffer(a.bufferGPU),r.delete(e)}async getArrayBufferAsync(e){const r=this.backend,{gl:i}=r,a=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:o}=r.get(a),s=e.array,l=s.byteLength;i.bindBuffer(i.COPY_READ_BUFFER,o);const c=i.createBuffer();i.bindBuffer(i.COPY_WRITE_BUFFER,c),i.bufferData(i.COPY_WRITE_BUFFER,l,i.STREAM_READ),i.copyBufferSubData(i.COPY_READ_BUFFER,i.COPY_WRITE_BUFFER,0,0,l),await r.utils._clientWaitAsync();const u=new e.array.constructor(s.length);return i.bindBuffer(i.COPY_WRITE_BUFFER,c),i.getBufferSubData(i.COPY_WRITE_BUFFER,0,u),i.deleteBuffer(c),i.bindBuffer(i.COPY_READ_BUFFER,null),i.bindBuffer(i.COPY_WRITE_BUFFER,null),u.buffer}_createBuffer(e,r,i,a){const o=e.createBuffer();return e.bindBuffer(r,o),e.bufferData(r,i,a),e.bindBuffer(r,null),o}}let Ume=!1,gU,US;class g9t{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentClippingPlanes=0,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},Ume===!1&&(this._init(this.gl),Ume=!0)}_init(e){gU={[Nc]:e.FUNC_ADD,[LK]:e.FUNC_SUBTRACT,[kK]:e.FUNC_REVERSE_SUBTRACT},US={[FK]:e.ZERO,[$K]:e.ONE,[BK]:e.SRC_COLOR,[fC]:e.SRC_ALPHA,[HK]:e.SRC_ALPHA_SATURATE,[GK]:e.DST_COLOR,[UK]:e.DST_ALPHA,[zK]:e.ONE_MINUS_SRC_COLOR,[hC]:e.ONE_MINUS_SRC_ALPHA,[jK]:e.ONE_MINUS_DST_COLOR,[VK]:e.ONE_MINUS_DST_ALPHA}}enable(e){const{enabled:r}=this;r[e]!==!0&&(this.gl.enable(e),r[e]=!0)}disable(e){const{enabled:r}=this;r[e]!==!1&&(this.gl.disable(e),r[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:r}=this;e?r.frontFace(r.CW):r.frontFace(r.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:r}=this;e!==V3e?(this.enable(r.CULL_FACE),e!==this.currentCullFace&&(e===AH?r.cullFace(r.BACK):e===G3e?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):this.disable(r.CULL_FACE),this.currentCullFace=e}setLineWidth(e){const{currentLineWidth:r,gl:i}=this;e!==r&&(i.lineWidth(e),this.currentLineWidth=e)}setBlending(e,r,i,a,o,s,l,c){const{gl:u}=this;if(e===ml){this.currentBlendingEnabled===!0&&(this.disable(u.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(u.BLEND),this.currentBlendingEnabled=!0),e!==DK){if(e!==this.currentBlending||c!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==Nc||this.currentBlendEquationAlpha!==Nc)&&(u.blendEquation(u.FUNC_ADD),this.currentBlendEquation=Nc,this.currentBlendEquationAlpha=Nc),c)switch(e){case $u:u.blendFuncSeparate(u.ONE,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case Xx:u.blendFunc(u.ONE,u.ONE);break;case Kx:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case Zx:u.blendFuncSeparate(u.ZERO,u.SRC_COLOR,u.ZERO,u.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case $u:u.blendFuncSeparate(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case Xx:u.blendFunc(u.SRC_ALPHA,u.ONE);break;case Kx:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case Zx:u.blendFunc(u.ZERO,u.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=c}return}o=o||r,s=s||i,l=l||a,(r!==this.currentBlendEquation||o!==this.currentBlendEquationAlpha)&&(u.blendEquationSeparate(gU[r],gU[o]),this.currentBlendEquation=r,this.currentBlendEquationAlpha=o),(i!==this.currentBlendSrc||a!==this.currentBlendDst||s!==this.currentBlendSrcAlpha||l!==this.currentBlendDstAlpha)&&(u.blendFuncSeparate(US[i],US[a],US[s],US[l]),this.currentBlendSrc=i,this.currentBlendDst=a,this.currentBlendSrcAlpha=s,this.currentBlendDstAlpha=l),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){const{gl:r}=this;e?this.enable(r.DEPTH_TEST):this.disable(r.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:r}=this;switch(e){case pC:r.depthFunc(r.NEVER);break;case gC:r.depthFunc(r.ALWAYS);break;case mC:r.depthFunc(r.LESS);break;case Km:r.depthFunc(r.LEQUAL);break;case vC:r.depthFunc(r.EQUAL);break;case yC:r.depthFunc(r.GEQUAL);break;case bC:r.depthFunc(r.GREATER);break;case xC:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}this.currentDepthFunc=e}}setStencilTest(e){const{gl:r}=this;e?this.enable(r.STENCIL_TEST):this.disable(r.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,r,i){(this.currentStencilFunc!==e||this.currentStencilRef!==r||this.currentStencilFuncMask!==i)&&(this.gl.stencilFunc(e,r,i),this.currentStencilFunc=e,this.currentStencilRef=r,this.currentStencilFuncMask=i)}setStencilOp(e,r,i){(this.currentStencilFail!==e||this.currentStencilZFail!==r||this.currentStencilZPass!==i)&&(this.gl.stencilOp(e,r,i),this.currentStencilFail=e,this.currentStencilZFail=r,this.currentStencilZPass=i)}setMaterial(e,r,i){const{gl:a}=this;e.side===dl?this.disable(a.CULL_FACE):this.enable(a.CULL_FACE);let o=e.side===va;r&&(o=!o),this.setFlipSided(o),e.blending===$u&&e.transparent===!1?this.setBlending(ml):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);const s=e.stencilWrite;if(this.setStencilTest(s),s&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0&&this.backend.renderer.samples>1?this.enable(a.SAMPLE_ALPHA_TO_COVERAGE):this.disable(a.SAMPLE_ALPHA_TO_COVERAGE),i>0&&this.currentClippingPlanes!==i)for(let c=0;c<8;c++)c<i?this.enable(12288+c):this.disable(12288+c)}setPolygonOffset(e,r,i){const{gl:a}=this;e?(this.enable(a.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==r||this.currentPolygonOffsetUnits!==i)&&(a.polygonOffset(r,i),this.currentPolygonOffsetFactor=r,this.currentPolygonOffsetUnits=i)):this.disable(a.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}bindFramebuffer(e,r){const{gl:i,currentBoundFramebuffers:a}=this;return a[e]!==r?(i.bindFramebuffer(e,r),a[e]=r,e===i.DRAW_FRAMEBUFFER&&(a[i.FRAMEBUFFER]=r),e===i.FRAMEBUFFER&&(a[i.DRAW_FRAMEBUFFER]=r),!0):!1}drawBuffers(e,r){const{gl:i}=this;let a=[],o=!1;if(e.textures!==null){a=this.currentDrawbuffers.get(r),a===void 0&&(a=[],this.currentDrawbuffers.set(r,a));const s=e.textures;if(a.length!==s.length||a[0]!==i.COLOR_ATTACHMENT0){for(let l=0,c=s.length;l<c;l++)a[l]=i.COLOR_ATTACHMENT0+l;a.length=s.length,o=!0}}else a[0]!==i.BACK&&(a[0]=i.BACK,o=!0);o&&i.drawBuffers(a)}activeTexture(e){const{gl:r,currentTextureSlot:i,maxTextures:a}=this;e===void 0&&(e=r.TEXTURE0+a-1),i!==e&&(r.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,r,i){const{gl:a,currentTextureSlot:o,currentBoundTextures:s,maxTextures:l}=this;i===void 0&&(o===null?i=a.TEXTURE0+l-1:i=o);let c=s[i];c===void 0&&(c={type:void 0,texture:void 0},s[i]=c),(c.type!==e||c.texture!==r)&&(o!==i&&(a.activeTexture(i),this.currentTextureSlot=i),a.bindTexture(e,r),c.type=e,c.texture=r)}bindBufferBase(e,r,i){const{gl:a}=this,o=`${e}-${r}`;return this.currentBoundBufferBases[o]!==i?(a.bindBufferBase(e,r,i),this.currentBoundBufferBases[o]=i,!0):!1}unbindTexture(){const{gl:e,currentTextureSlot:r,currentBoundTextures:i}=this,a=i[r];a!==void 0&&a.type!==void 0&&(e.bindTexture(a.type,null),a.type=void 0,a.texture=void 0)}}class m9t{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,r=Oc){const{gl:i,extensions:a}=this;let o;if(e===Ws)return i.UNSIGNED_BYTE;if(e===EL)return i.UNSIGNED_SHORT_4_4_4_4;if(e===CL)return i.UNSIGNED_SHORT_5_5_5_1;if(e===ML)return i.UNSIGNED_INT_5_9_9_9_REV;if(e===q0)return i.BYTE;if(e===Y0)return i.SHORT;if(e===Bd)return i.UNSIGNED_SHORT;if(e===Zo)return i.INT;if(e===Ca)return i.UNSIGNED_INT;if(e===Ka)return i.FLOAT;if(e===vl)return i.HALF_FLOAT;if(e===qK)return i.ALPHA;if(e===HM)return i.RGB;if(e===vs)return i.RGBA;if(e===YK)return i.LUMINANCE;if(e===XK)return i.LUMINANCE_ALPHA;if(e===Jf)return i.DEPTH_COMPONENT;if(e===ih)return i.DEPTH_STENCIL;if(e===WM)return i.RED;if(e===sw)return i.RED_INTEGER;if(e===My)return i.RG;if(e===lw)return i.RG_INTEGER;if(e===cw)return i.RGBA_INTEGER;if(e===X0||e===Rm||e===Pm||e===Nm)if(r===Pn)if(o=a.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(e===X0)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===Rm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===Pm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===Nm)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=a.get("WEBGL_compressed_texture_s3tc"),o!==null){if(e===X0)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Rm)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Pm)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Nm)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===_C||e===wC||e===SC||e===EC)if(o=a.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(e===_C)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===wC)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===SC)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===EC)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===CC||e===Qx||e===Jx)if(o=a.get("WEBGL_compressed_texture_etc"),o!==null){if(e===CC||e===Qx)return r===Pn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(e===Jx)return r===Pn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===e_||e===t_||e===n_||e===r_||e===i_||e===a_||e===o_||e===s_||e===l_||e===c_||e===u_||e===d_||e===f_||e===h_)if(o=a.get("WEBGL_compressed_texture_astc"),o!==null){if(e===e_)return r===Pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===t_)return r===Pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===n_)return r===Pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===r_)return r===Pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===i_)return r===Pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===a_)return r===Pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===o_)return r===Pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===s_)return r===Pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===l_)return r===Pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===c_)return r===Pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===u_)return r===Pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===d_)return r===Pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===f_)return r===Pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===h_)return r===Pn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===K0)if(o=a.get("EXT_texture_compression_bptc"),o!==null){if(e===K0)return r===Pn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===KK||e===MC||e===TC||e===AC)if(o=a.get("EXT_texture_compression_rgtc"),o!==null){if(e===K0)return o.COMPRESSED_RED_RGTC1_EXT;if(e===MC)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===TC)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===AC)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===rh?i.UNSIGNED_INT_24_8:i[e]!==void 0?i[e]:null}_clientWaitAsync(){const{gl:e}=this,r=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((i,a)=>{function o(){const s=e.clientWaitSync(r,e.SYNC_FLUSH_COMMANDS_BIT,0);if(s===e.WAIT_FAILED){e.deleteSync(r),a();return}if(s===e.TIMEOUT_EXPIRED){requestAnimationFrame(o);return}e.deleteSync(r),i()}o()})}}let Vme=!1,TR,mU,Gme;class v9t{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},Vme===!1&&(this._init(this.gl),Vme=!0)}_init(e){TR={[Ey]:e.REPEAT,[Gf]:e.CLAMP_TO_EDGE,[Cy]:e.MIRRORED_REPEAT},mU={[na]:e.NEAREST,[OO]:e.NEAREST_MIPMAP_NEAREST,[jf]:e.NEAREST_MIPMAP_LINEAR,[Lo]:e.LINEAR,[gx]:e.LINEAR_MIPMAP_NEAREST,[Yl]:e.LINEAR_MIPMAP_LINEAR},Gme={[ZK]:e.NEVER,[nZ]:e.ALWAYS,[TL]:e.LESS,[AL]:e.LEQUAL,[QK]:e.EQUAL,[tZ]:e.GEQUAL,[JK]:e.GREATER,[eZ]:e.NOTEQUAL}}filterFallback(e){const{gl:r}=this;return e===na||e===OO||e===jf?r.NEAREST:r.LINEAR}getGLTextureType(e){const{gl:r}=this;let i;return e.isCubeTexture===!0?i=r.TEXTURE_CUBE_MAP:e.isDataArrayTexture===!0||e.isCompressedArrayTexture===!0?i=r.TEXTURE_2D_ARRAY:e.isData3DTexture===!0?i=r.TEXTURE_3D:i=r.TEXTURE_2D,i}getInternalFormat(e,r,i,a,o=!1){const{gl:s,extensions:l}=this;if(e!==null){if(s[e]!==void 0)return s[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let c=r;return r===s.RED&&(i===s.FLOAT&&(c=s.R32F),i===s.HALF_FLOAT&&(c=s.R16F),i===s.UNSIGNED_BYTE&&(c=s.R8),i===s.UNSIGNED_SHORT&&(c=s.R16),i===s.UNSIGNED_INT&&(c=s.R32UI),i===s.BYTE&&(c=s.R8I),i===s.SHORT&&(c=s.R16I),i===s.INT&&(c=s.R32I)),r===s.RED_INTEGER&&(i===s.UNSIGNED_BYTE&&(c=s.R8UI),i===s.UNSIGNED_SHORT&&(c=s.R16UI),i===s.UNSIGNED_INT&&(c=s.R32UI),i===s.BYTE&&(c=s.R8I),i===s.SHORT&&(c=s.R16I),i===s.INT&&(c=s.R32I)),r===s.RG&&(i===s.FLOAT&&(c=s.RG32F),i===s.HALF_FLOAT&&(c=s.RG16F),i===s.UNSIGNED_BYTE&&(c=s.RG8),i===s.UNSIGNED_SHORT&&(c=s.RG16),i===s.UNSIGNED_INT&&(c=s.RG32UI),i===s.BYTE&&(c=s.RG8I),i===s.SHORT&&(c=s.RG16I),i===s.INT&&(c=s.RG32I)),r===s.RG_INTEGER&&(i===s.UNSIGNED_BYTE&&(c=s.RG8UI),i===s.UNSIGNED_SHORT&&(c=s.RG16UI),i===s.UNSIGNED_INT&&(c=s.RG32UI),i===s.BYTE&&(c=s.RG8I),i===s.SHORT&&(c=s.RG16I),i===s.INT&&(c=s.RG32I)),r===s.RGB&&(i===s.FLOAT&&(c=s.RGB32F),i===s.HALF_FLOAT&&(c=s.RGB16F),i===s.UNSIGNED_BYTE&&(c=s.RGB8),i===s.UNSIGNED_SHORT&&(c=s.RGB16),i===s.UNSIGNED_INT&&(c=s.RGB32UI),i===s.BYTE&&(c=s.RGB8I),i===s.SHORT&&(c=s.RGB16I),i===s.INT&&(c=s.RGB32I),i===s.UNSIGNED_BYTE&&(c=a===Pn&&o===!1?s.SRGB8:s.RGB8),i===s.UNSIGNED_SHORT_5_6_5&&(c=s.RGB565),i===s.UNSIGNED_SHORT_5_5_5_1&&(c=s.RGB5_A1),i===s.UNSIGNED_SHORT_4_4_4_4&&(c=s.RGB4),i===s.UNSIGNED_INT_5_9_9_9_REV&&(c=s.RGB9_E5)),r===s.RGB_INTEGER&&(i===s.UNSIGNED_BYTE&&(c=s.RGB8UI),i===s.UNSIGNED_SHORT&&(c=s.RGB16UI),i===s.UNSIGNED_INT&&(c=s.RGB32UI),i===s.BYTE&&(c=s.RGB8I),i===s.SHORT&&(c=s.RGB16I),i===s.INT&&(c=s.RGB32I)),r===s.RGBA&&(i===s.FLOAT&&(c=s.RGBA32F),i===s.HALF_FLOAT&&(c=s.RGBA16F),i===s.UNSIGNED_BYTE&&(c=s.RGBA8),i===s.UNSIGNED_SHORT&&(c=s.RGBA16),i===s.UNSIGNED_INT&&(c=s.RGBA32UI),i===s.BYTE&&(c=s.RGBA8I),i===s.SHORT&&(c=s.RGBA16I),i===s.INT&&(c=s.RGBA32I),i===s.UNSIGNED_BYTE&&(c=a===Pn&&o===!1?s.SRGB8_ALPHA8:s.RGBA8),i===s.UNSIGNED_SHORT_4_4_4_4&&(c=s.RGBA4),i===s.UNSIGNED_SHORT_5_5_5_1&&(c=s.RGB5_A1)),r===s.RGBA_INTEGER&&(i===s.UNSIGNED_BYTE&&(c=s.RGBA8UI),i===s.UNSIGNED_SHORT&&(c=s.RGBA16UI),i===s.UNSIGNED_INT&&(c=s.RGBA32UI),i===s.BYTE&&(c=s.RGBA8I),i===s.SHORT&&(c=s.RGBA16I),i===s.INT&&(c=s.RGBA32I)),r===s.DEPTH_COMPONENT&&(i===s.UNSIGNED_INT&&(c=s.DEPTH24_STENCIL8),i===s.FLOAT&&(c=s.DEPTH_COMPONENT32F)),r===s.DEPTH_STENCIL&&i===s.UNSIGNED_INT_24_8&&(c=s.DEPTH24_STENCIL8),(c===s.R16F||c===s.R32F||c===s.RG16F||c===s.RG32F||c===s.RGBA16F||c===s.RGBA32F)&&l.get("EXT_color_buffer_float"),c}setTextureParameters(e,r){const{gl:i,extensions:a,backend:o}=this;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,r.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,r.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE),i.texParameteri(e,i.TEXTURE_WRAP_S,TR[r.wrapS]),i.texParameteri(e,i.TEXTURE_WRAP_T,TR[r.wrapT]),(e===i.TEXTURE_3D||e===i.TEXTURE_2D_ARRAY)&&i.texParameteri(e,i.TEXTURE_WRAP_R,TR[r.wrapR]),i.texParameteri(e,i.TEXTURE_MAG_FILTER,mU[r.magFilter]);const s=r.mipmaps!==void 0&&r.mipmaps.length>0,l=r.minFilter===Lo&&s?Yl:r.minFilter;if(i.texParameteri(e,i.TEXTURE_MIN_FILTER,mU[l]),r.compareFunction&&(i.texParameteri(e,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(e,i.TEXTURE_COMPARE_FUNC,Gme[r.compareFunction])),a.has("EXT_texture_filter_anisotropic")===!0){if(r.magFilter===na||r.minFilter!==jf&&r.minFilter!==Yl||r.type===Ka&&a.has("OES_texture_float_linear")===!1)return;if(r.anisotropy>1){const c=a.get("EXT_texture_filter_anisotropic");i.texParameterf(e,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r.anisotropy,o.getMaxAnisotropy()))}}}createDefaultTexture(e){const{gl:r,backend:i,defaultTextures:a}=this,o=this.getGLTextureType(e);let s=a[o];s===void 0&&(s=r.createTexture(),i.state.bindTexture(o,s),r.texParameteri(o,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(o,r.TEXTURE_MAG_FILTER,r.NEAREST),a[o]=s),i.set(e,{textureGPU:s,glTextureType:o,isDefault:!0})}createTexture(e,r){const{gl:i,backend:a}=this,{levels:o,width:s,height:l,depth:c}=r,u=a.utils.convert(e.format,e.colorSpace),d=a.utils.convert(e.type),f=this.getInternalFormat(e.internalFormat,u,d,e.colorSpace,e.isVideoTexture),h=i.createTexture(),p=this.getGLTextureType(e);a.state.bindTexture(p,h),this.setTextureParameters(p,e),e.isDataArrayTexture||e.isCompressedArrayTexture?i.texStorage3D(i.TEXTURE_2D_ARRAY,o,f,s,l,c):e.isData3DTexture?i.texStorage3D(i.TEXTURE_3D,o,f,s,l,c):e.isVideoTexture||i.texStorage2D(p,o,f,s,l),a.set(e,{textureGPU:h,glTextureType:p,glFormat:u,glType:d,glInternalFormat:f})}copyBufferToTexture(e,r){const{gl:i,backend:a}=this,{textureGPU:o,glTextureType:s,glFormat:l,glType:c}=a.get(r),{width:u,height:d}=r.source.data;i.bindBuffer(i.PIXEL_UNPACK_BUFFER,e),a.state.bindTexture(s,o),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.texSubImage2D(s,0,0,0,u,d,l,c,0),i.bindBuffer(i.PIXEL_UNPACK_BUFFER,null),a.state.unbindTexture()}updateTexture(e,r){const{gl:i}=this,{width:a,height:o}=r,{textureGPU:s,glTextureType:l,glFormat:c,glType:u,glInternalFormat:d}=this.backend.get(e);if(e.isRenderTargetTexture||s===void 0)return;const f=h=>h.isDataTexture?h.image.data:typeof HTMLImageElement<"u"&&h instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&h instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&h instanceof ImageBitmap||h instanceof OffscreenCanvas?h:h.data;if(this.backend.state.bindTexture(l,s),this.setTextureParameters(l,e),e.isCompressedTexture){const h=e.mipmaps,p=r.image;for(let g=0;g<h.length;g++){const m=h[g];e.isCompressedArrayTexture?e.format!==i.RGBA?c!==null?i.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,g,0,0,0,m.width,m.height,p.depth,c,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texSubImage3D(i.TEXTURE_2D_ARRAY,g,0,0,0,m.width,m.height,p.depth,c,u,m.data):c!==null?i.compressedTexSubImage2D(i.TEXTURE_2D,g,0,0,m.width,m.height,c,m.data):console.warn("Unsupported compressed texture format")}}else if(e.isCubeTexture){const h=r.images;for(let p=0;p<6;p++){const g=f(h[p]);i.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,0,0,a,o,c,u,g)}}else if(e.isDataArrayTexture){const h=r.image;i.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,h.width,h.height,h.depth,c,u,h.data)}else if(e.isData3DTexture){const h=r.image;i.texSubImage3D(i.TEXTURE_3D,0,0,0,0,h.width,h.height,h.depth,c,u,h.data)}else if(e.isVideoTexture)e.update(),i.texImage2D(l,0,d,c,u,r.image);else{const h=f(r.image);i.texSubImage2D(l,0,0,0,a,o,c,u,h)}}generateMipmaps(e){const{gl:r,backend:i}=this,{textureGPU:a,glTextureType:o}=i.get(e);i.state.bindTexture(o,a),r.generateMipmap(o)}deallocateRenderBuffers(e){const{gl:r,backend:i}=this;if(e){const a=i.get(e);if(a.renderBufferStorageSetup=void 0,a.framebuffers){for(const o in a.framebuffers)r.deleteFramebuffer(a.framebuffers[o]);delete a.framebuffers}if(a.depthRenderbuffer&&(r.deleteRenderbuffer(a.depthRenderbuffer),delete a.depthRenderbuffer),a.stencilRenderbuffer&&(r.deleteRenderbuffer(a.stencilRenderbuffer),delete a.stencilRenderbuffer),a.msaaFrameBuffer&&(r.deleteFramebuffer(a.msaaFrameBuffer),delete a.msaaFrameBuffer),a.msaaRenderbuffers){for(let o=0;o<a.msaaRenderbuffers.length;o++)r.deleteRenderbuffer(a.msaaRenderbuffers[o]);delete a.msaaRenderbuffers}}}destroyTexture(e){const{gl:r,backend:i}=this,{textureGPU:a,renderTarget:o}=i.get(e);this.deallocateRenderBuffers(o),r.deleteTexture(a),i.delete(e)}copyTextureToTexture(e,r,i=null,a=null,o=0){const{gl:s,backend:l}=this,{state:c}=this.backend,{textureGPU:u,glTextureType:d,glType:f,glFormat:h}=l.get(r);let p,g,m,v,y,b;i!==null?(p=i.max.x-i.min.x,g=i.max.y-i.min.y,m=i.min.x,v=i.min.y):(p=e.image.width,g=e.image.height,m=0,v=0),a!==null?(y=a.x,b=a.y):(y=0,b=0),c.bindTexture(d,u),s.pixelStorei(s.UNPACK_ALIGNMENT,r.unpackAlignment),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,r.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,r.unpackAlignment);const x=s.getParameter(s.UNPACK_ROW_LENGTH),_=s.getParameter(s.UNPACK_IMAGE_HEIGHT),S=s.getParameter(s.UNPACK_SKIP_PIXELS),M=s.getParameter(s.UNPACK_SKIP_ROWS),E=s.getParameter(s.UNPACK_SKIP_IMAGES),T=e.isCompressedTexture?e.mipmaps[o]:e.image;if(s.pixelStorei(s.UNPACK_ROW_LENGTH,T.width),s.pixelStorei(s.UNPACK_IMAGE_HEIGHT,T.height),s.pixelStorei(s.UNPACK_SKIP_PIXELS,m),s.pixelStorei(s.UNPACK_SKIP_ROWS,v),e.isRenderTargetTexture||e.isDepthTexture){const P=l.get(e),A=l.get(r),N=l.get(P.renderTarget),O=l.get(A.renderTarget),I=N.framebuffers[P.cacheKey],D=O.framebuffers[A.cacheKey];c.bindFramebuffer(s.READ_FRAMEBUFFER,I),c.bindFramebuffer(s.DRAW_FRAMEBUFFER,D);let k=s.COLOR_BUFFER_BIT;e.isDepthTexture&&(k=s.DEPTH_BUFFER_BIT),s.blitFramebuffer(m,v,p,g,y,b,p,g,k,s.NEAREST),c.bindFramebuffer(s.READ_FRAMEBUFFER,null),c.bindFramebuffer(s.DRAW_FRAMEBUFFER,null)}else e.isDataTexture?s.texSubImage2D(s.TEXTURE_2D,o,y,b,p,g,h,f,T.data):e.isCompressedTexture?s.compressedTexSubImage2D(s.TEXTURE_2D,o,y,b,T.width,T.height,h,T.data):s.texSubImage2D(s.TEXTURE_2D,o,y,b,p,g,h,f,T);s.pixelStorei(s.UNPACK_ROW_LENGTH,x),s.pixelStorei(s.UNPACK_IMAGE_HEIGHT,_),s.pixelStorei(s.UNPACK_SKIP_PIXELS,S),s.pixelStorei(s.UNPACK_SKIP_ROWS,M),s.pixelStorei(s.UNPACK_SKIP_IMAGES,E),o===0&&r.generateMipmaps&&s.generateMipmap(s.TEXTURE_2D),c.unbindTexture()}copyFramebufferToTexture(e,r,i){const{gl:a}=this,{state:o}=this.backend,{textureGPU:s}=this.backend.get(e),{x:l,y:c,z:u,w:d}=i,f=e.isDepthTexture===!0||r.renderTarget&&r.renderTarget.samples>0,h=r.renderTarget?r.renderTarget.height:this.backend.gerDrawingBufferSize().y;if(f){const p=l!==0||c!==0;let g,m;if(e.isDepthTexture===!0?(g=a.DEPTH_BUFFER_BIT,m=a.DEPTH_ATTACHMENT,r.stencil&&(g|=a.STENCIL_BUFFER_BIT)):(g=a.COLOR_BUFFER_BIT,m=a.COLOR_ATTACHMENT0),p){const v=this.backend.get(r.renderTarget),y=v.framebuffers[r.getCacheKey()],b=v.msaaFrameBuffer;o.bindFramebuffer(a.DRAW_FRAMEBUFFER,y),o.bindFramebuffer(a.READ_FRAMEBUFFER,b);const x=h-c-d;a.blitFramebuffer(l,x,l+u,x+d,l,x,l+u,x+d,g,a.NEAREST),o.bindFramebuffer(a.READ_FRAMEBUFFER,y),o.bindTexture(a.TEXTURE_2D,s),a.copyTexSubImage2D(a.TEXTURE_2D,0,0,0,l,x,u,d),o.unbindTexture()}else{const v=a.createFramebuffer();o.bindFramebuffer(a.DRAW_FRAMEBUFFER,v),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,m,a.TEXTURE_2D,s,0),a.blitFramebuffer(0,0,u,d,0,0,u,d,g,a.NEAREST),a.deleteFramebuffer(v)}}else o.bindTexture(a.TEXTURE_2D,s),a.copyTexSubImage2D(a.TEXTURE_2D,0,0,0,l,h-d-c,u,d),o.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(r)}setupRenderBufferStorage(e,r){const{gl:i}=this,a=r.renderTarget,{samples:o,depthTexture:s,depthBuffer:l,stencilBuffer:c,width:u,height:d}=a;if(i.bindRenderbuffer(i.RENDERBUFFER,e),l&&!c){let f=i.DEPTH_COMPONENT24;o>0?(s&&s.isDepthTexture&&s.type===i.FLOAT&&(f=i.DEPTH_COMPONENT32F),i.renderbufferStorageMultisample(i.RENDERBUFFER,o,f,u,d)):i.renderbufferStorage(i.RENDERBUFFER,f,u,d),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,e)}else l&&c&&(o>0?i.renderbufferStorageMultisample(i.RENDERBUFFER,o,i.DEPTH24_STENCIL8,u,d):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,u,d),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e))}async copyTextureToBuffer(e,r,i,a,o,s){const{backend:l,gl:c}=this,{textureGPU:u,glFormat:d,glType:f}=this.backend.get(e),h=c.createFramebuffer();c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const p=e.isCubeTexture?c.TEXTURE_CUBE_MAP_POSITIVE_X+s:c.TEXTURE_2D;c.framebufferTexture2D(c.READ_FRAMEBUFFER,c.COLOR_ATTACHMENT0,p,u,0);const g=this._getTypedArrayType(f),m=this._getBytesPerTexel(f,d),y=a*o*m,b=c.createBuffer();c.bindBuffer(c.PIXEL_PACK_BUFFER,b),c.bufferData(c.PIXEL_PACK_BUFFER,y,c.STREAM_READ),c.readPixels(r,i,a,o,d,f,0),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),await l.utils._clientWaitAsync();const x=new g(y/g.BYTES_PER_ELEMENT);return c.bindBuffer(c.PIXEL_PACK_BUFFER,b),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,x),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),c.deleteFramebuffer(h),x}_getTypedArrayType(e){const{gl:r}=this;if(e===r.UNSIGNED_BYTE)return Uint8Array;if(e===r.UNSIGNED_SHORT_4_4_4_4||e===r.UNSIGNED_SHORT_5_5_5_1||e===r.UNSIGNED_SHORT_5_6_5||e===r.UNSIGNED_SHORT)return Uint16Array;if(e===r.UNSIGNED_INT)return Uint32Array;if(e===r.HALF_FLOAT)return Uint16Array;if(e===r.FLOAT)return Float32Array;throw new Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,r){const{gl:i}=this;let a=0;if(e===i.UNSIGNED_BYTE&&(a=1),(e===i.UNSIGNED_SHORT_4_4_4_4||e===i.UNSIGNED_SHORT_5_5_5_1||e===i.UNSIGNED_SHORT_5_6_5||e===i.UNSIGNED_SHORT||e===i.HALF_FLOAT)&&(a=2),(e===i.UNSIGNED_INT||e===i.FLOAT)&&(a=4),r===i.RGBA)return a*4;if(r===i.RGB)return a*3;if(r===i.ALPHA)return a}}class y9t{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let r=this.extensions[e];return r===void 0&&(r=this.gl.getExtension(e),this.extensions[e]=r),r}has(e){return this.availableExtensions.includes(e)}}class b9t{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(this.maxAnisotropy!==null)return this.maxAnisotropy;const e=this.backend.gl,r=this.backend.extensions;if(r.has("EXT_texture_filter_anisotropic")===!0){const i=r.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}const jme={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBKIT_WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-bc",EXT_texture_compression_bptc:"texture-compression-bptc",EXT_disjoint_timer_query_webgl2:"timestamp-query"};class x9t{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,r){const{gl:i,mode:a,object:o,type:s,info:l,index:c}=this;c!==0?i.drawElements(a,r,s,e):i.drawArrays(a,e,r),l.update(o,r,a,1)}renderInstances(e,r,i){const{gl:a,mode:o,type:s,index:l,object:c,info:u}=this;i!==0&&(l!==0?a.drawElementsInstanced(o,r,s,e,i):a.drawArraysInstanced(o,e,r,i),u.update(c,r,o,i))}renderMultiDraw(e,r,i){const{extensions:a,mode:o,object:s,info:l}=this;if(i===0)return;const c=a.get("WEBGL_multi_draw");if(c===null)for(let u=0;u<i;u++)this.render(e[u],r[u]);else{this.index!==0?c.multiDrawElementsWEBGL(o,r,0,this.type,e,0,i):c.multiDrawArraysWEBGL(o,e,0,r,0,i);let u=0;for(let d=0;d<i;d++)u+=r[d];l.update(s,u,o,1)}}renderMultiDrawInstances(e,r,i,a){const{extensions:o,mode:s,object:l,info:c}=this;if(i===0)return;const u=o.get("WEBGL_multi_draw");if(u===null)for(let d=0;d<i;d++)this.renderInstances(e[d],r[d],a[d]);else{this.index!==0?u.multiDrawElementsInstancedWEBGL(s,r,0,this.type,e,0,a,0,i):u.multiDrawArraysInstancedWEBGL(s,e,0,r,0,a,0,i);let d=0;for(let f=0;f<i;f++)d+=r[f]*a[f];c.update(l,d,s,1)}}}class Hme extends KPe{constructor(e={}){super(e),this.isWebGLBackend=!0}init(e){super.init(e);const r=this.parameters,i=r.context!==void 0?r.context:e.domElement.getContext("webgl2");function a(o){o.preventDefault();const s={api:"WebGL",message:o.statusMessage||"Unknown reason",reason:null,originalEvent:o};e.onDeviceLost(s)}this._onContextLost=a,e.domElement.addEventListener("webglcontextlost",a,!1),this.gl=i,this.extensions=new y9t(this),this.capabilities=new b9t(this),this.attributeUtils=new p9t(this),this.textureUtils=new v9t(this),this.bufferRenderer=new x9t(this),this.state=new g9t(this),this.utils=new m9t(this),this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.trackTimestamp=r.trackTimestamp===!0,this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile"),this._knownBindings=new WeakSet,this._currentContext=null}get coordinateSystem(){return ku}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}async waitForGPU(){await this.utils._clientWaitAsync()}initTimestampQuery(e){if(!this.disjoint||!this.trackTimestamp)return;const r=this.get(e);if(this.queryRunning){r.queryQueue||(r.queryQueue=[]),r.queryQueue.push(e);return}r.activeQuery&&(this.gl.endQuery(this.disjoint.TIME_ELAPSED_EXT),r.activeQuery=null),r.activeQuery=this.gl.createQuery(),r.activeQuery!==null&&(this.gl.beginQuery(this.disjoint.TIME_ELAPSED_EXT,r.activeQuery),this.queryRunning=!0)}prepareTimestampBuffer(e){if(!this.disjoint||!this.trackTimestamp)return;const r=this.get(e);if(r.activeQuery&&(this.gl.endQuery(this.disjoint.TIME_ELAPSED_EXT),r.gpuQueries||(r.gpuQueries=[]),r.gpuQueries.push({query:r.activeQuery}),r.activeQuery=null,this.queryRunning=!1,r.queryQueue&&r.queryQueue.length>0)){const i=r.queryQueue.shift();this.initTimestampQuery(i)}}async resolveTimestampAsync(e,r="render"){if(!this.disjoint||!this.trackTimestamp)return;const i=this.get(e);i.gpuQueries||(i.gpuQueries=[]);for(let a=0;a<i.gpuQueries.length;a++){const o=i.gpuQueries[a],s=this.gl.getQueryParameter(o.query,this.gl.QUERY_RESULT_AVAILABLE),l=this.gl.getParameter(this.disjoint.GPU_DISJOINT_EXT);if(s&&!l){const c=this.gl.getQueryParameter(o.query,this.gl.QUERY_RESULT),u=Number(c)/1e6;this.gl.deleteQuery(o.query),i.gpuQueries.splice(a,1),a--,this.renderer.info.updateTimestamp(r,u)}}}getContext(){return this.gl}beginRender(e){const{gl:r}=this,i=this.get(e);if(this.initTimestampQuery(e),i.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1),e.viewport?this.updateViewport(e):r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),e.scissor){const{x:o,y:s,width:l,height:c}=e.scissorValue;r.scissor(o,e.height-c-s,l,c)}const a=e.occlusionQueryCount;a>0&&(i.currentOcclusionQueries=i.occlusionQueries,i.currentOcclusionQueryObjects=i.occlusionQueryObjects,i.lastOcclusionObject=null,i.occlusionQueries=new Array(a),i.occlusionQueryObjects=new Array(a),i.occlusionQueryIndex=0)}finishRender(e){const{gl:r,state:i}=this,a=this.get(e),o=a.previousContext,s=e.occlusionQueryCount;s>0&&(s>a.occlusionQueryIndex&&r.endQuery(r.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));const l=e.textures;if(l!==null)for(let c=0;c<l.length;c++){const u=l[c];u.generateMipmaps&&this.generateMipmaps(u)}if(this._currentContext=o,e.textures!==null&&e.renderTarget){const c=this.get(e.renderTarget),{samples:u}=e.renderTarget;if(u>0){const d=c.framebuffers[e.getCacheKey()],f=r.COLOR_BUFFER_BIT,h=c.msaaFrameBuffer,p=e.textures;i.bindFramebuffer(r.READ_FRAMEBUFFER,h),i.bindFramebuffer(r.DRAW_FRAMEBUFFER,d);for(let g=0;g<p.length;g++)if(e.scissor){const{x:m,y:v,width:y,height:b}=e.scissorValue,x=e.height-b-v;r.blitFramebuffer(m,x,m+y,x+b,m,x,m+y,x+b,f,r.NEAREST),r.invalidateSubFramebuffer(r.READ_FRAMEBUFFER,c.invalidationArray,m,x,y,b)}else r.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,f,r.NEAREST),r.invalidateFramebuffer(r.READ_FRAMEBUFFER,c.invalidationArray)}}o!==null&&(this._setFramebuffer(o),o.viewport?this.updateViewport(o):r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight)),this.prepareTimestampBuffer(e)}resolveOccludedAsync(e){const r=this.get(e),{currentOcclusionQueries:i,currentOcclusionQueryObjects:a}=r;if(i&&a){const o=new WeakSet,{gl:s}=this;r.currentOcclusionQueryObjects=null,r.currentOcclusionQueries=null;const l=()=>{let c=0;for(let u=0;u<i.length;u++){const d=i[u];d!==null&&s.getQueryParameter(d,s.QUERY_RESULT_AVAILABLE)&&(s.getQueryParameter(d,s.QUERY_RESULT)>0&&o.add(a[u]),i[u]=null,s.deleteQuery(d),c++)}c<i.length?requestAnimationFrame(l):r.occluded=o};l()}}isOccluded(e,r){const i=this.get(e);return i.occluded&&i.occluded.has(r)}updateViewport(e){const r=this.gl,{x:i,y:a,width:o,height:s}=e.viewportValue;r.viewport(i,e.height-s-a,o,s)}setScissorTest(e){const r=this.gl;e?r.enable(r.SCISSOR_TEST):r.disable(r.SCISSOR_TEST)}clear(e,r,i,a=null,o=!0){const{gl:s}=this;if(a===null){const c=this.getClearColor();c.r*=c.a,c.g*=c.a,c.b*=c.a,a={textures:null,clearColorValue:c}}let l=0;if(e&&(l|=s.COLOR_BUFFER_BIT),r&&(l|=s.DEPTH_BUFFER_BIT),i&&(l|=s.STENCIL_BUFFER_BIT),l!==0){let c;if(a.clearColorValue?c=a.clearColorValue:(c=this.getClearColor(),c.r*=c.a,c.g*=c.a,c.b*=c.a),r&&this.state.setDepthMask(!0),a.textures===null)s.clearColor(c.r,c.g,c.b,c.a),s.clear(l);else{if(o&&this._setFramebuffer(a),e)for(let u=0;u<a.textures.length;u++)s.clearBufferfv(s.COLOR,u,[c.r,c.g,c.b,c.a]);r&&i?s.clearBufferfi(s.DEPTH_STENCIL,0,1,0):r?s.clearBufferfv(s.DEPTH,0,[1]):i&&s.clearBufferiv(s.STENCIL,0,[0])}}}beginCompute(e){const{state:r,gl:i}=this;r.bindFramebuffer(i.FRAMEBUFFER,null),this.initTimestampQuery(e)}compute(e,r,i,a){const{state:o,gl:s}=this;this.discard||(s.enable(s.RASTERIZER_DISCARD),this.discard=!0);const{programGPU:l,transformBuffers:c,attributes:u}=this.get(a),d=this._getVaoKey(null,u),f=this.vaoCache[d];f===void 0?this._createVao(null,u):s.bindVertexArray(f),o.useProgram(l),this._bindUniforms(i);const h=this._getTransformFeedback(c);s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,h),s.beginTransformFeedback(s.POINTS),u[0].isStorageInstancedBufferAttribute?s.drawArraysInstanced(s.POINTS,0,1,r.count):s.drawArrays(s.POINTS,0,r.count),s.endTransformFeedback(),s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,null);for(let p=0;p<c.length;p++){const g=c[p];g.pbo&&this.textureUtils.copyBufferToTexture(g.transformBuffer,g.pbo),g.switchBuffers()}}finishCompute(e){const r=this.gl;this.discard=!1,r.disable(r.RASTERIZER_DISCARD),this.prepareTimestampBuffer(e),this._currentContext&&this._setFramebuffer(this._currentContext)}draw(e){const{object:r,pipeline:i,material:a,context:o,hardwareClippingPlanes:s}=e,{programGPU:l}=this.get(i),{gl:c,state:u}=this,d=this.get(o),f=e.getDrawParameters();if(f===null)return;this._bindUniforms(e.getBindings());const h=r.isMesh&&r.matrixWorld.determinant()<0;u.setMaterial(a,h,s),u.useProgram(l);const p=this.get(e);let g=p.staticVao;if(g===void 0||p.geometryId!==e.geometry.id){const S=this._getVaoKey(e.getIndex(),e.getAttributes());if(g=this.vaoCache[S],g===void 0){let M;({vaoGPU:g,staticVao:M}=this._createVao(e.getIndex(),e.getAttributes())),M&&(p.staticVao=g,p.geometryId=e.geometry.id)}}c.bindVertexArray(g);const m=e.getIndex(),v=d.lastOcclusionObject;if(v!==r&&v!==void 0){if(v!==null&&v.occlusionTest===!0&&(c.endQuery(c.ANY_SAMPLES_PASSED),d.occlusionQueryIndex++),r.occlusionTest===!0){const S=c.createQuery();c.beginQuery(c.ANY_SAMPLES_PASSED,S),d.occlusionQueries[d.occlusionQueryIndex]=S,d.occlusionQueryObjects[d.occlusionQueryIndex]=r}d.lastOcclusionObject=r}const y=this.bufferRenderer;r.isPoints?y.mode=c.POINTS:r.isLineSegments?y.mode=c.LINES:r.isLine?y.mode=c.LINE_STRIP:r.isLineLoop?y.mode=c.LINE_LOOP:a.wireframe===!0?(u.setLineWidth(a.wireframeLinewidth*this.renderer.getPixelRatio()),y.mode=c.LINES):y.mode=c.TRIANGLES;const{vertexCount:b,instanceCount:x}=f;let{firstVertex:_}=f;if(y.object=r,m!==null){_*=m.array.BYTES_PER_ELEMENT;const S=this.get(m);y.index=m.count,y.type=S.type}else y.index=0;r.isBatchedMesh?r._multiDrawInstances!==null?y.renderMultiDrawInstances(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount,r._multiDrawInstances):this.hasFeature("WEBGL_multi_draw")?y.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount):h0("THREE.WebGLRenderer: WEBGL_multi_draw not supported."):x>1?y.renderInstances(_,b,x):y.render(_,b),c.bindVertexArray(null)}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,r){this.textureUtils.createTexture(e,r)}updateTexture(e,r){this.textureUtils.updateTexture(e,r)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}copyTextureToBuffer(e,r,i,a,o,s){return this.textureUtils.copyTextureToBuffer(e,r,i,a,o,s)}createSampler(){}destroySampler(){}createNodeBuilder(e,r){return new d9t(e,r)}createProgram(e){const r=this.gl,{stage:i,code:a}=e,o=i==="fragment"?r.createShader(r.FRAGMENT_SHADER):r.createShader(r.VERTEX_SHADER);r.shaderSource(o,a),r.compileShader(o),this.set(e,{shaderGPU:o})}destroyProgram(){console.warn("Abstract class.")}createRenderPipeline(e,r){const i=this.gl,a=e.pipeline,{fragmentProgram:o,vertexProgram:s}=a,l=i.createProgram(),c=this.get(o).shaderGPU,u=this.get(s).shaderGPU;if(i.attachShader(l,c),i.attachShader(l,u),i.linkProgram(l),this.set(a,{programGPU:l,fragmentShader:c,vertexShader:u}),r!==null&&this.parallel){const d=new Promise(f=>{const h=this.parallel,p=()=>{i.getProgramParameter(l,h.COMPLETION_STATUS_KHR)?(this._completeCompile(e,a),f()):requestAnimationFrame(p)};p()});r.push(d);return}this._completeCompile(e,a)}_handleSource(e,r){const i=e.split(`
`),a=[],o=Math.max(r-6,0),s=Math.min(r+6,i.length);for(let l=o;l<s;l++){const c=l+1;a.push(`${c===r?">":" "} ${c}: ${i[l]}`)}return a.join(`
`)}_getShaderErrors(e,r,i){const a=e.getShaderParameter(r,e.COMPILE_STATUS),o=e.getShaderInfoLog(r).trim();if(a&&o==="")return"";const s=/ERROR: 0:(\d+)/.exec(o);if(s){const l=parseInt(s[1]);return i.toUpperCase()+`

`+o+`

`+this._handleSource(e.getShaderSource(r),l)}else return o}_logProgramError(e,r,i){if(this.renderer.debug.checkShaderErrors){const a=this.gl,o=a.getProgramInfoLog(e).trim();if(a.getProgramParameter(e,a.LINK_STATUS)===!1)if(typeof this.renderer.debug.onShaderError=="function")this.renderer.debug.onShaderError(a,e,i,r);else{const s=this._getShaderErrors(a,i,"vertex"),l=this._getShaderErrors(a,r,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(e,a.VALIDATE_STATUS)+`

Program Info Log: `+o+`
`+s+`
`+l)}else o!==""&&console.warn("THREE.WebGLProgram: Program Info Log:",o)}}_completeCompile(e,r){const{state:i,gl:a}=this,o=this.get(r),{programGPU:s,fragmentShader:l,vertexShader:c}=o;a.getProgramParameter(s,a.LINK_STATUS)===!1&&this._logProgramError(s,l,c),i.useProgram(s);const u=e.getBindings();this._setupBindings(u,s),this.set(r,{programGPU:s})}createComputePipeline(e,r){const{state:i,gl:a}=this,o={stage:"fragment",code:`#version 300 es
precision highp float;
void main() {}`};this.createProgram(o);const{computeProgram:s}=e,l=a.createProgram(),c=this.get(o).shaderGPU,u=this.get(s).shaderGPU,d=s.transforms,f=[],h=[];for(let v=0;v<d.length;v++){const y=d[v];f.push(y.varyingName),h.push(y.attributeNode)}a.attachShader(l,c),a.attachShader(l,u),a.transformFeedbackVaryings(l,f,a.SEPARATE_ATTRIBS),a.linkProgram(l),a.getProgramParameter(l,a.LINK_STATUS)===!1&&this._logProgramError(l,c,u),i.useProgram(l),this._setupBindings(r,l);const p=s.attributes,g=[],m=[];for(let v=0;v<p.length;v++){const y=p[v].node.attribute;g.push(y),this.has(y)||this.attributeUtils.createAttribute(y,a.ARRAY_BUFFER)}for(let v=0;v<h.length;v++){const y=h[v].attribute;this.has(y)||this.attributeUtils.createAttribute(y,a.ARRAY_BUFFER);const b=this.get(y);m.push(b)}this.set(e,{programGPU:l,transformBuffers:m,attributes:g})}createBindings(e,r){if(this._knownBindings.has(r)===!1){this._knownBindings.add(r);let i=0,a=0;for(const o of r){this.set(o,{textures:a,uniformBuffers:i});for(const s of o.bindings)s.isUniformBuffer&&i++,s.isSampledTexture&&a++}}this.updateBindings(e,r)}updateBindings(e){const{gl:r}=this,i=this.get(e);let a=i.uniformBuffers,o=i.textures;for(const s of e.bindings)if(s.isUniformsGroup||s.isUniformBuffer){const l=s.buffer,c=r.createBuffer();r.bindBuffer(r.UNIFORM_BUFFER,c),r.bufferData(r.UNIFORM_BUFFER,l,r.DYNAMIC_DRAW),this.set(s,{index:a++,bufferGPU:c})}else if(s.isSampledTexture){const{textureGPU:l,glTextureType:c}=this.get(s.texture);this.set(s,{index:o++,textureGPU:l,glTextureType:c})}}updateBinding(e){const r=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){const a=this.get(e).bufferGPU,o=e.buffer;r.bindBuffer(r.UNIFORM_BUFFER,a),r.bufferData(r.UNIFORM_BUFFER,o,r.DYNAMIC_DRAW)}}createIndexAttribute(e){const r=this.gl;this.attributeUtils.createAttribute(e,r.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;const r=this.gl;this.attributeUtils.createAttribute(e,r.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;const r=this.gl;this.attributeUtils.createAttribute(e,r.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){}hasFeature(e){const r=Object.keys(jme).filter(a=>jme[a]===e),i=this.extensions;for(let a=0;a<r.length;a++)if(i.has(r[a]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,r,i,a,o){this.textureUtils.copyTextureToTexture(e,r,i,a,o)}copyFramebufferToTexture(e,r,i){this.textureUtils.copyFramebufferToTexture(e,r,i)}_setFramebuffer(e){const{gl:r,state:i}=this;let a=null;if(e.textures!==null){const o=e.renderTarget,s=this.get(o),{samples:l,depthBuffer:c,stencilBuffer:u}=o,d=o.isWebGLCubeRenderTarget===!0;let f=s.msaaFrameBuffer,h=s.depthRenderbuffer;const p=PPe(e);let g;if(d?(s.cubeFramebuffers||(s.cubeFramebuffers={}),g=s.cubeFramebuffers[p]):(s.framebuffers||(s.framebuffers={}),g=s.framebuffers[p]),g===void 0){g=r.createFramebuffer(),i.bindFramebuffer(r.FRAMEBUFFER,g);const m=e.textures;if(d){s.cubeFramebuffers[p]=g;const{textureGPU:v}=this.get(m[0]),y=this.renderer._activeCubeFace;r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+y,v,0)}else{s.framebuffers[p]=g;for(let v=0;v<m.length;v++){const y=m[v],b=this.get(y);b.renderTarget=e.renderTarget,b.cacheKey=p;const x=r.COLOR_ATTACHMENT0+v;r.framebufferTexture2D(r.FRAMEBUFFER,x,r.TEXTURE_2D,b.textureGPU,0)}i.drawBuffers(e,g)}if(e.depthTexture!==null){const v=this.get(e.depthTexture),y=u?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;v.renderTarget=e.renderTarget,v.cacheKey=p,r.framebufferTexture2D(r.FRAMEBUFFER,y,r.TEXTURE_2D,v.textureGPU,0)}}if(l>0){if(f===void 0){const m=[];f=r.createFramebuffer(),i.bindFramebuffer(r.FRAMEBUFFER,f);const v=[],y=e.textures;for(let b=0;b<y.length;b++){if(v[b]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,v[b]),m.push(r.COLOR_ATTACHMENT0+b),c){const S=u?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;m.push(S)}const x=e.textures[b],_=this.get(x);r.renderbufferStorageMultisample(r.RENDERBUFFER,l,_.glInternalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+b,r.RENDERBUFFER,v[b])}if(s.msaaFrameBuffer=f,s.msaaRenderbuffers=v,h===void 0){h=r.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(h,e),s.depthRenderbuffer=h;const b=u?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT;m.push(b)}s.invalidationArray=m}a=s.msaaFrameBuffer}else a=g}i.bindFramebuffer(r.FRAMEBUFFER,a)}_getVaoKey(e,r){let i=[];if(e!==null){const a=this.get(e);i+=":"+a.id}for(let a=0;a<r.length;a++){const o=this.get(r[a]);i+=":"+o.id}return i}_createVao(e,r){const{gl:i}=this,a=i.createVertexArray();let o="",s=!0;if(i.bindVertexArray(a),e!==null){const l=this.get(e);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,l.bufferGPU),o+=":"+l.id}for(let l=0;l<r.length;l++){const c=r[l],u=this.get(c);o+=":"+u.id,i.bindBuffer(i.ARRAY_BUFFER,u.bufferGPU),i.enableVertexAttribArray(l),(c.isStorageBufferAttribute||c.isStorageInstancedBufferAttribute)&&(s=!1);let d,f;c.isInterleavedBufferAttribute===!0?(d=c.data.stride*u.bytesPerElement,f=c.offset*u.bytesPerElement):(d=0,f=0),u.isInteger?i.vertexAttribIPointer(l,c.itemSize,u.type,d,f):i.vertexAttribPointer(l,c.itemSize,u.type,c.normalized,d,f),c.isInstancedBufferAttribute&&!c.isInterleavedBufferAttribute?i.vertexAttribDivisor(l,c.meshPerAttribute):c.isInterleavedBufferAttribute&&c.data.isInstancedInterleavedBuffer&&i.vertexAttribDivisor(l,c.data.meshPerAttribute)}return i.bindBuffer(i.ARRAY_BUFFER,null),this.vaoCache[o]=a,{vaoGPU:a,staticVao:s}}_getTransformFeedback(e){let r="";for(let o=0;o<e.length;o++)r+=":"+e[o].id;let i=this.transformFeedbackCache[r];if(i!==void 0)return i;const{gl:a}=this;i=a.createTransformFeedback(),a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,i);for(let o=0;o<e.length;o++){const s=e[o];a.bindBufferBase(a.TRANSFORM_FEEDBACK_BUFFER,o,s.transformBuffer)}return a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[r]=i,i}_setupBindings(e,r){const i=this.gl;for(const a of e)for(const o of a.bindings){const l=this.get(o).index;if(o.isUniformsGroup||o.isUniformBuffer){const c=i.getUniformBlockIndex(r,o.name);i.uniformBlockBinding(r,c,l)}else if(o.isSampledTexture){const c=i.getUniformLocation(r,o.name);i.uniform1i(c,l)}}}_bindUniforms(e){const{gl:r,state:i}=this;for(const a of e)for(const o of a.bindings){const s=this.get(o),l=s.index;o.isUniformsGroup||o.isUniformBuffer?i.bindBufferBase(r.UNIFORM_BUFFER,l,s.bufferGPU):o.isSampledTexture&&i.bindTexture(s.glTextureType,s.textureGPU,r.TEXTURE0+l)}}dispose(){this.renderer.domElement.removeEventListener("webglcontextlost",this._onContextLost)}}const Xb={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},ss={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},cs={Store:"store"},no={Load:"load",Clear:"clear"},vU={CCW:"ccw"},yU={None:"none",Front:"front",Back:"back"},b_={Uint16:"uint16",Uint32:"uint32"},Pe={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},bU={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},y0={Linear:"linear",Nearest:"nearest"},tr={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDstColor:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},Yv={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},Wme={None:0,All:15},Pg={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},xU={Storage:"storage",ReadOnlyStorage:"read-only-storage"},_U={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"},VS={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},qme={TwoD:"2d",ThreeD:"3d"},Cu={TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",ThreeD:"3d"},_9t={All:"all"},AR={Vertex:"vertex",Instance:"instance"},eW={DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups"};class w9t extends KZ{constructor(e,r){super(e),this.texture=r,this.version=r?r.version:0,this.isSampler=!0}}class S9t extends w9t{constructor(e,r,i){super(e,r?r.value:null),this.textureNode=r,this.groupNode=i}update(){this.texture=this.textureNode.value}}class E9t extends jPe{constructor(e,r){super(e,r?r.array:null),this.attribute=r,this.isStorageBuffer=!0}}let C9t=0;class M9t extends E9t{constructor(e,r){super("StorageBuffer_"+C9t++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:gp.READ_WRITE,this.groupNode=r}get buffer(){return this.nodeUniform.value}}class T9t extends xv{constructor(e){super(),this.device=e;const r=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,i=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,a=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:y0.Linear}),this.flipYSampler=e.createSampler({minFilter:y0.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:r}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:i}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:a})}getTransferPipeline(e){let r=this.transferPipelines[e];return r===void 0&&(r=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Xb.TriangleStrip,stripIndexFormat:b_.Uint32},layout:"auto"}),this.transferPipelines[e]=r),r}getFlipYPipeline(e){let r=this.flipYPipelines[e];return r===void 0&&(r=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Xb.TriangleStrip,stripIndexFormat:b_.Uint32},layout:"auto"}),this.flipYPipelines[e]=r),r}flipY(e,r,i=0){const a=r.format,{width:o,height:s}=r.size,l=this.getTransferPipeline(a),c=this.getFlipYPipeline(a),u=this.device.createTexture({size:{width:o,height:s,depthOrArrayLayers:1},format:a,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),d=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Cu.TwoD,baseArrayLayer:i}),f=u.createView({baseMipLevel:0,mipLevelCount:1,dimension:Cu.TwoD,baseArrayLayer:0}),h=this.device.createCommandEncoder({}),p=(g,m,v)=>{const y=g.getBindGroupLayout(0),b=this.device.createBindGroup({layout:y,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:m}]}),x=h.beginRenderPass({colorAttachments:[{view:v,loadOp:no.Clear,storeOp:cs.Store,clearValue:[0,0,0,0]}]});x.setPipeline(g),x.setBindGroup(0,b),x.draw(4,1,0,0),x.end()};p(l,d,f),p(c,f,d),this.device.queue.submit([h.finish()]),u.destroy()}generateMipmaps(e,r,i=0){const a=this.get(e);a.useCount===void 0&&(a.useCount=0,a.layers=[]);const o=a.layers[i]||this._mipmapCreateBundles(e,r,i),s=this.device.createCommandEncoder({});this._mipmapRunBundles(s,o),this.device.queue.submit([s.finish()]),a.useCount!==0&&(a.layers[i]=o),a.useCount++}_mipmapCreateBundles(e,r,i){const a=this.getTransferPipeline(r.format),o=a.getBindGroupLayout(0);let s=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Cu.TwoD,baseArrayLayer:i});const l=[];for(let c=1;c<r.mipLevelCount;c++){const u=this.device.createBindGroup({layout:o,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:s}]}),d=e.createView({baseMipLevel:c,mipLevelCount:1,dimension:Cu.TwoD,baseArrayLayer:i}),f={colorAttachments:[{view:d,loadOp:no.Clear,storeOp:cs.Store,clearValue:[0,0,0,0]}]},h=this.device.createRenderBundleEncoder({colorFormats:[r.format]});h.setPipeline(a),h.setBindGroup(0,u),h.draw(4,1,0,0),l.push({renderBundles:[h.finish()],passDescriptor:f}),s=d}return l}_mipmapRunBundles(e,r){const i=r.length;for(let a=0;a<i;a++){const o=r[a],s=e.beginRenderPass(o.passDescriptor);s.executeBundles(o.renderBundles),s.end()}}}const A9t={[ZK]:"never",[TL]:"less",[QK]:"equal",[AL]:"less-equal",[JK]:"greater",[tZ]:"greater-equal",[nZ]:"always",[eZ]:"not-equal"},R9t=[0,1,3,2,4,5];class P9t{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this.colorBuffer=null,this.depthTexture=new vv,this.depthTexture.name="depthBuffer"}createSampler(e){const r=this.backend,i=r.device,a=r.get(e),o={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:1};o.magFilter===y0.Linear&&o.minFilter===y0.Linear&&o.mipmapFilter===y0.Linear&&(o.maxAnisotropy=e.anisotropy),e.isDepthTexture&&e.compareFunction!==null&&(o.compare=A9t[e.compareFunction]),a.sampler=i.createSampler(o)}createDefaultTexture(e){let r;const i=tW(e);e.isCubeTexture?r=this._getDefaultCubeTextureGPU(i):e.isVideoTexture?this.backend.get(e).externalTexture=this._getDefaultVideoFrame():r=this._getDefaultTextureGPU(i),this.backend.get(e).texture=r}createTexture(e,r={}){const i=this.backend,a=i.get(e);if(a.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");r.needsMipmaps===void 0&&(r.needsMipmaps=!1),r.levels===void 0&&(r.levels=1),r.depth===void 0&&(r.depth=1);const{width:o,height:s,depth:l,levels:c}=r;e.isFramebufferTexture&&(r.renderTarget?r.format=this.backend.utils.getCurrentColorFormat(r.renderTarget):r.format=this.backend.utils.getPreferredCanvasFormat());const u=this._getDimension(e),d=e.internalFormat||r.format||tW(e,i.device);a.format=d;let f=r.sampleCount!==void 0?r.sampleCount:1;f=i.utils.getSampleCount(f);const h=e.isRenderTargetTexture&&!e.isMultisampleRenderTargetTexture?1:f;let p=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(p|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&e.isCompressedArrayTexture!==!0&&(p|=GPUTextureUsage.RENDER_ATTACHMENT);const g={label:e.name,size:{width:o,height:s,depthOrArrayLayers:l},mipLevelCount:c,sampleCount:h,dimension:u,format:d,usage:p};if(e.isVideoTexture){const m=e.source.data,v=new VideoFrame(m);g.size.width=v.displayWidth,g.size.height=v.displayHeight,v.close(),a.externalTexture=m}else{if(d===void 0)return console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);a.texture=i.device.createTexture(g)}if(e.isRenderTargetTexture&&f>1&&!e.isMultisampleRenderTargetTexture){const m=Object.assign({},g);m.label=m.label+"-msaa",m.sampleCount=f,a.msaaTexture=i.device.createTexture(m)}a.initialized=!0,a.textureDescriptorGPU=g}destroyTexture(e){const r=this.backend,i=r.get(e);i.texture!==void 0&&i.texture.destroy(),i.msaaTexture!==void 0&&i.msaaTexture.destroy(),r.delete(e)}destroySampler(e){const i=this.backend.get(e);delete i.sampler}generateMipmaps(e){const r=this.backend.get(e);if(e.isCubeTexture)for(let i=0;i<6;i++)this._generateMipmaps(r.texture,r.textureDescriptorGPU,i);else{const i=e.image.depth||1;for(let a=0;a<i;a++)this._generateMipmaps(r.texture,r.textureDescriptorGPU,a)}}getColorBuffer(){this.colorBuffer&&this.colorBuffer.destroy();const e=this.backend,{width:r,height:i}=e.getDrawingBufferSize();return this.colorBuffer=e.device.createTexture({label:"colorBuffer",size:{width:r,height:i,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.samples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),this.colorBuffer}getDepthBuffer(e=!0,r=!1){const i=this.backend,{width:a,height:o}=i.getDrawingBufferSize(),s=this.depthTexture,l=i.get(s).texture;let c,u;if(r?(c=ih,u=rh):e&&(c=Jf,u=Ca),l!==void 0){if(s.image.width===a&&s.image.height===o&&s.format===c&&s.type===u)return l;this.destroyTexture(s)}return s.name="depthBuffer",s.format=c,s.type=u,s.image.width=a,s.image.height=o,this.createTexture(s,{sampleCount:i.utils.getSampleCount(i.renderer.samples),width:a,height:o}),i.get(s).texture}updateTexture(e,r){const i=this.backend.get(e),{textureDescriptorGPU:a}=i;if(!(e.isRenderTargetTexture||a===void 0)){if(e.isDataTexture)this._copyBufferToTexture(r.image,i.texture,a,0,e.flipY);else if(e.isDataArrayTexture||e.isData3DTexture)for(let o=0;o<r.image.depth;o++)this._copyBufferToTexture(r.image,i.texture,a,o,e.flipY,o);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,i.texture,a);else if(e.isCubeTexture)this._copyCubeMapToTexture(r.images,i.texture,a,e.flipY);else if(e.isVideoTexture){const o=e.source.data;i.externalTexture=o}else this._copyImageToTexture(r.image,i.texture,a,0,e.flipY);i.version=e.version,e.onUpdate&&e.onUpdate(e)}}async copyTextureToBuffer(e,r,i,a,o,s){const l=this.backend.device,c=this.backend.get(e),u=c.texture,d=c.textureDescriptorGPU.format,f=this._getBytesPerTexel(d);let h=a*f;h=Math.ceil(h/256)*256;const p=l.createBuffer({size:a*o*f,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),g=l.createCommandEncoder();g.copyTextureToBuffer({texture:u,origin:{x:r,y:i,z:s}},{buffer:p,bytesPerRow:h},{width:a,height:o});const m=this._getTypedArrayType(d);l.queue.submit([g.finish()]),await p.mapAsync(GPUMapMode.READ);const v=p.getMappedRange();return new m(v)}_isEnvironmentTexture(e){const r=e.mapping;return r===Zm||r===Qm||r===qu||r===Yu}_getDefaultTextureGPU(e){let r=this.defaultTexture[e];if(r===void 0){const i=new ho;i.minFilter=na,i.magFilter=na,this.createTexture(i,{width:1,height:1,format:e}),this.defaultTexture[e]=r=i}return this.backend.get(r).texture}_getDefaultCubeTextureGPU(e){let r=this.defaultTexture[e];if(r===void 0){const i=new NL;i.minFilter=na,i.magFilter=na,this.createTexture(i,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=r=i}return this.backend.get(r).texture}_getDefaultVideoFrame(){let e=this.defaultVideoFrame;if(e===null){const r={timestamp:0,codedWidth:1,codedHeight:1,format:"RGBA"};this.defaultVideoFrame=e=new VideoFrame(new Uint8Array([0,0,0,255]),r)}return e}_copyCubeMapToTexture(e,r,i,a){for(let o=0;o<6;o++){const s=e[o],l=a===!0?R9t[o]:o;s.isDataTexture?this._copyBufferToTexture(s.image,r,i,l,a):this._copyImageToTexture(s,r,i,l,a)}}_copyImageToTexture(e,r,i,a,o){this.backend.device.queue.copyExternalImageToTexture({source:e},{texture:r,mipLevel:0,origin:{x:0,y:0,z:a}},{width:e.width,height:e.height,depthOrArrayLayers:1}),o===!0&&this._flipY(r,i,a)}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new T9t(this.backend.device)),e}_generateMipmaps(e,r,i=0){this._getPassUtils().generateMipmaps(e,r,i)}_flipY(e,r,i=0){this._getPassUtils().flipY(e,r,i)}_copyBufferToTexture(e,r,i,a,o,s=0){const l=this.backend.device,c=e.data,u=this._getBytesPerTexel(i.format),d=e.width*u;l.queue.writeTexture({texture:r,mipLevel:0,origin:{x:0,y:0,z:a}},c,{offset:e.width*e.height*u*s,bytesPerRow:d},{width:e.width,height:e.height,depthOrArrayLayers:1}),o===!0&&this._flipY(r,i,a)}_copyCompressedBufferToTexture(e,r,i){const a=this.backend.device,o=this._getBlockData(i.format),s=i.size.depthOrArrayLayers>1;for(let l=0;l<e.length;l++){const c=e[l],u=c.width,d=c.height,f=s?i.size.depthOrArrayLayers:1,h=Math.ceil(u/o.width)*o.byteLength,p=h*Math.ceil(d/o.height);for(let g=0;g<f;g++)a.queue.writeTexture({texture:r,mipLevel:l,origin:{x:0,y:0,z:g}},c.data,{offset:g*p,bytesPerRow:h,rowsPerImage:Math.ceil(d/o.height)},{width:Math.ceil(u/o.width)*o.width,height:Math.ceil(d/o.height)*o.height,depthOrArrayLayers:1})}}_getBlockData(e){if(e===Pe.BC1RGBAUnorm||e===Pe.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===Pe.BC2RGBAUnorm||e===Pe.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Pe.BC3RGBAUnorm||e===Pe.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Pe.BC4RUnorm||e===Pe.BC4RSNorm)return{byteLength:8,width:4,height:4};if(e===Pe.BC5RGUnorm||e===Pe.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===Pe.BC6HRGBUFloat||e===Pe.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===Pe.BC7RGBAUnorm||e===Pe.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Pe.ETC2RGB8Unorm||e===Pe.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===Pe.ETC2RGB8A1Unorm||e===Pe.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===Pe.ETC2RGBA8Unorm||e===Pe.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===Pe.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===Pe.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===Pe.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===Pe.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===Pe.ASTC4x4Unorm||e===Pe.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===Pe.ASTC5x4Unorm||e===Pe.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===Pe.ASTC5x5Unorm||e===Pe.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===Pe.ASTC6x5Unorm||e===Pe.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===Pe.ASTC6x6Unorm||e===Pe.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===Pe.ASTC8x5Unorm||e===Pe.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===Pe.ASTC8x6Unorm||e===Pe.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===Pe.ASTC8x8Unorm||e===Pe.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===Pe.ASTC10x5Unorm||e===Pe.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===Pe.ASTC10x6Unorm||e===Pe.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===Pe.ASTC10x8Unorm||e===Pe.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===Pe.ASTC10x10Unorm||e===Pe.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===Pe.ASTC12x10Unorm||e===Pe.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===Pe.ASTC12x12Unorm||e===Pe.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let r=bU.ClampToEdge;return e===Ey?r=bU.Repeat:e===Cy&&(r=bU.MirrorRepeat),r}_convertFilterMode(e){let r=y0.Linear;return(e===na||e===OO||e===jf)&&(r=y0.Nearest),r}_getBytesPerTexel(e){if(e===Pe.R8Unorm||e===Pe.R8Snorm||e===Pe.R8Uint||e===Pe.R8Sint)return 1;if(e===Pe.R16Uint||e===Pe.R16Sint||e===Pe.R16Float||e===Pe.RG8Unorm||e===Pe.RG8Snorm||e===Pe.RG8Uint||e===Pe.RG8Sint)return 2;if(e===Pe.R32Uint||e===Pe.R32Sint||e===Pe.R32Float||e===Pe.RG16Uint||e===Pe.RG16Sint||e===Pe.RG16Float||e===Pe.RGBA8Unorm||e===Pe.RGBA8UnormSRGB||e===Pe.RGBA8Snorm||e===Pe.RGBA8Uint||e===Pe.RGBA8Sint||e===Pe.BGRA8Unorm||e===Pe.BGRA8UnormSRGB||e===Pe.RGB9E5UFloat||e===Pe.RGB10A2Unorm||e===Pe.RG11B10UFloat||e===Pe.Depth32Float||e===Pe.Depth24Plus||e===Pe.Depth24PlusStencil8||e===Pe.Depth32FloatStencil8)return 4;if(e===Pe.RG32Uint||e===Pe.RG32Sint||e===Pe.RG32Float||e===Pe.RGBA16Uint||e===Pe.RGBA16Sint||e===Pe.RGBA16Float)return 8;if(e===Pe.RGBA32Uint||e===Pe.RGBA32Sint||e===Pe.RGBA32Float)return 16}_getTypedArrayType(e){if(e===Pe.R8Uint)return Uint8Array;if(e===Pe.R8Sint)return Int8Array;if(e===Pe.R8Unorm)return Uint8Array;if(e===Pe.R8Snorm)return Int8Array;if(e===Pe.RG8Uint)return Uint8Array;if(e===Pe.RG8Sint)return Int8Array;if(e===Pe.RG8Unorm)return Uint8Array;if(e===Pe.RG8Snorm)return Int8Array;if(e===Pe.RGBA8Uint)return Uint8Array;if(e===Pe.RGBA8Sint)return Int8Array;if(e===Pe.RGBA8Unorm)return Uint8Array;if(e===Pe.RGBA8Snorm)return Int8Array;if(e===Pe.R16Uint)return Uint16Array;if(e===Pe.R16Sint)return Int16Array;if(e===Pe.RG16Uint)return Uint16Array;if(e===Pe.RG16Sint)return Int16Array;if(e===Pe.RGBA16Uint)return Uint16Array;if(e===Pe.RGBA16Sint)return Int16Array;if(e===Pe.R16Float||e===Pe.RG16Float||e===Pe.RGBA16Float)return Uint16Array;if(e===Pe.R32Uint)return Uint32Array;if(e===Pe.R32Sint)return Int32Array;if(e===Pe.R32Float)return Float32Array;if(e===Pe.RG32Uint)return Uint32Array;if(e===Pe.RG32Sint)return Int32Array;if(e===Pe.RG32Float)return Float32Array;if(e===Pe.RGBA32Uint)return Uint32Array;if(e===Pe.RGBA32Sint)return Int32Array;if(e===Pe.RGBA32Float)return Float32Array;if(e===Pe.BGRA8Unorm||e===Pe.BGRA8UnormSRGB)return Uint8Array;if(e===Pe.RGB10A2Unorm||e===Pe.RGB9E5UFloat||e===Pe.RG11B10UFloat)return Uint32Array;if(e===Pe.Depth32Float)return Float32Array;if(e===Pe.Depth24Plus||e===Pe.Depth24PlusStencil8)return Uint32Array;if(e===Pe.Depth32FloatStencil8)return Float32Array}_getDimension(e){let r;return e.isData3DTexture?r=qme.ThreeD:r=qme.TwoD,r}}function tW(n,e=null){const r=n.format,i=n.type,a=n.colorSpace;let o;if(n.isCompressedTexture===!0||n.isCompressedArrayTexture===!0)switch(r){case Rm:o=a===Pn?Pe.BC1RGBAUnormSRGB:Pe.BC1RGBAUnorm;break;case Pm:o=a===Pn?Pe.BC2RGBAUnormSRGB:Pe.BC2RGBAUnorm;break;case Nm:o=a===Pn?Pe.BC3RGBAUnormSRGB:Pe.BC3RGBAUnorm;break;case Qx:o=a===Pn?Pe.ETC2RGB8UnormSRGB:Pe.ETC2RGB8Unorm;break;case Jx:o=a===Pn?Pe.ETC2RGBA8UnormSRGB:Pe.ETC2RGBA8Unorm;break;case e_:o=a===Pn?Pe.ASTC4x4UnormSRGB:Pe.ASTC4x4Unorm;break;case t_:o=a===Pn?Pe.ASTC5x4UnormSRGB:Pe.ASTC5x4Unorm;break;case n_:o=a===Pn?Pe.ASTC5x5UnormSRGB:Pe.ASTC5x5Unorm;break;case r_:o=a===Pn?Pe.ASTC6x5UnormSRGB:Pe.ASTC6x5Unorm;break;case i_:o=a===Pn?Pe.ASTC6x6UnormSRGB:Pe.ASTC6x6Unorm;break;case a_:o=a===Pn?Pe.ASTC8x5UnormSRGB:Pe.ASTC8x5Unorm;break;case o_:o=a===Pn?Pe.ASTC8x6UnormSRGB:Pe.ASTC8x6Unorm;break;case s_:o=a===Pn?Pe.ASTC8x8UnormSRGB:Pe.ASTC8x8Unorm;break;case l_:o=a===Pn?Pe.ASTC10x5UnormSRGB:Pe.ASTC10x5Unorm;break;case c_:o=a===Pn?Pe.ASTC10x6UnormSRGB:Pe.ASTC10x6Unorm;break;case u_:o=a===Pn?Pe.ASTC10x8UnormSRGB:Pe.ASTC10x8Unorm;break;case d_:o=a===Pn?Pe.ASTC10x10UnormSRGB:Pe.ASTC10x10Unorm;break;case f_:o=a===Pn?Pe.ASTC12x10UnormSRGB:Pe.ASTC12x10Unorm;break;case h_:o=a===Pn?Pe.ASTC12x12UnormSRGB:Pe.ASTC12x12Unorm;break;case vs:o=a===Pn?Pe.RGBA8UnormSRGB:Pe.RGBA8Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",r)}else switch(r){case vs:switch(i){case q0:o=Pe.RGBA8Snorm;break;case Y0:o=Pe.RGBA16Sint;break;case Bd:o=Pe.RGBA16Uint;break;case Ca:o=Pe.RGBA32Uint;break;case Zo:o=Pe.RGBA32Sint;break;case Ws:o=a===Pn?Pe.RGBA8UnormSRGB:Pe.RGBA8Unorm;break;case vl:o=Pe.RGBA16Float;break;case Ka:o=Pe.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",i)}break;case HM:switch(i){case ML:o=Pe.RGB9E5UFloat;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBFormat.",i)}break;case WM:switch(i){case q0:o=Pe.R8Snorm;break;case Y0:o=Pe.R16Sint;break;case Bd:o=Pe.R16Uint;break;case Ca:o=Pe.R32Uint;break;case Zo:o=Pe.R32Sint;break;case Ws:o=Pe.R8Unorm;break;case vl:o=Pe.R16Float;break;case Ka:o=Pe.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",i)}break;case My:switch(i){case q0:o=Pe.RG8Snorm;break;case Y0:o=Pe.RG16Sint;break;case Bd:o=Pe.RG16Uint;break;case Ca:o=Pe.RG32Uint;break;case Zo:o=Pe.RG32Sint;break;case Ws:o=Pe.RG8Unorm;break;case vl:o=Pe.RG16Float;break;case Ka:o=Pe.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",i)}break;case Jf:switch(i){case Bd:o=Pe.Depth16Unorm;break;case Ca:o=Pe.Depth24Plus;break;case Ka:o=Pe.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",i)}break;case ih:switch(i){case rh:o=Pe.Depth24PlusStencil8;break;case Ka:e&&e.features.has(eW.Depth32FloatStencil8)===!1&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),o=Pe.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",i)}break;case sw:switch(i){case Zo:o=Pe.R32Sint;break;case Ca:o=Pe.R32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",i)}break;case lw:switch(i){case Zo:o=Pe.RG32Sint;break;case Ca:o=Pe.RG32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",i)}break;case cw:switch(i){case Zo:o=Pe.RGBA32Sint;break;case Ca:o=Pe.RGBA32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",i)}break;default:console.error("WebGPURenderer: Unsupported texture format.",r)}return o}const N9t=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,O9t=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,Yme={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},I9t=n=>{n=n.trim();const e=n.match(N9t);if(e!==null&&e.length===4){const r=e[2],i=[];let a=null;for(;(a=O9t.exec(r))!==null;)i.push({name:a[1],type:a[2]});const o=[];for(let d=0;d<i.length;d++){const{name:f,type:h}=i[d];let p=h;p.startsWith("ptr")?p="pointer":(p.startsWith("texture")&&(p=h.split("<")[0]),p=Yme[p]),o.push(new YZ(p,f))}const s=n.substring(e[0].length),l=e[3]||"void",c=e[1]!==void 0?e[1]:"";return{type:Yme[l]||l,inputs:o,name:c,inputsCode:r,blockCode:s,outputType:l}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class D9t extends XZ{constructor(e){const{type:r,inputs:i,name:a,inputsCode:o,blockCode:s,outputType:l}=I9t(e);super(r,i,a),this.inputsCode=o,this.blockCode=s,this.outputType=l}getCode(e=this.name){const r=this.outputType!=="void"?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${r}`+this.blockCode}}class L9t extends VPe{parseFunction(e){return new D9t(e)}}const fb=typeof self<"u"?self.GPUShaderStage:{VERTEX:1,FRAGMENT:2,COMPUTE:4},k9t={[gp.READ_ONLY]:"read",[gp.WRITE_ONLY]:"write",[gp.READ_WRITE]:"read_write"},Xme={[Ey]:"repeat",[Gf]:"clamp",[Cy]:"mirror"},RR={vertex:fb?fb.VERTEX:1,fragment:fb?fb.FRAGMENT:2,compute:fb?fb.COMPUTE:4},Kme={instance:!0,swizzleAssign:!1,storageBuffer:!0},F9t={"^^":"tsl_xor"},$9t={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",mat3:"mat3x3<f32>",mat4:"mat4x4<f32>"},Zme={},Mu={tsl_xor:new Mo("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new Mo("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new Mo("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new Mo("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new Mo("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new Mo("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new Mo("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new Mo("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new Mo("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping_float:new Mo("fn tsl_repeatWrapping_float( coord: f32 ) -> f32 { return fract( coord ); }"),mirrorWrapping_float:new Mo("fn tsl_mirrorWrapping_float( coord: f32 ) -> f32 { let mirrored = fract( coord * 0.5 ) * 2.0; return 1.0 - abs( 1.0 - mirrored ); }"),clampWrapping_float:new Mo("fn tsl_clampWrapping_float( coord: f32 ) -> f32 { return clamp( coord, 0.0, 1.0 ); }"),biquadraticTexture:new Mo(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, iRes : vec2u, level : u32 ) -> vec4f {

	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2u( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2u( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2u( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2u( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},S2={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"};typeof navigator<"u"&&/Windows/g.test(navigator.userAgent)&&(Mu.pow_float=new Mo("fn tsl_pow_float( a : f32, b : f32 ) -> f32 { return select( -pow( -a, b ), pow( a, b ), a > 0.0 ); }"),Mu.pow_vec2=new Mo("fn tsl_pow_vec2( a : vec2f, b : vec2f ) -> vec2f { return vec2f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ) ); }",[Mu.pow_float]),Mu.pow_vec3=new Mo("fn tsl_pow_vec3( a : vec3f, b : vec3f ) -> vec3f { return vec3f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ) ); }",[Mu.pow_float]),Mu.pow_vec4=new Mo("fn tsl_pow_vec4( a : vec4f, b : vec4f ) -> vec4f { return vec4f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ), tsl_pow_float( a.w, b.w ) ); }",[Mu.pow_float]),S2.pow_float="tsl_pow_float",S2.pow_vec2="tsl_pow_vec2",S2.pow_vec3="tsl_pow_vec3",S2.pow_vec4="tsl_pow_vec4");let ZPe="";(typeof navigator<"u"&&/Firefox|Deno/g.test(navigator.userAgent))!==!0&&(ZPe+=`diagnostic( off, derivative_uniformity );
`);class B9t extends zPe{constructor(e,r){super(e,r,new L9t),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==Oc}_generateTextureSample(e,r,i,a,o=this.shaderStage){return o==="fragment"?a?`textureSample( ${r}, ${r}_sampler, ${i}, ${a} )`:`textureSample( ${r}, ${r}_sampler, ${i} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,r,i):this.generateTextureLod(e,r,i,a,"0")}_generateVideoSample(e,r,i=this.shaderStage){if(i==="fragment")return`textureSampleBaseClampToEdge( ${e}, ${e}_sampler, vec2<f32>( ${r}.x, 1.0 - ${r}.y ) )`;console.error(`WebGPURenderer: THREE.VideoTexture does not support ${i} shader.`)}_generateTextureSampleLevel(e,r,i,a,o,s=this.shaderStage){return s==="fragment"&&this.isUnfilterable(e)===!1?`textureSampleLevel( ${r}, ${r}_sampler, ${i}, ${a} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,r,i,a):this.generateTextureLod(e,r,i,o,a)}generateWrapFunction(e){const r=`tsl_coord_${Xme[e.wrapS]}S_${Xme[e.wrapT]}T`;let i=Zme[r];if(i===void 0){const a=[];let o=`fn ${r}( coord : vec2f ) -> vec2f {

	return vec2f(
`;const s=(l,c)=>{l===Ey?(a.push(Mu.repeatWrapping_float),o+=`		tsl_repeatWrapping_float( coord.${c} )`):l===Gf?(a.push(Mu.clampWrapping_float),o+=`		tsl_clampWrapping_float( coord.${c} )`):l===Cy?(a.push(Mu.mirrorWrapping_float),o+=`		tsl_mirrorWrapping_float( coord.${c} )`):(o+=`		coord.${c}`,console.warn(`WebGPURenderer: Unsupported texture wrap type "${l}" for vertex shader.`))};s(e.wrapS,"x"),o+=`,
`,s(e.wrapT,"y"),o+=`
	);

}
`,Zme[r]=i=new Mo(o,a)}return i.build(this),r}generateTextureDimension(e,r,i){const a=this.getDataFromNode(e,this.shaderStage,this.globalCache);a.dimensionsSnippet===void 0&&(a.dimensionsSnippet={});let o=a.dimensionsSnippet[i];if(a.dimensionsSnippet[i]===void 0){let s;e.isMultisampleRenderTargetTexture===!0?s=r:s=`${r}, u32( ${i} )`,o=new jRe(new XRe(`textureDimensions( ${s} )`,"uvec2")),a.dimensionsSnippet[i]=o}return o.build(this)}generateFilteredTexture(e,r,i,a="0u"){this._include("biquadraticTexture");const o=this.generateWrapFunction(e),s=this.generateTextureDimension(e,r,a);return`tsl_biquadraticTexture( ${r}, ${o}( ${i} ), ${s}, u32( ${a} ) )`}generateTextureLod(e,r,i,a,o="0u"){const s=this.generateWrapFunction(e),l=this.generateTextureDimension(e,r,o),c=`vec2u( ${s}( ${i} ) * vec2f( ${l} ) )`;return this.generateTextureLoad(e,r,c,a,o)}generateTextureLoad(e,r,i,a,o="0u"){return e.isVideoTexture===!0||e.isStorageTexture===!0?`textureLoad( ${r}, ${i} )`:a?`textureLoad( ${r}, ${i}, ${a}, u32( ${o} ) )`:`textureLoad( ${r}, ${i}, u32( ${o} ) )`}generateTextureStore(e,r,i,a){return`textureStore( ${r}, ${i}, ${a} )`}isSampleCompare(e){return e.isDepthTexture===!0&&e.compareFunction!==null}isUnfilterable(e){return this.getComponentTypeFromTexture(e)!=="float"||!this.isAvailable("float32Filterable")&&e.isDataTexture===!0&&e.type===Ka||this.isSampleCompare(e)===!1&&e.minFilter===na&&e.magFilter===na||e.isMultisampleRenderTargetTexture===!0}generateTexture(e,r,i,a,o=this.shaderStage){let s=null;return e.isVideoTexture===!0?s=this._generateVideoSample(r,i,o):this.isUnfilterable(e)?s=this.generateTextureLod(e,r,i,a,"0",o):s=this._generateTextureSample(e,r,i,a,o),s}generateTextureGrad(e,r,i,a,o,s=this.shaderStage){if(s==="fragment")return`textureSampleGrad( ${r}, ${r}_sampler, ${i},  ${a[0]}, ${a[1]} )`;console.error(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${s} shader.`)}generateTextureCompare(e,r,i,a,o,s=this.shaderStage){if(s==="fragment")return`textureSampleCompare( ${r}, ${r}_sampler, ${i}, ${a} )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${s} shader.`)}generateTextureLevel(e,r,i,a,o,s=this.shaderStage){let l=null;return e.isVideoTexture===!0?l=this._generateVideoSample(r,i,s):l=this._generateTextureSampleLevel(e,r,i,a,o,s),l}generateTextureBias(e,r,i,a,o,s=this.shaderStage){if(s==="fragment")return`textureSampleBias( ${r}, ${r}_sampler, ${i}, ${a} )`;console.error(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${s} shader.`)}getPropertyName(e,r=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(r==="vertex")return`varyings.${e.name}`}else if(e.isNodeUniform===!0){const i=e.name,a=e.type;return a==="texture"||a==="cubeTexture"||a==="storageTexture"||a==="texture3D"?i:a==="buffer"||a==="storageBuffer"||a==="indirectStorageBuffer"?`NodeBuffer_${e.id}.${i}`:e.groupNode.name+"."+i}return super.getPropertyName(e)}getOutputStructName(){return"output"}_getUniformGroupCount(e){return Object.keys(this.uniforms[e]).length}getFunctionOperator(e){const r=F9t[e];return r!==void 0?(this._include(r),r):null}getNodeAccess(e,r){return r!=="compute"?gp.READ_ONLY:e.access}getStorageAccess(e,r){return k9t[this.getNodeAccess(e,r)]}getUniformFromNode(e,r,i,a=null){const o=super.getUniformFromNode(e,r,i,a),s=this.getDataFromNode(e,i,this.globalCache);if(s.uniformGPU===void 0){let l;const c=e.groupNode,u=c.name,d=this.getBindGroupArray(u,i);if(r==="texture"||r==="cubeTexture"||r==="storageTexture"||r==="texture3D"){let f=null;const h=this.getNodeAccess(e,i);if(r==="texture"||r==="storageTexture"?f=new e6(o.name,o.node,c,h):r==="cubeTexture"?f=new YPe(o.name,o.node,c,h):r==="texture3D"&&(f=new XPe(o.name,o.node,c,h)),f.store=e.isStorageTextureNode===!0,f.setVisibility(RR[i]),i==="fragment"&&this.isUnfilterable(e.value)===!1&&f.store===!1){const p=new S9t(`${o.name}_sampler`,o.node,c);p.setVisibility(RR[i]),d.push(p,f),l=[p,f]}else d.push(f),l=[f]}else if(r==="buffer"||r==="storageBuffer"||r==="indirectStorageBuffer"){const f=r==="buffer"?WPe:M9t,h=new f(e,c);h.setVisibility(RR[i]),d.push(h),l=h}else{const f=this.uniformGroups[i]||(this.uniformGroups[i]={});let h=f[u];h===void 0&&(h=new qPe(u,c),h.setVisibility(RR[i]),f[u]=h,d.push(h)),l=this.getNodeUniform(o,r),h.addUniform(l)}s.uniformGPU=l}return o}getBuiltin(e,r,i,a=this.shaderStage){const o=this.builtins[a]||(this.builtins[a]=new Map);return o.has(e)===!1&&o.set(e,{name:e,property:r,type:i}),r}hasBuiltin(e,r=this.shaderStage){return this.builtins[r]!==void 0&&this.builtins[r].has(e)}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){const r=e.layout,i=this.flowShaderNode(e),a=[];for(const s of r.inputs)a.push(s.name+" : "+this.getType(s.type));let o=`fn ${r.name}( ${a.join(", ")} ) -> ${this.getType(r.type)} {
${i.vars}
${i.code}
`;return i.result&&(o+=`	return ${i.result};
`),o+=`
}
`,o}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}getClipDistance(){return"varyings.hw_clip_distances"}isFlipY(){return!1}enableDirective(e,r=this.shaderStage){(this.directives[r]||(this.directives[r]=new Set)).add(e)}getDirectives(e){const r=[],i=this.directives[e];if(i!==void 0)for(const a of i)r.push(`enable ${a};`);return r.join(`
`)}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}enableHardwareClipping(e){this.enableClipDistances(),this.getBuiltin("clip_distances","hw_clip_distances",`array<f32, ${e} >`,"vertex")}getBuiltins(e){const r=[],i=this.builtins[e];if(i!==void 0)for(const{name:a,property:o,type:s}of i.values())r.push(`@builtin( ${a} ) ${o} : ${s}`);return r.join(`,
	`)}getScopedArray(e,r,i,a){return this.scopedArrays.has(e)===!1&&this.scopedArrays.set(e,{name:e,scope:r,bufferType:i,bufferCount:a}),e}getScopedArrays(e){if(e!=="compute")return;const r=[];for(const{name:i,scope:a,bufferType:o,bufferCount:s}of this.scopedArrays.values()){const l=this.getType(o);r.push(`var<${a}> ${i}: array< ${l}, ${s} >;`)}return r.join(`
`)}getAttributes(e){const r=[];if(e==="compute"&&(this.getBuiltin("global_invocation_id","id","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),e==="vertex"||e==="compute"){const i=this.getBuiltins("attribute");i&&r.push(i);const a=this.getAttributesArray();for(let o=0,s=a.length;o<s;o++){const l=a[o],c=l.name,u=this.getType(l.type);r.push(`@location( ${o} ) ${c} : ${u}`)}}return r.join(`,
	`)}getStructMembers(e){const r=[],i=e.getMemberTypes();for(let o=0;o<i.length;o++){const s=i[o];r.push(`	@location( ${o} ) m${o} : ${s}<f32>`)}const a=this.getBuiltins("output");return a&&r.push("	"+a),r.join(`,
`)}getStructs(e){const r=[],i=this.structs[e];for(let a=0,o=i.length;a<o;a++){const s=i[a],l=s.name;let c=`struct ${l} {
`;c+=this.getStructMembers(s),c+=`
}`,r.push(c),r.push(`
var<private> output : ${l};

`)}return r.join(`

`)}getVar(e,r){return`var ${r} : ${this.getType(e)}`}getVars(e){const r=[],i=this.vars[e];if(i!==void 0)for(const a of i)r.push(`	${this.getVar(a.type,a.name)};`);return`
${r.join(`
`)}
`}getVaryings(e){const r=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const o=this.varyings,s=this.vars[e];for(let l=0;l<o.length;l++){const c=o[l];if(c.needsInterpolation){let u=`@location( ${l} )`;/^(int|uint|ivec|uvec)/.test(c.type)&&(u+=" @interpolate( flat )"),r.push(`${u} ${c.name} : ${this.getType(c.type)}`)}else e==="vertex"&&s.includes(c)===!1&&s.push(c)}}const i=this.getBuiltins(e);i&&r.push(i);const a=r.join(`,
	`);return e==="vertex"?this._getWGSLStruct("VaryingsStruct","	"+a):a}getUniforms(e){const r=this.uniforms[e],i=[],a=[],o=[],s={};for(const c of r){const u=c.groupNode.name,d=this.bindingsIndexes[u];if(c.type==="texture"||c.type==="cubeTexture"||c.type==="storageTexture"||c.type==="texture3D"){const f=c.node.value;e==="fragment"&&this.isUnfilterable(f)===!1&&c.node.isStorageTextureNode!==!0&&(this.isSampleCompare(f)?i.push(`@binding( ${d.binding++} ) @group( ${d.group} ) var ${c.name}_sampler : sampler_comparison;`):i.push(`@binding( ${d.binding++} ) @group( ${d.group} ) var ${c.name}_sampler : sampler;`));let h,p="";if(f.isMultisampleRenderTargetTexture===!0&&(p="_multisampled"),f.isCubeTexture===!0)h="texture_cube<f32>";else if(f.isDataArrayTexture===!0||f.isCompressedArrayTexture===!0)h="texture_2d_array<f32>";else if(f.isDepthTexture===!0)h=`texture_depth${p}_2d`;else if(f.isVideoTexture===!0)h="texture_external";else if(f.isData3DTexture===!0)h="texture_3d<f32>";else if(c.node.isStorageTextureNode===!0){const g=tW(f),m=this.getStorageAccess(c.node,e);h=`texture_storage_2d<${g}, ${m}>`}else{const g=this.getComponentTypeFromTexture(f).charAt(0);h=`texture${p}_2d<${g}32>`}i.push(`@binding( ${d.binding++} ) @group( ${d.group} ) var ${c.name} : ${h};`)}else if(c.type==="buffer"||c.type==="storageBuffer"||c.type==="indirectStorageBuffer"){const f=c.node,h=this.getType(f.bufferType),p=f.bufferCount,g=p>0&&c.type==="buffer"?", "+p:"",m=f.isAtomic?`atomic<${h}>`:`${h}`,v=`	${c.name} : array< ${m}${g} >
`,y=f.isStorageBufferNode?`storage, ${this.getStorageAccess(f,e)}`:"uniform";a.push(this._getWGSLStructBinding("NodeBuffer_"+f.id,v,y,d.binding++,d.group))}else{const f=this.getType(this.getVectorType(c.type)),h=c.groupNode.name;(s[h]||(s[h]={index:d.binding++,id:d.group,snippets:[]})).snippets.push(`	${c.name} : ${f}`)}}for(const c in s){const u=s[c];o.push(this._getWGSLStructBinding(c,u.snippets.join(`,
`),"uniform",u.index,u.id))}let l=i.join(`
`);return l+=a.join(`
`),l+=o.join(`
`),l}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const r in e){const i=e[r];i.uniforms=this.getUniforms(r),i.attributes=this.getAttributes(r),i.varyings=this.getVaryings(r),i.structs=this.getStructs(r),i.vars=this.getVars(r),i.codes=this.getCodes(r),i.directives=this.getDirectives(r),i.scopedArrays=this.getScopedArrays(r);let a=`// code

`;a+=this.flowCode[r];const o=this.flowNodes[r],s=o[o.length-1],l=s.outputNode,c=l!==void 0&&l.isOutputStructNode===!0;for(const u of o){const d=this.getFlowData(u),f=u.name;if(f&&(a.length>0&&(a+=`
`),a+=`	// flow -> ${f}
	`),a+=`${d.code}
	`,u===s&&r!=="compute"){if(a+=`// result

	`,r==="vertex")a+=`varyings.Vertex = ${d.result};`;else if(r==="fragment")if(c)i.returnType=l.nodeType,a+=`return ${d.result};`;else{let h="	@location(0) color: vec4<f32>";const p=this.getBuiltins("output");p&&(h+=`,
	`+p),i.returnType="OutputStruct",i.structs+=this._getWGSLStruct("OutputStruct",h),i.structs+=`
var<private> output : OutputStruct;

`,a+=`output.color = ${d.result};

	return output;`}}}i.flow=a}this.material!==null?(this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment)):this.computeShader=this._getWGSLComputeCode(e.compute,(this.object.workgroupSize||[64]).join(", "))}getMethod(e,r=null){let i;return r!==null&&(i=this._getWGSLMethod(e+"_"+r)),i===void 0&&(i=this._getWGSLMethod(e)),i||e}getType(e){return $9t[e]||e}isAvailable(e){let r=Kme[e];return r===void 0&&(e==="float32Filterable"?r=this.renderer.hasFeature("float32-filterable"):e==="clipDistance"&&(r=this.renderer.hasFeature("clip-distances")),Kme[e]=r),r}_getWGSLMethod(e){return Mu[e]!==void 0&&this._include(e),S2[e]}_include(e){const r=Mu[e];return r.build(this),this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(r),r}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${ZPe}

// uniforms
${e.uniforms}

// structs
${e.structs}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,r){return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${r} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = id.x + id.y * numWorkgroups.x * u32(${r}) + id.z * numWorkgroups.x * numWorkgroups.y * u32(${r});

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,r){return`
struct ${e} {
${r}
};`}_getWGSLStructBinding(e,r,i,a=0,o=0){const s=e+"Struct";return`${this._getWGSLStruct(s,r)}
@binding( ${a} ) @group( ${o} )
var<${i}> ${e} : ${s};`}}class z9t{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let r;return e.depthTexture!==null?r=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?r=Pe.Depth24PlusStencil8:e.depth&&(r=Pe.Depth24Plus),r}getTextureFormatGPU(e){return this.backend.get(e).format}getCurrentColorFormat(e){let r;return e.textures!==null?r=this.getTextureFormatGPU(e.textures[0]):r=this.getPreferredCanvasFormat(),r}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,r){if(e.isPoints)return Xb.PointList;if(e.isLineSegments||e.isMesh&&r.wireframe===!0)return Xb.LineList;if(e.isLine)return Xb.LineStrip;if(e.isMesh)return Xb.TriangleList}getSampleCount(e){let r=1;return e>1&&(r=Math.pow(2,Math.floor(Math.log2(e))),r===2&&(r=4)),r}getSampleCountRenderContext(e){return e.textures!==null?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.samples)}getPreferredCanvasFormat(){return navigator.userAgent.includes("Quest")?Pe.BGRA8Unorm:navigator.gpu.getPreferredCanvasFormat()}}const U9t=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]),V9t=new Map([[aAe,["float16"]]]),G9t=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class j9t{constructor(e){this.backend=e}createAttribute(e,r){const i=this._getBufferAttribute(e),a=this.backend,o=a.get(i);let s=o.buffer;if(s===void 0){const l=a.device;let c=i.array;if(e.normalized===!1&&(c.constructor===Int16Array||c.constructor===Uint16Array)){const d=new Uint32Array(c.length);for(let f=0;f<c.length;f++)d[f]=c[f];c=d}if(i.array=c,(i.isStorageBufferAttribute||i.isStorageInstancedBufferAttribute)&&i.itemSize===3){c=new c.constructor(i.count*4);for(let d=0;d<i.count;d++)c.set(i.array.subarray(d*3,d*3+3),d*4);i.itemSize=4,i.array=c}const u=c.byteLength+(4-c.byteLength%4)%4;s=l.createBuffer({label:i.name,size:u,usage:r,mappedAtCreation:!0}),new c.constructor(s.getMappedRange()).set(c),s.unmap(),o.buffer=s}}updateAttribute(e){const r=this._getBufferAttribute(e),i=this.backend,a=i.device,o=i.get(r).buffer,s=r.array,l=this._isTypedArray(s),c=r.updateRanges;if(c.length===0)a.queue.writeBuffer(o,0,s,0);else{const u=l?1:s.BYTES_PER_ELEMENT;for(let d=0,f=c.length;d<f;d++){const h=c[d],p=h.start*u,g=h.count*u;a.queue.writeBuffer(o,0,s,p,g)}r.clearUpdateRanges()}}createShaderVertexBuffers(e){const r=e.getAttributes(),i=new Map;for(let a=0;a<r.length;a++){const o=r[a],s=o.array.BYTES_PER_ELEMENT,l=this._getBufferAttribute(o);let c=i.get(l);if(c===void 0){let f,h;o.isInterleavedBufferAttribute===!0?(f=o.data.stride*s,h=o.data.isInstancedInterleavedBuffer?AR.Instance:AR.Vertex):(f=o.itemSize*s,h=o.isInstancedBufferAttribute?AR.Instance:AR.Vertex),o.normalized===!1&&(o.array.constructor===Int16Array||o.array.constructor===Uint16Array)&&(f=4),c={arrayStride:f,attributes:[],stepMode:h},i.set(l,c)}const u=this._getVertexFormat(o),d=o.isInterleavedBufferAttribute===!0?o.offset*s:0;c.attributes.push({shaderLocation:a,offset:d,format:u})}return Array.from(i.values())}destroyAttribute(e){const r=this.backend;r.get(this._getBufferAttribute(e)).buffer.destroy(),r.delete(e)}async getArrayBufferAsync(e){const r=this.backend,i=r.device,o=r.get(this._getBufferAttribute(e)).buffer,s=o.size,l=i.createBuffer({label:e.name,size:s,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),c=i.createCommandEncoder({});c.copyBufferToBuffer(o,0,l,0,s),l.unmap();const u=c.finish();return i.queue.submit([u]),await l.mapAsync(GPUMapMode.READ),l.getMappedRange()}_getVertexFormat(e){const{itemSize:r,normalized:i}=e,a=e.array.constructor,o=e.constructor;let s;if(r==1)s=G9t.get(a);else{const c=(V9t.get(o)||U9t.get(a))[i?1:0];if(c){const u=a.BYTES_PER_ELEMENT*r,f=Math.floor((u+3)/4)*4/a.BYTES_PER_ELEMENT;if(f%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");s=`${c}x${f}`}}return s||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),s}_isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class H9t{constructor(e){this.backend=e,this.bindGroupLayoutCache=new WeakMap}createBindingsLayout(e){const i=this.backend.device,a=[];let o=0;for(const s of e.bindings){const l={binding:o++,visibility:s.visibility};if(s.isUniformBuffer||s.isStorageBuffer){const c={};s.isStorageBuffer&&(s.visibility&4&&(s.access===gp.READ_WRITE||s.access===gp.WRITE_ONLY)?c.type=xU.Storage:c.type=xU.ReadOnlyStorage),l.buffer=c}else if(s.isSampler){const c={};s.texture.isDepthTexture&&s.texture.compareFunction!==null&&(c.type="comparison"),l.sampler=c}else if(s.isSampledTexture&&s.texture.isVideoTexture)l.externalTexture={};else if(s.isSampledTexture&&s.store){const c={};c.format=this.backend.get(s.texture).texture.format;const u=s.access;u===gp.READ_WRITE?c.access=_U.ReadWrite:u===gp.WRITE_ONLY?c.access=_U.WriteOnly:c.access=_U.ReadOnly,l.storageTexture=c}else if(s.isSampledTexture){const c={};if(s.texture.isMultisampleRenderTargetTexture===!0&&(c.multisampled=!0),s.texture.isDepthTexture)c.sampleType=VS.Depth;else if(s.texture.isDataTexture||s.texture.isDataArrayTexture||s.texture.isData3DTexture){const u=s.texture.type;u===Zo?c.sampleType=VS.SInt:u===Ca?c.sampleType=VS.UInt:u===Ka&&(this.backend.hasFeature("float32-filterable")?c.sampleType=VS.Float:c.sampleType=VS.UnfilterableFloat)}s.isSampledCubeTexture?c.viewDimension=Cu.Cube:s.texture.isDataArrayTexture||s.texture.isCompressedArrayTexture?c.viewDimension=Cu.TwoDArray:s.isSampledTexture3D&&(c.viewDimension=Cu.ThreeD),l.texture=c}else console.error(`WebGPUBindingUtils: Unsupported binding "${s}".`);a.push(l)}return i.createBindGroupLayout({entries:a})}createBindings(e,r,i,a=0){const{backend:o,bindGroupLayoutCache:s}=this,l=o.get(e);let c=s.get(e.bindingsReference);c===void 0&&(c=this.createBindingsLayout(e),s.set(e.bindingsReference,c));let u;i>0&&(l.groups===void 0&&(l.groups=[],l.versions=[]),l.versions[i]===a&&(u=l.groups[i])),u===void 0&&(u=this.createBindGroup(e,c),i>0&&(l.groups[i]=u,l.versions[i]=a)),l.group=u,l.layout=c}updateBinding(e){const r=this.backend,i=r.device,a=e.buffer,o=r.get(e).buffer;i.queue.writeBuffer(o,0,a,0)}createBindGroup(e,r){const i=this.backend,a=i.device;let o=0;const s=[];for(const l of e.bindings){if(l.isUniformBuffer){const c=i.get(l);if(c.buffer===void 0){const u=l.byteLength,d=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,f=a.createBuffer({label:"bindingBuffer_"+l.name,size:u,usage:d});c.buffer=f}s.push({binding:o,resource:{buffer:c.buffer}})}else if(l.isStorageBuffer){const c=i.get(l);if(c.buffer===void 0){const u=l.attribute;c.buffer=i.get(u).buffer}s.push({binding:o,resource:{buffer:c.buffer}})}else if(l.isSampler){const c=i.get(l.texture);s.push({binding:o,resource:c.sampler})}else if(l.isSampledTexture){const c=i.get(l.texture);let u;if(c.externalTexture!==void 0)u=a.importExternalTexture({source:c.externalTexture});else{const d=l.store?1:c.texture.mipLevelCount,f=`view-${c.texture.width}-${c.texture.height}-${d}`;if(u=c[f],u===void 0){const h=_9t.All;let p;l.isSampledCubeTexture?p=Cu.Cube:l.isSampledTexture3D?p=Cu.ThreeD:l.texture.isDataArrayTexture||l.texture.isCompressedArrayTexture?p=Cu.TwoDArray:p=Cu.TwoD,u=c[f]=c.texture.createView({aspect:h,dimension:p,mipLevelCount:d})}}s.push({binding:o,resource:u})}o++}return a.createBindGroup({label:"bindGroup_"+e.name,layout:r,entries:s})}}class W9t{constructor(e){this.backend=e}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,r){const{object:i,material:a,geometry:o,pipeline:s}=e,{vertexProgram:l,fragmentProgram:c}=s,u=this.backend,d=u.device,f=u.utils,h=u.get(s),p=[];for(const I of e.getBindings()){const D=u.get(I);p.push(D.layout)}const g=u.attributeUtils.createShaderVertexBuffers(e);let m;a.transparent===!0&&a.blending!==ml&&(m=this._getBlending(a));let v={};a.stencilWrite===!0&&(v={compare:this._getStencilCompare(a),failOp:this._getStencilOperation(a.stencilFail),depthFailOp:this._getStencilOperation(a.stencilZFail),passOp:this._getStencilOperation(a.stencilZPass)});const y=this._getColorWriteMask(a),b=[];if(e.context.textures!==null){const I=e.context.textures;for(let D=0;D<I.length;D++){const k=f.getTextureFormatGPU(I[D]);b.push({format:k,blend:m,writeMask:y})}}else{const I=f.getCurrentColorFormat(e.context);b.push({format:I,blend:m,writeMask:y})}const x=u.get(l).module,_=u.get(c).module,S=this._getPrimitiveState(i,o,a),M=this._getDepthCompare(a),E=f.getCurrentDepthStencilFormat(e.context),T=this._getSampleCount(e.context),P={label:`renderPipeline_${a.name||a.type}_${a.id}`,vertex:Object.assign({},x,{buffers:g}),fragment:Object.assign({},_,{targets:b}),primitive:S,multisample:{count:T,alphaToCoverageEnabled:a.alphaToCoverage&&T>1},layout:d.createPipelineLayout({bindGroupLayouts:p})},A={},N=e.context.depth,O=e.context.stencil;if((N===!0||O===!0)&&(N===!0&&(A.format=E,A.depthWriteEnabled=a.depthWrite,A.depthCompare=M),O===!0&&(A.stencilFront=v,A.stencilBack={},A.stencilReadMask=a.stencilFuncMask,A.stencilWriteMask=a.stencilWriteMask),P.depthStencil=A),r===null)h.pipeline=d.createRenderPipeline(P);else{const I=new Promise(D=>{d.createRenderPipelineAsync(P).then(k=>{h.pipeline=k,D()})});r.push(I)}}createBundleEncoder(e){const r=this.backend,{utils:i,device:a}=r,o=i.getCurrentDepthStencilFormat(e),s=i.getCurrentColorFormat(e),l=this._getSampleCount(e),c={label:"renderBundleEncoder",colorFormats:[s],depthStencilFormat:o,sampleCount:l};return a.createRenderBundleEncoder(c)}createComputePipeline(e,r){const i=this.backend,a=i.device,o=i.get(e.computeProgram).module,s=i.get(e),l=[];for(const c of r){const u=i.get(c);l.push(u.layout)}s.pipeline=a.createComputePipeline({compute:o,layout:a.createPipelineLayout({bindGroupLayouts:l})})}_getBlending(e){let r,i;const a=e.blending,o=e.blendSrc,s=e.blendDst,l=e.blendEquation;if(a===DK){const c=e.blendSrcAlpha!==null?e.blendSrcAlpha:o,u=e.blendDstAlpha!==null?e.blendDstAlpha:s,d=e.blendEquationAlpha!==null?e.blendEquationAlpha:l;r={srcFactor:this._getBlendFactor(o),dstFactor:this._getBlendFactor(s),operation:this._getBlendOperation(l)},i={srcFactor:this._getBlendFactor(c),dstFactor:this._getBlendFactor(u),operation:this._getBlendOperation(d)}}else{const c=e.premultipliedAlpha,u=(d,f,h,p)=>{r={srcFactor:d,dstFactor:f,operation:Yv.Add},i={srcFactor:h,dstFactor:p,operation:Yv.Add}};if(c)switch(a){case $u:u(tr.One,tr.OneMinusSrcAlpha,tr.One,tr.OneMinusSrcAlpha);break;case Xx:u(tr.One,tr.One,tr.One,tr.One);break;case Kx:u(tr.Zero,tr.OneMinusSrc,tr.Zero,tr.One);break;case Zx:u(tr.Zero,tr.Src,tr.Zero,tr.SrcAlpha);break}else switch(a){case $u:u(tr.SrcAlpha,tr.OneMinusSrcAlpha,tr.One,tr.OneMinusSrcAlpha);break;case Xx:u(tr.SrcAlpha,tr.One,tr.SrcAlpha,tr.One);break;case Kx:u(tr.Zero,tr.OneMinusSrc,tr.Zero,tr.One);break;case Zx:u(tr.Zero,tr.Src,tr.Zero,tr.Src);break}}if(r!==void 0&&i!==void 0)return{color:r,alpha:i};console.error("THREE.WebGPURenderer: Invalid blending: ",a)}_getBlendFactor(e){let r;switch(e){case FK:r=tr.Zero;break;case $K:r=tr.One;break;case BK:r=tr.Src;break;case zK:r=tr.OneMinusSrc;break;case fC:r=tr.SrcAlpha;break;case hC:r=tr.OneMinusSrcAlpha;break;case GK:r=tr.Dst;break;case jK:r=tr.OneMinusDstColor;break;case UK:r=tr.DstAlpha;break;case VK:r=tr.OneMinusDstAlpha;break;case HK:r=tr.SrcAlphaSaturated;break;case Z8t:r=tr.Constant;break;case Q8t:r=tr.OneMinusConstant;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return r}_getStencilCompare(e){let r;const i=e.stencilFunc;switch(i){case w3t:r=ss.Never;break;case NH:r=ss.Always;break;case S3t:r=ss.Less;break;case C3t:r=ss.LessEqual;break;case E3t:r=ss.Equal;break;case A3t:r=ss.GreaterEqual;break;case M3t:r=ss.Greater;break;case T3t:r=ss.NotEqual;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",i)}return r}_getStencilOperation(e){let r;switch(e){case Jv:r=Pg.Keep;break;case g3t:r=Pg.Zero;break;case m3t:r=Pg.Replace;break;case _3t:r=Pg.Invert;break;case v3t:r=Pg.IncrementClamp;break;case y3t:r=Pg.DecrementClamp;break;case b3t:r=Pg.IncrementWrap;break;case x3t:r=Pg.DecrementWrap;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",r)}return r}_getBlendOperation(e){let r;switch(e){case Nc:r=Yv.Add;break;case LK:r=Yv.Subtract;break;case kK:r=Yv.ReverseSubtract;break;case j3e:r=Yv.Min;break;case H3e:r=Yv.Max;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return r}_getPrimitiveState(e,r,i){const a={},o=this.backend.utils;switch(a.topology=o.getPrimitiveTopology(e,i),r.index!==null&&e.isLine===!0&&e.isLineSegments!==!0&&(a.stripIndexFormat=r.index.array instanceof Uint16Array?b_.Uint16:b_.Uint32),i.side){case Qd:a.frontFace=vU.CCW,a.cullMode=yU.Back;break;case va:a.frontFace=vU.CCW,a.cullMode=yU.Front;break;case dl:a.frontFace=vU.CCW,a.cullMode=yU.None;break;default:console.error("THREE.WebGPUPipelineUtils: Unknown material.side value.",i.side);break}return a}_getColorWriteMask(e){return e.colorWrite===!0?Wme.All:Wme.None}_getDepthCompare(e){let r;if(e.depthTest===!1)r=ss.Always;else{const i=e.depthFunc;switch(i){case pC:r=ss.Never;break;case gC:r=ss.Always;break;case mC:r=ss.Less;break;case Km:r=ss.LessEqual;break;case vC:r=ss.Equal;break;case yC:r=ss.GreaterEqual;break;case bC:r=ss.Greater;break;case xC:r=ss.NotEqual;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",i)}}return r}}class q9t extends KPe{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=e.alpha===void 0?!0:e.alpha,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.trackTimestamp=e.trackTimestamp===!0,this.device=null,this.context=null,this.colorBuffer=null,this.defaultRenderPassdescriptor=null,this.utils=new z9t(this),this.attributeUtils=new j9t(this),this.bindingUtils=new H9t(this),this.pipelineUtils=new W9t(this),this.textureUtils=new P9t(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const r=this.parameters;let i;if(r.device===void 0){const s={powerPreference:r.powerPreference},l=typeof navigator<"u"?await navigator.gpu.requestAdapter(s):null;if(l===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const c=Object.values(eW),u=[];for(const f of c)l.features.has(f)&&u.push(f);const d={requiredFeatures:u,requiredLimits:r.requiredLimits};i=await l.requestDevice(d)}else i=r.device;i.lost.then(s=>{const l={api:"WebGPU",message:s.message||"Unknown reason",reason:s.reason||null,originalEvent:s};e.onDeviceLost(l)});const a=r.context!==void 0?r.context:e.domElement.getContext("webgpu");this.device=i,this.context=a;const o=r.alpha?"premultiplied":"opaque";this.trackTimestamp=this.trackTimestamp&&this.hasFeature(eW.TimestampQuery),this.context.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:o}),this.updateSize()}get coordinateSystem(){return Ty}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){let e=this.defaultRenderPassdescriptor;if(e===null){const i=this.renderer;e={colorAttachments:[{view:null}]},(this.renderer.depth===!0||this.renderer.stencil===!0)&&(e.depthStencilAttachment={view:this.textureUtils.getDepthBuffer(i.depth,i.stencil).createView()});const a=e.colorAttachments[0];this.renderer.samples>0?a.view=this.colorBuffer.createView():a.resolveTarget=void 0,this.defaultRenderPassdescriptor=e}const r=e.colorAttachments[0];return this.renderer.samples>0?r.resolveTarget=this.context.getCurrentTexture().createView():r.view=this.context.getCurrentTexture().createView(),e}_getRenderPassDescriptor(e){const r=e.renderTarget,i=this.get(r);let a=i.descriptors;if(a===void 0||i.width!==r.width||i.height!==r.height||i.activeMipmapLevel!==r.activeMipmapLevel||i.samples!==r.samples){a={},i.descriptors=a;const l=()=>{r.removeEventListener("dispose",l),this.delete(r)};r.addEventListener("dispose",l)}const o=e.getCacheKey();let s=a[o];if(s===void 0){const l=e.textures,c=[];for(let u=0;u<l.length;u++){const d=this.get(l[u]),f=d.texture.createView({baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,dimension:Cu.TwoD});let h,p;d.msaaTexture!==void 0?(h=d.msaaTexture.createView(),p=f):(h=f,p=void 0),c.push({view:h,resolveTarget:p,loadOp:no.Load,storeOp:cs.Store})}if(s={colorAttachments:c},e.depth){const d={view:this.get(e.depthTexture).texture.createView()};s.depthStencilAttachment=d}a[o]=s,i.width=r.width,i.height=r.height,i.samples=r.samples,i.activeMipmapLevel=r.activeMipmapLevel}return s}beginRender(e){const r=this.get(e),i=this.device,a=e.occlusionQueryCount;let o;a>0&&(r.currentOcclusionQuerySet&&r.currentOcclusionQuerySet.destroy(),r.currentOcclusionQueryBuffer&&r.currentOcclusionQueryBuffer.destroy(),r.currentOcclusionQuerySet=r.occlusionQuerySet,r.currentOcclusionQueryBuffer=r.occlusionQueryBuffer,r.currentOcclusionQueryObjects=r.occlusionQueryObjects,o=i.createQuerySet({type:"occlusion",count:a,label:`occlusionQuerySet_${e.id}`}),r.occlusionQuerySet=o,r.occlusionQueryIndex=0,r.occlusionQueryObjects=new Array(a),r.lastOcclusionObject=null);let s;e.textures===null?s=this._getDefaultRenderPassDescriptor():s=this._getRenderPassDescriptor(e),this.initTimestampQuery(e,s),s.occlusionQuerySet=o;const l=s.depthStencilAttachment;if(e.textures!==null){const d=s.colorAttachments;for(let f=0;f<d.length;f++){const h=d[f];e.clearColor?(h.clearValue=f===0?e.clearColorValue:{r:0,g:0,b:0,a:1},h.loadOp=no.Clear,h.storeOp=cs.Store):(h.loadOp=no.Load,h.storeOp=cs.Store)}}else{const d=s.colorAttachments[0];e.clearColor?(d.clearValue=e.clearColorValue,d.loadOp=no.Clear,d.storeOp=cs.Store):(d.loadOp=no.Load,d.storeOp=cs.Store)}e.depth&&(e.clearDepth?(l.depthClearValue=e.clearDepthValue,l.depthLoadOp=no.Clear,l.depthStoreOp=cs.Store):(l.depthLoadOp=no.Load,l.depthStoreOp=cs.Store)),e.stencil&&(e.clearStencil?(l.stencilClearValue=e.clearStencilValue,l.stencilLoadOp=no.Clear,l.stencilStoreOp=cs.Store):(l.stencilLoadOp=no.Load,l.stencilStoreOp=cs.Store));const c=i.createCommandEncoder({label:"renderContext_"+e.id}),u=c.beginRenderPass(s);if(r.descriptor=s,r.encoder=c,r.currentPass=u,r.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},r.renderBundles=[],e.viewport&&this.updateViewport(e),e.scissor){const{x:d,y:f,width:h,height:p}=e.scissorValue;u.setScissorRect(d,f,h,p)}}finishRender(e){const r=this.get(e),i=e.occlusionQueryCount;if(r.renderBundles.length>0&&r.currentPass.executeBundles(r.renderBundles),i>r.occlusionQueryIndex&&r.currentPass.endOcclusionQuery(),r.currentPass.end(),i>0){const a=i*8;let o=this.occludedResolveCache.get(a);o===void 0&&(o=this.device.createBuffer({size:a,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(a,o));const s=this.device.createBuffer({size:a,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});r.encoder.resolveQuerySet(r.occlusionQuerySet,0,i,o,0),r.encoder.copyBufferToBuffer(o,0,s,0,a),r.occlusionQueryBuffer=s,this.resolveOccludedAsync(e)}if(this.prepareTimestampBuffer(e,r.encoder),this.device.queue.submit([r.encoder.finish()]),e.textures!==null){const a=e.textures;for(let o=0;o<a.length;o++){const s=a[o];s.generateMipmaps===!0&&this.textureUtils.generateMipmaps(s)}}}isOccluded(e,r){const i=this.get(e);return i.occluded&&i.occluded.has(r)}async resolveOccludedAsync(e){const r=this.get(e),{currentOcclusionQueryBuffer:i,currentOcclusionQueryObjects:a}=r;if(i&&a){const o=new WeakSet;r.currentOcclusionQueryObjects=null,r.currentOcclusionQueryBuffer=null,await i.mapAsync(GPUMapMode.READ);const s=i.getMappedRange(),l=new BigUint64Array(s);for(let c=0;c<a.length;c++)l[c]!==BigInt(0)&&o.add(a[c]);i.destroy(),r.occluded=o}}updateViewport(e){const{currentPass:r}=this.get(e),{x:i,y:a,width:o,height:s,minDepth:l,maxDepth:c}=e.viewportValue;r.setViewport(i,a,o,s,l,c)}clear(e,r,i,a=null){const o=this.device,s=this.renderer;let l=[],c,u,d,f;if(e){const g=this.getClearColor();if(this.renderer.alpha===!0){const m=g.a;u={r:g.r*m,g:g.g*m,b:g.b*m,a:m}}else u={r:g.r,g:g.g,b:g.b,a:g.a}}if(a===null){d=s.depth,f=s.stencil;const g=this._getDefaultRenderPassDescriptor();if(e){l=g.colorAttachments;const m=l[0];m.clearValue=u,m.loadOp=no.Clear,m.storeOp=cs.Store}(d||f)&&(c=g.depthStencilAttachment)}else{if(d=a.depth,f=a.stencil,e)for(const g of a.textures){const m=this.get(g),v=m.texture.createView();let y,b;m.msaaTexture!==void 0?(y=m.msaaTexture.createView(),b=v):(y=v,b=void 0),l.push({view:y,resolveTarget:b,clearValue:u,loadOp:no.Clear,storeOp:cs.Store})}(d||f)&&(c={view:this.get(a.depthTexture).texture.createView()})}d&&(r?(c.depthLoadOp=no.Clear,c.depthClearValue=s.getClearDepth(),c.depthStoreOp=cs.Store):(c.depthLoadOp=no.Load,c.depthStoreOp=cs.Store)),f&&(i?(c.stencilLoadOp=no.Clear,c.stencilClearValue=s.getClearStencil(),c.stencilStoreOp=cs.Store):(c.stencilLoadOp=no.Load,c.stencilStoreOp=cs.Store));const h=o.createCommandEncoder({});h.beginRenderPass({colorAttachments:l,depthStencilAttachment:c}).end(),o.queue.submit([h.finish()])}beginCompute(e){const r=this.get(e),i={};this.initTimestampQuery(e,i),r.cmdEncoderGPU=this.device.createCommandEncoder(),r.passEncoderGPU=r.cmdEncoderGPU.beginComputePass(i)}compute(e,r,i,a){const{passEncoderGPU:o}=this.get(e),s=this.get(a).pipeline;o.setPipeline(s);for(let d=0,f=i.length;d<f;d++){const h=i[d],p=this.get(h);o.setBindGroup(d,p.group)}const l=this.device.limits.maxComputeWorkgroupsPerDimension,c=this.get(r);c.dispatchSize===void 0&&(c.dispatchSize={x:0,y:1,z:1});const{dispatchSize:u}=c;r.dispatchCount>l?(u.x=Math.min(r.dispatchCount,l),u.y=Math.ceil(r.dispatchCount/l)):u.x=r.dispatchCount,o.dispatchWorkgroups(u.x,u.y,u.z)}finishCompute(e){const r=this.get(e);r.passEncoderGPU.end(),this.prepareTimestampBuffer(e,r.cmdEncoderGPU),this.device.queue.submit([r.cmdEncoderGPU.finish()])}async waitForGPU(){await this.device.queue.onSubmittedWorkDone()}draw(e,r){const{object:i,context:a,pipeline:o}=e,s=e.getBindings(),l=this.get(a),c=this.get(o).pipeline,u=l.currentSets,d=l.currentPass,f=e.getDrawParameters();if(f===null)return;u.pipeline!==c&&(d.setPipeline(c),u.pipeline=c);const h=u.bindingGroups;for(let v=0,y=s.length;v<y;v++){const b=s[v],x=this.get(b);h[b.index]!==b.id&&(d.setBindGroup(b.index,x.group),h[b.index]=b.id)}const p=e.getIndex(),g=p!==null;if(g===!0&&u.index!==p){const v=this.get(p).buffer,y=p.array instanceof Uint16Array?b_.Uint16:b_.Uint32;d.setIndexBuffer(v,y),u.index=p}const m=e.getVertexBuffers();for(let v=0,y=m.length;v<y;v++){const b=m[v];if(u.attributes[v]!==b){const x=this.get(b).buffer;d.setVertexBuffer(v,x),u.attributes[v]=b}}if(l.occlusionQuerySet!==void 0){const v=l.lastOcclusionObject;v!==i&&(v!==null&&v.occlusionTest===!0&&(d.endOcclusionQuery(),l.occlusionQueryIndex++),i.occlusionTest===!0&&(d.beginOcclusionQuery(l.occlusionQueryIndex),l.occlusionQueryObjects[l.occlusionQueryIndex]=i),l.lastOcclusionObject=i)}if(i.isBatchedMesh===!0){const v=i._multiDrawStarts,y=i._multiDrawCounts,b=i._multiDrawCount,x=i._multiDrawInstances,_=g?p.array.BYTES_PER_ELEMENT:1;for(let S=0;S<b;S++){const M=x?x[S]:1,E=M>1?0:S;d.drawIndexed(y[S],M,v[S]/_,0,E)}}else if(g===!0){const{vertexCount:v,instanceCount:y,firstVertex:b}=f,x=e.getIndirect();if(x!==null){const _=this.get(x).buffer;d.drawIndexedIndirect(_,0)}else d.drawIndexed(v,y,b,0,0);r.update(i,v,y)}else{const{vertexCount:v,instanceCount:y,firstVertex:b}=f,x=e.getIndirect();if(x!==null){const _=this.get(x).buffer;d.drawIndirect(_,0)}else d.draw(v,y,b,0);r.update(i,v,y)}}needsRenderUpdate(e){const r=this.get(e),{object:i,material:a}=e,o=this.utils,s=o.getSampleCountRenderContext(e.context),l=o.getCurrentColorSpace(e.context),c=o.getCurrentColorFormat(e.context),u=o.getCurrentDepthStencilFormat(e.context),d=o.getPrimitiveTopology(i,a);let f=!1;return(r.material!==a||r.materialVersion!==a.version||r.transparent!==a.transparent||r.blending!==a.blending||r.premultipliedAlpha!==a.premultipliedAlpha||r.blendSrc!==a.blendSrc||r.blendDst!==a.blendDst||r.blendEquation!==a.blendEquation||r.blendSrcAlpha!==a.blendSrcAlpha||r.blendDstAlpha!==a.blendDstAlpha||r.blendEquationAlpha!==a.blendEquationAlpha||r.colorWrite!==a.colorWrite||r.depthWrite!==a.depthWrite||r.depthTest!==a.depthTest||r.depthFunc!==a.depthFunc||r.stencilWrite!==a.stencilWrite||r.stencilFunc!==a.stencilFunc||r.stencilFail!==a.stencilFail||r.stencilZFail!==a.stencilZFail||r.stencilZPass!==a.stencilZPass||r.stencilFuncMask!==a.stencilFuncMask||r.stencilWriteMask!==a.stencilWriteMask||r.side!==a.side||r.alphaToCoverage!==a.alphaToCoverage||r.sampleCount!==s||r.colorSpace!==l||r.colorFormat!==c||r.depthStencilFormat!==u||r.primitiveTopology!==d||r.clippingContextCacheKey!==e.clippingContextCacheKey)&&(r.material=a,r.materialVersion=a.version,r.transparent=a.transparent,r.blending=a.blending,r.premultipliedAlpha=a.premultipliedAlpha,r.blendSrc=a.blendSrc,r.blendDst=a.blendDst,r.blendEquation=a.blendEquation,r.blendSrcAlpha=a.blendSrcAlpha,r.blendDstAlpha=a.blendDstAlpha,r.blendEquationAlpha=a.blendEquationAlpha,r.colorWrite=a.colorWrite,r.depthWrite=a.depthWrite,r.depthTest=a.depthTest,r.depthFunc=a.depthFunc,r.stencilWrite=a.stencilWrite,r.stencilFunc=a.stencilFunc,r.stencilFail=a.stencilFail,r.stencilZFail=a.stencilZFail,r.stencilZPass=a.stencilZPass,r.stencilFuncMask=a.stencilFuncMask,r.stencilWriteMask=a.stencilWriteMask,r.side=a.side,r.alphaToCoverage=a.alphaToCoverage,r.sampleCount=s,r.colorSpace=l,r.colorFormat=c,r.depthStencilFormat=u,r.primitiveTopology=d,r.clippingContextCacheKey=e.clippingContextCacheKey,f=!0),f}getRenderCacheKey(e){const{object:r,material:i}=e,a=this.utils,o=e.context;return[i.transparent,i.blending,i.premultipliedAlpha,i.blendSrc,i.blendDst,i.blendEquation,i.blendSrcAlpha,i.blendDstAlpha,i.blendEquationAlpha,i.colorWrite,i.depthWrite,i.depthTest,i.depthFunc,i.stencilWrite,i.stencilFunc,i.stencilFail,i.stencilZFail,i.stencilZPass,i.stencilFuncMask,i.stencilWriteMask,i.side,a.getSampleCountRenderContext(o),a.getCurrentColorSpace(o),a.getCurrentColorFormat(o),a.getCurrentDepthStencilFormat(o),a.getPrimitiveTopology(r,i),e.getGeometryCacheKey(),e.clippingContextCacheKey].join()}createSampler(e){this.textureUtils.createSampler(e)}destroySampler(e){this.textureUtils.destroySampler(e)}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,r){this.textureUtils.createTexture(e,r)}updateTexture(e,r){this.textureUtils.updateTexture(e,r)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}copyTextureToBuffer(e,r,i,a,o,s){return this.textureUtils.copyTextureToBuffer(e,r,i,a,o,s)}initTimestampQuery(e,r){if(!this.trackTimestamp)return;const i=this.get(e);if(!i.timeStampQuerySet){const a=e.isComputeNode?"compute":"render",o=this.device.createQuerySet({type:"timestamp",count:2,label:`timestamp_${a}_${e.id}`});Object.assign(r,{timestampWrites:{querySet:o,beginningOfPassWriteIndex:0,endOfPassWriteIndex:1}}),i.timeStampQuerySet=o}}prepareTimestampBuffer(e,r){if(!this.trackTimestamp)return;const i=this.get(e),a=2*BigInt64Array.BYTES_PER_ELEMENT;i.currentTimestampQueryBuffers===void 0&&(i.currentTimestampQueryBuffers={resolveBuffer:this.device.createBuffer({label:"timestamp resolve buffer",size:a,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),resultBuffer:this.device.createBuffer({label:"timestamp result buffer",size:a,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ})});const{resolveBuffer:o,resultBuffer:s}=i.currentTimestampQueryBuffers;r.resolveQuerySet(i.timeStampQuerySet,0,2,o,0),s.mapState==="unmapped"&&r.copyBufferToBuffer(o,0,s,0,a)}async resolveTimestampAsync(e,r="render"){if(!this.trackTimestamp)return;const i=this.get(e);if(i.currentTimestampQueryBuffers===void 0)return;const{resultBuffer:a}=i.currentTimestampQueryBuffers;await this.device.queue.onSubmittedWorkDone(),a.mapState==="unmapped"&&a.mapAsync(GPUMapMode.READ).then(()=>{const o=new BigUint64Array(a.getMappedRange()),s=Number(o[1]-o[0])/1e6;this.renderer.info.updateTimestamp(r,s),a.unmap()})}createNodeBuilder(e,r){return new B9t(e,r)}createProgram(e){const r=this.get(e);r.module={module:this.device.createShaderModule({code:e.code,label:e.stage}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,r){this.pipelineUtils.createRenderPipeline(e,r)}createComputePipeline(e,r){this.pipelineUtils.createComputePipeline(e,r)}beginBundle(e){const r=this.get(e);r._currentPass=r.currentPass,r._currentSets=r.currentSets,r.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},r.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,r){const i=this.get(e),o=i.currentPass.finish();this.get(r).bundleGPU=o,i.currentSets=i._currentSets,i.currentPass=i._currentPass}addBundle(e,r){this.get(e).renderBundles.push(this.get(r).bundleGPU)}createBindings(e,r,i,a){this.bindingUtils.createBindings(e,r,i,a)}updateBindings(e,r,i,a){this.bindingUtils.createBindings(e,r,i,a)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createIndirectStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.colorBuffer=this.textureUtils.getColorBuffer(),this.defaultRenderPassdescriptor=null}getMaxAnisotropy(){return 16}hasFeature(e){return this.device.features.has(e)}copyTextureToTexture(e,r,i=null,a=null,o=0){let s=0,l=0,c=0,u=0,d=0,f=0,h=e.image.width,p=e.image.height;i!==null&&(u=i.x,d=i.y,f=i.z||0,h=i.width,p=i.height),a!==null&&(s=a.x,l=a.y,c=a.z||0);const g=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+r.id}),m=this.get(e).texture,v=this.get(r).texture;g.copyTextureToTexture({texture:m,mipLevel:o,origin:{x:u,y:d,z:f}},{texture:v,mipLevel:o,origin:{x:s,y:l,z:c}},[h,p,1]),this.device.queue.submit([g.finish()])}copyFramebufferToTexture(e,r,i){const a=this.get(r);let o=null;r.renderTarget?e.isDepthTexture?o=this.get(r.depthTexture).texture:o=this.get(r.textures[0]).texture:e.isDepthTexture?o=this.textureUtils.getDepthBuffer(r.depth,r.stencil):o=this.context.getCurrentTexture();const s=this.get(e).texture;if(o.format!==s.format){console.error("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",o.format,s.format);return}let l;if(a.currentPass?(a.currentPass.end(),l=a.encoder):l=this.device.createCommandEncoder({label:"copyFramebufferToTexture_"+e.id}),l.copyTextureToTexture({texture:o,origin:[i.x,i.y,0]},{texture:s},[i.z,i.w]),e.generateMipmaps&&this.textureUtils.generateMipmaps(e),a.currentPass){const{descriptor:c}=a;for(let u=0;u<c.colorAttachments.length;u++)c.colorAttachments[u].loadOp=no.Load;if(r.depth&&(c.depthStencilAttachment.depthLoadOp=no.Load),r.stencil&&(c.depthStencilAttachment.stencilLoadOp=no.Load),a.currentPass=l.beginRenderPass(c),a.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},r.viewport&&this.updateViewport(r),r.scissor){const{x:u,y:d,width:f,height:h}=r.scissorValue;a.currentPass.setScissorRect(u,d,f,h)}}else this.device.queue.submit([l.finish()])}}class Y9t extends yAe{constructor(e,r,i,a,o,s){super(e,r,i,a,o,s),this.iesMap=null}copy(e,r){return super.copy(e,r),this.iesMap=e.iesMap,this}}class X9t extends GPe{constructor(){super(),this.addMaterial(VFt,"MeshPhongMaterial"),this.addMaterial(TPe,"MeshStandardMaterial"),this.addMaterial(A8t,"MeshPhysicalMaterial"),this.addMaterial(O8t,"MeshToonMaterial"),this.addMaterial(LFt,"MeshBasicMaterial"),this.addMaterial(zFt,"MeshLambertMaterial"),this.addMaterial(RFt,"MeshNormalMaterial"),this.addMaterial(k8t,"MeshMatcapMaterial"),this.addMaterial(EFt,"LineBasicMaterial"),this.addMaterial(MFt,"LineDashedMaterial"),this.addMaterial($8t,"PointsMaterial"),this.addMaterial(V8t,"SpriteMaterial"),this.addMaterial(H8t,"ShadowMaterial"),this.addLight(cBt,ZAt),this.addLight($Bt,bAe),this.addLight(BBt,JAt),this.addLight(UPe,yAe),this.addLight(UBt,xAe),this.addLight(VBt,YAt),this.addLight(GBt,tRt),this.addLight(zBt,Y9t),this.addToneMapping(C$t,Y3e),this.addToneMapping(M$t,X3e),this.addToneMapping(T$t,K3e),this.addToneMapping(R$t,Z3e),this.addToneMapping(I$t,Q3e),this.addToneMapping(D$t,J3e)}}class K9t extends e9t{constructor(e={}){let r;e.forceWebGL?r=Hme:(r=q9t,e.getFallback=()=>(console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new Hme(e)));const i=new r(e);super(i,e),this.library=new X9t,this.isWebGPURenderer=!0}}const wU={type:"change"},ZZ={type:"start"},QZ={type:"end"},Qme=1e-6,fi={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},PR=new Nt,Ng=new Nt,Z9t=new ge,NR=new ge,SU=new ge,hb=new ah,Jme=new ge,OR=new ge,EU=new ge,IR=new ge;class Q9t extends FL{constructor(e,r=null){super(e,r),this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:gs.ROTATE,MIDDLE:gs.DOLLY,RIGHT:gs.PAN},this.state=fi.NONE,this.keyState=fi.NONE,this.target=new ge,this._lastPosition=new ge,this._lastZoom=1,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._lastAngle=0,this._eye=new ge,this._movePrev=new Nt,this._moveCurr=new Nt,this._lastAxis=new ge,this._zoomStart=new Nt,this._zoomEnd=new Nt,this._panStart=new Nt,this._panEnd=new Nt,this._pointers=[],this._pointerPositions={},this._onPointerMove=e7t.bind(this),this._onPointerDown=J9t.bind(this),this._onPointerUp=t7t.bind(this),this._onPointerCancel=n7t.bind(this),this._onContextMenu=c7t.bind(this),this._onMouseWheel=l7t.bind(this),this._onKeyDown=i7t.bind(this),this._onKeyUp=r7t.bind(this),this._onTouchStart=u7t.bind(this),this._onTouchMove=d7t.bind(this),this._onTouchEnd=f7t.bind(this),this._onMouseDown=a7t.bind(this),this._onMouseMove=o7t.bind(this),this._onMouseUp=s7t.bind(this),this._target0=this.target.clone(),this._position0=this.object.position.clone(),this._up0=this.object.up.clone(),this._zoom0=this.object.zoom,r!==null&&(this.connect(),this.handleResize()),this.update()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}handleResize(){const e=this.domElement.getBoundingClientRect(),r=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-r.clientLeft,this.screen.top=e.top+window.pageYOffset-r.clientTop,this.screen.width=e.width,this.screen.height=e.height}update(){this._eye.subVectors(this.object.position,this.target),this.noRotate||this._rotateCamera(),this.noZoom||this._zoomCamera(),this.noPan||this._panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this._checkDistances(),this.object.lookAt(this.target),this._lastPosition.distanceToSquared(this.object.position)>Qme&&(this.dispatchEvent(wU),this._lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this._lastPosition.distanceToSquared(this.object.position)>Qme||this._lastZoom!==this.object.zoom)&&(this.dispatchEvent(wU),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type.")}reset(){this.state=fi.NONE,this.keyState=fi.NONE,this.target.copy(this._target0),this.object.position.copy(this._position0),this.object.up.copy(this._up0),this.object.zoom=this._zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(wU),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom}_panCamera(){if(Ng.copy(this._panEnd).sub(this._panStart),Ng.lengthSq()){if(this.object.isOrthographicCamera){const e=(this.object.right-this.object.left)/this.object.zoom/this.domElement.clientWidth,r=(this.object.top-this.object.bottom)/this.object.zoom/this.domElement.clientWidth;Ng.x*=e,Ng.y*=r}Ng.multiplyScalar(this._eye.length()*this.panSpeed),NR.copy(this._eye).cross(this.object.up).setLength(Ng.x),NR.add(Z9t.copy(this.object.up).setLength(Ng.y)),this.object.position.add(NR),this.target.add(NR),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(Ng.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}_rotateCamera(){IR.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0);let e=IR.length();e?(this._eye.copy(this.object.position).sub(this.target),Jme.copy(this._eye).normalize(),OR.copy(this.object.up).normalize(),EU.crossVectors(OR,Jme).normalize(),OR.setLength(this._moveCurr.y-this._movePrev.y),EU.setLength(this._moveCurr.x-this._movePrev.x),IR.copy(OR.add(EU)),SU.crossVectors(IR,this._eye).normalize(),e*=this.rotateSpeed,hb.setFromAxisAngle(SU,e),this._eye.applyQuaternion(hb),this.object.up.applyQuaternion(hb),this._lastAxis.copy(SU),this._lastAngle=e):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),hb.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(hb),this.object.up.applyQuaternion(hb)),this._movePrev.copy(this._moveCurr)}_zoomCamera(){let e;this.state===fi.TOUCH_ZOOM_PAN?(e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=LO.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,e!==1&&e>0&&(this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=LO.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}_getMouseOnScreen(e,r){return PR.set((e-this.screen.left)/this.screen.width,(r-this.screen.top)/this.screen.height),PR}_getMouseOnCircle(e,r){return PR.set((e-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-r))/this.screen.width),PR}_addPointer(e){this._pointers.push(e)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r].pointerId==e.pointerId){this._pointers.splice(r,1);return}}_trackPointer(e){let r=this._pointerPositions[e.pointerId];r===void 0&&(r=new Nt,this._pointerPositions[e.pointerId]=r),r.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const r=e.pointerId===this._pointers[0].pointerId?this._pointers[1]:this._pointers[0];return this._pointerPositions[r.pointerId]}_checkDistances(){(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}}function J9t(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n))}function e7t(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function t7t(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchEnd(n):this._onMouseUp(),this._removePointer(n),this._pointers.length===0&&(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp)))}function n7t(n){this._removePointer(n)}function r7t(){this.enabled!==!1&&(this.keyState=fi.NONE,window.addEventListener("keydown",this._onKeyDown))}function i7t(n){this.enabled!==!1&&(window.removeEventListener("keydown",this._onKeyDown),this.keyState===fi.NONE&&(n.code===this.keys[fi.ROTATE]&&!this.noRotate?this.keyState=fi.ROTATE:n.code===this.keys[fi.ZOOM]&&!this.noZoom?this.keyState=fi.ZOOM:n.code===this.keys[fi.PAN]&&!this.noPan&&(this.keyState=fi.PAN)))}function a7t(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case gs.DOLLY:this.state=fi.ZOOM;break;case gs.ROTATE:this.state=fi.ROTATE;break;case gs.PAN:this.state=fi.PAN;break;default:this.state=fi.NONE}const r=this.keyState!==fi.NONE?this.keyState:this.state;r===fi.ROTATE&&!this.noRotate?(this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY)),this._movePrev.copy(this._moveCurr)):r===fi.ZOOM&&!this.noZoom?(this._zoomStart.copy(this._getMouseOnScreen(n.pageX,n.pageY)),this._zoomEnd.copy(this._zoomStart)):r===fi.PAN&&!this.noPan&&(this._panStart.copy(this._getMouseOnScreen(n.pageX,n.pageY)),this._panEnd.copy(this._panStart)),this.dispatchEvent(ZZ)}function o7t(n){const e=this.keyState!==fi.NONE?this.keyState:this.state;e===fi.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY))):e===fi.ZOOM&&!this.noZoom?this._zoomEnd.copy(this._getMouseOnScreen(n.pageX,n.pageY)):e===fi.PAN&&!this.noPan&&this._panEnd.copy(this._getMouseOnScreen(n.pageX,n.pageY))}function s7t(){this.state=fi.NONE,this.dispatchEvent(QZ)}function l7t(n){if(this.enabled!==!1&&this.noZoom!==!0){switch(n.preventDefault(),n.deltaMode){case 2:this._zoomStart.y-=n.deltaY*.025;break;case 1:this._zoomStart.y-=n.deltaY*.01;break;default:this._zoomStart.y-=n.deltaY*25e-5;break}this.dispatchEvent(ZZ),this.dispatchEvent(QZ)}}function c7t(n){this.enabled!==!1&&n.preventDefault()}function u7t(n){switch(this._trackPointer(n),this._pointers.length){case 1:this.state=fi.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(this._pointers[0].pageX,this._pointers[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this.state=fi.TOUCH_ZOOM_PAN;const e=this._pointers[0].pageX-this._pointers[1].pageX,r=this._pointers[0].pageY-this._pointers[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+r*r);const i=(this._pointers[0].pageX+this._pointers[1].pageX)/2,a=(this._pointers[0].pageY+this._pointers[1].pageY)/2;this._panStart.copy(this._getMouseOnScreen(i,a)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(ZZ)}function d7t(n){switch(this._trackPointer(n),this._pointers.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY));break;default:const e=this._getSecondPointerPosition(n),r=n.pageX-e.x,i=n.pageY-e.y;this._touchZoomDistanceEnd=Math.sqrt(r*r+i*i);const a=(n.pageX+e.x)/2,o=(n.pageY+e.y)/2;this._panEnd.copy(this._getMouseOnScreen(a,o));break}}function f7t(n){switch(this._pointers.length){case 0:this.state=fi.NONE;break;case 1:this.state=fi.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(n.pageX,n.pageY)),this._movePrev.copy(this._moveCurr);break;case 2:this.state=fi.TOUCH_ZOOM_PAN;for(let e=0;e<this._pointers.length;e++)if(this._pointers[e].pointerId!==n.pointerId){const r=this._pointerPositions[this._pointers[e].pointerId];this._moveCurr.copy(this._getMouseOnCircle(r.x,r.y)),this._movePrev.copy(this._moveCurr);break}break}this.dispatchEvent(QZ)}const eve={type:"change"},JZ={type:"start"},QPe={type:"end"},DR=new PL,tve=new Pd,h7t=Math.cos(70*LO.DEG2RAD),Eo=new ge,Ol=2*Math.PI,Oi={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},CU=1e-6;class p7t extends FL{constructor(e,r=null){super(e,r),this.state=Oi.NONE,this.enabled=!0,this.target=new ge,this.cursor=new ge,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:gs.ROTATE,MIDDLE:gs.DOLLY,RIGHT:gs.PAN},this.touches={ONE:pp.ROTATE,TWO:pp.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new ge,this._lastQuaternion=new ah,this._lastTargetPosition=new ge,this._quat=new ah().setFromUnitVectors(e.up,new ge(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new $pe,this._sphericalDelta=new $pe,this._scale=1,this._panOffset=new ge,this._rotateStart=new Nt,this._rotateEnd=new Nt,this._rotateDelta=new Nt,this._panStart=new Nt,this._panEnd=new Nt,this._panDelta=new Nt,this._dollyStart=new Nt,this._dollyEnd=new Nt,this._dollyDelta=new Nt,this._dollyDirection=new ge,this._mouse=new Nt,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=m7t.bind(this),this._onPointerDown=g7t.bind(this),this._onPointerUp=v7t.bind(this),this._onContextMenu=E7t.bind(this),this._onMouseWheel=x7t.bind(this),this._onKeyDown=_7t.bind(this),this._onTouchStart=w7t.bind(this),this._onTouchMove=S7t.bind(this),this._onMouseDown=y7t.bind(this),this._onMouseMove=b7t.bind(this),this._interceptControlDown=C7t.bind(this),this._interceptControlUp=M7t.bind(this),this.domElement!==null&&this.connect(),this.update()}connect(){this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(eve),this.update(),this.state=Oi.NONE}update(e=null){const r=this.object.position;Eo.copy(r).sub(this.target),Eo.applyQuaternion(this._quat),this._spherical.setFromVector3(Eo),this.autoRotate&&this.state===Oi.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let i=this.minAzimuthAngle,a=this.maxAzimuthAngle;isFinite(i)&&isFinite(a)&&(i<-Math.PI?i+=Ol:i>Math.PI&&(i-=Ol),a<-Math.PI?a+=Ol:a>Math.PI&&(a-=Ol),i<=a?this._spherical.theta=Math.max(i,Math.min(a,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(i+a)/2?Math.max(i,this._spherical.theta):Math.min(a,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let o=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{const s=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),o=s!=this._spherical.radius}if(Eo.setFromSpherical(this._spherical),Eo.applyQuaternion(this._quatInverse),r.copy(this.target).add(Eo),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let s=null;if(this.object.isPerspectiveCamera){const l=Eo.length();s=this._clampDistance(l*this._scale);const c=l-s;this.object.position.addScaledVector(this._dollyDirection,c),this.object.updateMatrixWorld(),o=!!c}else if(this.object.isOrthographicCamera){const l=new ge(this._mouse.x,this._mouse.y,0);l.unproject(this.object);const c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),o=c!==this.object.zoom;const u=new ge(this._mouse.x,this._mouse.y,0);u.unproject(this.object),this.object.position.sub(u).add(l),this.object.updateMatrixWorld(),s=Eo.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;s!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(s).add(this.object.position):(DR.origin.copy(this.object.position),DR.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(DR.direction))<h7t?this.object.lookAt(this.target):(tve.setFromNormalAndCoplanarPoint(this.object.up,this.target),DR.intersectPlane(tve,this.target))))}else if(this.object.isOrthographicCamera){const s=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),s!==this.object.zoom&&(this.object.updateProjectionMatrix(),o=!0)}return this._scale=1,this._performCursorZoom=!1,o||this._lastPosition.distanceToSquared(this.object.position)>CU||8*(1-this._lastQuaternion.dot(this.object.quaternion))>CU||this._lastTargetPosition.distanceToSquared(this.target)>CU?(this.dispatchEvent(eve),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(e){return e!==null?Ol/60*this.autoRotateSpeed*e:Ol/60/60*this.autoRotateSpeed}_getZoomScale(e){const r=Math.abs(e*.01);return Math.pow(.95,this.zoomSpeed*r)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,r){Eo.setFromMatrixColumn(r,0),Eo.multiplyScalar(-e),this._panOffset.add(Eo)}_panUp(e,r){this.screenSpacePanning===!0?Eo.setFromMatrixColumn(r,1):(Eo.setFromMatrixColumn(r,0),Eo.crossVectors(this.object.up,Eo)),Eo.multiplyScalar(e),this._panOffset.add(Eo)}_pan(e,r){const i=this.domElement;if(this.object.isPerspectiveCamera){const a=this.object.position;Eo.copy(a).sub(this.target);let o=Eo.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*o/i.clientHeight,this.object.matrix),this._panUp(2*r*o/i.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrix),this._panUp(r*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,r){if(!this.zoomToCursor)return;this._performCursorZoom=!0;const i=this.domElement.getBoundingClientRect(),a=e-i.left,o=r-i.top,s=i.width,l=i.height;this._mouse.x=a/s*2-1,this._mouse.y=-(o/l)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(Ol*this._rotateDelta.x/r.clientHeight),this._rotateUp(Ol*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let r=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(Ol*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),r=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-Ol*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),r=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(Ol*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),r=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-Ol*this.rotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),r=!0;break}r&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(this._pointers.length===1)this._rotateStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),a=.5*(e.pageY+r.y);this._rotateStart.set(i,a)}}_handleTouchStartPan(e){if(this._pointers.length===1)this._panStart.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),a=.5*(e.pageY+r.y);this._panStart.set(i,a)}}_handleTouchStartDolly(e){const r=this._getSecondPointerPosition(e),i=e.pageX-r.x,a=e.pageY-r.y,o=Math.sqrt(i*i+a*a);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(this._pointers.length==1)this._rotateEnd.set(e.pageX,e.pageY);else{const i=this._getSecondPointerPosition(e),a=.5*(e.pageX+i.x),o=.5*(e.pageY+i.y);this._rotateEnd.set(a,o)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);const r=this.domElement;this._rotateLeft(Ol*this._rotateDelta.x/r.clientHeight),this._rotateUp(Ol*this._rotateDelta.y/r.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(this._pointers.length===1)this._panEnd.set(e.pageX,e.pageY);else{const r=this._getSecondPointerPosition(e),i=.5*(e.pageX+r.x),a=.5*(e.pageY+r.y);this._panEnd.set(i,a)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){const r=this._getSecondPointerPosition(e),i=e.pageX-r.x,a=e.pageY-r.y,o=Math.sqrt(i*i+a*a);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);const s=(e.pageX+r.x)*.5,l=(e.pageY+r.y)*.5;this._updateZoomParameters(s,l)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId){this._pointers.splice(r,1);return}}_isTrackingPointer(e){for(let r=0;r<this._pointers.length;r++)if(this._pointers[r]==e.pointerId)return!0;return!1}_trackPointer(e){let r=this._pointerPositions[e.pointerId];r===void 0&&(r=new Nt,this._pointerPositions[e.pointerId]=r),r.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){const r=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[r]}_customWheelEvent(e){const r=e.deltaMode,i={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(r){case 1:i.deltaY*=16;break;case 2:i.deltaY*=100;break}return e.ctrlKey&&!this._controlActive&&(i.deltaY*=10),i}}function g7t(n){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(n)&&(this._addPointer(n),n.pointerType==="touch"?this._onTouchStart(n):this._onMouseDown(n)))}function m7t(n){this.enabled!==!1&&(n.pointerType==="touch"?this._onTouchMove(n):this._onMouseMove(n))}function v7t(n){switch(this._removePointer(n),this._pointers.length){case 0:this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(QPe),this.state=Oi.NONE;break;case 1:const e=this._pointers[0],r=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:r.x,pageY:r.y});break}}function y7t(n){let e;switch(n.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case gs.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(n),this.state=Oi.DOLLY;break;case gs.ROTATE:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Oi.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Oi.ROTATE}break;case gs.PAN:if(n.ctrlKey||n.metaKey||n.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(n),this.state=Oi.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(n),this.state=Oi.PAN}break;default:this.state=Oi.NONE}this.state!==Oi.NONE&&this.dispatchEvent(JZ)}function b7t(n){switch(this.state){case Oi.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(n);break;case Oi.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(n);break;case Oi.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(n);break}}function x7t(n){this.enabled===!1||this.enableZoom===!1||this.state!==Oi.NONE||(n.preventDefault(),this.dispatchEvent(JZ),this._handleMouseWheel(this._customWheelEvent(n)),this.dispatchEvent(QPe))}function _7t(n){this.enabled!==!1&&this._handleKeyDown(n)}function w7t(n){switch(this._trackPointer(n),this._pointers.length){case 1:switch(this.touches.ONE){case pp.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(n),this.state=Oi.TOUCH_ROTATE;break;case pp.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(n),this.state=Oi.TOUCH_PAN;break;default:this.state=Oi.NONE}break;case 2:switch(this.touches.TWO){case pp.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(n),this.state=Oi.TOUCH_DOLLY_PAN;break;case pp.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(n),this.state=Oi.TOUCH_DOLLY_ROTATE;break;default:this.state=Oi.NONE}break;default:this.state=Oi.NONE}this.state!==Oi.NONE&&this.dispatchEvent(JZ)}function S7t(n){switch(this._trackPointer(n),this.state){case Oi.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(n),this.update();break;case Oi.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(n),this.update();break;case Oi.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(n),this.update();break;case Oi.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(n),this.update();break;default:this.state=Oi.NONE}}function E7t(n){this.enabled!==!1&&n.preventDefault()}function C7t(n){n.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function M7t(n){n.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}const T7t={type:"change"},nve=1e-6,rve=new ah;class A7t extends FL{constructor(e,r=null){super(e,r),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this._moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this._moveVector=new ge(0,0,0),this._rotationVector=new ge(0,0,0),this._lastQuaternion=new ah,this._lastPosition=new ge,this._status=0,this._onKeyDown=R7t.bind(this),this._onKeyUp=P7t.bind(this),this._onPointerMove=O7t.bind(this),this._onPointerDown=N7t.bind(this),this._onPointerUp=I7t.bind(this),this._onPointerCancel=D7t.bind(this),this._onContextMenu=L7t.bind(this),r!==null&&this.connect()}connect(){window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu)}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu)}dispose(){this.disconnect()}update(e){if(this.enabled===!1)return;const r=this.object,i=e*this.movementSpeed,a=e*this.rollSpeed;r.translateX(this._moveVector.x*i),r.translateY(this._moveVector.y*i),r.translateZ(this._moveVector.z*i),rve.set(this._rotationVector.x*a,this._rotationVector.y*a,this._rotationVector.z*a,1).normalize(),r.quaternion.multiply(rve),(this._lastPosition.distanceToSquared(r.position)>nve||8*(1-this._lastQuaternion.dot(r.quaternion))>nve)&&(this.dispatchEvent(T7t),this._lastQuaternion.copy(r.quaternion),this._lastPosition.copy(r.position))}_updateMovementVector(){const e=this._moveState.forward||this.autoForward&&!this._moveState.back?1:0;this._moveVector.x=-this._moveState.left+this._moveState.right,this._moveVector.y=-this._moveState.down+this._moveState.up,this._moveVector.z=-e+this._moveState.back}_updateRotationVector(){this._rotationVector.x=-this._moveState.pitchDown+this._moveState.pitchUp,this._rotationVector.y=-this._moveState.yawRight+this._moveState.yawLeft,this._rotationVector.z=-this._moveState.rollRight+this._moveState.rollLeft}_getContainerDimensions(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}}function R7t(n){if(!(n.altKey||this.enabled===!1)){switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this._moveState.forward=1;break;case"KeyS":this._moveState.back=1;break;case"KeyA":this._moveState.left=1;break;case"KeyD":this._moveState.right=1;break;case"KeyR":this._moveState.up=1;break;case"KeyF":this._moveState.down=1;break;case"ArrowUp":this._moveState.pitchUp=1;break;case"ArrowDown":this._moveState.pitchDown=1;break;case"ArrowLeft":this._moveState.yawLeft=1;break;case"ArrowRight":this._moveState.yawRight=1;break;case"KeyQ":this._moveState.rollLeft=1;break;case"KeyE":this._moveState.rollRight=1;break}this._updateMovementVector(),this._updateRotationVector()}}function P7t(n){if(this.enabled!==!1){switch(n.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this._moveState.forward=0;break;case"KeyS":this._moveState.back=0;break;case"KeyA":this._moveState.left=0;break;case"KeyD":this._moveState.right=0;break;case"KeyR":this._moveState.up=0;break;case"KeyF":this._moveState.down=0;break;case"ArrowUp":this._moveState.pitchUp=0;break;case"ArrowDown":this._moveState.pitchDown=0;break;case"ArrowLeft":this._moveState.yawLeft=0;break;case"ArrowRight":this._moveState.yawRight=0;break;case"KeyQ":this._moveState.rollLeft=0;break;case"KeyE":this._moveState.rollRight=0;break}this._updateMovementVector(),this._updateRotationVector()}}function N7t(n){if(this.enabled!==!1)if(this.dragToLook)this._status++;else{switch(n.button){case 0:this._moveState.forward=1;break;case 2:this._moveState.back=1;break}this._updateMovementVector()}}function O7t(n){if(this.enabled!==!1&&(!this.dragToLook||this._status>0)){const e=this._getContainerDimensions(),r=e.size[0]/2,i=e.size[1]/2;this._moveState.yawLeft=-(n.pageX-e.offset[0]-r)/r,this._moveState.pitchDown=(n.pageY-e.offset[1]-i)/i,this._updateRotationVector()}}function I7t(n){if(this.enabled!==!1){if(this.dragToLook)this._status--,this._moveState.yawLeft=this._moveState.pitchDown=0;else{switch(n.button){case 0:this._moveState.forward=0;break;case 2:this._moveState.back=0;break}this._updateMovementVector()}this._updateRotationVector()}}function D7t(){this.enabled!==!1&&(this.dragToLook?(this._status=0,this._moveState.yawLeft=this._moveState.pitchDown=0):(this._moveState.forward=0,this._moveState.back=0,this._updateMovementVector()),this._updateRotationVector())}function L7t(n){this.enabled!==!1&&n.preventDefault()}const k7t={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class t6{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const F7t=new qM(-1,1,1,-1,0,1);class $7t extends Qs{constructor(){super(),this.setAttribute("position",new Qa([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Qa([0,2,0,0,2,0],2))}}const B7t=new $7t;class z7t{constructor(e){this._mesh=new ko(B7t,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,F7t)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class U7t extends t6{constructor(e,r){super(),this.textureID=r!==void 0?r:"tDiffuse",e instanceof oh?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=sAe.clone(e.uniforms),this.material=new oh({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new z7t(this.material)}render(e,r,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class ive extends t6{constructor(e,r){super(),this.scene=e,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,r,i){const a=e.getContext(),o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);let s,l;this.inverse?(s=0,l=1):(s=1,l=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),o.buffers.stencil.setFunc(a.ALWAYS,s,4294967295),o.buffers.stencil.setClear(l),o.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.color.setMask(!0),o.buffers.depth.setMask(!0),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(a.EQUAL,1,4294967295),o.buffers.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),o.buffers.stencil.setLocked(!0)}}class V7t extends t6{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class G7t{constructor(e,r){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),r===void 0){const i=e.getSize(new Nt);this._width=i.width,this._height=i.height,r=new Jm(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:vl}),r.texture.name="EffectComposer.rt1"}else this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new U7t(k7t),this.copyPass.material.blending=ml,this.clock=new _Ae}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,r){this.passes.splice(r,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const r=this.passes.indexOf(e);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(e){for(let r=e+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const r=this.renderer.getRenderTarget();let i=!1;for(let a=0,o=this.passes.length;a<o;a++){const s=this.passes[a];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(a),s.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),s.needsSwap){if(i){const l=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),c.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}ive!==void 0&&(s instanceof ive?i=!0:s instanceof V7t&&(i=!1))}}this.renderer.setRenderTarget(r)}reset(e){if(e===void 0){const r=this.renderer.getSize(new Nt);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,r){this._width=e,this._height=r;const i=this._width*this._pixelRatio,a=this._height*this._pixelRatio;this.renderTarget1.setSize(i,a),this.renderTarget2.setSize(i,a);for(let o=0;o<this.passes.length;o++)this.passes[o].setSize(i,a)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class j7t extends t6{constructor(e,r,i=null,a=null,o=null){super(),this.scene=e,this.camera=r,this.overrideMaterial=i,this.clearColor=a,this.clearAlpha=o,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Tn}render(e,r,i){const a=e.autoClear;e.autoClear=!1;let o,s;this.overrideMaterial!==null&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),this.clearAlpha!==null&&(o=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(o),this.overrideMaterial!==null&&(this.scene.overrideMaterial=s),e.autoClear=a}}function H7t(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Lx(n,e)}var Wf=function(n){H7t(e,n);function e(r){var i;return i=n.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+r+" for more information.")||this,Cr(i)}return e}(FN(Error));function MU(n){return Math.round(n*255)}function W7t(n,e,r){return MU(n)+","+MU(e)+","+MU(r)}function QO(n,e,r,i){if(i===void 0&&(i=W7t),e===0)return i(r,r,r);var a=(n%360+360)%360/60,o=(1-Math.abs(2*r-1))*e,s=o*(1-Math.abs(a%2-1)),l=0,c=0,u=0;a>=0&&a<1?(l=o,c=s):a>=1&&a<2?(l=s,c=o):a>=2&&a<3?(c=o,u=s):a>=3&&a<4?(c=s,u=o):a>=4&&a<5?(l=s,u=o):a>=5&&a<6&&(l=o,u=s);var d=r-o/2,f=l+d,h=c+d,p=u+d;return i(f,h,p)}var ave={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};function q7t(n){if(typeof n!="string")return n;var e=n.toLowerCase();return ave[e]?"#"+ave[e]:n}var Y7t=/^#[a-fA-F0-9]{6}$/,X7t=/^#[a-fA-F0-9]{8}$/,K7t=/^#[a-fA-F0-9]{3}$/,Z7t=/^#[a-fA-F0-9]{4}$/,TU=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,Q7t=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,J7t=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,ezt=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function x_(n){if(typeof n!="string")throw new Wf(3);var e=q7t(n);if(e.match(Y7t))return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16)};if(e.match(X7t)){var r=parseFloat((parseInt(""+e[7]+e[8],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[2],16),green:parseInt(""+e[3]+e[4],16),blue:parseInt(""+e[5]+e[6],16),alpha:r}}if(e.match(K7t))return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16)};if(e.match(Z7t)){var i=parseFloat((parseInt(""+e[4]+e[4],16)/255).toFixed(2));return{red:parseInt(""+e[1]+e[1],16),green:parseInt(""+e[2]+e[2],16),blue:parseInt(""+e[3]+e[3],16),alpha:i}}var a=TU.exec(e);if(a)return{red:parseInt(""+a[1],10),green:parseInt(""+a[2],10),blue:parseInt(""+a[3],10)};var o=Q7t.exec(e.substring(0,50));if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10),alpha:parseFloat(""+o[4])>1?parseFloat(""+o[4])/100:parseFloat(""+o[4])};var s=J7t.exec(e);if(s){var l=parseInt(""+s[1],10),c=parseInt(""+s[2],10)/100,u=parseInt(""+s[3],10)/100,d="rgb("+QO(l,c,u)+")",f=TU.exec(d);if(!f)throw new Wf(4,e,d);return{red:parseInt(""+f[1],10),green:parseInt(""+f[2],10),blue:parseInt(""+f[3],10)}}var h=ezt.exec(e.substring(0,50));if(h){var p=parseInt(""+h[1],10),g=parseInt(""+h[2],10)/100,m=parseInt(""+h[3],10)/100,v="rgb("+QO(p,g,m)+")",y=TU.exec(v);if(!y)throw new Wf(4,e,v);return{red:parseInt(""+y[1],10),green:parseInt(""+y[2],10),blue:parseInt(""+y[3],10),alpha:parseFloat(""+h[4])>1?parseFloat(""+h[4])/100:parseFloat(""+h[4])}}throw new Wf(5)}function tzt(n){var e=n.red/255,r=n.green/255,i=n.blue/255,a=Math.max(e,r,i),o=Math.min(e,r,i),s=(a+o)/2;if(a===o)return n.alpha!==void 0?{hue:0,saturation:0,lightness:s,alpha:n.alpha}:{hue:0,saturation:0,lightness:s};var l,c=a-o,u=s>.5?c/(2-a-o):c/(a+o);switch(a){case e:l=(r-i)/c+(r<i?6:0);break;case r:l=(i-e)/c+2;break;default:l=(e-r)/c+4;break}return l*=60,n.alpha!==void 0?{hue:l,saturation:u,lightness:s,alpha:n.alpha}:{hue:l,saturation:u,lightness:s}}function _v(n){return tzt(x_(n))}var nzt=function(e){return e.length===7&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},nW=nzt;function r0(n){var e=n.toString(16);return e.length===1?"0"+e:e}function AU(n){return r0(Math.round(n*255))}function rzt(n,e,r){return nW("#"+AU(n)+AU(e)+AU(r))}function JPe(n,e,r){return QO(n,e,r,rzt)}function izt(n,e,r){if(typeof n=="object"&&e===void 0&&r===void 0)return JPe(n.hue,n.saturation,n.lightness);throw new Wf(1)}function azt(n,e,r,i){if(typeof n=="object"&&e===void 0&&r===void 0&&i===void 0)return n.alpha>=1?JPe(n.hue,n.saturation,n.lightness):"rgba("+QO(n.hue,n.saturation,n.lightness)+","+n.alpha+")";throw new Wf(2)}function eNe(n,e,r){if(typeof n=="number"&&typeof e=="number"&&typeof r=="number")return nW("#"+r0(n)+r0(e)+r0(r));if(typeof n=="object"&&e===void 0&&r===void 0)return nW("#"+r0(n.red)+r0(n.green)+r0(n.blue));throw new Wf(6)}function n6(n,e,r,i){if(typeof n=="object"&&e===void 0&&r===void 0&&i===void 0)return n.alpha>=1?eNe(n.red,n.green,n.blue):"rgba("+n.red+","+n.green+","+n.blue+","+n.alpha+")";throw new Wf(7)}var ozt=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},szt=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&typeof e.alpha=="number"},lzt=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&(typeof e.alpha!="number"||typeof e.alpha>"u")},czt=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&typeof e.alpha=="number"};function wv(n){if(typeof n!="object")throw new Wf(8);if(szt(n))return n6(n);if(ozt(n))return eNe(n);if(czt(n))return azt(n);if(lzt(n))return izt(n);throw new Wf(8)}function tNe(n,e,r){return function(){var a=r.concat(Array.prototype.slice.call(arguments));return a.length>=e?n.apply(this,a):tNe(n,e,a)}}function eu(n){return tNe(n,n.length,[])}function uzt(n,e){if(e==="transparent")return e;var r=_v(e);return wv(Mt({},r,{hue:r.hue+parseFloat(n)}))}eu(uzt);function vw(n,e,r){return Math.max(n,Math.min(e,r))}function dzt(n,e){if(e==="transparent")return e;var r=_v(e);return wv(Mt({},r,{lightness:vw(0,1,r.lightness-parseFloat(n))}))}eu(dzt);function fzt(n,e){if(e==="transparent")return e;var r=_v(e);return wv(Mt({},r,{saturation:vw(0,1,r.saturation-parseFloat(n))}))}eu(fzt);function hzt(n,e){if(e==="transparent")return e;var r=_v(e);return wv(Mt({},r,{lightness:vw(0,1,r.lightness+parseFloat(n))}))}eu(hzt);function pzt(n,e,r){if(e==="transparent")return r;if(r==="transparent")return e;if(n===0)return r;var i=x_(e),a=Mt({},i,{alpha:typeof i.alpha=="number"?i.alpha:1}),o=x_(r),s=Mt({},o,{alpha:typeof o.alpha=="number"?o.alpha:1}),l=a.alpha-s.alpha,c=parseFloat(n)*2-1,u=c*l===-1?c:c+l,d=1+c*l,f=(u/d+1)/2,h=1-f,p={red:Math.floor(a.red*f+s.red*h),green:Math.floor(a.green*f+s.green*h),blue:Math.floor(a.blue*f+s.blue*h),alpha:a.alpha*parseFloat(n)+s.alpha*(1-parseFloat(n))};return n6(p)}var gzt=eu(pzt),nNe=gzt;function mzt(n,e){if(e==="transparent")return e;var r=x_(e),i=typeof r.alpha=="number"?r.alpha:1,a=Mt({},r,{alpha:vw(0,1,(i*100+parseFloat(n)*100)/100)});return n6(a)}var vzt=eu(mzt),yzt=vzt;function bzt(n,e){if(e==="transparent")return e;var r=_v(e);return wv(Mt({},r,{saturation:vw(0,1,r.saturation+parseFloat(n))}))}eu(bzt);function xzt(n,e){return e==="transparent"?e:wv(Mt({},_v(e),{hue:parseFloat(n)}))}eu(xzt);function _zt(n,e){return e==="transparent"?e:wv(Mt({},_v(e),{lightness:parseFloat(n)}))}eu(_zt);function wzt(n,e){return e==="transparent"?e:wv(Mt({},_v(e),{saturation:parseFloat(n)}))}eu(wzt);function Szt(n,e){return e==="transparent"?e:nNe(parseFloat(n),"rgb(0, 0, 0)",e)}eu(Szt);function Ezt(n,e){return e==="transparent"?e:nNe(parseFloat(n),"rgb(255, 255, 255)",e)}eu(Ezt);function Czt(n,e){if(e==="transparent")return e;var r=x_(e),i=typeof r.alpha=="number"?r.alpha:1,a=Mt({},r,{alpha:vw(0,1,+(i*100-parseFloat(n)*100).toFixed(2)/100)});return n6(a)}eu(Czt);var Q0=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return n},Out:function(n){return n},InOut:function(n){return n}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return .5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return n===0?0:Math.pow(1024,n-1)},Out:function(n){return n===1?1:1-Math.pow(2,-10*n)},InOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return n===0?0:n===1?1:-Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI)},Out:function(n){return n===0?0:n===1?1:Math.pow(2,-10*n)*Math.sin((n-.1)*5*Math.PI)+1},InOut:function(n){return n===0?0:n===1?1:(n*=2,n<1?-.5*Math.pow(2,10*(n-1))*Math.sin((n-1.1)*5*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin((n-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(n){var e=1.70158;return n===1?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return n===0?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-Q0.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?Q0.Bounce.In(n*2)*.5:Q0.Bounce.Out(n*2-1)*.5+.5}}),generatePow:function(n){return n===void 0&&(n=4),n=n<Number.EPSILON?Number.EPSILON:n,n=n>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(e*2,n)/2:(1-Math.pow(2-e*2,n))/2+.5}}}}),E2=function(){return performance.now()},rNe=function(){function n(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(r){return e._tweens[r]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];(e=s._group)===null||e===void 0||e.remove(s),s._group=this,this._tweens[s.getId()]=s,this._tweensAddedDuringUpdate[s.getId()]=s}},n.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=0,a=e;i<a.length;i++){var o=a[i];o._group=void 0,delete this._tweens[o.getId()],delete this._tweensAddedDuringUpdate[o.getId()]}},n.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},n.prototype.update=function(e,r){e===void 0&&(e=E2()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var a=0;a<i.length;a++){var o=this._tweens[i[a]],s=!r;o&&o.update(e,s)===!1&&!r&&this.remove(o)}i=Object.keys(this._tweensAddedDuringUpdate)}},n}(),rW={Linear:function(n,e){var r=n.length-1,i=r*e,a=Math.floor(i),o=rW.Utils.Linear;return e<0?o(n[0],n[1],i):e>1?o(n[r],n[r-1],r-i):o(n[a],n[a+1>r?r:a+1],i-a)},Utils:{Linear:function(n,e,r){return(e-n)*r+n}}},iNe=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),iW=new rNe,ove=function(){function n(e,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Q0.Linear.None,this._interpolationFunction=rW.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=iNe.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=iW,iW.add(this))}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.getDuration=function(){return this._duration},n.prototype.to=function(e,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},n.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},n.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,r){if(e===void 0&&(e=E2()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var a={};for(var o in this._valuesEnd)a[o]=this._valuesEnd[o];this._valuesEnd=a}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,r,i,a,o){for(var s in i){var l=e[s],c=Array.isArray(l),u=c?"array":typeof l,d=!c&&Array.isArray(i[s]);if(!(u==="undefined"||u==="function")){if(d){var f=i[s];if(f.length===0)continue;for(var h=[l],p=0,g=f.length;p<g;p+=1){var m=this._handleRelativeValue(l,f[p]);if(isNaN(m)){d=!1,console.warn("Found invalid interpolation list. Skipping.");break}h.push(m)}d&&(i[s]=h)}if((u==="object"||c)&&l&&!d){r[s]=c?[]:{};var v=l;for(var y in v)r[s][y]=v[y];a[s]=c?[]:{};var f=i[s];if(!this._isDynamic){var b={};for(var y in f)b[y]=f[y];i[s]=f=b}this._setupProperties(v,r[s],f,a[s],o)}else(typeof r[s]>"u"||o)&&(r[s]=l),c||(r[s]*=1),d?a[s]=i[s].slice().reverse():a[s]=r[s]||0}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},n.prototype.pause=function(e){return e===void 0&&(e=E2()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this)},n.prototype.resume=function(e){return e===void 0&&(e=E2()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this)},n.prototype.stopChainedTweens=function(){for(var e=0,r=this._chainedTweens.length;e<r;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return e?(e.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},n.prototype.remove=function(){var e;return(e=this._group)===null||e===void 0||e.remove(this),this},n.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return e===void 0&&(e=Q0.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return e===void 0&&(e=rW.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,r){var i=this,a;if(e===void 0&&(e=E2()),r===void 0&&(r=n.autoStartOnUpdate),this._isPaused)return!0;var o;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(e,!0);else return!1;if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=e-this._startTime,l=this._duration+((a=this._repeatDelayTime)!==null&&a!==void 0?a:this._delayTime),c=this._duration+this._repeat*l,u=function(){if(i._duration===0||s>c)return 1;var m=Math.trunc(s/l),v=s-m*l,y=Math.min(v/i._duration,1);return y===0&&s===i._duration?1:y},d=u(),f=this._easingFunction(d);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,f),this._onUpdateCallback&&this._onUpdateCallback(this._object,d),this._duration===0||s>=this._duration)if(this._repeat>0){var h=Math.min(Math.trunc((s-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=h);for(o in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[o]=="string"&&(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*h,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,g=this._chainedTweens.length;p<g;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,r,i,a){for(var o in i)if(r[o]!==void 0){var s=r[o]||0,l=i[o],c=Array.isArray(e[o]),u=Array.isArray(l),d=!c&&u;d?e[o]=this._interpolationFunction(l,a):typeof l=="object"&&l?this._updateProperties(e[o],s,l,a):(l=this._handleRelativeValue(s,l),typeof l=="number"&&(e[o]=s+(l-s)*a))}},n.prototype._handleRelativeValue=function(e,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?e+parseFloat(r):parseFloat(r)},n.prototype._swapEndStartRepeatValues=function(e){var r=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=r},n.autoStartOnUpdate=!1,n}();iNe.nextId;var uh=iW;uh.getAll.bind(uh);uh.removeAll.bind(uh);uh.add.bind(uh);uh.remove.bind(uh);uh.update.bind(uh);var aW="http://www.w3.org/1999/xhtml";const sve={svg:"http://www.w3.org/2000/svg",xhtml:aW,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function aNe(n){var e=n+="",r=e.indexOf(":");return r>=0&&(e=n.slice(0,r))!=="xmlns"&&(n=n.slice(r+1)),sve.hasOwnProperty(e)?{space:sve[e],local:n}:n}function Mzt(n){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===aW&&e.documentElement.namespaceURI===aW?e.createElement(n):e.createElementNS(r,n)}}function Tzt(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function oNe(n){var e=aNe(n);return(e.local?Tzt:Mzt)(e)}function Azt(){}function sNe(n){return n==null?Azt:function(){return this.querySelector(n)}}function Rzt(n){typeof n!="function"&&(n=sNe(n));for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a)for(var o=e[a],s=o.length,l=i[a]=new Array(s),c,u,d=0;d<s;++d)(c=o[d])&&(u=n.call(c,c.__data__,d,o))&&("__data__"in c&&(u.__data__=c.__data__),l[d]=u);return new Xu(i,this._parents)}function Pzt(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function Nzt(){return[]}function Ozt(n){return n==null?Nzt:function(){return this.querySelectorAll(n)}}function Izt(n){return function(){return Pzt(n.apply(this,arguments))}}function Dzt(n){typeof n=="function"?n=Izt(n):n=Ozt(n);for(var e=this._groups,r=e.length,i=[],a=[],o=0;o<r;++o)for(var s=e[o],l=s.length,c,u=0;u<l;++u)(c=s[u])&&(i.push(n.call(c,c.__data__,u,s)),a.push(c));return new Xu(i,a)}function Lzt(n){return function(){return this.matches(n)}}function lNe(n){return function(e){return e.matches(n)}}var kzt=Array.prototype.find;function Fzt(n){return function(){return kzt.call(this.children,n)}}function $zt(){return this.firstElementChild}function Bzt(n){return this.select(n==null?$zt:Fzt(typeof n=="function"?n:lNe(n)))}var zzt=Array.prototype.filter;function Uzt(){return Array.from(this.children)}function Vzt(n){return function(){return zzt.call(this.children,n)}}function Gzt(n){return this.selectAll(n==null?Uzt:Vzt(typeof n=="function"?n:lNe(n)))}function jzt(n){typeof n!="function"&&(n=Lzt(n));for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a)for(var o=e[a],s=o.length,l=i[a]=[],c,u=0;u<s;++u)(c=o[u])&&n.call(c,c.__data__,u,o)&&l.push(c);return new Xu(i,this._parents)}function cNe(n){return new Array(n.length)}function Hzt(){return new Xu(this._enter||this._groups.map(cNe),this._parents)}function JO(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}JO.prototype={constructor:JO,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function Wzt(n){return function(){return n}}function qzt(n,e,r,i,a,o){for(var s=0,l,c=e.length,u=o.length;s<u;++s)(l=e[s])?(l.__data__=o[s],i[s]=l):r[s]=new JO(n,o[s]);for(;s<c;++s)(l=e[s])&&(a[s]=l)}function Yzt(n,e,r,i,a,o,s){var l,c,u=new Map,d=e.length,f=o.length,h=new Array(d),p;for(l=0;l<d;++l)(c=e[l])&&(h[l]=p=s.call(c,c.__data__,l,e)+"",u.has(p)?a[l]=c:u.set(p,c));for(l=0;l<f;++l)p=s.call(n,o[l],l,o)+"",(c=u.get(p))?(i[l]=c,c.__data__=o[l],u.delete(p)):r[l]=new JO(n,o[l]);for(l=0;l<d;++l)(c=e[l])&&u.get(h[l])===c&&(a[l]=c)}function Xzt(n){return n.__data__}function Kzt(n,e){if(!arguments.length)return Array.from(this,Xzt);var r=e?Yzt:qzt,i=this._parents,a=this._groups;typeof n!="function"&&(n=Wzt(n));for(var o=a.length,s=new Array(o),l=new Array(o),c=new Array(o),u=0;u<o;++u){var d=i[u],f=a[u],h=f.length,p=Zzt(n.call(d,d&&d.__data__,u,i)),g=p.length,m=l[u]=new Array(g),v=s[u]=new Array(g),y=c[u]=new Array(h);r(d,f,m,v,y,p,e);for(var b=0,x=0,_,S;b<g;++b)if(_=m[b]){for(b>=x&&(x=b+1);!(S=v[x])&&++x<g;);_._next=S||null}}return s=new Xu(s,i),s._enter=l,s._exit=c,s}function Zzt(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Qzt(){return new Xu(this._exit||this._groups.map(cNe),this._parents)}function Jzt(n,e,r){var i=this.enter(),a=this,o=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(a=e(a),a&&(a=a.selection())),r==null?o.remove():r(o),i&&a?i.merge(a).order():a}function eUt(n){for(var e=n.selection?n.selection():n,r=this._groups,i=e._groups,a=r.length,o=i.length,s=Math.min(a,o),l=new Array(a),c=0;c<s;++c)for(var u=r[c],d=i[c],f=u.length,h=l[c]=new Array(f),p,g=0;g<f;++g)(p=u[g]||d[g])&&(h[g]=p);for(;c<a;++c)l[c]=r[c];return new Xu(l,this._parents)}function tUt(){for(var n=this._groups,e=-1,r=n.length;++e<r;)for(var i=n[e],a=i.length-1,o=i[a],s;--a>=0;)(s=i[a])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function nUt(n){n||(n=rUt);function e(f,h){return f&&h?n(f.__data__,h.__data__):!f-!h}for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o){for(var s=r[o],l=s.length,c=a[o]=new Array(l),u,d=0;d<l;++d)(u=s[d])&&(c[d]=u);c.sort(e)}return new Xu(a,this._parents).order()}function rUt(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function iUt(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function aUt(){return Array.from(this)}function oUt(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],a=0,o=i.length;a<o;++a){var s=i[a];if(s)return s}return null}function sUt(){let n=0;for(const e of this)++n;return n}function lUt(){return!this.node()}function cUt(n){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var a=e[r],o=0,s=a.length,l;o<s;++o)(l=a[o])&&n.call(l,l.__data__,o,a);return this}function uUt(n){return function(){this.removeAttribute(n)}}function dUt(n){return function(){this.removeAttributeNS(n.space,n.local)}}function fUt(n,e){return function(){this.setAttribute(n,e)}}function hUt(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function pUt(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(n):this.setAttribute(n,r)}}function gUt(n,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,r)}}function mUt(n,e){var r=aNe(n);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?dUt:uUt:typeof e=="function"?r.local?gUt:pUt:r.local?hUt:fUt)(r,e))}function uNe(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function vUt(n){return function(){this.style.removeProperty(n)}}function yUt(n,e,r){return function(){this.style.setProperty(n,e,r)}}function bUt(n,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,r)}}function xUt(n,e,r){return arguments.length>1?this.each((e==null?vUt:typeof e=="function"?bUt:yUt)(n,e,r??"")):_Ut(this.node(),n)}function _Ut(n,e){return n.style.getPropertyValue(e)||uNe(n).getComputedStyle(n,null).getPropertyValue(e)}function wUt(n){return function(){delete this[n]}}function SUt(n,e){return function(){this[n]=e}}function EUt(n,e){return function(){var r=e.apply(this,arguments);r==null?delete this[n]:this[n]=r}}function CUt(n,e){return arguments.length>1?this.each((e==null?wUt:typeof e=="function"?EUt:SUt)(n,e)):this.node()[n]}function dNe(n){return n.trim().split(/^|\s+/)}function eQ(n){return n.classList||new fNe(n)}function fNe(n){this._node=n,this._names=dNe(n.getAttribute("class")||"")}fNe.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function hNe(n,e){for(var r=eQ(n),i=-1,a=e.length;++i<a;)r.add(e[i])}function pNe(n,e){for(var r=eQ(n),i=-1,a=e.length;++i<a;)r.remove(e[i])}function MUt(n){return function(){hNe(this,n)}}function TUt(n){return function(){pNe(this,n)}}function AUt(n,e){return function(){(e.apply(this,arguments)?hNe:pNe)(this,n)}}function RUt(n,e){var r=dNe(n+"");if(arguments.length<2){for(var i=eQ(this.node()),a=-1,o=r.length;++a<o;)if(!i.contains(r[a]))return!1;return!0}return this.each((typeof e=="function"?AUt:e?MUt:TUt)(r,e))}function PUt(){this.textContent=""}function NUt(n){return function(){this.textContent=n}}function OUt(n){return function(){var e=n.apply(this,arguments);this.textContent=e??""}}function IUt(n){return arguments.length?this.each(n==null?PUt:(typeof n=="function"?OUt:NUt)(n)):this.node().textContent}function DUt(){this.innerHTML=""}function LUt(n){return function(){this.innerHTML=n}}function kUt(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e??""}}function FUt(n){return arguments.length?this.each(n==null?DUt:(typeof n=="function"?kUt:LUt)(n)):this.node().innerHTML}function $Ut(){this.nextSibling&&this.parentNode.appendChild(this)}function BUt(){return this.each($Ut)}function zUt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function UUt(){return this.each(zUt)}function VUt(n){var e=typeof n=="function"?n:oNe(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function GUt(){return null}function jUt(n,e){var r=typeof n=="function"?n:oNe(n),i=e==null?GUt:typeof e=="function"?e:sNe(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function HUt(){var n=this.parentNode;n&&n.removeChild(this)}function WUt(){return this.each(HUt)}function qUt(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function YUt(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function XUt(n){return this.select(n?YUt:qUt)}function KUt(n){return arguments.length?this.property("__data__",n):this.node().__data__}function ZUt(n){return function(e){n.call(this,e,this.__data__)}}function QUt(n){return n.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function JUt(n){return function(){var e=this.__on;if(e){for(var r=0,i=-1,a=e.length,o;r<a;++r)o=e[r],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function eVt(n,e,r){return function(){var i=this.__on,a,o=ZUt(e);if(i){for(var s=0,l=i.length;s<l;++s)if((a=i[s]).type===n.type&&a.name===n.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=o,a.options=r),a.value=e;return}}this.addEventListener(n.type,o,r),a={type:n.type,name:n.name,value:e,listener:o,options:r},i?i.push(a):this.__on=[a]}}function tVt(n,e,r){var i=QUt(n+""),a,o=i.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,u=l.length,d;c<u;++c)for(a=0,d=l[c];a<o;++a)if((s=i[a]).type===d.type&&s.name===d.name)return d.value}return}for(l=e?eVt:JUt,a=0;a<o;++a)this.each(l(i[a],e,r));return this}function gNe(n,e,r){var i=uNe(n),a=i.CustomEvent;typeof a=="function"?a=new a(e,r):(a=i.document.createEvent("Event"),r?(a.initEvent(e,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(e,!1,!1)),n.dispatchEvent(a)}function nVt(n,e){return function(){return gNe(this,n,e)}}function rVt(n,e){return function(){return gNe(this,n,e.apply(this,arguments))}}function iVt(n,e){return this.each((typeof e=="function"?rVt:nVt)(n,e))}function*aVt(){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],a=0,o=i.length,s;a<o;++a)(s=i[a])&&(yield s)}var oVt=[null];function Xu(n,e){this._groups=n,this._parents=e}function sVt(){return this}Xu.prototype={constructor:Xu,select:Rzt,selectAll:Dzt,selectChild:Bzt,selectChildren:Gzt,filter:jzt,data:Kzt,enter:Hzt,exit:Qzt,join:Jzt,merge:eUt,selection:sVt,order:tUt,sort:nUt,call:iUt,nodes:aUt,node:oUt,size:sUt,empty:lUt,each:cUt,attr:mUt,style:xUt,property:CUt,classed:RUt,text:IUt,html:FUt,raise:BUt,lower:UUt,append:VUt,insert:jUt,remove:WUt,clone:XUt,datum:KUt,on:tVt,dispatch:iVt,[Symbol.iterator]:aVt};function lVt(n){return typeof n=="string"?new Xu([[document.querySelector(n)]],[document.documentElement]):new Xu([[n]],oVt)}function cVt(n){let e;for(;e=n.sourceEvent;)n=e;return n}function uVt(n,e){if(n=cVt(n),e===void 0&&(e=n.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[n.clientX-a.left-e.clientLeft,n.clientY-a.top-e.clientTop]}}return[n.pageX,n.pageY]}var eT,ma,mNe,vNe,b0,lve,yNe,bNe,xNe,tQ,oW,sW,zC={},_Ne=[],dVt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,r6=Array.isArray;function qf(n,e){for(var r in e)n[r]=e[r];return n}function nQ(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function fVt(n,e,r){var i,a,o,s={};for(o in e)o=="key"?i=e[o]:o=="ref"?a=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?eT.call(arguments,2):r),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)s[o]==null&&(s[o]=n.defaultProps[o]);return aE(n,s,i,a,null)}function aE(n,e,r,i,a){var o={type:n,props:e,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++mNe,__i:-1,__u:0};return a==null&&ma.vnode!=null&&ma.vnode(o),o}function i6(n){return n.children}function kP(n,e){this.props=n,this.context=e}function __(n,e){if(e==null)return n.__?__(n.__,n.__i+1):null;for(var r;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null)return r.__e;return typeof n.type=="function"?__(n):null}function wNe(n){var e,r;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((r=n.__k[e])!=null&&r.__e!=null){n.__e=n.__c.base=r.__e;break}return wNe(n)}}function cve(n){(!n.__d&&(n.__d=!0)&&b0.push(n)&&!eI.__r++||lve!=ma.debounceRendering)&&((lve=ma.debounceRendering)||yNe)(eI)}function eI(){for(var n,e,r,i,a,o,s,l=1;b0.length;)b0.length>l&&b0.sort(bNe),n=b0.shift(),l=b0.length,n.__d&&(r=void 0,a=(i=(e=n).__v).__e,o=[],s=[],e.__P&&((r=qf({},i)).__v=i.__v+1,ma.vnode&&ma.vnode(r),rQ(e.__P,r,i,e.__n,e.__P.namespaceURI,32&i.__u?[a]:null,o,a??__(i),!!(32&i.__u),s),r.__v=i.__v,r.__.__k[r.__i]=r,CNe(o,r,s),r.__e!=a&&wNe(r)));eI.__r=0}function SNe(n,e,r,i,a,o,s,l,c,u,d){var f,h,p,g,m,v,y=i&&i.__k||_Ne,b=e.length;for(c=hVt(r,e,y,c,b),f=0;f<b;f++)(p=r.__k[f])!=null&&(h=p.__i==-1?zC:y[p.__i]||zC,p.__i=f,v=rQ(n,p,h,a,o,s,l,c,u,d),g=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&iQ(h.ref,null,p),d.push(p.ref,p.__c||g,p)),m==null&&g!=null&&(m=g),4&p.__u||h.__k===p.__k?c=ENe(p,c,n):typeof p.type=="function"&&v!==void 0?c=v:g&&(c=g.nextSibling),p.__u&=-7);return r.__e=m,c}function hVt(n,e,r,i,a){var o,s,l,c,u,d=r.length,f=d,h=0;for(n.__k=new Array(a),o=0;o<a;o++)(s=e[o])!=null&&typeof s!="boolean"&&typeof s!="function"?(c=o+h,(s=n.__k[o]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?aE(null,s,null,null,null):r6(s)?aE(i6,{children:s},null,null,null):s.constructor==null&&s.__b>0?aE(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=n,s.__b=n.__b+1,l=null,(u=s.__i=pVt(s,r,c,f))!=-1&&(f--,(l=r[u])&&(l.__u|=2)),l==null||l.__v==null?(u==-1&&(a>d?h--:a<d&&h++),typeof s.type!="function"&&(s.__u|=4)):u!=c&&(u==c-1?h--:u==c+1?h++:(u>c?h--:h++,s.__u|=4))):n.__k[o]=null;if(f)for(o=0;o<d;o++)(l=r[o])!=null&&!(2&l.__u)&&(l.__e==i&&(i=__(l)),TNe(l,l));return i}function ENe(n,e,r){var i,a;if(typeof n.type=="function"){for(i=n.__k,a=0;i&&a<i.length;a++)i[a]&&(i[a].__=n,e=ENe(i[a],e,r));return e}n.__e!=e&&(e&&n.type&&!r.contains(e)&&(e=__(n)),r.insertBefore(n.__e,e||null),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function pVt(n,e,r,i){var a,o,s=n.key,l=n.type,c=e[r];if(c===null&&n.key==null||c&&s==c.key&&l==c.type&&!(2&c.__u))return r;if(i>(c!=null&&!(2&c.__u)?1:0))for(a=r-1,o=r+1;a>=0||o<e.length;){if(a>=0){if((c=e[a])&&!(2&c.__u)&&s==c.key&&l==c.type)return a;a--}if(o<e.length){if((c=e[o])&&!(2&c.__u)&&s==c.key&&l==c.type)return o;o++}}return-1}function uve(n,e,r){e[0]=="-"?n.setProperty(e,r??""):n[e]=r==null?"":typeof r!="number"||dVt.test(e)?r:r+"px"}function LR(n,e,r,i,a){var o;e:if(e=="style")if(typeof r=="string")n.style.cssText=r;else{if(typeof i=="string"&&(n.style.cssText=i=""),i)for(e in i)r&&e in r||uve(n.style,e,"");if(r)for(e in r)i&&r[e]==i[e]||uve(n.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(xNe,"$1")),e=e.toLowerCase()in n||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=r,r?i?r.u=i.u:(r.u=tQ,n.addEventListener(e,o?sW:oW,o)):n.removeEventListener(e,o?sW:oW,o);else{if(a=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&r==1?"":r))}}function dve(n){return function(e){if(this.l){var r=this.l[e.type+n];if(e.t==null)e.t=tQ++;else if(e.t<r.u)return;return r(ma.event?ma.event(e):e)}}}function rQ(n,e,r,i,a,o,s,l,c,u){var d,f,h,p,g,m,v,y,b,x,_,S,M,E,T,P,A,N=e.type;if(e.constructor!=null)return null;128&r.__u&&(c=!!(32&r.__u),o=[l=e.__e=r.__e]),(d=ma.__b)&&d(e);e:if(typeof N=="function")try{if(y=e.props,b="prototype"in N&&N.prototype.render,x=(d=N.contextType)&&i[d.__c],_=d?x?x.props.value:d.__:i,r.__c?v=(f=e.__c=r.__c).__=f.__E:(b?e.__c=f=new N(y,_):(e.__c=f=new kP(y,_),f.constructor=N,f.render=mVt),x&&x.sub(f),f.props=y,f.state||(f.state={}),f.context=_,f.__n=i,h=f.__d=!0,f.__h=[],f._sb=[]),b&&f.__s==null&&(f.__s=f.state),b&&N.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=qf({},f.__s)),qf(f.__s,N.getDerivedStateFromProps(y,f.__s))),p=f.props,g=f.state,f.__v=e,h)b&&N.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),b&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(b&&N.getDerivedStateFromProps==null&&y!==p&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(y,_),!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(y,f.__s,_)===!1||e.__v==r.__v){for(e.__v!=r.__v&&(f.props=y,f.state=f.__s,f.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(O){O&&(O.__=e)}),S=0;S<f._sb.length;S++)f.__h.push(f._sb[S]);f._sb=[],f.__h.length&&s.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(y,f.__s,_),b&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(p,g,m)})}if(f.context=_,f.props=y,f.__P=n,f.__e=!1,M=ma.__r,E=0,b){for(f.state=f.__s,f.__d=!1,M&&M(e),d=f.render(f.props,f.state,f.context),T=0;T<f._sb.length;T++)f.__h.push(f._sb[T]);f._sb=[]}else do f.__d=!1,M&&M(e),d=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++E<25);f.state=f.__s,f.getChildContext!=null&&(i=qf(qf({},i),f.getChildContext())),b&&!h&&f.getSnapshotBeforeUpdate!=null&&(m=f.getSnapshotBeforeUpdate(p,g)),P=d,d!=null&&d.type===i6&&d.key==null&&(P=MNe(d.props.children)),l=SNe(n,r6(P)?P:[P],e,r,i,a,o,s,l,c,u),f.base=e.__e,e.__u&=-161,f.__h.length&&s.push(f),v&&(f.__E=f.__=null)}catch(O){if(e.__v=null,c||o!=null)if(O.then){for(e.__u|=c?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,e.__e=l}else for(A=o.length;A--;)nQ(o[A]);else e.__e=r.__e,e.__k=r.__k;ma.__e(O,e,r)}else o==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):l=e.__e=gVt(r.__e,e,r,i,a,o,s,c,u);return(d=ma.diffed)&&d(e),128&e.__u?void 0:l}function CNe(n,e,r){for(var i=0;i<r.length;i++)iQ(r[i],r[++i],r[++i]);ma.__c&&ma.__c(e,n),n.some(function(a){try{n=a.__h,a.__h=[],n.some(function(o){o.call(a)})}catch(o){ma.__e(o,a.__v)}})}function MNe(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:r6(n)?n.map(MNe):qf({},n)}function gVt(n,e,r,i,a,o,s,l,c){var u,d,f,h,p,g,m,v=r.props,y=e.props,b=e.type;if(b=="svg"?a="http://www.w3.org/2000/svg":b=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),o!=null){for(u=0;u<o.length;u++)if((p=o[u])&&"setAttribute"in p==!!b&&(b?p.localName==b:p.nodeType==3)){n=p,o[u]=null;break}}if(n==null){if(b==null)return document.createTextNode(y);n=document.createElementNS(a,b,y.is&&y),l&&(ma.__m&&ma.__m(e,o),l=!1),o=null}if(b==null)v===y||l&&n.data==y||(n.data=y);else{if(o=o&&eT.call(n.childNodes),v=r.props||zC,!l&&o!=null)for(v={},u=0;u<n.attributes.length;u++)v[(p=n.attributes[u]).name]=p.value;for(u in v)if(p=v[u],u!="children"){if(u=="dangerouslySetInnerHTML")f=p;else if(!(u in y)){if(u=="value"&&"defaultValue"in y||u=="checked"&&"defaultChecked"in y)continue;LR(n,u,null,p,a)}}for(u in y)p=y[u],u=="children"?h=p:u=="dangerouslySetInnerHTML"?d=p:u=="value"?g=p:u=="checked"?m=p:l&&typeof p!="function"||v[u]===p||LR(n,u,p,v[u],a);if(d)l||f&&(d.__html==f.__html||d.__html==n.innerHTML)||(n.innerHTML=d.__html),e.__k=[];else if(f&&(n.innerHTML=""),SNe(e.type=="template"?n.content:n,r6(h)?h:[h],e,r,i,b=="foreignObject"?"http://www.w3.org/1999/xhtml":a,o,s,o?o[0]:r.__k&&__(r,0),l,c),o!=null)for(u=o.length;u--;)nQ(o[u]);l||(u="value",b=="progress"&&g==null?n.removeAttribute("value"):g!=null&&(g!==n[u]||b=="progress"&&!g||b=="option"&&g!=v[u])&&LR(n,u,g,v[u],a),u="checked",m!=null&&m!=n[u]&&LR(n,u,m,v[u],a))}return n}function iQ(n,e,r){try{if(typeof n=="function"){var i=typeof n.__u=="function";i&&n.__u(),i&&e==null||(n.__u=n(e))}else n.current=e}catch(a){ma.__e(a,r)}}function TNe(n,e,r){var i,a;if(ma.unmount&&ma.unmount(n),(i=n.ref)&&(i.current&&i.current!=n.__e||iQ(i,null,e)),(i=n.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){ma.__e(o,e)}i.base=i.__P=null}if(i=n.__k)for(a=0;a<i.length;a++)i[a]&&TNe(i[a],e,r||typeof n.type!="function");r||nQ(n.__e),n.__c=n.__=n.__e=void 0}function mVt(n,e,r){return this.constructor(n,r)}function vVt(n,e,r){var i,a,o,s;e==document&&(e=document.documentElement),ma.__&&ma.__(n,e),a=(i=!1)?null:e.__k,o=[],s=[],rQ(e,n=e.__k=fVt(i6,null,[n]),a||zC,zC,e.namespaceURI,a?null:e.firstChild?eT.call(e.childNodes):null,o,a?a.__e:e.firstChild,i,s),CNe(o,n,s)}function ANe(n,e,r){var i,a,o,s,l=qf({},n.props);for(o in n.type&&n.type.defaultProps&&(s=n.type.defaultProps),e)o=="key"?i=e[o]:o=="ref"?a=e[o]:l[o]=e[o]==null&&s!=null?s[o]:e[o];return arguments.length>2&&(l.children=arguments.length>3?eT.call(arguments,2):r),aE(n.type,l,i||n.key,a||n.ref,null)}eT=_Ne.slice,ma={__e:function(n,e,r,i){for(var a,o,s;e=e.__;)if((a=e.__c)&&!a.__)try{if((o=a.constructor)&&o.getDerivedStateFromError!=null&&(a.setState(o.getDerivedStateFromError(n)),s=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(n,i||{}),s=a.__d),s)return a.__E=a}catch(l){n=l}throw n}},mNe=0,vNe=function(n){return n!=null&&n.constructor==null},kP.prototype.setState=function(n,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=qf({},this.state),typeof n=="function"&&(n=n(qf({},r),this.props)),n&&qf(r,n),n!=null&&this.__v&&(e&&this._sb.push(e),cve(this))},kP.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),cve(this))},kP.prototype.render=i6,b0=[],yNe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,bNe=function(n,e){return n.__v.__b-e.__v.__b},eI.__r=0,xNe=/(PointerCapture)$|Capture$/i,tQ=0,oW=dve(!1),sW=dve(!0);function fve(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function yVt(n){if(Array.isArray(n))return n}function bVt(n,e,r){return(e=CVt(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function xVt(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,o,s,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function _Vt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hve(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),r.push.apply(r,i)}return r}function wVt(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hve(Object(r),!0).forEach(function(i){bVt(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):hve(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function SVt(n,e){return yVt(n)||xVt(n,e)||MVt(n,e)||_Vt()}function EVt(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function CVt(n){var e=EVt(n,"string");return typeof e=="symbol"?e:e+""}function tI(n){"@babel/helpers - typeof";return tI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tI(n)}function MVt(n,e){if(n){if(typeof n=="string")return fve(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fve(n,e):void 0}}var lW=function(e){if(tI(e)!=="object")return e;var r=ANe(e);if(r.props){var i;r.props=wVt({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(lW):lW(r.props.children))}return r},TVt=function(e){return vNe(ANe(e))},AVt=function(e,r){delete r.__k,vVt(lW(e),r)};function RVt(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}}var PVt=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;RVt(PVt);var NVt=BL({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.style,o=a===void 0?{}:a,s=!!e&&tI(e)==="object"&&!!e.node&&typeof e.node=="function",l=lVt(s?e.node():e);l.style("position")==="static"&&l.style("position","relative"),r.tooltipEl=l.append("div").attr("class","float-tooltip-kap"),Object.entries(o).forEach(function(u){var d=SVt(u,2),f=d[0],h=d[1];return r.tooltipEl.style(f,h)}),r.tooltipEl.style("left","-10000px").style("display","none");var c="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,l.on("mousemove.".concat(c),function(u){r.mouseInside=!0;var d=uVt(u),f=l.node(),h=f.offsetWidth,p=f.offsetHeight,g=[r.offsetX===null||r.offsetX===void 0?"-".concat(d[0]/h*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?p>130&&p-d[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",d[0]+"px").style("top",d[1]+"px").style("transform","translate(".concat(g.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseover.".concat(c),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),l.on("mouseout.".concat(c),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):TVt(e.content)?(e.tooltipEl.text(""),AVt(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function OVt(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}}var IVt=`.scene-nav-info {
  position: absolute;
  bottom: 5px;
  width: 100%;
  text-align: center;
  color: slategrey;
  opacity: 0.7;
  font-size: 10px;
  font-family: sans-serif;
  pointer-events: none;
  user-select: none;
}

.scene-container canvas:focus {
  outline: none;
}`;OVt(IVt);function cW(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function DVt(n){if(Array.isArray(n))return n}function LVt(n){if(Array.isArray(n))return cW(n)}function kVt(n,e,r){return(e=GVt(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function FVt(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function $Vt(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,o,s,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function BVt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zVt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UVt(n,e){return DVt(n)||$Vt(n,e)||RNe(n,e)||BVt()}function Xv(n){return LVt(n)||FVt(n)||RNe(n)||zVt()}function VVt(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function GVt(n){var e=VVt(n,"string");return typeof e=="symbol"?e:e+""}function RNe(n,e){if(n){if(typeof n=="string")return cW(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cW(n,e):void 0}}var ua=window.THREE?window.THREE:{WebGLRenderer:zIt,Scene:lZ,PerspectiveCamera:ll,Raycaster:wAe,SRGBColorSpace:Pn,TextureLoader:qAt,Vector2:Nt,Vector3:ge,Box3:Xy,Color:Tn,Mesh:ko,SphereGeometry:fw,MeshBasicMaterial:dw,BackSide:va,Clock:_Ae},PNe=BL({props:{width:{default:window.innerWidth,onChange:function(e,r,i){isNaN(e)&&(r.width=i)}},height:{default:window.innerHeight,onChange:function(e,r,i){isNaN(e)&&(r.height=i)}},viewOffset:{default:[0,0]},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},lights:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,r){r.hoverObj=null,r.tooltip&&r.tooltip.content(null)},triggerUpdate:!1},pointerRaycasterThrottleMs:{default:50,triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},pointsHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){e.controls.update&&e.controls.update(Math.min(1,e.clock.getDelta())),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach(function(s){return s.render(e.scene,e.camera)});var r=+new Date;if(e.enablePointerInteraction&&r-e.lastRaycasterCheck>=e.pointerRaycasterThrottleMs){e.lastRaycasterCheck=r;var i=null;if(e.hoverDuringDrag||!e.isPointerDragging){var a=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y);e.hoverOrderComparator&&a.sort(function(s,l){return e.hoverOrderComparator(s.object,l.object)});var o=a.find(function(s){return e.hoverFilter(s.object)})||null;i=o?o.object:null,e.intersection=o||null}i!==e.hoverObj&&(e.onHover(i,e.hoverObj,e.intersection),e.tooltip.content(i&&ti(e.tooltipContent)(i,e.intersection)||null),e.hoverObj=i)}e.tweenGroup.update()}return this},getPointerPos:function(e){var r=e.pointerPos,i=r.x,a=r.y;return{x:i,y:a}},cameraPosition:function(e,r,i,a){var o=e.camera;if(r&&e.initialised){var s=r,l=i||{x:0,y:0,z:0};if(!a)d(s),f(l);else{var c=Object.assign({},o.position),u=h();e.tweenGroup.add(new ove(c).to(s,a).easing(Q0.Quadratic.Out).onUpdate(d).start()),e.tweenGroup.add(new ove(u).to(l,a/3).easing(Q0.Quadratic.Out).onUpdate(f).start())}return this}return Object.assign({},o.position,{lookAt:h()});function d(p){var g=p.x,m=p.y,v=p.z;g!==void 0&&(o.position.x=g),m!==void 0&&(o.position.y=m),v!==void 0&&(o.position.z=v)}function f(p){var g=new ua.Vector3(p.x,p.y,p.z);e.controls.target?e.controls.target=g:o.lookAt(g)}function h(){return Object.assign(new ua.Vector3(0,0,-1e3).applyQuaternion(o.quaternion).add(o.position))}},zoomToFit:function(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return this.fitToBbox(this.getBbox.apply(this,o),r,i)},fitToBbox:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:10,o=e.camera;if(r){var s=new ua.Vector3(0,0,0),l=Math.max.apply(Math,Xv(Object.entries(r).map(function(p){var g=UVt(p,2),m=g[0],v=g[1];return Math.max.apply(Math,Xv(v.map(function(y){return Math.abs(s[m]-y)})))})))*2,c=(1-a*2/e.height)*o.fov,u=l/Math.atan(c*Math.PI/180),d=u/o.aspect,f=Math.max(u,d);if(f>0){var h=s.clone().sub(o.position).normalize().multiplyScalar(-f);this.cameraPosition(h,s,i)}}return this},getBbox:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=new ua.Box3(new ua.Vector3(0,0,0),new ua.Vector3(0,0,0)),a=e.objects.filter(r);return a.length?(a.forEach(function(o){return i.expandByObject(o)}),Object.assign.apply(Object,Xv(["x","y","z"].map(function(o){return kVt({},o,[i.min[o],i.max[o]])})))):null},getScreenCoords:function(e,r,i,a){var o=new ua.Vector3(r,i,a);return o.project(this.camera()),{x:(o.x+1)*e.width/2,y:-(o.y-1)*e.height/2}},getSceneCoords:function(e,r,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=new ua.Vector2(r/e.width*2-1,-(i/e.height)*2+1),s=new ua.Raycaster;return s.setFromCamera(o,e.camera),Object.assign({},s.ray.at(a,new ua.Vector3))},intersectingObjects:function(e,r,i){var a=new ua.Vector2(r/e.width*2-1,-(i/e.height)*2+1),o=new ua.Raycaster;return o.params.Line.threshold=e.lineHoverPrecision,o.params.Points.threshold=e.pointsHoverPrecision,o.setFromCamera(a,e.camera),o.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new ua.Scene,camera:new ua.PerspectiveCamera,clock:new ua.Clock,tweenGroup:new rNe,lastRaycasterCheck:0}},init:function(e,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.controlType,o=a===void 0?"trackball":a,s=i.useWebGPU,l=s===void 0?!1:s,c=i.rendererConfig,u=c===void 0?{}:c,d=i.extraRenderers,f=d===void 0?[]:d,h=i.waitForLoadComplete,p=h===void 0?!0:h;e.innerHTML="",e.appendChild(r.container=document.createElement("div")),r.container.className="scene-container",r.container.style.position="relative",r.container.appendChild(r.navInfo=document.createElement("div")),r.navInfo.className="scene-nav-info",r.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[o]||"",r.navInfo.style.display=r.showNavInfo?null:"none",r.tooltip=new NVt(r.container),r.pointerPos=new ua.Vector2,r.pointerPos.x=-2,r.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(g){return r.container.addEventListener(g,function(m){if(g==="pointerdown"&&(r.isPointerPressed=!0),!r.isPointerDragging&&m.type==="pointermove"&&(m.pressure>0||r.isPointerPressed)&&(m.pointerType!=="touch"||m.movementX===void 0||[m.movementX,m.movementY].some(function(b){return Math.abs(b)>1}))&&(r.isPointerDragging=!0),r.enablePointerInteraction){var v=y(r.container);r.pointerPos.x=m.pageX-v.left,r.pointerPos.y=m.pageY-v.top}function y(b){var x=b.getBoundingClientRect(),_=window.pageXOffset||document.documentElement.scrollLeft,S=window.pageYOffset||document.documentElement.scrollTop;return{top:x.top+S,left:x.left+_}}},{passive:!0})}),r.container.addEventListener("pointerup",function(g){r.isPointerPressed=!1,!(r.isPointerDragging&&(r.isPointerDragging=!1,!r.clickAfterDrag))&&requestAnimationFrame(function(){g.button===0&&r.onClick(r.hoverObj||null,g,r.intersection),g.button===2&&r.onRightClick&&r.onRightClick(r.hoverObj||null,g,r.intersection)})},{passive:!0,capture:!0}),r.container.addEventListener("contextmenu",function(g){r.onRightClick&&g.preventDefault()}),r.renderer=new(l?K9t:ua.WebGLRenderer)(Object.assign({antialias:!0,alpha:!0},u)),r.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),r.container.appendChild(r.renderer.domElement),r.extraRenderers=f,r.extraRenderers.forEach(function(g){g.domElement.style.position="absolute",g.domElement.style.top="0px",g.domElement.style.pointerEvents="none",r.container.appendChild(g.domElement)}),r.postProcessingComposer=new G7t(r.renderer),r.postProcessingComposer.addPass(new j7t(r.scene,r.camera)),r.controls=new{trackball:Q9t,orbit:p7t,fly:A7t}[o](r.camera,r.renderer.domElement),o==="fly"&&(r.controls.movementSpeed=300,r.controls.rollSpeed=Math.PI/6,r.controls.dragToLook=!0),(o==="trackball"||o==="orbit")&&(r.controls.minDistance=.1,r.controls.maxDistance=r.skyRadius,r.controls.addEventListener("start",function(){r.controlsEngaged=!0}),r.controls.addEventListener("change",function(){r.controlsEngaged&&(r.controlsDragging=!0)}),r.controls.addEventListener("end",function(){r.controlsEngaged=!1,r.controlsDragging=!1})),[r.renderer,r.postProcessingComposer].concat(Xv(r.extraRenderers)).forEach(function(g){return g.setSize(r.width,r.height)}),r.camera.aspect=r.width/r.height,r.camera.updateProjectionMatrix(),r.camera.position.z=1e3,r.scene.add(r.skysphere=new ua.Mesh),r.skysphere.visible=!1,r.loadComplete=r.scene.visible=!p,window.scene=r.scene},update:function(e,r){if(e.width&&e.height&&(r.hasOwnProperty("width")||r.hasOwnProperty("height"))){var i,a=e.width,o=e.height;e.container.style.width="".concat(a,"px"),e.container.style.height="".concat(o,"px"),[e.renderer,e.postProcessingComposer].concat(Xv(e.extraRenderers)).forEach(function(p){return p.setSize(a,o)}),e.camera.aspect=a/o;var s=e.viewOffset.slice(0,2);s.some(function(p){return p})&&(i=e.camera).setViewOffset.apply(i,[a,o].concat(Xv(s),[a,o])),e.camera.updateProjectionMatrix()}if(r.hasOwnProperty("viewOffset")){var l,c=e.width,u=e.height,d=e.viewOffset.slice(0,2);d.some(function(p){return p})?(l=e.camera).setViewOffset.apply(l,[c,u].concat(Xv(d),[c,u])):e.camera.clearViewOffset()}if(r.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&r.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=e.skyRadius*2.5,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new ua.SphereGeometry(e.skyRadius)),r.hasOwnProperty("backgroundColor")){var f=x_(e.backgroundColor).alpha;f===void 0&&(f=1),e.renderer.setClearColor(new ua.Color(yzt(1,e.backgroundColor)),f)}r.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?new ua.TextureLoader().load(e.backgroundImageUrl,function(p){p.colorSpace=ua.SRGBColorSpace,e.skysphere.material=new ua.MeshBasicMaterial({map:p,side:ua.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),!e.loadComplete&&h()}):(e.skysphere.visible=!1,e.skysphere.material.map=null,!e.loadComplete&&h())),r.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),r.hasOwnProperty("lights")&&((r.lights||[]).forEach(function(p){return e.scene.remove(p)}),e.lights.forEach(function(p){return e.scene.add(p)})),r.hasOwnProperty("objects")&&((r.objects||[]).forEach(function(p){return e.scene.remove(p)}),e.objects.forEach(function(p){return e.scene.add(p)}));function h(){e.loadComplete=e.scene.visible=!0}}});function jVt(n,e){e===void 0&&(e={});var r=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n))}}var HVt=`.graph-info-msg {
  top: 50%;
  width: 100%;
  text-align: center;
  color: lavender;
  opacity: 0.7;
  font-size: 22px;
  position: absolute;
  font-family: Sans-serif;
}

.scene-container .clickable {
  cursor: pointer;
}

.scene-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.scene-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}`;jVt(HVt);function uW(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function WVt(n){if(Array.isArray(n))return uW(n)}function tT(n,e,r){return(e=KVt(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function qVt(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function YVt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pve(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),r.push.apply(r,i)}return r}function kR(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pve(Object(r),!0).forEach(function(i){tT(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):pve(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function a6(n){return WVt(n)||qVt(n)||ZVt(n)||YVt()}function XVt(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function KVt(n){var e=XVt(n,"string");return typeof e=="symbol"?e:e+""}function ZVt(n,e){if(n){if(typeof n=="string")return uW(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?uW(n,e):void 0}}function NNe(n,e){var r=new e;return r._destructor&&r._destructor(),{linkProp:function(a){return{default:r[a](),onChange:function(s,l){l[n][a](s)},triggerUpdate:!1}},linkMethod:function(a){return function(o){for(var s=o[n],l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];var d=s[a].apply(s,c);return d===s?this:d}}}}var RU=window.THREE?window.THREE:{AmbientLight:xAe,DirectionalLight:bAe,REVISION:ow},QVt=170,ONe=NNe("forceGraph",fRe),JVt=Object.assign.apply(Object,a6(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","nodePositionUpdate","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return tT({},n,ONe.linkProp(n))}))),eGt=Object.assign.apply(Object,a6(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return tT({},n,ONe.linkMethod(n))}))),FP=NNe("renderObjs",PNe),tGt=Object.assign.apply(Object,a6(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map(function(n){return tT({},n,FP.linkProp(n))}))),nGt=Object.assign.apply(Object,a6(["lights","cameraPosition","postProcessingComposer"].map(function(n){return tT({},n,FP.linkMethod(n))})).concat([{graph2ScreenCoords:FP.linkMethod("getScreenCoords"),screen2GraphCoords:FP.linkMethod("getSceneCoords")}])),rGt=BL({props:kR(kR({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(e,r){return r.renderObjs.lineHoverPrecision(e)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(e,r){var i=r.renderObjs.controls();i&&(i.enabled=e,e&&i.domElement&&i.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},JVt),tGt),methods:kR(kR({zoomToFit:function(e,r,i){for(var a,o=arguments.length,s=new Array(o>3?o-3:0),l=3;l<o;l++)s[l-3]=arguments[l];return e.renderObjs.fitToBbox((a=e.forceGraph).getGraphBbox.apply(a,s),r,i),this},pauseAnimation:function(e){return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId===null&&this._animationCycle(),this},_animationCycle:function(e){e.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),e.forceGraph.tickFrame(),e.renderObjs.tick(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},tbControls:function(e){return e.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},eGt),nGt),stateInit:function(e){var r=e.controlType,i=e.rendererConfig,a=e.extraRenderers,o=new fRe;return{forceGraph:o,renderObjs:PNe({controlType:r,rendererConfig:i,extraRenderers:a}).objects([o]).lights([new RU.AmbientLight(13421772,Math.PI),new RU.DirectionalLight(16777215,.6*Math.PI)])}},init:function(e,r){e.innerHTML="",e.appendChild(r.container=document.createElement("div")),r.container.style.position="relative";var i=document.createElement("div");r.container.appendChild(i),r.renderObjs(i);var a=r.renderObjs.camera(),o=r.renderObjs.renderer(),s=r.renderObjs.controls();s.enabled=!!r.enableNavigationControls,r.lastSetCameraZ=a.position.z;var l;r.container.appendChild(l=document.createElement("div")),l.className="graph-info-msg",l.textContent="",r.forceGraph.onLoading(function(){l.textContent="Loading..."}).onFinishLoading(function(){l.textContent=""}).onUpdate(function(){r.graphData=r.forceGraph.graphData(),a.position.x===0&&a.position.y===0&&a.position.z===r.lastSetCameraZ&&r.graphData.nodes.length&&(a.lookAt(r.forceGraph.position),r.lastSetCameraZ=a.position.z=Math.cbrt(r.graphData.nodes.length)*QVt)}).onFinishUpdate(function(){if(r._dragControls){var c=r.graphData.nodes.find(function(d){return d.__initialFixedPos&&!d.__disposeControlsAfterDrag});c?c.__disposeControlsAfterDrag=!0:r._dragControls.dispose(),r._dragControls=void 0}if(r.enableNodeDrag&&r.enablePointerInteraction&&r.forceEngine==="d3"){var u=r._dragControls=new UIt(r.graphData.nodes.map(function(d){return d.__threeObj}).filter(function(d){return d}),a,o.domElement);u.addEventListener("dragstart",function(d){var f=zh(d.object);if(f){s.enabled=!1,d.object.__initialPos=d.object.position.clone(),d.object.__prevPos=d.object.position.clone();var h=f.__data;!h.__initialFixedPos&&(h.__initialFixedPos={fx:h.fx,fy:h.fy,fz:h.fz}),!h.__initialPos&&(h.__initialPos={x:h.x,y:h.y,z:h.z}),["x","y","z"].forEach(function(p){return h["f".concat(p)]=h[p]}),o.domElement.classList.add("grabbable")}}),u.addEventListener("drag",function(d){var f=zh(d.object);if(f){if(!d.object.hasOwnProperty("__graphObjType")){var h=d.object.__initialPos,p=d.object.__prevPos,g=d.object.position;f.position.add(g.clone().sub(p)),p.copy(g),g.copy(h)}var m=f.__data,v=f.position,y={x:v.x-m.x,y:v.y-m.y,z:v.z-m.z};["x","y","z"].forEach(function(b){return m["f".concat(b)]=m[b]=v[b]}),r.forceGraph.d3AlphaTarget(.3).resetCountdown(),m.__dragged=!0,r.onNodeDrag(m,y)}}),u.addEventListener("dragend",function(d){var f=zh(d.object);if(f){delete d.object.__initialPos,delete d.object.__prevPos;var h=f.__data;h.__disposeControlsAfterDrag&&(u.dispose(),delete h.__disposeControlsAfterDrag);var p=h.__initialFixedPos,g=h.__initialPos,m={x:g.x-h.x,y:g.y-h.y,z:g.z-h.z};p&&(["x","y","z"].forEach(function(v){var y="f".concat(v);p[y]===void 0&&delete h[y]}),delete h.__initialFixedPos,delete h.__initialPos,h.__dragged&&(delete h.__dragged,r.onNodeDragEnd(h,m))),r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.enableNavigationControls&&(s.enabled=!0,s.domElement&&s.domElement.ownerDocument&&s.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),o.domElement.classList.remove("grabbable")}})}}),RU.REVISION<155&&(r.renderObjs.renderer().useLegacyLights=!1),r.renderObjs.hoverOrderComparator(function(c,u){var d=zh(c);if(!d)return 1;var f=zh(u);if(!f)return-1;var h=function(g){return g.__graphObjType==="node"};return h(f)-h(d)}).tooltipContent(function(c){var u=zh(c);return u&&ti(r["".concat(u.__graphObjType,"Label")])(u.__data)||""}).hoverDuringDrag(!1).onHover(function(c){var u=zh(c);if(u!==r.hoverObj){var d=r.hoverObj?r.hoverObj.__graphObjType:null,f=r.hoverObj?r.hoverObj.__data:null,h=u?u.__graphObjType:null,p=u?u.__data:null;if(d&&d!==h){var g=r["on".concat(d==="node"?"Node":"Link","Hover")];g&&g(null,f)}if(h){var m=r["on".concat(h==="node"?"Node":"Link","Hover")];m&&m(p,d===h?f:null)}o.domElement.classList[u&&r["on".concat(h==="node"?"Node":"Link","Click")]||!u&&r.onBackgroundClick?"add":"remove"]("clickable"),r.hoverObj=u}}).clickAfterDrag(!1).onClick(function(c,u){var d=zh(c);if(d){var f=r["on".concat(d.__graphObjType==="node"?"Node":"Link","Click")];f&&f(d.__data,u)}else r.onBackgroundClick&&r.onBackgroundClick(u)}).onRightClick(function(c,u){var d=zh(c);if(d){var f=r["on".concat(d.__graphObjType==="node"?"Node":"Link","RightClick")];f&&f(d.__data,u)}else r.onBackgroundRightClick&&r.onBackgroundRightClick(u)}),this._animationCycle()}});function zh(n){for(var e=n;e&&!e.hasOwnProperty("__graphObjType");)e=e.parent;return e}function dW(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=Array(e);r<e;r++)i[r]=n[r];return i}function iGt(n){if(Array.isArray(n))return n}function aGt(n){if(Array.isArray(n))return dW(n)}function oGt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function sGt(n,e,r){return e=nI(e),mGt(n,INe()?Reflect.construct(e,r||[],nI(n).constructor):e.apply(n,r))}function lGt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function cGt(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,yGt(i.key),i)}}function uGt(n,e,r){return e&&cGt(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function nI(n){return nI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nI(n)}function dGt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&fW(n,e)}function INe(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(INe=function(){return!!n})()}function fGt(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function hGt(n,e){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var i,a,o,s,l=[],c=!0,u=!1;try{if(o=(r=r.call(n)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw a}}return l}}function pGt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gGt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mGt(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oGt(n)}function fW(n,e){return fW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},fW(n,e)}function gve(n,e){return iGt(n)||hGt(n,e)||DNe(n,e)||pGt()}function FR(n){return aGt(n)||fGt(n)||DNe(n)||gGt()}function vGt(n,e){if(typeof n!="object"||!n)return n;var r=n[Symbol.toPrimitive];if(r!==void 0){var i=r.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}function yGt(n){var e=vGt(n,"string");return typeof e=="symbol"?e:e+""}function DNe(n,e){if(n){if(typeof n=="string")return dW(n,e);var r={}.toString.call(n).slice(8,-1);return r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set"?Array.from(n):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dW(n,e):void 0}}var GS=typeof window<"u"&&window.THREE?window.THREE:{CanvasTexture:hAe,Sprite:fAe,SpriteMaterial:OL,SRGBColorSpace:Pn},bGt=function(n){function e(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"rgba(255, 255, 255, 1)";return lGt(this,e),r=sGt(this,e,[new GS.SpriteMaterial]),r._text="".concat(i),r._textHeight=a,r._color=o,r._backgroundColor=!1,r._padding=0,r._borderWidth=0,r._borderRadius=0,r._borderColor="white",r._strokeWidth=0,r._strokeColor="white",r._fontFace="system-ui",r._fontSize=90,r._fontWeight="normal",r._canvas=document.createElement("canvas"),r._genCanvas(),r}return dGt(e,n),uGt(e,[{key:"text",get:function(){return this._text},set:function(i){this._text=i,this._genCanvas()}},{key:"textHeight",get:function(){return this._textHeight},set:function(i){this._textHeight=i,this._genCanvas()}},{key:"color",get:function(){return this._color},set:function(i){this._color=i,this._genCanvas()}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(i){this._backgroundColor=i,this._genCanvas()}},{key:"padding",get:function(){return this._padding},set:function(i){this._padding=i,this._genCanvas()}},{key:"borderWidth",get:function(){return this._borderWidth},set:function(i){this._borderWidth=i,this._genCanvas()}},{key:"borderRadius",get:function(){return this._borderRadius},set:function(i){this._borderRadius=i,this._genCanvas()}},{key:"borderColor",get:function(){return this._borderColor},set:function(i){this._borderColor=i,this._genCanvas()}},{key:"fontFace",get:function(){return this._fontFace},set:function(i){this._fontFace=i,this._genCanvas()}},{key:"fontSize",get:function(){return this._fontSize},set:function(i){this._fontSize=i,this._genCanvas()}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(i){this._fontWeight=i,this._genCanvas()}},{key:"strokeWidth",get:function(){return this._strokeWidth},set:function(i){this._strokeWidth=i,this._genCanvas()}},{key:"strokeColor",get:function(){return this._strokeColor},set:function(i){this._strokeColor=i,this._genCanvas()}},{key:"_genCanvas",value:function(){var i=this,a=this._canvas,o=a.getContext("2d"),s=1/this.textHeight,l=Array.isArray(this.borderWidth)?this.borderWidth:[this.borderWidth,this.borderWidth],c=l.map(function(T){return T*i.fontSize*s}),u=Array.isArray(this.borderRadius)?this.borderRadius:[this.borderRadius,this.borderRadius,this.borderRadius,this.borderRadius],d=u.map(function(T){return T*i.fontSize*s}),f=Array.isArray(this.padding)?this.padding:[this.padding,this.padding],h=f.map(function(T){return T*i.fontSize*s}),p=this.text.split(`
`),g="".concat(this.fontWeight," ").concat(this.fontSize,"px ").concat(this.fontFace);o.font=g;var m=Math.max.apply(Math,FR(p.map(function(T){return o.measureText(T).width}))),v=this.fontSize*p.length;if(a.width=m+c[0]*2+h[0]*2,a.height=v+c[1]*2+h[1]*2,this.borderWidth){if(o.strokeStyle=this.borderColor,c[0]){var y=c[0]/2;o.lineWidth=c[0],o.beginPath(),o.moveTo(y,d[0]),o.lineTo(y,a.height-d[3]),o.moveTo(a.width-y,d[1]),o.lineTo(a.width-y,a.height-d[2]),o.stroke()}if(c[1]){var b=c[1]/2;o.lineWidth=c[1],o.beginPath(),o.moveTo(Math.max(c[0],d[0]),b),o.lineTo(a.width-Math.max(c[0],d[1]),b),o.moveTo(Math.max(c[0],d[3]),a.height-b),o.lineTo(a.width-Math.max(c[0],d[2]),a.height-b),o.stroke()}if(this.borderRadius){var x=Math.max.apply(Math,FR(c)),_=x/2;o.lineWidth=x,o.beginPath(),[!!d[0]&&[d[0],_,_,d[0]],!!d[1]&&[a.width-d[1],a.width-_,_,d[1]],!!d[2]&&[a.width-d[2],a.width-_,a.height-_,a.height-d[2]],!!d[3]&&[d[3],_,a.height-_,a.height-d[3]]].filter(function(T){return T}).forEach(function(T){var P=gve(T,4),A=P[0],N=P[1],O=P[2],I=P[3];o.moveTo(A,O),o.quadraticCurveTo(N,O,N,I)}),o.stroke()}}this.backgroundColor&&(o.fillStyle=this.backgroundColor,this.borderRadius?(o.beginPath(),o.moveTo(c[0],d[0]),[[c[0],d[0],a.width-d[1],c[1],c[1],c[1]],[a.width-c[0],a.width-c[0],a.width-c[0],c[1],d[1],a.height-d[2]],[a.width-c[0],a.width-d[2],d[3],a.height-c[1],a.height-c[1],a.height-c[1]],[c[0],c[0],c[0],a.height-c[1],a.height-d[3],d[0]]].forEach(function(T){var P=gve(T,6),A=P[0],N=P[1],O=P[2],I=P[3],D=P[4],k=P[5];o.quadraticCurveTo(A,I,N,D),o.lineTo(O,k)}),o.closePath(),o.fill()):o.fillRect(c[0],c[1],a.width-c[0]*2,a.height-c[1]*2)),o.translate.apply(o,FR(c)),o.translate.apply(o,FR(h)),o.font=g,o.fillStyle=this.color,o.textBaseline="bottom";var S=this.strokeWidth>0;S&&(o.lineWidth=this.strokeWidth*this.fontSize/10,o.strokeStyle=this.strokeColor),p.forEach(function(T,P){var A=(m-o.measureText(T).width)/2,N=(P+1)*i.fontSize;S&&o.strokeText(T,A,N),o.fillText(T,A,N)}),this.material.map&&this.material.map.dispose();var M=this.material.map=new GS.CanvasTexture(a);M.colorSpace=GS.SRGBColorSpace;var E=this.textHeight*p.length+l[1]*2+f[1]*2;this.scale.set(E*a.width/a.height,E,0)}},{key:"clone",value:function(){return new this.constructor(this.text,this.textHeight,this.color).copy(this)}},{key:"copy",value:function(i){return GS.Sprite.prototype.copy.call(this,i),this.color=i.color,this.backgroundColor=i.backgroundColor,this.padding=i.padding,this.borderWidth=i.borderWidth,this.borderColor=i.borderColor,this.fontFace=i.fontFace,this.fontSize=i.fontSize,this.fontWeight=i.fontWeight,this.strokeWidth=i.strokeWidth,this.strokeColor=i.strokeColor,this}}])}(GS.Sprite);const xGt=[{icon_id:"40337812",name:"复制",font_class:"fuzhi",unicode:"e601",unicode_decimal:58881},{icon_id:"40007382",name:"user",font_class:"user",unicode:"e635",unicode_decimal:58933},{icon_id:"39995131",name:"USE_1",font_class:"USE_1",unicode:"e60f",unicode_decimal:58895},{icon_id:"39995130",name:"USE_2",font_class:"USE_2",unicode:"e610",unicode_decimal:58896},{icon_id:"39995129",name:"USE_4",font_class:"USE_4",unicode:"e611",unicode_decimal:58897},{icon_id:"39995128",name:"USE_3",font_class:"USE_3",unicode:"e612",unicode_decimal:58898},{icon_id:"39944209",name:"company",font_class:"company",unicode:"e60a",unicode_decimal:58890},{icon_id:"39944208",name:"github_organization",font_class:"github_organization",unicode:"e60b",unicode_decimal:58891},{icon_id:"39944207",name:"country",font_class:"country",unicode:"e60c",unicode_decimal:58892},{icon_id:"39944206",name:"topic",font_class:"topic",unicode:"e60d",unicode_decimal:58893},{icon_id:"39944205",name:"github_repo",font_class:"github_repo",unicode:"e60e",unicode_decimal:58894}],_Gt={glyphs:xGt};window._iconfont_svg_string_4508010='<svg><symbol id="os-icon-fuzhi" viewBox="0 0 1024 1024"><path d="M726.976 256c14.272 0 19.456 1.472 24.64 4.288a29.056 29.056 0 0 1 12.16 12.096c2.752 5.184 4.224 10.368 4.224 24.64v557.952c0 14.272-1.472 19.456-4.288 24.64a29.056 29.056 0 0 1-12.096 12.16c-5.184 2.752-10.368 4.224-24.64 4.224H169.024c-14.272 0-19.456-1.472-24.64-4.288a29.056 29.056 0 0 1-12.16-12.096 37.76 37.76 0 0 1-4.096-18.24L128 297.024c0-14.272 1.472-19.456 4.288-24.64a29.056 29.056 0 0 1 12.096-12.16 37.76 37.76 0 0 1 18.24-4.096L726.976 256zM691.2 332.8H204.8v486.4h486.4V332.8z"  ></path><path d="M934.4 121.6v569.6a12.8 12.8 0 0 1-12.8 12.8h-51.2a12.8 12.8 0 0 1-12.8-12.8V166.4H332.8a12.8 12.8 0 0 1-12.8-12.8v-51.2c0-7.04 5.76-12.8 12.8-12.8h569.6a32 32 0 0 1 32 32z"  ></path></symbol><symbol id="os-icon-user" viewBox="0 0 1024 1024"><path d="M512 109.696a209.664 209.664 0 0 1 209.472 209.92c0 83.2-48.32 173.12-118.4 217.28 125.312 20.544 221.056 83.712 274.368 167.68 4.8 7.488 10.944 19.136 18.56 34.88l-1.344 127.36a48 48 0 0 1-48 47.488H176a48 48 0 0 1-48-48v-126.72l4.416-9.088c5.632-11.328 10.432-20.032 14.272-26.112 53.376-83.84 148.992-146.944 274.24-167.616-70.08-44.096-118.4-133.952-118.4-217.152A209.664 209.664 0 0 1 512 109.696z"  ></path></symbol><symbol id="os-icon-USE_1" viewBox="0 0 1024 1024"><path d="M511.999872 0c282.768996 0 511.999872 229.230876 511.999872 511.999872s-229.230876 511.999872-511.999872 511.999872S0 794.768868 0 511.999872 229.230876 0 511.999872 0z" fill="#9AD5FF" ></path><path d="M660.548102 650.999304c115.140238 18.841595 209.561548 64.238917 283.272462 136.191966C852.906453 929.586968 693.478227 1023.999744 511.999872 1023.999744c-180.821288 0-339.737515-93.73011-430.830826-235.255408C212.369014 663.022768 349.038846 654.643036 384.230304 651.007837c9.181864 0 76.057581 42.043723 141.678898 42.043723 66.406383 0 119.978637-37.068791 134.6389-42.043723z" fill="#7E92B5" ></path><path d="M615.841979 496.341209c-9.386664 49.373854 4.898132 101.119975 42.837323 155.238361L525.909202 693.043027l-135.7909-40.29439-2.303999-0.878933a19.046395 19.046395 0 0 0-2.628266-0.768c37.717324-53.930653 51.882654-105.531707 42.538656-154.760495h188.117286z" fill="#E1BA97" ></path><path d="M660.548102 650.999304l12.492796 347.161513A511.504939 511.504939 0 0 1 511.999872 1023.999744a512.170539 512.170539 0 0 1-144.264497-20.607995l16.494929-352.392445 141.678898 42.043723 134.6389-42.043723z" fill="#FFFFFF" ></path><path d="M515.669204 557.550794c11.059197 0 17.510396-0.443733 27.042127-4.181332 58.120519-22.741328 130.824501-110.890639 130.824501-216.14928 0-122.538636-70.673049-221.866611-157.866628-221.866611-87.185045 0-157.866627 99.327975-157.866627 221.866611 0 105.087974 72.243182 193.092218 130.321034 216.02128 9.642664 3.805866 16.494929 4.309332 27.545593 4.309332z" fill="#EAC8A9" ></path><path d="M363.451642 456.763619c-19.780262-43.690656-32.324259-88.405311-37.640523-134.143966-8.217598-70.741316 14.250663-207.274615 119.876236-240.15354 55.014386-20.241062 112.511972-18.841595 172.484224 4.206932 59.878385 33.015458 91.93811 81.774913 96.187709 146.278363 4.147199 62.907718-13.277863 136.712499-52.28372 221.414345h0.017066a0.853333 0.853333 0 0 1-1.621332-0.4864c1.544533-7.850665 2.474666-13.34613 2.798932-16.486396 0.853333-8.447998 0.853333-14.387196 0-17.834662a83.601046 83.601046 0 0 1-7.227731 15.41973c-2.414933 3.993599-5.094399 7.867731-8.021332 11.613863l0.0256 0.017067a0.853333 0.853333 0 0 1-1.493333-0.785066c4.266666-11.929597 8.447998-28.02346 12.526931-48.273055 1.390933-6.911998 2.670933-18.235729 3.839999-33.937058a0.853333 0.853333 0 0 0-1.6128-0.452267c-2.380799 4.616532-6.220798 10.043731-11.50293 16.281596-6.476798 7.645865-15.871996 17.425062-28.211193 29.337593l0.034133 0.034133a0.853333 0.853333 0 0 1-1.365333-0.9728c9.745064-19.626662 16.767996-35.251191 21.094395-46.890655a282.265529 282.265529 0 0 0 8.891731-29.141326 0.853333 0.853333 0 0 0-1.595733-0.571733c-1.109333 2.269866-2.389333 4.718932-3.865599 7.338665-4.932265 8.772264-12.825597 19.643728-23.671461 32.622925l0.0256 0.017067a0.853333 0.853333 0 0 1-1.467733-0.810667c11.255464-32.460792 16.878929-59.033585 16.878929-79.726913 0-20.778661-5.674665-50.466121-17.015462-89.070911h0.008533a0.853333 0.853333 0 0 0-1.672533 0.170667c-1.262933 17.877329-4.138666 32.682658-8.618664 44.424522-4.881065 12.774397-13.900797 27.750393-27.059194 44.919455l3.566933-28.091726a0.853333 0.853333 0 0 0-0.768-0.938667 0.8192 0.8192 0 0 0-0.853333 0.5632c-3.345066 8.473598-9.053864 17.817596-17.134929 28.02346-5.367465 6.775465-16.853329 17.587196-34.474658 32.443725l0.017067 0.008534a0.853333 0.853333 0 0 1-1.28-1.109334c8.362665-12.799997 14.259196-22.724261 17.723729-29.764259 3.302399-6.707198 5.666132-13.363197 7.108265-19.976528a0.853333 0.853333 0 0 0-1.518933-0.674133c-26.495993 34.252791-53.119987 61.849585-79.87198 82.824512-27.477326 21.546661-58.555719 35.925324-93.24371 43.118923 0.529067 16.930129 1.629866 29.405859 3.310932 37.427191 1.390933 6.655998 4.300799 15.445329 8.721065 26.367993l0.017066-0.017067a0.853333 0.853333 0 0 1-1.501866 0.7936c-4.974932-7.167998-8.499198-12.55253-10.547197-16.187729a155.391961 155.391961 0 0 1-10.043731-21.503995s-4.241066 5.230932-6.118399 16.401063c-0.494933 2.969599-0.571733 8.149331-0.2304 15.547729a0.853333 0.853333 0 0 1-1.638399 0.384z" fill="#27303F" ></path></symbol><symbol id="os-icon-USE_2" viewBox="0 0 1024 1024"><path d="M511.999872 0c282.768996 0 511.999872 229.230876 511.999872 511.999872s-229.230876 511.999872-511.999872 511.999872S0 794.768868 0 511.999872 229.230876 0 511.999872 0z" fill="#7AD6FB" ></path><path d="M660.548102 650.999304c115.140238 18.841595 209.561548 64.238917 283.272462 136.191966C852.906453 929.586968 693.478227 1023.999744 511.999872 1023.999744c-180.821288 0-339.737515-93.73011-430.830826-235.255408C212.369014 663.022768 349.038846 654.643036 384.230304 651.007837c9.181864 0 76.057581 42.043723 141.678898 42.043723 66.406383 0 119.978637-37.068791 134.6389-42.043723z" fill="#7E92B5" ></path><path d="M615.841979 496.341209c-9.386664 49.373854 4.898132 101.119975 42.837323 155.238361L525.909202 693.043027l-135.7909-40.29439-2.303999-0.878933a19.046395 19.046395 0 0 0-2.628266-0.768c37.717324-53.930653 51.882654-105.531707 42.538656-154.760495h188.117286z" fill="#E1BA97" ></path><path d="M660.548102 650.999304l12.492796 347.161513A511.504939 511.504939 0 0 1 511.999872 1023.999744a512.170539 512.170539 0 0 1-144.264497-20.607995l16.494929-352.392445 141.678898 42.043723 134.6389-42.043723z" fill="#FFFFFF" ></path><path d="M515.669204 557.550794c11.059197 0 17.510396-0.443733 27.042127-4.181332 58.120519-22.741328 130.824501-110.890639 130.824501-216.14928 0-122.538636-70.673049-221.866611-157.866628-221.866611-87.185045 0-157.866627 99.327975-157.866627 221.866611 0 105.087974 72.243182 193.092218 130.321034 216.02128 9.642664 3.805866 16.494929 4.309332 27.545593 4.309332z" fill="#EAC8A9" ></path><path d="M363.451642 456.763619c-19.780262-43.690656-32.324259-88.405311-37.640523-134.143966-8.217598-70.741316 14.250663-207.274615 119.876236-240.15354 55.014386-20.241062 112.511972-18.841595 172.484224 4.206932 59.878385 33.015458 91.93811 81.774913 96.187709 146.278363 4.147199 62.907718-13.277863 136.712499-52.28372 221.414345h0.017066a0.853333 0.853333 0 0 1-1.621332-0.4864c1.544533-7.850665 2.474666-13.34613 2.798932-16.486396 0.853333-8.447998 0.853333-14.387196 0-17.834662a83.601046 83.601046 0 0 1-7.227731 15.41973c-2.414933 3.993599-5.094399 7.867731-8.021332 11.613863l0.0256 0.017067a0.853333 0.853333 0 0 1-1.493333-0.785066c4.266666-11.929597 8.447998-28.02346 12.526931-48.273055 1.390933-6.911998 2.670933-18.235729 3.839999-33.937058a0.853333 0.853333 0 0 0-1.6128-0.452267c-2.380799 4.616532-6.220798 10.043731-11.50293 16.281596-6.476798 7.645865-15.871996 17.425062-28.211193 29.337593l0.034133 0.034133a0.853333 0.853333 0 0 1-1.365333-0.9728c9.745064-19.626662 16.767996-35.251191 21.094395-46.890655a282.265529 282.265529 0 0 0 8.891731-29.141326 0.853333 0.853333 0 0 0-1.595733-0.571733c-1.109333 2.269866-2.389333 4.718932-3.865599 7.338665-4.932265 8.772264-12.825597 19.643728-23.671461 32.622925l0.0256 0.017067a0.853333 0.853333 0 0 1-1.467733-0.810667c11.255464-32.460792 16.878929-59.033585 16.878929-79.726913 0-20.778661-5.674665-50.466121-17.015462-89.070911h0.008533a0.853333 0.853333 0 0 0-1.672533 0.170667c-1.262933 17.877329-4.138666 32.682658-8.618664 44.424522-4.881065 12.774397-13.900797 27.750393-27.059194 44.919455l3.566933-28.091726a0.853333 0.853333 0 0 0-0.768-0.938667 0.8192 0.8192 0 0 0-0.853333 0.5632c-3.345066 8.473598-9.053864 17.817596-17.134929 28.02346-5.367465 6.775465-16.853329 17.587196-34.474658 32.443725l0.017067 0.008534a0.853333 0.853333 0 0 1-1.28-1.109334c8.362665-12.799997 14.259196-22.724261 17.723729-29.764259 3.302399-6.707198 5.666132-13.363197 7.108265-19.976528a0.853333 0.853333 0 0 0-1.518933-0.674133c-26.495993 34.252791-53.119987 61.849585-79.87198 82.824512-27.477326 21.546661-58.555719 35.925324-93.24371 43.118923 0.529067 16.930129 1.629866 29.405859 3.310932 37.427191 1.390933 6.655998 4.300799 15.445329 8.721065 26.367993l0.017066-0.017067a0.853333 0.853333 0 0 1-1.501866 0.7936c-4.974932-7.167998-8.499198-12.55253-10.547197-16.187729a155.391961 155.391961 0 0 1-10.043731-21.503995s-4.241066 5.230932-6.118399 16.401063c-0.494933 2.969599-0.571733 8.149331-0.2304 15.547729a0.853333 0.853333 0 0 1-1.638399 0.384z" fill="#27303F" ></path></symbol><symbol id="os-icon-USE_4" viewBox="0 0 1024 1024"><path d="M511.999872 0c282.768996 0 511.999872 229.230876 511.999872 511.999872s-229.230876 511.999872-511.999872 511.999872S0 794.768868 0 511.999872 229.230876 0 511.999872 0z" fill="#F1DEFF" ></path><path d="M660.548102 650.999304c115.140238 18.841595 209.561548 64.238917 283.272462 136.191966C852.906453 929.586968 693.478227 1023.999744 511.999872 1023.999744c-180.821288 0-339.737515-93.73011-430.830826-235.255408C212.369014 663.022768 349.038846 654.643036 384.230304 651.007837c9.181864 0 76.057581 42.043723 141.678898 42.043723 66.406383 0 119.978637-37.068791 134.6389-42.043723z" fill="#7E92B5" ></path><path d="M615.841979 496.341209c-9.386664 49.373854 4.898132 101.119975 42.837323 155.238361L525.909202 693.043027l-135.7909-40.29439-2.303999-0.878933a19.046395 19.046395 0 0 0-2.628266-0.768c37.717324-53.930653 51.882654-105.531707 42.538656-154.760495h188.117286z" fill="#E1BA97" ></path><path d="M660.548102 650.999304l12.492796 347.161513A511.504939 511.504939 0 0 1 511.999872 1023.999744a512.170539 512.170539 0 0 1-144.264497-20.607995l16.494929-352.392445 141.678898 42.043723 134.6389-42.043723z" fill="#FFFFFF" ></path><path d="M515.669204 557.550794c11.059197 0 17.510396-0.443733 27.042127-4.181332 58.120519-22.741328 130.824501-110.890639 130.824501-216.14928 0-122.538636-70.673049-221.866611-157.866628-221.866611-87.185045 0-157.866627 99.327975-157.866627 221.866611 0 105.087974 72.243182 193.092218 130.321034 216.02128 9.642664 3.805866 16.494929 4.309332 27.545593 4.309332z" fill="#EAC8A9" ></path><path d="M363.451642 456.763619c-19.780262-43.690656-32.324259-88.405311-37.640523-134.143966-8.217598-70.741316 14.250663-207.274615 119.876236-240.15354 55.014386-20.241062 112.511972-18.841595 172.484224 4.206932 59.878385 33.015458 91.93811 81.774913 96.187709 146.278363 4.147199 62.907718-13.277863 136.712499-52.28372 221.414345h0.017066a0.853333 0.853333 0 0 1-1.621332-0.4864c1.544533-7.850665 2.474666-13.34613 2.798932-16.486396 0.853333-8.447998 0.853333-14.387196 0-17.834662a83.601046 83.601046 0 0 1-7.227731 15.41973c-2.414933 3.993599-5.094399 7.867731-8.021332 11.613863l0.0256 0.017067a0.853333 0.853333 0 0 1-1.493333-0.785066c4.266666-11.929597 8.447998-28.02346 12.526931-48.273055 1.390933-6.911998 2.670933-18.235729 3.839999-33.937058a0.853333 0.853333 0 0 0-1.6128-0.452267c-2.380799 4.616532-6.220798 10.043731-11.50293 16.281596-6.476798 7.645865-15.871996 17.425062-28.211193 29.337593l0.034133 0.034133a0.853333 0.853333 0 0 1-1.365333-0.9728c9.745064-19.626662 16.767996-35.251191 21.094395-46.890655a282.265529 282.265529 0 0 0 8.891731-29.141326 0.853333 0.853333 0 0 0-1.595733-0.571733c-1.109333 2.269866-2.389333 4.718932-3.865599 7.338665-4.932265 8.772264-12.825597 19.643728-23.671461 32.622925l0.0256 0.017067a0.853333 0.853333 0 0 1-1.467733-0.810667c11.255464-32.460792 16.878929-59.033585 16.878929-79.726913 0-20.778661-5.674665-50.466121-17.015462-89.070911h0.008533a0.853333 0.853333 0 0 0-1.672533 0.170667c-1.262933 17.877329-4.138666 32.682658-8.618664 44.424522-4.881065 12.774397-13.900797 27.750393-27.059194 44.919455l3.566933-28.091726a0.853333 0.853333 0 0 0-0.768-0.938667 0.8192 0.8192 0 0 0-0.853333 0.5632c-3.345066 8.473598-9.053864 17.817596-17.134929 28.02346-5.367465 6.775465-16.853329 17.587196-34.474658 32.443725l0.017067 0.008534a0.853333 0.853333 0 0 1-1.28-1.109334c8.362665-12.799997 14.259196-22.724261 17.723729-29.764259 3.302399-6.707198 5.666132-13.363197 7.108265-19.976528a0.853333 0.853333 0 0 0-1.518933-0.674133c-26.495993 34.252791-53.119987 61.849585-79.87198 82.824512-27.477326 21.546661-58.555719 35.925324-93.24371 43.118923 0.529067 16.930129 1.629866 29.405859 3.310932 37.427191 1.390933 6.655998 4.300799 15.445329 8.721065 26.367993l0.017066-0.017067a0.853333 0.853333 0 0 1-1.501866 0.7936c-4.974932-7.167998-8.499198-12.55253-10.547197-16.187729a155.391961 155.391961 0 0 1-10.043731-21.503995s-4.241066 5.230932-6.118399 16.401063c-0.494933 2.969599-0.571733 8.149331-0.2304 15.547729a0.853333 0.853333 0 0 1-1.638399 0.384z" fill="#27303F" ></path></symbol><symbol id="os-icon-USE_3" viewBox="0 0 1024 1024"><path d="M511.999872 0c282.768996 0 511.999872 229.230876 511.999872 511.999872s-229.230876 511.999872-511.999872 511.999872S0 794.768868 0 511.999872 229.230876 0 511.999872 0z" fill="#B4C8ED" ></path><path d="M660.548102 650.999304c115.140238 18.841595 209.561548 64.238917 283.272462 136.191966C852.906453 929.586968 693.478227 1023.999744 511.999872 1023.999744c-180.821288 0-339.737515-93.73011-430.830826-235.255408C212.369014 663.022768 349.038846 654.643036 384.230304 651.007837c9.181864 0 76.057581 42.043723 141.678898 42.043723 66.406383 0 119.978637-37.068791 134.6389-42.043723z" fill="#7E92B5" ></path><path d="M615.841979 496.341209c-9.386664 49.373854 4.898132 101.119975 42.837323 155.238361L525.909202 693.043027l-135.7909-40.29439-2.303999-0.878933a19.046395 19.046395 0 0 0-2.628266-0.768c37.717324-53.930653 51.882654-105.531707 42.538656-154.760495h188.117286z" fill="#E1BA97" ></path><path d="M660.548102 650.999304l12.492796 347.161513A511.504939 511.504939 0 0 1 511.999872 1023.999744a512.170539 512.170539 0 0 1-144.264497-20.607995l16.494929-352.392445 141.678898 42.043723 134.6389-42.043723z" fill="#FFFFFF" ></path><path d="M515.669204 557.550794c11.059197 0 17.510396-0.443733 27.042127-4.181332 58.120519-22.741328 130.824501-110.890639 130.824501-216.14928 0-122.538636-70.673049-221.866611-157.866628-221.866611-87.185045 0-157.866627 99.327975-157.866627 221.866611 0 105.087974 72.243182 193.092218 130.321034 216.02128 9.642664 3.805866 16.494929 4.309332 27.545593 4.309332z" fill="#EAC8A9" ></path><path d="M363.451642 456.763619c-19.780262-43.690656-32.324259-88.405311-37.640523-134.143966-8.217598-70.741316 14.250663-207.274615 119.876236-240.15354 55.014386-20.241062 112.511972-18.841595 172.484224 4.206932 59.878385 33.015458 91.93811 81.774913 96.187709 146.278363 4.147199 62.907718-13.277863 136.712499-52.28372 221.414345h0.017066a0.853333 0.853333 0 0 1-1.621332-0.4864c1.544533-7.850665 2.474666-13.34613 2.798932-16.486396 0.853333-8.447998 0.853333-14.387196 0-17.834662a83.601046 83.601046 0 0 1-7.227731 15.41973c-2.414933 3.993599-5.094399 7.867731-8.021332 11.613863l0.0256 0.017067a0.853333 0.853333 0 0 1-1.493333-0.785066c4.266666-11.929597 8.447998-28.02346 12.526931-48.273055 1.390933-6.911998 2.670933-18.235729 3.839999-33.937058a0.853333 0.853333 0 0 0-1.6128-0.452267c-2.380799 4.616532-6.220798 10.043731-11.50293 16.281596-6.476798 7.645865-15.871996 17.425062-28.211193 29.337593l0.034133 0.034133a0.853333 0.853333 0 0 1-1.365333-0.9728c9.745064-19.626662 16.767996-35.251191 21.094395-46.890655a282.265529 282.265529 0 0 0 8.891731-29.141326 0.853333 0.853333 0 0 0-1.595733-0.571733c-1.109333 2.269866-2.389333 4.718932-3.865599 7.338665-4.932265 8.772264-12.825597 19.643728-23.671461 32.622925l0.0256 0.017067a0.853333 0.853333 0 0 1-1.467733-0.810667c11.255464-32.460792 16.878929-59.033585 16.878929-79.726913 0-20.778661-5.674665-50.466121-17.015462-89.070911h0.008533a0.853333 0.853333 0 0 0-1.672533 0.170667c-1.262933 17.877329-4.138666 32.682658-8.618664 44.424522-4.881065 12.774397-13.900797 27.750393-27.059194 44.919455l3.566933-28.091726a0.853333 0.853333 0 0 0-0.768-0.938667 0.8192 0.8192 0 0 0-0.853333 0.5632c-3.345066 8.473598-9.053864 17.817596-17.134929 28.02346-5.367465 6.775465-16.853329 17.587196-34.474658 32.443725l0.017067 0.008534a0.853333 0.853333 0 0 1-1.28-1.109334c8.362665-12.799997 14.259196-22.724261 17.723729-29.764259 3.302399-6.707198 5.666132-13.363197 7.108265-19.976528a0.853333 0.853333 0 0 0-1.518933-0.674133c-26.495993 34.252791-53.119987 61.849585-79.87198 82.824512-27.477326 21.546661-58.555719 35.925324-93.24371 43.118923 0.529067 16.930129 1.629866 29.405859 3.310932 37.427191 1.390933 6.655998 4.300799 15.445329 8.721065 26.367993l0.017066-0.017067a0.853333 0.853333 0 0 1-1.501866 0.7936c-4.974932-7.167998-8.499198-12.55253-10.547197-16.187729a155.391961 155.391961 0 0 1-10.043731-21.503995s-4.241066 5.230932-6.118399 16.401063c-0.494933 2.969599-0.571733 8.149331-0.2304 15.547729a0.853333 0.853333 0 0 1-1.638399 0.384z" fill="#27303F" ></path></symbol><symbol id="os-icon-company" viewBox="0 0 1024 1024"><path d="M621.6704 235.5712l36.608 14.7456v398.08h36.5568V265.0624l142.848 57.6512c24.1664 9.7792 40.0384 33.28 40.0384 59.392v493.7728a38.4 38.4 0 0 1-38.4 38.4H402.2784V833.536h219.4432V235.6224z"  ></path><path d="M619.8784 109.7216a38.4 38.4 0 0 1 38.4 38.4v727.7568a38.4 38.4 0 0 1-38.4 38.4h-435.2a38.4 38.4 0 0 1-38.4-38.4V148.1216a38.4 38.4 0 0 1 38.4-38.4h435.2z m-84.1216 457.1136H268.8a12.8 12.8 0 0 0-12.8 12.8v47.5648c0 7.0656 5.7344 12.8 12.8 12.8h266.9568a12.8 12.8 0 0 0 12.8-12.8v-47.5648a12.8 12.8 0 0 0-12.8-12.8z m0-146.2784H268.8a12.8 12.8 0 0 0-12.8 12.8v47.5648c0 7.0656 5.7344 12.8 12.8 12.8h266.9568a12.8 12.8 0 0 0 12.8-12.8v-47.5648a12.8 12.8 0 0 0-12.8-12.8z m0-146.2784H268.8a12.8 12.8 0 0 0-12.8 12.8v47.5648c0 7.0656 5.7344 12.8 12.8 12.8h266.9568a12.8 12.8 0 0 0 12.8-12.8v-47.5648a12.8 12.8 0 0 0-12.8-12.8z"  ></path></symbol><symbol id="os-icon-github_organization" viewBox="0 0 1024 1024"><path d="M511.6416 131.6352a119.296 119.296 0 0 1 118.8352 119.7056c0 51.8656-32.768 108.3392-78.6944 130.2016l9.216 1.4336 11.9808 2.9696a265.6768 265.6768 0 0 1 93.952 48.6912c31.6416 24.9344 80.9984 93.9008 80.9984 162.816 6.656-48.128-5.9904-102.0928-34.5088-143.7696 10.496-4.9664 21.76-8.4992 33.7408-10.752-29.0304-18.432-48.9984-55.808-48.9984-90.3168 0-48.3328 39.0656-87.4496 87.2448-87.4496 48.2304 0 87.296 39.1168 87.296 87.4496 0 36.352-22.1184 75.7248-53.5552 92.928 11.264 3.2768 21.8112 8.0384 31.744 14.336 28.0576 17.408 45.056 48.0768 45.056 81.1008v334.8992a38.4 38.4 0 0 1-38.4 38.4H166.4a38.4 38.4 0 0 1-38.4-38.4v-334.8992c0-33.024 17.0496-63.6928 45.056-81.152 9.9328-6.2464 20.48-11.008 31.744-14.336-31.4368-17.152-53.5552-56.576-53.5552-92.8768 0-48.3328 39.0656-87.4496 87.296-87.4496 48.1792 0 87.2448 39.1168 87.2448 87.4496 0 34.56-19.968 71.8336-48.9984 90.3168 11.9808 2.2528 23.2448 5.7856 33.792 10.6496-28.5184 41.7792-41.1648 95.744-34.56 143.872 0-68.9152 49.3568-137.8816 81.0496-162.816 33.9456-26.7264 69.9904-44.1344 108.032-52.1216l-0.5632 0.0512 6.9632-1.024c-45.9264-21.8624-78.7456-78.336-78.7456-130.2016A119.296 119.296 0 0 1 511.6416 131.584z"  ></path></symbol><symbol id="os-icon-country" viewBox="0 0 1024 1024"><path d="M512 64c-247.1936 0-448 200.8064-448 448 0 247.1936 200.8064 448 448 448 247.1936 0 448-200.8064 448-448 0-247.1936-200.8064-448-448-448z m-46.3872 831.1808a383.232 383.232 0 0 1-336.0256-380.7744c0-29.5936 3.9936-58.368 10.3936-85.6064l229.632 229.5808v48.0256a96.256 96.256 0 0 0 96 96v92.7744z m331.2128-124.0064a94.8224 94.8224 0 0 0-91.2384-67.1744h-47.9744v-143.2064A48.4864 48.4864 0 0 0 608.768 512H313.6V416h103.2192a48.4864 48.4864 0 0 0 48.7936-48.7936v-95.232h94.4128c53.5552 0 97.5872-43.9808 97.5872-97.5872v-18.432A383.2832 383.2832 0 0 1 897.536 512a380.2624 380.2624 0 0 1-100.7616 259.2256z"  ></path></symbol><symbol id="os-icon-topic" viewBox="0 0 1024 1024"><path d="M811.4176 418.7136a320.1024 320.1024 0 0 0-299.2128-206.6944A320 320 0 0 0 212.992 418.6112a199.9872 199.9872 0 0 0 50.8928 393.3696h496.2304a200.0384 200.0384 0 1 0 51.3024-393.3184z"  ></path></symbol><symbol id="os-icon-github_repo" viewBox="0 0 1024 1024"><path d="M889.7024 109.7216a24.576 24.576 0 0 1 24.576 24.576v572.5696a24.576 24.576 0 0 1-24.576 24.576l-341.1456-0.0512v109.7216h211.2512a8.192 8.192 0 0 1 8.192 8.192v56.832a8.192 8.192 0 0 1-8.192 8.192H264.192a8.192 8.192 0 0 1-8.192-8.192v-56.832a8.192 8.192 0 0 1 8.192-8.192h211.2v-109.7216H134.2976a24.576 24.576 0 0 1-24.576-24.576V134.3488a24.576 24.576 0 0 1 24.576-24.576h755.4048zM512 603.4432a36.5568 36.5568 0 1 0 0 73.1136 36.5568 36.5568 0 0 0 0-73.1136z"  ></path></symbol></svg>',function(n){var r=(r=document.getElementsByTagName("script"))[r.length-1],e=r.getAttribute("data-injectcss"),r=r.getAttribute("data-disable-injectsvg");if(!r){var i,a,o,s,l,c=function(f,h){h.parentNode.insertBefore(f,h)};if(e&&!n.__iconfont__svg__cssinject__){n.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(f){console&&console.log(f)}}i=function(){var f,h=document.createElement("div");h.innerHTML=n._iconfont_svg_string_4508010,(h=h.getElementsByTagName("svg")[0])&&(h.setAttribute("aria-hidden","true"),h.style.position="absolute",h.style.width=0,h.style.height=0,h.style.overflow="hidden",h=h,(f=document.body).firstChild?c(h,f.firstChild):f.appendChild(h))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(i,0):(a=function(){document.removeEventListener("DOMContentLoaded",a,!1),i()},document.addEventListener("DOMContentLoaded",a,!1)):document.attachEvent&&(o=i,s=n.document,l=!1,d(),s.onreadystatechange=function(){s.readyState=="complete"&&(s.onreadystatechange=null,u())})}function u(){l||(l=!0,o())}function d(){try{s.documentElement.doScroll("left")}catch{return void setTimeout(d,50)}u()}}(window);const wGt="_icon_l1sct_1",mve={icon:wGt},SGt=_Gt.glyphs.map(n=>({name:n.name,unicode:String.fromCodePoint(n.unicode_decimal)})),LNe=n=>(SGt.find(r=>r.name===n)||{unicode:""}).unicode,kNe=n=>{const{type:e,rotate:r,style:i,className:a,...o}=n;return tn.jsx("span",{role:"img",...o,style:{...i,transform:r?`rotate(${r}deg)`:void 0},className:["anticon",a,mve.anticon].join(" "),children:tn.jsx("svg",{className:[mve.icon].join(" "),"aria-hidden":"true",children:tn.jsx("use",{xlinkHref:`#${e}`})})})},oE={github_organization:"github_organization",company:"company",github_user:"github_user",country:"country"},EGt={github_repo:!0,github_organization:!0,company:!1,github_user:!0,topic:!1,country:!1},Kb={company:"#00c9c9",country:"#f08f56",github_organization:"#00c9c9",github_user:["#db9d0d","#17C76F","#1783ff","#7863ff"],github_user_3d:"#faebd7",github_repo:"#d580ff",topic:"#ff80ca"},FNe={github_organization:"company",country:"country",github_repo:"github_repo",company:"company",topic:"topic",github_user:"user",github_user_3d:"user"};var hW=(n=>(n[n.REPO_CONTRIBUTE=1]="REPO_CONTRIBUTE",n[n.REPO_ECOLOGY=2]="REPO_ECOLOGY",n[n.REPO_COMMUNITY=3]="REPO_COMMUNITY",n[n.ACCT_ACTIVITY=4]="ACCT_ACTIVITY",n[n.ACCT_PARTNER=5]="ACCT_PARTNER",n[n.ACCT_INTEREST=6]="ACCT_INTEREST",n))(hW||{});const Nu={1:"repo-contrib",2:"repo-eco",3:"repo-community",4:"dev-activity",5:"dev-partner",6:"dev-interest",repo_contribute:"repo-contrib",repo_ecology:"repo-eco",repo_community:"repo-community",acct_activity:"dev-activity",acct_partner:"dev-partner",acct_interest:"dev-interest"},CGt={[Nu[1]]:"OSGraph - Project Contribution Graph",[Nu[2]]:"OSGraph - Project Ecosystem Graph",[Nu[3]]:"OSGraph - Project Community Graph",[Nu[4]]:"OSGraph - Developer Activity Graph",[Nu[5]]:"OSGraph - Open-source Partner Graph",[Nu[6]]:"OSGraph - Open-source Interest Graph"},$Ne=3e4,MGt=["CommonDevelop","CommonIssue","CommonPR","CommonRepo","ContributeRepo","CommonStar"],TGt=n=>({github_repo:n("home.repository-placeholder"),github_user:n("home.account-placeholder")}),AGt=n=>({belong_to:{displayName:n("graph.edge.desc9"),hasArrow:!0,hasCount:!1},comment_issue:{displayName:n("graph.edge.desc7"),hasArrow:!0,hasCount:!0},code_review:{displayName:n("graph.edge.desc4"),hasArrow:!0,hasCount:!0},common_developer:{displayName:n("graph.edge.desc8"),hasArrow:!1,hasCount:!0},common_issue:{displayName:n("graph.edge.desc10"),hasArrow:!1,hasCount:!0},common_pr:{displayName:n("graph.edge.desc11"),hasArrow:!1,hasCount:!0},common_repo:{displayName:n("graph.edge.desc12"),hasArrow:!1,hasCount:!0},common_star:{displayName:n("graph.edge.desc13"),hasArrow:!1,hasCount:!0},open_issue:{displayName:n("graph.edge.desc1"),hasArrow:!0,hasCount:!0},open_pr:{displayName:n("graph.edge.desc2"),hasArrow:!0,hasCount:!0},PR:{displayName:n("graph.edge.desc5"),hasArrow:!0,hasCount:!0},push:{displayName:n("graph.edge.desc3"),hasArrow:!0,hasCount:!0},repo:{displayName:n("graph.edge.desc14"),hasArrow:!0,hasCount:!0},Star:{displayName:n("graph.edge.desc6"),hasArrow:!0,hasCount:!0}}),RGt=n=>{var a,o,s;const e=Cd.cloneDeep({...n,links:n.edges}),r={},i=(l,c)=>{var d;const u=l+c;if(r[u]){const f=Cd.nth(r[l+c],-1)+Math.PI*1/6;return r[l+c]=[...r[l+c],f],{offset:.25*((d=r[l+c])==null?void 0:d.length),rotation:f}}else return r[l+c]=[0],{offset:0,rotation:0}};return e.links=(a=e.links)==null?void 0:a.map(l=>{const c=i(l.source.id,l.target.id);return{...l,rotation:c.rotation||0,offset:c.offset||0}}),e.links=(o=e.links)==null?void 0:o.map(l=>({...l,curvature:r[l.source.id+l.target.id].length>1?2:.1})),(s=e.links)==null||s.forEach(l=>{var d,f,h,p,g,m;const c=(d=e.nodes)==null?void 0:d.find(v=>v.id===l.source),u=(f=e.nodes)==null?void 0:f.find(v=>v.id===l.target);c&&(c.neighbors||(c.neighbors=[]),c.links||(c.links=[]),(h=c.neighbors)==null||h.push(u),(p=c.links)==null||p.push(l)),u&&(u.neighbors||(u.neighbors=[]),u.links||(u.links=[]),(g=u.neighbors)==null||g.push(c),(m=u.links)==null||m.push(l))}),e},PGt=(n,e)=>{var s;const{displayName:r,hasCount:i}=AGt(e)[n==null?void 0:n.edgeType],a=` ${r}${i?"："+(((s=n==null?void 0:n.properties)==null?void 0:s.count)||0)+" ":""}`,o=new bGt(a);return o.color="lightgrey",o.textHeight=1.5,o.offset=n.offset,o},NGt=(n,e)=>{const{start:r,end:i}=e,a=Object.assign(...["x","y","z"].map(o=>({[o]:r[o]+(i[o]-r[o])/2})));a.y+=n.offset,Object.assign(n.position,a)},OGt=({text:n,iconText:e,nodeSize:r})=>{const i=document.createElement("canvas"),a=i.getContext("2d"),o=Math.min(250,r*10);i.width=o,i.height=o;const s=o/2;a.font=`${s}px os-iconfont`,a.textAlign="center",a.textBaseline="middle",a.fillStyle="rgba(255, 255, 255, 0.8)";const l=i.width/2,c=i.height/3;a.clearRect(0,0,i.width,i.height),a.fillText(e,l,c);let u=r*3;a.font=`${u}px os-iconfont`,a.fillStyle="rgba(255, 255, 255, 0.8)",a.textAlign="center",a.textBaseline="middle";const d=i.width-20;for(;a.measureText(n).width>d||u>i.height;)u-=2,a.font=`${u}px os-iconfont`;const f=i.width/2,h=c+s/4+s/2;return a.fillText(n,f,h),i},IGt=n=>n==="github_user"?Kb[n][Math.floor(Math.random()*4)]:Kb[n],DGt=(n,e)=>{var c;const r=IGt(e.nodeType),i=new fw(e.size/3,32,32),a=new dw({color:r,opacity:.75,transparent:!0}),o=new ko(i,a);n.set(e,{...a,nodeColor:r});const s=new fAe(new OL({map:new hAe(OGt({text:(c=e==null?void 0:e.properties)==null?void 0:c.name,iconText:LNe(FNe[e==null?void 0:e.nodeType]),nodeSize:e==null?void 0:e.size,iconFontSize:e==null?void 0:e.iconFontSize})),depthTest:!1})),l=(e==null?void 0:e.size)>30?20:10;return s.scale.set(l,l,1),o.add(s),o},LGt=n=>{const e=n.graphData().nodes;return Math.max(...e.map(a=>Math.hypot(a.x,a.y,a.z)))*1.5},kGt=(n,e)=>{const r=LGt(n),i=1+r/Math.hypot(e.x,e.y,e.z),a=e.x||e.y||e.z?{x:e.x*i,y:e.y*i,z:e.z*i}:{x:0,y:0,z:r};n.cameraPosition(a,e,1e3)},FGt=(n,e)=>{const{x:r,y:i,z:a}=e,o=n.camera(),s=n.renderer(),l=new ge(r,i,a);l.project(o);const c=s.domElement.clientWidth/2,u=s.domElement.clientHeight/2;return{x:l.x*c+c,y:-(l.y*u)+u}};var o6={};function pW(n){"@babel/helpers - typeof";return pW=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pW(n)}Object.defineProperty(o6,"__esModule",{value:!0});o6.CopyToClipboard=void 0;var $R=BNe(C),$Gt=BNe(crt),BGt=["text","onCopy","options","children"];function BNe(n){return n&&n.__esModule?n:{default:n}}function vve(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),r.push.apply(r,i)}return r}function yve(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vve(Object(r),!0).forEach(function(i){aQ(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):vve(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function zGt(n,e){if(n==null)return{};var r=UGt(n,e),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(a=0;a<o.length;a++)i=o[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(r[i]=n[i])}return r}function UGt(n,e){if(n==null)return{};var r={},i=Object.keys(n),a,o;for(o=0;o<i.length;o++)a=i[o],!(e.indexOf(a)>=0)&&(r[a]=n[a]);return r}function VGt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function GGt(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function jGt(n,e,r){return e&&GGt(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function HGt(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&gW(n,e)}function gW(n,e){return gW=Object.setPrototypeOf||function(i,a){return i.__proto__=a,i},gW(n,e)}function WGt(n){var e=YGt();return function(){var i=rI(n),a;if(e){var o=rI(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return qGt(this,a)}}function qGt(n,e){if(e&&(pW(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zNe(n)}function zNe(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function YGt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rI(n){return rI=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},rI(n)}function aQ(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}var UNe=function(n){HGt(r,n);var e=WGt(r);function r(){var i;VGt(this,r);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o)),aQ(zNe(i),"onClick",function(l){var c=i.props,u=c.text,d=c.onCopy,f=c.children,h=c.options,p=$R.default.Children.only(f),g=(0,$Gt.default)(u,h);d&&d(u,g),p&&p.props&&typeof p.props.onClick=="function"&&p.props.onClick(l)}),i}return jGt(r,[{key:"render",value:function(){var a=this.props;a.text,a.onCopy,a.options;var o=a.children,s=zGt(a,BGt),l=$R.default.Children.only(o);return $R.default.cloneElement(l,yve(yve({},s),{},{onClick:this.onClick}))}}]),r}($R.default.PureComponent);o6.CopyToClipboard=UNe;aQ(UNe,"defaultProps",{onCopy:void 0,options:void 0});var XGt=o6,mW=XGt.CopyToClipboard;mW.CopyToClipboard=mW;var vW=mW;const bve=(n,e)=>tn.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[tn.jsxs("div",{style:{fontSize:14,marginRight:8},children:[tn.jsx("span",{children:n}),"：",tn.jsx("span",{children:e})]}),tn.jsx(vW.CopyToClipboard,{text:e,onCopy:(r,i)=>{i?lp.success(t`copySuccess`):lp.error("复制失败，请稍后再试")},children:tn.jsx(ms,{size:"small",icon:tn.jsx(kNe,{type:"os-icon-fuzhi"}),type:"text"})})]}),xve=(n,e)=>{var p,g,m,v;const r=n[0],{nodeType:i}=r,a=EGt[i],o=(p=n[0])==null?void 0:p.properties,s=document.getElementsByClassName("tooltip")[0];s&&(s.style="border-radius:16px !important",s.style=`opacity:${Cd.isEmpty(o)?0:1} !important`);const l=(g=n[0])==null?void 0:g.id,c=!!((m=n[0])!=null&&m.nodeType),u=!!((v=n[0])!=null&&v.edgeType),d=document.createElement("div");d.style.padding="6px";const f=HP.createRoot(d),h=window.location.href.includes("shareId");return f.render(tn.jsxs(tn.Fragment,{children:[tn.jsxs(OSe,{direction:"vertical",children:[c&&bve("ID",l),Object.keys(o).filter(y=>o[y]!==void 0&&o[y]!==null).map(y=>bve(u?r==null?void 0:r.name:y,o[y]))]},l),!h&&(o==null?void 0:o.name)&&a&&tn.jsx("a",{href:`https://github.com/${o==null?void 0:o.name}`,target:"_blank",style:{padding:"10px 10px 4px 0",display:"block"},children:e("inGithub")})]})),d},_ve=async n=>{if("fonts"in document)try{return await document.fonts.load(`16px ${n}`),document.fonts.check(`16px ${n}`)}catch(e){return console.error("Error loading font:",e),!1}return!1},iI={"2D":"2D","3D":"3D"},KGt=n=>{if(!n||!Array.isArray(n==null?void 0:n.nodes)||!Array.isArray(n==null?void 0:n.edges))return{nodes:[],edges:[]};const e=new Set(n.nodes.map(o=>o.id)),r=n.edges.filter(o=>e.has(o.source)&&e.has(o.target)),i=new Set;return r.forEach(o=>{i.add(o.source),i.add(o.target)}),{nodes:n.nodes.filter(o=>i.has(o.id)),edges:r}},ZGt=(n,e)=>{var s,l,c,u;const r=new Set((s=n.nodes)==null?void 0:s.map(d=>d.id)),i=new Set((l=n.edges)==null?void 0:l.map(d=>`${d.source}-${d.target}`)),a=(c=e.nodes)==null?void 0:c.filter(d=>!r.has(d.id)),o=(u=e.edges)==null?void 0:u.filter(d=>!i.has(`${d.source}-${d.target}`));return{nodes:a,edges:o}};var yw=TypeError;const QGt={},JGt=Object.freeze(Object.defineProperty({__proto__:null,default:QGt},Symbol.toStringTag,{value:"Module"})),ejt=zW(JGt);var oQ=typeof Map=="function"&&Map.prototype,PU=Object.getOwnPropertyDescriptor&&oQ?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,aI=oQ&&PU&&typeof PU.get=="function"?PU.get:null,wve=oQ&&Map.prototype.forEach,sQ=typeof Set=="function"&&Set.prototype,NU=Object.getOwnPropertyDescriptor&&sQ?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,oI=sQ&&NU&&typeof NU.get=="function"?NU.get:null,Sve=sQ&&Set.prototype.forEach,tjt=typeof WeakMap=="function"&&WeakMap.prototype,sE=tjt?WeakMap.prototype.has:null,njt=typeof WeakSet=="function"&&WeakSet.prototype,lE=njt?WeakSet.prototype.has:null,rjt=typeof WeakRef=="function"&&WeakRef.prototype,Eve=rjt?WeakRef.prototype.deref:null,ijt=Boolean.prototype.valueOf,ajt=Object.prototype.toString,ojt=Function.prototype.toString,sjt=String.prototype.match,lQ=String.prototype.slice,um=String.prototype.replace,ljt=String.prototype.toUpperCase,Cve=String.prototype.toLowerCase,VNe=RegExp.prototype.test,Mve=Array.prototype.concat,Of=Array.prototype.join,cjt=Array.prototype.slice,Tve=Math.floor,yW=typeof BigInt=="function"?BigInt.prototype.valueOf:null,OU=Object.getOwnPropertySymbols,bW=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,w_=typeof Symbol=="function"&&typeof Symbol.iterator=="object",cE=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===w_||!0)?Symbol.toStringTag:null,GNe=Object.prototype.propertyIsEnumerable,Ave=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(n){return n.__proto__}:null);function Rve(n,e){if(n===1/0||n===-1/0||n!==n||n&&n>-1e3&&n<1e3||VNe.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof n=="number"){var i=n<0?-Tve(-n):Tve(n);if(i!==n){var a=String(i),o=lQ.call(e,a.length+1);return um.call(a,r,"$&_")+"."+um.call(um.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return um.call(e,r,"$&_")}var xW=ejt,Pve=xW.custom,Nve=WNe(Pve)?Pve:null,jNe={__proto__:null,double:'"',single:"'"},ujt={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},s6=function n(e,r,i,a){var o=r||{};if(jh(o,"quoteStyle")&&!jh(jNe,o.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(jh(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=jh(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(jh(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(jh(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return YNe(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return l?Rve(e,c):c}if(typeof e=="bigint"){var u=String(e)+"n";return l?Rve(e,u):u}var d=typeof o.depth>"u"?5:o.depth;if(typeof i>"u"&&(i=0),i>=d&&d>0&&typeof e=="object")return _W(e)?"[Array]":"[Object]";var f=Ajt(o,i);if(typeof a>"u")a=[];else if(qNe(a,e)>=0)return"[Circular]";function h(I,D,k){if(D&&(a=cjt.call(a),a.push(D)),k){var $={depth:o.depth};return jh(o,"quoteStyle")&&($.quoteStyle=o.quoteStyle),n(I,$,i+1,a)}return n(I,o,i+1,a)}if(typeof e=="function"&&!Ove(e)){var p=bjt(e),g=BR(e,h);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(g.length>0?" { "+Of.call(g,", ")+" }":"")}if(WNe(e)){var m=w_?um.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):bW.call(e);return typeof e=="object"&&!w_?jS(m):m}if(Cjt(e)){for(var v="<"+Cve.call(String(e.nodeName)),y=e.attributes||[],b=0;b<y.length;b++)v+=" "+y[b].name+"="+HNe(djt(y[b].value),"double",o);return v+=">",e.childNodes&&e.childNodes.length&&(v+="..."),v+="</"+Cve.call(String(e.nodeName))+">",v}if(_W(e)){if(e.length===0)return"[]";var x=BR(e,h);return f&&!Tjt(x)?"["+wW(x,f)+"]":"[ "+Of.call(x,", ")+" ]"}if(hjt(e)){var _=BR(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!GNe.call(e,"cause")?"{ ["+String(e)+"] "+Of.call(Mve.call("[cause]: "+h(e.cause),_),", ")+" }":_.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Of.call(_,", ")+" }"}if(typeof e=="object"&&s){if(Nve&&typeof e[Nve]=="function"&&xW)return xW(e,{depth:d-i});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(xjt(e)){var S=[];return wve&&wve.call(e,function(I,D){S.push(h(D,e,!0)+" => "+h(I,e))}),Ive("Map",aI.call(e),S,f)}if(Sjt(e)){var M=[];return Sve&&Sve.call(e,function(I){M.push(h(I,e))}),Ive("Set",oI.call(e),M,f)}if(_jt(e))return IU("WeakMap");if(Ejt(e))return IU("WeakSet");if(wjt(e))return IU("WeakRef");if(gjt(e))return jS(h(Number(e)));if(vjt(e))return jS(h(yW.call(e)));if(mjt(e))return jS(ijt.call(e));if(pjt(e))return jS(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof Qo<"u"&&e===Qo)return"{ [object globalThis] }";if(!fjt(e)&&!Ove(e)){var E=BR(e,h),T=Ave?Ave(e)===Object.prototype:e instanceof Object||e.constructor===Object,P=e instanceof Object?"":"null prototype",A=!T&&cE&&Object(e)===e&&cE in e?lQ.call(Sv(e),8,-1):P?"Object":"",N=T||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",O=N+(A||P?"["+Of.call(Mve.call([],A||[],P||[]),": ")+"] ":"");return E.length===0?O+"{}":f?O+"{"+wW(E,f)+"}":O+"{ "+Of.call(E,", ")+" }"}return String(e)};function HNe(n,e,r){var i=r.quoteStyle||e,a=jNe[i];return a+n+a}function djt(n){return um.call(String(n),/"/g,"&quot;")}function e1(n){return!cE||!(typeof n=="object"&&(cE in n||typeof n[cE]<"u"))}function _W(n){return Sv(n)==="[object Array]"&&e1(n)}function fjt(n){return Sv(n)==="[object Date]"&&e1(n)}function Ove(n){return Sv(n)==="[object RegExp]"&&e1(n)}function hjt(n){return Sv(n)==="[object Error]"&&e1(n)}function pjt(n){return Sv(n)==="[object String]"&&e1(n)}function gjt(n){return Sv(n)==="[object Number]"&&e1(n)}function mjt(n){return Sv(n)==="[object Boolean]"&&e1(n)}function WNe(n){if(w_)return n&&typeof n=="object"&&n instanceof Symbol;if(typeof n=="symbol")return!0;if(!n||typeof n!="object"||!bW)return!1;try{return bW.call(n),!0}catch{}return!1}function vjt(n){if(!n||typeof n!="object"||!yW)return!1;try{return yW.call(n),!0}catch{}return!1}var yjt=Object.prototype.hasOwnProperty||function(n){return n in this};function jh(n,e){return yjt.call(n,e)}function Sv(n){return ajt.call(n)}function bjt(n){if(n.name)return n.name;var e=sjt.call(ojt.call(n),/^function\s*([\w$]+)/);return e?e[1]:null}function qNe(n,e){if(n.indexOf)return n.indexOf(e);for(var r=0,i=n.length;r<i;r++)if(n[r]===e)return r;return-1}function xjt(n){if(!aI||!n||typeof n!="object")return!1;try{aI.call(n);try{oI.call(n)}catch{return!0}return n instanceof Map}catch{}return!1}function _jt(n){if(!sE||!n||typeof n!="object")return!1;try{sE.call(n,sE);try{lE.call(n,lE)}catch{return!0}return n instanceof WeakMap}catch{}return!1}function wjt(n){if(!Eve||!n||typeof n!="object")return!1;try{return Eve.call(n),!0}catch{}return!1}function Sjt(n){if(!oI||!n||typeof n!="object")return!1;try{oI.call(n);try{aI.call(n)}catch{return!0}return n instanceof Set}catch{}return!1}function Ejt(n){if(!lE||!n||typeof n!="object")return!1;try{lE.call(n,lE);try{sE.call(n,sE)}catch{return!0}return n instanceof WeakSet}catch{}return!1}function Cjt(n){return!n||typeof n!="object"?!1:typeof HTMLElement<"u"&&n instanceof HTMLElement?!0:typeof n.nodeName=="string"&&typeof n.getAttribute=="function"}function YNe(n,e){if(n.length>e.maxStringLength){var r=n.length-e.maxStringLength,i="... "+r+" more character"+(r>1?"s":"");return YNe(lQ.call(n,0,e.maxStringLength),e)+i}var a=ujt[e.quoteStyle||"single"];a.lastIndex=0;var o=um.call(um.call(n,a,"\\$1"),/[\x00-\x1f]/g,Mjt);return HNe(o,"single",e)}function Mjt(n){var e=n.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+ljt.call(e.toString(16))}function jS(n){return"Object("+n+")"}function IU(n){return n+" { ? }"}function Ive(n,e,r,i){var a=i?wW(r,i):Of.call(r,", ");return n+" ("+e+") {"+a+"}"}function Tjt(n){for(var e=0;e<n.length;e++)if(qNe(n[e],`
`)>=0)return!1;return!0}function Ajt(n,e){var r;if(n.indent==="	")r="	";else if(typeof n.indent=="number"&&n.indent>0)r=Of.call(Array(n.indent+1)," ");else return null;return{base:r,prev:Of.call(Array(e+1),r)}}function wW(n,e){if(n.length===0)return"";var r=`
`+e.prev+e.base;return r+Of.call(n,","+r)+`
`+e.prev}function BR(n,e){var r=_W(n),i=[];if(r){i.length=n.length;for(var a=0;a<n.length;a++)i[a]=jh(n,a)?e(n[a],n):""}var o=typeof OU=="function"?OU(n):[],s;if(w_){s={};for(var l=0;l<o.length;l++)s["$"+o[l]]=o[l]}for(var c in n)jh(n,c)&&(r&&String(Number(c))===c&&c<n.length||w_&&s["$"+c]instanceof Symbol||(VNe.call(/[^\w$]/,c)?i.push(e(c,n)+": "+e(n[c],n)):i.push(c+": "+e(n[c],n))));if(typeof OU=="function")for(var u=0;u<o.length;u++)GNe.call(n,o[u])&&i.push("["+e(o[u])+"]: "+e(n[o[u]],n));return i}var Rjt=s6,Pjt=yw,l6=function(n,e,r){for(var i=n,a;(a=i.next)!=null;i=a)if(a.key===e)return i.next=a.next,r||(a.next=n.next,n.next=a),a},Njt=function(n,e){if(n){var r=l6(n,e);return r&&r.value}},Ojt=function(n,e,r){var i=l6(n,e);i?i.value=r:n.next={key:e,next:n.next,value:r}},Ijt=function(n,e){return n?!!l6(n,e):!1},Djt=function(n,e){if(n)return l6(n,e,!0)},Ljt=function(){var e,r={assert:function(i){if(!r.has(i))throw new Pjt("Side channel does not contain "+Rjt(i))},delete:function(i){var a=e&&e.next,o=Djt(e,i);return o&&a&&a===o&&(e=void 0),!!o},get:function(i){return Njt(e,i)},has:function(i){return Ijt(e,i)},set:function(i,a){e||(e={next:void 0}),Ojt(e,i,a)}};return r},XNe=Object,kjt=Error,Fjt=EvalError,$jt=RangeError,Bjt=ReferenceError,zjt=SyntaxError,Ujt=URIError,Vjt=Math.abs,Gjt=Math.floor,jjt=Math.max,Hjt=Math.min,Wjt=Math.pow,qjt=Math.round,Yjt=Number.isNaN||function(e){return e!==e},Xjt=Yjt,Kjt=function(e){return Xjt(e)||e===0?e:e<0?-1:1},Zjt=Object.getOwnPropertyDescriptor,$P=Zjt;if($P)try{$P([],"length")}catch{$P=null}var KNe=$P,BP=Object.defineProperty||!1;if(BP)try{BP({},"a",{value:1})}catch{BP=!1}var Qjt=BP,DU,Dve;function Jjt(){return Dve||(Dve=1,DU=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),i=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var a=42;e[r]=a;for(var o in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,r);if(l.value!==a||l.enumerable!==!0)return!1}return!0}),DU}var LU,Lve;function eHt(){if(Lve)return LU;Lve=1;var n=typeof Symbol<"u"&&Symbol,e=Jjt();return LU=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},LU}var kU,kve;function ZNe(){return kve||(kve=1,kU=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),kU}var FU,Fve;function QNe(){if(Fve)return FU;Fve=1;var n=XNe;return FU=n.getPrototypeOf||null,FU}var $U,$ve;function tHt(){if($ve)return $U;$ve=1;var n="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,r=Math.max,i="[object Function]",a=function(c,u){for(var d=[],f=0;f<c.length;f+=1)d[f]=c[f];for(var h=0;h<u.length;h+=1)d[h+c.length]=u[h];return d},o=function(c,u){for(var d=[],f=u,h=0;f<c.length;f+=1,h+=1)d[h]=c[f];return d},s=function(l,c){for(var u="",d=0;d<l.length;d+=1)u+=l[d],d+1<l.length&&(u+=c);return u};return $U=function(c){var u=this;if(typeof u!="function"||e.apply(u)!==i)throw new TypeError(n+u);for(var d=o(arguments,1),f,h=function(){if(this instanceof f){var y=u.apply(this,a(d,arguments));return Object(y)===y?y:this}return u.apply(c,a(d,arguments))},p=r(0,u.length-d.length),g=[],m=0;m<p;m++)g[m]="$"+m;if(f=Function("binder","return function ("+s(g,",")+"){ return binder.apply(this,arguments); }")(h),u.prototype){var v=function(){};v.prototype=u.prototype,f.prototype=new v,v.prototype=null}return f},$U}var BU,Bve;function c6(){if(Bve)return BU;Bve=1;var n=tHt();return BU=Function.prototype.bind||n,BU}var zU,zve;function cQ(){return zve||(zve=1,zU=Function.prototype.call),zU}var UU,Uve;function JNe(){return Uve||(Uve=1,UU=Function.prototype.apply),UU}var nHt=typeof Reflect<"u"&&Reflect&&Reflect.apply,rHt=c6(),iHt=JNe(),aHt=cQ(),oHt=nHt,sHt=oHt||rHt.call(aHt,iHt),lHt=c6(),cHt=yw,uHt=cQ(),dHt=sHt,eOe=function(e){if(e.length<1||typeof e[0]!="function")throw new cHt("a function is required");return dHt(lHt,uHt,e)},VU,Vve;function fHt(){if(Vve)return VU;Vve=1;var n=eOe,e=KNe,r;try{r=[].__proto__===Array.prototype}catch(s){if(!s||typeof s!="object"||!("code"in s)||s.code!=="ERR_PROTO_ACCESS")throw s}var i=!!r&&e&&e(Object.prototype,"__proto__"),a=Object,o=a.getPrototypeOf;return VU=i&&typeof i.get=="function"?n([i.get]):typeof o=="function"?function(l){return o(l==null?l:a(l))}:!1,VU}var GU,Gve;function hHt(){if(Gve)return GU;Gve=1;var n=ZNe(),e=QNe(),r=fHt();return GU=n?function(a){return n(a)}:e?function(a){if(!a||typeof a!="object"&&typeof a!="function")throw new TypeError("getProto: not an object");return e(a)}:r?function(a){return r(a)}:null,GU}var jU,jve;function pHt(){if(jve)return jU;jve=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=c6();return jU=r.call(n,e),jU}var Br,gHt=XNe,mHt=kjt,vHt=Fjt,yHt=$jt,bHt=Bjt,S_=zjt,_x=yw,xHt=Ujt,_Ht=Vjt,wHt=Gjt,SHt=jjt,EHt=Hjt,CHt=Wjt,MHt=qjt,THt=Kjt,tOe=Function,HU=function(n){try{return tOe('"use strict"; return ('+n+").constructor;")()}catch{}},UC=KNe,AHt=Qjt,WU=function(){throw new _x},RHt=UC?function(){try{return arguments.callee,WU}catch{try{return UC(arguments,"callee").get}catch{return WU}}}():WU,pb=eHt()(),Yo=hHt(),PHt=QNe(),NHt=ZNe(),nOe=JNe(),nT=cQ(),Sb={},OHt=typeof Uint8Array>"u"||!Yo?Br:Yo(Uint8Array),J0={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Br:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Br:ArrayBuffer,"%ArrayIteratorPrototype%":pb&&Yo?Yo([][Symbol.iterator]()):Br,"%AsyncFromSyncIteratorPrototype%":Br,"%AsyncFunction%":Sb,"%AsyncGenerator%":Sb,"%AsyncGeneratorFunction%":Sb,"%AsyncIteratorPrototype%":Sb,"%Atomics%":typeof Atomics>"u"?Br:Atomics,"%BigInt%":typeof BigInt>"u"?Br:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Br:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Br:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Br:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":mHt,"%eval%":eval,"%EvalError%":vHt,"%Float16Array%":typeof Float16Array>"u"?Br:Float16Array,"%Float32Array%":typeof Float32Array>"u"?Br:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Br:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Br:FinalizationRegistry,"%Function%":tOe,"%GeneratorFunction%":Sb,"%Int8Array%":typeof Int8Array>"u"?Br:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Br:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Br:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":pb&&Yo?Yo(Yo([][Symbol.iterator]())):Br,"%JSON%":typeof JSON=="object"?JSON:Br,"%Map%":typeof Map>"u"?Br:Map,"%MapIteratorPrototype%":typeof Map>"u"||!pb||!Yo?Br:Yo(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":gHt,"%Object.getOwnPropertyDescriptor%":UC,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Br:Promise,"%Proxy%":typeof Proxy>"u"?Br:Proxy,"%RangeError%":yHt,"%ReferenceError%":bHt,"%Reflect%":typeof Reflect>"u"?Br:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Br:Set,"%SetIteratorPrototype%":typeof Set>"u"||!pb||!Yo?Br:Yo(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Br:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":pb&&Yo?Yo(""[Symbol.iterator]()):Br,"%Symbol%":pb?Symbol:Br,"%SyntaxError%":S_,"%ThrowTypeError%":RHt,"%TypedArray%":OHt,"%TypeError%":_x,"%Uint8Array%":typeof Uint8Array>"u"?Br:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Br:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Br:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Br:Uint32Array,"%URIError%":xHt,"%WeakMap%":typeof WeakMap>"u"?Br:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Br:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Br:WeakSet,"%Function.prototype.call%":nT,"%Function.prototype.apply%":nOe,"%Object.defineProperty%":AHt,"%Object.getPrototypeOf%":PHt,"%Math.abs%":_Ht,"%Math.floor%":wHt,"%Math.max%":SHt,"%Math.min%":EHt,"%Math.pow%":CHt,"%Math.round%":MHt,"%Math.sign%":THt,"%Reflect.getPrototypeOf%":NHt};if(Yo)try{null.error}catch(n){var IHt=Yo(Yo(n));J0["%Error.prototype%"]=IHt}var DHt=function n(e){var r;if(e==="%AsyncFunction%")r=HU("async function () {}");else if(e==="%GeneratorFunction%")r=HU("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=HU("async function* () {}");else if(e==="%AsyncGenerator%"){var i=n("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var a=n("%AsyncGenerator%");a&&Yo&&(r=Yo(a.prototype))}return J0[e]=r,r},Hve={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},rT=c6(),sI=pHt(),LHt=rT.call(nT,Array.prototype.concat),kHt=rT.call(nOe,Array.prototype.splice),Wve=rT.call(nT,String.prototype.replace),lI=rT.call(nT,String.prototype.slice),FHt=rT.call(nT,RegExp.prototype.exec),$Ht=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,BHt=/\\(\\)?/g,zHt=function(e){var r=lI(e,0,1),i=lI(e,-1);if(r==="%"&&i!=="%")throw new S_("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&r!=="%")throw new S_("invalid intrinsic syntax, expected opening `%`");var a=[];return Wve(e,$Ht,function(o,s,l,c){a[a.length]=l?Wve(c,BHt,"$1"):s||o}),a},UHt=function(e,r){var i=e,a;if(sI(Hve,i)&&(a=Hve[i],i="%"+a[0]+"%"),sI(J0,i)){var o=J0[i];if(o===Sb&&(o=DHt(i)),typeof o>"u"&&!r)throw new _x("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:a,name:i,value:o}}throw new S_("intrinsic "+e+" does not exist!")},uQ=function(e,r){if(typeof e!="string"||e.length===0)throw new _x("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new _x('"allowMissing" argument must be a boolean');if(FHt(/^%?[^%]*%?$/,e)===null)throw new S_("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=zHt(e),a=i.length>0?i[0]:"",o=UHt("%"+a+"%",r),s=o.name,l=o.value,c=!1,u=o.alias;u&&(a=u[0],kHt(i,LHt([0,1],u)));for(var d=1,f=!0;d<i.length;d+=1){var h=i[d],p=lI(h,0,1),g=lI(h,-1);if((p==='"'||p==="'"||p==="`"||g==='"'||g==="'"||g==="`")&&p!==g)throw new S_("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(c=!0),a+="."+h,s="%"+a+"%",sI(J0,s))l=J0[s];else if(l!=null){if(!(h in l)){if(!r)throw new _x("base intrinsic for "+e+" exists, but the property is not available.");return}if(UC&&d+1>=i.length){var m=UC(l,h);f=!!m,f&&"get"in m&&!("originalValue"in m.get)?l=m.get:l=l[h]}else f=sI(l,h),l=l[h];f&&!c&&(J0[s]=l)}}return l},rOe=uQ,iOe=eOe,VHt=iOe([rOe("%String.prototype.indexOf%")]),aOe=function(e,r){var i=rOe(e,!!r);return typeof i=="function"&&VHt(e,".prototype.")>-1?iOe([i]):i},GHt=uQ,iT=aOe,jHt=s6,HHt=yw,qve=GHt("%Map%",!0),WHt=iT("Map.prototype.get",!0),qHt=iT("Map.prototype.set",!0),YHt=iT("Map.prototype.has",!0),XHt=iT("Map.prototype.delete",!0),KHt=iT("Map.prototype.size",!0),oOe=!!qve&&function(){var e,r={assert:function(i){if(!r.has(i))throw new HHt("Side channel does not contain "+jHt(i))},delete:function(i){if(e){var a=XHt(e,i);return KHt(e)===0&&(e=void 0),a}return!1},get:function(i){if(e)return WHt(e,i)},has:function(i){return e?YHt(e,i):!1},set:function(i,a){e||(e=new qve),qHt(e,i,a)}};return r},ZHt=uQ,u6=aOe,QHt=s6,zR=oOe,JHt=yw,gb=ZHt("%WeakMap%",!0),eWt=u6("WeakMap.prototype.get",!0),tWt=u6("WeakMap.prototype.set",!0),nWt=u6("WeakMap.prototype.has",!0),rWt=u6("WeakMap.prototype.delete",!0),iWt=gb?function(){var e,r,i={assert:function(a){if(!i.has(a))throw new JHt("Side channel does not contain "+QHt(a))},delete:function(a){if(gb&&a&&(typeof a=="object"||typeof a=="function")){if(e)return rWt(e,a)}else if(zR&&r)return r.delete(a);return!1},get:function(a){return gb&&a&&(typeof a=="object"||typeof a=="function")&&e?eWt(e,a):r&&r.get(a)},has:function(a){return gb&&a&&(typeof a=="object"||typeof a=="function")&&e?nWt(e,a):!!r&&r.has(a)},set:function(a,o){gb&&a&&(typeof a=="object"||typeof a=="function")?(e||(e=new gb),tWt(e,a,o)):zR&&(r||(r=zR()),r.set(a,o))}};return i}:zR,aWt=yw,oWt=s6,sWt=Ljt,lWt=oOe,cWt=iWt,uWt=cWt||lWt||sWt,dWt=function(){var e,r={assert:function(i){if(!r.has(i))throw new aWt("Side channel does not contain "+oWt(i))},delete:function(i){return!!e&&e.delete(i)},get:function(i){return e&&e.get(i)},has:function(i){return!!e&&e.has(i)},set:function(i,a){e||(e=uWt()),e.set(i,a)}};return r},fWt=String.prototype.replace,hWt=/%20/g,qU={RFC1738:"RFC1738",RFC3986:"RFC3986"},dQ={default:qU.RFC3986,formatters:{RFC1738:function(n){return fWt.call(n,hWt,"+")},RFC3986:function(n){return String(n)}},RFC1738:qU.RFC1738,RFC3986:qU.RFC3986},pWt=dQ,YU=Object.prototype.hasOwnProperty,x0=Array.isArray,wf=function(){for(var n=[],e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n}(),gWt=function(e){for(;e.length>1;){var r=e.pop(),i=r.obj[r.prop];if(x0(i)){for(var a=[],o=0;o<i.length;++o)typeof i[o]<"u"&&a.push(i[o]);r.obj[r.prop]=a}}},sOe=function(e,r){for(var i=r&&r.plainObjects?{__proto__:null}:{},a=0;a<e.length;++a)typeof e[a]<"u"&&(i[a]=e[a]);return i},mWt=function n(e,r,i){if(!r)return e;if(typeof r!="object"&&typeof r!="function"){if(x0(e))e.push(r);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!YU.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var a=e;return x0(e)&&!x0(r)&&(a=sOe(e,i)),x0(e)&&x0(r)?(r.forEach(function(o,s){if(YU.call(e,s)){var l=e[s];l&&typeof l=="object"&&o&&typeof o=="object"?e[s]=n(l,o,i):e.push(o)}else e[s]=o}),e):Object.keys(r).reduce(function(o,s){var l=r[s];return YU.call(o,s)?o[s]=n(o[s],l,i):o[s]=l,o},a)},vWt=function(e,r){return Object.keys(r).reduce(function(i,a){return i[a]=r[a],i},e)},yWt=function(n,e,r){var i=n.replace(/\+/g," ");if(r==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},XU=1024,bWt=function(e,r,i,a,o){if(e.length===0)return e;var s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),i==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(p){return"%26%23"+parseInt(p.slice(2),16)+"%3B"});for(var l="",c=0;c<s.length;c+=XU){for(var u=s.length>=XU?s.slice(c,c+XU):s,d=[],f=0;f<u.length;++f){var h=u.charCodeAt(f);if(h===45||h===46||h===95||h===126||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||o===pWt.RFC1738&&(h===40||h===41)){d[d.length]=u.charAt(f);continue}if(h<128){d[d.length]=wf[h];continue}if(h<2048){d[d.length]=wf[192|h>>6]+wf[128|h&63];continue}if(h<55296||h>=57344){d[d.length]=wf[224|h>>12]+wf[128|h>>6&63]+wf[128|h&63];continue}f+=1,h=65536+((h&1023)<<10|u.charCodeAt(f)&1023),d[d.length]=wf[240|h>>18]+wf[128|h>>12&63]+wf[128|h>>6&63]+wf[128|h&63]}l+=d.join("")}return l},xWt=function(e){for(var r=[{obj:{o:e},prop:"o"}],i=[],a=0;a<r.length;++a)for(var o=r[a],s=o.obj[o.prop],l=Object.keys(s),c=0;c<l.length;++c){var u=l[c],d=s[u];typeof d=="object"&&d!==null&&i.indexOf(d)===-1&&(r.push({obj:s,prop:u}),i.push(d))}return gWt(r),e},_Wt=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},wWt=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},SWt=function(e,r){return[].concat(e,r)},EWt=function(e,r){if(x0(e)){for(var i=[],a=0;a<e.length;a+=1)i.push(r(e[a]));return i}return r(e)},lOe={arrayToObject:sOe,assign:vWt,combine:SWt,compact:xWt,decode:yWt,encode:bWt,isBuffer:wWt,isRegExp:_Wt,maybeMap:EWt,merge:mWt},cOe=dWt,zP=lOe,uE=dQ,CWt=Object.prototype.hasOwnProperty,uOe={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},Af=Array.isArray,MWt=Array.prototype.push,dOe=function(n,e){MWt.apply(n,Af(e)?e:[e])},TWt=Date.prototype.toISOString,Yve=uE.default,Co={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:zP.encode,encodeValuesOnly:!1,filter:void 0,format:Yve,formatter:uE.formatters[Yve],indices:!1,serializeDate:function(e){return TWt.call(e)},skipNulls:!1,strictNullHandling:!1},AWt=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},KU={},RWt=function n(e,r,i,a,o,s,l,c,u,d,f,h,p,g,m,v,y,b){for(var x=e,_=b,S=0,M=!1;(_=_.get(KU))!==void 0&&!M;){var E=_.get(e);if(S+=1,typeof E<"u"){if(E===S)throw new RangeError("Cyclic object value");M=!0}typeof _.get(KU)>"u"&&(S=0)}if(typeof d=="function"?x=d(r,x):x instanceof Date?x=p(x):i==="comma"&&Af(x)&&(x=zP.maybeMap(x,function(z){return z instanceof Date?p(z):z})),x===null){if(s)return u&&!v?u(r,Co.encoder,y,"key",g):r;x=""}if(AWt(x)||zP.isBuffer(x)){if(u){var T=v?r:u(r,Co.encoder,y,"key",g);return[m(T)+"="+m(u(x,Co.encoder,y,"value",g))]}return[m(r)+"="+m(String(x))]}var P=[];if(typeof x>"u")return P;var A;if(i==="comma"&&Af(x))v&&u&&(x=zP.maybeMap(x,u)),A=[{value:x.length>0?x.join(",")||null:void 0}];else if(Af(d))A=d;else{var N=Object.keys(x);A=f?N.sort(f):N}var O=c?String(r).replace(/\./g,"%2E"):String(r),I=a&&Af(x)&&x.length===1?O+"[]":O;if(o&&Af(x)&&x.length===0)return I+"[]";for(var D=0;D<A.length;++D){var k=A[D],$=typeof k=="object"&&k&&typeof k.value<"u"?k.value:x[k];if(!(l&&$===null)){var B=h&&c?String(k).replace(/\./g,"%2E"):String(k),F=Af(x)?typeof i=="function"?i(I,B):I:I+(h?"."+B:"["+B+"]");b.set(e,S);var G=cOe();G.set(KU,b),dOe(P,n($,F,i,a,o,s,l,c,i==="comma"&&v&&Af(x)?null:u,d,f,h,p,g,m,v,y,G))}}return P},PWt=function(e){if(!e)return Co;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||Co.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=uE.default;if(typeof e.format<"u"){if(!CWt.call(uE.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var a=uE.formatters[i],o=Co.filter;(typeof e.filter=="function"||Af(e.filter))&&(o=e.filter);var s;if(e.arrayFormat in uOe?s=e.arrayFormat:"indices"in e?s=e.indices?"indices":"repeat":s=Co.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var l=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:Co.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Co.addQueryPrefix,allowDots:l,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Co.allowEmptyArrays,arrayFormat:s,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Co.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Co.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Co.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Co.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Co.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Co.encodeValuesOnly,filter:o,format:i,formatter:a,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Co.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Co.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Co.strictNullHandling}},NWt=function(n,e){var r=n,i=PWt(e),a,o;typeof i.filter=="function"?(o=i.filter,r=o("",r)):Af(i.filter)&&(o=i.filter,a=o);var s=[];if(typeof r!="object"||r===null)return"";var l=uOe[i.arrayFormat],c=l==="comma"&&i.commaRoundTrip;a||(a=Object.keys(r)),i.sort&&a.sort(i.sort);for(var u=cOe(),d=0;d<a.length;++d){var f=a[d],h=r[f];i.skipNulls&&h===null||dOe(s,RWt(h,f,l,c,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,u))}var p=s.join(i.delimiter),g=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),p.length>0?g+p:""},Py=lOe,SW=Object.prototype.hasOwnProperty,Xve=Array.isArray,Ia={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Py.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},OWt=function(n){return n.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},fOe=function(n,e,r){if(n&&typeof n=="string"&&e.comma&&n.indexOf(",")>-1)return n.split(",");if(e.throwOnLimitExceeded&&r>=e.arrayLimit)throw new RangeError("Array limit exceeded. Only "+e.arrayLimit+" element"+(e.arrayLimit===1?"":"s")+" allowed in an array.");return n},IWt="utf8=%26%2310003%3B",DWt="utf8=%E2%9C%93",LWt=function(e,r){var i={__proto__:null},a=r.ignoreQueryPrefix?e.replace(/^\?/,""):e;a=a.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var o=r.parameterLimit===1/0?void 0:r.parameterLimit,s=a.split(r.delimiter,r.throwOnLimitExceeded?o+1:o);if(r.throwOnLimitExceeded&&s.length>o)throw new RangeError("Parameter limit exceeded. Only "+o+" parameter"+(o===1?"":"s")+" allowed.");var l=-1,c,u=r.charset;if(r.charsetSentinel)for(c=0;c<s.length;++c)s[c].indexOf("utf8=")===0&&(s[c]===DWt?u="utf-8":s[c]===IWt&&(u="iso-8859-1"),l=c,c=s.length);for(c=0;c<s.length;++c)if(c!==l){var d=s[c],f=d.indexOf("]="),h=f===-1?d.indexOf("="):f+1,p,g;h===-1?(p=r.decoder(d,Ia.decoder,u,"key"),g=r.strictNullHandling?null:""):(p=r.decoder(d.slice(0,h),Ia.decoder,u,"key"),g=Py.maybeMap(fOe(d.slice(h+1),r,Xve(i[p])?i[p].length:0),function(v){return r.decoder(v,Ia.decoder,u,"value")})),g&&r.interpretNumericEntities&&u==="iso-8859-1"&&(g=OWt(String(g))),d.indexOf("[]=")>-1&&(g=Xve(g)?[g]:g);var m=SW.call(i,p);m&&r.duplicates==="combine"?i[p]=Py.combine(i[p],g):(!m||r.duplicates==="last")&&(i[p]=g)}return i},kWt=function(n,e,r,i){var a=0;if(n.length>0&&n[n.length-1]==="[]"){var o=n.slice(0,-1).join("");a=Array.isArray(e)&&e[o]?e[o].length:0}for(var s=i?e:fOe(e,r,a),l=n.length-1;l>=0;--l){var c,u=n[l];if(u==="[]"&&r.parseArrays)c=r.allowEmptyArrays&&(s===""||r.strictNullHandling&&s===null)?[]:Py.combine([],s);else{c=r.plainObjects?{__proto__:null}:{};var d=u.charAt(0)==="["&&u.charAt(u.length-1)==="]"?u.slice(1,-1):u,f=r.decodeDotInKeys?d.replace(/%2E/g,"."):d,h=parseInt(f,10);!r.parseArrays&&f===""?c={0:s}:!isNaN(h)&&u!==f&&String(h)===f&&h>=0&&r.parseArrays&&h<=r.arrayLimit?(c=[],c[h]=s):f!=="__proto__"&&(c[f]=s)}s=c}return s},FWt=function(e,r,i,a){if(e){var o=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,c=i.depth>0&&s.exec(o),u=c?o.slice(0,c.index):o,d=[];if(u){if(!i.plainObjects&&SW.call(Object.prototype,u)&&!i.allowPrototypes)return;d.push(u)}for(var f=0;i.depth>0&&(c=l.exec(o))!==null&&f<i.depth;){if(f+=1,!i.plainObjects&&SW.call(Object.prototype,c[1].slice(1,-1))&&!i.allowPrototypes)return;d.push(c[1])}if(c){if(i.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+i.depth+" and strictDepth is true");d.push("["+o.slice(c.index)+"]")}return kWt(d,r,i,a)}},$Wt=function(e){if(!e)return Ia;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof e.throwOnLimitExceeded<"u"&&typeof e.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var r=typeof e.charset>"u"?Ia.charset:e.charset,i=typeof e.duplicates>"u"?Ia.duplicates:e.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var a=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Ia.allowDots:!!e.allowDots;return{allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ia.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Ia.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Ia.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Ia.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ia.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Ia.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Ia.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Ia.decoder,delimiter:typeof e.delimiter=="string"||Py.isRegExp(e.delimiter)?e.delimiter:Ia.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Ia.depth,duplicates:i,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Ia.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Ia.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Ia.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:Ia.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ia.strictNullHandling,throwOnLimitExceeded:typeof e.throwOnLimitExceeded=="boolean"?e.throwOnLimitExceeded:!1}},BWt=function(n,e){var r=$Wt(e);if(n===""||n===null||typeof n>"u")return r.plainObjects?{__proto__:null}:{};for(var i=typeof n=="string"?LWt(n,r):n,a=r.plainObjects?{__proto__:null}:{},o=Object.keys(i),s=0;s<o.length;++s){var l=o[s],c=FWt(l,i[l],r,typeof n=="string");a=Py.merge(a,c,r)}return r.allowSparse===!0?a:Py.compact(a)},zWt=NWt,UWt=BWt,VWt=dQ,hOe={formats:VWt,parse:UWt,stringify:zWt},fs=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global||{},al={searchParams:"URLSearchParams"in fs,iterable:"Symbol"in fs&&"iterator"in Symbol,blob:"FileReader"in fs&&"Blob"in fs&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in fs,arrayBuffer:"ArrayBuffer"in fs};function GWt(n){return n&&DataView.prototype.isPrototypeOf(n)}if(al.arrayBuffer)var jWt=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],HWt=ArrayBuffer.isView||function(n){return n&&jWt.indexOf(Object.prototype.toString.call(n))>-1};function bw(n){if(typeof n!="string"&&(n=String(n)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(n)||n==="")throw new TypeError('Invalid character in header field name: "'+n+'"');return n.toLowerCase()}function fQ(n){return typeof n!="string"&&(n=String(n)),n}function hQ(n){var e={next:function(){var r=n.shift();return{done:r===void 0,value:r}}};return al.iterable&&(e[Symbol.iterator]=function(){return e}),e}function Go(n){this.map={},n instanceof Go?n.forEach(function(e,r){this.append(r,e)},this):Array.isArray(n)?n.forEach(function(e){if(e.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):n&&Object.getOwnPropertyNames(n).forEach(function(e){this.append(e,n[e])},this)}Go.prototype.append=function(n,e){n=bw(n),e=fQ(e);var r=this.map[n];this.map[n]=r?r+", "+e:e};Go.prototype.delete=function(n){delete this.map[bw(n)]};Go.prototype.get=function(n){return n=bw(n),this.has(n)?this.map[n]:null};Go.prototype.has=function(n){return this.map.hasOwnProperty(bw(n))};Go.prototype.set=function(n,e){this.map[bw(n)]=fQ(e)};Go.prototype.forEach=function(n,e){for(var r in this.map)this.map.hasOwnProperty(r)&&n.call(e,this.map[r],r,this)};Go.prototype.keys=function(){var n=[];return this.forEach(function(e,r){n.push(r)}),hQ(n)};Go.prototype.values=function(){var n=[];return this.forEach(function(e){n.push(e)}),hQ(n)};Go.prototype.entries=function(){var n=[];return this.forEach(function(e,r){n.push([r,e])}),hQ(n)};al.iterable&&(Go.prototype[Symbol.iterator]=Go.prototype.entries);function ZU(n){if(!n._noBody){if(n.bodyUsed)return Promise.reject(new TypeError("Already read"));n.bodyUsed=!0}}function pOe(n){return new Promise(function(e,r){n.onload=function(){e(n.result)},n.onerror=function(){r(n.error)}})}function WWt(n){var e=new FileReader,r=pOe(e);return e.readAsArrayBuffer(n),r}function qWt(n){var e=new FileReader,r=pOe(e),i=/charset=([A-Za-z0-9_-]+)/.exec(n.type),a=i?i[1]:"utf-8";return e.readAsText(n,a),r}function YWt(n){for(var e=new Uint8Array(n),r=new Array(e.length),i=0;i<e.length;i++)r[i]=String.fromCharCode(e[i]);return r.join("")}function Kve(n){if(n.slice)return n.slice(0);var e=new Uint8Array(n.byteLength);return e.set(new Uint8Array(n)),e.buffer}function gOe(){return this.bodyUsed=!1,this._initBody=function(n){this.bodyUsed=this.bodyUsed,this._bodyInit=n,n?typeof n=="string"?this._bodyText=n:al.blob&&Blob.prototype.isPrototypeOf(n)?this._bodyBlob=n:al.formData&&FormData.prototype.isPrototypeOf(n)?this._bodyFormData=n:al.searchParams&&URLSearchParams.prototype.isPrototypeOf(n)?this._bodyText=n.toString():al.arrayBuffer&&al.blob&&GWt(n)?(this._bodyArrayBuffer=Kve(n.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):al.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(n)||HWt(n))?this._bodyArrayBuffer=Kve(n):this._bodyText=n=Object.prototype.toString.call(n):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof n=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):al.searchParams&&URLSearchParams.prototype.isPrototypeOf(n)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},al.blob&&(this.blob=function(){var n=ZU(this);if(n)return n;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var n=ZU(this);return n||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(al.blob)return this.blob().then(WWt);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var n=ZU(this);if(n)return n;if(this._bodyBlob)return qWt(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(YWt(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},al.formData&&(this.formData=function(){return this.text().then(ZWt)}),this.json=function(){return this.text().then(JSON.parse)},this}var XWt=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function KWt(n){var e=n.toUpperCase();return XWt.indexOf(e)>-1?e:n}function Ny(n,e){if(!(this instanceof Ny))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var r=e.body;if(n instanceof Ny){if(n.bodyUsed)throw new TypeError("Already read");this.url=n.url,this.credentials=n.credentials,e.headers||(this.headers=new Go(n.headers)),this.method=n.method,this.mode=n.mode,this.signal=n.signal,!r&&n._bodyInit!=null&&(r=n._bodyInit,n.bodyUsed=!0)}else this.url=String(n);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new Go(e.headers)),this.method=KWt(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||function(){if("AbortController"in fs){var o=new AbortController;return o.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+new Date().getTime());else{var a=/\?/;this.url+=(a.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}Ny.prototype.clone=function(){return new Ny(this,{body:this._bodyInit})};function ZWt(n){var e=new FormData;return n.trim().split("&").forEach(function(r){if(r){var i=r.split("="),a=i.shift().replace(/\+/g," "),o=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(a),decodeURIComponent(o))}}),e}function QWt(n){var e=new Go,r=n.replace(/\r?\n[\t ]+/g," ");return r.split("\r").map(function(i){return i.indexOf(`
`)===0?i.substr(1,i.length):i}).forEach(function(i){var a=i.split(":"),o=a.shift().trim();if(o){var s=a.join(":").trim();try{e.append(o,s)}catch(l){console.warn("Response "+l.message)}}}),e}gOe.call(Ny.prototype);function dh(n,e){if(!(this instanceof dh))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new Go(e.headers),this.url=e.url||"",this._initBody(n)}gOe.call(dh.prototype);dh.prototype.clone=function(){return new dh(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Go(this.headers),url:this.url})};dh.error=function(){var n=new dh(null,{status:200,statusText:""});return n.ok=!1,n.status=0,n.type="error",n};var JWt=[301,302,303,307,308];dh.redirect=function(n,e){if(JWt.indexOf(e)===-1)throw new RangeError("Invalid status code");return new dh(null,{status:e,headers:{location:n}})};var _0=fs.DOMException;try{new _0}catch{_0=function(e,r){this.message=e,this.name=r;var i=Error(e);this.stack=i.stack},_0.prototype=Object.create(Error.prototype),_0.prototype.constructor=_0}function mOe(n,e){return new Promise(function(r,i){var a=new Ny(n,e);if(a.signal&&a.signal.aborted)return i(new _0("Aborted","AbortError"));var o=new XMLHttpRequest;function s(){o.abort()}o.onload=function(){var u={statusText:o.statusText,headers:QWt(o.getAllResponseHeaders()||"")};a.url.indexOf("file://")===0&&(o.status<200||o.status>599)?u.status=200:u.status=o.status,u.url="responseURL"in o?o.responseURL:u.headers.get("X-Request-URL");var d="response"in o?o.response:o.responseText;setTimeout(function(){r(new dh(d,u))},0)},o.onerror=function(){setTimeout(function(){i(new TypeError("Network request failed"))},0)},o.ontimeout=function(){setTimeout(function(){i(new TypeError("Network request timed out"))},0)},o.onabort=function(){setTimeout(function(){i(new _0("Aborted","AbortError"))},0)};function l(u){try{return u===""&&fs.location.href?fs.location.href:u}catch{return u}}if(o.open(a.method,l(a.url),!0),a.credentials==="include"?o.withCredentials=!0:a.credentials==="omit"&&(o.withCredentials=!1),"responseType"in o&&(al.blob?o.responseType="blob":al.arrayBuffer&&(o.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof Go||fs.Headers&&e.headers instanceof fs.Headers)){var c=[];Object.getOwnPropertyNames(e.headers).forEach(function(u){c.push(bw(u)),o.setRequestHeader(u,fQ(e.headers[u]))}),a.headers.forEach(function(u,d){c.indexOf(d)===-1&&o.setRequestHeader(d,u)})}else a.headers.forEach(function(u,d){o.setRequestHeader(d,u)});a.signal&&(a.signal.addEventListener("abort",s),o.onreadystatechange=function(){o.readyState===4&&a.signal.removeEventListener("abort",s)}),o.send(typeof a._bodyInit>"u"?null:a._bodyInit)})}mOe.polyfill=!0;fs.fetch||(fs.fetch=mOe,fs.Headers=Go,fs.Request=Ny,fs.Response=dh);self.fetch.bind(self);var vOe={};function Zve(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),r.push.apply(r,i)}return r}function zl(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Zve(Object(r),!0).forEach(function(i){eqt(n,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):Zve(Object(r)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))})}return n}function Dm(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dm=function(e){return typeof e}:Dm=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dm(n)}function aT(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Qve(n,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function pQ(n,e,r){return e&&Qve(n.prototype,e),r&&Qve(n,r),n}function eqt(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function yOe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&GC(n,e)}function VC(n){return VC=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},VC(n)}function GC(n,e){return GC=Object.setPrototypeOf||function(i,a){return i.__proto__=a,i},GC(n,e)}function bOe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function UP(n,e,r){return bOe()?UP=Reflect.construct:UP=function(a,o,s){var l=[null];l.push.apply(l,o);var c=Function.bind.apply(a,l),u=new c;return s&&GC(u,s.prototype),u},UP.apply(null,arguments)}function tqt(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function cI(n){var e=typeof Map=="function"?new Map:void 0;return cI=function(i){if(i===null||!tqt(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,a)}function a(){return UP(i,arguments,VC(this).constructor)}return a.prototype=Object.create(i.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),GC(a,i)},cI(n)}function nqt(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function rqt(n,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nqt(n)}function xOe(n){var e=bOe();return function(){var i=VC(n),a;if(e){var o=VC(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return rqt(this,a)}}function Lf(n){return iqt(n)||aqt(n)||oqt(n)||sqt()}function iqt(n){if(Array.isArray(n))return EW(n)}function aqt(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function oqt(n,e){if(n){if(typeof n=="string")return EW(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EW(n,e)}}function EW(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=n[r];return i}function sqt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lqt(n){if(!Array.isArray(n))throw new TypeError("Middlewares must be an array!");for(var e=n.length,r=0;r<e;r++)if(typeof n[r]!="function")throw new TypeError("Middleware must be componsed of function");return function(a,o){var s=-1;function l(c){if(c<=s)return Promise.reject(new Error("next() should not be called multiple times in one middleware!"));s=c;var u=n[c]||o;if(!u)return Promise.resolve();try{return Promise.resolve(u(a,function(){return l(c+1)}))}catch(d){return Promise.reject(d)}}return l(0)}}var ef=function(){function n(e){if(aT(this,n),!Array.isArray(e))throw new TypeError("Default middlewares must be an array!");this.defaultMiddlewares=Lf(e),this.middlewares=[]}return pQ(n,[{key:"use",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{global:!1,core:!1,defaultInstance:!1},a=!1,o=!1,s=!1;if(typeof i=="number"?(process,a=!0,o=!1):Dm(i)==="object"&&i&&(o=i.global||!1,a=i.core||!1,s=i.defaultInstance||!1),o){n.globalMiddlewares.splice(n.globalMiddlewares.length-n.defaultGlobalMiddlewaresLength,0,r);return}if(a){n.coreMiddlewares.splice(n.coreMiddlewares.length-n.defaultCoreMiddlewaresLength,0,r);return}if(s){this.defaultMiddlewares.push(r);return}this.middlewares.push(r)}},{key:"execute",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=lqt([].concat(Lf(this.middlewares),Lf(this.defaultMiddlewares),Lf(n.globalMiddlewares),Lf(n.coreMiddlewares)));return i(r)}}]),n}();ef.globalMiddlewares=[];ef.defaultGlobalMiddlewaresLength=0;ef.coreMiddlewares=[];ef.defaultCoreMiddlewaresLength=0;var cqt=function(){function n(e){aT(this,n),this.cache=new Map,this.timer={},this.extendOptions(e)}return pQ(n,[{key:"extendOptions",value:function(r){this.maxCache=r.maxCache||0}},{key:"get",value:function(r){return this.cache.get(JSON.stringify(r))}},{key:"set",value:function(r,i){var a=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:6e4;if(this.maxCache>0&&this.cache.size>=this.maxCache){var s=Lf(this.cache.keys())[0];this.cache.delete(s),this.timer[s]&&clearTimeout(this.timer[s])}var l=JSON.stringify(r);this.cache.set(l,i),o>0&&(this.timer[l]=setTimeout(function(){a.cache.delete(l),delete a.timer[l]},o))}},{key:"delete",value:function(r){var i=JSON.stringify(r);return delete this.timer[i],this.cache.delete(i)}},{key:"clear",value:function(){return this.timer={},this.cache.clear()}}]),n}(),_Oe=function(n){yOe(r,n);var e=xOe(r);function r(i,a){var o,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"RequestError";return aT(this,r),o=e.call(this,i),o.name="RequestError",o.request=a,o.type=s,o}return r}(cI(Error)),C2=function(n){yOe(r,n);var e=xOe(r);function r(i,a,o,s){var l,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"ResponseError";return aT(this,r),l=e.call(this,a||i.statusText),l.name="ResponseError",l.data=o,l.response=i,l.request=s,l.type=c,l}return r}(cI(Error));function uqt(n){return new Promise(function(e,r){var i=new FileReader;i.onload=function(){e(i.result)},i.onerror=r,i.readAsText(n,"GBK")})}function Jve(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;try{return JSON.parse(n)}catch{if(e)throw new C2(r,"JSON.parse fail",n,i,"ParseError")}return n}function dqt(n,e,r){return new Promise(function(i,a){setTimeout(function(){a(new _Oe(e||"timeout of ".concat(n,"ms exceeded"),r,"Timeout"))},n)})}function e0e(n){return new Promise(function(e,r){n.cancelToken&&n.cancelToken.promise.then(function(i){r(i)})})}var fqt=Object.prototype.toString;function wOe(){var n;return typeof process<"u"&&fqt.call(process)==="[object process]"&&(n="NODE"),typeof XMLHttpRequest<"u"&&(n="BROWSER"),n}function CW(n){return Dm(n)==="object"&&Object.prototype.toString.call(n)==="[object Array]"}function SOe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}function hqt(n){return Dm(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function t0e(n){return n!==null&&Dm(n)==="object"}function n0e(n,e){if(n)if(Dm(n)!=="object"&&(n=[n]),CW(n))for(var r=0;r<n.length;r++)e.call(null,n[r],r,n);else for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.call(null,n[i],i,n)}function r0e(n){return SOe(n)?hOe.parse(n.toString(),{strictNullHandling:!0}):typeof n=="string"?[n]:n}function MW(n){return hOe.stringify(n,{arrayFormat:"repeat",strictNullHandling:!0})}function EOe(n,e){return zl(zl(zl({},n),e),{},{headers:zl(zl({},n.headers),e.headers),params:zl(zl({},r0e(n.params)),r0e(e.params)),method:(e.method||n.method||"get").toLowerCase()})}var pqt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.prefix,a=r.suffix;return i&&(e="".concat(i).concat(e)),a&&(e="".concat(e).concat(a)),{url:e,options:r}};function gqt(n,e){var r=e.method,i=r===void 0?"get":r;return i.toLowerCase()==="get"}function mqt(n,e){if(!n)return e();var r=n.req;r=r===void 0?{}:r;var i=r.options,a=i===void 0?{}:i,o=r.url,s=o===void 0?"":o,l=n.cache,c=n.responseInterceptors,u=a.timeout,d=u===void 0?0:u,f=a.timeoutMessage,h=a.__umiRequestCoreType__,p=h===void 0?"normal":h,g=a.useCache,m=g===void 0?!1:g,v=a.method,y=v===void 0?"get":v,b=a.params,x=a.ttl,_=a.validateCache,S=_===void 0?gqt:_;if(p!=="normal")return process,e();var M=fetch;if(!M)throw new Error("Global fetch not exist!");var E=wOe()==="BROWSER",T=S(s,a)&&m&&E;if(T){var P=l.get({url:s,params:b,method:y});if(P)return P=P.clone(),P.useCache=!0,n.res=P,e()}var A;return d>0?A=Promise.race([e0e(a),M(s,a),dqt(d,f,n.req)]):A=Promise.race([e0e(a),M(s,a)]),c.forEach(function(N){A=A.then(function(O){var I=typeof O.clone=="function"?O.clone():O;return N(I,a)})}),A.then(function(N){if(T&&N.status===200){var O=N.clone();O.useCache=!0,l.set({url:s,params:b,method:y},O,x)}return n.res=N,e()})}function vqt(n,e){var r;return e().then(function(){if(n){var i=n.res,a=i===void 0?{}:i,o=n.req,s=o===void 0?{}:o,l=s||{},c=l.options;c=c===void 0?{}:c;var u=c.responseType,d=u===void 0?"json":u,f=c.charset,h=f===void 0?"utf8":f;c.getResponse;var p=c.throwErrIfParseFail,g=p===void 0?!1:p,m=c.parseResponse,v=m===void 0?!0:m;if(v&&!(!a||!a.clone)){if(r=wOe()==="BROWSER"?a.clone():a,r.useCache=a.useCache||!1,h==="gbk")try{return a.blob().then(uqt).then(function(y){return Jve(y,!1,r,s)})}catch(y){throw new C2(r,y.message,null,s,"ParseError")}else if(d==="json")return a.text().then(function(y){return Jve(y,g,r,s)});try{return a[d]()}catch{throw new C2(r,"responseType not support",null,s,"ParseError")}}}}).then(function(i){if(n){n.res;var a=n.req,o=a===void 0?{}:a,s=o||{},l=s.options;l=l===void 0?{}:l;var c=l.getResponse,u=c===void 0?!1:c;if(r){if(r.status>=200&&r.status<300){if(u){n.res={data:i,response:r};return}n.res=i;return}throw new C2(r,"http error",i,o,"HttpError")}}}).catch(function(i){if(i instanceof _Oe||i instanceof C2)throw i;var a=n.req,o=n.res;throw i.request=i.request||a,i.response=i.response||o,i.type=i.type||i.name,i.data=i.data||void 0,i})}function yqt(n,e){if(!n)return e();var r=n.req;r=r===void 0?{}:r;var i=r.options,a=i===void 0?{}:i,o=a.method,s=o===void 0?"get":o;if(["post","put","patch","delete"].indexOf(s.toLowerCase())===-1)return e();var l=a.requestType,c=l===void 0?"json":l,u=a.data;if(u){var d=Object.prototype.toString.call(u);d==="[object Object]"||d==="[object Array]"?c==="json"?(a.headers=zl({Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},a.headers),a.body=JSON.stringify(u)):c==="form"&&(a.headers=zl({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},a.headers),a.body=MW(u)):(a.headers=zl({Accept:"application/json"},a.headers),a.body=u)}return n.req.options=a,e()}function bqt(n,e){var r,i;if(n)if(e)r=e(n);else if(SOe(n))r=n.toString();else if(CW(n))i=[],n0e(n,function(o){o===null||typeof o>"u"?i.push(o):i.push(t0e(o)?JSON.stringify(o):o)}),r=MW(i);else{i={},n0e(n,function(o,s){var l=o;o===null||typeof o>"u"?i[s]=o:hqt(o)?l=o.toISOString():CW(o)?l=o:t0e(o)&&(l=JSON.stringify(o)),i[s]=l});var a=MW(i);r=a}return r}function xqt(n,e){if(!n)return e();var r=n.req;r=r===void 0?{}:r;var i=r.options,a=i===void 0?{}:i,o=a.paramsSerializer,s=a.params,l=n.req;l=l===void 0?{}:l;var c=l.url,u=c===void 0?"":c;a.method=a.method?a.method.toUpperCase():"GET",a.credentials=a.credentials||"same-origin";var d=bqt(s,o);if(n.req.originUrl=u,d){var f=u.indexOf("?")!==-1?"&":"?";n.req.url="".concat(u).concat(f).concat(d)}return n.req.options=a,e()}var COe=[yqt,xqt,vqt],MOe=[mqt];ef.globalMiddlewares=COe;ef.defaultGlobalMiddlewaresLength=COe.length;ef.coreMiddlewares=MOe;ef.defaultCoreMiddlewaresLength=MOe.length;var dE=function(){function n(e){aT(this,n),this.onion=new ef([]),this.fetchIndex=0,this.mapCache=new cqt(e),this.initOptions=e,this.instanceRequestInterceptors=[],this.instanceResponseInterceptors=[]}return pQ(n,[{key:"use",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{global:!1,core:!1};return this.onion.use(r,i),this}},{key:"extendOptions",value:function(r){this.initOptions=EOe(this.initOptions,r),this.mapCache.extendOptions(r)}},{key:"dealRequestInterceptors",value:function(r){var i=function(s,l){return s.then(function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r.req.url=c.url||r.req.url,r.req.options=c.options||r.req.options,l(r.req.url,r.req.options)})},a=[].concat(Lf(n.requestInterceptors),Lf(this.instanceRequestInterceptors));return a.reduce(i,Promise.resolve()).then(function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return r.req.url=o.url||r.req.url,r.req.options=o.options||r.req.options,Promise.resolve()})}},{key:"request",value:function(r,i){var a=this,o=this.onion,s={req:{url:r,options:zl(zl({},i),{},{url:r})},res:null,cache:this.mapCache,responseInterceptors:[].concat(Lf(n.responseInterceptors),Lf(this.instanceResponseInterceptors))};if(typeof r!="string")throw new Error("url MUST be a string");return new Promise(function(l,c){a.dealRequestInterceptors(s).then(function(){return o.execute(s)}).then(function(){l(s.res)}).catch(function(u){var d=s.req.options.errorHandler;if(d)try{var f=d(u);l(f)}catch(h){c(h)}else c(u)})})}}],[{key:"requestUse",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{global:!0};if(typeof r!="function")throw new TypeError("Interceptor must be function!");i.global?n.requestInterceptors.push(r):this.instanceRequestInterceptors.push(r)}},{key:"responseUse",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{global:!0};if(typeof r!="function")throw new TypeError("Interceptor must be function!");i.global?n.responseInterceptors.push(r):this.instanceResponseInterceptors.push(r)}}]),n}();dE.requestInterceptors=[pqt];dE.responseInterceptors=[];function d6(n){this.message=n}d6.prototype.toString=function(){return this.message?"Cancel: ".concat(this.message):"Cancel"};d6.prototype.__CANCEL__=!0;function uI(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(a){e=a});var r=this;n(function(a){r.reason||(r.reason=new d6(a),e(r.reason))})}uI.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};uI.source=function(){var e,r=new uI(function(a){e=a});return{token:r,cancel:e}};function _qt(n){return!!(n&&n.__CANCEL__)}var TOe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=new dE(e),i=function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=EOe(r.initOptions,l);return r.request(s,c)};i.use=r.use.bind(r),i.fetchIndex=r.fetchIndex,i.interceptors={request:{use:dE.requestUse.bind(r)},response:{use:dE.responseUse.bind(r)}};var a=["get","post","delete","put","patch","head","options","rpc"];return a.forEach(function(o){i[o]=function(s,l){return i(s,zl(zl({},l),{},{method:o}))}}),i.Cancel=d6,i.CancelToken=uI,i.isCancel=_qt,i.extendOptions=r.extendOptions.bind(r),i.middlewares={instance:r.onion.middlewares,defaultInstance:r.onion.defaultMiddlewares,global:ef.globalMiddlewares,core:ef.coreMiddlewares},i};TOe({parseResponse:!1});var oT=TOe({});const AOe=n=>{var r,i,a,o,s,l;const e=c=>{let u="";switch(c==null?void 0:c.toLowerCase()){case"user":u="github_user";break;case"repo":u="github_repo";break;case"orgnization":u="github_organization";break;case"company":u="company";break;case"topic":u="topic";break;case"country":u="country";break;default:u=""}return u};return(i=(r=n==null?void 0:n.data)==null?void 0:r.nodes)==null||i.forEach(c=>{var u;c.nodeType=e(c==null?void 0:c.nodeType),c.id=(u=c==null?void 0:c.id)==null?void 0:u.toString(),c.properties={name:c==null?void 0:c.name},c==null||delete c.type}),(o=(a=n==null?void 0:n.data)==null?void 0:a.edges)==null||o.forEach(c=>{var u,d;c.source=(u=c==null?void 0:c.source)==null?void 0:u.toString(),c.target=(d=c==null?void 0:c.target)==null?void 0:d.toString(),c.id=(c==null?void 0:c.source)+"|"+(c==null?void 0:c.target)+"|"+(c==null?void 0:c.edgeType)+"|"+(c==null?void 0:c.id),c.properties={count:(c==null?void 0:c.count)||0},c==null||delete c.type}),{data:{nodes:((s=n==null?void 0:n.data)==null?void 0:s.nodes)||[],edges:((l=n==null?void 0:n.data)==null?void 0:l.edges)||[]},message:n==null?void 0:n.message}},ROe=async n=>{const{templateType:e,path:r,extendsStr:i}=n,a=await oT(`/api/graphs/${e}/github/${r}?${i}`,{method:"get"}),o=AOe(a);return o==null?void 0:o.data},wqt=[1,2,4],Sqt=[10,11,12],jC=n=>{var h,p,g;const e={};let r=-1/0,i=1/0;(h=n.edges)==null||h.forEach(m=>{const{source:v,target:y,properties:b}=m,{count:x}=b;e[v]?e[v]=e[v]+(x||0):e[v]=x||0,e[y]?e[y]=e[y]+(x||0):e[y]=x||0,x>r&&(r=x),x<i&&(i=x)});const a=(r-i)/2,o=(p=n.edges)==null?void 0:p.map(m=>{var E,T;const{target:v,properties:y}=m,{count:b=i}=y,x=parseInt(String((b-i)/a))||0,_=wqt[x],S=Sqt[x],M=(T=(E=n.nodes)==null?void 0:E.find(P=>P.id===v))==null?void 0:T.nodeType;return{lineWidth:_,targetNodeType:M,endArrowSize:S,...m}}),s=Object.values(e),l=s.sort((m,v)=>v-m),c=l[1],u=Math.min(...s),d=(c-u)/4;return{nodes:(g=n.nodes)==null?void 0:g.map(m=>{const{id:v,nodeType:y}=m,b=e[v],x=(b-u)/d;let _=16,S=10;return x>1&&x<2?(_=26,S=18):x>=2&&x<=4?(_=36,S=24):b===l[0]&&(_=56,S=40),(y===oE.company||y===oE.github_organization)&&_===16&&(_=22,S=16),y===oE.country&&_===16&&(_=28,S=20),{...m,iconFontSize:S,size:_}}),edges:o}},Eqt="_headerBtn_1ntra_1",Cqt="_footerBtn_1ntra_4",QU={headerBtn:Eqt,footerBtn:Cqt},{Item:i0e}=Yd,POe=({templateId:n,onChangeParams:e,placement:r="bottom",popupContainer:i=document.body,isCall:a=!0,templateParameterList:o,path:s})=>{const[l]=Yd.useForm(),[c,u]=C.useState(!1),{t:d}=Hp(),f=m=>{switch(m.valueType){case"int":return tn.jsx(i0e,{name:m.parameterName,label:d(`${s}.${m.parameterName}`),initialValue:m==null?void 0:m.parameterValue,required:!1,rules:[{required:!0,message:"请输入"}],children:tn.jsx(wSe,{style:{width:"auto"},min:3,max:50})},m.parameterName+n);case"str":return tn.jsx(i0e,{name:m.parameterName,label:d(`${s}.${m.parameterName}`),required:!1,rules:[{required:!0,message:"请选择"}],initialValue:Fs(m==null?void 0:m.parameterValue),children:tn.jsx(W_,{format:"YYYY-MM-DD"})},m.parameterName+n);default:return null}},h=()=>{l.validateFields().then(m=>{var y,b;const v=Object.keys(m).reduce((x,_)=>(_.includes("time")?x[_]=Fs(m[_]).format("YYYY-MM-DD"):x[_]=m[_],x),{});a&&((b=(y=window==null?void 0:window.Tracert)==null?void 0:y.call)==null||b.call(y,"click","a4378.b118751.c400429.d533730")),u(!1),e(v)})};C.useEffect(()=>{l==null||l.resetFields()},[n]);const p=()=>{l.resetFields()},g=m=>{m.stopPropagation()};return tn.jsx("div",{onClick:g,children:tn.jsx($Y,{trigger:"click",placement:r,open:c,content:tn.jsxs("div",{className:QU.paramsForm,children:[tn.jsx("div",{className:QU.headerBtn,children:tn.jsx(k_,{onClick:()=>u(!1)})}),tn.jsx(Yd,{form:l,children:o==null?void 0:o.map(m=>f(m))}),tn.jsxs("div",{className:QU.footerBtn,children:[tn.jsx(ms,{onClick:p,children:d("reset")}),tn.jsx(ms,{type:"primary",onClick:h,children:d("sure")})]})]}),onOpenChange:m=>u(m),getPopupContainer:()=>i,children:tn.jsx(ms,{onClick:()=>u(!0),type:"text",children:tn.jsx(Lnt,{})})})})},NOe=(n,e,r)=>{switch(n){case"start-time":return Math.floor((e?new Date(e).getTime():new Date().setMonth(new Date().getMonth()-120))/1e3);case"end-time":return Math.floor((e?new Date(e).getTime():new Date().getTime())/1e3);default:return e||r}},Mqt="_graphMenuItem_1dnwh_1",Tqt={graphMenuItem:Mqt},Aqt=({title:n,templateId:e,templateParameterList:r,onSearch:i,path:a})=>{var c;const[o,s]=C.useState(""),l=(u,d=!1)=>{var h;const f=(h=Object.keys(u))==null?void 0:h.map(p=>`${p}=${NOe(p,u[p],"")}`);if(s(f==null?void 0:f.join("&")),!d){i==null||i(f==null?void 0:f.join("&"));const p=document.getElementsByClassName("g6-contextmenu")[0];p&&p instanceof HTMLElement&&(p==null||p.click())}};return C.useEffect(()=>{const u={};r==null||r.forEach(d=>{u[d.parameterName]=d==null?void 0:d.parameterValue}),l(u,!0)},[]),tn.jsx("li",{className:"g6-contextmenu-li",onClick:()=>i==null?void 0:i(o),children:tn.jsxs("div",{className:Tqt.graphMenuItem,children:[tn.jsx("div",{children:n}),tn.jsx(POe,{templateId:e,path:a,onChangeParams:l,placement:"rightTop",popupContainer:(c=document.getElementsByClassName("g6-contextmenu"))==null?void 0:c[0],templateParameterList:r})]})})},a0e=(n=[],e=[])=>{const r={};return[...e,...n].forEach(i=>{i&&(r[i]=["selected"])}),r};class Rqt extends ac{constructor(e,r){super(e,r);const{graph:i}=this.context;i.on(it.CLICK,a=>{var o,s;if(a.metaKey||a.ctrlKey||a.shiftKey){const{target:l,targetType:c}=a,{id:u}=l,d=i.getElementState(u);if(d!=null&&d.includes("selected")){i.setElementState(u);return}if(a.shiftKey){i.setElementState(u,["selected"]);return}if(c==="node"){const f=((o=i.getRelatedEdgesData(u,"both"))==null?void 0:o.map(p=>p.id))||[],h=((s=i.getNeighborNodesData(u))==null?void 0:s.map(p=>p.id))||[];i.setElementState(a0e([...h,u],f))}else if(c==="edge"){const{source:f,target:h}=i.getEdgeData(u);i.setElementState(a0e([f,h],[u]))}}})}}let mb={isHoverToolTip:!1,isHoverNode:!1};B3e(jx.BEHAVIOR,"multiple-selects",Rqt);const Pqt=Je.memo(C.forwardRef(({data:n,renderMode:e,renderTemplate:r,setHistoryStatus:i,onReady:a,queryList:o},s)=>{const l=Je.useRef(null),c=Je.useRef(null),u=C.useRef([]),d=C.useRef({}),[f,h]=C.useState(!1),p=location.pathname.includes("/graphs")&&location.pathname.includes("/github"),g=E=>{var T,P,A,N;if(c.current){const O=c.current.getPluginInstance("history");E==="redo"&&O.canRedo()&&((P=(T=window==null?void 0:window.Tracert)==null?void 0:T.call)==null||P.call(T,"click","a4378.b118751.c400429.d533732"),O.redo()),E==="undo"&&O.canUndo()&&((N=(A=window==null?void 0:window.Tracert)==null?void 0:A.call)==null||N.call(A,"click","a4378.b118751.c400429.d533731"),O.undo())}};C.useEffect(()=>{var E,T;(T=(E=window.Tracert)==null?void 0:E.call)==null||T.call(E,"expo","a4378.b118751.c400430",""),document.addEventListener("contextmenu",P=>{P.ctrlKey&&P.preventDefault()})},[]),C.useImperativeHandle(s,()=>({redo:()=>g("redo"),undo:()=>g("undo")}));const m=C.useMemo(()=>[hW.REPO_ECOLOGY,hW.REPO_COMMUNITY].includes(r)?300:170,[r]),{t:v}=Hp(),y=()=>{var E;(E=c==null?void 0:c.current)==null||E.fitView()},b=E=>{const T=E.getNodeData();for(let P of T)d.current[P.id]=P},x=C.useMemo(()=>p?[]:(o==null?void 0:o.map(E=>({type:E.input_types,name:E.name,key:E.id,templateParameterList:E.templateParameterList,path:E.path})))||[],[o]),_=()=>{const{clientHeight:E,clientWidth:T}=l.current,P=new xL({container:l.current,data:KGt(n),width:T,height:E,animation:!1,node:{style:{size:N=>N.size,labelText:N=>{var O;return(O=N==null?void 0:N.properties)==null?void 0:O.name},fill:N=>N.nodeType===oE.github_user?Kb[N.nodeType][N.id%4]:Kb[N.nodeType],iconText:N=>LNe(FNe[N.nodeType]),iconFontFamily:"os-iconfont",iconFill:"#fff",iconWidth:N=>N.size,iconHeight:N=>N.size,iconFontSize:N=>N.iconFontSize}},edge:{style:{labelText:N=>{var O;return` ${N==null?void 0:N.name}${(N==null?void 0:N.edgeType)!=="Belong"?"："+(((O=N==null?void 0:N.properties)==null?void 0:O.count)||0)+" ":""}`},endArrow:N=>!MGt.includes(N==null?void 0:N.edgeType),labelBackgroundFill:"#fff",labelBackground:!0,stroke:N=>N.targetNodeType===oE.github_user?Kb[N.targetNodeType][N.target%4]:Kb[N.targetNodeType],labelOpacity:1,lineWidth:N=>N.lineWidth,endArrowSize:N=>N.endArrowSize,labelFontSize:10}},layout:{type:"force",linkDistance:(N,O,I)=>{var D,k;return((D=O==null?void 0:O.data)==null?void 0:D.size)===56&&((k=I==null?void 0:I.data)==null?void 0:k.size)===56?1e3:300},preventOverlap:!0,minMovement:.05,nodeSize:56},behaviors:["zoom-canvas","drag-element",{type:"drag-canvas",enable:N=>N.shiftKey===!1&&N.targetType==="canvas"},{type:"click-select",enable:N=>!(N!=null&&N.metaKey||N!=null&&N.ctrlKey||N.shiftKey),multiple:!0},{type:"hover-activate",degree:1},{type:"lasso-select",trigger:["shift"]},"multiple-selects"],autoResize:!0,zoomRange:[.1,5],transforms:[{type:"process-parallel-edges",distance:20}],autoFit:"center",plugins:[{type:"tooltip",key:"tooltip",trigger:"click",enable:N=>{if(N.metaKey||N.ctrlKey||N.shiftKey){const O=document.getElementsByClassName("tooltip")[0];O?O.style.visibility="hidden":console.warn("Tooltip element not found")}return!(N.metaKey||N.ctrlKey||N.shiftKey)},enterable:!0,getContent:(N,O)=>xve(O,v)},{type:"history",key:"history"},{type:"contextmenu",trigger:"contextmenu",getContent:N=>{var z;const O=document.getElementsByClassName("g6-contextmenu")[0];O&&(O.style.overflow="visible");const I=N.target.id,D=(z=c.current)==null?void 0:z.getNodeData(I),{properties:k}=D,$=(U,H)=>{h(!0),ROe({templateType:U,path:k.name,extendsStr:H}).then(async X=>{var V,W,K,q;if(c.current){const Q=jC(X),ie=P.getData(),oe=ZGt(ie,Q);if(!oe.nodes.length&&!oe.edges.length){h(!1);return}window.Tracert.call("click","a4378.b118751.c400430.d533737");const ue=I,le=(V=c.current)==null?void 0:V.getNodeData(ue);if(c.current.addData({nodes:(W=oe==null?void 0:oe.nodes)==null?void 0:W.map(pe=>({...pe,style:le==null?void 0:le.style})),edges:oe.edges}),oe.nodes.length>1){const pe=Q.nodes.find(ve=>ve.id===ue);c.current.updateNodeData([pe])}const me=c.current.getData();c.current.updateData(jC(me)),(K=c.current)==null||K.setOptions({layout:{type:"d3-force",x:{},y:{},link:{distance:200},collide:{radius:36},manyBody:{strength:-900}}}),await c.current.render(),h(!1),i({undo:!1,redo:!0});const J=(q=c.current)==null?void 0:q.getPluginInstance("history");J.redoStack=[],b(c.current)}}).catch(X=>{console.log("更新失败：",X)}).finally(()=>{h(!1)})},B=x==null?void 0:x.filter(U=>U.type===D.nodeType),F=document.createElement("div");return B1e(F).render(tn.jsx("ul",{className:"g6-contextmenu-ul",children:B==null?void 0:B.map(U=>tn.jsx(Aqt,{title:U.name,path:U.path,templateId:U.key,onSearch:H=>$(U.path,H),templateParameterList:U==null?void 0:U.templateParameterList},U.key))})),F},enable:N=>N.targetType==="node"}]}),A=N=>{var I;if(N.length<=0)return[];const O=N[N.length-1];if(Object.values(((I=O==null?void 0:O.current)==null?void 0:I.add)??{}).length===0)N.pop(),A(N);else return N};_ve("os-iconfont").then(N=>{N&&P.render().then(async()=>{var I;const O=(I=c.current)==null?void 0:I.getPluginInstance("history");b(c.current),O.on(Rd.ADD,D=>{A(O.undoStack)}),O.on(Rd.REDO,async D=>{var k;await c.current.render(),i({undo:!1,redo:((k=O.redoStack)==null?void 0:k.length)<1})}),O.on(Rd.UNDO,async()=>{var D;await c.current.render(),i({undo:((D=O.undoStack)==null?void 0:D.length)<=1,redo:!1})})})}),c.current=P,P.on(Ut.AFTER_LAYOUT,y),P.on(Xd.CLICK,N=>{(N.metaKey||N.ctrlKey||N.shiftKey)&&(N==null||N.preventDefault())}),Cd.isFunction(a)&&a(P)},S=()=>{const E=RGt(n),T=new Set,P=new Set;let A=new Map,N=null;const O=D=>{D&&D.nodeColor(D.nodeColor()).linkWidth(D.linkWidth()).linkDirectionalParticles(D.linkDirectionalParticles())},I=rGt()(l.current);c.current=I,I.cameraPosition({x:0,y:0,z:m}).nodeOpacity(.6).linkThreeObjectExtend(!0).linkCurvature("curvature").linkCurveRotation("rotation").linkWidth(.4).linkDirectionalParticleSpeed(.01).linkCurvature(.1).linkDirectionalArrowLength(1.5).linkDirectionalArrowRelPos(.9).linkDirectionalParticleWidth(1).linkDirectionalArrowColor(D=>D.source.color).linkDirectionalParticles(D=>P.has(D)||u.current.includes(D.id)?1.5:0).linkWidth(D=>P.has(D)||u.current.includes(D.id)?1.5:.2).linkThreeObject(D=>PGt(D,v)).linkPositionUpdate((D,k)=>NGt(D,k)).onLinkHover(D=>{P.has(D)||(T.clear(),P.clear(),D&&(P.add(D),T.add(D.source),T.add(D.target)),O())}).onNodeClick(D=>kGt(I,D)).onNodeDragEnd(D=>{D.fx=D.x,D.fy=D.y,D.fz=D.z}).onNodeHover(D=>{if(!(!D&&!T.size||D&&D===N||D&&!D.neighbors))if(T.clear(),P.clear(),D&&D.neighbors&&(T.add(D),D.neighbors.forEach(k=>T.add(k)),D.links.forEach(k=>P.add(k))),N=D||null,A.forEach((k,$)=>{T.has($)?k==null||k.color.set("yellow"):k==null||k.color.set(k==null?void 0:k.nodeColor)}),O(I),D){const k=FGt(I,D);tooltip.style.top=`${k.y}px`,tooltip.style.left=`${k.x+30}px`;const $=xve([D],v);tooltip.innerHTML="",tooltip.appendChild($),tooltip.style.display="block",mb.isHoverNode=!0}else setTimeout(()=>{mb.isHoverToolTip||(tooltip.style.display="none")},100),mb.isHoverNode=!1}).graphData(E),_ve("os-iconfont").then(D=>{D?(I.nodeThreeObject(k=>DGt(A,k)),I.d3Force("charge").strength(-160)):console.log("Font is not loaded")})};C.useEffect(()=>{if((!Cd.isEmpty(x)||p)&&(!Cd.isEmpty(n==null?void 0:n.nodes)||!Cd.isEmpty(n==null?void 0:n.edges))){if(!l.current)return;e===iI["2D"]?_():S();const E=()=>{tooltip.style.display="block",mb.isHoverToolTip=!0},T=()=>{mb.isHoverNode||(tooltip.style.display="none"),mb.isHoverToolTip=!1};c.current&&e===iI["2D"]&&(c==null||c.current.on(Xd.CLICK,()=>{const A=document.querySelector(".g6-contextmenu");A&&(A.style.display="none")}));const P=document.querySelector("#tooltip");return P==null||P.addEventListener("mouseenter",E),P==null||P.addEventListener("mouseleave",T),()=>{var A,N,O;P==null||P.removeEventListener("mouseenter",E),P==null||P.removeEventListener("mouseleave",T),c.current&&(typeof((A=c.current)==null?void 0:A.off)=="function"&&((N=c.current)==null||N.off(Ut.AFTER_LAYOUT,y),(O=c.current)==null||O.destroy()),c.current=null)}}},[l.current,n,e,x]);const M={position:"absolute",backgroundColor:"rgba(255, 255, 255, 0.85)",color:"#000",padding:"5px",borderRadius:"5px",display:"none",pointerEvents:"auto",zIndex:99};return tn.jsxs(nX,{spinning:f,style:{height:"100%"},children:[tn.jsx("div",{ref:l,style:{height:"100%",background:"#fff"}}),tn.jsx("div",{id:"tooltip",style:M})]})}),(n,e)=>Cd.isEqual(n.data,e.data)&&Cd.isEqual(n==null?void 0:n.renderMode,e==null?void 0:e.renderMode)&&Cd.isEqual(n==null?void 0:n.queryList,e==null?void 0:e.queryList));var OOe=Symbol.for("immer-nothing"),o0e=Symbol.for("immer-draftable"),Wc=Symbol.for("immer-state");function Fd(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var E_=Object.getPrototypeOf;function C_(n){return!!n&&!!n[Wc]}function Oy(n){var e;return n?IOe(n)||Array.isArray(n)||!!n[o0e]||!!((e=n.constructor)!=null&&e[o0e])||h6(n)||p6(n):!1}var Nqt=Object.prototype.constructor.toString();function IOe(n){if(!n||typeof n!="object")return!1;const e=E_(n);if(e===null)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Nqt}function dI(n,e){f6(n)===0?Reflect.ownKeys(n).forEach(r=>{e(r,n[r],n)}):n.forEach((r,i)=>e(i,r,n))}function f6(n){const e=n[Wc];return e?e.type_:Array.isArray(n)?1:h6(n)?2:p6(n)?3:0}function TW(n,e){return f6(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function DOe(n,e,r){const i=f6(n);i===2?n.set(e,r):i===3?n.add(r):n[e]=r}function Oqt(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function h6(n){return n instanceof Map}function p6(n){return n instanceof Set}function i0(n){return n.copy_||n.base_}function AW(n,e){if(h6(n))return new Map(n);if(p6(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const r=IOe(n);if(e===!0||e==="class_only"&&!r){const i=Object.getOwnPropertyDescriptors(n);delete i[Wc];let a=Reflect.ownKeys(i);for(let o=0;o<a.length;o++){const s=a[o],l=i[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(i[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:n[s]})}return Object.create(E_(n),i)}else{const i=E_(n);if(i!==null&&r)return{...n};const a=Object.create(i);return Object.assign(a,n)}}function HC(n,e=!1){return g6(n)||C_(n)||!Oy(n)||(f6(n)>1&&(n.set=n.add=n.clear=n.delete=Iqt),Object.freeze(n),e&&Object.entries(n).forEach(([r,i])=>HC(i,!0))),n}function Iqt(){Fd(2)}function g6(n){return Object.isFrozen(n)}var Dqt={};function Iy(n){const e=Dqt[n];return e||Fd(0,n),e}var WC;function LOe(){return WC}function Lqt(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function s0e(n,e){e&&(Iy("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function RW(n){PW(n),n.drafts_.forEach(kqt),n.drafts_=null}function PW(n){n===WC&&(WC=n.parent_)}function l0e(n){return WC=Lqt(WC,n)}function kqt(n){const e=n[Wc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function c0e(n,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return n!==void 0&&n!==r?(r[Wc].modified_&&(RW(e),Fd(4)),Oy(n)&&(n=fI(e,n),e.parent_||hI(e,n)),e.patches_&&Iy("Patches").generateReplacementPatches_(r[Wc].base_,n,e.patches_,e.inversePatches_)):n=fI(e,r,[]),RW(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==OOe?n:void 0}function fI(n,e,r){if(g6(e))return e;const i=e[Wc];if(!i)return dI(e,(a,o)=>u0e(n,i,e,a,o,r)),e;if(i.scope_!==n)return e;if(!i.modified_)return hI(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let o=a,s=!1;i.type_===3&&(o=new Set(a),a.clear(),s=!0),dI(o,(l,c)=>u0e(n,i,a,l,c,r,s)),hI(n,a,!1),r&&n.patches_&&Iy("Patches").generatePatches_(i,r,n.patches_,n.inversePatches_)}return i.copy_}function u0e(n,e,r,i,a,o,s){if(C_(a)){const l=o&&e&&e.type_!==3&&!TW(e.assigned_,i)?o.concat(i):void 0,c=fI(n,a,l);if(DOe(r,i,c),C_(c))n.canAutoFreeze_=!1;else return}else s&&r.add(a);if(Oy(a)&&!g6(a)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;fI(n,a),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,i)&&hI(n,a)}}function hI(n,e,r=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&HC(e,r)}function Fqt(n,e){const r=Array.isArray(n),i={type_:r?1:0,scope_:e?e.scope_:LOe(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,o=gQ;r&&(a=[i],o=qC);const{revoke:s,proxy:l}=Proxy.revocable(a,o);return i.draft_=l,i.revoke_=s,l}var gQ={get(n,e){if(e===Wc)return n;const r=i0(n);if(!TW(r,e))return $qt(n,r,e);const i=r[e];return n.finalized_||!Oy(i)?i:i===JU(n.base_,e)?(eV(n),n.copy_[e]=OW(i,n)):i},has(n,e){return e in i0(n)},ownKeys(n){return Reflect.ownKeys(i0(n))},set(n,e,r){const i=kOe(i0(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,r),!0;if(!n.modified_){const a=JU(i0(n),e),o=a==null?void 0:a[Wc];if(o&&o.base_===r)return n.copy_[e]=r,n.assigned_[e]=!1,!0;if(Oqt(r,a)&&(r!==void 0||TW(n.base_,e)))return!0;eV(n),NW(n)}return n.copy_[e]===r&&(r!==void 0||e in n.copy_)||Number.isNaN(r)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=r,n.assigned_[e]=!0),!0},deleteProperty(n,e){return JU(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,eV(n),NW(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const r=i0(n),i=Reflect.getOwnPropertyDescriptor(r,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:r[e]}},defineProperty(){Fd(11)},getPrototypeOf(n){return E_(n.base_)},setPrototypeOf(){Fd(12)}},qC={};dI(gQ,(n,e)=>{qC[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});qC.deleteProperty=function(n,e){return qC.set.call(this,n,e,void 0)};qC.set=function(n,e,r){return gQ.set.call(this,n[0],e,r,n[0])};function JU(n,e){const r=n[Wc];return(r?i0(r):n)[e]}function $qt(n,e,r){var a;const i=kOe(e,r);return i?"value"in i?i.value:(a=i.get)==null?void 0:a.call(n.draft_):void 0}function kOe(n,e){if(!(e in n))return;let r=E_(n);for(;r;){const i=Object.getOwnPropertyDescriptor(r,e);if(i)return i;r=E_(r)}}function NW(n){n.modified_||(n.modified_=!0,n.parent_&&NW(n.parent_))}function eV(n){n.copy_||(n.copy_=AW(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var Bqt=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,i)=>{if(typeof e=="function"&&typeof r!="function"){const o=r;r=e;const s=this;return function(c=o,...u){return s.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Fd(6),i!==void 0&&typeof i!="function"&&Fd(7);let a;if(Oy(e)){const o=l0e(this),s=OW(e,void 0);let l=!0;try{a=r(s),l=!1}finally{l?RW(o):PW(o)}return s0e(o,i),c0e(a,o)}else if(!e||typeof e!="object"){if(a=r(e),a===void 0&&(a=e),a===OOe&&(a=void 0),this.autoFreeze_&&HC(a,!0),i){const o=[],s=[];Iy("Patches").generateReplacementPatches_(e,a,o,s),i(o,s)}return a}else Fd(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,c=>e(c,...l));let i,a;return[this.produce(e,r,(s,l)=>{i=s,a=l}),i,a]},typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof(n==null?void 0:n.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){Oy(n)||Fd(8),C_(n)&&(n=zqt(n));const e=l0e(this),r=OW(n,void 0);return r[Wc].isManual_=!0,PW(e),r}finishDraft(n,e){const r=n&&n[Wc];(!r||!r.isManual_)&&Fd(9);const{scope_:i}=r;return s0e(i,e),c0e(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let r;for(r=e.length-1;r>=0;r--){const a=e[r];if(a.path.length===0&&a.op==="replace"){n=a.value;break}}r>-1&&(e=e.slice(r+1));const i=Iy("Patches").applyPatches_;return C_(n)?i(n,e):this.produce(n,a=>i(a,e))}};function OW(n,e){const r=h6(n)?Iy("MapSet").proxyMap_(n,e):p6(n)?Iy("MapSet").proxySet_(n,e):Fqt(n,e);return(e?e.scope_:LOe()).drafts_.push(r),r}function zqt(n){return C_(n)||Fd(10,n),FOe(n)}function FOe(n){if(!Oy(n)||g6(n))return n;const e=n[Wc];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=AW(n,e.scope_.immer_.useStrictShallowCopy_)}else r=AW(n,!0);return dI(r,(i,a)=>{DOe(r,i,FOe(a))}),e&&(e.finalized_=!1),r}var qc=new Bqt,Uqt=qc.produce;qc.produceWithPatches.bind(qc);qc.setAutoFreeze.bind(qc);qc.setUseStrictShallowCopy.bind(qc);qc.applyPatches.bind(qc);qc.createDraft.bind(qc);qc.finishDraft.bind(qc);function $Oe(n){var e=C.useState(function(){return HC(typeof n=="function"?n():n,!0)}),r=e[1];return[e[0],C.useCallback(function(i){r(typeof i=="function"?Uqt(i):HC(i))},[])]}const Vqt=(n,e)=>n.map(r=>{const{parameterName:i,parameterValue:a,valueType:o}=r;return{parameterName:i,parameterValue:NOe(i,a,e),valueType:o}});function Gqt(n){if(typeof n!="string")throw new TypeError("输入必须是一个字符串");return n.split(";").filter(i=>i.trim()!=="").map(i=>{const a={};return i.split(",").filter(s=>s.trim()!=="").forEach(s=>{const[l,c]=s.split(":").map(d=>d.trim());let u;/^-?\d+(\.\d+)?$/.test(c)?u=Number(c):/^(true|false)$/i.test(c)?u=c.toLowerCase()==="true":u=c.replace(/^"(.+)"$/,"$1"),a[l]=u}),a})}const jqt=async()=>{var r;const n=await oT("/api/graphs/list",{method:"get"});return(n==null?void 0:n.status)===1?[]:(r=n==null?void 0:n.data)==null?void 0:r.map(i=>(i.templateParameterList=Gqt(i.filter_keys).map(a=>({parameterName:a.key,parameterValue:a.default,valueType:a.type})),i))},Hqt=async n=>{const e=await oT("/api/graphs/fulltext-search",{method:"get",params:n});if((e==null?void 0:e.status)===1)return[];let r=(e==null?void 0:e.data)||[];const i=[],a=new Set;for(const o of r)o.id=o.name,a.has(o.id)||(a.add(o.id),i.push(o));return i},Wqt=async n=>{let e={};n.templateParameterList.forEach(a=>{e[a.parameterName]=a.parameterValue});const r=await oT(`/api/graphs/${n.path}/github/${n.value}`,{method:"get",params:e}),i=AOe(r);return(r==null?void 0:r.status)===0&&(i.success=!0),i},Og={"project-search":"_project-search_zemwp_1","project-sel":"_project-sel_zemwp_11","project-icon":"_project-icon_zemwp_24","default-project":"_default-project_zemwp_27","default-warehouse":"_default-warehouse_zemwp_32","warehouse-name":"_warehouse-name_zemwp_36","project-search-en":"_project-search-en_zemwp_51"};let qqt=Hqt,Yqt=Wqt,Xqt=jqt;const BOe=({needFixed:n,debounceTimeout:e=300,defaultStyle:r,onSearch:i,templateIndex:a,graphWarehouseValue:o,graphQuerySource:s,graphSearchValue:l,graphTemplateId:c,graphParameterList:u,getGraphLoading:d,graphExtendParams:f,onUpdateTemplateId:h,spmD:p,getQueryList:g})=>{const{t:m,i18n:v}=Hp(),y=zq(),[b,x]=C.useState([]),[_,S]=$Oe({querySource:s||"github_repo",templateParameterList:u||[],textQuery:[],templateId:c,searchValue:"",loadingProjects:!1}),{querySource:M,templateParameterList:E,textQuery:T,warehouseValue:P,templateId:A,searchValue:N,loadingProjects:O}=_,I=C.useMemo(()=>{if(T.length>0){const U={};return T.forEach(H=>{U[H.id]=H.name}),U}return{}},[T]),D=C.useMemo(()=>{switch(!0){case n:return"calc(100% - 320px)";case(r&&v.language!=="en"):return"400px";case(r&&v.language==="en"):return"520px";case v.language==="en":return"770px";default:return"650px"}},[n,r,v.language]),k={width:D,position:n?"fixed":"relative",top:n?24:0,height:r?32:56,marginLeft:r?16:0,border:r?"1px solid #f2f2f2":"1px solid #ffffff",background:r?"#ffffff":"",borderRadius:r?"6px":"12px"},$=(U,H)=>{h==null||h(H.data.id),U&&M!==H.data.input_types?S(X=>{X.warehouseValue=void 0,X.textQuery=[]}):z(P,{templateId:U,templateParameterList:H.data.templateParameterList}),S(X=>{X.querySource=H.data.input_types,X.templateParameterList=H.data.templateParameterList,X.templateId=U})},B=(U,H)=>{S(X=>{X.loadingProjects=!0,X.querySource=U}),qqt({indexName:U,keyword:H}).then(X=>{S(V=>{V.textQuery=X,V.searchValue=H,V.loadingProjects=!1})})},F=U=>{if(!Array.isArray(U))throw new TypeError("type error, please check params");const H={};return U.forEach(X=>{H[X.parameterName]=X.parameterValue}),H},G=C.useMemo(()=>{const U=H=>{B(M,H)};return Cd.debounce(U,e)},[T,e,M]),z=(U,H,X=!0)=>{var oe,ue,le;if(!U)return;X&&((ue=(oe=window==null?void 0:window.Tracert)==null?void 0:oe.call)==null||ue.call(oe,"click",`a4378.${p}`,{keyword:U}));const{templateId:V,templateParameterList:W}=H;S(me=>{me.warehouseValue=U});const K=Vqt(W,U),q=K==null?void 0:K.map(me=>me.parameterValue).join(",");d==null||d(!0);const Q=(le=b==null?void 0:b.find(me=>me.id===V))==null?void 0:le.path,ie={querySource:M,searchValue:N,templateId:V,paramsValue:q,templateParameterList:W,warehouseValue:U,warehouseName:I[U],path:Q,...F(K)};r||y(`/graphs${window.location.search}`,{state:ie}),Yqt({path:Q,value:U,templateParameterList:K}).then(me=>{me.data||lp.error(me.message);const J=jC(me.data);if(d==null||d(!1),me!=null&&me.success){if(r){i==null||i({...ie,data:J,searchData:J,graphTemplateId:V,graphParamsValue:q});return}y(`/graphs${window.location.search}`,{state:{data:J,...ie}})}else lp.error(me==null?void 0:me.message)}).finally(()=>{d==null||d(!1)})};return C.useEffect(()=>{S(U=>{U.warehouseValue=o||void 0})},[o]),C.useEffect(()=>{if(b.length){g==null||g(b),A||S(H=>{H.templateId=c??b[0].id});const U=b.find(H=>H.id===A);U&&S(H=>{H.templateParameterList=U.templateParameterList})}},[b,A]),C.useEffect(()=>{Xqt().then(U=>{x(U)})},[]),C.useEffect(()=>{s&&l&&B(s,l)},[s,l]),C.useEffect(()=>{typeof a=="number"&&(b!=null&&b.length)&&S(U=>{const{input_types:H,id:X}=b[a]||{};U.textQuery=[],U.querySource=H,U.templateId=X})},[a]),C.useEffect(()=>{if(f){const U=E.map(H=>f[H.parameterName]?{...H,parameterValue:String(f[H.parameterName])}:H);S(H=>{H.templateParameterList=U}),z(P,{templateId:A,templateParameterList:U},!1)}},[f]),tn.jsx("div",{className:[Og["project-search"],v.language==="en"?Og["project-search-en"]:""].join(" "),style:k,children:tn.jsxs(rf,{theme:{algorithm:r?wae.defaultAlgorithm:wae.darkAlgorithm},children:[tn.jsx(sp,{className:r?Og["default-project"]:Og["project-sel"],popupClassName:r?"":"project",value:A,placeholder:"Borderless",variant:"borderless",suffixIcon:r?tn.jsx("img",{src:"https://mdn.alipayobjects.com/huamei_0bwegv/afts/img/A*pwLCT6dY-6cAAAAAAAAAAAAADu3UAQ/original",alt:"",className:[Og["project-icon"],"project-arrow"].join(" ")}):tn.jsx("img",{src:"https://mdn.alipayobjects.com/huamei_0bwegv/afts/img/A*EfbWTZEGfiIAAAAAAAAAAAAADu3UAQ/original",alt:"",className:[Og["project-icon"],"project-arrow"].join(" ")}),onChange:$,children:b.map(U=>tn.jsx(sp.Option,{value:U.id,data:U,children:U.name},U.id))}),tn.jsx(sp,{className:r?Og["default-warehouse"]:Og["warehouse-name"],showSearch:!0,popupClassName:r?"graph":"warehouse",dropdownStyle:{width:D,lineHeight:32},placeholder:TGt(m)[M],optionFilterProp:"children",variant:"borderless",onSearch:G,onChange:U=>z(U,{templateId:A,templateParameterList:E}),value:P,loading:O,filterOption:!1,children:T==null?void 0:T.map(U=>tn.jsx(sp.Option,{value:U.id,children:tn.jsx("div",{style:{lineHeight:"32px"},children:U.name})},U.id))})]})})},Kqt=n=>Object.entries(n).reduce((e,[r,i])=>({...e,[`--${r}`]:i}),{}),pI=n=>{const e=new URLSearchParams(window.location.search),r={};for(const[i,a]of e)r[i]=a;return r[n]},Zqt="_language_x9xld_1",d0e={language:Zqt,"language-icon":"_language-icon_x9xld_7"},Qqt=()=>{const{i18n:n}=Hp(),e=pI("lang")||"zh-CN";C.useEffect(()=>{n.changeLanguage(e==="en-US"?"en":"zh")},[]);const r=()=>{const i=new URL(window.location.href),a=e==="en-US"?"zh-CN":"en-US";n.changeLanguage(a==="en-US"?"en":"zh"),i.searchParams.set("lang",a),window.location.href=i.toString()};return tn.jsxs("div",{className:d0e.language,onClick:r,children:[tn.jsx(kNe,{type:"os-icon-country",className:d0e["language-icon"]}),tn.jsx("div",{children:e==="zh-CN"?"中":"EN"})]})},Jqt="https://github.com/X-lab2017?language=shell",f0e="https://www.tugraph.tech/",eYt="https://antv.antgroup.com/",h0e="https://github.com/TuGraph-family/OSGraph",p0e="https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*2tgHRoQUeIYAAAAAAAAAAAAAep_eAQ/original",tV="https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*UM3WSJM4MH4AAAAAAAAAAAAAep_eAQ/original",tYt="https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*mIanS4WXt9QAAAAAAAAAAAAAep_eAQ/original",nYt="https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*RKIHRraIL7AAAAAAAAAAAAAAep_eAQ/original",zOe="https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*aYnUS5yHhO8AAAAAAAAAAAAAep_eAQ/original",rYt="https://chrome.google.com/webstore/detail/hypercrx/ijchfbpdgeljmhnhokmekkecpbdkgabc",iYt="https://microsoftedge.microsoft.com/addons/detail/hypercrx/lbbajaehiibofpconjgdjonmkidpcome",aYt="https://github.com/hypertrons/hypertrons-crx",UOe=()=>navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),oYt="_home_vasu8_1",sYt="_logo_vasu8_10",lYt="_linear_vasu8_22",cYt="_title_vasu8_50",uYt="_line_vasu8_22",dYt="_gitHub_vasu8_87",fYt="_text_vasu8_107",hYt="_tuGraphImg_vasu8_166",pYt="_gov_vasu8_178",ei={home:oYt,logo:sYt,"home-header":"_home-header_vasu8_17",linear:lYt,"header-img":"_header-img_vasu8_29","open-source":"_open-source_vasu8_38",title:cYt,"tuGraph-icon":"_tuGraph-icon_vasu8_54","tuGraph-img":"_tuGraph-img_vasu8_60",line:uYt,"x-lab":"_x-lab_vasu8_77",gitHub:dYt,"gitHub-url":"_gitHub-url_vasu8_95",text:fYt,"white-strip":"_white-strip_vasu8_117","tuGraph-project":"_tuGraph-project_vasu8_124","project-body":"_project-body_vasu8_131","project-info":"_project-info_vasu8_142","info-title":"_info-title_vasu8_152","project-parse":"_project-parse_vasu8_159",tuGraphImg:hYt,"home-bottom":"_home-bottom_vasu8_169",gov:pYt,"gov-text":"_gov-text_vasu8_183","os-graph":"_os-graph_vasu8_189","bottom-img":"_bottom-img_vasu8_192","tuGraph-url":"_tuGraph-url_vasu8_201","antv-url":"_antv-url_vasu8_213","bottom-link":"_bottom-link_vasu8_219"};//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var VOe;function Qt(){return VOe.apply(null,arguments)}function gYt(n){VOe=n}function tf(n){return n instanceof Array||Object.prototype.toString.call(n)==="[object Array]"}function ey(n){return n!=null&&Object.prototype.toString.call(n)==="[object Object]"}function ai(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function mQ(n){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(n).length===0;var e;for(e in n)if(ai(n,e))return!1;return!0}function Dl(n){return n===void 0}function Gp(n){return typeof n=="number"||Object.prototype.toString.call(n)==="[object Number]"}function sT(n){return n instanceof Date||Object.prototype.toString.call(n)==="[object Date]"}function GOe(n,e){var r=[],i,a=n.length;for(i=0;i<a;++i)r.push(e(n[i],i));return r}function dm(n,e){for(var r in e)ai(e,r)&&(n[r]=e[r]);return ai(e,"toString")&&(n.toString=e.toString),ai(e,"valueOf")&&(n.valueOf=e.valueOf),n}function _h(n,e,r,i){return fIe(n,e,r,i,!0).utc()}function mYt(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function _r(n){return n._pf==null&&(n._pf=mYt()),n._pf}var IW;Array.prototype.some?IW=Array.prototype.some:IW=function(n){var e=Object(this),r=e.length>>>0,i;for(i=0;i<r;i++)if(i in e&&n.call(this,e[i],i,e))return!0;return!1};function vQ(n){var e=null,r=!1,i=n._d&&!isNaN(n._d.getTime());if(i&&(e=_r(n),r=IW.call(e.parsedDateParts,function(a){return a!=null}),i=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&r),n._strict&&(i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(n))n._isValid=i;else return i;return n._isValid}function m6(n){var e=_h(NaN);return n!=null?dm(_r(e),n):_r(e).userInvalidated=!0,e}var g0e=Qt.momentProperties=[],nV=!1;function yQ(n,e){var r,i,a,o=g0e.length;if(Dl(e._isAMomentObject)||(n._isAMomentObject=e._isAMomentObject),Dl(e._i)||(n._i=e._i),Dl(e._f)||(n._f=e._f),Dl(e._l)||(n._l=e._l),Dl(e._strict)||(n._strict=e._strict),Dl(e._tzm)||(n._tzm=e._tzm),Dl(e._isUTC)||(n._isUTC=e._isUTC),Dl(e._offset)||(n._offset=e._offset),Dl(e._pf)||(n._pf=_r(e)),Dl(e._locale)||(n._locale=e._locale),o>0)for(r=0;r<o;r++)i=g0e[r],a=e[i],Dl(a)||(n[i]=a);return n}function lT(n){yQ(this,n),this._d=new Date(n._d!=null?n._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),nV===!1&&(nV=!0,Qt.updateOffset(this),nV=!1)}function nf(n){return n instanceof lT||n!=null&&n._isAMomentObject!=null}function jOe(n){Qt.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+n)}function rd(n,e){var r=!0;return dm(function(){if(Qt.deprecationHandler!=null&&Qt.deprecationHandler(null,n),r){var i=[],a,o,s,l=arguments.length;for(o=0;o<l;o++){if(a="",typeof arguments[o]=="object"){a+=`
[`+o+"] ";for(s in arguments[0])ai(arguments[0],s)&&(a+=s+": "+arguments[0][s]+", ");a=a.slice(0,-2)}else a=arguments[o];i.push(a)}jOe(n+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),r=!1}return e.apply(this,arguments)},e)}var m0e={};function HOe(n,e){Qt.deprecationHandler!=null&&Qt.deprecationHandler(n,e),m0e[n]||(jOe(e),m0e[n]=!0)}Qt.suppressDeprecationWarnings=!1;Qt.deprecationHandler=null;function wh(n){return typeof Function<"u"&&n instanceof Function||Object.prototype.toString.call(n)==="[object Function]"}function vYt(n){var e,r;for(r in n)ai(n,r)&&(e=n[r],wh(e)?this[r]=e:this["_"+r]=e);this._config=n,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function DW(n,e){var r=dm({},n),i;for(i in e)ai(e,i)&&(ey(n[i])&&ey(e[i])?(r[i]={},dm(r[i],n[i]),dm(r[i],e[i])):e[i]!=null?r[i]=e[i]:delete r[i]);for(i in n)ai(n,i)&&!ai(e,i)&&ey(n[i])&&(r[i]=dm({},r[i]));return r}function bQ(n){n!=null&&this.set(n)}var LW;Object.keys?LW=Object.keys:LW=function(n){var e,r=[];for(e in n)ai(n,e)&&r.push(e);return r};var yYt={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function bYt(n,e,r){var i=this._calendar[n]||this._calendar.sameElse;return wh(i)?i.call(e,r):i}function fh(n,e,r){var i=""+Math.abs(n),a=e-i.length,o=n>=0;return(o?r?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+i}var xQ=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,UR=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,rV={},wx={};function On(n,e,r,i){var a=i;typeof i=="string"&&(a=function(){return this[i]()}),n&&(wx[n]=a),e&&(wx[e[0]]=function(){return fh(a.apply(this,arguments),e[1],e[2])}),r&&(wx[r]=function(){return this.localeData().ordinal(a.apply(this,arguments),n)})}function xYt(n){return n.match(/\[[\s\S]/)?n.replace(/^\[|\]$/g,""):n.replace(/\\/g,"")}function _Yt(n){var e=n.match(xQ),r,i;for(r=0,i=e.length;r<i;r++)wx[e[r]]?e[r]=wx[e[r]]:e[r]=xYt(e[r]);return function(a){var o="",s;for(s=0;s<i;s++)o+=wh(e[s])?e[s].call(a,n):e[s];return o}}function VP(n,e){return n.isValid()?(e=WOe(e,n.localeData()),rV[e]=rV[e]||_Yt(e),rV[e](n)):n.localeData().invalidDate()}function WOe(n,e){var r=5;function i(a){return e.longDateFormat(a)||a}for(UR.lastIndex=0;r>=0&&UR.test(n);)n=n.replace(UR,i),UR.lastIndex=0,r-=1;return n}var wYt={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function SYt(n){var e=this._longDateFormat[n],r=this._longDateFormat[n.toUpperCase()];return e||!r?e:(this._longDateFormat[n]=r.match(xQ).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[n])}var EYt="Invalid date";function CYt(){return this._invalidDate}var MYt="%d",TYt=/\d{1,2}/;function AYt(n){return this._ordinal.replace("%d",n)}var RYt={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function PYt(n,e,r,i){var a=this._relativeTime[r];return wh(a)?a(n,e,r,i):a.replace(/%d/i,n)}function NYt(n,e){var r=this._relativeTime[n>0?"future":"past"];return wh(r)?r(e):r.replace(/%s/i,e)}var v0e={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function id(n){return typeof n=="string"?v0e[n]||v0e[n.toLowerCase()]:void 0}function _Q(n){var e={},r,i;for(i in n)ai(n,i)&&(r=id(i),r&&(e[r]=n[i]));return e}var OYt={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function IYt(n){var e=[],r;for(r in n)ai(n,r)&&e.push({unit:r,priority:OYt[r]});return e.sort(function(i,a){return i.priority-a.priority}),e}var qOe=/\d/,tu=/\d\d/,YOe=/\d{3}/,wQ=/\d{4}/,v6=/[+-]?\d{6}/,oa=/\d\d?/,XOe=/\d\d\d\d?/,KOe=/\d\d\d\d\d\d?/,y6=/\d{1,3}/,SQ=/\d{1,4}/,b6=/[+-]?\d{1,6}/,xw=/\d+/,x6=/[+-]?\d+/,DYt=/Z|[+-]\d\d:?\d\d/gi,_6=/Z|[+-]\d\d(?::?\d\d)?/gi,LYt=/[+-]?\d+(\.\d{1,3})?/,cT=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,_w=/^[1-9]\d?/,EQ=/^([1-9]\d|\d)/,gI;gI={};function pn(n,e,r){gI[n]=wh(e)?e:function(i,a){return i&&r?r:e}}function kYt(n,e){return ai(gI,n)?gI[n](e._strict,e._locale):new RegExp(FYt(n))}function FYt(n){return Mp(n.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,r,i,a,o){return r||i||a||o}))}function Mp(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ou(n){return n<0?Math.ceil(n)||0:Math.floor(n)}function Vr(n){var e=+n,r=0;return e!==0&&isFinite(e)&&(r=Ou(e)),r}var kW={};function Di(n,e){var r,i=e,a;for(typeof n=="string"&&(n=[n]),Gp(e)&&(i=function(o,s){s[e]=Vr(o)}),a=n.length,r=0;r<a;r++)kW[n[r]]=i}function uT(n,e){Di(n,function(r,i,a,o){a._w=a._w||{},e(r,a._w,a,o)})}function $Yt(n,e,r){e!=null&&ai(kW,n)&&kW[n](e,r._a,r,n)}function w6(n){return n%4===0&&n%100!==0||n%400===0}var qs=0,mp=1,kf=2,Fo=3,Ud=4,vp=5,L0=6,BYt=7,zYt=8;On("Y",0,0,function(){var n=this.year();return n<=9999?fh(n,4):"+"+n});On(0,["YY",2],0,function(){return this.year()%100});On(0,["YYYY",4],0,"year");On(0,["YYYYY",5],0,"year");On(0,["YYYYYY",6,!0],0,"year");pn("Y",x6);pn("YY",oa,tu);pn("YYYY",SQ,wQ);pn("YYYYY",b6,v6);pn("YYYYYY",b6,v6);Di(["YYYYY","YYYYYY"],qs);Di("YYYY",function(n,e){e[qs]=n.length===2?Qt.parseTwoDigitYear(n):Vr(n)});Di("YY",function(n,e){e[qs]=Qt.parseTwoDigitYear(n)});Di("Y",function(n,e){e[qs]=parseInt(n,10)});function fE(n){return w6(n)?366:365}Qt.parseTwoDigitYear=function(n){return Vr(n)+(Vr(n)>68?1900:2e3)};var ZOe=ww("FullYear",!0);function UYt(){return w6(this.year())}function ww(n,e){return function(r){return r!=null?(QOe(this,n,r),Qt.updateOffset(this,e),this):YC(this,n)}}function YC(n,e){if(!n.isValid())return NaN;var r=n._d,i=n._isUTC;switch(e){case"Milliseconds":return i?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return i?r.getUTCSeconds():r.getSeconds();case"Minutes":return i?r.getUTCMinutes():r.getMinutes();case"Hours":return i?r.getUTCHours():r.getHours();case"Date":return i?r.getUTCDate():r.getDate();case"Day":return i?r.getUTCDay():r.getDay();case"Month":return i?r.getUTCMonth():r.getMonth();case"FullYear":return i?r.getUTCFullYear():r.getFullYear();default:return NaN}}function QOe(n,e,r){var i,a,o,s,l;if(!(!n.isValid()||isNaN(r))){switch(i=n._d,a=n._isUTC,e){case"Milliseconds":return void(a?i.setUTCMilliseconds(r):i.setMilliseconds(r));case"Seconds":return void(a?i.setUTCSeconds(r):i.setSeconds(r));case"Minutes":return void(a?i.setUTCMinutes(r):i.setMinutes(r));case"Hours":return void(a?i.setUTCHours(r):i.setHours(r));case"Date":return void(a?i.setUTCDate(r):i.setDate(r));case"FullYear":break;default:return}o=r,s=n.month(),l=n.date(),l=l===29&&s===1&&!w6(o)?28:l,a?i.setUTCFullYear(o,s,l):i.setFullYear(o,s,l)}}function VYt(n){return n=id(n),wh(this[n])?this[n]():this}function GYt(n,e){if(typeof n=="object"){n=_Q(n);var r=IYt(n),i,a=r.length;for(i=0;i<a;i++)this[r[i].unit](n[r[i].unit])}else if(n=id(n),wh(this[n]))return this[n](e);return this}function jYt(n,e){return(n%e+e)%e}var qa;Array.prototype.indexOf?qa=Array.prototype.indexOf:qa=function(n){var e;for(e=0;e<this.length;++e)if(this[e]===n)return e;return-1};function CQ(n,e){if(isNaN(n)||isNaN(e))return NaN;var r=jYt(e,12);return n+=(e-r)/12,r===1?w6(n)?29:28:31-r%7%2}On("M",["MM",2],"Mo",function(){return this.month()+1});On("MMM",0,0,function(n){return this.localeData().monthsShort(this,n)});On("MMMM",0,0,function(n){return this.localeData().months(this,n)});pn("M",oa,_w);pn("MM",oa,tu);pn("MMM",function(n,e){return e.monthsShortRegex(n)});pn("MMMM",function(n,e){return e.monthsRegex(n)});Di(["M","MM"],function(n,e){e[mp]=Vr(n)-1});Di(["MMM","MMMM"],function(n,e,r,i){var a=r._locale.monthsParse(n,i,r._strict);a!=null?e[mp]=a:_r(r).invalidMonth=n});var HYt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),JOe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),eIe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,WYt=cT,qYt=cT;function YYt(n,e){return n?tf(this._months)?this._months[n.month()]:this._months[(this._months.isFormat||eIe).test(e)?"format":"standalone"][n.month()]:tf(this._months)?this._months:this._months.standalone}function XYt(n,e){return n?tf(this._monthsShort)?this._monthsShort[n.month()]:this._monthsShort[eIe.test(e)?"format":"standalone"][n.month()]:tf(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function KYt(n,e,r){var i,a,o,s=n.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=_h([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return r?e==="MMM"?(a=qa.call(this._shortMonthsParse,s),a!==-1?a:null):(a=qa.call(this._longMonthsParse,s),a!==-1?a:null):e==="MMM"?(a=qa.call(this._shortMonthsParse,s),a!==-1?a:(a=qa.call(this._longMonthsParse,s),a!==-1?a:null)):(a=qa.call(this._longMonthsParse,s),a!==-1?a:(a=qa.call(this._shortMonthsParse,s),a!==-1?a:null))}function ZYt(n,e,r){var i,a,o;if(this._monthsParseExact)return KYt.call(this,n,e,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(a=_h([2e3,i]),r&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),!r&&!this._monthsParse[i]&&(o="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),r&&e==="MMMM"&&this._longMonthsParse[i].test(n))return i;if(r&&e==="MMM"&&this._shortMonthsParse[i].test(n))return i;if(!r&&this._monthsParse[i].test(n))return i}}function tIe(n,e){if(!n.isValid())return n;if(typeof e=="string"){if(/^\d+$/.test(e))e=Vr(e);else if(e=n.localeData().monthsParse(e),!Gp(e))return n}var r=e,i=n.date();return i=i<29?i:Math.min(i,CQ(n.year(),r)),n._isUTC?n._d.setUTCMonth(r,i):n._d.setMonth(r,i),n}function nIe(n){return n!=null?(tIe(this,n),Qt.updateOffset(this,!0),this):YC(this,"Month")}function QYt(){return CQ(this.year(),this.month())}function JYt(n){return this._monthsParseExact?(ai(this,"_monthsRegex")||rIe.call(this),n?this._monthsShortStrictRegex:this._monthsShortRegex):(ai(this,"_monthsShortRegex")||(this._monthsShortRegex=WYt),this._monthsShortStrictRegex&&n?this._monthsShortStrictRegex:this._monthsShortRegex)}function eXt(n){return this._monthsParseExact?(ai(this,"_monthsRegex")||rIe.call(this),n?this._monthsStrictRegex:this._monthsRegex):(ai(this,"_monthsRegex")||(this._monthsRegex=qYt),this._monthsStrictRegex&&n?this._monthsStrictRegex:this._monthsRegex)}function rIe(){function n(c,u){return u.length-c.length}var e=[],r=[],i=[],a,o,s,l;for(a=0;a<12;a++)o=_h([2e3,a]),s=Mp(this.monthsShort(o,"")),l=Mp(this.months(o,"")),e.push(s),r.push(l),i.push(l),i.push(s);e.sort(n),r.sort(n),i.sort(n),this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function tXt(n,e,r,i,a,o,s){var l;return n<100&&n>=0?(l=new Date(n+400,e,r,i,a,o,s),isFinite(l.getFullYear())&&l.setFullYear(n)):l=new Date(n,e,r,i,a,o,s),l}function XC(n){var e,r;return n<100&&n>=0?(r=Array.prototype.slice.call(arguments),r[0]=n+400,e=new Date(Date.UTC.apply(null,r)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(n)):e=new Date(Date.UTC.apply(null,arguments)),e}function mI(n,e,r){var i=7+e-r,a=(7+XC(n,0,i).getUTCDay()-e)%7;return-a+i-1}function iIe(n,e,r,i,a){var o=(7+r-i)%7,s=mI(n,i,a),l=1+7*(e-1)+o+s,c,u;return l<=0?(c=n-1,u=fE(c)+l):l>fE(n)?(c=n+1,u=l-fE(n)):(c=n,u=l),{year:c,dayOfYear:u}}function KC(n,e,r){var i=mI(n.year(),e,r),a=Math.floor((n.dayOfYear()-i-1)/7)+1,o,s;return a<1?(s=n.year()-1,o=a+Tp(s,e,r)):a>Tp(n.year(),e,r)?(o=a-Tp(n.year(),e,r),s=n.year()+1):(s=n.year(),o=a),{week:o,year:s}}function Tp(n,e,r){var i=mI(n,e,r),a=mI(n+1,e,r);return(fE(n)-i+a)/7}On("w",["ww",2],"wo","week");On("W",["WW",2],"Wo","isoWeek");pn("w",oa,_w);pn("ww",oa,tu);pn("W",oa,_w);pn("WW",oa,tu);uT(["w","ww","W","WW"],function(n,e,r,i){e[i.substr(0,1)]=Vr(n)});function nXt(n){return KC(n,this._week.dow,this._week.doy).week}var rXt={dow:0,doy:6};function iXt(){return this._week.dow}function aXt(){return this._week.doy}function oXt(n){var e=this.localeData().week(this);return n==null?e:this.add((n-e)*7,"d")}function sXt(n){var e=KC(this,1,4).week;return n==null?e:this.add((n-e)*7,"d")}On("d",0,"do","day");On("dd",0,0,function(n){return this.localeData().weekdaysMin(this,n)});On("ddd",0,0,function(n){return this.localeData().weekdaysShort(this,n)});On("dddd",0,0,function(n){return this.localeData().weekdays(this,n)});On("e",0,0,"weekday");On("E",0,0,"isoWeekday");pn("d",oa);pn("e",oa);pn("E",oa);pn("dd",function(n,e){return e.weekdaysMinRegex(n)});pn("ddd",function(n,e){return e.weekdaysShortRegex(n)});pn("dddd",function(n,e){return e.weekdaysRegex(n)});uT(["dd","ddd","dddd"],function(n,e,r,i){var a=r._locale.weekdaysParse(n,i,r._strict);a!=null?e.d=a:_r(r).invalidWeekday=n});uT(["d","e","E"],function(n,e,r,i){e[i]=Vr(n)});function lXt(n,e){return typeof n!="string"?n:isNaN(n)?(n=e.weekdaysParse(n),typeof n=="number"?n:null):parseInt(n,10)}function cXt(n,e){return typeof n=="string"?e.weekdaysParse(n)%7||7:isNaN(n)?null:n}function MQ(n,e){return n.slice(e,7).concat(n.slice(0,e))}var uXt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),aIe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),dXt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),fXt=cT,hXt=cT,pXt=cT;function gXt(n,e){var r=tf(this._weekdays)?this._weekdays:this._weekdays[n&&n!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return n===!0?MQ(r,this._week.dow):n?r[n.day()]:r}function mXt(n){return n===!0?MQ(this._weekdaysShort,this._week.dow):n?this._weekdaysShort[n.day()]:this._weekdaysShort}function vXt(n){return n===!0?MQ(this._weekdaysMin,this._week.dow):n?this._weekdaysMin[n.day()]:this._weekdaysMin}function yXt(n,e,r){var i,a,o,s=n.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=_h([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return r?e==="dddd"?(a=qa.call(this._weekdaysParse,s),a!==-1?a:null):e==="ddd"?(a=qa.call(this._shortWeekdaysParse,s),a!==-1?a:null):(a=qa.call(this._minWeekdaysParse,s),a!==-1?a:null):e==="dddd"?(a=qa.call(this._weekdaysParse,s),a!==-1||(a=qa.call(this._shortWeekdaysParse,s),a!==-1)?a:(a=qa.call(this._minWeekdaysParse,s),a!==-1?a:null)):e==="ddd"?(a=qa.call(this._shortWeekdaysParse,s),a!==-1||(a=qa.call(this._weekdaysParse,s),a!==-1)?a:(a=qa.call(this._minWeekdaysParse,s),a!==-1?a:null)):(a=qa.call(this._minWeekdaysParse,s),a!==-1||(a=qa.call(this._weekdaysParse,s),a!==-1)?a:(a=qa.call(this._shortWeekdaysParse,s),a!==-1?a:null))}function bXt(n,e,r){var i,a,o;if(this._weekdaysParseExact)return yXt.call(this,n,e,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(a=_h([2e3,1]).day(i),r&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),r&&e==="dddd"&&this._fullWeekdaysParse[i].test(n))return i;if(r&&e==="ddd"&&this._shortWeekdaysParse[i].test(n))return i;if(r&&e==="dd"&&this._minWeekdaysParse[i].test(n))return i;if(!r&&this._weekdaysParse[i].test(n))return i}}function xXt(n){if(!this.isValid())return n!=null?this:NaN;var e=YC(this,"Day");return n!=null?(n=lXt(n,this.localeData()),this.add(n-e,"d")):e}function _Xt(n){if(!this.isValid())return n!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return n==null?e:this.add(n-e,"d")}function wXt(n){if(!this.isValid())return n!=null?this:NaN;if(n!=null){var e=cXt(n,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function SXt(n){return this._weekdaysParseExact?(ai(this,"_weekdaysRegex")||TQ.call(this),n?this._weekdaysStrictRegex:this._weekdaysRegex):(ai(this,"_weekdaysRegex")||(this._weekdaysRegex=fXt),this._weekdaysStrictRegex&&n?this._weekdaysStrictRegex:this._weekdaysRegex)}function EXt(n){return this._weekdaysParseExact?(ai(this,"_weekdaysRegex")||TQ.call(this),n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ai(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=hXt),this._weekdaysShortStrictRegex&&n?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function CXt(n){return this._weekdaysParseExact?(ai(this,"_weekdaysRegex")||TQ.call(this),n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ai(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=pXt),this._weekdaysMinStrictRegex&&n?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function TQ(){function n(d,f){return f.length-d.length}var e=[],r=[],i=[],a=[],o,s,l,c,u;for(o=0;o<7;o++)s=_h([2e3,1]).day(o),l=Mp(this.weekdaysMin(s,"")),c=Mp(this.weekdaysShort(s,"")),u=Mp(this.weekdays(s,"")),e.push(l),r.push(c),i.push(u),a.push(l),a.push(c),a.push(u);e.sort(n),r.sort(n),i.sort(n),a.sort(n),this._weekdaysRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function AQ(){return this.hours()%12||12}function MXt(){return this.hours()||24}On("H",["HH",2],0,"hour");On("h",["hh",2],0,AQ);On("k",["kk",2],0,MXt);On("hmm",0,0,function(){return""+AQ.apply(this)+fh(this.minutes(),2)});On("hmmss",0,0,function(){return""+AQ.apply(this)+fh(this.minutes(),2)+fh(this.seconds(),2)});On("Hmm",0,0,function(){return""+this.hours()+fh(this.minutes(),2)});On("Hmmss",0,0,function(){return""+this.hours()+fh(this.minutes(),2)+fh(this.seconds(),2)});function oIe(n,e){On(n,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}oIe("a",!0);oIe("A",!1);function sIe(n,e){return e._meridiemParse}pn("a",sIe);pn("A",sIe);pn("H",oa,EQ);pn("h",oa,_w);pn("k",oa,_w);pn("HH",oa,tu);pn("hh",oa,tu);pn("kk",oa,tu);pn("hmm",XOe);pn("hmmss",KOe);pn("Hmm",XOe);pn("Hmmss",KOe);Di(["H","HH"],Fo);Di(["k","kk"],function(n,e,r){var i=Vr(n);e[Fo]=i===24?0:i});Di(["a","A"],function(n,e,r){r._isPm=r._locale.isPM(n),r._meridiem=n});Di(["h","hh"],function(n,e,r){e[Fo]=Vr(n),_r(r).bigHour=!0});Di("hmm",function(n,e,r){var i=n.length-2;e[Fo]=Vr(n.substr(0,i)),e[Ud]=Vr(n.substr(i)),_r(r).bigHour=!0});Di("hmmss",function(n,e,r){var i=n.length-4,a=n.length-2;e[Fo]=Vr(n.substr(0,i)),e[Ud]=Vr(n.substr(i,2)),e[vp]=Vr(n.substr(a)),_r(r).bigHour=!0});Di("Hmm",function(n,e,r){var i=n.length-2;e[Fo]=Vr(n.substr(0,i)),e[Ud]=Vr(n.substr(i))});Di("Hmmss",function(n,e,r){var i=n.length-4,a=n.length-2;e[Fo]=Vr(n.substr(0,i)),e[Ud]=Vr(n.substr(i,2)),e[vp]=Vr(n.substr(a))});function TXt(n){return(n+"").toLowerCase().charAt(0)==="p"}var AXt=/[ap]\.?m?\.?/i,RXt=ww("Hours",!0);function PXt(n,e,r){return n>11?r?"pm":"PM":r?"am":"AM"}var lIe={calendar:yYt,longDateFormat:wYt,invalidDate:EYt,ordinal:MYt,dayOfMonthOrdinalParse:TYt,relativeTime:RYt,months:HYt,monthsShort:JOe,week:rXt,weekdays:uXt,weekdaysMin:dXt,weekdaysShort:aIe,meridiemParse:AXt},fa={},HS={},ZC;function NXt(n,e){var r,i=Math.min(n.length,e.length);for(r=0;r<i;r+=1)if(n[r]!==e[r])return r;return i}function y0e(n){return n&&n.toLowerCase().replace("_","-")}function OXt(n){for(var e=0,r,i,a,o;e<n.length;){for(o=y0e(n[e]).split("-"),r=o.length,i=y0e(n[e+1]),i=i?i.split("-"):null;r>0;){if(a=S6(o.slice(0,r).join("-")),a)return a;if(i&&i.length>=r&&NXt(o,i)>=r-1)break;r--}e++}return ZC}function IXt(n){return!!(n&&n.match("^[^/\\\\]*$"))}function S6(n){var e=null,r;if(fa[n]===void 0&&typeof module<"u"&&module&&module.exports&&IXt(n))try{e=ZC._abbr,r=require,r("./locale/"+n),Lm(e)}catch{fa[n]=null}return fa[n]}function Lm(n,e){var r;return n&&(Dl(e)?r=tg(n):r=RQ(n,e),r?ZC=r:typeof console<"u"&&console.warn&&console.warn("Locale "+n+" not found. Did you forget to load it?")),ZC._abbr}function RQ(n,e){if(e!==null){var r,i=lIe;if(e.abbr=n,fa[n]!=null)HOe("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=fa[n]._config;else if(e.parentLocale!=null)if(fa[e.parentLocale]!=null)i=fa[e.parentLocale]._config;else if(r=S6(e.parentLocale),r!=null)i=r._config;else return HS[e.parentLocale]||(HS[e.parentLocale]=[]),HS[e.parentLocale].push({name:n,config:e}),null;return fa[n]=new bQ(DW(i,e)),HS[n]&&HS[n].forEach(function(a){RQ(a.name,a.config)}),Lm(n),fa[n]}else return delete fa[n],null}function DXt(n,e){if(e!=null){var r,i,a=lIe;fa[n]!=null&&fa[n].parentLocale!=null?fa[n].set(DW(fa[n]._config,e)):(i=S6(n),i!=null&&(a=i._config),e=DW(a,e),i==null&&(e.abbr=n),r=new bQ(e),r.parentLocale=fa[n],fa[n]=r),Lm(n)}else fa[n]!=null&&(fa[n].parentLocale!=null?(fa[n]=fa[n].parentLocale,n===Lm()&&Lm(n)):fa[n]!=null&&delete fa[n]);return fa[n]}function tg(n){var e;if(n&&n._locale&&n._locale._abbr&&(n=n._locale._abbr),!n)return ZC;if(!tf(n)){if(e=S6(n),e)return e;n=[n]}return OXt(n)}function LXt(){return LW(fa)}function PQ(n){var e,r=n._a;return r&&_r(n).overflow===-2&&(e=r[mp]<0||r[mp]>11?mp:r[kf]<1||r[kf]>CQ(r[qs],r[mp])?kf:r[Fo]<0||r[Fo]>24||r[Fo]===24&&(r[Ud]!==0||r[vp]!==0||r[L0]!==0)?Fo:r[Ud]<0||r[Ud]>59?Ud:r[vp]<0||r[vp]>59?vp:r[L0]<0||r[L0]>999?L0:-1,_r(n)._overflowDayOfYear&&(e<qs||e>kf)&&(e=kf),_r(n)._overflowWeeks&&e===-1&&(e=BYt),_r(n)._overflowWeekday&&e===-1&&(e=zYt),_r(n).overflow=e),n}var kXt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,FXt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,$Xt=/Z|[+-]\d\d(?::?\d\d)?/,VR=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],iV=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],BXt=/^\/?Date\((-?\d+)/i,zXt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,UXt={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function cIe(n){var e,r,i=n._i,a=kXt.exec(i)||FXt.exec(i),o,s,l,c,u=VR.length,d=iV.length;if(a){for(_r(n).iso=!0,e=0,r=u;e<r;e++)if(VR[e][1].exec(a[1])){s=VR[e][0],o=VR[e][2]!==!1;break}if(s==null){n._isValid=!1;return}if(a[3]){for(e=0,r=d;e<r;e++)if(iV[e][1].exec(a[3])){l=(a[2]||" ")+iV[e][0];break}if(l==null){n._isValid=!1;return}}if(!o&&l!=null){n._isValid=!1;return}if(a[4])if($Xt.exec(a[4]))c="Z";else{n._isValid=!1;return}n._f=s+(l||"")+(c||""),OQ(n)}else n._isValid=!1}function VXt(n,e,r,i,a,o){var s=[GXt(n),JOe.indexOf(e),parseInt(r,10),parseInt(i,10),parseInt(a,10)];return o&&s.push(parseInt(o,10)),s}function GXt(n){var e=parseInt(n,10);return e<=49?2e3+e:e<=999?1900+e:e}function jXt(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function HXt(n,e,r){if(n){var i=aIe.indexOf(n),a=new Date(e[0],e[1],e[2]).getDay();if(i!==a)return _r(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function WXt(n,e,r){if(n)return UXt[n];if(e)return 0;var i=parseInt(r,10),a=i%100,o=(i-a)/100;return o*60+a}function uIe(n){var e=zXt.exec(jXt(n._i)),r;if(e){if(r=VXt(e[4],e[3],e[2],e[5],e[6],e[7]),!HXt(e[1],r,n))return;n._a=r,n._tzm=WXt(e[8],e[9],e[10]),n._d=XC.apply(null,n._a),n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),_r(n).rfc2822=!0}else n._isValid=!1}function qXt(n){var e=BXt.exec(n._i);if(e!==null){n._d=new Date(+e[1]);return}if(cIe(n),n._isValid===!1)delete n._isValid;else return;if(uIe(n),n._isValid===!1)delete n._isValid;else return;n._strict?n._isValid=!1:Qt.createFromInputFallback(n)}Qt.createFromInputFallback=rd("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(n){n._d=new Date(n._i+(n._useUTC?" UTC":""))});function Eb(n,e,r){return n??e??r}function YXt(n){var e=new Date(Qt.now());return n._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function NQ(n){var e,r,i=[],a,o,s;if(!n._d){for(a=YXt(n),n._w&&n._a[kf]==null&&n._a[mp]==null&&XXt(n),n._dayOfYear!=null&&(s=Eb(n._a[qs],a[qs]),(n._dayOfYear>fE(s)||n._dayOfYear===0)&&(_r(n)._overflowDayOfYear=!0),r=XC(s,0,n._dayOfYear),n._a[mp]=r.getUTCMonth(),n._a[kf]=r.getUTCDate()),e=0;e<3&&n._a[e]==null;++e)n._a[e]=i[e]=a[e];for(;e<7;e++)n._a[e]=i[e]=n._a[e]==null?e===2?1:0:n._a[e];n._a[Fo]===24&&n._a[Ud]===0&&n._a[vp]===0&&n._a[L0]===0&&(n._nextDay=!0,n._a[Fo]=0),n._d=(n._useUTC?XC:tXt).apply(null,i),o=n._useUTC?n._d.getUTCDay():n._d.getDay(),n._tzm!=null&&n._d.setUTCMinutes(n._d.getUTCMinutes()-n._tzm),n._nextDay&&(n._a[Fo]=24),n._w&&typeof n._w.d<"u"&&n._w.d!==o&&(_r(n).weekdayMismatch=!0)}}function XXt(n){var e,r,i,a,o,s,l,c,u;e=n._w,e.GG!=null||e.W!=null||e.E!=null?(o=1,s=4,r=Eb(e.GG,n._a[qs],KC(aa(),1,4).year),i=Eb(e.W,1),a=Eb(e.E,1),(a<1||a>7)&&(c=!0)):(o=n._locale._week.dow,s=n._locale._week.doy,u=KC(aa(),o,s),r=Eb(e.gg,n._a[qs],u.year),i=Eb(e.w,u.week),e.d!=null?(a=e.d,(a<0||a>6)&&(c=!0)):e.e!=null?(a=e.e+o,(e.e<0||e.e>6)&&(c=!0)):a=o),i<1||i>Tp(r,o,s)?_r(n)._overflowWeeks=!0:c!=null?_r(n)._overflowWeekday=!0:(l=iIe(r,i,a,o,s),n._a[qs]=l.year,n._dayOfYear=l.dayOfYear)}Qt.ISO_8601=function(){};Qt.RFC_2822=function(){};function OQ(n){if(n._f===Qt.ISO_8601){cIe(n);return}if(n._f===Qt.RFC_2822){uIe(n);return}n._a=[],_r(n).empty=!0;var e=""+n._i,r,i,a,o,s,l=e.length,c=0,u,d;for(a=WOe(n._f,n._locale).match(xQ)||[],d=a.length,r=0;r<d;r++)o=a[r],i=(e.match(kYt(o,n))||[])[0],i&&(s=e.substr(0,e.indexOf(i)),s.length>0&&_r(n).unusedInput.push(s),e=e.slice(e.indexOf(i)+i.length),c+=i.length),wx[o]?(i?_r(n).empty=!1:_r(n).unusedTokens.push(o),$Yt(o,i,n)):n._strict&&!i&&_r(n).unusedTokens.push(o);_r(n).charsLeftOver=l-c,e.length>0&&_r(n).unusedInput.push(e),n._a[Fo]<=12&&_r(n).bigHour===!0&&n._a[Fo]>0&&(_r(n).bigHour=void 0),_r(n).parsedDateParts=n._a.slice(0),_r(n).meridiem=n._meridiem,n._a[Fo]=KXt(n._locale,n._a[Fo],n._meridiem),u=_r(n).era,u!==null&&(n._a[qs]=n._locale.erasConvertYear(u,n._a[qs])),NQ(n),PQ(n)}function KXt(n,e,r){var i;return r==null?e:n.meridiemHour!=null?n.meridiemHour(e,r):(n.isPM!=null&&(i=n.isPM(r),i&&e<12&&(e+=12),!i&&e===12&&(e=0)),e)}function ZXt(n){var e,r,i,a,o,s,l=!1,c=n._f.length;if(c===0){_r(n).invalidFormat=!0,n._d=new Date(NaN);return}for(a=0;a<c;a++)o=0,s=!1,e=yQ({},n),n._useUTC!=null&&(e._useUTC=n._useUTC),e._f=n._f[a],OQ(e),vQ(e)&&(s=!0),o+=_r(e).charsLeftOver,o+=_r(e).unusedTokens.length*10,_r(e).score=o,l?o<i&&(i=o,r=e):(i==null||o<i||s)&&(i=o,r=e,s&&(l=!0));dm(n,r||e)}function QXt(n){if(!n._d){var e=_Q(n._i),r=e.day===void 0?e.date:e.day;n._a=GOe([e.year,e.month,r,e.hour,e.minute,e.second,e.millisecond],function(i){return i&&parseInt(i,10)}),NQ(n)}}function JXt(n){var e=new lT(PQ(dIe(n)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function dIe(n){var e=n._i,r=n._f;return n._locale=n._locale||tg(n._l),e===null||r===void 0&&e===""?m6({nullInput:!0}):(typeof e=="string"&&(n._i=e=n._locale.preparse(e)),nf(e)?new lT(PQ(e)):(sT(e)?n._d=e:tf(r)?ZXt(n):r?OQ(n):eKt(n),vQ(n)||(n._d=null),n))}function eKt(n){var e=n._i;Dl(e)?n._d=new Date(Qt.now()):sT(e)?n._d=new Date(e.valueOf()):typeof e=="string"?qXt(n):tf(e)?(n._a=GOe(e.slice(0),function(r){return parseInt(r,10)}),NQ(n)):ey(e)?QXt(n):Gp(e)?n._d=new Date(e):Qt.createFromInputFallback(n)}function fIe(n,e,r,i,a){var o={};return(e===!0||e===!1)&&(i=e,e=void 0),(r===!0||r===!1)&&(i=r,r=void 0),(ey(n)&&mQ(n)||tf(n)&&n.length===0)&&(n=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=a,o._l=r,o._i=n,o._f=e,o._strict=i,JXt(o)}function aa(n,e,r,i){return fIe(n,e,r,i,!1)}var tKt=rd("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=aa.apply(null,arguments);return this.isValid()&&n.isValid()?n<this?this:n:m6()}),nKt=rd("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var n=aa.apply(null,arguments);return this.isValid()&&n.isValid()?n>this?this:n:m6()});function hIe(n,e){var r,i;if(e.length===1&&tf(e[0])&&(e=e[0]),!e.length)return aa();for(r=e[0],i=1;i<e.length;++i)(!e[i].isValid()||e[i][n](r))&&(r=e[i]);return r}function rKt(){var n=[].slice.call(arguments,0);return hIe("isBefore",n)}function iKt(){var n=[].slice.call(arguments,0);return hIe("isAfter",n)}var aKt=function(){return Date.now?Date.now():+new Date},WS=["year","quarter","month","week","day","hour","minute","second","millisecond"];function oKt(n){var e,r=!1,i,a=WS.length;for(e in n)if(ai(n,e)&&!(qa.call(WS,e)!==-1&&(n[e]==null||!isNaN(n[e]))))return!1;for(i=0;i<a;++i)if(n[WS[i]]){if(r)return!1;parseFloat(n[WS[i]])!==Vr(n[WS[i]])&&(r=!0)}return!0}function sKt(){return this._isValid}function lKt(){return ff(NaN)}function E6(n){var e=_Q(n),r=e.year||0,i=e.quarter||0,a=e.month||0,o=e.week||e.isoWeek||0,s=e.day||0,l=e.hour||0,c=e.minute||0,u=e.second||0,d=e.millisecond||0;this._isValid=oKt(e),this._milliseconds=+d+u*1e3+c*6e4+l*1e3*60*60,this._days=+s+o*7,this._months=+a+i*3+r*12,this._data={},this._locale=tg(),this._bubble()}function GP(n){return n instanceof E6}function FW(n){return n<0?Math.round(-1*n)*-1:Math.round(n)}function cKt(n,e,r){var i=Math.min(n.length,e.length),a=Math.abs(n.length-e.length),o=0,s;for(s=0;s<i;s++)Vr(n[s])!==Vr(e[s])&&o++;return o+a}function pIe(n,e){On(n,0,0,function(){var r=this.utcOffset(),i="+";return r<0&&(r=-r,i="-"),i+fh(~~(r/60),2)+e+fh(~~r%60,2)})}pIe("Z",":");pIe("ZZ","");pn("Z",_6);pn("ZZ",_6);Di(["Z","ZZ"],function(n,e,r){r._useUTC=!0,r._tzm=IQ(_6,n)});var uKt=/([\+\-]|\d\d)/gi;function IQ(n,e){var r=(e||"").match(n),i,a,o;return r===null?null:(i=r[r.length-1]||[],a=(i+"").match(uKt)||["-",0,0],o=+(a[1]*60)+Vr(a[2]),o===0?0:a[0]==="+"?o:-o)}function DQ(n,e){var r,i;return e._isUTC?(r=e.clone(),i=(nf(n)||sT(n)?n.valueOf():aa(n).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+i),Qt.updateOffset(r,!1),r):aa(n).local()}function $W(n){return-Math.round(n._d.getTimezoneOffset())}Qt.updateOffset=function(){};function dKt(n,e,r){var i=this._offset||0,a;if(!this.isValid())return n!=null?this:NaN;if(n!=null){if(typeof n=="string"){if(n=IQ(_6,n),n===null)return this}else Math.abs(n)<16&&!r&&(n=n*60);return!this._isUTC&&e&&(a=$W(this)),this._offset=n,this._isUTC=!0,a!=null&&this.add(a,"m"),i!==n&&(!e||this._changeInProgress?vIe(this,ff(n-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Qt.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:$W(this)}function fKt(n,e){return n!=null?(typeof n!="string"&&(n=-n),this.utcOffset(n,e),this):-this.utcOffset()}function hKt(n){return this.utcOffset(0,n)}function pKt(n){return this._isUTC&&(this.utcOffset(0,n),this._isUTC=!1,n&&this.subtract($W(this),"m")),this}function gKt(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var n=IQ(DYt,this._i);n!=null?this.utcOffset(n):this.utcOffset(0,!0)}return this}function mKt(n){return this.isValid()?(n=n?aa(n).utcOffset():0,(this.utcOffset()-n)%60===0):!1}function vKt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function yKt(){if(!Dl(this._isDSTShifted))return this._isDSTShifted;var n={},e;return yQ(n,this),n=dIe(n),n._a?(e=n._isUTC?_h(n._a):aa(n._a),this._isDSTShifted=this.isValid()&&cKt(n._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function bKt(){return this.isValid()?!this._isUTC:!1}function xKt(){return this.isValid()?this._isUTC:!1}function gIe(){return this.isValid()?this._isUTC&&this._offset===0:!1}var _Kt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,wKt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ff(n,e){var r=n,i=null,a,o,s;return GP(n)?r={ms:n._milliseconds,d:n._days,M:n._months}:Gp(n)||!isNaN(+n)?(r={},e?r[e]=+n:r.milliseconds=+n):(i=_Kt.exec(n))?(a=i[1]==="-"?-1:1,r={y:0,d:Vr(i[kf])*a,h:Vr(i[Fo])*a,m:Vr(i[Ud])*a,s:Vr(i[vp])*a,ms:Vr(FW(i[L0]*1e3))*a}):(i=wKt.exec(n))?(a=i[1]==="-"?-1:1,r={y:Kv(i[2],a),M:Kv(i[3],a),w:Kv(i[4],a),d:Kv(i[5],a),h:Kv(i[6],a),m:Kv(i[7],a),s:Kv(i[8],a)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(s=SKt(aa(r.from),aa(r.to)),r={},r.ms=s.milliseconds,r.M=s.months),o=new E6(r),GP(n)&&ai(n,"_locale")&&(o._locale=n._locale),GP(n)&&ai(n,"_isValid")&&(o._isValid=n._isValid),o}ff.fn=E6.prototype;ff.invalid=lKt;function Kv(n,e){var r=n&&parseFloat(n.replace(",","."));return(isNaN(r)?0:r)*e}function b0e(n,e){var r={};return r.months=e.month()-n.month()+(e.year()-n.year())*12,n.clone().add(r.months,"M").isAfter(e)&&--r.months,r.milliseconds=+e-+n.clone().add(r.months,"M"),r}function SKt(n,e){var r;return n.isValid()&&e.isValid()?(e=DQ(e,n),n.isBefore(e)?r=b0e(n,e):(r=b0e(e,n),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function mIe(n,e){return function(r,i){var a,o;return i!==null&&!isNaN(+i)&&(HOe(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=r,r=i,i=o),a=ff(r,i),vIe(this,a,n),this}}function vIe(n,e,r,i){var a=e._milliseconds,o=FW(e._days),s=FW(e._months);n.isValid()&&(i=i??!0,s&&tIe(n,YC(n,"Month")+s*r),o&&QOe(n,"Date",YC(n,"Date")+o*r),a&&n._d.setTime(n._d.valueOf()+a*r),i&&Qt.updateOffset(n,o||s))}var EKt=mIe(1,"add"),CKt=mIe(-1,"subtract");function yIe(n){return typeof n=="string"||n instanceof String}function MKt(n){return nf(n)||sT(n)||yIe(n)||Gp(n)||AKt(n)||TKt(n)||n===null||n===void 0}function TKt(n){var e=ey(n)&&!mQ(n),r=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a,o,s=i.length;for(a=0;a<s;a+=1)o=i[a],r=r||ai(n,o);return e&&r}function AKt(n){var e=tf(n),r=!1;return e&&(r=n.filter(function(i){return!Gp(i)&&yIe(n)}).length===0),e&&r}function RKt(n){var e=ey(n)&&!mQ(n),r=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],a,o;for(a=0;a<i.length;a+=1)o=i[a],r=r||ai(n,o);return e&&r}function PKt(n,e){var r=n.diff(e,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function NKt(n,e){arguments.length===1&&(arguments[0]?MKt(arguments[0])?(n=arguments[0],e=void 0):RKt(arguments[0])&&(e=arguments[0],n=void 0):(n=void 0,e=void 0));var r=n||aa(),i=DQ(r,this).startOf("day"),a=Qt.calendarFormat(this,i)||"sameElse",o=e&&(wh(e[a])?e[a].call(this,r):e[a]);return this.format(o||this.localeData().calendar(a,this,aa(r)))}function OKt(){return new lT(this)}function IKt(n,e){var r=nf(n)?n:aa(n);return this.isValid()&&r.isValid()?(e=id(e)||"millisecond",e==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(e).valueOf()):!1}function DKt(n,e){var r=nf(n)?n:aa(n);return this.isValid()&&r.isValid()?(e=id(e)||"millisecond",e==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(e).valueOf()<r.valueOf()):!1}function LKt(n,e,r,i){var a=nf(n)?n:aa(n),o=nf(e)?e:aa(e);return this.isValid()&&a.isValid()&&o.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(a,r):!this.isBefore(a,r))&&(i[1]===")"?this.isBefore(o,r):!this.isAfter(o,r))):!1}function kKt(n,e){var r=nf(n)?n:aa(n),i;return this.isValid()&&r.isValid()?(e=id(e)||"millisecond",e==="millisecond"?this.valueOf()===r.valueOf():(i=r.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function FKt(n,e){return this.isSame(n,e)||this.isAfter(n,e)}function $Kt(n,e){return this.isSame(n,e)||this.isBefore(n,e)}function BKt(n,e,r){var i,a,o;if(!this.isValid())return NaN;if(i=DQ(n,this),!i.isValid())return NaN;switch(a=(i.utcOffset()-this.utcOffset())*6e4,e=id(e),e){case"year":o=jP(this,i)/12;break;case"month":o=jP(this,i);break;case"quarter":o=jP(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-a)/864e5;break;case"week":o=(this-i-a)/6048e5;break;default:o=this-i}return r?o:Ou(o)}function jP(n,e){if(n.date()<e.date())return-jP(e,n);var r=(e.year()-n.year())*12+(e.month()-n.month()),i=n.clone().add(r,"months"),a,o;return e-i<0?(a=n.clone().add(r-1,"months"),o=(e-i)/(i-a)):(a=n.clone().add(r+1,"months"),o=(e-i)/(a-i)),-(r+o)||0}Qt.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Qt.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function zKt(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function UKt(n){if(!this.isValid())return null;var e=n!==!0,r=e?this.clone().utc():this;return r.year()<0||r.year()>9999?VP(r,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):wh(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",VP(r,"Z")):VP(r,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function VKt(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var n="moment",e="",r,i,a,o;return this.isLocal()||(n=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),r="["+n+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a="-MM-DD[T]HH:mm:ss.SSS",o=e+'[")]',this.format(r+i+a+o)}function GKt(n){n||(n=this.isUtc()?Qt.defaultFormatUtc:Qt.defaultFormat);var e=VP(this,n);return this.localeData().postformat(e)}function jKt(n,e){return this.isValid()&&(nf(n)&&n.isValid()||aa(n).isValid())?ff({to:this,from:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function HKt(n){return this.from(aa(),n)}function WKt(n,e){return this.isValid()&&(nf(n)&&n.isValid()||aa(n).isValid())?ff({from:this,to:n}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function qKt(n){return this.to(aa(),n)}function bIe(n){var e;return n===void 0?this._locale._abbr:(e=tg(n),e!=null&&(this._locale=e),this)}var xIe=rd("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(n){return n===void 0?this.localeData():this.locale(n)});function _Ie(){return this._locale}var vI=1e3,Sx=60*vI,yI=60*Sx,wIe=(365*400+97)*24*yI;function Ex(n,e){return(n%e+e)%e}function SIe(n,e,r){return n<100&&n>=0?new Date(n+400,e,r)-wIe:new Date(n,e,r).valueOf()}function EIe(n,e,r){return n<100&&n>=0?Date.UTC(n+400,e,r)-wIe:Date.UTC(n,e,r)}function YKt(n){var e,r;if(n=id(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?EIe:SIe,n){case"year":e=r(this.year(),0,1);break;case"quarter":e=r(this.year(),this.month()-this.month()%3,1);break;case"month":e=r(this.year(),this.month(),1);break;case"week":e=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=r(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Ex(e+(this._isUTC?0:this.utcOffset()*Sx),yI);break;case"minute":e=this._d.valueOf(),e-=Ex(e,Sx);break;case"second":e=this._d.valueOf(),e-=Ex(e,vI);break}return this._d.setTime(e),Qt.updateOffset(this,!0),this}function XKt(n){var e,r;if(n=id(n),n===void 0||n==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?EIe:SIe,n){case"year":e=r(this.year()+1,0,1)-1;break;case"quarter":e=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=r(this.year(),this.month()+1,1)-1;break;case"week":e=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=yI-Ex(e+(this._isUTC?0:this.utcOffset()*Sx),yI)-1;break;case"minute":e=this._d.valueOf(),e+=Sx-Ex(e,Sx)-1;break;case"second":e=this._d.valueOf(),e+=vI-Ex(e,vI)-1;break}return this._d.setTime(e),Qt.updateOffset(this,!0),this}function KKt(){return this._d.valueOf()-(this._offset||0)*6e4}function ZKt(){return Math.floor(this.valueOf()/1e3)}function QKt(){return new Date(this.valueOf())}function JKt(){var n=this;return[n.year(),n.month(),n.date(),n.hour(),n.minute(),n.second(),n.millisecond()]}function eZt(){var n=this;return{years:n.year(),months:n.month(),date:n.date(),hours:n.hours(),minutes:n.minutes(),seconds:n.seconds(),milliseconds:n.milliseconds()}}function tZt(){return this.isValid()?this.toISOString():null}function nZt(){return vQ(this)}function rZt(){return dm({},_r(this))}function iZt(){return _r(this).overflow}function aZt(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}On("N",0,0,"eraAbbr");On("NN",0,0,"eraAbbr");On("NNN",0,0,"eraAbbr");On("NNNN",0,0,"eraName");On("NNNNN",0,0,"eraNarrow");On("y",["y",1],"yo","eraYear");On("y",["yy",2],0,"eraYear");On("y",["yyy",3],0,"eraYear");On("y",["yyyy",4],0,"eraYear");pn("N",LQ);pn("NN",LQ);pn("NNN",LQ);pn("NNNN",mZt);pn("NNNNN",vZt);Di(["N","NN","NNN","NNNN","NNNNN"],function(n,e,r,i){var a=r._locale.erasParse(n,i,r._strict);a?_r(r).era=a:_r(r).invalidEra=n});pn("y",xw);pn("yy",xw);pn("yyy",xw);pn("yyyy",xw);pn("yo",yZt);Di(["y","yy","yyy","yyyy"],qs);Di(["yo"],function(n,e,r,i){var a;r._locale._eraYearOrdinalRegex&&(a=n.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?e[qs]=r._locale.eraYearOrdinalParse(n,a):e[qs]=parseInt(n,10)});function oZt(n,e){var r,i,a,o=this._eras||tg("en")._eras;for(r=0,i=o.length;r<i;++r){switch(typeof o[r].since){case"string":a=Qt(o[r].since).startOf("day"),o[r].since=a.valueOf();break}switch(typeof o[r].until){case"undefined":o[r].until=1/0;break;case"string":a=Qt(o[r].until).startOf("day").valueOf(),o[r].until=a.valueOf();break}}return o}function sZt(n,e,r){var i,a,o=this.eras(),s,l,c;for(n=n.toUpperCase(),i=0,a=o.length;i<a;++i)if(s=o[i].name.toUpperCase(),l=o[i].abbr.toUpperCase(),c=o[i].narrow.toUpperCase(),r)switch(e){case"N":case"NN":case"NNN":if(l===n)return o[i];break;case"NNNN":if(s===n)return o[i];break;case"NNNNN":if(c===n)return o[i];break}else if([s,l,c].indexOf(n)>=0)return o[i]}function lZt(n,e){var r=n.since<=n.until?1:-1;return e===void 0?Qt(n.since).year():Qt(n.since).year()+(e-n.offset)*r}function cZt(){var n,e,r,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(r=this.clone().startOf("day").valueOf(),i[n].since<=r&&r<=i[n].until||i[n].until<=r&&r<=i[n].since)return i[n].name;return""}function uZt(){var n,e,r,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(r=this.clone().startOf("day").valueOf(),i[n].since<=r&&r<=i[n].until||i[n].until<=r&&r<=i[n].since)return i[n].narrow;return""}function dZt(){var n,e,r,i=this.localeData().eras();for(n=0,e=i.length;n<e;++n)if(r=this.clone().startOf("day").valueOf(),i[n].since<=r&&r<=i[n].until||i[n].until<=r&&r<=i[n].since)return i[n].abbr;return""}function fZt(){var n,e,r,i,a=this.localeData().eras();for(n=0,e=a.length;n<e;++n)if(r=a[n].since<=a[n].until?1:-1,i=this.clone().startOf("day").valueOf(),a[n].since<=i&&i<=a[n].until||a[n].until<=i&&i<=a[n].since)return(this.year()-Qt(a[n].since).year())*r+a[n].offset;return this.year()}function hZt(n){return ai(this,"_erasNameRegex")||kQ.call(this),n?this._erasNameRegex:this._erasRegex}function pZt(n){return ai(this,"_erasAbbrRegex")||kQ.call(this),n?this._erasAbbrRegex:this._erasRegex}function gZt(n){return ai(this,"_erasNarrowRegex")||kQ.call(this),n?this._erasNarrowRegex:this._erasRegex}function LQ(n,e){return e.erasAbbrRegex(n)}function mZt(n,e){return e.erasNameRegex(n)}function vZt(n,e){return e.erasNarrowRegex(n)}function yZt(n,e){return e._eraYearOrdinalRegex||xw}function kQ(){var n=[],e=[],r=[],i=[],a,o,s,l,c,u=this.eras();for(a=0,o=u.length;a<o;++a)s=Mp(u[a].name),l=Mp(u[a].abbr),c=Mp(u[a].narrow),e.push(s),n.push(l),r.push(c),i.push(s),i.push(l),i.push(c);this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}On(0,["gg",2],0,function(){return this.weekYear()%100});On(0,["GG",2],0,function(){return this.isoWeekYear()%100});function C6(n,e){On(0,[n,n.length],0,e)}C6("gggg","weekYear");C6("ggggg","weekYear");C6("GGGG","isoWeekYear");C6("GGGGG","isoWeekYear");pn("G",x6);pn("g",x6);pn("GG",oa,tu);pn("gg",oa,tu);pn("GGGG",SQ,wQ);pn("gggg",SQ,wQ);pn("GGGGG",b6,v6);pn("ggggg",b6,v6);uT(["gggg","ggggg","GGGG","GGGGG"],function(n,e,r,i){e[i.substr(0,2)]=Vr(n)});uT(["gg","GG"],function(n,e,r,i){e[i]=Qt.parseTwoDigitYear(n)});function bZt(n){return CIe.call(this,n,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function xZt(n){return CIe.call(this,n,this.isoWeek(),this.isoWeekday(),1,4)}function _Zt(){return Tp(this.year(),1,4)}function wZt(){return Tp(this.isoWeekYear(),1,4)}function SZt(){var n=this.localeData()._week;return Tp(this.year(),n.dow,n.doy)}function EZt(){var n=this.localeData()._week;return Tp(this.weekYear(),n.dow,n.doy)}function CIe(n,e,r,i,a){var o;return n==null?KC(this,i,a).year:(o=Tp(n,i,a),e>o&&(e=o),CZt.call(this,n,e,r,i,a))}function CZt(n,e,r,i,a){var o=iIe(n,e,r,i,a),s=XC(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}On("Q",0,"Qo","quarter");pn("Q",qOe);Di("Q",function(n,e){e[mp]=(Vr(n)-1)*3});function MZt(n){return n==null?Math.ceil((this.month()+1)/3):this.month((n-1)*3+this.month()%3)}On("D",["DD",2],"Do","date");pn("D",oa,_w);pn("DD",oa,tu);pn("Do",function(n,e){return n?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});Di(["D","DD"],kf);Di("Do",function(n,e){e[kf]=Vr(n.match(oa)[0])});var MIe=ww("Date",!0);On("DDD",["DDDD",3],"DDDo","dayOfYear");pn("DDD",y6);pn("DDDD",YOe);Di(["DDD","DDDD"],function(n,e,r){r._dayOfYear=Vr(n)});function TZt(n){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return n==null?e:this.add(n-e,"d")}On("m",["mm",2],0,"minute");pn("m",oa,EQ);pn("mm",oa,tu);Di(["m","mm"],Ud);var AZt=ww("Minutes",!1);On("s",["ss",2],0,"second");pn("s",oa,EQ);pn("ss",oa,tu);Di(["s","ss"],vp);var RZt=ww("Seconds",!1);On("S",0,0,function(){return~~(this.millisecond()/100)});On(0,["SS",2],0,function(){return~~(this.millisecond()/10)});On(0,["SSS",3],0,"millisecond");On(0,["SSSS",4],0,function(){return this.millisecond()*10});On(0,["SSSSS",5],0,function(){return this.millisecond()*100});On(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});On(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});On(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});On(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});pn("S",y6,qOe);pn("SS",y6,tu);pn("SSS",y6,YOe);var fm,TIe;for(fm="SSSS";fm.length<=9;fm+="S")pn(fm,xw);function PZt(n,e){e[L0]=Vr(("0."+n)*1e3)}for(fm="S";fm.length<=9;fm+="S")Di(fm,PZt);TIe=ww("Milliseconds",!1);On("z",0,0,"zoneAbbr");On("zz",0,0,"zoneName");function NZt(){return this._isUTC?"UTC":""}function OZt(){return this._isUTC?"Coordinated Universal Time":""}var jt=lT.prototype;jt.add=EKt;jt.calendar=NKt;jt.clone=OKt;jt.diff=BKt;jt.endOf=XKt;jt.format=GKt;jt.from=jKt;jt.fromNow=HKt;jt.to=WKt;jt.toNow=qKt;jt.get=VYt;jt.invalidAt=iZt;jt.isAfter=IKt;jt.isBefore=DKt;jt.isBetween=LKt;jt.isSame=kKt;jt.isSameOrAfter=FKt;jt.isSameOrBefore=$Kt;jt.isValid=nZt;jt.lang=xIe;jt.locale=bIe;jt.localeData=_Ie;jt.max=nKt;jt.min=tKt;jt.parsingFlags=rZt;jt.set=GYt;jt.startOf=YKt;jt.subtract=CKt;jt.toArray=JKt;jt.toObject=eZt;jt.toDate=QKt;jt.toISOString=UKt;jt.inspect=VKt;typeof Symbol<"u"&&Symbol.for!=null&&(jt[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});jt.toJSON=tZt;jt.toString=zKt;jt.unix=ZKt;jt.valueOf=KKt;jt.creationData=aZt;jt.eraName=cZt;jt.eraNarrow=uZt;jt.eraAbbr=dZt;jt.eraYear=fZt;jt.year=ZOe;jt.isLeapYear=UYt;jt.weekYear=bZt;jt.isoWeekYear=xZt;jt.quarter=jt.quarters=MZt;jt.month=nIe;jt.daysInMonth=QYt;jt.week=jt.weeks=oXt;jt.isoWeek=jt.isoWeeks=sXt;jt.weeksInYear=SZt;jt.weeksInWeekYear=EZt;jt.isoWeeksInYear=_Zt;jt.isoWeeksInISOWeekYear=wZt;jt.date=MIe;jt.day=jt.days=xXt;jt.weekday=_Xt;jt.isoWeekday=wXt;jt.dayOfYear=TZt;jt.hour=jt.hours=RXt;jt.minute=jt.minutes=AZt;jt.second=jt.seconds=RZt;jt.millisecond=jt.milliseconds=TIe;jt.utcOffset=dKt;jt.utc=hKt;jt.local=pKt;jt.parseZone=gKt;jt.hasAlignedHourOffset=mKt;jt.isDST=vKt;jt.isLocal=bKt;jt.isUtcOffset=xKt;jt.isUtc=gIe;jt.isUTC=gIe;jt.zoneAbbr=NZt;jt.zoneName=OZt;jt.dates=rd("dates accessor is deprecated. Use date instead.",MIe);jt.months=rd("months accessor is deprecated. Use month instead",nIe);jt.years=rd("years accessor is deprecated. Use year instead",ZOe);jt.zone=rd("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",fKt);jt.isDSTShifted=rd("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",yKt);function IZt(n){return aa(n*1e3)}function DZt(){return aa.apply(null,arguments).parseZone()}function AIe(n){return n}var oi=bQ.prototype;oi.calendar=bYt;oi.longDateFormat=SYt;oi.invalidDate=CYt;oi.ordinal=AYt;oi.preparse=AIe;oi.postformat=AIe;oi.relativeTime=PYt;oi.pastFuture=NYt;oi.set=vYt;oi.eras=oZt;oi.erasParse=sZt;oi.erasConvertYear=lZt;oi.erasAbbrRegex=pZt;oi.erasNameRegex=hZt;oi.erasNarrowRegex=gZt;oi.months=YYt;oi.monthsShort=XYt;oi.monthsParse=ZYt;oi.monthsRegex=eXt;oi.monthsShortRegex=JYt;oi.week=nXt;oi.firstDayOfYear=aXt;oi.firstDayOfWeek=iXt;oi.weekdays=gXt;oi.weekdaysMin=vXt;oi.weekdaysShort=mXt;oi.weekdaysParse=bXt;oi.weekdaysRegex=SXt;oi.weekdaysShortRegex=EXt;oi.weekdaysMinRegex=CXt;oi.isPM=TXt;oi.meridiem=PXt;function bI(n,e,r,i){var a=tg(),o=_h().set(i,e);return a[r](o,n)}function RIe(n,e,r){if(Gp(n)&&(e=n,n=void 0),n=n||"",e!=null)return bI(n,e,r,"month");var i,a=[];for(i=0;i<12;i++)a[i]=bI(n,i,r,"month");return a}function FQ(n,e,r,i){typeof n=="boolean"?(Gp(e)&&(r=e,e=void 0),e=e||""):(e=n,r=e,n=!1,Gp(e)&&(r=e,e=void 0),e=e||"");var a=tg(),o=n?a._week.dow:0,s,l=[];if(r!=null)return bI(e,(r+o)%7,i,"day");for(s=0;s<7;s++)l[s]=bI(e,(s+o)%7,i,"day");return l}function LZt(n,e){return RIe(n,e,"months")}function kZt(n,e){return RIe(n,e,"monthsShort")}function FZt(n,e,r){return FQ(n,e,r,"weekdays")}function $Zt(n,e,r){return FQ(n,e,r,"weekdaysShort")}function BZt(n,e,r){return FQ(n,e,r,"weekdaysMin")}Lm("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(n){var e=n%10,r=Vr(n%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return n+r}});Qt.lang=rd("moment.lang is deprecated. Use moment.locale instead.",Lm);Qt.langData=rd("moment.langData is deprecated. Use moment.localeData instead.",tg);var Uh=Math.abs;function zZt(){var n=this._data;return this._milliseconds=Uh(this._milliseconds),this._days=Uh(this._days),this._months=Uh(this._months),n.milliseconds=Uh(n.milliseconds),n.seconds=Uh(n.seconds),n.minutes=Uh(n.minutes),n.hours=Uh(n.hours),n.months=Uh(n.months),n.years=Uh(n.years),this}function PIe(n,e,r,i){var a=ff(e,r);return n._milliseconds+=i*a._milliseconds,n._days+=i*a._days,n._months+=i*a._months,n._bubble()}function UZt(n,e){return PIe(this,n,e,1)}function VZt(n,e){return PIe(this,n,e,-1)}function x0e(n){return n<0?Math.floor(n):Math.ceil(n)}function GZt(){var n=this._milliseconds,e=this._days,r=this._months,i=this._data,a,o,s,l,c;return n>=0&&e>=0&&r>=0||n<=0&&e<=0&&r<=0||(n+=x0e(BW(r)+e)*864e5,e=0,r=0),i.milliseconds=n%1e3,a=Ou(n/1e3),i.seconds=a%60,o=Ou(a/60),i.minutes=o%60,s=Ou(o/60),i.hours=s%24,e+=Ou(s/24),c=Ou(NIe(e)),r+=c,e-=x0e(BW(c)),l=Ou(r/12),r%=12,i.days=e,i.months=r,i.years=l,this}function NIe(n){return n*4800/146097}function BW(n){return n*146097/4800}function jZt(n){if(!this.isValid())return NaN;var e,r,i=this._milliseconds;if(n=id(n),n==="month"||n==="quarter"||n==="year")switch(e=this._days+i/864e5,r=this._months+NIe(e),n){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(e=this._days+Math.round(BW(this._months)),n){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+n)}}function ng(n){return function(){return this.as(n)}}var OIe=ng("ms"),HZt=ng("s"),WZt=ng("m"),qZt=ng("h"),YZt=ng("d"),XZt=ng("w"),KZt=ng("M"),ZZt=ng("Q"),QZt=ng("y"),JZt=OIe;function eQt(){return ff(this)}function tQt(n){return n=id(n),this.isValid()?this[n+"s"]():NaN}function t1(n){return function(){return this.isValid()?this._data[n]:NaN}}var nQt=t1("milliseconds"),rQt=t1("seconds"),iQt=t1("minutes"),aQt=t1("hours"),oQt=t1("days"),sQt=t1("months"),lQt=t1("years");function cQt(){return Ou(this.days()/7)}var Hh=Math.round,Zb={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function uQt(n,e,r,i,a){return a.relativeTime(e||1,!!r,n,i)}function dQt(n,e,r,i){var a=ff(n).abs(),o=Hh(a.as("s")),s=Hh(a.as("m")),l=Hh(a.as("h")),c=Hh(a.as("d")),u=Hh(a.as("M")),d=Hh(a.as("w")),f=Hh(a.as("y")),h=o<=r.ss&&["s",o]||o<r.s&&["ss",o]||s<=1&&["m"]||s<r.m&&["mm",s]||l<=1&&["h"]||l<r.h&&["hh",l]||c<=1&&["d"]||c<r.d&&["dd",c];return r.w!=null&&(h=h||d<=1&&["w"]||d<r.w&&["ww",d]),h=h||u<=1&&["M"]||u<r.M&&["MM",u]||f<=1&&["y"]||["yy",f],h[2]=e,h[3]=+n>0,h[4]=i,uQt.apply(null,h)}function fQt(n){return n===void 0?Hh:typeof n=="function"?(Hh=n,!0):!1}function hQt(n,e){return Zb[n]===void 0?!1:e===void 0?Zb[n]:(Zb[n]=e,n==="s"&&(Zb.ss=e-1),!0)}function pQt(n,e){if(!this.isValid())return this.localeData().invalidDate();var r=!1,i=Zb,a,o;return typeof n=="object"&&(e=n,n=!1),typeof n=="boolean"&&(r=n),typeof e=="object"&&(i=Object.assign({},Zb,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),a=this.localeData(),o=dQt(this,!r,i,a),r&&(o=a.pastFuture(+this,o)),a.postformat(o)}var aV=Math.abs;function vb(n){return(n>0)-(n<0)||+n}function M6(){if(!this.isValid())return this.localeData().invalidDate();var n=aV(this._milliseconds)/1e3,e=aV(this._days),r=aV(this._months),i,a,o,s,l=this.asSeconds(),c,u,d,f;return l?(i=Ou(n/60),a=Ou(i/60),n%=60,i%=60,o=Ou(r/12),r%=12,s=n?n.toFixed(3).replace(/\.?0+$/,""):"",c=l<0?"-":"",u=vb(this._months)!==vb(l)?"-":"",d=vb(this._days)!==vb(l)?"-":"",f=vb(this._milliseconds)!==vb(l)?"-":"",c+"P"+(o?u+o+"Y":"")+(r?u+r+"M":"")+(e?d+e+"D":"")+(a||i||n?"T":"")+(a?f+a+"H":"")+(i?f+i+"M":"")+(n?f+s+"S":"")):"P0D"}var Jr=E6.prototype;Jr.isValid=sKt;Jr.abs=zZt;Jr.add=UZt;Jr.subtract=VZt;Jr.as=jZt;Jr.asMilliseconds=OIe;Jr.asSeconds=HZt;Jr.asMinutes=WZt;Jr.asHours=qZt;Jr.asDays=YZt;Jr.asWeeks=XZt;Jr.asMonths=KZt;Jr.asQuarters=ZZt;Jr.asYears=QZt;Jr.valueOf=JZt;Jr._bubble=GZt;Jr.clone=eQt;Jr.get=tQt;Jr.milliseconds=nQt;Jr.seconds=rQt;Jr.minutes=iQt;Jr.hours=aQt;Jr.days=oQt;Jr.weeks=cQt;Jr.months=sQt;Jr.years=lQt;Jr.humanize=pQt;Jr.toISOString=M6;Jr.toString=M6;Jr.toJSON=M6;Jr.locale=bIe;Jr.localeData=_Ie;Jr.toIsoString=rd("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",M6);Jr.lang=xIe;On("X",0,0,"unix");On("x",0,0,"valueOf");pn("x",x6);pn("X",LYt);Di("X",function(n,e,r){r._d=new Date(parseFloat(n)*1e3)});Di("x",function(n,e,r){r._d=new Date(Vr(n))});//! moment.js
Qt.version="2.30.1";gYt(aa);Qt.fn=jt;Qt.min=rKt;Qt.max=iKt;Qt.now=aKt;Qt.utc=_h;Qt.unix=IZt;Qt.months=LZt;Qt.isDate=sT;Qt.locale=Lm;Qt.invalid=m6;Qt.duration=ff;Qt.isMoment=nf;Qt.weekdays=FZt;Qt.parseZone=DZt;Qt.localeData=tg;Qt.isDuration=GP;Qt.monthsShort=kZt;Qt.weekdaysMin=BZt;Qt.defineLocale=RQ;Qt.updateLocale=DXt;Qt.locales=LXt;Qt.weekdaysShort=$Zt;Qt.normalizeUnits=id;Qt.relativeTimeRounding=fQt;Qt.relativeTimeThreshold=hQt;Qt.calendarFormat=PKt;Qt.prototype=jt;Qt.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const gQt=()=>{const[n,e]=C.useState([]),[r,i]=C.useState(!1),[a,o]=C.useState(0),s=UOe(),{t:l,i18n:c}=Hp(),u=p=>{switch(!0){case(p>=980&&p<=1580):return 0;case(p>=1580&&p<=2260):return 1;case(p>=2260&&p<=2940):return 2;case(p>=2940&&p<=3620):return 3;case(p>=3620&&p<=4300):return 4;case(p>=4300&&p<=4980):return 5;default:return 0}},d=()=>{window.open("https://beian.miit.gov.cn")};C.useEffect(()=>{var b,x;(x=(b=window.Tracert)==null?void 0:b.call)==null||x.call(b,"expo","a4378.b118745.c400963","");const p=Qt().valueOf();let g=0,m=null;const v=()=>{document.visibilityState==="hidden"?m=Qt().valueOf():document.visibilityState==="visible"&&m&&(Qt().valueOf()-m>$Ne&&(g+=Qt().valueOf()-m),m=null)};document.addEventListener("visibilitychange",v);const y=()=>{var S,M,E,T;const _=Qt().valueOf()-p-g;_>1e3&&((M=(S=window==null?void 0:window.Tracert)==null?void 0:S.call)==null||M.call(S,"set",{spmAPos:"a4378",spmBPos:"b118745",pathName:"首页"}),(T=(E=window==null?void 0:window.Tracert)==null?void 0:E.call)==null||T.call(E,"logPv",{residence_time:_})),document.removeEventListener("visibilitychange",v),window.removeEventListener("beforeunload",y)};return window.addEventListener("beforeunload",y),y},[]),C.useEffect(()=>{const p=pI("lang")||"zh-CN";c.changeLanguage(p==="en-US"?"en":"zh")},[]),C.useEffect(()=>{window.onscroll=function(){const{scrollHeight:m,clientHeight:v,scrollTop:y}=document.documentElement;o(u(y)),y>=600&&!r&&i(!0),(y<=600||m-v<=y+1)&&i(!1)};const p=document.getElementById("video");p&&(p.src="https://gw.alipayobjects.com/v/huamei_tu4rvn/afts/video/A*V9DKSIe4nKEAAAAAAAAAAAAADp_eAQ",p.addEventListener("play",()=>{p.style.visibility="visible"}));const g=document.getElementById("firstPage");g&&s&&(g.style.height="35vh",g.style.minHeight="1000px")},[]);const f=C.useMemo(()=>c.language==="en"?["https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*9vxoSI3Rm0IAAAAAAAAAAAAADp_eAQ/original","https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*9KxVQIWeoMMAAAAAAAAAAAAADp_eAQ/original","https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*3CNASKuv-SkAAAAAAAAAAAAADp_eAQ/original","https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*WHt9R5DepBYAAAAAAAAAAAAADp_eAQ/original","https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*nN72RLT2HXMAAAAAAAAAAAAADp_eAQ/original","https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*cIgUTpIp3AEAAAAAAAAAAAAADp_eAQ/original"]:["https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*1pkATrKdVqQAAAAAAAAAAAAADp_eAQ/original","https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*P4PtQ79tujEAAAAAAAAAAAAADp_eAQ/original","https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*QMpmRKVlVyYAAAAAAAAAAAAADp_eAQ/original","https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*DtetRqhNvWQAAAAAAAAAAAAADp_eAQ/original","https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*oA2_QIQQ09IAAAAAAAAAAAAADp_eAQ/original","https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*erDCTqGa9_MAAAAAAAAAAAAADp_eAQ/original"],[c.language]),h=()=>bn(Yze,{children:n==null?void 0:n.map((p,g)=>{const m=g%2===0;return bn("div",{className:ei["tuGraph-project"],children:zr("div",{className:ei["project-body"],style:{flexDirection:m?"row":"row-reverse"},children:[zr("div",{className:ei.title,children:[zr("div",{className:ei["project-info"],children:[bn("img",{src:"https://mdn.alipayobjects.com/huamei_0bwegv/afts/img/A*kU6QRJfXtEQAAAAAAAAAAAAADu3UAQ/original",alt:""}),bn("p",{className:ei["info-title"],children:(p==null?void 0:p.name)+l("home.graph")})]}),bn("p",{className:ei["project-parse"],children:p==null?void 0:p.comment})]}),bn("img",{className:ei.tuGraphImg,src:f[g],alt:""})]})},p==null?void 0:p.id)})});return zr("div",{className:ei.home,children:[bn("div",{style:{position:"absolute",top:0,right:0,zIndex:99},children:bn(Qqt,{})}),bn("img",{className:ei.logo,src:"https://mdn.alipayobjects.com/huamei_0bwegv/afts/img/A*YzqCQbdW7nUAAAAAAAAAAAAADu3UAQ/original",alt:""}),zr("div",{className:ei["home-header"],id:"firstPage",children:[bn("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:ei["header-img"],id:"video",style:{visibility:"hidden"}}),zr("div",{className:ei["open-source"],children:[bn("img",{src:"https://mdn.alipayobjects.com/huamei_0bwegv/afts/img/A*-GbzRqZIBdwAAAAAAAAAAAAADu3UAQ/original",alt:"",className:ei.title}),bn(BOe,{needFixed:r,templateIndex:a,spmD:"b118745.c400963.d535120",getQueryList:p=>e(p)}),zr("div",{className:ei["tuGraph-icon"],children:[bn("p",{children:"Powered by"}),bn("div",{className:ei["tuGraph-img"],onClick:()=>{window.open(f0e)}}),bn("div",{className:ei.line}),bn("div",{className:ei["x-lab"],onClick:()=>{window.open(Jqt)}}),zr("div",{className:ei.gitHub,onClick:()=>{window.open(h0e)},children:[bn("div",{className:ei["gitHub-url"]}),bn("p",{children:"GitHub"})]})]}),zr("div",{className:ei.text,children:[bn("p",{children:l("home.desc")}),bn("div",{className:ei["white-strip"]})]})]}),bn("div",{className:ei.linear})]}),h(),zr("div",{className:ei["home-bottom"],children:[bn("img",{src:"https://mdn.alipayobjects.com/huamei_0bwegv/afts/img/A*lchoQ4PxAVAAAAAAAAAAAAAADu3UAQ/original",alt:"",className:ei["os-graph"]}),zr("div",{className:ei["bottom-img"],children:[bn("div",{className:ei["bottom-link"],onClick:()=>{window.open(f0e)},children:bn("div",{className:ei["tuGraph-url"]})}),zr("div",{className:ei["bottom-link"],onClick:()=>{window.open(h0e)},children:[bn("div",{className:ei["gitHub-url"]}),bn("p",{children:"GitHub"})]}),zr("div",{className:ei["bottom-link"],onClick:()=>{window.open(eYt)},children:[bn("div",{className:ei["antv-url"]}),bn("p",{children:"AntV"})]})]}),bn("div",{className:ei.gov,children:bn("div",{className:ei["gov-text"],onClick:d,children:"ICP备案：京ICP备15032932号-51"})})]})]})};var _0e=function(e,r){var i=arguments;if(r==null||!sM.call(r,"css"))return C.createElement.apply(void 0,i);var a=i.length,o=new Array(a);o[0]=Yq,o[1]=qq(e,r);for(var s=2;s<a;s++)o[s]=i[s];return C.createElement.apply(null,o)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(_0e||(_0e={}));function IIe(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return Ebe(e)}const mQt={"search-height":"54px"},vQt=n=>{const e=Je.useMemo(()=>Kqt(mQt),[]);return bn("div",{className:"os-graph-container",style:e,css:IIe`
        minheight: 100vh;
      `,children:n.children})},yQt=async(n,e)=>{const r=await oT(`/tumaker/api/template/executeShareQueryTemplate/${n}/${e}`,{method:"get"});return r!=null&&r.success?r==null?void 0:r.data:[]},bQt="_antv_1rmun_35",xQt="_tugraph_1rmun_36",_Qt="_xlab_1rmun_37",wQt="_shareItem_1rmun_58",SQt="_shareItemLabel_1rmun_61",EQt="_shareItemContent_1rmun_64",CQt="_shareItemVal_1rmun_69",MQt="_shareItemTitle_1rmun_76",wa={"mobile-result":"_mobile-result_1rmun_1","graph-waterfall":"_graph-waterfall_1rmun_7","os-graph":"_os-graph_1rmun_13","power-by-divide":"_power-by-divide_1rmun_23","power-by":"_power-by_1rmun_23",antv:bQt,tugraph:xQt,xlab:_Qt,shareItem:wQt,shareItemLabel:SQt,shareItemContent:EQt,shareItemVal:CQt,"button-icon":"_button-icon_1rmun_73",shareItemTitle:MQt},TQt=IIe`
  display: flex;
  flex-direction: column;

  .header {
    height: var(--search-height);
    background-color: #f2f2f2;
    display: flex;
    align-items: center;
    padding: 0 24px;
    justify-content: space-between;
    .sel {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .control{
      display: flex;
    }

    button {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
      width: fix-content;
      padding: 0 12px;
      height: 32px;
      background: #ffffff;
      border: 1px solid #dddddf;
      border-radius: 6px;
      margin-left: 8px;
      cursor: pointer;

      &:hover {
        background: #f5f5f5;
      }
    }
  }

  .graph {
    height: calc(100vh - var(--search-height));
  }

  .graph-share {
    height: 100vh;
  }

  .ant-spin-nested-loading,
  .ant-spin-container {
    height: 100%;
  }

  .ant-spin-spinning {
    max-height: none !important;
  }
`,w0e=n=>{const e=new Date(n);return Math.floor(e.getTime()/1e3)},AQt=()=>{const n=new Date,e=Math.floor(n.getTime()/1e3),r=new Date;return r.setFullYear(n.getFullYear()-10),{startTimestamp:Math.floor(r.getTime()/1e3),endTimestamp:e}},RQt=()=>{const n=a=>{const o=/^\/graphs\/([^\/]+)\/github\/(\S+)/,s=a.match(o),l=c=>Nu.repo_contribute===c?"project-contribution":Nu.repo_ecology===c?"project-ecosystem":Nu.repo_community===c?"project-community":Nu.acct_activity===c?"developer-activity":Nu.acct_partner===c?"os-partner":Nu.acct_interest===c?"os-interest":c;return s?{templateType:l(s[1]),path:s[2]}:{templateType:"",path:""}},e=a=>{const o=new URLSearchParams;for(const[s,l]of Object.entries(a))Array.isArray(l)?l.forEach(c=>o.append(s,c)):o.set(s,String(l));return o.toString()},r=(a,o)=>{const s={},l=new URLSearchParams(a);for(const[c,u]of l)s[c]=u;if(o==="project-contribution"){const c=AQt(),u=l.get("start-time"),d=l.get("end-time");let f=c.startTimestamp,h=c.endTimestamp;u&&(f=w0e(u)),d&&(h=w0e(d)),s["start-time"]=f,s["end-time"]=h}return e(s)},i=n(location.pathname);return{templateType:i.templateType,path:i.path,extendsStr:r(location.search,i.templateType)}},PQt="_layoutPopover_19cmt_1",NQt="_layoutItem_19cmt_7",OQt="_layoutItemText_19cmt_29",oV={layoutPopover:PQt,layoutItem:NQt,layoutItemText:OQt},IQt=({setLayout:n})=>{const{t:e}=Hp(),r=[{img:"https://mdn.alipayobjects.com/huamei_qcdryc/afts/img/A*KgwCS5Fjk4MAAAAAAAAAAAAADgOBAQ/original",title:`${e("forceLayout")}`,type:"force"}],i=a=>{n(a)};return tn.jsx($Y,{content:tn.jsx("div",{className:oV.layoutPopover,children:r.map(a=>tn.jsxs("div",{className:oV.layoutItem,onClick:()=>i(a.type),children:[tn.jsx("img",{src:a.img}),tn.jsx("div",{className:oV.layoutItemText,children:a.title})]},a.type))}),children:tn.jsx(ms,{style:{width:"auto"},children:`${e("layout")}`})})},DQt="_icon_1lb93_4",LQt="_extension_item_1lb93_8",Ig={"extension-modal":"_extension-modal_1lb93_1",icon:DQt,extension_item:LQt},kQt=({open:n,onClose:e})=>{const{t:r}=Hp();return tn.jsxs(Ju,{open:n,title:tn.jsxs("div",{className:Ig.title,children:[tn.jsx("img",{src:zOe,className:Ig.icon,alt:""}),r("graph.extension")]}),footer:null,onCancel:e,className:Ig["extension-modal"],children:[tn.jsx("p",{className:Ig.extension_desc,children:r("graph.extension_desc")}),tn.jsxs("div",{className:Ig.extension_item,children:[tn.jsx("img",{src:tYt,className:Ig.logo,alt:""}),tn.jsx("a",{href:rYt,target:"_blank",rel:"noreferrer",children:r("graph.extension_chrome")})]}),tn.jsxs("div",{className:Ig.extension_item,children:[tn.jsx("img",{src:nYt,className:Ig.logo,alt:""}),tn.jsx("a",{href:iYt,target:"_blank",rel:"noreferrer",children:r("graph.extension_edge")})]}),tn.jsxs("p",{children:[r("graph.visit")," ",tn.jsx("a",{href:aYt,target:"_blank",children:"Github:Hypercrx"})," ",r("graph.detail")]})]})},S0e=()=>{const n=Bq(),e=UOe(),r=zq(),i=C.useRef(null),a=C.useRef({}),[o,s]=$Oe(()=>({locationState:n||{},isShareOpen:!1,isRealTimeOpen:!1,shareLink:"",pngShareLink:"",isLoading:!1,isErrorShareParams:!1,renderMode:new URLSearchParams(n.search).get("render-mode")==="3D"?iI["3D"]:iI["2D"],extendParams:{},isExtensionOpen:!1})),[l,c]=C.useState([]),[u,d]=C.useState({undo:!0,redo:!0}),{locationState:f,isShareOpen:h,isRealTimeOpen:p,isLoading:g,shareLink:m,extendParams:v,pngShareLink:y,isExtensionOpen:b}=o,{data:x,warehouseValue:_,querySource:S,searchValue:M,templateId:E,templateParameterList:T}=f||{},P=new URLSearchParams(n.search),A=P.get("shareId"),N=P.get("shareParams"),O=P.get("shareParams")||n.pathname.includes("/graphs")&&n.pathname.includes("/github"),{t:I,i18n:D}=Hp(),k=pI("lang")||"zh-CN",$=Je.useRef(),B=async()=>{var Me;if(!$.current)return;(Me=window==null?void 0:window.Tracert)==null||Me.call("click","a4378.b118751.c400429.d533734");const q=await $.current.toDataURL({mode:"viewport"}),[Q,ie]=q.split(","),oe=Q.match(/:(.*?);/)[1],ue=atob(ie);let le=ue.length;const me=new Uint8Array(le);for(;le--;)me[le]=ue.charCodeAt(le);const J=new Blob([me],{type:oe}),pe=URL.createObjectURL(J),ve=document.createElement("a");ve.href=pe,ve.download=_||"os graph",ve.click()},F=q=>{var oe,ue;const Q=((oe=q==null?void 0:q.nodes)==null?void 0:oe.map(le=>{const{comment:me,id:J,name:pe,nodeType:ve,source:Me}=le;return{comment:me,id:J,name:pe,nodeType:ve,source:Me}}))||[],ie=((ue=q==null?void 0:q.edges)==null?void 0:ue.map(le=>{const{comment:me,count:J,direction:pe,edgeType:ve,id:Me,name:Re,name_en:Xe,source:He,target:ee,weight:Y}=le;return{comment:me,count:J,direction:pe,edgeType:ve,id:Me,name:Re,name_en:Xe,source:He,target:ee,weight:Y}}))||[];return{...q,nodes:Q,edges:ie}},G=()=>{var ue;if(!$.current)return;(ue=window==null?void 0:window.Tracert)==null||ue.call("click","a4378.b118751.c400429.d533733");const q=$.current.getData(),Q=new Blob([JSON.stringify(F(q),null,2)],{type:"application/json"}),ie=URL.createObjectURL(Q),oe=document.createElement("a");oe.href=ie,oe.download=_||"os graph",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(ie)},z=q=>{s(Q=>{Q.isLoading=q})};C.useEffect(()=>{D.changeLanguage(k==="en-US"?"en":"zh")},[]);const U=q=>{s(Q=>{var J,pe;Q.locationState=q;const{warehouseName:ie,path:oe}=q,ue=window.location.search?window.location.search+"&":"?",le=window.location.origin,me=(pe=(J=q==null?void 0:q.templateParameterList)==null?void 0:J.map(ve=>{const{parameterValue:Me,parameterName:Re}=ve;return`${Re}=${Me}`}))==null?void 0:pe.join("&");Q.shareLink=`${le}/graphs/${oe}/github/${ie}${ue+me}`,Q.pngShareLink=`${le}/png/graphs/${oe}/github/${ie}${ue+me}`})},H=C.useMemo(()=>{const q=E?l==null?void 0:l.find(Q=>Q.id===E):l[0];return{templateParameterList:(q==null?void 0:q.templateParameterList)||[],path:(q==null?void 0:q.path)||""}},[E,l]);if(C.useEffect(()=>{d({undo:!0,redo:!0})},[E]),C.useEffect(()=>{A&&N&&yQt(A,N).then(q=>{s(Q=>{Q.locationState.data=jC(q)})}),n.pathname.includes("/graphs")&&n.pathname.includes("/github")&&ROe(RQt()).then(q=>{s(Q=>{Q.locationState.data=jC(q)})}).catch(()=>{s(q=>{q.isErrorShareParams=!0})})},[A,N]),C.useEffect(()=>{n.state&&U(n.state)},[n.state]),C.useEffect(()=>{const q=/^\/graphs\/([^\/]+)\/github\/(\S+)/,Q=n.pathname.match(q);Q&&Q[0]&&(document.title=CGt[Q[1]]||"OSGraph")},[n.pathname]),C.useEffect(()=>{(()=>{i.current&&(i.current.style.transform=`scale(${Math.min(Math.max(window.innerWidth/1e3,.5),1)})`,i.current.style.transformOrigin="100% 100%")})()},[i.current]),C.useEffect(()=>{const q=Qt().valueOf();let Q=0,ie=null;const oe=()=>{document.visibilityState==="hidden"?ie=Qt().valueOf():document.visibilityState==="visible"&&ie&&(Qt().valueOf()-ie>$Ne&&(Q+=Qt().valueOf()-ie),ie=null)};document.addEventListener("visibilitychange",oe);const ue=()=>{var me,J,pe,ve;const le=Qt().valueOf()-q-Q;if(le>1e3){(J=(me=window==null?void 0:window.Tracert)==null?void 0:me.call)==null||J.call(me,"set",{spmAPos:"a4378",spmBPos:"b118751",pathName:"结果页"});const Me=!!(n.pathname.includes("/graphs")&&n.pathname.includes("/github"));(ve=(pe=window==null?void 0:window.Tracert)==null?void 0:pe.call)==null||ve.call(pe,"logPv",{residence_time:le,isSharePage:Me})}document.removeEventListener("visibilitychange",oe),window.removeEventListener("beforeunload",ue)};return window.addEventListener("beforeunload",ue),ue},[]),o.isErrorShareParams)return bn(WSe,{source:"error"});const X=()=>{const q=pI("lang");r(q?`/?lang=${q}`:"/")},V=q=>{s(Q=>{Q.locationState={...f,templateId:q}})};C.useEffect(()=>{var q,Q;O||(Q=(q=window.Tracert)==null?void 0:q.call)==null||Q.call(q,"expo","a4378.b118751.c400429","")},[]);const W=q=>p?`## OSGraph
![OSGraph Chart](${q})`:`<iframe style="width:100%;height:auto;min-width:600px;min-height:400px;" src="${q}" frameBorder="0"></iframe>`,K=()=>{var Q;const q=p?"d533736":"d533735";(Q=window==null?void 0:window.Tracert)==null||Q.call("click",`a4378.b118751.c400429.${q}`)};return zr(vQt,{children:[zr("div",{className:e?wa["mobile-result"]:"graph-container",css:TQt,children:[!O&&zr("div",{className:"header",children:[zr("div",{className:"sel",children:[bn("img",{src:"https://mdn.alipayobjects.com/huamei_0bwegv/afts/img/A*9HFERrqAg58AAAAAAAAAAAAADu3UAQ/original",alt:"",onClick:X,style:{cursor:"pointer"}}),bn(BOe,{needFixed:!1,defaultStyle:!0,graphWarehouseValue:_,graphQuerySource:S,graphSearchValue:M,graphTemplateId:E,graphParameterList:T,onSearch:q=>U(q),getGraphLoading:z,graphExtendParams:v,onUpdateTemplateId:V,spmD:"b118751.c400429.d535123",getQueryList:q=>c(q)}),bn(POe,{templateId:E,path:H.path,templateParameterList:H.templateParameterList,onChangeParams:q=>s(Q=>{Q.extendParams=q})}),zr("div",{style:{display:"flex"},children:[bn("span",{onClick:()=>{var q,Q;return(Q=(q=a.current)==null?void 0:q.undo)==null?void 0:Q.call(q)},children:zr(ms,{style:{width:"auto"},disabled:u.undo,children:[bn($nt,{}),I("historyAction.undo")]})}),bn("span",{onClick:()=>{var q,Q;return(Q=(q=a.current)==null?void 0:q.redo)==null?void 0:Q.call(q)},children:zr(ms,{style:{width:"auto"},disabled:u.redo,children:[bn(Ont,{}),I("historyAction.redo")]})})]}),bn(IQt,{setLayout:()=>{var q;(q=$.current)==null||q.layout()}})]}),zr("div",{className:"control",children:[zr("button",{onClick:G,children:[bn("img",{src:p0e,alt:"",className:wa["button-icon"]}),"JSON"]}),zr("button",{onClick:B,children:[bn("img",{src:p0e,alt:"",className:wa["button-icon"]}),I("graph.download_png")]}),zr("button",{onClick:()=>{s(q=>{q.isShareOpen=!0})},children:[bn("img",{src:tV,alt:"",className:wa["button-icon"]}),I("graph.link")]}),zr("button",{onClick:()=>{s(q=>{q.isRealTimeOpen=!0})},children:[bn("img",{src:tV,alt:"",className:wa["button-icon"]}),I("graph.real_time")]}),zr("button",{onClick:()=>{s(q=>{q.isExtensionOpen=!0})},children:[bn("img",{src:zOe,alt:"",className:wa["button-icon"]}),I("graph.extension")]})]})]}),bn(nX,{spinning:g,children:bn("div",{className:`${O?"graph-share":"graph"}`,children:bn(Pqt,{data:x,renderMode:o.renderMode,renderTemplate:E,onReady:q=>$.current=q,setHistoryStatus:d,ref:a,queryList:l},o.renderMode)})}),zr("div",{className:wa["graph-waterfall"],ref:i,children:[bn("div",{className:wa["os-graph"],onClick:()=>window.open("/")}),bn(BJe,{plain:!0,className:wa["power-by-divide"],children:"Powered by"}),zr("div",{className:wa["power-by"],children:[bn("div",{className:wa.tugraph,onClick:()=>window.open("https://www.tugraph.tech/")}),bn("div",{className:wa.antv,onClick:()=>window.open("https://antv.antgroup.com/")}),bn("div",{className:wa.xlab,onClick:()=>window.open("https://github.com/X-lab2017?language=shell")})]})]})]}),zr(Ju,{title:zr("div",{className:wa.shareItemTitle,children:[bn("img",{src:tV,alt:"",className:wa["button-icon"]}),p?I`graph.real_time`:I`graph.link`]}),width:800,open:h||p,footer:null,onCancel:()=>{s(q=>{q.isShareOpen=!1,q.isRealTimeOpen=!1})},children:[zr("div",{className:wa.shareItem,children:[zr("div",{className:wa.shareItemLabel,children:[p?I`graph.real_time_link`:I`graph.share_link`,"："]}),zr("div",{className:wa.shareItemContent,children:[bn(py.TextArea,{value:p?y:m,autoSize:{maxRows:3,minRows:3},className:wa.shareItemVal}),bn(vW.CopyToClipboard,{text:p?y:m,onCopy:(q,Q)=>{Q?lp.success(I`copySuccess`):lp.error("复制失败，请稍后再试")},children:bn(ms,{type:"primary",onClick:K,children:I`copy`})})]})]}),zr("div",{className:wa.shareItem,children:[zr("div",{className:wa.shareItemLabel,children:[p?I`graph.real_time_code`:I`graph.share_link_code`,"："]}),zr("div",{className:wa.shareItemContent,children:[bn(py.TextArea,{value:W(p?y:m),autoSize:{maxRows:3,minRows:3},className:wa.shareItemVal}),bn(vW.CopyToClipboard,{text:W(p?y:m),onCopy:(q,Q)=>{Q?lp.success(I`copySuccess`):lp.error("复制失败，请稍后再试")},children:bn(ms,{type:"primary",onClick:K,children:I`copy`})})]})]})]}),bn(kQt,{open:b,onClose:()=>s(q=>{q.isExtensionOpen=!1})})]})},FQt=i9e([{path:"/",element:tn.jsx(gQt,{})},{path:"/result",element:tn.jsx(S0e,{})},{path:"/graphs/*",element:tn.jsx(S0e,{})},{path:"*",element:tn.jsx(WSe,{})}]);var E0e;(E0e=window==null?void 0:window.Tracert)==null||E0e.call("set",{spmAPos:"a4378",bizType:"common"});HP.createRoot(document.getElementById("root")).render(tn.jsx(Je.StrictMode,{children:tn.jsx(h9e,{router:FQt})}));
